---
title: "ESB 例外管理フレームワークの設計 |Microsoft ドキュメント"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: cfc2688c-c01c-4244-9e35-3d482135d8b7
caps.latest.revision: "4"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: c8c9bf8691701aa9fba8060865fcd3cb5abfba06
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/20/2017
---
# <a name="design-of-the-esb-exception-management-framework"></a>ESB 例外管理フレームワークの設計
例外を管理するための一貫性があり再利用可能なのパターンは、任意の開発プロジェクトのコアの考慮事項です。それらは保守容易性を最大化し、展開後にアプリケーションをサポートするために容易にできるようにするのに役立ちます。  
  
 一般的な BizTalk アプリケーション可能性があります、BizTalk メッセージング機能を使用して、必要に応じて、オーケストレーションの処理を開始、ビジネス ルール エンジンを呼び出して、いくつかの基幹業務 (LOB) またはエンタープライズ リソース プランニング (ERP) システムとやり取りおよびを返す、別のサードパーティ製システムに対する応答です。 さらに、BizTalk サブシステムを含む、これらのコンポーネントの実行時の場所は、現在の環境全体に分散 1 つまたは複数のサーバーに配置することがあります。 これは一般的なシナリオであり、キャッチと分離されたサブシステムの ESB または BizTalk のいずれかで発生する例外またはシステムでは、さまざまなサード パーティ製 LOB、それぞれが独自の例外処理の制約を持つレポートをサポートするためにシステムが必要です。 たとえば、メインフレームが; 通常の処理サイクル中に、Web サイトから送信された注文を却下可能性があります。Web サイトは、このエラーを補正し、ユーザーに通知する必要があります。  
  
 ESB アプリケーションの複雑さおよびにより、環境、アプリケーション例外の管理のための一貫したソリューションの開発は、次の一般的な設計目標を具体化する必要があります。  
  
-   検出して、BizTalk Server 環境で発生する例外の処理の標準化された方法を指定 (つまり、メッセージングおよびオーケストレーションのサブシステムで)。  
  
-   自動化されたプロセスに反応し、アプリケーションの例外を管理できるようにするための一般的なパターンを提供します。  
  
-   再利用を容易に、疎結合の例外管理パターンを提供します。  
  
-   アプリケーション例外と、BizTalk サブシステムに適用できる使用可能なメッセージ状態には、共通のレポート メカニズムを提供します。  
  
 理由を理解する、[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]カスタム エラー メカニズムを提供で BizTalk Server とこれらの機能はない理由完全例外管理機能を理解する必要はつまり、例外管理フレームワーク、およびそのしくみ、上記の設計目標を達成できること。  
  
## <a name="biztalk-server-exception-reporting"></a>BizTalk Server 例外の報告  
 BizTalk Server は、次の例外の処理とレポート メカニズムをサポートします。  
  
-   失敗したメッセージのルーティング  
  
-   BizTalk Server 管理コンソール  
  
-   Microsoft のイベント ログ  
  
-   カスタム開発オプション  
  
 既定では、例外を処理するための BizTalk Server の機能はオペレーターの介入に大きく依存します。 たとえば、ユーザーが、検証ステージ中に例外の原因となる BizTalk Server にメッセージを送信するような状況を検討してください。 既定では、メッセージは保留キューにルーティングされる場合、メッセージ ボックス データベースに発行されます。 これは、いる演算子は、次のことを意味します。  
  
-   個別に検出されません、例外が発生しました。  
  
-   使用してディスクに障害が発生したメッセージを手動で保存、[!INCLUDE[prague](../includes/prague-md.md)]管理コンソールです。  
  
-   手動で編集し、メッセージを解決し、システムに再送信します。 このプロセスではいくつかのインスタンスでの重要なコンテキスト情報が失われる可能性があります。  
  
 これらの問題を解決するのには[!INCLUDE[prague](../includes/prague-md.md)]失敗メッセージのルーティング メカニズムを提供します。 開発者および管理者ことができますを使用してこのプロセスのオーケストレーションまたはメッセージング サブシステムで発生する例外をサブスクライブするように構成するメッセージの送信ポートを作成します。 これは、エラーの自動検出と、元のメッセージの状態を保持し、例外を検出の問題を解決するルーティング機構を提供します。  
  
 オーケストレーション プロセスの失敗したメッセージの自動ルーティングが指定されていないため、開発者がスコープ図形をオーケストレーションに例外ハンドラー ブロックを追加することでエラーを考慮する必要があります。 このソリューションでは、各オーケストレーションは、独自の例外処理を持つことができますが、複数のオーケストレーション間で機能を処理する例外を再利用するためのメカニズムはありません。  
  
 つまりがメッセージングの例外を処理し、BizTalk Server システムで管理されている 2 つの非常に異なる方法と 3 番目の方法がどのオーケストレーションで例外が処理されます。 そのため、開発者は、例外処理機構はこのセクションで説明した要件と一致するシステムを実装する場合は、独自の要件に合わせてをカスタマイズする必要があります。  
  
## <a name="biztalk-server-administration-console"></a>BizTalk Server 管理コンソール  
 [!INCLUDE[prague](../includes/prague-md.md)]管理コンソールは、BizTalk グループのハブと呼ばれるグループの概要ページのセットを提供します。 これらのページを使用して、管理者を照会できます保留中のメッセージと例外がアプリケーション、サービス名、エラー コード、または、URI でグループ化された図 1 に示すようにします。  
  
 ![管理コンソール](../esb-toolkit/media/ch4-adminconsole.gif "Ch4 AdminConsole")  
  
 **図 1**  
  
 **[!INCLUDE[prague](../includes/prague-md.md)]管理コンソールのグループ概要ページ**  
  
 グループの概要機能は、例外を表示する一般的なユーザー インターフェイスを提供しますが、ビューは「ライブ」サービス インスタンスに限られます。 状態を調べることにより、管理者は、ツリーの各項目にドリル ダウンする必要があるために、厄介な作業があります。 さらに、他のいくつかの要因は、アプリケーション例外レポート ツールとして BizTalk Server 管理コンソール機能を制限します。  
  
-   ビジネス インテリジェンス用データ マイニング機能はありません。 たとえば、1 か月ごとに最も低い問題のあるアプリケーションのクエリまたはアプリケーションの例外についての 3 か月の傾向を調べますできません。  
  
-   ビジネスは警告を特定のアプリケーション例外が発生したとき、または特定のしきい値に達したときに発生させる必要がありますが、この種の例外イベントにサブスクライブする機能はありません。  
  
-   Microsoft 管理コンソール (MMC) のこと、管理コンソール メカニズムを使用して、ユーザー インターフェイス (UI) が、理想的なインターフェイスではありませんしは常に実稼働環境にアクセスするときに便利です。 少なくとも、ユーザーは、BizTalk オペレータ ロールのメンバーであることが必要です。実稼働環境での MMC へのアクセスは通常のみターミナル サーバーを使用します。  
  
-   コンソールには、未処理の例外 (中断されたサービス インスタンス) のみが表示されます。 開発者は、オーケストレーションで例外を処理する場合オーケストレーションを正常に完了例外情報はことはありません、管理コンソールに表示します。  
  
 [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] ESB 失敗オーケストレーション例外ルーティング メカニズムによりこれらの制限に対処します。 失敗のメッセージのルーティング メカニズムに似ています[!INCLUDE[prague](../includes/prague-md.md)]です。 さらに、 [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] ESB 失敗オーケストレーション例外ルーティング メカニズムと失敗のメッセージのルーティング メカニズムの両方から生成されたメッセージをサブスクライブする送信ポートのパイプライン コンポーネントが含まれていて、それらを正規化します。  
  
 ESB 例外管理フレームワークを活用その他の機能の BizTalk Server で、サブスクリプションのモデル、およびイベントに基づくビジネス アクティビティ監視 (BAM) などです。 つまり、ESB 例外管理フレームワークが、例外を持つデータ ポイント、BAM を追跡し、監視用 BizTalk BAM ポータルに公開できます。