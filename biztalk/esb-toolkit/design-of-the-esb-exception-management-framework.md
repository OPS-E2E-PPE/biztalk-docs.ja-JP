---
title: ESB 例外管理フレームワークの設計 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: cfc2688c-c01c-4244-9e35-3d482135d8b7
caps.latest.revision: 4
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 14c7c7e8f6ba2632e68ed81e98a562e5ef316120
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65394638"
---
# <a name="design-of-the-esb-exception-management-framework"></a>ESB 例外管理フレームワークの設計
例外を管理するための一貫性と再利用可能なパターンが任意の開発プロジェクトの主要な考慮事項です。保守容易性を最大化し、デプロイ後にアプリケーションをサポートするために容易にできるようにするのに役立ちます。  
  
 一般的な BizTalk アプリケーション可能性があります、BizTalk メッセージング機能を使用して、必要に応じて、オーケストレーションの処理を開始、ビジネス ルール エンジンを呼び出す、いくつかの基幹業務 (LOB) またはエンタープライズ リソース プランニング (ERP) システムと対話およびを返す、別のサードパーティ製システムへの応答です。 さらに、BizTalk のサブシステムを含む、これらのコンポーネントの実行時の場所は、現在の環境全体に分散 1 つまたは複数のサーバーに配置する場合があります。 一般的なシナリオは、これをキャッチして、ESB BizTalk のいずれかで発生する例外のサブシステムを分離するか、さまざまなサードパーティ製 LOB システムでそれぞれが独自の例外処理の制約を持つレポートをサポートするためにシステムが必要です。 メインフレームの可能性があります。 通常の処理サイクル中に Web サイトから送信された注文を拒否するなどWeb サイトは、このエラーを補正し、ユーザーに通知する必要があります。  
  
 ESB アプリケーションの複雑さ、その環境のため、アプリケーション例外の管理のための一貫したソリューションの開発は、次の一般的な設計目標を具現化する必要があります。  
  
- 検出して、BizTalk Server 環境で発生する例外の処理の標準化された手法を提供する (つまり、メッセージングおよびオーケストレーションのサブシステムで)。  
  
- 自動化されたプロセスに反応し、アプリケーションの例外を管理できるようにするための一般的なパターンを提供します。  
  
- 再利用を容易にする疎結合の例外管理パターンを提供します。  
  
- アプリケーションの例外と、使用可能なメッセージの状態の任意の BizTalk サブシステムに適用できる共通のレポート メカニズムを提供します。  
  
  理由を理解する、[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]カスタム エラー メカニズムを提供しますつまり、例外管理フレームワークとそのしくみ、BizTalk Server となぜこれらの機能は完全に利用可能な例外の管理機能を理解する必要が。前のデザイン目標を達成できること。  
  
## <a name="biztalk-server-exception-reporting"></a>BizTalk Server 例外レポート  
 BizTalk Server は、次の例外処理およびレポート メカニズムをサポートしています。  
  
- 失敗したメッセージのルーティング  
  
- BizTalk Server 管理コンソール  
  
- Microsoft イベントのログ  
  
- カスタム開発オプション  
  
  既定では、例外を処理するための BizTalk Server の機能はオペレーターの介入に大きく依存します。 たとえば、ユーザーが検証ステージ中に例外の原因となる BizTalk Server にメッセージを送信するような状況を検討してください。 既定では、メッセージは保留キューにルーティングされる場合、メッセージ ボックス データベースに公開します。 つまり、オペレーターは、行う必要があります。  
  
- 個別に検出する例外が発生しました。  
  
- 手動で、BizTalk Server 管理コンソールを使用してディスクに失敗したメッセージを保存します。  
  
- 手動で編集し、メッセージの修正し、システムに再送信します。 このプロセスでは、いくつかのインスタンスでの重要なコンテキスト情報を失う可能性があります。  
  
  これらの問題を解決するのには、BizTalk Server は、失敗のメッセージのルーティング メカニズムを提供します。 開発者と管理者はこれを使用してプロセスのオーケストレーションまたはメッセージング サブシステムで発生する例外をサブスクライブするように構成するメッセージの送信ポートを作成します。 これは、エラーの自動検出と、元のメッセージの状態を保持し、例外の検出の問題を解決してルーティング メカニズムを提供します。  
  
  オーケストレーション プロセスの失敗したメッセージの自動ルーティングが指定されていないため、開発者はスコープ図形をオーケストレーションに例外ハンドラー ブロックを追加することでエラー アカウントする必要があります。 このソリューションでは、各オーケストレーションは、独自の例外処理を持つことができますが、処理機能が複数のオーケストレーション間の例外を再利用するためのメカニズムはありません。  
  
  これはいるがメッセージングの例外を処理し、BizTalk Server システムで管理されている 2 つの非常にさまざまな方法と例外を処理するオーケストレーションに 3 番目の方法を意味します。 そのため、開発者は、例外処理メカニズムはこのセクションで説明した要件に一致するシステムを実装する場合は、独自の要件に合わせてをカスタマイズする必要があります。  
  
## <a name="biztalk-server-administration-console"></a>BizTalk Server 管理コンソール  
 BizTalk Server 管理コンソールでは、BizTalk グループのハブと呼ばれる、グループの概要ページのセットを提供します。 これらのページを使用して、管理者を照会できます中断されたメッセージと例外がアプリケーション、サービス名、エラー コード、または URI でグループ化された図 1 に示すようにします。  
  
 ![管理コンソール](../esb-toolkit/media/ch4-adminconsole.gif "Ch4 AdminConsole")  
  
 **図 1**  
  
 **BizTalk Server 管理コンソールのグループ概要ページ**  
  
 グループの概要機能には、例外を表示する一般的なユーザー インターフェイスが用意されていますが、ビューは、「ライブ」サービス インスタンスに制限されます。 管理者は各項目にツリーをドリル ダウンする必要がありますので、状態を調べる面倒な作業できます。 さらに、その他のいくつかの要因は、アプリケーション例外レポート ツールとして BizTalk Server 管理コンソールの機能を制限します。  
  
- ビジネス インテリジェンス用データ マイニングの機能はありません。 たとえば、月単位で最悪の場合問題のあるアプリケーションのクエリまたはアプリケーションの例外の四半期ごとの傾向を確認できません。  
  
- ビジネスはアラートが発生します。 特定のアプリケーション例外が発生した場合、または特定のしきい値に達する必要がありますが、これらの種類の例外イベントにサブスクライブする機能はありません。  
  
- Microsoft 管理コンソール (MMC) が、管理コンソールとして使用する、ユーザー インターフェイス (UI) メカニズムがない、最適なインターフェイスとは常に運用環境にアクセスする便利なされません。 少なくとも、ユーザーが、BizTalk オペレータ ロールのメンバーである必要があります。され、運用環境での MMC へのアクセス、通常はのみターミナル サーバーを使用します。  
  
- コンソールには、未処理の例外 (中断されたサービス インスタンス) のみが表示されます。 開発者は、オーケストレーションで例外を処理する場合オーケストレーションを正常に完了例外情報はことはありません、管理コンソールに表示します。  
  
  [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] ESB 失敗オーケストレーションの例外ルーティング メカニズムを通じてこれらの制限に対処します。 BizTalk Server の失敗のメッセージのルーティング メカニズムに似ています。 さらに、 [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] ESB 失敗オーケストレーションの例外ルーティング メカニズムと失敗のメッセージのルーティング メカニズムの両方から生成されたメッセージをサブスクライブする送信ポートのパイプライン コンポーネントが含まれていて、それらを正規化します。  
  
  ESB 例外管理フレームワークは、BizTalk Server で、サブスクリプション モデル、およびイベントに基づくビジネス アクティビティ監視 (BAM) などの他の機能を活用を受け取る。 つまり、ESB 例外管理フレームワークが例外のデータ ポイントが、BAM の追跡、監視するための BizTalk BAM ポータルに公開できます。