---
title: 例外の収集および ESB 例外プロセッサを使用してペイロードを保持する |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 52650eed-e760-4ade-bc3f-2b5b2a1c43ff
caps.latest.revision: 3
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: c43925006153ccfdcfa0c9700dd1ecf27fd3fd2f
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/27/2018
ms.locfileid: "36994819"
---
# <a name="collecting-exceptions-and-persisting-the-payload-using-the-esb-exception-processor"></a><span data-ttu-id="aa7e1-102">例外の収集および ESB 例外プロセッサを使用してペイロードを保持します。</span><span class="sxs-lookup"><span data-stu-id="aa7e1-102">Collecting Exceptions and Persisting the Payload Using the ESB Exception Processor</span></span>
<span data-ttu-id="aa7e1-103">このユース ケースでは、オーケストレーションの例外ハンドラーを BizTalk Server メッセージ ボックスに、ESB エラー メッセージを発行するか、または BizTalk 失敗のメッセージのルーティング メカニズムには、エラー メッセージが生成されます。</span><span class="sxs-lookup"><span data-stu-id="aa7e1-103">In this use case, either the exception handler for an orchestration publishes an ESB fault message to the BizTalk Server Message Box or the BizTalk Failed Message Routing mechanism generates a fault message.</span></span> <span data-ttu-id="aa7e1-104">ESB 例外エンコーダー パイプライン コンポーネントを事前構成済み、送信ポートは、エラー メッセージの種類の両方をサブスクライブします。</span><span class="sxs-lookup"><span data-stu-id="aa7e1-104">A send port, preconfigured with the ESB Exception Encoder pipeline component, subscribes to both of the fault message types.</span></span> <span data-ttu-id="aa7e1-105">エラー メッセージを処理し、それらを表示、InfoPath を使用して図 1 に示すようにディスク ファイルとしてが引き続き発生します。</span><span class="sxs-lookup"><span data-stu-id="aa7e1-105">It processes the fault messages and then persists them as disk files that you can view using InfoPath, as illustrated in Figure 1.</span></span>  
  
 <span data-ttu-id="aa7e1-106">![収集のペイロードの例外](../esb-toolkit/media/ch3-collectingexceptionspayload.gif "Ch3 CollectingExceptionsPayload")</span><span class="sxs-lookup"><span data-stu-id="aa7e1-106">![Collecting Exceptions Payload](../esb-toolkit/media/ch3-collectingexceptionspayload.gif "Ch3-CollectingExceptionsPayload")</span></span>  
  
 <span data-ttu-id="aa7e1-107">**図 1**</span><span class="sxs-lookup"><span data-stu-id="aa7e1-107">**Figure 1**</span></span>  
  
 <span data-ttu-id="aa7e1-108">**エラー メッセージをキャプチャし、ディスク ファイルを永続化します。**</span><span class="sxs-lookup"><span data-stu-id="aa7e1-108">**Capturing a fault message and persisting it to a disk file**</span></span>  
  
 <span data-ttu-id="aa7e1-109">[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]次が含まれています。</span><span class="sxs-lookup"><span data-stu-id="aa7e1-109">The [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] includes the following:</span></span>  
  
- <span data-ttu-id="aa7e1-110">**ESB エラー プロセッサの送信パイプラインを使用するポートを構成済みに送信します。**</span><span class="sxs-lookup"><span data-stu-id="aa7e1-110">**A preconfigured send port that uses the ESB Fault Processor send pipeline.**</span></span> <span data-ttu-id="aa7e1-111">独自の要件に従って、この送信ポートを構成できます。</span><span class="sxs-lookup"><span data-stu-id="aa7e1-111">You can configure this send port according to your own specific requirements.</span></span>  
  
- <span data-ttu-id="aa7e1-112">**メッセージの永続化カスタム例外ハンドラーのサンプルです。**</span><span class="sxs-lookup"><span data-stu-id="aa7e1-112">**The Message Persisting Custom Exception Handler sample.**</span></span> <span data-ttu-id="aa7e1-113">この例では、疎結合の汎用的な例外ハンドラーが、エラー メッセージを受信する方法を含む、正規化に、メッセージを強化およびファイル システムにディスク ファイルとして書き込むが、BizTalk Server メッセージを抽出します。</span><span class="sxs-lookup"><span data-stu-id="aa7e1-113">This sample shows how a loosely coupled generic exception handler can receive fault messages, extract the BizTalk Server messages they contain, normalize and enrich the messages, and write them as disk files to the file system.</span></span>  
  
- <span data-ttu-id="aa7e1-114">**メッセージのルーティングに失敗しました BizTalk サンプルです。**</span><span class="sxs-lookup"><span data-stu-id="aa7e1-114">**The BizTalk Failed Message Routing sample.**</span></span> <span data-ttu-id="aa7e1-115">このサンプルでは、ESB 例外管理フレームワークの正規化および BizTalk Server の失敗のメッセージのルーティング メカニズムによって生成されたネイティブ フォールト メッセージを強化する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="aa7e1-115">This sample shows how the ESB Exception Management Framework can normalize and enrich fault messages natively generated by the Failed Message Routing mechanism in BizTalk Server.</span></span>  
  
  <span data-ttu-id="aa7e1-116">詳細については、次を参照してください。[メッセージの永続化カスタム例外ハンドラー サンプルを実行している](../esb-toolkit/running-the-message-persisting-custom-exception-handler-sample.md)と[BizTalk できませんでしたメッセージ ルーティング ESB 処理サンプルを実行している](../esb-toolkit/running-the-biztalk-failed-message-routing-esb-processing-sample.md)します。</span><span class="sxs-lookup"><span data-stu-id="aa7e1-116">For more information, see [Running the Message Persisting Custom Exception Handler Sample](../esb-toolkit/running-the-message-persisting-custom-exception-handler-sample.md) and [Running the BizTalk Failed Message Routing ESB Processing Sample](../esb-toolkit/running-the-biztalk-failed-message-routing-esb-processing-sample.md).</span></span>