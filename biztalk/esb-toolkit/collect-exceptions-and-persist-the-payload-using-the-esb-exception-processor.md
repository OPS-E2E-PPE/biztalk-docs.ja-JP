---
title: "例外の収集および ESB 例外プロセッサを使用して、ペイロードを保持する |Microsoft ドキュメント"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 52650eed-e760-4ade-bc3f-2b5b2a1c43ff
caps.latest.revision: "3"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: ec3ca7a33b5a38b625894e391c5bf014eb824414
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/20/2017
---
# <a name="collecting-exceptions-and-persisting-the-payload-using-the-esb-exception-processor"></a><span data-ttu-id="8526b-102">例外の収集および ESB 例外プロセッサを使用して、ペイロードを保持します。</span><span class="sxs-lookup"><span data-stu-id="8526b-102">Collecting Exceptions and Persisting the Payload Using the ESB Exception Processor</span></span>
<span data-ttu-id="8526b-103">このユース ケースにオーケストレーションの例外ハンドラーが、ESB フォールト メッセージを発行、[!INCLUDE[prague](../includes/prague-md.md)]メッセージ ボックス、または BizTalk 失敗のメッセージのルーティング メカニズムは、エラー メッセージを生成します。</span><span class="sxs-lookup"><span data-stu-id="8526b-103">In this use case, either the exception handler for an orchestration publishes an ESB fault message to the [!INCLUDE[prague](../includes/prague-md.md)] Message Box or the BizTalk Failed Message Routing mechanism generates a fault message.</span></span> <span data-ttu-id="8526b-104">ESB 例外エンコーダ パイプライン コンポーネントでは、事前に構成されて、送信ポートは、エラー メッセージの種類の両方をサブスクライブします。</span><span class="sxs-lookup"><span data-stu-id="8526b-104">A send port, preconfigured with the ESB Exception Encoder pipeline component, subscribes to both of the fault message types.</span></span> <span data-ttu-id="8526b-105">エラー メッセージを処理し、表示できる、InfoPath を使用して図 1 に示すようにディスク ファイルとが引き続き発生することです。</span><span class="sxs-lookup"><span data-stu-id="8526b-105">It processes the fault messages and then persists them as disk files that you can view using InfoPath, as illustrated in Figure 1.</span></span>  
  
 <span data-ttu-id="8526b-106">![例外のペイロードの収集](../esb-toolkit/media/ch3-collectingexceptionspayload.gif "Ch3 CollectingExceptionsPayload")</span><span class="sxs-lookup"><span data-stu-id="8526b-106">![Collecting Exceptions Payload](../esb-toolkit/media/ch3-collectingexceptionspayload.gif "Ch3-CollectingExceptionsPayload")</span></span>  
  
 <span data-ttu-id="8526b-107">**図 1**</span><span class="sxs-lookup"><span data-stu-id="8526b-107">**Figure 1**</span></span>  
  
 <span data-ttu-id="8526b-108">**エラー メッセージをキャプチャし、ディスク ファイルに永続化します。**</span><span class="sxs-lookup"><span data-stu-id="8526b-108">**Capturing a fault message and persisting it to a disk file**</span></span>  
  
 <span data-ttu-id="8526b-109">[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]次が含まれています。</span><span class="sxs-lookup"><span data-stu-id="8526b-109">The [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] includes the following:</span></span>  
  
-   <span data-ttu-id="8526b-110">**ESB フォールト プロセッサ送信パイプラインを使用するポートを構成済みに送信します。**</span><span class="sxs-lookup"><span data-stu-id="8526b-110">**A preconfigured send port that uses the ESB Fault Processor send pipeline.**</span></span> <span data-ttu-id="8526b-111">特定の要件に基づいて、この送信ポートを構成することができます。</span><span class="sxs-lookup"><span data-stu-id="8526b-111">You can configure this send port according to your own specific requirements.</span></span>  
  
-   <span data-ttu-id="8526b-112">**メッセージの永続化のカスタム例外ハンドラーのサンプルです。**</span><span class="sxs-lookup"><span data-stu-id="8526b-112">**The Message Persisting Custom Exception Handler sample.**</span></span> <span data-ttu-id="8526b-113">このサンプルは、疎結合の一般的な例外ハンドラーがエラー メッセージを受信する方法を示しています。 これらが含まれて正規化と、拡充、調査メッセージ、ファイル システムにディスク ファイルとして書き込む BizTalk Server メッセージを抽出します。</span><span class="sxs-lookup"><span data-stu-id="8526b-113">This sample shows how a loosely coupled generic exception handler can receive fault messages, extract the BizTalk Server messages they contain, normalize and enrich the messages, and write them as disk files to the file system.</span></span>  
  
-   <span data-ttu-id="8526b-114">**メッセージのルーティングに失敗しました BizTalk サンプルです。**</span><span class="sxs-lookup"><span data-stu-id="8526b-114">**The BizTalk Failed Message Routing sample.**</span></span> <span data-ttu-id="8526b-115">このサンプルでは、ESB 例外管理フレームワークを正規化し、BizTalk Server でメッセージのルーティングに失敗しましたメカニズムによってネイティブに生成されたエラー メッセージの強化方法を示します。</span><span class="sxs-lookup"><span data-stu-id="8526b-115">This sample shows how the ESB Exception Management Framework can normalize and enrich fault messages natively generated by the Failed Message Routing mechanism in BizTalk Server.</span></span>  
  
 <span data-ttu-id="8526b-116">詳細については、次を参照してください。[メッセージのカスタム例外ハンドラーの永続化サンプルを実行している](../esb-toolkit/running-the-message-persisting-custom-exception-handler-sample.md)と[サンプルを実行する BizTalk できませんでしたメッセージ ルーティング ESB 処理](../esb-toolkit/running-the-biztalk-failed-message-routing-esb-processing-sample.md)です。</span><span class="sxs-lookup"><span data-stu-id="8526b-116">For more information, see [Running the Message Persisting Custom Exception Handler Sample](../esb-toolkit/running-the-message-persisting-custom-exception-handler-sample.md) and [Running the BizTalk Failed Message Routing ESB Processing Sample](../esb-toolkit/running-the-biztalk-failed-message-routing-esb-processing-sample.md).</span></span>