---
title: ESB JMS エンコーダーとデコーダー コンポーネント |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 4e5591c2-d2ca-4168-8026-059fe51dd588
caps.latest.revision: 4
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: a7c1be49757872021ab19b419eb0042261a76e15
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65399774"
---
# <a name="the-esb-jms-encoder-and-decoder-components"></a><span data-ttu-id="455c6-102">ESB JMS エンコーダーとデコーダーのコンポーネント</span><span class="sxs-lookup"><span data-stu-id="455c6-102">The ESB JMS Encoder and Decoder Components</span></span>
<span data-ttu-id="455c6-103">統合ソリューションいくつかにはは、Java Message Service (JMS) および IBM WebSphere MQ; 送受信される SOAP メッセージが含まれます。[!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)]このような状況で使用するためのマネージ コードで記述された 2 つの JMS パイプライン コンポーネントが含まれています。</span><span class="sxs-lookup"><span data-stu-id="455c6-103">Some integration solutions involve Java Message Service (JMS) and SOAP messages sent to or from IBM WebSphere MQ; [!INCLUDE[esbToolkit](../includes/esbtoolkit-md.md)] includes two JMS pipeline components written in managed code for use in these situations.</span></span> <span data-ttu-id="455c6-104">コンポーネントの読み取りまたは書き込みに関連付けられたメッセージ コンテキスト プロパティの値を使用して、MQ メッセージ ヘッダーの JMS 部分。</span><span class="sxs-lookup"><span data-stu-id="455c6-104">The components read or write the JMS portion of the MQ message header using the values of context properties associated with the message.</span></span> <span data-ttu-id="455c6-105">現時点では、WebSphere MQ Series システムで使用中の JMS ヘッダーの 60 以上のさまざまな種類があります。ESB JMS コンポーネントは、MQRFH2 ヘッダーでのみ動作します。</span><span class="sxs-lookup"><span data-stu-id="455c6-105">Currently, there are more than 60 different types of JMS headers in use with WebSphere MQ Series systems; the ESB JMS components work only with MQRFH2 headers.</span></span>  
  
## <a name="installation"></a><span data-ttu-id="455c6-106">インストール</span><span class="sxs-lookup"><span data-stu-id="455c6-106">Installation</span></span>  
 <span data-ttu-id="455c6-107">ESB コアを自動的にインストールすると、BizTalk Server パイプライン コンポーネント フォルダーで JMS エンコーダーと JMS デコーダー コンポーネントがインストールされます。</span><span class="sxs-lookup"><span data-stu-id="455c6-107">Installing the ESB Core automatically installs the JMS Encoder and JMS Decoder components in the BizTalk Server Pipeline Components folder.</span></span>  
  
## <a name="how-it-works"></a><span data-ttu-id="455c6-108">しくみ</span><span class="sxs-lookup"><span data-stu-id="455c6-108">How It Works</span></span>  
 <span data-ttu-id="455c6-109">JMS のパイプライン コンポーネントは、メッセージ ヘッダーを検査しを持つメッセージに対してのみ機能、 **MQMD_Format**ヘッダーに設定**RFH (MQRFH2)** します。</span><span class="sxs-lookup"><span data-stu-id="455c6-109">The JMS pipeline components inspect the message headers and operate only on messages that have the **MQMD_Format** header set to **RFH (MQRFH2)**.</span></span> <span data-ttu-id="455c6-110">ただし、このプロパティが設定されている場合でも、コンポーネントは、IBM RFH2 形式に準拠している行うことを確認するヘッダーを検査します。</span><span class="sxs-lookup"><span data-stu-id="455c6-110">However, even when this property is set, the components inspect the headers to confirm that they do conform to the IBM RFH2 format.</span></span> <span data-ttu-id="455c6-111">コンポーネントが示す解析エラーを生成するヘッダーがこの形式に準拠していない場合、 **MQMD_Format**にパラメーターが設定された**RFH (MQRFH2)** ヘッダーの構造に準拠していませんが、RFH2 標準です。</span><span class="sxs-lookup"><span data-stu-id="455c6-111">If the header does not conform to this format, the components generate a parse error that indicates the **MQMD_Format** parameter was set to **RFH (MQRFH2)**, but the structure of the header did not comply with the RFH2 standard.</span></span> <span data-ttu-id="455c6-112">受信メッセージ ヘッダーの解析が失敗した場合、デコーダー コンポーネントでは、渡すには、メッセージを使用できます。 という名前のメッセージ コンテキスト プロパティを設定**MQRFH2_ParseError**に**True**します。</span><span class="sxs-lookup"><span data-stu-id="455c6-112">If inbound message header parsing fails, the decoder component allows the message to pass, but it sets a message context property named **MQRFH2_ParseError** to **True**.</span></span>  
  
 <span data-ttu-id="455c6-113">**MQRFH2** JMS コンポーネント BizTalk にデプロイされているプロパティ スキーマは MQRFH2 ヘッダーのプロパティのすべてを公開します。</span><span class="sxs-lookup"><span data-stu-id="455c6-113">The **MQRFH2** property schema deployed in BizTalk with the JMS components exposes all of the MQRFH2 header properties.</span></span> <span data-ttu-id="455c6-114">格納されている XML ドキュメントの受信メッセージのヘッダーを降格した後、ヘッダーからのデータが存在する、 **MQRFH2_NameValueData**メッセージのコンテキスト プロパティ。</span><span class="sxs-lookup"><span data-stu-id="455c6-114">After demoting the headers of an incoming message, the data from the headers resides in an XML document stored in the **MQRFH2_NameValueData** context property of the message.</span></span> <span data-ttu-id="455c6-115">エンコーダーの長さが調整、 **NameValueData**ことを確認するためのフォルダーは、正しい長さ。</span><span class="sxs-lookup"><span data-stu-id="455c6-115">The encoder adjusts the length of the **NameValueData** folder to ensure it is the correct length.</span></span> <span data-ttu-id="455c6-116">値を変更するときに、これらのヘッダーと、影響の使用状況を理解するには、適切な IBM のドキュメントを確認します。</span><span class="sxs-lookup"><span data-stu-id="455c6-116">To understand the usage of these headers, and the impact when changing the values, review the appropriate IBM documentation.</span></span>  
  
## <a name="using-the-jms-encoder-and-decoder-components"></a><span data-ttu-id="455c6-117">JMS エンコーダーとデコーダーのコンポーネントを使用します。</span><span class="sxs-lookup"><span data-stu-id="455c6-117">Using the JMS Encoder and Decoder Components</span></span>  
 <span data-ttu-id="455c6-118">JMS エンコーダーとデコーダー コンポーネントを使用するには、開発者は、それらを BizTalk アプリケーション内のパイプラインに追加します。</span><span class="sxs-lookup"><span data-stu-id="455c6-118">To use the JMS Encoder and Decoder components, developers add them to pipelines in a BizTalk application.</span></span> <span data-ttu-id="455c6-119">送信パイプラインでは、場合は、JMS エンコーダー コンポーネントは、エンコード ステージに存在する必要があります。</span><span class="sxs-lookup"><span data-stu-id="455c6-119">For a send pipeline, the JMS Encoder component should reside in the Encode stage.</span></span> <span data-ttu-id="455c6-120">受信パイプラインでは、場合は、JMS デコーダー コンポーネントは、デコード段階に存在する必要があります。</span><span class="sxs-lookup"><span data-stu-id="455c6-120">For a receive pipeline, the JMS Decoder component should reside in the Decode stage.</span></span> <span data-ttu-id="455c6-121">JMS コンポーネントは、パイプラインの他のステージではインストールされません。</span><span class="sxs-lookup"><span data-stu-id="455c6-121">The JMS components will not install in any other stages of a pipeline.</span></span>  
  
 <span data-ttu-id="455c6-122">エンコード段階でインストールされていると、JMS エンコーダー コンポーネントは、JMS 内の値を読み取ります**MQRFH2**ヘッダーと書き込み (昇格)、メッセージ コンテキスト プロパティにします。</span><span class="sxs-lookup"><span data-stu-id="455c6-122">When installed in the Encode stage, the JMS Encoder component reads the values in the JMS **MQRFH2** headers and writes (promotes) them into the message context properties.</span></span> <span data-ttu-id="455c6-123">JMS デコーダー コンポーネントを読み取り、デコード段階でインストールすると (降格) コンテキスト プロパティの値を JMS に挿入する**MQRFH2**ヘッダー。</span><span class="sxs-lookup"><span data-stu-id="455c6-123">When installed in the Decode stage, the JMS Decoder component reads (demotes) the context property values and inserts them into the JMS **MQRFH2** headers.</span></span> <span data-ttu-id="455c6-124">つまり、すべての MQ ヘッダー値が、パイプラインでメッセージのコンテキスト プロパティとして使用できます。</span><span class="sxs-lookup"><span data-stu-id="455c6-124">This means that all the MQ header values are available as context properties of the message in the pipeline.</span></span>  
  
 <span data-ttu-id="455c6-125">検出し、ヘッダーの解析エラーを管理、開発者がの値を調べるコードを含めることができます、 **MQRFH2_ParseError**プロパティ。</span><span class="sxs-lookup"><span data-stu-id="455c6-125">To detect and manage header-parsing errors, developers can include code that examines the value of the **MQRFH2_ParseError** property.</span></span> <span data-ttu-id="455c6-126">失敗したメッセージをサブスクライブする回復プロセスを実装したりフィルターを適用する送信ポートを指定できます、 **MQRFH2_ParseError**メッセージを保持するプロパティ。</span><span class="sxs-lookup"><span data-stu-id="455c6-126">They can implement a recovery process that subscribes to failed messages or specify send ports that filter on the **MQRFH2_ParseError** property to persist the message.</span></span> <span data-ttu-id="455c6-127">JMS メッセージを処理するサブスクライバーが値を指定するフィルター条件を含める必要があります**False**の**MQRFH2_ParseError**メッセージの受信から、サブスクライバーを防ぐためにプロパティヘッダーのプロセスを解析できませんでした。</span><span class="sxs-lookup"><span data-stu-id="455c6-127">Subscribers that work with JMS messages should include a filter condition that specifies the value **False** for the **MQRFH2_ParseError** property to prevent the subscriber from receiving messages that failed the header parsing process.</span></span>  
  
 <span data-ttu-id="455c6-128">開発者は、コンテキスト プロパティの値も更新できます (たとえば、変更、 **MQRFH2_Encoding**プロパティの値)、および、コンポーネント、メッセージが到着すると、それらが設定されるように MQ メッセージのヘッダーにこれらの変更が反映されます最終的な宛先。</span><span class="sxs-lookup"><span data-stu-id="455c6-128">Developers can also update the context property values (for example, change the **MQRFH2_Encoding** property value), and the component will reflect these changes in the MQ message headers so that they are set when the message arrives at its ultimate destination.</span></span> <span data-ttu-id="455c6-129">コンポーネントは自動的に無効な値は無視され、必要なヘッダーがないを「安全」の既定値に設定します。</span><span class="sxs-lookup"><span data-stu-id="455c6-129">The component automatically ignores invalid values and sets "safe" default values where required headers are missing.</span></span> <span data-ttu-id="455c6-130">たとえば、開発者が無効な値を指定します、 **MQRFH2_Encoding**プロパティ、送信メッセージになります、 **MQRFH2_Encoding**ヘッダーに設定**不明**.</span><span class="sxs-lookup"><span data-stu-id="455c6-130">For example, if the developer specifies an invalid value for the **MQRFH2_Encoding** property, the outbound message will have the **MQRFH2_Encoding** header set to **UNKNOWN**.</span></span> <span data-ttu-id="455c6-131">場合は、開発者は、コンテキスト プロパティから値を削除しますが、 **MQMD_Format**プロパティに設定されても**RFH**コンポーネントは、IBM の仕様に従って、既定値を含むヘッダーを追加します。</span><span class="sxs-lookup"><span data-stu-id="455c6-131">If the developer removes a value from a context property, but the **MQMD_Format** property is still set to **RFH**, the component will add a header containing the default value, as per the IBM specification.</span></span>  
  
 <span data-ttu-id="455c6-132">これらのコンポーネントを使用する方法の例は、次を参照してください。[インストールして、JMS MQRFH2 コンポーネント サンプルを実行する](../esb-toolkit/installing-and-running-the-jms-mqrfh2-component-sample.md)します。</span><span class="sxs-lookup"><span data-stu-id="455c6-132">For an example of how to use these components, see [Installing and Running the JMS MQRFH2 Component Sample](../esb-toolkit/installing-and-running-the-jms-mqrfh2-component-sample.md).</span></span>