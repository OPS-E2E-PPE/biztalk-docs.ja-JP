---
title: "Web サービスの BizTalk 操作 |Microsoft ドキュメント"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: af38815f-f643-4598-9148-6499071d12e4
caps.latest.revision: "5"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 5d09fb2cdcca83e8a9f2e4e7704178d40a915065
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/20/2017
---
# <a name="the-biztalk-operations-web-service"></a><span data-ttu-id="e3005-102">操作で BizTalk Web サービス</span><span class="sxs-lookup"><span data-stu-id="e3005-102">The BizTalk Operations Web Service</span></span>
<span data-ttu-id="e3005-103">Microsoft BizTalk Operations Web サービスでは、オブジェクトおよび BizTalk Server でメッセージに関する情報を公開します。</span><span class="sxs-lookup"><span data-stu-id="e3005-103">The Microsoft BizTalk Operations Web service exposes information about the objects and messages in BizTalk Server.</span></span> <span data-ttu-id="e3005-104">サービス名は**ESB.BizTalkOperationsService**、し、サービスは、さまざまなホスト、オーケストレーション、アプリケーション、および BizTalk アプリケーションの状態のリストなどの項目を返すメソッドを公開します。</span><span class="sxs-lookup"><span data-stu-id="e3005-104">The service name is **ESB.BizTalkOperationsService**, and the service exposes a wide range of methods that return items such as a list of hosts, orchestrations, applications, and the BizTalk application status.</span></span>  
  
 <span data-ttu-id="e3005-105">次の方法があります。</span><span class="sxs-lookup"><span data-stu-id="e3005-105">The following methods are available:</span></span>  
  
-   <span data-ttu-id="e3005-106">**アプリケーション**です。</span><span class="sxs-lookup"><span data-stu-id="e3005-106">**Applications**.</span></span> <span data-ttu-id="e3005-107">このメソッドは、パラメーターをとらないし、のコレクションとしてインストールされているすべての BizTalk アプリケーションの説明と名前を返します**BTApplication**オブジェクト。</span><span class="sxs-lookup"><span data-stu-id="e3005-107">This method takes no parameters, and it returns the name and description of all installed BizTalk applications as a collection of **BTApplication** objects.</span></span>  
  
-   <span data-ttu-id="e3005-108">**ApplicationStatus**です。</span><span class="sxs-lookup"><span data-stu-id="e3005-108">**ApplicationStatus**.</span></span> <span data-ttu-id="e3005-109">このメソッドは、パラメーターとして、アプリケーション名、およびとして指定した BizTalk アプリケーションについての情報を返します、 **BTSysStatus**インスタンス。</span><span class="sxs-lookup"><span data-stu-id="e3005-109">This method takes as a parameter the application name, and it returns information about the specified BizTalk application as a **BTSysStatus** instance.</span></span> <span data-ttu-id="e3005-110">この情報には、オーケストレーション、送信ポート、受信場所、およびホストの詳細。</span><span class="sxs-lookup"><span data-stu-id="e3005-110">This information includes orchestrations, send ports, receive locations, and host details.</span></span>  
  
-   <span data-ttu-id="e3005-111">**GetLiveMessageBody**です。</span><span class="sxs-lookup"><span data-stu-id="e3005-111">**GetLiveMessageBody**.</span></span> <span data-ttu-id="e3005-112">このメソッドは、パラメーターとして、メッセージ ID とインスタンス ID、およびとして実際の環境からそのメッセージの本文を返します、 **BTMsgBody**インスタンス。</span><span class="sxs-lookup"><span data-stu-id="e3005-112">This method takes as parameters a message ID and an instance ID, and it returns the body of that message from the live environment as a **BTMsgBody** instance.</span></span>  
  
-   <span data-ttu-id="e3005-113">**GetMessageInstances**です。</span><span class="sxs-lookup"><span data-stu-id="e3005-113">**GetMessageInstances**.</span></span> <span data-ttu-id="e3005-114">このメソッドは、パラメーターとして、メッセージの種類と一致するすべてのメッセージのコレクションとして返します**BTMsgInstance**オブジェクト。</span><span class="sxs-lookup"><span data-stu-id="e3005-114">This method takes as a parameter the message type, and it returns all matching messages as a collection of **BTMsgInstance** objects.</span></span>  
  
-   <span data-ttu-id="e3005-115">**GetOrchestrationInstances**です。</span><span class="sxs-lookup"><span data-stu-id="e3005-115">**GetOrchestrationInstances**.</span></span> <span data-ttu-id="e3005-116">このメソッドは、パラメーターとして、オーケストレーションの名前のコレクションを返します**BTOrchestrationInstance**一致するオーケストレーションの詳細が含まれているオブジェクト。</span><span class="sxs-lookup"><span data-stu-id="e3005-116">This method takes as parameters the name of an orchestration, and it returns a collection of **BTOrchestrationInstance** object that contain details of the matching orchestrations.</span></span>  
  
-   <span data-ttu-id="e3005-117">**GetTrackedMessageBody**です。</span><span class="sxs-lookup"><span data-stu-id="e3005-117">**GetTrackedMessageBody**.</span></span> <span data-ttu-id="e3005-118">このメソッドは、パラメーターとしてメッセージの GUID、および」というメッセージの本文が返されます、 **BTMsgBody** BizTalk で処理された後のインスタンスします。</span><span class="sxs-lookup"><span data-stu-id="e3005-118">This method takes as a parameter a message GUID, and it returns the body of that message as a **BTMsgBody** instance after it is processed in BizTalk.</span></span>  
  
-   <span data-ttu-id="e3005-119">**ホスト**です。</span><span class="sxs-lookup"><span data-stu-id="e3005-119">**Hosts**.</span></span> <span data-ttu-id="e3005-120">このメソッドは、パラメーターとして、ホストの名前と、指定したホスト インスタンスに関する情報のコレクションとして返します**BTHost**インスタンス。</span><span class="sxs-lookup"><span data-stu-id="e3005-120">This method takes as a parameter the name of a host, and it returns information about the specified host instance as a collection of **BTHost** instances.</span></span> <span data-ttu-id="e3005-121">すべてのホスト インスタンスに関する情報を返すには、ホスト名のパラメーターに空の文字列を使用します。</span><span class="sxs-lookup"><span data-stu-id="e3005-121">Use an empty string for the host name parameter to return information about all host instances.</span></span>  
  
-   <span data-ttu-id="e3005-122">**MessageFlowTree**です。</span><span class="sxs-lookup"><span data-stu-id="e3005-122">**MessageFlowTree**.</span></span> <span data-ttu-id="e3005-123">このメソッドは、パラメーターとしてインスタンス ID、および」というメッセージのメッセージ フローの詳細を返します、 **RouteTreeNode**インスタンス。</span><span class="sxs-lookup"><span data-stu-id="e3005-123">This method takes as a parameter an instance ID, and it returns details of the message flow for that message as a **RouteTreeNode** instance.</span></span>  
  
-   <span data-ttu-id="e3005-124">**オーケストレーション**です。</span><span class="sxs-lookup"><span data-stu-id="e3005-124">**Orchestrations**.</span></span> <span data-ttu-id="e3005-125">このメソッドは、パラメーターとして、オーケストレーションの名前とそのオーケストレーションとしてのすべての情報を返します、 **BTSysStatus**インスタンス。</span><span class="sxs-lookup"><span data-stu-id="e3005-125">This method takes as a parameter the name of an orchestration, and it returns all the information for that orchestration as a **BTSysStatus** instance.</span></span> <span data-ttu-id="e3005-126">すべてのオーケストレーションに関する情報を返すには、オーケストレーションの name パラメーターに空の文字列を使用します。</span><span class="sxs-lookup"><span data-stu-id="e3005-126">Use an empty string for the orchestration name parameter to return information about all orchestrations.</span></span>  
  
-   <span data-ttu-id="e3005-127">**ReceiveLocations**です。</span><span class="sxs-lookup"><span data-stu-id="e3005-127">**ReceiveLocations**.</span></span> <span data-ttu-id="e3005-128">このメソッドは、パラメーターとして、受信場所の名前と一致するように場所のすべての情報を返します、 **BTSysStatus**インスタンス。</span><span class="sxs-lookup"><span data-stu-id="e3005-128">This method takes as a parameter the name of a receive location, and it returns all the information for matching locations as a **BTSysStatus** instance.</span></span> <span data-ttu-id="e3005-129">すべての場所に関する情報を返すには、受信場所の name パラメーターに空の文字列を使用します。</span><span class="sxs-lookup"><span data-stu-id="e3005-129">Use an empty string for the receive locations name parameter to return information about all locations.</span></span>  
  
-   <span data-ttu-id="e3005-130">**ReceiveLocationsByDescription**です。</span><span class="sxs-lookup"><span data-stu-id="e3005-130">**ReceiveLocationsByDescription**.</span></span> <span data-ttu-id="e3005-131">このメソッドは、パラメーターとして、受信場所の説明と一致するように場所のすべての情報を返します、 **BTSysStatus**インスタンス。</span><span class="sxs-lookup"><span data-stu-id="e3005-131">This method takes as a parameter the description of a receive location, and it returns all the information for matching locations as a **BTSysStatus** instance.</span></span> <span data-ttu-id="e3005-132">すべての場所に関する情報を返す description パラメーターに空の文字列を使用します。</span><span class="sxs-lookup"><span data-stu-id="e3005-132">Use an empty string for the description parameter to return information about all locations.</span></span>  
  
-   <span data-ttu-id="e3005-133">**SendPorts**です。</span><span class="sxs-lookup"><span data-stu-id="e3005-133">**SendPorts**.</span></span> <span data-ttu-id="e3005-134">このメソッドは、パラメーターとして、送信ポートの名前とポートを照合するすべての情報を返します、 **BTSysStatus**インスタンス。</span><span class="sxs-lookup"><span data-stu-id="e3005-134">This method takes as a parameter the name of a send port, and it returns all the information for matching ports as a **BTSysStatus** instance.</span></span> <span data-ttu-id="e3005-135">すべてのポートに関する情報を返すには、送信ポートの name パラメーターに空の文字列を使用します。</span><span class="sxs-lookup"><span data-stu-id="e3005-135">Use an empty string for the send port name parameter to return information about all ports.</span></span>  
  
-   <span data-ttu-id="e3005-136">**SendPortsByDescription**です。</span><span class="sxs-lookup"><span data-stu-id="e3005-136">**SendPortsByDescription**.</span></span> <span data-ttu-id="e3005-137">このメソッドは、パラメーターとして、送信ポートの説明ととしてポートを一致させるためのすべての情報を返します、 **BTSysStatus**インスタンス。</span><span class="sxs-lookup"><span data-stu-id="e3005-137">This method takes as a parameter the description of a send port, and it returns all the information for matching ports as a **BTSysStatus** instance.</span></span> <span data-ttu-id="e3005-138">すべてのポートに関する情報を返す description パラメーターに空の文字列を使用します。</span><span class="sxs-lookup"><span data-stu-id="e3005-138">Use an empty string for the description parameter to return information about all ports.</span></span>  
  
-   <span data-ttu-id="e3005-139">**メイル**です。</span><span class="sxs-lookup"><span data-stu-id="e3005-139">**StatusChanged**.</span></span> <span data-ttu-id="e3005-140">このメソッドは、パラメーターとしてタイムスタンプ、およびとして指定したタイムスタンプ以降に変更 (ポート、ホスト、およびオーケストレーション) などの BizTalk オブジェクトの詳細を返します、 **BTSysStatus**インスタンス。</span><span class="sxs-lookup"><span data-stu-id="e3005-140">This method takes as a parameter a timestamp, and it returns details of BizTalk objects (such as ports, hosts, and orchestrations) modified since the specified timestamp as a **BTSysStatus** instance.</span></span>  
  
-   <span data-ttu-id="e3005-141">**SystemStatus**です。</span><span class="sxs-lookup"><span data-stu-id="e3005-141">**SystemStatus**.</span></span> <span data-ttu-id="e3005-142">このメソッドは、パラメーターをとらないし、BizTalk システムの状態の完全な詳細情報を返します、 **BTSysStatus**インスタンス。</span><span class="sxs-lookup"><span data-stu-id="e3005-142">This method takes no parameters, and it returns full details of the BizTalk system status as a **BTSysStatus** instance.</span></span>  
  
-   <span data-ttu-id="e3005-143">**UpdateReceiveLocationDescription**です。</span><span class="sxs-lookup"><span data-stu-id="e3005-143">**UpdateReceiveLocationDescription**.</span></span> <span data-ttu-id="e3005-144">このメソッドは、アプリケーション名、受信ポート名、受信場所の名前、および受信場所の説明が含まれているパラメーター値を使用して、指定した受信場所の説明を更新します。</span><span class="sxs-lookup"><span data-stu-id="e3005-144">This method updates the description of a specified receive location using parameter values that contain the application name, the receive port name, the receive location name, and the receive location description.</span></span> <span data-ttu-id="e3005-145">操作の結果を示す文字列を返します。</span><span class="sxs-lookup"><span data-stu-id="e3005-145">It returns a String that indicates the result of the operation.</span></span> <span data-ttu-id="e3005-146">クライアント テスト アプリケーションが、App.config ファイルからこの情報を読み取ることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="e3005-146">Note that the test client application reads this information from its App.config file.</span></span>  
  
-   <span data-ttu-id="e3005-147">**UpdateSendPortDescription**です。</span><span class="sxs-lookup"><span data-stu-id="e3005-147">**UpdateSendPortDescription**.</span></span> <span data-ttu-id="e3005-148">このメソッドは、送信ポートの名前と送信ポートの説明が含まれているパラメーター値を使用して、指定された送信ポートの説明を更新します。</span><span class="sxs-lookup"><span data-stu-id="e3005-148">This method updates the description of a specified send port using parameter values that contain the send port name and the send port description.</span></span> <span data-ttu-id="e3005-149">操作の結果を示す文字列を返します。</span><span class="sxs-lookup"><span data-stu-id="e3005-149">It returns a String that indicates the result of the operation.</span></span> <span data-ttu-id="e3005-150">クライアント テスト アプリケーションが、App.config ファイルからこの情報を読み取ることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="e3005-150">Note that the test client application reads this information from its App.config file.</span></span>  
  
## <a name="configuring-the-biztalk-operations-web-service"></a><span data-ttu-id="e3005-151">操作で BizTalk Web サービスを構成します。</span><span class="sxs-lookup"><span data-stu-id="e3005-151">Configuring the BizTalk Operations Web Service</span></span>  
 <span data-ttu-id="e3005-152">BizTalk Operations Web サービスが Windows Management Instrumentation (WMI) を使用して、BizTalk Server 管理データベースと直接通信するか、または必要な情報を取得する BizTalk 操作およびエクスプ ローラー API を使用します。</span><span class="sxs-lookup"><span data-stu-id="e3005-152">The BizTalk Operations Web service either communicates directly with the BizTalk Server management databases using Windows Management Instrumentation (WMI) or it uses the BizTalk Operations and Explorer API to obtain the information it requires.</span></span> <span data-ttu-id="e3005-153">そのため、システムが、次の条件を満たしていると、次のセキュリティ アクセス許可の設定を構成することを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e3005-153">Therefore, you must make sure that your system meets the following conditions and that you configure the following security permission settings:</span></span>  
  
-   <span data-ttu-id="e3005-154">設定、 **allowOverride**をコンピューター レベルの Web.config ファイルで属性**false**開発者は各自のアプリケーションの信頼レベルを変更できないかどうかを確認します。</span><span class="sxs-lookup"><span data-stu-id="e3005-154">Set the **allowOverride** attribute in the machine-level Web.config file to **false** to make sure developers cannot change the trust level of their applications.</span></span>  
  
-   <span data-ttu-id="e3005-155">既定では、BizTalk Operations Web サービスは (SSL) クライアントによってアクセスされたときに要求するように構成されていません。</span><span class="sxs-lookup"><span data-stu-id="e3005-155">By default, the BizTalk Operations Web service is not configured to require Secure Sockets Layer (SSL) when accessed by clients.</span></span> <span data-ttu-id="e3005-156">クライアント アクセス用の SSL が要求されるようにサービスを構成し、インターネット インフォメーション サービス (IIS) Web サービスのホスト コンピューターと、BizTalkMgmtDb を使用してデータベースをホストする SQL Server を実行しているコンピューター間の接続を保護する必要があります。ネットワーク レベルの IPSec および適切なファイル レベルのアクセス制御リスト (ACL) のアクセス許可。</span><span class="sxs-lookup"><span data-stu-id="e3005-156">You should configure the service so that it requires SSL for client access, and protect the connection between the Internet Information Services (IIS) Web service host computer and the computer running SQL Server that hosts the BizTalkMgmtDb database using network-level IPSec and appropriate file-level access control list (ACL) permissions.</span></span>  
  
-   <span data-ttu-id="e3005-157">BizTalk Operations Web サービスにアクセスするユーザーは、いくつかのメソッドの既定の BizTalk Server 管理者グループのメンバーとその他のメソッドの既定の BizTalk Application Users グループのメンバーにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="e3005-157">Users accessing the BizTalk Operations Web service must be members of the default BizTalk Server Administrators group for some methods and members of the default BizTalk Application Users group for other methods.</span></span>  
  
-   <span data-ttu-id="e3005-158">BizTalk Operations Web サービスが無効になっている匿名のアクセス権を持つ ESB.BizTalkOperationsService をという名前の IIS 仮想ディレクトリに格納されていることを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e3005-158">You must make sure that the BizTalk Operations Web service resides in an IIS virtual directory named ESB.BizTalkOperationsService that has anonymous access disabled.</span></span>  
  
-   <span data-ttu-id="e3005-159">ユーザーがいる必要があります**選択**BizTalkMgmtDb データベースと、BizTalkMsgBoxDb データベースに複数のテーブルの SQL Server のアクセス許可があります。</span><span class="sxs-lookup"><span data-stu-id="e3005-159">Users must have **SELECT** permission in SQL Server for several tables located in the BizTalkMgmtDb database and the BizTalkMsgBoxDb database.</span></span> <span data-ttu-id="e3005-160">SQL Server Management Studio を使用すると、次のアクセス許可を設定します。</span><span class="sxs-lookup"><span data-stu-id="e3005-160">Use SQL Server Management Studio to set the following permissions:</span></span>  
  
    -   <span data-ttu-id="e3005-161">BizTalkMgmtDb データベース内の BTS_ADMIN_USERS データベース ロールを構成する**選択**次のテーブルに対する権限。</span><span class="sxs-lookup"><span data-stu-id="e3005-161">In the BizTalkMgmtDb database, configure the BTS_ADMIN_USERS database role with **SELECT** permission on the following tables:</span></span>  
  
        -   <span data-ttu-id="e3005-162">adm_Server2HostMapping</span><span class="sxs-lookup"><span data-stu-id="e3005-162">adm_Server2HostMapping</span></span>  
  
        -   <span data-ttu-id="e3005-163">adm_Server</span><span class="sxs-lookup"><span data-stu-id="e3005-163">adm_Server</span></span>  
  
        -   <span data-ttu-id="e3005-164">adm_hostInstance</span><span class="sxs-lookup"><span data-stu-id="e3005-164">adm_hostInstance</span></span>  
  
    -   <span data-ttu-id="e3005-165">BizTalkMsgBoxDb データベースの構成を持つ BTS_ADMIN_USER データベース ロール**選択**ProcessHeartbeats テーブルに対する権限。</span><span class="sxs-lookup"><span data-stu-id="e3005-165">In the BizTalkMsgBoxDb database, configure the BTS_ADMIN_USER database role with **SELECT** permission on the ProcessHeartbeats table.</span></span>  
  
 <span data-ttu-id="e3005-166">SQL Server Management Studio では、必要なアクセス許可を構成できます。</span><span class="sxs-lookup"><span data-stu-id="e3005-166">In SQL Server Management Studio, you can configure the required permissions.</span></span> <span data-ttu-id="e3005-167">これを行うには、次のように展開します**セキュリティ**、左側のウィンドウのツリー ビューでオブジェクト エクスプ ローラー、展開**ロール**、展開**DatabaseRoles**、BTS_ADMIN_USERS ロールを選択し、編集、。図 1 に示すように、このロールのプロパティです。</span><span class="sxs-lookup"><span data-stu-id="e3005-167">To do this, expand **Security** in the left pane tree view of Object Explorer, expand **Roles**, expand **DatabaseRoles**, select the BTS_ADMIN_USERS role, and then edit the properties for this role, as shown in Figure 1.</span></span>  
  
 <span data-ttu-id="e3005-168">![SQL Server 管理 Studio](../esb-toolkit/media/ch4-sqlservermgmtstudio.gif "Ch4 SQLServerMgmtStudio")</span><span class="sxs-lookup"><span data-stu-id="e3005-168">![SQL Server Mgmt Studio](../esb-toolkit/media/ch4-sqlservermgmtstudio.gif "Ch4-SQLServerMgmtStudio")</span></span>  
  
 <span data-ttu-id="e3005-169">**図 1**</span><span class="sxs-lookup"><span data-stu-id="e3005-169">**Figure 1**</span></span>  
  
 <span data-ttu-id="e3005-170">**Microsoft SQL Server Management Studio での BTS_ADMIN_USERS データベース ロールの権限の編集**</span><span class="sxs-lookup"><span data-stu-id="e3005-170">**Editing permissions for the BTS_ADMIN_USERS database role in Microsoft SQL Server Management Studio**</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="e3005-171">Windows 統合セキュリティを使用して組み込みの NETWORK SERVICE アカウントで実行するには、このサービスを構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e3005-171">You must configure this service to use Windows Integrated Security and run under the built-in NETWORK SERVICE account.</span></span> <span data-ttu-id="e3005-172">必要がありますも有効にする Kerberos 認証、IIS Web サーバーでヘッダーを送信できるように**ネゴシエート、NTLM**クライアントにします。</span><span class="sxs-lookup"><span data-stu-id="e3005-172">You must also enable Kerberos authentication on your IIS Web server so that it sends the header **Negotiate,NTLM** to the client.</span></span> <span data-ttu-id="e3005-173">詳細については、次を参照してください。[ネットワークの認証に Kerberos プロトコルと NTLM プロトコルの両方をサポートするために IIS を構成する方法](http://go.microsoft.com/fwlink/?LinkId=186430)([http://go.microsoft.com/fwlink/?LinkId=186430](http://go.microsoft.com/fwlink/?LinkId=186430))。</span><span class="sxs-lookup"><span data-stu-id="e3005-173">For more information, see [How to configure IIS to support both the Kerberos protocol and the NTLM protocol for network authentication](http://go.microsoft.com/fwlink/?LinkId=186430)([http://go.microsoft.com/fwlink/?LinkId=186430](http://go.microsoft.com/fwlink/?LinkId=186430)).</span></span>  
>   
>  <span data-ttu-id="e3005-174">既定では、BizTalk Operations Web サービスはクライアントからアクセス時に SSL を要求するように構成されていません。</span><span class="sxs-lookup"><span data-stu-id="e3005-174">By default, the BizTalk Operations Web service is not configured to require SSL when accessed by clients.</span></span> <span data-ttu-id="e3005-175">クライアント アクセス用の SSL が要求されるようにサービスを構成し、IIS Web サービスのホスト コンピューターとネットワーク レベルの IPSec およびファイル レベル ACL の適切なアクセス許可を使用して、UDDI サービスをホストするサーバー間の接続を保護する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e3005-175">You should configure the service so that it requires SSL for client access and protect the connection between the IIS Web service host computer and the server that hosts the UDDI service using network-level IPSec and appropriate file-level ACL permissions.</span></span>