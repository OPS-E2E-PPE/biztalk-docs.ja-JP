---
title: Oracle E-business Suite からのポーリングに基づいたデータ変更メッセージの受信 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: cbcb23d0-508d-4601-91b4-c674d76cd063
caps.latest.revision: 7
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 11fe9ab767b11d1dc22bc1a8341093ed066abf44
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65374699"
---
# <a name="receive-polling-based-data-changed-messages-from-oracle-e-business-suite"></a>Oracle E-business Suite からのポーリングに基づいたデータ変更メッセージを受信します。
[!INCLUDE[adapteroracleebusinesslong](../../includes/adapteroracleebusinesslong-md.md)]インターフェイス テーブル、インターフェイス ビュー、テーブル、およびビューをポーリングすることによってポーリングに基づいたデータ変更メッセージの受信をサポートしています。 アダプターは、によって、アプリケーションにメッセージを提供します。  

- データがポーリングに使用できるかどうかを判断する SQL SELECT クエリを実行します。 定期的にまたは継続的には、SQL SELECT クエリを実行するアダプターを構成することができます。  

- Oracle のテーブルまたはビューに対して SQL SELECT クエリの実行や、実行は、プロシージャ、関数、またはパッケージ化されたプロシージャおよび関数を格納します。  

- Oracle E-business Suite で省略可能な後ポーリング PL/SQL コード ブロックを実行します。 ターゲット内のクエリ対象のレコードにフィールドを更新する、または別のテーブルまたはビューにクエリのレコードを移動する、次のコード ブロックがよく使用されます。  

- 結果のクエリ結果を返す、ポーリング操作またはストアド プロシージャ、関数、またはパッケージ化されたプロシージャおよびポーリング操作として公開されている関数を呼び出すことによって設定します。  

  アダプターは、すべての Oracle トランザクション内でこれらの操作を実行します。  

## <a name="how-do-i-configure-the-oracle-e-business-adapter-for-receiving-data-changed-messages-using-binding-properties"></a>バインドのプロパティを使用して、データ変更メッセージを受信するため、Oracle E-business アダプターを構成する方法  
 構成する、[!INCLUDE[adapteroraclebusinessshort](../../includes/adapteroraclebusinessshort-md.md)]バインドのプロパティの一部またはすべてを設定して、データ変更メッセージを受信します。  


|         プロパティのバインド         |                                                                                                                                                                                                                                                                                                                                                                                     値                                                                                                                                                                                                                                                                                                                                                                                     | 既定 |                                必須/省略可                                |
|----------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------|---------------------------------------------------------------------------------|
|     **InboundOperationType**     |                                                                                                                                                                                                                                                                                                                                                                値が設定されていることを確認**ポーリング**します。                                                                                                                                                                                                                                                                                                                                                                | ポーリング |         必須。 指定しない場合、明示的に設定、既定値に適用されます。          |
| **PolledDataAvailableStatement** | すべてのデータが特定のテーブルのポーリングに使用できるかどうかを判断するために実行する SELECT ステートメントを指定します。 指定したステートメントには、結果の行と列で構成されるセットを返す必要があります。 結果セットの最初のセルの値は、アダプターが指定された値を実行するかどうかを示します、 **PollingInput**プロパティをバインドします。 結果の最初のセルに正の値が含まれている場合、アダプターは、ポーリング ステートメントを実行します。 たとえば、このバインドのプロパティの有効なステートメントになります。<br /><br /> `Select * from <table_name>`<br /><br /> **注:** このバインドのプロパティのストアド プロシージャを指定する必要があります。 また、このステートメントは、Oracle E-business Suite または基になる Oracle データベース内のデータを変更する必要があります。 |  null   |                                    必須。                                    |
|        **PollingAction**         |                                                                                                                                                                                                                                                          ポーリング操作のアクションを指定します。 特定の操作を使用して、操作を生成するメタデータからのポーリング アクションを決定することができます、[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]します。                                                                                                                                                                                                                                                          |  null   | テーブルとビューの SELECT ステートメントを使用してポーリング操作の省略可能。 |
|         **PollingInput**         |                                                                                                                                                       次のいずれかを指定します。<br /><br /> Oracle E-business Suite に対して実行される SQL SELECT ステートメント。 このステートメントは、FOR UPDATE 句を含める必要があります。 FOR UPDATE 句については、次を参照してください。[ポーリング ステートメントで FOR UPDATE 句を指定する](#ForUpdate)このトピックで後述します。<br /><br /> -ストアド プロシージャ、関数、またはプロシージャまたは関数をポーリングするパッケージ内のメッセージを要求します。                                                                                                                                                       |  null   |     必須。 設定**PollingInput** null 以外の値のポーリングで有効にします。     |
|       **PollingInterval**        |                                                                                                                                                       クエリ Oracle E-business Suite アダプターを秒単位で間隔を設定します。 このプロパティは、ポーリング間隔とポーリング トランザクションのタイムアウトを指定します。値は、(指定されている場合) に Oracle E-business Suite、ポーリング後ステートメントとクエリの実行にかかった時間とクライアントがクエリ データを処理し、ポーリング応答メッセージを返すのためにかかる時間より大きくする必要があります。                                                                                                                                                       |   30    |         必須。 指定しない場合、明示的に設定、既定値に適用されます。          |
|      **PollWhileDataFound**      |                                                                                                                                                                                                      指定するかどうか、[!INCLUDE[adapteroraclebusinessshort](../../includes/adapteroraclebusinessshort-md.md)]ポーリング間隔を無視し、データがポーリングされるテーブルで使用できる場合は、Oracle E-business Suite を継続的にポーリングします。 指定されたポーリング間隔で SQL ステートメントを実行する、テーブルで使用できるデータがない場合は、アダプターを元に戻します                                                                                                                                                                                                      |  False  |         必須。 指定しない場合、明示的に設定、既定値に適用されます。          |
|      **PostPollStatement**       |                                                                                                                                                                                                                                                                                                            クエリを実行すると、クエリの前に、データがクライアントに返される後、アダプターによって実行される PL/SQL コード ブロックに設定します。                                                                                                                                                                                                                                                                                                            |  null   |   任意。 値が指定されていない場合は、ポーリング後ステートメントは実行されません。    |

> [!NOTE]
>  設定する必要がある、WCF サービス モデルまたは WCF チャネル モデルを使用している場合、 **AcceptCredentialsInUri**プロパティをバインドします。  

##  <a name="ForUpdate"></a> ポーリング ステートメントの句を更新 FOR を指定します。  
 ポーリング ステートメントと SELECT ステートメントで指定された行に影響するポーリング後ステートメントを実行する SELECT ステートメントを使用する場合は、ポーリング ステートメントで FOR UPDATE 句を使用する必要があります。 FOR UPDATE 句を指定することにより、トランザクション中に、ポーリング ステートメントによって選択されたレコードがロックされていることと、ポーリング後ステートメントがそれらの任意の必要な更新プログラムを実行できます。  

> [!CAUTION]
>  複数のレコードは、ポーリングとポーリング後ステートメント間の時間枠のどこのシナリオを設定することが、ポーリング後ステートメントの条件を満たすテーブルに追加されます。 このような状況では、条件を満たすすべてのレコードとポーリング ステートメントの一部として選択されたレコードだけでなく、ポーリング後ステートメントを更新します。  

 ポーリング後ステートメントが指定されたポーリング ステートメントに FOR UPDATE 句が含まれていない場合、次の 2 つの条件のいずれかが発生します。  

- 場合**TransactionIsolationLevel**に設定されている**ReadCommitted**、後のポーリング クエリでは、選択した行は更新されません。  

- 場合**TransactionIsolationLevel**に設定されている**Serializable**、次の対象のシステム例外 (**Microsoft.ServiceModel.Channels.Common.TargetSystemException**) は、ポーリング後ステートメントが実行されるときに発生します。「Ora-08177 がこのトランザクションへのアクセスをシリアル」ことはできません。 このような場合は、設定する必要があります、 **PollingRetryCount**数を定義するプロパティのバインド アダプターは、同じトランザクションを再試行する回数。  

  トランザクション分離レベルを設定する方法の詳細については、次を参照してください。 [Oracle E-business Suite でのトランザクション分離レベルとトランザクションのタイムアウトを構成する](../../adapters-and-accelerators/adapter-oracle-ebs/configure-transaction-isolation-level-and-transaction-timeout-with-oracle-ebs.md)します。  

  トランザクションとの値を使用するアダプターのクライアントが構成されている場合、ポーリングとポーリング後ステートメントがトランザクションで実行される、 **UseAmbientTransaction**に設定されているプロパティのバインド**True**アダプター。  

  FOR UPDATE オプションを使用して、ポーリング クエリの例を示します。  

```  
SELECT * from EMP WHERE FLAG = 'Y' FOR UPDATE  
```  

### <a name="specifying-a-nowait-clause-in-the-polling-statement"></a>ポーリング ステートメントで NOWAIT 句を指定します。  
 同時実行スレッドがポーリングされるテーブルへのアクセスのシナリオを必要に応じて、テーブルが多すぎるの競合をリードします。 テーブルの行ロックを取得するブロックされるポーリング クエリがある可能性があります。 ポーリング ステートメントと SELECT ステートメントを使用する場合、SELECT ステートメントで FOR UPDATE キーワードと共に NOWAIT キーワードを指定することがあります。 これにより、ポーリング クエリの実行を選択しようとして、ポーリング クエリの行にロックがあるかどうかにすぐに返すアダプター内で。 例外は通常このような条件下で Oracle によってスローされます。 アダプター クライアントを再び使用することがあります、 **PollingInterval**データをポーリングする時間間隔後アダプター クライアントが再試行する必要がありますを指定するプロパティをバインドします。  

 NOWAIT オプションを使用して、ポーリング クエリの例を示します。  

```  
SELECT * from EMP WHERE FLAG = 'Y' FOR UPDATE NOWAIT  
```  

### <a name="specifying-a-skip-locked-clause-in-the-polling-statement"></a>ポーリング ステートメントで SKIP ロック済みの句を指定します。  
 同時実行スレッドがポーリングされるテーブルにアクセスするためのポーリング クエリで指定した WHERE 句の結果セットでいくつかの行はロックされているシナリオがあります。 たとえば、ポーリング クエリが; テーブルから 6 つの行を返しますこれら 6 つの行から 4 は既に、他のトランザクションのためロックされています。 ここで、WHERE 句で指定された行をロックして、既にロックされていることが判明しているすべての行をスキップしようとするように指示される FOR UPDATE キーワードと共に SKIP がロックされているキーワードを指定します。 トランザクション中に、WHERE 句でロックされていない行がロックされているし、ポーリング後ステートメントは、これらの行が再度ポーリングしないようにに、それらでの任意の必要な更新プログラムを実行できます。 これにより、WHERE 句ではロックされている指定したすべての行になるまでポーリング メッセージを受信するまで待機する必要はありません。  

 ロックされたスキップ キーワードは、データベースで同じテーブルをポーリングしている複数のコンピューターでアダプター クライアントがあるシナリオに便利です。 WHERE 句で指定された時間の時点でロックされている行のデータの変更のポーリング ベースのメッセージが表示されるように、ポーリング操作を構成することによってアダプター クライアントの間で負荷しことを確認する行を更新することができます。クライアントがアダプターによってポーリング ベースのデータ変更メッセージを受信する場合、その他のクライアントは取得しません、同じメッセージ。  

 ロックされたスキップ オプションを使用して、ポーリング クエリの例を示します。  

```  
SELECT * from EMP WHERE FLAG = 'Y' FOR UPDATE SKIP LOCKED  
```  

## <a name="support-for-ordered-delivery-fifo"></a>順次配送 (FIFO) のサポート  
 運用環境では、Oracle E-business Suite でのデータ変更を監視するポーリングを使用できます。 使用してアダプター クライアントがこれらのデータ変更メッセージを受信、[!INCLUDE[adapteroraclebusinessshort](../../includes/adapteroraclebusinessshort-md.md)]します。 ビジネス シナリオに基づいて、データ変更メッセージが正しい順序でアダプター クライアントによって受信される重要ながなります。  

 [!INCLUDE[adapteroraclebusinessshort](../../includes/adapteroraclebusinessshort-md.md)]配信または最初先出しの順序付けがサポートされます (FIFO) Oracle E-business Suite からメッセージが受信される順序を維持します。 受信のシナリオでの FIFO のサポートに関連するいくつかの考慮事項をここでは、[!INCLUDE[adapteroraclebusinessshort](../../includes/adapteroraclebusinessshort-md.md)]します。  

- メッセージがオーケストレーションによって処理される場合、オーケストレーションが設定からの受信メッセージの順次配送をいる必要があります、[!INCLUDE[adapteroraclebusinessshort](../../includes/adapteroraclebusinessshort-md.md)]受信ポート。  

- 送信ポートにする必要があります設定からの受信メッセージの配信が注文されている場合は、メッセージは、送信ポート (ルーティングでは、コンテンツ ベース) のシナリオで使用されている、[!INCLUDE[adapteroraclebusinessshort](../../includes/adapteroraclebusinessshort-md.md)]受信ポート。  

  Wcf-custom または Wcf-oracleebs アダプター プロパティがある**エラー発生時に要求メッセージを保留**受信処理に失敗した要求メッセージを保留するかどうかを指定します。 このプロパティを設定することができます、**メッセージ**Wcf-custom または Wcf-oracleebs のタブの下のポートの受信、**エラー処理**セクション。 次の表では、このプロパティを設定するかどうかと、メッセージのサブスクライバー (オーケストレーションやポート) の状態に基づいて、受信メッセージの処理方法を説明するシナリオを示します。  

|WCF カスタム ポートのプロパティ|参加解除状態のサブスクライバー|停止状態が参加済みでサブスクライバー|  
|-------------------------------|------------------------------------|----------------------------------------------|  
|**エラー発生時に要求メッセージを中断**プロパティ|、中断 (再開不可メッセージ) としてルーティング エラー報告が生成されます。<br /><br /> -実際のメッセージが中断されていません。<br /><br /> -投稿のトランザクションが中止された取得と、ポーリング クエリは実行されません。 そのためにポーリングが繰り返され、もう一度、行がフェッチされます。<br /><br /> -エラーの内容を記述するログが発生したイベントを報告します。|-「エラー」と見なされます。 イベント ログにエラー メッセージはありません。<br /><br /> -実際のメッセージは、中断 (再開可能) キューに配置されます。<br /><br /> -サブスクライブしているポートまたはオーケストレーションの開始時に、メッセージが自動的に再開します。 順次配送がサブスクライバーに設定されている場合は、これが適用されます。<br /><br /> -メッセージを手動で再開も可能性があります。|  
|**エラー発生時に要求メッセージを中断**プロパティの設定|、中断 (再開不可メッセージ) としてルーティング エラー報告が生成されます。<br /><br /> -実際のメッセージが中断されました。<br /><br /> -投稿のトランザクションが中止された取得と、ポーリング クエリは実行されません。 そのためにポーリングが繰り返され、もう一度、行がフェッチされます。<br /><br /> -エラーの内容を記述するログが発生したイベントを報告します。|-「エラー」と見なされます。 イベント ログにエラー メッセージはありません。<br /><br /> -実際のメッセージは、中断 (再開可能) キューに配置されます。<br /><br /> -サブスクライブしているポートまたはオーケストレーションの開始時に、メッセージが自動的に再開します。 順次配送がサブスクライバーに設定されている場合は、これが適用されます。<br /><br /> -メッセージを手動で再開も可能性があります。|  

## <a name="see-also"></a>参照  
 [開発アクティビティ](../../esb-toolkit/development-activities.md)   
 [BizTalk Server を使用してポーリング Oracle E-business Suite](../../adapters-and-accelerators/adapter-oracle-ebs/poll-oracle-e-business-suite-using-biztalk-server.md)