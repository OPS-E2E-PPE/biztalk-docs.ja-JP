---
title: MLLP 受信アダプターの処理 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- MLLP-encoded messages, receive adapters
- MLLP adapters, send adapters
- receive adapters
ms.assetid: 03c9a5f6-6f23-454f-8bab-e7c7b6057efa
caps.latest.revision: 3
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: dbb5932d65bce2b17ebfca3645b8c755549b9a9c
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/27/2018
ms.locfileid: "36968139"
---
# <a name="mllp-receive-adapter-processing"></a><span data-ttu-id="b8562-102">MLLP 受信アダプターの処理</span><span class="sxs-lookup"><span data-stu-id="b8562-102">MLLP Receive Adapter Processing</span></span>
<span data-ttu-id="b8562-103">最小下位レイヤー プロトコル (MLLP) では、両方の一方向と双方向の要求応答モード アダプターのサポートを受信します。</span><span class="sxs-lookup"><span data-stu-id="b8562-103">The Minimal Lower Layer Protocol (MLLP) receive adapter supports both one-way and two-way request response modes.</span></span> <span data-ttu-id="b8562-104">アダプターをリッスンし、接続を受け入れます。</span><span class="sxs-lookup"><span data-stu-id="b8562-104">The adapter listens and accepts connections.</span></span>  
  
 <span data-ttu-id="b8562-105">MLLP 受信アダプターは双方向のモードで動作、アダプターしないメッセージが表示されます、新しい接続から、パイプラインの前のメッセージの受信確認 (ACK) が生成されるまで。</span><span class="sxs-lookup"><span data-stu-id="b8562-105">When the MLLP receive adapter operates in two-way mode, the adapter will not receive a new message from the connection until the pipeline has generated the acknowledgment (ACK) for the previous message.</span></span>  
  
## <a name="configuration-parameters"></a><span data-ttu-id="b8562-106">構成パラメータ</span><span class="sxs-lookup"><span data-stu-id="b8562-106">Configuration Parameters</span></span>  
 <span data-ttu-id="b8562-107">受信ハンドラーのパラメーターは、BizTalk ホスト レベルで構成されているし、関連付けられているすべての MLLP 受信場所に適用されます。</span><span class="sxs-lookup"><span data-stu-id="b8562-107">The parameters for a receive handler are configured at the BizTalk Host level, and apply to all MLLP receive locations associated with it.</span></span>  
  
|<span data-ttu-id="b8562-108">パラメーター</span><span class="sxs-lookup"><span data-stu-id="b8562-108">Parameter</span></span>|<span data-ttu-id="b8562-109">新しく使用する機能</span><span class="sxs-lookup"><span data-stu-id="b8562-109">Use</span></span>|  
|---------------|---------|  
|<span data-ttu-id="b8562-110">*最大接続数の上限をそのまま使用します。*</span><span class="sxs-lookup"><span data-stu-id="b8562-110">*Max Accept Connection Limit*</span></span>|<span data-ttu-id="b8562-111">受信アダプターが受け入れる同時実行の開いている接続の数を制限します。</span><span class="sxs-lookup"><span data-stu-id="b8562-111">Limits the number of concurrent open connections that the receive adapter will accept.</span></span>|  
  
## <a name="acknowledgments-with-the-two-way-mllp-receive-adapter"></a><span data-ttu-id="b8562-112">双方向の MLLP の受信確認の受信アダプター</span><span class="sxs-lookup"><span data-stu-id="b8562-112">Acknowledgments with the two-way MLLP receive adapter</span></span>  
 <span data-ttu-id="b8562-113">アダプターが Microsoft BizTalk Accelerator 用 HL7 メッセージを受信する双方向の MLLP の受信時に ([!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)]) 次の種類の確認を生成できます。</span><span class="sxs-lookup"><span data-stu-id="b8562-113">When a two-way MLLP receive adapter receives a message, Microsoft BizTalk Accelerator for HL7 ([!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)]) can generate the following types of ACKs:</span></span>  
  
- <span data-ttu-id="b8562-114">HL7 拡張コミットの確認: このシナリオで[!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)]同じ接続上でコミットの確認を送信します。</span><span class="sxs-lookup"><span data-stu-id="b8562-114">HL7 Enhanced Commit ACK: In this scenario, [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)] sends a Commit ACK on the same connection.</span></span> <span data-ttu-id="b8562-115">これは、別の送信ポートでアプリケーションを受け入れる ACK を送信します。</span><span class="sxs-lookup"><span data-stu-id="b8562-115">It sends out an Application Accept ACK on a different send port.</span></span>  
  
- <span data-ttu-id="b8562-116">アプリケーションの同意 ACK: このシナリオで[!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)]同じ接続上でアプリケーションに同意の確認を送信します。</span><span class="sxs-lookup"><span data-stu-id="b8562-116">Application Accept ACK: In this scenario, [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)] sends an Application Accept ACK on the same connection.</span></span>  
  
- <span data-ttu-id="b8562-117">静的 ACK: このシナリオで[!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)]ACK を同じ接続で送信します。</span><span class="sxs-lookup"><span data-stu-id="b8562-117">Static ACK: In this scenario, [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)] sends an ACK on the same connection.</span></span>  
  
- <span data-ttu-id="b8562-118">生成された確認の種類によって異なります、[!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)]メッセージを送信するパーティのエクスプ ローラーの構成設定。</span><span class="sxs-lookup"><span data-stu-id="b8562-118">The type of ACK generated depends on the [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)] Configuration Explorer settings for the party sending the message.</span></span> <span data-ttu-id="b8562-119">MSH 15 のフィールドと個々 のメッセージの 16 の値は、この設定を上書きできます。</span><span class="sxs-lookup"><span data-stu-id="b8562-119">The value in fields MSH 15 and 16 of an individual message can override this setting.</span></span> <span data-ttu-id="b8562-120">ただし、静的 Ack を想定するアプリケーションでは、構成できるでのみ設定[!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)]構成エクスプ ローラー。</span><span class="sxs-lookup"><span data-stu-id="b8562-120">However, for applications expecting Static ACKs, the configuration can only be set through [!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)] Configuration Explorer.</span></span>  
  
## <a name="error-conditions"></a><span data-ttu-id="b8562-121">エラー条件</span><span class="sxs-lookup"><span data-stu-id="b8562-121">Error Conditions</span></span>  
 <span data-ttu-id="b8562-122">次のイベントは、エラー状態または非アクティブ状態がある場合に発生します。</span><span class="sxs-lookup"><span data-stu-id="b8562-122">The following events occur when there is an error condition or inactivity:</span></span>  
  
- <span data-ttu-id="b8562-123">受信場所が無効になっている場合または[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]シャット ダウンし、次のようにします。</span><span class="sxs-lookup"><span data-stu-id="b8562-123">If the receive location is disabled or [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] shuts down, the following occurs:</span></span>  
  
  - <span data-ttu-id="b8562-124">受信場所は新しい接続を使用できなくなります。</span><span class="sxs-lookup"><span data-stu-id="b8562-124">The receive location will no longer accept new connections.</span></span>  
  
  - <span data-ttu-id="b8562-125">既存の接続の[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]完全に現在のメッセージを受信し、接続を閉じます。</span><span class="sxs-lookup"><span data-stu-id="b8562-125">For existing connections, [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] completely receives the current message, and then closes the connection.</span></span>  
  
- <span data-ttu-id="b8562-126">非アクティブ状態が検出された場合 (指定されたタイムアウト内で受信場所で受信したペイロード データ)、アダプターが接続を閉じます。</span><span class="sxs-lookup"><span data-stu-id="b8562-126">When inactivity is detected (no payload data received on the receive location within the specified timeout), the adapter closes the connection.</span></span>  
  
- <span data-ttu-id="b8562-127">場合[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]不完全なメッセージを受信受信部分は中断されます。</span><span class="sxs-lookup"><span data-stu-id="b8562-127">If [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] receives an incomplete message, the portion received is suspended.</span></span> <span data-ttu-id="b8562-128">外部 (EB/CR と SB、次のメッセージの間の新しい接続で最初の SB) の前にメッセージを受信したすべてのバイトは無視されます。</span><span class="sxs-lookup"><span data-stu-id="b8562-128">All bytes received outside of a message (before the first SB on a new connection, between EB/CR and SB of the next message) are ignored.</span></span>  
  
- <span data-ttu-id="b8562-129">パイプラインは、メッセージの解析に失敗した場合、メッセージが、昇格させたプロパティを付けて MessageBox データベースにまだ配信**ParseError = true**します。</span><span class="sxs-lookup"><span data-stu-id="b8562-129">If the pipeline fails to parse the message, the message is still delivered to the MessageBox database, with a promoted property **ParseError=true**.</span></span>  
  
- <span data-ttu-id="b8562-130">サブスクリプションがないのため、またはヘッダーの構造化エラーにより、メッセージが失敗した場合[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)](解析されていた) より前の元の「回線」形式でメッセージを中断します。</span><span class="sxs-lookup"><span data-stu-id="b8562-130">If a message fails due to the absence of a subscription, or due to structural errors in the header, [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] suspends the message in its original "wire" form (prior to being parsed).</span></span> <span data-ttu-id="b8562-131">いいえ-サブスクリプションの失敗の理由を頻繁には、昇格させたプロパティがないことです。</span><span class="sxs-lookup"><span data-stu-id="b8562-131">A frequent reason for the no-subscription failure is the lack of promoted properties.</span></span> <span data-ttu-id="b8562-132">[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]未解析のメッセージを保留、 **BTS します。MessageType**は空白になります。</span><span class="sxs-lookup"><span data-stu-id="b8562-132">Since [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] suspends the unparsed message, the **BTS.MessageType** will be blank.</span></span>  
  
  <span data-ttu-id="b8562-133">次の表を、MLLP 受信アダプターを返します。 エラーを示します。</span><span class="sxs-lookup"><span data-stu-id="b8562-133">The following table lists the errors that the MLLP receive adapter returns.</span></span>  
  
|            <span data-ttu-id="b8562-134">イベント</span><span class="sxs-lookup"><span data-stu-id="b8562-134">Event</span></span>             |  <span data-ttu-id="b8562-135">ID</span><span class="sxs-lookup"><span data-stu-id="b8562-135">ID</span></span>  |                                                                                                          <span data-ttu-id="b8562-136">エラー条件</span><span class="sxs-lookup"><span data-stu-id="b8562-136">Error Condition</span></span>                                                                                                           |
|------------------------------|------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|      <span data-ttu-id="b8562-137">**ErrorListening**</span><span class="sxs-lookup"><span data-stu-id="b8562-137">**ErrorListening**</span></span>      | <span data-ttu-id="b8562-138">8448</span><span class="sxs-lookup"><span data-stu-id="b8562-138">8448</span></span> |                                                   <span data-ttu-id="b8562-139">(多くの場合その他のローカル アプリケーションは同じ IP アドレスとポート ID の組み合わせを使用して) ローカル ソケットにバインドできませんでした。</span><span class="sxs-lookup"><span data-stu-id="b8562-139">Could not bind to a local socket (most likely some other local application is using the same IP address/port ID combination).</span></span>                                                    |
| <span data-ttu-id="b8562-140">**ErrorAcceptingConnection**</span><span class="sxs-lookup"><span data-stu-id="b8562-140">**ErrorAcceptingConnection**</span></span> | <span data-ttu-id="b8562-141">8449</span><span class="sxs-lookup"><span data-stu-id="b8562-141">8449</span></span> | <span data-ttu-id="b8562-142">リモート パーティとの TCP 接続を確立できませんでした。</span><span class="sxs-lookup"><span data-stu-id="b8562-142">Could not establish a TCP connection with the remote party.</span></span> <span data-ttu-id="b8562-143">いずれか[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]最大接続数制限に達するか、リソースが十分な。</span><span class="sxs-lookup"><span data-stu-id="b8562-143">Either [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] reached the maximum connection limit, or the resources were insufficient.</span></span> |
|  <span data-ttu-id="b8562-144">**ErrorSubmittingMessage**</span><span class="sxs-lookup"><span data-stu-id="b8562-144">**ErrorSubmittingMessage**</span></span>  | <span data-ttu-id="b8562-145">8452</span><span class="sxs-lookup"><span data-stu-id="b8562-145">8452</span></span> |                   <span data-ttu-id="b8562-146">メッセージ ボックス データベースは、メッセージを受け入れませんでした。</span><span class="sxs-lookup"><span data-stu-id="b8562-146">The MessageBox database could not accept the message.</span></span> <span data-ttu-id="b8562-147">いずれか[!INCLUDE[btsSQLServerNoVersion](../../includes/btssqlservernoversion-md.md)]がないか、リソースが十分なできなかった。</span><span class="sxs-lookup"><span data-stu-id="b8562-147">Either [!INCLUDE[btsSQLServerNoVersion](../../includes/btssqlservernoversion-md.md)] was unavailable or the resources were insufficient.</span></span>                   |
|     <span data-ttu-id="b8562-148">**ErrorSendingAck**</span><span class="sxs-lookup"><span data-stu-id="b8562-148">**ErrorSendingAck**</span></span>      | <span data-ttu-id="b8562-149">8454</span><span class="sxs-lookup"><span data-stu-id="b8562-149">8454</span></span> |                                [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="b8562-150"> 接続が使用できないため、受信確認を返しませんでした。</span><span class="sxs-lookup"><span data-stu-id="b8562-150"> could not return the acknowledgment because the connection was not available.</span></span>                                 |
  
## <a name="performance-counters"></a><span data-ttu-id="b8562-151">パフォーマンス カウンター</span><span class="sxs-lookup"><span data-stu-id="b8562-151">Performance Counters</span></span>  
 <span data-ttu-id="b8562-152">MLLP アダプターを使用するパフォーマンス カウンターを次の表に示します。</span><span class="sxs-lookup"><span data-stu-id="b8562-152">The following table lists the performance counters that the MLLP adapter uses.</span></span>  
  
|<span data-ttu-id="b8562-153">カウンター</span><span class="sxs-lookup"><span data-stu-id="b8562-153">Counter</span></span>|<span data-ttu-id="b8562-154">説明</span><span class="sxs-lookup"><span data-stu-id="b8562-154">Meaning</span></span>|  
|-------------|-------------|  
|<span data-ttu-id="b8562-155">バイト</span><span class="sxs-lookup"><span data-stu-id="b8562-155">Bytes</span></span>|<span data-ttu-id="b8562-156">受信または送信されたすべてのドキュメントのペイロードのサイズ。</span><span class="sxs-lookup"><span data-stu-id="b8562-156">Size of the payload of all documents received or sent.</span></span>|  
|<span data-ttu-id="b8562-157">バイト数/秒</span><span class="sxs-lookup"><span data-stu-id="b8562-157">Bytes/sec</span></span>|<span data-ttu-id="b8562-158">受信または送信されたペイロードの現在のスループット。</span><span class="sxs-lookup"><span data-stu-id="b8562-158">Current throughput of the payload received or sent.</span></span>|  
|<span data-ttu-id="b8562-159">Documents processed</span><span class="sxs-lookup"><span data-stu-id="b8562-159">Documents processed</span></span>|<span data-ttu-id="b8562-160">**MLLP 受信**:</span><span class="sxs-lookup"><span data-stu-id="b8562-160">**MLLP Receive**:</span></span><br /><br /> <span data-ttu-id="b8562-161">ドキュメントの数は、メッセージ ボックス データベースに正常に配信します。</span><span class="sxs-lookup"><span data-stu-id="b8562-161">Number of documents successfully delivered to the MessageBox database.</span></span><br /><br /> <span data-ttu-id="b8562-162">**MLLP 送信**:</span><span class="sxs-lookup"><span data-stu-id="b8562-162">**MLLP Send**:</span></span><br /><br /> <span data-ttu-id="b8562-163">ドキュメントの数は、リモート アプリケーションに正常に配信します。</span><span class="sxs-lookup"><span data-stu-id="b8562-163">Number of documents successfully delivered to the remote application.</span></span>|  
|<span data-ttu-id="b8562-164">失敗したドキュメント</span><span class="sxs-lookup"><span data-stu-id="b8562-164">Documents failed</span></span>|<span data-ttu-id="b8562-165">**MLLP 受信**:</span><span class="sxs-lookup"><span data-stu-id="b8562-165">**MLLP Receive**:</span></span><br /><br /> <span data-ttu-id="b8562-166">ドキュメントの数は、メッセージ ボックス データベースに正常に配信します。</span><span class="sxs-lookup"><span data-stu-id="b8562-166">Number of documents not successfully delivered to the MessageBox database.</span></span><br /><br /> <span data-ttu-id="b8562-167">**MLLP 送信**:</span><span class="sxs-lookup"><span data-stu-id="b8562-167">**MLLP Send**:</span></span><br /><br /> <span data-ttu-id="b8562-168">ドキュメントの数は、リモート アプリケーションに正常に配信します。</span><span class="sxs-lookup"><span data-stu-id="b8562-168">Number of documents not successfully delivered to the remote application.</span></span>|  
|<span data-ttu-id="b8562-169">[接続状態]</span><span class="sxs-lookup"><span data-stu-id="b8562-169">Connection status</span></span>|<span data-ttu-id="b8562-170">アダプターの接続の状態 1 または 0 (1 = 接続されている)。</span><span class="sxs-lookup"><span data-stu-id="b8562-170">The status of the adapter connection, 1 or 0 (1=connected).</span></span>|  
  
 <span data-ttu-id="b8562-171">パフォーマンス カウンターのインスタンスは、次の名前付けスキームを使用します。</span><span class="sxs-lookup"><span data-stu-id="b8562-171">The performance counter instances use the following naming scheme:</span></span>  
  
```  
{recv|trans} : connection name : remote IP address : remote port ID  
```  
  
 <span data-ttu-id="b8562-172">MLLP の受信場所は、アダプターは、「受信」プレフィックスを使用し、MLLP 送信アダプターは、「トランザクション」を使用します。</span><span class="sxs-lookup"><span data-stu-id="b8562-172">Where the MLLP receive adapter uses the "recv" prefix, and the MLLP send adapter uses "trans".</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="b8562-173">によって送信される Ack では、受信ポート (たとえば、双方向のモードで動作しているアダプター) と、送信ポートが (同じソケット接続の Ack を受信する操作) はカウントされません。</span><span class="sxs-lookup"><span data-stu-id="b8562-173">ACKs sent by receive ports (for example, an adapter operating in a two-way mode) and send ports (operating to receive ACKs on the same socket connection) are not counted.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b8562-174">参照</span><span class="sxs-lookup"><span data-stu-id="b8562-174">See Also</span></span>  
 <span data-ttu-id="b8562-175">[MLLP でエンコードされたメッセージの処理](../../adapters-and-accelerators/accelerator-hl7/processing-mllp-encoded-messages.md) </span><span class="sxs-lookup"><span data-stu-id="b8562-175">[Processing MLLP-encoded Messages](../../adapters-and-accelerators/accelerator-hl7/processing-mllp-encoded-messages.md) </span></span>  
 <span data-ttu-id="b8562-176">[構成パラメーターを送信および受信アダプター](../../adapters-and-accelerators/accelerator-hl7/configuration-parameters-for-send-and-receive-adapters.md) </span><span class="sxs-lookup"><span data-stu-id="b8562-176">[Configuration Parameters for Send and Receive Adapters](../../adapters-and-accelerators/accelerator-hl7/configuration-parameters-for-send-and-receive-adapters.md) </span></span>  
 <span data-ttu-id="b8562-177">[MLLP 送信アダプターの処理](../../adapters-and-accelerators/accelerator-hl7/mllp-send-adapter-processing.md) </span><span class="sxs-lookup"><span data-stu-id="b8562-177">[MLLP Send Adapter Processing](../../adapters-and-accelerators/accelerator-hl7/mllp-send-adapter-processing.md) </span></span>  
 [<span data-ttu-id="b8562-178">ACK を受信するための送信ポートの設定</span><span class="sxs-lookup"><span data-stu-id="b8562-178">Setting Up a Send Port for Receiving ACKs</span></span>](../../adapters-and-accelerators/accelerator-hl7/setting-up-a-send-port-for-receiving-acks.md)