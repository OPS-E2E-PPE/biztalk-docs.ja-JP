---
title: HL7 メッセージの構造 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- messages, segments
- messages, fields
- trigger events
- messages, trigger events
- segments, messages
- messages, message structure
ms.assetid: 4dbef56d-97ae-466d-bc8a-dc96c40896f6
caps.latest.revision: 5
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: a298a21b7df2605cdb8dc181898808c94cf40b33
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/27/2018
ms.locfileid: "36996955"
---
# <a name="hl7-message-structure"></a><span data-ttu-id="9b5b0-102">HL7 メッセージの構造</span><span class="sxs-lookup"><span data-stu-id="9b5b0-102">HL7 Message Structure</span></span>
<span data-ttu-id="9b5b0-103">HL7 メッセージは、トリガー イベントに関連付けられている階層構造です。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-103">An HL7 message is a hierarchical structure associated with a trigger event.</span></span> <span data-ttu-id="9b5b0-104">HL7 標準では、「() を作成するシステム間でフローにデータの必要性、医療保険の現実の世界でのイベント」としてトリガー イベントを定義します。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-104">The HL7 standard defines trigger event as "an event in the real world of health care (that) creates the need for data to flow among systems".</span></span> <span data-ttu-id="9b5b0-105">各トリガー イベントは、メッセージは、トリガー イベントをサポートするために必要なデータの型を定義する抽象のメッセージに関連付けられます。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-105">Each trigger event is associated with an abstract message that defines the type of data that the message needs to support the trigger event.</span></span> <span data-ttu-id="9b5b0-106">抽象のメッセージは、セグメントのコレクションであり、繰り返しとこれらのセグメントの包含の規則が含まれています。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-106">The abstract message is a collection of segments, and includes the rules of repetition and inclusion for those segments.</span></span> <span data-ttu-id="9b5b0-107">次の表では、トリガー イベント A04 – 患者の登録に関連付けられた抽象メッセージの例を示します。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-107">The following table shows an example of an abstract message associated with the trigger event A04 – Register Patient.</span></span>  
  
|<span data-ttu-id="9b5b0-108">トリガー イベント</span><span class="sxs-lookup"><span data-stu-id="9b5b0-108">Trigger event</span></span>|<span data-ttu-id="9b5b0-109">この抽象メッセージ</span><span class="sxs-lookup"><span data-stu-id="9b5b0-109">Abstract message</span></span>|  
|-------------------|----------------------|  
|<span data-ttu-id="9b5b0-110">ADT ^ A04 ^ ADT_A01</span><span class="sxs-lookup"><span data-stu-id="9b5b0-110">ADT^A04^ADT_A01</span></span>|<span data-ttu-id="9b5b0-111">入学、放電、および転送</span><span class="sxs-lookup"><span data-stu-id="9b5b0-111">Admissions, Discharge, and Transfer</span></span>|  
|<span data-ttu-id="9b5b0-112">MSH</span><span class="sxs-lookup"><span data-stu-id="9b5b0-112">MSH</span></span>|<span data-ttu-id="9b5b0-113">メッセージ ヘッダー</span><span class="sxs-lookup"><span data-stu-id="9b5b0-113">Message Header</span></span>|  
|<span data-ttu-id="9b5b0-114">EVN</span><span class="sxs-lookup"><span data-stu-id="9b5b0-114">EVN</span></span>|<span data-ttu-id="9b5b0-115">[イベントの種類]</span><span class="sxs-lookup"><span data-stu-id="9b5b0-115">Event Type</span></span>|  
|<span data-ttu-id="9b5b0-116">PID</span><span class="sxs-lookup"><span data-stu-id="9b5b0-116">PID</span></span>|<span data-ttu-id="9b5b0-117">患者の識別</span><span class="sxs-lookup"><span data-stu-id="9b5b0-117">Patient Identification</span></span>|  
|<span data-ttu-id="9b5b0-118">[PD1]</span><span class="sxs-lookup"><span data-stu-id="9b5b0-118">[  PD1  ]</span></span>|<span data-ttu-id="9b5b0-119">追加の人口統計</span><span class="sxs-lookup"><span data-stu-id="9b5b0-119">Additional Demographics</span></span>|  
|<span data-ttu-id="9b5b0-120">[{ROL}]</span><span class="sxs-lookup"><span data-stu-id="9b5b0-120">[{ ROL }]</span></span>|<span data-ttu-id="9b5b0-121">ロール</span><span class="sxs-lookup"><span data-stu-id="9b5b0-121">Role</span></span>|  
|<span data-ttu-id="9b5b0-122">[{NK1}]</span><span class="sxs-lookup"><span data-stu-id="9b5b0-122">[{ NK1 }]</span></span>|<span data-ttu-id="9b5b0-123">年と関連付けられているパーティの [次へ]</span><span class="sxs-lookup"><span data-stu-id="9b5b0-123">Next of Kin / Associated Parties</span></span>|  
|<span data-ttu-id="9b5b0-124">PV1</span><span class="sxs-lookup"><span data-stu-id="9b5b0-124">PV1</span></span>|<span data-ttu-id="9b5b0-125">患者のアクセス</span><span class="sxs-lookup"><span data-stu-id="9b5b0-125">Patient Visit</span></span>|  
|<span data-ttu-id="9b5b0-126">[PV2]</span><span class="sxs-lookup"><span data-stu-id="9b5b0-126">[  PV2  ]</span></span>|<span data-ttu-id="9b5b0-127">患者のアクセスの追加情報</span><span class="sxs-lookup"><span data-stu-id="9b5b0-127">Patient Visit - Additional Information</span></span>|  
|<span data-ttu-id="9b5b0-128">[{ROL}]</span><span class="sxs-lookup"><span data-stu-id="9b5b0-128">[{ ROL }]</span></span>|<span data-ttu-id="9b5b0-129">ロール</span><span class="sxs-lookup"><span data-stu-id="9b5b0-129">Role</span></span>|  
|<span data-ttu-id="9b5b0-130">[{DB1}]</span><span class="sxs-lookup"><span data-stu-id="9b5b0-130">[{ DB1 }]</span></span>|<span data-ttu-id="9b5b0-131">障害のある情報</span><span class="sxs-lookup"><span data-stu-id="9b5b0-131">Disability Information</span></span>|  
|<span data-ttu-id="9b5b0-132">[{OBX}]</span><span class="sxs-lookup"><span data-stu-id="9b5b0-132">[{ OBX }]</span></span>|<span data-ttu-id="9b5b0-133">監視/結果</span><span class="sxs-lookup"><span data-stu-id="9b5b0-133">Observation/Result</span></span>|  
|<span data-ttu-id="9b5b0-134">[{AL1}]</span><span class="sxs-lookup"><span data-stu-id="9b5b0-134">[{ AL1 }]</span></span>|<span data-ttu-id="9b5b0-135">Allergy 情報</span><span class="sxs-lookup"><span data-stu-id="9b5b0-135">Allergy Information</span></span>|  
|<span data-ttu-id="9b5b0-136">[{DG1}]</span><span class="sxs-lookup"><span data-stu-id="9b5b0-136">[{ DG1 }]</span></span>|<span data-ttu-id="9b5b0-137">診断情報</span><span class="sxs-lookup"><span data-stu-id="9b5b0-137">Diagnosis Information</span></span>|  
|<span data-ttu-id="9b5b0-138">[DRG]</span><span class="sxs-lookup"><span data-stu-id="9b5b0-138">[  DRG  ]</span></span>|<span data-ttu-id="9b5b0-139">関連するグループの診断</span><span class="sxs-lookup"><span data-stu-id="9b5b0-139">Diagnosis Related Group</span></span>|  
|<span data-ttu-id="9b5b0-140">[{</span><span class="sxs-lookup"><span data-stu-id="9b5b0-140">[{</span></span>||  
|<span data-ttu-id="9b5b0-141">PR1</span><span class="sxs-lookup"><span data-stu-id="9b5b0-141">PR1</span></span>|<span data-ttu-id="9b5b0-142">手順</span><span class="sxs-lookup"><span data-stu-id="9b5b0-142">Procedures</span></span>|  
|<span data-ttu-id="9b5b0-143">[{ROL}]</span><span class="sxs-lookup"><span data-stu-id="9b5b0-143">[{ ROL }]</span></span>|<span data-ttu-id="9b5b0-144">ロール</span><span class="sxs-lookup"><span data-stu-id="9b5b0-144">Role</span></span>|  
|<span data-ttu-id="9b5b0-145">}]</span><span class="sxs-lookup"><span data-stu-id="9b5b0-145">}]</span></span>||  
|<span data-ttu-id="9b5b0-146">[{GT1}]</span><span class="sxs-lookup"><span data-stu-id="9b5b0-146">[{ GT1 } ]</span></span>|<span data-ttu-id="9b5b0-147">保証</span><span class="sxs-lookup"><span data-stu-id="9b5b0-147">Guarantor</span></span>|  
|<span data-ttu-id="9b5b0-148">[{</span><span class="sxs-lookup"><span data-stu-id="9b5b0-148">[{</span></span>||  
|<span data-ttu-id="9b5b0-149">IN1</span><span class="sxs-lookup"><span data-stu-id="9b5b0-149">IN1</span></span>|<span data-ttu-id="9b5b0-150">保険</span><span class="sxs-lookup"><span data-stu-id="9b5b0-150">Insurance</span></span>|  
|<span data-ttu-id="9b5b0-151">[入力 2]</span><span class="sxs-lookup"><span data-stu-id="9b5b0-151">[  IN2 ]</span></span>|<span data-ttu-id="9b5b0-152">保険の追加情報</span><span class="sxs-lookup"><span data-stu-id="9b5b0-152">Insurance Additional Information</span></span>|  
|<span data-ttu-id="9b5b0-153">[{IN3}]</span><span class="sxs-lookup"><span data-stu-id="9b5b0-153">[{ IN3 }]</span></span>|<span data-ttu-id="9b5b0-154">保険の追加情報の証明書です。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-154">Insurance Additional Information - Cert.</span></span>|  
|<span data-ttu-id="9b5b0-155">[{ROL}]</span><span class="sxs-lookup"><span data-stu-id="9b5b0-155">[{ ROL }]</span></span>|<span data-ttu-id="9b5b0-156">ロール</span><span class="sxs-lookup"><span data-stu-id="9b5b0-156">Role</span></span>|  
|<span data-ttu-id="9b5b0-157">}]</span><span class="sxs-lookup"><span data-stu-id="9b5b0-157">}]</span></span>||  
|<span data-ttu-id="9b5b0-158">[アクセス]</span><span class="sxs-lookup"><span data-stu-id="9b5b0-158">[  ACC  ]</span></span>|<span data-ttu-id="9b5b0-159">誤って情報</span><span class="sxs-lookup"><span data-stu-id="9b5b0-159">Accident Information</span></span>|  
|<span data-ttu-id="9b5b0-160">[UB1]</span><span class="sxs-lookup"><span data-stu-id="9b5b0-160">[  UB1  ]</span></span>|<span data-ttu-id="9b5b0-161">ユニバーサルの請求書情報</span><span class="sxs-lookup"><span data-stu-id="9b5b0-161">Universal Bill Information</span></span>|  
|<span data-ttu-id="9b5b0-162">[UB2]</span><span class="sxs-lookup"><span data-stu-id="9b5b0-162">[  UB2  ]</span></span>|<span data-ttu-id="9b5b0-163">ユニバーサルの部品表 92年情報</span><span class="sxs-lookup"><span data-stu-id="9b5b0-163">Universal Bill 92 Information</span></span>|  
|<span data-ttu-id="9b5b0-164">[PDA]</span><span class="sxs-lookup"><span data-stu-id="9b5b0-164">[  PDA  ]</span></span>|<span data-ttu-id="9b5b0-165">患者の死と Autopsy</span><span class="sxs-lookup"><span data-stu-id="9b5b0-165">Patient Death and Autopsy</span></span>|  
  
 <span data-ttu-id="9b5b0-166">上記の角かっこ"["、"]"セグメントまたはセグメントのグループが中かっこの中に、省略可能であることを示す"{0}"、"}"セグメントまたはセグメントの繰り返しのグループを指定します。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-166">The brackets above "[", "]" indicate that a segment or group of segments is optional, while braces "{", "}" indicate the segment or group of segments repeat.</span></span>  
  
 <span data-ttu-id="9b5b0-167">セグメントは、特定のデータ型に準拠した各フィールドのグループです。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-167">A segment is a group of fields each of which conforms to a particular data type.</span></span> <span data-ttu-id="9b5b0-168">フィールドには、単純または複雑な構造を持つことができます。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-168">Fields can have a simple or complex structure.</span></span> <span data-ttu-id="9b5b0-169">それらのデータ型定義で定義されたルールに従ってコンポーネントで構成されます。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-169">They consist of components according to the rules defined in their data-type definition.</span></span> <span data-ttu-id="9b5b0-170">複雑なデータ型をサポートするために一部のコンポーネントがサブコンポーネントで構成します。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-170">In order to support the more complex data types, some components may consist of subcomponents.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="9b5b0-171">HL7 メッセージの使用をエンコーディングに区切り記号が指定されているという事実は、データを分割する新しい方法を導入する、開発者向けの機能を制限します。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-171">The fact that HL7 message encoding uses specified delimiters limits the ability of a developer to introduce new ways of subdividing the data.</span></span> <span data-ttu-id="9b5b0-172">ありますサブのサブコンポーネント新しい区切り記号の種類の発明必要があるためです。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-172">There can be no sub-subcomponent, since this would require invention of a new delimiter type.</span></span>  
  
 <span data-ttu-id="9b5b0-173">最初の HL7 仕様は、抽象メッセージを定義しませんでした。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-173">The first HL7 specifications did not define the abstract message.</span></span> <span data-ttu-id="9b5b0-174">この抽象メッセージは、トリガー イベントに関連付けられたセグメントのパターンです。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-174">The abstract message is the pattern of segments associated with a trigger event.</span></span> <span data-ttu-id="9b5b0-175">同様に、HL7 メッセージでは、同時に、繰り返し表示するかグループのセグメントのセグメントのコレクションを格納します。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-175">Similarly, HL7 messages contain collections of segments that repeat together, or segment groups.</span></span> <span data-ttu-id="9b5b0-176">最初の HL7 仕様では、セグメント グループは定義しませんでした。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-176">The first HL7 specifications did not define segment groups.</span></span> <span data-ttu-id="9b5b0-177">およびそれ以降のバージョンで手順を続行 V2.3.1 から XML エンコーディングをサポートする必要性のためこれを変更します。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-177">Starting with V2.3.1, and continuing in the subsequent versions, this changed due to the need to support XML encoding.</span></span> <span data-ttu-id="9b5b0-178">たとえば、上のトリガー イベントの表に、メッセージの構造の名前では、"ADT_A01"には。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-178">For example, in the Trigger Event table above, the name of the message structure is "ADT_A01".</span></span> <span data-ttu-id="9b5b0-179">これは、同じパターンの A01 – 認めざるを得ません患者をサポートするために使用されるセグメントです。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-179">This is the same pattern of segments used to support A01 – Admit Patient.</span></span> <span data-ttu-id="9b5b0-180">便宜上、メッセージ構造の名前の対応する最初の (HL7 ドキュメント内の配置) の観点からは、それらを使用するイベントをトリガーします。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-180">For convenience, the names of message structures correspond to the first (in terms of placement within the HL7 document) trigger event that uses them.</span></span> <span data-ttu-id="9b5b0-181">同様に、グループとして上のトリガー イベント表 IN1、入力 2、IN3、ROL などで始まるセグメントのグループが繰り返されます。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-181">Similarly, the group of segments in the Trigger Event table above that starts with IN1, including IN2, IN3, and ROL, repeats as a group.</span></span> <span data-ttu-id="9b5b0-182">名前: 以降のバージョン 2.5 では、「保険」グループ。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-182">Its name—starting with Version 2.5 is "Insurance" group.</span></span>  
  
 <span data-ttu-id="9b5b0-183">バージョン 2 での間のバージョンの互換性規則は、標準の今後のバージョンが以前のバージョンが無効になる構造が含まれないことを要求することでインターフェイスの進化をサポートします。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-183">In Version 2, the inter-version compatibility rules support evolution of interfaces by requiring that subsequent versions of the standard not include structures that invalidate prior versions.</span></span> <span data-ttu-id="9b5b0-184">これは、トリガー イベントが削除されないことと、使用しないトリガー イベントを異なる目的または別の抽象メッセージ本来よりも必要です。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-184">This requires that you do not remove a trigger event and that you do not use a trigger event for a different purpose or with a different abstract message than originally intended.</span></span> <span data-ttu-id="9b5b0-185">抽象メッセージの場合にメッセージからセグメントを削除することはできないこともすることができます、省略可能な必須のセグメントまたは繰り返しセグメント以外の繰り返しことを意味します。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-185">For abstract messages, this implies that you cannot remove a segment from a message, nor can you make a mandatory segment optional or a repeating segment non-repeating.</span></span> <span data-ttu-id="9b5b0-186">セグメントを追加する場合を行う必要がありますまたは繰り返しのグループ、メッセージ内の最後に、メッセージの最後にします。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-186">If you add a segment, you must do so at the end of a message or at the end of a repeating group within a message.</span></span>  
  
 <span data-ttu-id="9b5b0-187">Microsoft BizTalk Accelerator for HL7 の次の関数 ([!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)]) これらの要件をサポートします。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-187">The following functions of Microsoft BizTalk Accelerator for HL7 ([!INCLUDE[btaBTAHL71.3abbrevnonumber](../../includes/btabtahl71-3abbrevnonumber-md.md)]) support these requirements:</span></span>  
  
-   <span data-ttu-id="9b5b0-188">すべてのトリガー イベントとメッセージの構造体 V2.1 以降と V2.5 までをサポートします。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-188">Support of all trigger events and message structures starting with V2.1 and continuing through V2.5.</span></span>  
  
-   <span data-ttu-id="9b5b0-189">セグメントを追加し、必要に応じてセグメントを調整することと繰り返しのローカリゼーションをサポートします。</span><span class="sxs-lookup"><span data-stu-id="9b5b0-189">Support of localization through adding segments and tailoring segment optionally and repetition.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="9b5b0-190">参照</span><span class="sxs-lookup"><span data-stu-id="9b5b0-190">See Also</span></span>  
 <span data-ttu-id="9b5b0-191">[HL7 メッセージの処理](../../adapters-and-accelerators/accelerator-hl7/processing-hl7-messages.md) </span><span class="sxs-lookup"><span data-stu-id="9b5b0-191">[Processing HL7 Messages](../../adapters-and-accelerators/accelerator-hl7/processing-hl7-messages.md) </span></span>  
 <span data-ttu-id="9b5b0-192">[メッセージの処理](../../adapters-and-accelerators/accelerator-hl7/message-processing.md) </span><span class="sxs-lookup"><span data-stu-id="9b5b0-192">[Message Processing](../../adapters-and-accelerators/accelerator-hl7/message-processing.md) </span></span>  
 [<span data-ttu-id="9b5b0-193">HL7 2.X スキーマの使用</span><span class="sxs-lookup"><span data-stu-id="9b5b0-193">Using HL7 2.X Schemas</span></span>](../../adapters-and-accelerators/accelerator-hl7/using-hl7-2-x-schemas.md)