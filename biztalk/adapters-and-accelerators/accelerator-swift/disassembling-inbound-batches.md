---
title: SWIFT と受信のバッチを逆アセンブル |Microsoft ドキュメント
description: Debatch に受信メッセージと BizTalk Server で、SWIFT アクセラレータを使用してバッチ処理用のスキーマをカスタマイズします。
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 11cb5672-1155-4648-b1fd-c9a3bc30e351
caps.latest.revision: 5
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 4f14a199e3422a45235727d2d16fc1464e2e4927
ms.sourcegitcommit: 8418b1a8f38b7f56979cd6e203f0b591e2f40fe1
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/28/2018
ms.locfileid: "26007803"
---
# <a name="disassemble-inbound-batches"></a>受信バッチを逆アセンブルします。

## <a name="debatch-inbound-message"></a>受信メッセージを debatch します。
SWIFT の逆アセンブラーは、受信バッチ解除する処理でそれを処理するか (ファイルまたはメッセージの複数の SWIFT メッセージを含む) の受信のバッチを逆アセンブルすることです。 受信バッチ解除処理、同じ名前の SWIFT 逆アセンブラーの構成プロパティを使用して有効にします。 受信バッチ解除する処理を有効にした後に SWIFT の逆アセンブラーに SWIFT の複数のメッセージを含むバッチを受信するすべてのメッセージが必要です。 バッチ可能性があります、バッチのエンベロープ (バッチ ヘッダーおよびトレーラーのバッチ) を含めることはできず、各 SWIFT メッセージのバッチ内でメッセージのエンベロープ (メッセージ ヘッダーとメッセージ トレーラー) を含めることはできません。 次の SWIFT 逆アセンブラーの構成プロパティを使用してこれらのバッチ属性 (形式) を構成できます。  
  
-   バッチ ヘッダー スキーマ  
  
-   バッチ トレーラー スキーマ  
  
-   メッセージ ヘッダーのスキーマ  
  
-   メッセージのトレーラー スキーマ  
  
    > [!NOTE]
    >  これらのプロパティを"None"に設定すると、受信のバッチにその特定の部分が含まれていないことを示します。  
  
 SWIFT の逆アセンブラーでは、次の構造にすべての着信バッチが必要です。  
  
 **バッチ ヘッダー**  
  
 **メッセージ ヘッダー**  
  
 **SWIFT インターチェンジ/メッセージ (SWIFT ブロックの 1 ~ 5)**  
  
 **メッセージ トレーラー**  
  
 **バッチのトレーラー**  
  
 この構造内では、「メッセージ ブロック」を考慮することができますを **– SWIFT インターチェンジ – メッセージ ヘッダー メッセージのトレーラー**部分。 一連の複数の「メッセージ ブロック」は、複数の SWIFT メッセージのバッチで構成します。 バッチ ヘッダー、メッセージのヘッダー、メッセージのトレーラー、およびバッチ トレーラー オプションですが、繰り返しの間で一致する必要があります。  
  
> [!NOTE]
>  SWIFT ヘッダーおよびトレーラのブロックとメッセージのエンベロープ (メッセージ ヘッダーとメッセージ トレーラー) を混同しないでください。 バッチのコンテキストでの総合的な (アトミック) の単位として SWIFT のヘッダーおよびトレーラのブロックを含む SWIFT メッセージ (インターチェンジ) 確認してください。 このコンテキストで、メッセージ ヘッダーとトレーラーのメッセージは、バッチ内の各 SWIFT メッセージをラップするエンベロープを参照してください。  
  
 この構造体、そのオプション、およびその再現性をより形式的に表現する考慮方法[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]バッチを定義します。  
  
-   **バッチ ヘッダー**で表される**BH**  
  
-   **メッセージのヘッダー**で表される**MH**  
  
-   **SWIFT インターチェンジ**で表される**SI**  
  
-   **メッセージのトレーラー**で表される**MT**  
  
-   **トレーラーをバッチ**で表される**BT**です。  
  
 予期されるバッチの構造を表す式は次のとおりです。  
  
 `[BH] ([MH] SI [MT])* [BT]  `
  
 角かっこ ( `[ ] ` ) の一部が省略可能であることを示します。 アスタリスク (**\***)、ブロックが反復可能であることを示します。 メッセージ ヘッダーを使用してだれでも、メッセージ バッチを構築する必要があります (**MH**) およびトレーラ (**MT**) の各繰り返しで一貫して (`[MH] SI [MT]`)。  
  
 SWIFT の逆アセンブラーは、構造内の各部分は、フラット ファイル スキーマに準拠しているために、上記の構造に従うすべての着信バッチを処理できません。 ただし、省略可能なバッチ ヘッダー/トレーラーとメッセージのヘッダー/トレーラーを使用しない場合、メッセージはこれらのスキーマに従っていません。 その結果、連続する SWIFT メッセージのみを含むバッチには、バッチ ヘッダー スキーマ、バッチ トレーラー スキーマ、メッセージ ヘッダーのスキーマ、およびメッセージ トレーラー スキーマ プロパティは"None"に設定があります。  

## <a name="customize-schemas-for-batching"></a>バッチ処理用のスキーマをカスタマイズします。  
 バッチ ヘッダー/トレーラーおよびメッセージのヘッダー/トレーラーのスキーマをカスタマイズすることができます。 例では、次のバッチを示します。  
  
```  
4  
SWIFT Message # 1  
$  
SWIFT Message # 2  
$  
SWIFT Message # 3  
$  
SWIFT Message # 4  
$  
```  
  
 この種類のバッチを処理するには、ように、バッチ スキーマのプロパティを設定は。  
  
-   バッチ ヘッダー スキーマ プロパティは、復帰で区切られた 1 つの数値 (メッセージ数) を解析するフラット ファイル スキーマを設定します。  
  
-   メッセージのトレーラー スキーマを 1 つの $ 記号およびキャリッジ リターンを解析するフラット ファイル スキーマに設定します。  
  
-   残りのエンベロープ スキーマ (バッチ トレーラー スキーマとメッセージ ヘッダーのスキーマ) は、None に設定します。  
  
 作成し、フラット ファイルのエンベロープ スキーマの適切な組み合わせを指定するあらゆる SWIFT メッセージのバッチを処理するように SWIFT の逆アセンブラーを構成できます。 この機能は非常に柔軟なです。  
  
 SWIFT の逆アセンブラーは、常にその過程でエラーが発生した場合でも、バッチ全体の処理を完了しようとします。 これにより、収集し、すべて一度に、できるだけ多くのエラーをレポートすることができます。 この「最善の努力」を実行するには、ヒューリスティック、SWIFT の逆アセンブラーください特定の決定と仮定に新しいパートを検出したときに使用するスキーマを選択するときに、または解析のエラーが発生した場合。 正しいスキーマを選択することはできません常に解析エラーとエンベロープ スキーマと SWIFT インターチェンジのスキーマ間のあいまいさ/類似性の場所と性質によって異なります。 場合によっては、適切に設計されたエンベロープ スキーマを使用して、間違ったスキーマを選択した場合の可能性を最小限に抑えることができます。 逆アセンブラーに致命的な解析エラーが発生した、または、逆アセンブラーは、適切なスキーマを決定できません、逆アセンブラーでは、残りのデータを処理することがなく、バッチは失敗します。  
  
 ときに**受信バッチ解除処理**は**有効になっている**(に設定**True**)、SWIFT の逆アセンブラーは、バッチのエンベロープ (バッチ ヘッダーのスキーマに指定されたスキーマを使用してバッチを解析します。およびバッチ トレーラー スキーマ) およびメッセージ エンベロープ (メッセージ ヘッダーのスキーマとメッセージ トレーラー スキーマ) だけでなく、バッチに SWIFT メッセージ (インターチェンジ) を解析するために指定されたスキーマです。 SWIFT メッセージのバッチ内、メッセージの種類とスキーマ動的に検出してによって読み込まれるバッチ以外の単一のメッセージと同じ方法で (SWIFT ヘッダー スキーマの指定)。 SWIFT の逆アセンブラーがスキーマの解決を実行する方法の詳細については、次を参照してください。[動的メッセージ型の検出とスキーマの解決](../../adapters-and-accelerators/accelerator-swift/dynamic-message-type-discovery-and-schema-resolution.md)です。  
  
 SWIFT の逆アセンブラーは、解析し、受信バッチ内の各 SWIFT メッセージを個別に検証します。 これには、次のバッチをシーケンス処理を実行します。  
  
1.  バッチ ヘッダー スキーマを指定した場合は、バッチ ヘッダーを解析します。  
  
2.  メッセージ ヘッダーのスキーマを指定した場合は、メッセージのエンベロープのヘッダーを解析します。  
  
3.  SWIFT インターチェンジ (メッセージ) を解析します。  
  
4.  XML 検証を有効にした場合は、XML の制約に対して SWIFT のメッセージを検証します。  
  
5.  BRE の検証を有効にした場合は、BRE ポリシー (SWIFT ネットワークと使用状況規則) に対して SWIFT メッセージを検証します。  
  
6.  メッセージのトレーラー スキーマが指定されている場合は、メッセージのエンベロープのトレーラーを解析します。  
  
7.  逆アセンブラーでは、バッチには、メッセージが見つからないまでは、6 に手順 2. を繰り返します。  
  
8.  バッチ トレーラー スキーマを指定した場合は、バッチのトレーラーを解析します。  
  
 バッチ データを解析し、次の SWIFT 逆アセンブラーの構成プロパティを使用して検証を別の作業を行う SWIFT 逆アセンブラーを構成することができます。  
  
-   **断片化**かどうか SWIFT の逆アセンブラーが公開各メッセージ バッチをメッセージ ボックス データベースで個別にプロパティを決定 (つまり、上記の手順 6. の各出現する位置の後に、メッセージごとに)、またはその必要がありますすべての手順 1 ~ 8 を完了し、メッセージ ボックス データベースに 1 つのメッセージとしてネイティブ形式 (入力の正確なコピー) で、バッチ全体を発行します。 設定する**断片化**に**True**を断片化を有効にし、バッチからのメッセージを個別にパブリッシュします。 設定する**断片化**に**False**断片化を無効にし、バッチ全体を処理した場合にのみ 1 つのメッセージとしてネイティブ形式で、バッチ全体を公開します。 通常、設定**断片化**に**無効になっている**な場合は、必要なだけ BizTalk Accelerator for SWIFT の ([!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]) を解析および受信のバッチおよび失敗したか、転送、いずれかを検証するには同じフォームを[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]受信します。 通常設定**断片化**に**有効**シナリオの[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]変換または変更するバッチ内のメッセージの解析と検証、場合[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]を再度、バッチ内のメッセージを内容と異なる順序に並べ替える[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]でそれらを受け取っていた。 設定することも**断片化**に**有効**のシナリオを異なる最終的な送信先を持つメッセージが受信バッチに含まれています。  
  
-   **バッチ ヘッダーの保存/バッチ トレーラーを保持する**プロパティは、SWIFT の逆アセンブラーを破棄する必要がありますか、またはそれを解析した後、バッチのエンベロープ (ヘッダーとトレーラー) データを保持するかどうかを決定します。 設定した場合**バッチ ヘッダーの保持またはバッチのトレーラーを保持する**に**True**、逆アセンブラーは、個々 のメッセージとしてメッセージ ボックス データベースに対応するバッチの一部 (解析された XML) を公開します。 逆アセンブラーは、マルチパート メッセージのボディ部で、データを公開します。 逆アセンブラーは特殊なコンテキスト プロパティを昇格できるように[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]バッチ内にいるかの序数の位置と、元のバッチにこれらのメッセージを関連付けることができます (バッチ ヘッダーの最初の位置、トレーラーのバッチの最後の位置)。 設定した場合**バッチ ヘッダーの保持またはバッチのトレーラーを保持する**に**False**、逆アセンブラーは、解析後に対応するバッチの一部 (解析されたデータ) を破棄します。  
  
    > [!NOTE]
    >  断片化が有効になっている場合にのみ、これらの構成プロパティが有効な (**断片化**'éý' **True**)。 断片化が無効になっているときに、逆アセンブラーを発行する、バッチ全体の正確なコピーをメッセージ ボックス データベースのネイティブ形式でので保持の設定は関連しません (*すべて*が保持されます)。  
  
-   **メッセージ ヘッダーを保持する** / **を保持するメッセージのトレーラー**プロパティは、SWIFT の逆アセンブラーを破棄する必要がありますか、またはメッセージのエンベロープ (メッセージ ヘッダーとトレーラー) を保持するかどうかを決定後に、それらを解析します。 設定した場合**メッセージ ヘッダーの保持またはメッセージのトレーラーを保持する**に**True**、逆アセンブラーは、メッセージ ボックス データベースに対応するバッチの一部 (解析された XML) を公開*と共に、それがラップする個別の SWIFT メッセージ*です。 逆アセンブラーでメッセージのエンベロープのヘッダーを公開する、**ヘッダー**マルチパート メッセージの一部です。 逆アセンブラーでメッセージのエンベロープのトレーラーを公開する、**トレーラー**マルチパート メッセージの一部です。 逆アセンブラーでメッセージのエンベロープに含まれている SWIFT メッセージの公開、**本文**同じマルチパート メッセージの一部です。 逆アセンブラーは特殊なコンテキスト プロパティを昇格できるように[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]元のバッチとバッチ内で保たれている序数の位置にこれらのメッセージを関連付けることができます。 設定した場合**メッセージ ヘッダーの保持またはメッセージのトレーラーを保持する**に**False**、逆アセンブラーは、解析後に対応するバッチの一部 (解析されたデータ) を破棄します。  
  
    > [!NOTE]
    >  断片化が有効になっている場合にのみ、これらの構成プロパティが有効な (**断片化**'éý' **True**)。 断片化が無効になっているときに、逆アセンブラーを発行する、バッチ全体の正確なコピーをメッセージ ボックス データベースのネイティブ形式でので保持の設定は関連しません (*すべて*が保持されます)。  
  
 詳細については、各構成プロパティと、その他の使用法と構成情報を参照してください[SWIFT 逆アセンブラーの構成プロパティ](../../adapters-and-accelerators/accelerator-swift/swift-disassembler-configuration-properties.md)です。 メッセージ ボックス データベースの発行とマルチパート メッセージの詳細については、BizTalk Server ヘルプを参照してください。  
  
## <a name="next-step"></a>次の手順
  
[バッチに関連する昇格プロパティ](batch-related-promoted-properties.md)
