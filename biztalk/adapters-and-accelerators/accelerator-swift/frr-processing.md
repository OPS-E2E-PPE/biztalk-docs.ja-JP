---
title: FRR 処理 |Microsoft ドキュメント
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- FRR, processing
- FRR, components
- FRR, process flow
ms.assetid: 8b064d18-5ee7-44fd-95d1-9a0d66f1ad1a
caps.latest.revision: 3
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: f2b0d34ccffd2bf09148bcfc5544b38ea5d0033d
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/20/2017
ms.locfileid: "22208970"
---
# <a name="frr-processing"></a><span data-ttu-id="49618-102">FRR 処理</span><span class="sxs-lookup"><span data-stu-id="49618-102">FRR Processing</span></span>
<span data-ttu-id="49618-103">[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] FIN 対応調整 (FRR) 機能では関連付けるから元のメッセージの FIN メッセージ SWIFT Alliance アクセス (SAA) から[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]SAA メッセージに応答します。</span><span class="sxs-lookup"><span data-stu-id="49618-103">The [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] FIN Response Reconciliation (FRR) feature correlates FIN messages from the SWIFT Alliance Access (SAA) with the original message from [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] that the SAA message responds to.</span></span> <span data-ttu-id="49618-104">たびに[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]メッセージを送信元、FRR キャッシュ SWIFT およびにバインドされているすべてのメッセージのコピー処理は失敗していません。</span><span class="sxs-lookup"><span data-stu-id="49618-104">Whenever [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] sends an original message, FRR caches a copy of any message that is bound for SWIFT and that has not failed processing.</span></span> <span data-ttu-id="49618-105">SAA によって返される応答メッセージをメッセージ ボックス データベースを監視します[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]、し、キャッシュされたメッセージのコピーに対応するすべての ACK/NAK メッセージを取得します。</span><span class="sxs-lookup"><span data-stu-id="49618-105">It then monitors the MessageBox for response messages returned by SAA to [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)], and picks up any ACK/NAK messages that corresponds to the cached message copy.</span></span>  
  
 <span data-ttu-id="49618-106">FRR は、関連付け ID のプロパティを比較することによって、送信メッセージと、受信メッセージの間の相関関係を確立します。</span><span class="sxs-lookup"><span data-stu-id="49618-106">FRR establishes a correlation between an outgoing message and an incoming message by comparing correlation ID properties.</span></span> <span data-ttu-id="49618-107">FRR は、応答の性質によって、元のメッセージのコピーの昇格させたプロパティを設定し、さらに処理用のメッセージ ボックスに、元のメッセージをルーティングします。</span><span class="sxs-lookup"><span data-stu-id="49618-107">FRR sets promoted properties of the copy of the original message according to the nature of the response, and then routes the original message to the MessageBox for further processing.</span></span>  
  
## <a name="frr-components"></a><span data-ttu-id="49618-108">FRR コンポーネント</span><span class="sxs-lookup"><span data-stu-id="49618-108">FRR Components</span></span>  
 <span data-ttu-id="49618-109">FRR には、送信および受信のメッセージを監視して、各送信または受信メッセージの比較のために使用する id プロパティを昇格する継続的なプロセス (オーケストレーション) が含まれています。</span><span class="sxs-lookup"><span data-stu-id="49618-109">FRR includes an ongoing process (orchestration) that monitors outgoing and incoming messages, and for each outgoing or incoming message, promotes the identification properties that it will use for comparison.</span></span> <span data-ttu-id="49618-110">一連の[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]FRR オーケストレーション、メッセージ内の FRR コンポーネント間でルーティングとコンポーネントが連動[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]、および[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]SAA とします。</span><span class="sxs-lookup"><span data-stu-id="49618-110">A series of [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] components work together with the FRR orchestration, routing messages between the FRR components within [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)], and between [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] and SAA.</span></span> <span data-ttu-id="49618-111">これらのコンポーネントは、次に示します。</span><span class="sxs-lookup"><span data-stu-id="49618-111">These components are listed below:</span></span>  
  
-   <span data-ttu-id="49618-112">FRR バックエンド アプリケーションから元のメッセージを受信場所が表示されます。</span><span class="sxs-lookup"><span data-stu-id="49618-112">An FRR receive location that receives the original message from the back-end application.</span></span>  
  
-   <span data-ttu-id="49618-113">送信および受信のメッセージを監視して、それらの間の相関関係を確立する FRR オーケストレーションです。</span><span class="sxs-lookup"><span data-stu-id="49618-113">The FRR orchestration that monitors outgoing and incoming messages, and establishes the correlation between them.</span></span>  
  
-   <span data-ttu-id="49618-114">元のメッセージを送信するポートの送信、FRR [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] SAA にします。</span><span class="sxs-lookup"><span data-stu-id="49618-114">An FRR send port that sends the original message from [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] to SAA.</span></span>  
  
-   <span data-ttu-id="49618-115">BizTalk Adapter for MQSeries を間データ転送を有効にする[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]と SAA (を MQSeries キューを使用)。</span><span class="sxs-lookup"><span data-stu-id="49618-115">The BizTalk Adapter for MQSeries that enables data transmission between [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] and SAA (which uses MQSeries queues).</span></span>  
  
-   <span data-ttu-id="49618-116">FRR SAA から FIN 応答メッセージを受信場所が表示されます。</span><span class="sxs-lookup"><span data-stu-id="49618-116">An FRR receive location that receives FIN response messages from SAA.</span></span>  
  
-   <span data-ttu-id="49618-117">セットから特定の種類の関連付けられたメッセージを送信それぞれが、FRR 送信ポートの[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]カスタム処理するためのバックエンド アプリケーションにします。</span><span class="sxs-lookup"><span data-stu-id="49618-117">A set of FRR send ports, each of which sends correlated messages of a specific type from [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] to a back-end application for custom processing.</span></span>  
  
 <span data-ttu-id="49618-118">上記のコンポーネントには、FRR によって昇格されたプロパティが設定されている元のメッセージを処理するバックエンドのカスタム ハンドラーを追加できます。</span><span class="sxs-lookup"><span data-stu-id="49618-118">To the above components, you can add a back-end custom handler that processes the original message the promoted properties of which have been set by FRR.</span></span>  
  
## <a name="frr-process-flow"></a><span data-ttu-id="49618-119">FRR プロセス フロー</span><span class="sxs-lookup"><span data-stu-id="49618-119">FRR Process Flow</span></span>  
 [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]<span data-ttu-id="49618-120">次のプロセスで調整を実行します。</span><span class="sxs-lookup"><span data-stu-id="49618-120"> performs the reconciliation in the following process:</span></span>  
  
1.  <span data-ttu-id="49618-121">バックエンド アプリケーションに元のメッセージをルーティングする[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]です。</span><span class="sxs-lookup"><span data-stu-id="49618-121">The back-end application routes the original message to [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)].</span></span>  
  
2.  <span data-ttu-id="49618-122">受信場所が、FRR メッセージを受信、関連付けられている受信パイプラインで処理し、BizTalk メッセージ ボックスにルーティングします。</span><span class="sxs-lookup"><span data-stu-id="49618-122">An FRR receive location receives the message, processes it in the associated receive pipeline, and routes it to the BizTalk MessageBox.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="49618-123">組み合わせて FRR を使用することができます、 [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] Message Repair and New Submission の機能、または個別にします。</span><span class="sxs-lookup"><span data-stu-id="49618-123">You can use FRR in conjunction with the [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] Message Repair and New Submission feature, or separately.</span></span> <span data-ttu-id="49618-124">メッセージの修復 and New Submission をインストールした場合は、手順 2 の後にメッセージの修復のため、システムを構成できます。</span><span class="sxs-lookup"><span data-stu-id="49618-124">If you have installed Message Repair and New Submission, you can configure the system for message repair after step 2.</span></span> <span data-ttu-id="49618-125">メッセージ修復オーケストレーションは、FRR の後続の処理用の BizTalk メッセージ ボックスに、修復/確認/承認メッセージをルーティングします。</span><span class="sxs-lookup"><span data-stu-id="49618-125">The message-repair orchestration routes the repaired/verified/approved message back to the BizTalk MessageBox for subsequent FRR processing.</span></span>  
  
3.  <span data-ttu-id="49618-126">メッセージ ボックス データベース内のメッセージが SWIFT にバインドされているし、検証が成功[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]FRR オーケストレーションのインスタンスをアクティブにします。</span><span class="sxs-lookup"><span data-stu-id="49618-126">If the message in the MessageBox is bound for SWIFT and has passed validation, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] activates an instance of the FRR orchestration.</span></span> <span data-ttu-id="49618-127">オーケストレーションは、送信メッセージのコピーを保持します。</span><span class="sxs-lookup"><span data-stu-id="49618-127">The orchestration keeps a copy of the outgoing message.</span></span> <span data-ttu-id="49618-128">すべての着信応答への送信メッセージを照合できるようにし、SAA からの応答をアクティブ化された状態で待機します。</span><span class="sxs-lookup"><span data-stu-id="49618-128">It then waits in an activated state for a response from SAA, so it can match the outgoing message to any incoming response.</span></span> <span data-ttu-id="49618-129">このオーケストレーションのインスタンスは、その特定の送信メッセージとそのメッセージを相関応答にのみ処理します。</span><span class="sxs-lookup"><span data-stu-id="49618-129">This instance of the orchestration only processes that specific outgoing message and any correlated responses to that message.</span></span> <span data-ttu-id="49618-130">でも、同じ型の他のメッセージは、別のオーケストレーションのインスタンスによって処理されます。</span><span class="sxs-lookup"><span data-stu-id="49618-130">Any other message, even of the same type, is processed by another instance of the orchestration.</span></span>  
  
4.  <span data-ttu-id="49618-131">同時を[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]FRR オーケストレーション インスタンスをアクティブに[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]SAA にメッセージを送信する送信ポートにメッセージをルーティングします。</span><span class="sxs-lookup"><span data-stu-id="49618-131">At the same time that [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] activates the FRR orchestration instance, [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)] routes the message to the send port that sends messages to SAA.</span></span> <span data-ttu-id="49618-132">送信パイプラインは、メッセージ id プロパティと MQSeries によって処理に必要なプロパティを昇格させます。</span><span class="sxs-lookup"><span data-stu-id="49618-132">The send pipeline promotes a message-identification property and properties required for processing by MQSeries.</span></span> <span data-ttu-id="49618-133">MQSeries の BizTalk アダプターにメッセージを送信します。</span><span class="sxs-lookup"><span data-stu-id="49618-133">It then sends the message to the BizTalk Adapter for MQSeries.</span></span>  
  
5.  <span data-ttu-id="49618-134">BizTalk Adapter for MQSeries は、SAA に該当する MQSeries キューにメッセージを転送します。</span><span class="sxs-lookup"><span data-stu-id="49618-134">The BizTalk Adapter for MQSeries transports the message to the appropriate MQSeries queue at SAA.</span></span>  
  
6.  <span data-ttu-id="49618-135">SAA に直接ルーティングに直接応答を生成する[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]です。</span><span class="sxs-lookup"><span data-stu-id="49618-135">SAA generates an immediate response for routing directly back to [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)].</span></span> <span data-ttu-id="49618-136">次に、SAA は SWIFT ネットワークに、メッセージをルーティングします。</span><span class="sxs-lookup"><span data-stu-id="49618-136">SAA then routes the message to the SWIFT Network.</span></span> <span data-ttu-id="49618-137">SWIFT ネットワークにルーティング SAA に送信する他の応答を生成する[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]です。</span><span class="sxs-lookup"><span data-stu-id="49618-137">The SWIFT Network generates other responses, which it sends to SAA for routing back to [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)].</span></span> <span data-ttu-id="49618-138">SAA は、元のメッセージのメッセージ id 値を FIN 応答メッセージの関連付けトークン プロパティを設定します。</span><span class="sxs-lookup"><span data-stu-id="49618-138">SAA sets the correlation token property for the FIN response message to the message-identification value of the original message.</span></span>  
  
7.  <span data-ttu-id="49618-139">BizTalk Adapter for MQSeries を介して FIN 応答にバックアップ SAA トランスポート[!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)]です。</span><span class="sxs-lookup"><span data-stu-id="49618-139">SAA transports the FIN response through the BizTalk Adapter for MQSeries back to [!INCLUDE[btaA4SWIFT2.3abbrevnonumber](../../includes/btaa4swift2-3abbrevnonumber-md.md)].</span></span>  
  
8.  <span data-ttu-id="49618-140">受信場所が、FRR 応答を受信し、FRR を介してメッセージをルーティングする応答の相関トークンを処理する受信パイプラインです。</span><span class="sxs-lookup"><span data-stu-id="49618-140">The FRR receive location receives the response and routes the message through the FRR receive pipeline that processes the response's correlation token.</span></span> <span data-ttu-id="49618-141">BizTalk メッセージ ボックスで、応答を配置します。</span><span class="sxs-lookup"><span data-stu-id="49618-141">It then places the response in the BizTalk MessageBox.</span></span>  
  
9. <span data-ttu-id="49618-142">FRR オーケストレーション インスタンスをコピー元のメッセージのメッセージの ID プロパティに等しく関連付けトークンを持つ MessageBox からメッセージを取得します。</span><span class="sxs-lookup"><span data-stu-id="49618-142">The FRR orchestration instance picks up any message from the MessageBox that has a correlation token equal to the message ID property of the copy of the original message.</span></span>  
  
10. <span data-ttu-id="49618-143">応答が、元のメッセージが SAA/SWIFT によって正常に処理されたことを示している場合、FRR オーケストレーション インスタンスを False に、元のメッセージのコピーの A4SWIFT_Failed 昇格させたプロパティを設定し、BTS を設定します。適切な値にプロパティを操作します。</span><span class="sxs-lookup"><span data-stu-id="49618-143">If the response indicates that the original message was successfully processed by SAA/SWIFT, the FRR orchestration instance sets the A4SWIFT_Failed promoted property of the copy of the original message to False, and sets the BTS.Operation property to the appropriate value.</span></span>  
  
11. <span data-ttu-id="49618-144">元のメッセージが正常に処理されていない場合 SAA/SWIFT によって、FRR オーケストレーション インスタンスは、BTS を設定します。操作のプロパティを適切な値に、A4SWIFT_Failed を True に設定し、失敗の理由を A4SWIFT_FRRFailedReason 昇格させたプロパティを設定し、修復のため、メッセージを指定します。</span><span class="sxs-lookup"><span data-stu-id="49618-144">If the original message was not successfully processed by SAA/SWIFT, the FRR orchestration instance sets the BTS.Operation property to the appropriate value, and then designates the message for repair by setting A4SWIFT_Failed to True and setting the A4SWIFT_FRRFailedReason promoted property to the reason for the failure.</span></span>  
  
12. <span data-ttu-id="49618-145">FRR オーケストレーション インスタンスは、応答メッセージを破棄し、(昇格させたプロパティが応答を示す) のメッセージ ボックスに、コピー元のメッセージをルーティングします。</span><span class="sxs-lookup"><span data-stu-id="49618-145">The FRR orchestration instance discards the response message(s), and then routes the copy of the original message (with promoted properties indicating the response) to the MessageBox.</span></span>  
  
13. <span data-ttu-id="49618-146">FRR 送信ポートの 1 つは、昇格させたプロパティを持つ元のメッセージのコピーを 1 つまたは複数のカスタム ハンドラー ピックアップへの応答をルーティングするを設定します。</span><span class="sxs-lookup"><span data-stu-id="49618-146">One of the FRR send ports set up to route the responses to one or more custom handlers picks up the copy of the original message with the promoted properties.</span></span>  
  
14. <span data-ttu-id="49618-147">カスタム ハンドラーまたはハンドラーをサブスクライブし、取得した場合、バックエンド アプリケーションに必要な元のメッセージのコピーを処理します。</span><span class="sxs-lookup"><span data-stu-id="49618-147">The custom handler or handlers subscribes to, retrieves, and processes the copy of the original message as required for the back-end application.</span></span>