---
title: WCF LOB Adapter SDK のアーキテクチャの概要 |Microsoft ドキュメント
description: ハンドラー、チャネルの実装、接続の管理、メタデータ、および WCF LOB Adapter SDK での WSDL の使用の概要
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: dbd9b63c-54a4-4f63-b3a8-8600f6009a74
caps.latest.revision: 21
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: bd86d2104fff0e227d9cdda4c9fb3faf1ea7cb84
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/20/2017
ms.locfileid: "22226626"
---
# <a name="architecture-overview-of-the-wcf-lob-adapter-sdk"></a><span data-ttu-id="280ca-103">WCF LOB Adapter SDK のアーキテクチャの概要</span><span class="sxs-lookup"><span data-stu-id="280ca-103">Architecture overview of the WCF LOB Adapter SDK</span></span>
<span data-ttu-id="280ca-104">[!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)]は、WCF チャネル モデル上に構築され、大きなおよび動的なメタデータがある基幹業務システムにアダプターを作成するアダプターの開発者向けのデザイン時および実行時の拡張機能を提供します。</span><span class="sxs-lookup"><span data-stu-id="280ca-104">The [!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)] is built on top of the WCF Channel Model and provides design-time and run-time extensions for adapter developers to create adapters to line-of-business systems that have large and dynamic metadata.</span></span> <span data-ttu-id="280ca-105">使用して作成されたアダプタ、[!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)]はカスタム WCF バインドとしてコンシューマーを確認します。</span><span class="sxs-lookup"><span data-stu-id="280ca-105">An adapter created using the [!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)] is surfaced to the consumer as a custom WCF binding.</span></span> <span data-ttu-id="280ca-106">次の図は、内部のアーキテクチャと WCF LOB Adapter SDK の主要なコンポーネントを示します。</span><span class="sxs-lookup"><span data-stu-id="280ca-106">The following figure shows the internal architecture and main components of WCF LOB Adapter SDK.</span></span>  
  
 ![](../../adapters-and-accelerators/wcf-lob-adapter-sdk/media/7183bded-465e-45b9-af78-fbb87cf2df92.gif "7183bded-465e-45b9-af78-fbb87cf2df92")  
  
## <a name="handlers"></a><span data-ttu-id="280ca-107">ハンドラー</span><span class="sxs-lookup"><span data-stu-id="280ca-107">Handlers</span></span>  
 <span data-ttu-id="280ca-108">*ハンドラー*アダプターでサポートされているメッセージ交換パターンを定義します。</span><span class="sxs-lookup"><span data-stu-id="280ca-108">*Handler* defines the message exchange patterns supported by the adapter.</span></span>  
  
 <span data-ttu-id="280ca-109">次の表に、使用できるハンドラーの型、それらの機能、および[!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)]チャネルにマップします。</span><span class="sxs-lookup"><span data-stu-id="280ca-109">The following table summarizes the available handler types, their function, and the [!INCLUDE[nextref_btsWinCommFoundation](../../includes/nextref-btswincommfoundation-md.md)] channel(s) they map to.</span></span>  
  
|<span data-ttu-id="280ca-110">**ハンドラーの種類**</span><span class="sxs-lookup"><span data-stu-id="280ca-110">**Handler Type**</span></span>|<span data-ttu-id="280ca-111">**関数**</span><span class="sxs-lookup"><span data-stu-id="280ca-111">**Function**</span></span>|<span data-ttu-id="280ca-112">**WCF チャネルへのマップ**</span><span class="sxs-lookup"><span data-stu-id="280ca-112">**Maps to WCF Channels**</span></span>|  
|---|---|---|  
|`Microsoft.ServiceModel.Channels.Common.IOutboundHandler`|<span data-ttu-id="280ca-113">一方向の送信、または要求/応答パターンをサポートしています。</span><span class="sxs-lookup"><span data-stu-id="280ca-113">Supports one-way send or request/response pattern.</span></span>|<span data-ttu-id="280ca-114">IOutputChannel、</span><span class="sxs-lookup"><span data-stu-id="280ca-114">IOutputChannel,</span></span><br /><br /> <span data-ttu-id="280ca-115">IRequestChannel</span><span class="sxs-lookup"><span data-stu-id="280ca-115">IRequestChannel</span></span>|  
|`Microsoft.ServiceModel.Channels.Common.IAsyncOutboundHandler`|<span data-ttu-id="280ca-116">非同期の一方向の送信、または要求/応答パターンをサポートしています。</span><span class="sxs-lookup"><span data-stu-id="280ca-116">Supports asynchronous one-way send or request/response pattern.</span></span>|<span data-ttu-id="280ca-117">IOutputChannel、</span><span class="sxs-lookup"><span data-stu-id="280ca-117">IOutputChannel,</span></span><br /><br /> <span data-ttu-id="280ca-118">IRequestChannel</span><span class="sxs-lookup"><span data-stu-id="280ca-118">IRequestChannel</span></span>|  
|`Microsoft.ServiceModel.Channels.Common.IInboundHandler`|<span data-ttu-id="280ca-119">一方向のサポートは、受信またはパターンを返信します。</span><span class="sxs-lookup"><span data-stu-id="280ca-119">Supports one-way receive or reply patterns.</span></span>|<span data-ttu-id="280ca-120">IInputChannel、</span><span class="sxs-lookup"><span data-stu-id="280ca-120">IInputChannel,</span></span><br /><br /> <span data-ttu-id="280ca-121">IReplyChannel</span><span class="sxs-lookup"><span data-stu-id="280ca-121">IReplyChannel</span></span>|  
|`Microsoft.ServiceModel.Channels.Common.IAsyncInboundHandler`|<span data-ttu-id="280ca-122">一方向のメソッドの非同期のバリエーションをサポートでは、受信またはパターンを返信します。</span><span class="sxs-lookup"><span data-stu-id="280ca-122">Supports asynchronous variants of methods one-way receive or reply patterns.</span></span>|<span data-ttu-id="280ca-123">IInputChannel</span><span class="sxs-lookup"><span data-stu-id="280ca-123">IInputChannel</span></span><br /><br /> <span data-ttu-id="280ca-124">IReplyChannel</span><span class="sxs-lookup"><span data-stu-id="280ca-124">IReplyChannel</span></span>|  
|`Microsoft.ServiceModel.Channels.Common.IMetadataBrowseHandler`|<span data-ttu-id="280ca-125">サポートは、ターゲット システム上のメタデータの参照。</span><span class="sxs-lookup"><span data-stu-id="280ca-125">Supports browsing of metadata on the target system.</span></span>|<span data-ttu-id="280ca-126">IRequestChannel</span><span class="sxs-lookup"><span data-stu-id="280ca-126">IRequestChannel</span></span>|  
|`Microsoft.ServiceModel.Channels.Common.IMetadataSearchHandler`|<span data-ttu-id="280ca-127">ターゲット システム上のメタデータの検索をサポートしています。</span><span class="sxs-lookup"><span data-stu-id="280ca-127">Supports searching of metadata on the target system.</span></span>|<span data-ttu-id="280ca-128">IRequestChannel</span><span class="sxs-lookup"><span data-stu-id="280ca-128">IRequestChannel</span></span>|  
|`Microsoft.ServiceModel.Channels.Common.IMetadataResolverHandler`|<span data-ttu-id="280ca-129">対象システムからのメタデータの取得をサポートしています。</span><span class="sxs-lookup"><span data-stu-id="280ca-129">Supports retrieval of metadata from the target system.</span></span>|<span data-ttu-id="280ca-130">IRequestChannel</span><span class="sxs-lookup"><span data-stu-id="280ca-130">IRequestChannel</span></span>|  
  
## <a name="channel-implementation"></a><span data-ttu-id="280ca-131">チャネルの実装</span><span class="sxs-lookup"><span data-stu-id="280ca-131">Channel implementation</span></span>  
 <span data-ttu-id="280ca-132">使用して構築されたアダプター、[!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)]トランスポート チャネル (System.ServiceModel.Channels.IServiceListner) は、基本的にします。</span><span class="sxs-lookup"><span data-stu-id="280ca-132">An adapter built using the [!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)] is basically a transport channel (System.ServiceModel.Channels.IServiceListner).</span></span> <span data-ttu-id="280ca-133">使用して構築されたアダプター、[!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)]提示されるコンシューマーに、WCF バインドとチャネル スタックを作成するバインディングが使用されています。</span><span class="sxs-lookup"><span data-stu-id="280ca-133">An adapter built using the [!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)] is surfaced to the consumer as a WCF binding, where the binding is used to create the channel stack.</span></span> <span data-ttu-id="280ca-134">このバインディングは、BasicHttpBinding、WsHttpBinding、NetTcpBinding などの他の定義済みの WCF バインディングのピアと見なされます。 として設定できますまたはコードを app.config を使用して、クライアント アプリケーション サービスを呼び出すときにします。</span><span class="sxs-lookup"><span data-stu-id="280ca-134">This binding can be considered a peer to other predefined WCF bindings such as BasicHttpBinding, WsHttpBinding, and NetTcpBinding, and can be set via app.config or in code by the client application when calling a service.</span></span> <span data-ttu-id="280ca-135">このバインディングには、T:System.ServiceModel.Channels.TransportBindingElement クラスから派生するキーのバインド要素をされているアダプターとバインド要素の順序付きセットが含まれています。</span><span class="sxs-lookup"><span data-stu-id="280ca-135">This binding contains an ordered set of binding elements, with the adapter being the key binding element that derives from the T:System.ServiceModel.Channels.TransportBindingElement class.</span></span> <span data-ttu-id="280ca-136">送信のシナリオで、[!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)]ランタイムでは、チャネル ファクトリを使用して、アダプター (トランスポート チャネルは、) を作成します。</span><span class="sxs-lookup"><span data-stu-id="280ca-136">In an outbound scenario, the [!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)] runtime uses a channel factory to create the adapter (that is, the transport channel).</span></span> <span data-ttu-id="280ca-137">受信のシナリオで、[!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)]ランタイムでは、チャネル リスナーをサービス アプリケーションで受信チャネルを使用します。</span><span class="sxs-lookup"><span data-stu-id="280ca-137">In an inbound scenario, the [!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)] runtime makes use of channel listeners for incoming channels in a service application.</span></span>  <span data-ttu-id="280ca-138">デザイン時だけでなく、実行時のメッセージは、このコンポーネントを通過します。</span><span class="sxs-lookup"><span data-stu-id="280ca-138">Both run-time as well as design-time messages pass through this component.</span></span>  
  
## <a name="connection-factory-connection-and-connection-uri-builder"></a><span data-ttu-id="280ca-139">接続ファクトリ、接続、および接続 URI のビルダー</span><span class="sxs-lookup"><span data-stu-id="280ca-139">Connection factory, connection, and connection URI builder</span></span>  
 <span data-ttu-id="280ca-140">*ConnectionFactory* URI とユーザーの資格情報に基づいて接続を作成するためにファクトリ パターンを提供します。</span><span class="sxs-lookup"><span data-stu-id="280ca-140">*ConnectionFactory* provides a factory pattern for creating connections based on URI and user credentials.</span></span> <span data-ttu-id="280ca-141">詳細については、次を参照してください。`Microsoft.ServiceModel.Channels.Common.IConnectionFactory`です。</span><span class="sxs-lookup"><span data-stu-id="280ca-141">For more information, see `Microsoft.ServiceModel.Channels.Common.IConnectionFactory`.</span></span>  
  
 <span data-ttu-id="280ca-142">*接続*ターゲット システムでの低レベルの通信のコントラクトを定義し、ネイティブな通信の Api と接続ハンドルをカプセル化します。</span><span class="sxs-lookup"><span data-stu-id="280ca-142">*Connection* defines a low-level communication contract with the target system, and encapsulates native communication APIs and connection handles.</span></span> <span data-ttu-id="280ca-143">詳細については、次を参照してください。`Microsoft.ServiceModel.Channels.Common.IConnection`です。</span><span class="sxs-lookup"><span data-stu-id="280ca-143">For more information, see `Microsoft.ServiceModel.Channels.Common.IConnection`.</span></span>  
  
 <span data-ttu-id="280ca-144">*接続 Uri ビルダー*アダプター コンシューマー プログラムで構文の特定の知識なしの接続 Uri を構築する関数を使用します。</span><span class="sxs-lookup"><span data-stu-id="280ca-144">The *Connection Uri Builder* allows adapter consumers to programmatically build connection URIs without specific knowledge of syntax.</span></span> <span data-ttu-id="280ca-145">詳細については、次を参照してください。`Microsoft.ServiceModel.Channels.Common.ConnectionUri`です。</span><span class="sxs-lookup"><span data-stu-id="280ca-145">For more information, see `Microsoft.ServiceModel.Channels.Common.ConnectionUri`.</span></span>  
  
## <a name="connection-management"></a><span data-ttu-id="280ca-146">接続の管理</span><span class="sxs-lookup"><span data-stu-id="280ca-146">Connection management</span></span>  
 <span data-ttu-id="280ca-147">*接続の管理*アダプターの接続の有効期間管理を担当します。</span><span class="sxs-lookup"><span data-stu-id="280ca-147">*Connection management* is responsible for the lifetime management of the connections of an adapter.</span></span> <span data-ttu-id="280ca-148">内部的に保たれます、接続プールを使用可能。</span><span class="sxs-lookup"><span data-stu-id="280ca-148">It internally keeps a pool of the connections ready for use.</span></span> <span data-ttu-id="280ca-149">この接続プールの資格情報は、URI ベースとします。</span><span class="sxs-lookup"><span data-stu-id="280ca-149">This connection pool is credential and URI-based.</span></span> <span data-ttu-id="280ca-150">資格情報には、ユーザー名が含まれています。 し、セキュリティ コンテキストの接続を定義するパスワードを実行します。</span><span class="sxs-lookup"><span data-stu-id="280ca-150">The credential contains a user name and password that define the security context the connection runs under.</span></span>  
  
 <span data-ttu-id="280ca-151">同じ資格情報と URI を使用している場合、同じ接続ファクトリで開いているすべてのチャネルが既にある場合 1 つ使用可能なプールから接続を取得します。</span><span class="sxs-lookup"><span data-stu-id="280ca-151">When the same credentials and URI are used, any channel being opened under the same connection factory obtains the connection from the pool if there is one available already.</span></span>  
  
 <span data-ttu-id="280ca-152">接続プール マネージャーでは、資格情報に関係なく、チャネル ファクトリの境界を越えて、その URI には、開いている接続の数のレコードが保持されます。</span><span class="sxs-lookup"><span data-stu-id="280ca-152">Connection pool manager keeps records of how many open connections there are to that URI regardless of the credentials and across the boundaries of the channel factory.</span></span> <span data-ttu-id="280ca-153">たとえば、1 つのシステムした別の資格情報を持つ 2 つのユーザー システムに接続する 2 つのチャネル ファクトリがあることを意味することができます。</span><span class="sxs-lookup"><span data-stu-id="280ca-153">For example, in one system, you can have two users who have different credentials, which means there are two channel factories connecting to the system.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="280ca-154">アダプターがこれをサポートできますが、接続の数に関する限られた可能性があります、通常のシステム リソースによって制限されます。</span><span class="sxs-lookup"><span data-stu-id="280ca-154">The adapter may be limited with respect to the number of connections it can support, generally limited by system resources.</span></span>  
  
 <span data-ttu-id="280ca-155">アダプター開発者が接続プール設定を構成するのに役立つ、[!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)]の 2 つのクラスを提供`Microsoft.ServiceModel.Channels.Common.ConnectionPoolSettings`と`Microsoft.ServiceModel.Channels.Common.ConnectionManagerSettings`です。</span><span class="sxs-lookup"><span data-stu-id="280ca-155">To help adapter developers configure the connection pool settings, the [!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)] provides two classes, `Microsoft.ServiceModel.Channels.Common.ConnectionPoolSettings` and `Microsoft.ServiceModel.Channels.Common.ConnectionManagerSettings`.</span></span>  
  
## <a name="metadata-management"></a><span data-ttu-id="280ca-156">メタデータの管理</span><span class="sxs-lookup"><span data-stu-id="280ca-156">Metadata management</span></span>  
 <span data-ttu-id="280ca-157">*メタデータの管理*は、オブジェクト指向の形式は、ターゲット システムのメタデータのキャッシュを担当します。</span><span class="sxs-lookup"><span data-stu-id="280ca-157">*Metadata management* is responsible for the object-oriented representation of the caching of the metadata for the target system.</span></span> <span data-ttu-id="280ca-158">メタデータ保持できる共通のキャッシュにアクセスできるすべての資格情報でも、キャッシュされた資格情報ごとにできます。</span><span class="sxs-lookup"><span data-stu-id="280ca-158">Metadata can be held in a common cache accessible across all credentials, or it can be cached per credential basis.</span></span>  
  
 <span data-ttu-id="280ca-159">メタデータのライフ サイクルは、デザイン時の定義とが開始され、実行時に、使用方法によっては続行されます。</span><span class="sxs-lookup"><span data-stu-id="280ca-159">The metadata life cycle begins with its design-time definitions and continues through usage during runtime.</span></span> <span data-ttu-id="280ca-160">デザイン時に、アダプター開発者は、操作のセットを識別する必要があり、必要な WSDL とクライアント側プロキシを生成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="280ca-160">At design time, adapter developers must identify the set of operations, and must generate the necessary WSDL and client side proxy.</span></span> <span data-ttu-id="280ca-161">実行時に、アダプター フレームワークに基づいたアダプターでは、定義済みのメタデータを使用し、ターゲット システムの呼び出しから返されるメッセージを解釈できます。</span><span class="sxs-lookup"><span data-stu-id="280ca-161">At runtime, the Adapter Framework-based adapters use the predefined metadata to interpret the messages returned from the target system calls.</span></span>  
  
 <span data-ttu-id="280ca-162">アダプター フレームワークはアダプター ライターのメタデータの設定を構成するために、3 つのクラスを提供`Microsoft.ServiceModel.Channels.Common.CacheSettings`、`Microsoft.ServiceModel.Channels.Common.MetadataSettings`と`Microsoft.ServiceModel.Channels.Common.CommonCacheSettings`です。</span><span class="sxs-lookup"><span data-stu-id="280ca-162">To help adapter writers configure the metadata setting, the Adapter Framework provides three classes, `Microsoft.ServiceModel.Channels.Common.CacheSettings`, `Microsoft.ServiceModel.Channels.Common.MetadataSettings` and `Microsoft.ServiceModel.Channels.Common.CommonCacheSettings`.</span></span>  
  
## <a name="wsdl-builder"></a><span data-ttu-id="280ca-163">WSDL ビルダー</span><span class="sxs-lookup"><span data-stu-id="280ca-163">WSDL builder</span></span>  
 <span data-ttu-id="280ca-164">*WSDL ビルダー* (カスタムの WSDL の生成を必要とするシナリオの上書きできます)、WCF LOB Adapter SDK の内部メタデータ オブジェクト モデルから自動 WSDL の生成を提供します。</span><span class="sxs-lookup"><span data-stu-id="280ca-164">*WSDL Builder* provides automatic WSDL generation from the WCF LOB Adapter SDK's internal metadata object model (it can be overridden for scenarios that require custom WSDL generation).</span></span>  
  
 <span data-ttu-id="280ca-165">参照してください`Microsoft.ServiceModel.Channels.Common.IWsdlRetrieval`詳細についてはします。</span><span class="sxs-lookup"><span data-stu-id="280ca-165">See `Microsoft.ServiceModel.Channels.Common.IWsdlRetrieval` for more information.</span></span>  
  
## <a name="metadata-browsesearch"></a><span data-ttu-id="280ca-166">メタデータの参照/検索</span><span class="sxs-lookup"><span data-stu-id="280ca-166">Metadata browse/search</span></span>  
 <span data-ttu-id="280ca-167">*メタデータの参照/検索*では、参照および LOB のすべてのメタデータを検索します。</span><span class="sxs-lookup"><span data-stu-id="280ca-167">*Metadata browse/search* allows for browsing and searching all LOB metadata.</span></span>  
  
 <span data-ttu-id="280ca-168">詳細については、次を参照してください。`Microsoft.ServiceModel.Channels.IMetadataRetrievalContract`です。</span><span class="sxs-lookup"><span data-stu-id="280ca-168">For more information, see `Microsoft.ServiceModel.Channels.IMetadataRetrievalContract`.</span></span>  
  
## <a name="metadata-generation"></a><span data-ttu-id="280ca-169">メタデータの生成</span><span class="sxs-lookup"><span data-stu-id="280ca-169">Metadata generation</span></span>  
 <span data-ttu-id="280ca-170">*メタデータの生成*により、(送信シナリオ) 用のクライアントのコードを生成するため、操作をアダプターのコンシューマーによって選択に基づく (受信シナリオ) 用サービス。</span><span class="sxs-lookup"><span data-stu-id="280ca-170">*Metadata generation* allows for generating code for the client (for outbound scenarios) and for the service (for inbound scenarios) based on operations selected by the adapter consumer.</span></span> <span data-ttu-id="280ca-171">場合でも、アダプターのコンシューマーがツールを使用することをお勧め[!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] ([!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)] BizTalk アプリケーションが発生した場合)、[!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)]パブリック インターフェイスを提供`Microsoft.ServiceModel.Channels.MetadataRetrievalClient.GetMetadata%2A`を取得しますSystem.Web.Services.Description.ServiceDescription、Web サービス記述言語 (WSDL) 選択した操作と型に関する情報を含むを表します。</span><span class="sxs-lookup"><span data-stu-id="280ca-171">Even though we recommend that adapter consumers use the tools [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] ([!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)] in case of BizTalk applications), the [!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)] provides a public interface `Microsoft.ServiceModel.Channels.MetadataRetrievalClient.GetMetadata%2A` to retrieve the System.Web.Services.Description.ServiceDescription, which represents a Web Service Description Language (WSDL) containing information about selected operations and types.</span></span> <span data-ttu-id="280ca-172">アダプター ライターのためのメタデータ オブジェクト モデルの使用、[!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)]から派生したクラスを含む`Microsoft.ServiceModel.Channels.Common.OperationMetadata`と`Microsoft.ServiceModel.Channels.Common.TypeMetadata`を各操作と種類の詳細を記述します。</span><span class="sxs-lookup"><span data-stu-id="280ca-172">Adapter writers make use of the metadata object model for the [!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)] that includes classes derived from `Microsoft.ServiceModel.Channels.Common.OperationMetadata` and `Microsoft.ServiceModel.Channels.Common.TypeMetadata` to describe the details of each operation and type.</span></span>  
  