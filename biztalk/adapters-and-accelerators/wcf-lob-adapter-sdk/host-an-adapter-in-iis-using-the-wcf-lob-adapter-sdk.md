---
title: WCF LOB Adapter SDK を使用して、IIS でアダプターのホスト |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 90b6cd97-01b3-4c98-a190-c6e0ccf24d2b
caps.latest.revision: 16
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 570c844b7e41c8fd4deb340e6a0ce1bf598ae24b
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/27/2018
ms.locfileid: "36976139"
---
# <a name="host-an-adapter-in-iis-using-the-wcf-lob-adapter-sdk"></a><span data-ttu-id="2b3b6-102">WCF LOB Adapter SDK を使用して、IIS でアダプターをホストします。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-102">Host an adapter in IIS using the WCF LOB Adapter SDK</span></span>
<span data-ttu-id="2b3b6-103">このセクションを使用して構築されたアダプターをホストする方法について説明、[!INCLUDE[afproductnamelong](../../includes/afproductnamelong-md.md)]インターネット インフォメーション サービス (IIS)。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-103">This section contains information about hosting an adapter built by using the [!INCLUDE[afproductnamelong](../../includes/afproductnamelong-md.md)] in Internet Information Services (IIS).</span></span> <span data-ttu-id="2b3b6-104">その他のホスティング オプションの詳細については、次を参照してください。[ホスティング サービス](https://msdn.microsoft.com/library/ms730158.aspx)します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-104">For more information about other hosting options, see [Hosting Services](https://msdn.microsoft.com/library/ms730158.aspx).</span></span>

## <a name="use-iis-and-aspnet"></a><span data-ttu-id="2b3b6-105">IIS と ASP.NET を使用して、</span><span class="sxs-lookup"><span data-stu-id="2b3b6-105">Use IIS and ASP.NET</span></span>
 <span data-ttu-id="2b3b6-106">IIS は、WCF LOB Adapter SDK で作成されたアダプターの発行を有効になっている ASP.NET で使用することができます。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-106">You can use IIS with ASP.NET enabled to publish adapters created with the WCF LOB Adapter SDK.</span></span> <span data-ttu-id="2b3b6-107">によって作成されたアダプターをホストする、 [!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)]、WCF サービスを公開するためにインターネット インフォメーション サービス (IIS) を構成します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-107">To host an adapter created by the [!INCLUDE[afproductnameshort](../../includes/afproductnameshort-md.md)], you configure Internet Information Services (IIS) for publishing WCF services.</span></span> <span data-ttu-id="2b3b6-108">次に、ASP.NET、WCF adapterwith を使用する方法を検討してください。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-108">Next, consider how to use your WCF adapterwith ASP.NET.</span></span>

 <span data-ttu-id="2b3b6-109">使用可能なホスティング モードには、IIS で WCF サービスをホストする場合:**サイド バイ サイドで**と A**SP.NET 互換モード**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-109">When hosting a WCF service in IIS, there are two hosting modes available: **side-by-side** and A**SP.NET compatibility mode**.</span></span> <span data-ttu-id="2b3b6-110">既定のホスティング モードでは、サイド バイ サイドでです。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-110">The default hosting mode is side-by-side.</span></span> <span data-ttu-id="2b3b6-111">サイド バイ サイド モードは、ホスティング ソリューションの他の WCF で一貫して動作します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-111">Side-by-side mode behaves consistently with other WCF hosting solutions.</span></span> <span data-ttu-id="2b3b6-112">そのため、IIS でホストされる WCF サービスでは、コンソール アプリケーションでホストされているいずれかと同じでは動作します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-112">Therefore, a WCF service hosted in IIS behaves the same as one hosted in a console application.</span></span> <span data-ttu-id="2b3b6-113">ただし、このことがありますできません望ましい web 開発者予想どおりの動作を ASP.NET に似ています。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-113">However, this may not be desirable because web developers might expect behavior similar to ASP.NET.</span></span> <span data-ttu-id="2b3b6-114">たとえば、サイド バイ サイドでのモードで WCF に準拠していないで指定された、URL ベースの承認規則、 `<system.web> <authorization>` web.config の構成要素。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-114">For instance, in side-by-side mode, WCF does not adhere to any URL-based authorization rules specified in the `<system.web> <authorization>` configuration element of web.config.</span></span>  

 <span data-ttu-id="2b3b6-115">ASP.NET 互換モードにより、WCF サービスの ASP.NET のすべての機能を使用して、ASPX ページと同様に動作するにはただし、この機能を有効にする、WCF アダプターを作成するときに、追加の手順を実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-115">ASP.NET compatibility mode allows the WCF service to use all the features of ASP.NET, and to behave the same as an ASPX page; however, you must take additional steps when creating your WCF adapter to enable this functionality.</span></span> <span data-ttu-id="2b3b6-116">詳細については、以下をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-116">For more information, see:</span></span> 

 [<span data-ttu-id="2b3b6-117">WCF サービスと ASP.NET</span><span class="sxs-lookup"><span data-stu-id="2b3b6-117">WCF Services and ASP.NET</span></span>](https://msdn.microsoft.com/library/aa702682.aspx)

[<span data-ttu-id="2b3b6-118">インターネット インフォメーション サービスでのホスティング</span><span class="sxs-lookup"><span data-stu-id="2b3b6-118">Hosting in Internet Information Services</span></span>](https://msdn.microsoft.com/library/ms734710.aspx)

[<span data-ttu-id="2b3b6-119">WCF サービスをホストしています。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-119">WCF Hosting Services</span></span>](https://msdn.microsoft.com/library/ms730158.aspx)

## <a name="use-the-wcf-adapter-service-development-wizard"></a><span data-ttu-id="2b3b6-120">WCF アダプター サービス開発ウィザードを使用します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-120">Use the WCF Adapter Service Development Wizard</span></span>

<span data-ttu-id="2b3b6-121">使用して、[!INCLUDE[afsvcdevwizlong](../../includes/afsvcdevwizlong-md.md)]インターネット インフォメーション サービス (IIS) 内で、アダプターをホストするための Web プロジェクトの作成を自動化します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-121">Use the [!INCLUDE[afsvcdevwizlong](../../includes/afsvcdevwizlong-md.md)] to automate creation of a Web project for hosting your adapter within Internet Information Services (IIS).</span></span> <span data-ttu-id="2b3b6-122">Windows Communication Framework (WCF) または Web サービスを使用してクライアントでホストされているアダプターを使用できます。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-122">The hosted adapter can then be consumed by clients using Windows Communication Framework (WCF) or Web services.</span></span>  

### <a name="publish-an-adapter-as-a-wcf-service-hosted-in-iis"></a><span data-ttu-id="2b3b6-123">IIS でホストされる WCF サービスとしてアダプターを発行します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-123">Publish an adapter as a WCF service hosted in IIS</span></span>  

1. <span data-ttu-id="2b3b6-124">[!INCLUDE[btsVStudioNoVersion_md](../../includes/btsvstudionoversion-md.md)]を開きます。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-124">Open [!INCLUDE[btsVStudioNoVersion_md](../../includes/btsvstudionoversion-md.md)].</span></span> <span data-ttu-id="2b3b6-125">**ファイル**メニューの **新規**、し、 **Web サイト**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-125">On the **File** menu, select **New**, and then select **Web Site**.</span></span>  

2. <span data-ttu-id="2b3b6-126">**テンプレート**を選択します**Visual c#**、選択および**WCF アダプタ サービス**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-126">In **Templates**, select **Visual C#**, and select **WCF Adapter Service**.</span></span>  

3. <span data-ttu-id="2b3b6-127">クリックして、ソリューションを保存するフォルダーを入力して**OK**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-127">Enter the folder to save the solution, and then select **OK**.</span></span> <span data-ttu-id="2b3b6-128">**WCF アダプター サービス開発ウィザード**を開始します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-128">The **WCF Adapter Service Development Wizard** starts.</span></span>  

4. <span data-ttu-id="2b3b6-129">**概要**] ページで [**次**。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-129">On the **Introduction** page, click **Next**.</span></span>  

5. <span data-ttu-id="2b3b6-130">**選択操作**ページで、このホステッド サービスを使用するには、バインディング、コントラクト、および操作を指定します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-130">On the **Choose Operations** page, specify the binding, contract, and operations to use for this hosted service.</span></span>  

   1.  <span data-ttu-id="2b3b6-131">**バインディングを選択**一覧で、使用する をクリックし、アダプターのバインドを選択します。**構成**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-131">In the **Select a binding** list, select the adapter binding to use, and then click **Configure**.</span></span> <span data-ttu-id="2b3b6-132">これが表示されます、**アダプターの構成** ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-132">This displays the **Configure Adapter** dialog box.</span></span> <span data-ttu-id="2b3b6-133">アダプターを呼び出すと、操作のメタデータを取得するために必要な値を提供します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-133">Provide the values necessary to invoke the adapter and to retrieve operation metadata.</span></span>  

   2.  <span data-ttu-id="2b3b6-134">**セキュリティ**] タブで、[、**クライアント資格情報の種類**クライアント資格情報をアダプターに渡すときに使用します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-134">On the **Security** tab, select the **Client credential type** to use when passing client credentials to the adapter.</span></span>  

       |<span data-ttu-id="2b3b6-135">[資格情報の種類]</span><span class="sxs-lookup"><span data-stu-id="2b3b6-135">Credential Type</span></span>|<span data-ttu-id="2b3b6-136">説明</span><span class="sxs-lookup"><span data-stu-id="2b3b6-136">Description</span></span>|  
       |---------------------|-----------------|  
       |<span data-ttu-id="2b3b6-137">**なし**</span><span class="sxs-lookup"><span data-stu-id="2b3b6-137">**None**</span></span>|<span data-ttu-id="2b3b6-138">クライアントは、資格情報を提示する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-138">The client does not need to present credentials.</span></span>|  
       |<span data-ttu-id="2b3b6-139">**Windows**</span><span class="sxs-lookup"><span data-stu-id="2b3b6-139">**Windows**</span></span>|<span data-ttu-id="2b3b6-140">クライアントでは、Windows 資格情報を使用します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-140">The client will use Windows credentials.</span></span>|  
       |<span data-ttu-id="2b3b6-141">**ユーザー名**</span><span class="sxs-lookup"><span data-stu-id="2b3b6-141">**Username**</span></span>|<span data-ttu-id="2b3b6-142">ユーザー名とパスワード、クライアントが提供されます。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-142">The client will supply a user name and password.</span></span>|  
       |<span data-ttu-id="2b3b6-143">**[MSSQLSERVER のプロトコルのプロパティ]**</span><span class="sxs-lookup"><span data-stu-id="2b3b6-143">**Certificate**</span></span>|<span data-ttu-id="2b3b6-144">クライアントは、X.509 証明書を使用して認証されます。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-144">The client will be authenticated by using an X.509 certificate.</span></span> <span data-ttu-id="2b3b6-145">この値が設定されている場合は、クリックして**参照**で、**クライアント証明書**領域、および使用する証明書を選択します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-145">If this value is set, click **Browse** in the **Client Certificate** area, and then select the certificate to use.</span></span>|  

   3.  <span data-ttu-id="2b3b6-146">**URI プロパティ**タブで、アダプターに必要な URI パラメーターを指定します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-146">On the **URI Properties** tab, specify the URI parameters required by the adapter.</span></span> <span data-ttu-id="2b3b6-147">このタブに表示されるエントリで公開されるプロパティによって異なります、`ConnectionUri Properties`のアダプター クラス。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-147">The entries displayed in this tab vary based on the properties exposed in the  `ConnectionUri Properties` class of the adapter.</span></span>  

   4.  <span data-ttu-id="2b3b6-148">**バインド プロパティ** タブで、アダプターに必要なバインドのプロパティの値を指定します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-148">On the **Binding Properties** tab, specify values for the binding properties required for the adapter.</span></span> <span data-ttu-id="2b3b6-149">**全般**セクションには、タイムアウト値などの一般的な設定が含まれています。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-149">The **General** section contains common settings such as timeout values.</span></span> <span data-ttu-id="2b3b6-150">追加のプロパティの一覧はで公開されているカスタム プロパティに基づいて、`AdapterBinding`クラス。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-150">Additional properties are listed based on the custom properties exposed in your `AdapterBinding` class.</span></span>  

6. <span data-ttu-id="2b3b6-151">構成値を指定したら、クリックして**Connect**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-151">Once you have specified the configuration values, click **Connect**.</span></span>  

   1.  <span data-ttu-id="2b3b6-152">**選択コントラクト型**一覧で、使用するコントラクトを選択します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-152">From the **Select contract type** list, select the contract to use.</span></span> <span data-ttu-id="2b3b6-153">これによって、**カテゴリを選択**ツリー コントロールのカテゴリと、このアダプターから実行できる操作の一覧。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-153">This populates the **Select a category** tree control with a list of categories and operations available from this adapter.</span></span> <span data-ttu-id="2b3b6-154">アダプターが使用して検索機能を実装している場合、`MetadataRetrievalClient`クラスで検索用語を入力することができます、**カテゴリで検索**カテゴリと、検索用語が含まれている操作のみを返すフィールド。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-154">If the adapter implements search functionality through a `MetadataRetrievalClient` class, you can enter a search term in the **Search in category** field to return only categories and operations that contain the search term.</span></span>  

       > [!NOTE]
       >  <span data-ttu-id="2b3b6-155">送信操作のみが選択可能な。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-155">Only outbound operations are available for selection.</span></span>  

   2.  <span data-ttu-id="2b3b6-156">**利用可能なカテゴリと操作**ボックスに追加するをクリックする項目を選択、**追加**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-156">From the **Available categories and operations** box, select the items to add, and then click **Add**.</span></span> <span data-ttu-id="2b3b6-157">目的の項目を追加した後にをクリックして**次**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-157">Once you have added the desired items, click **Next**.</span></span>  

7. <span data-ttu-id="2b3b6-158">**サービスの構成およびエンドポイントの動作** ページで、このアダプターの目的の動作を設定します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-158">On the **Configure Service and Endpoint Behaviors** page, set the desired behaviors for this adapter.</span></span>  

   1.  <span data-ttu-id="2b3b6-159">**サービス動作構成**セクションには、サービスの動作を制御するエントリが含まれています。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-159">The **Service Behavior Configuration** section contains entries that control the service behavior.</span></span> <span data-ttu-id="2b3b6-160">ウィザードを実行した後は、web.config ファイルを編集して、選択したサービスの動作を変更できます。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-160">After running the wizard, you can modify the selected service behaviors by editing the web.config file.</span></span>  

       |<span data-ttu-id="2b3b6-161">プロパティ</span><span class="sxs-lookup"><span data-stu-id="2b3b6-161">Property</span></span>|<span data-ttu-id="2b3b6-162">説明</span><span class="sxs-lookup"><span data-stu-id="2b3b6-162">Description</span></span>|  
       |--------------|-----------------|  
       |<span data-ttu-id="2b3b6-163">**EnableMetadataExchange**</span><span class="sxs-lookup"><span data-stu-id="2b3b6-163">**EnableMetadataExchange**</span></span>|<span data-ttu-id="2b3b6-164">この値を設定**True**クライアントの要求にメタデータの公開をサービスすることができます。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-164">Setting this value to **True** enables service metadata publishing to client requests.</span></span> <span data-ttu-id="2b3b6-165">これを変更しても設定できます\< **serviceMetadata httpGetEnabled =""** \> web.config にします。既定値は**False**</span><span class="sxs-lookup"><span data-stu-id="2b3b6-165">This can also be set by modifying \<**serviceMetadata httpGetEnabled=””**\> in web.config. Default is **False**</span></span>|  
       |<span data-ttu-id="2b3b6-166">**IncludeExceptionDetailsinFault**</span><span class="sxs-lookup"><span data-stu-id="2b3b6-166">**IncludeExceptionDetailsinFault**</span></span>|<span data-ttu-id="2b3b6-167">この値を設定**True**をクライアントに SOAP エラー マネージ例外情報で結果が返されます。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-167">Setting this value to **True** results in managed exception information returned to the client in SOAP faults.</span></span> <span data-ttu-id="2b3b6-168">これを変更しても設定できます\< **serviceDebug usingincludeExceptionDetailInFaults =""** \> web.config にします。既定値は**False**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-168">This can also be set by modifying \<**serviceDebug usingincludeExceptionDetailInFaults=””**\> in web.config. Default is **False**.</span></span>|  
       |<span data-ttu-id="2b3b6-169">**名前**</span><span class="sxs-lookup"><span data-stu-id="2b3b6-169">**Name**</span></span>|<span data-ttu-id="2b3b6-170">サービス動作の構成の名前です。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-170">Name for the service behavior configuration.</span></span>|  
       |<span data-ttu-id="2b3b6-171">**UseServiceCertificate**</span><span class="sxs-lookup"><span data-stu-id="2b3b6-171">**UseServiceCertificate**</span></span>|<span data-ttu-id="2b3b6-172">この値は、サービスがクライアント プロセスに自身を認証する X.509 証明書を使用しているかどうかを決定します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-172">This value determines whether the service will use an X.509 certificate to authenticate itself to the client process.</span></span> <span data-ttu-id="2b3b6-173">既定値は**True**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-173">Default is **True**.</span></span>|  
       |<span data-ttu-id="2b3b6-174">**FindValue**</span><span class="sxs-lookup"><span data-stu-id="2b3b6-174">**FindValue**</span></span>|<span data-ttu-id="2b3b6-175">この値は、証明書ストアに特定の X.509 証明書の検索に使用されます。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-175">This value is used to search for a specific X.509 certificate in the certificate store.</span></span> <span data-ttu-id="2b3b6-176">これを変更しても設定できます\< **serviceCredentials findValue =""** \> web.config**注:** 場合にのみ、このプロパティの値を指定**UseServiceCertificate**に設定されている**True**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-176">This can also be set by modifying \<**serviceCredentials findValue=””**\> in web.config **Note:**  Specify a value for this property only if **UseServiceCertificate** is set to **True**.</span></span>|  
       |<span data-ttu-id="2b3b6-177">**StoreLocation**</span><span class="sxs-lookup"><span data-stu-id="2b3b6-177">**StoreLocation**</span></span>|<span data-ttu-id="2b3b6-178">この値は、指定された証明書を検索するシステム ストアの場所を指定します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-178">This value specifies system store location to search for the specified certificate.</span></span> <span data-ttu-id="2b3b6-179">これを変更しても設定できます\< **serviceCredentials storeLocation =""** \> web.config にします。**注:** 場合にのみ、このプロパティの値を指定**UseServiceCertificate**に設定されている**True**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-179">This can also be set by modifying \<**serviceCredentials storeLocation=””**\> in web.config. **Note:**  Specify a value for this property only if **UseServiceCertificate** is set to **True**.</span></span>|  
       |<span data-ttu-id="2b3b6-180">**StoreName**</span><span class="sxs-lookup"><span data-stu-id="2b3b6-180">**StoreName**</span></span>|<span data-ttu-id="2b3b6-181">この値は、指定された証明書を検索する特定のシステム ストアを指定します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-181">This value specifies the specific system store to search for the specified certificate.</span></span> <span data-ttu-id="2b3b6-182">これを変更しても設定できます\< **serviceCredentials storeName =""** \> web.config**注:** 場合にのみ、このプロパティの値を指定**UseServiceCertificate**に設定されている**True**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-182">This can also be set by modifying \<**serviceCredentials storeName=””**\> in web.config **Note:**  Specify a value for this property only if **UseServiceCertificate** is set to **True**.</span></span>|  
       |<span data-ttu-id="2b3b6-183">**X509FindType**</span><span class="sxs-lookup"><span data-stu-id="2b3b6-183">**X509FindType**</span></span>|<span data-ttu-id="2b3b6-184">使用する特定の証明書を確認するには、検索を使用した、FindValue の型が前に指定します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-184">The type of search to use with the FindValue specified earlier in order to find the specific certificate to use.</span></span> <span data-ttu-id="2b3b6-185">これを変更しても設定できます\< **serviceCredentials x509FindType =""** \> web.config**注:** 場合にのみ、このプロパティの値を指定**UseServiceCertificate**に設定されている**True**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-185">This can also be set by modifying \<**serviceCredentials x509FindType=””**\> in web.config **Note:**  Specify a value for this property only if **UseServiceCertificate** is set to **True**.</span></span>|  

   2.  <span data-ttu-id="2b3b6-186">**エンドポイント動作の構成**セクションは、エンドポイントの動作を制御します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-186">The **Endpoint Behavior Configuration** section controls the endpoint behavior.</span></span>  

       |<span data-ttu-id="2b3b6-187">プロパティ</span><span class="sxs-lookup"><span data-stu-id="2b3b6-187">Property</span></span>|<span data-ttu-id="2b3b6-188">説明</span><span class="sxs-lookup"><span data-stu-id="2b3b6-188">Description</span></span>|  
       |--------------|-----------------|  
       |<span data-ttu-id="2b3b6-189">**名前**</span><span class="sxs-lookup"><span data-stu-id="2b3b6-189">**Name**</span></span>|<span data-ttu-id="2b3b6-190">エンドポイントの動作の名前</span><span class="sxs-lookup"><span data-stu-id="2b3b6-190">The name of the endpoint behavior</span></span>|  
       |<span data-ttu-id="2b3b6-191">**AuthenticationType**</span><span class="sxs-lookup"><span data-stu-id="2b3b6-191">**AuthenticationType**</span></span>|<span data-ttu-id="2b3b6-192">この値は、クライアントの受信ドキュメントの資格情報を取得する場所をアダプターに指示します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-192">This value instructs the adapter where to obtain the client credentials of the incoming document.</span></span> <span data-ttu-id="2b3b6-193">設定、サービスに対する認証にクライアント証明書を指定するクライアントを有効にする**ClientCredentialUsernamePassword**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-193">To enable clients to specify a client certificate to authenticate to the service, set this to **ClientCredentialUsernamePassword**.</span></span> <span data-ttu-id="2b3b6-194">設定する HTTP ヘッダーの一部として、ユーザー名とパスワードを指定するクライアントを有効にする、 **HTTPUsernamePassword**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-194">To enable clients to specify the user name and password as part of the HTTP header, set this to **HTTPUsernamePassword**.</span></span> <span data-ttu-id="2b3b6-195">設定、ClientCredential インターフェイスを通じて資格情報を指定するクライアントを有効にする**自動**します。これが失敗すると、クライアントは、HTTP ヘッダーの一部として資格情報を渡すことができます。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-195">To enable clients to specify credentials through the ClientCredential interface, set this to **Auto**. If this fails, clients can pass credentials as part of the HTTP header.</span></span><br /><br /> <span data-ttu-id="2b3b6-196">この値は変更することによっても設定する\< **endpointBehavior adapterSecurityBridgeType** \> web.config にします。既定値は**自動**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-196">This value can also be set by modifying \<**endpointBehavior adapterSecurityBridgeType**\> in web.config. Default is **Auto**.</span></span>|  
       |<span data-ttu-id="2b3b6-197">**UsernameHeader**</span><span class="sxs-lookup"><span data-stu-id="2b3b6-197">**UsernameHeader**</span></span>|<span data-ttu-id="2b3b6-198">これには、サービスにユーザー名を渡すために使用されるヘッダーの名前を指定します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-198">This specifies the name of the header that will be used to pass the user name to the service.</span></span> <span data-ttu-id="2b3b6-199">HTTP ヘッダーの詳細については、用に「カスタム HTTP および SOAP ヘッダーのサポート」を参照してください。 [http://go.microsoft.com/fwlink/?LinkId=106692](http://go.microsoft.com/fwlink/?LinkId=106692)</span><span class="sxs-lookup"><span data-stu-id="2b3b6-199">For more information about HTTP headers, see “Support for Custom HTTP and SOAP headers” at [http://go.microsoft.com/fwlink/?LinkId=106692](http://go.microsoft.com/fwlink/?LinkId=106692)</span></span><br /><br /> <span data-ttu-id="2b3b6-200">この値は変更することによっても設定する\< **endpointBehavior usernameHttpHeader** \> web.config にします。**注:** 場合は、このプロパティの値を指定する必要があります、 **AuthenticationType**に設定されている**HTTPUserNamePassword**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-200">This value can also be set by modifying \<**endpointBehavior usernameHttpHeader**\> in web.config. **Note:**  You must specify a value for this property if the **AuthenticationType** is set to **HTTPUserNamePassword**.</span></span>  <span data-ttu-id="2b3b6-201">場合設定**自動**、このプロパティは省略可能です。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-201">If set to **Auto**, this property is optional.</span></span>|  
       |<span data-ttu-id="2b3b6-202">**PasswordHeader**</span><span class="sxs-lookup"><span data-stu-id="2b3b6-202">**PasswordHeader**</span></span>|<span data-ttu-id="2b3b6-203">これには、サービスにユーザーのパスワードを渡すに使用されるヘッダーの名前を指定します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-203">This specifies the name of the header that will be used to pass the user password to the service.</span></span> <span data-ttu-id="2b3b6-204">HTTP ヘッダーの詳細についてを参照してください「のサポートのカスタム HTTP ヘッダーと SOAP ヘッダー」 [http://go.microsoft.com/fwlink/?LinkId=106692](http://go.microsoft.com/fwlink/?LinkId=106692)</span><span class="sxs-lookup"><span data-stu-id="2b3b6-204">For more information about HTTP headers, see “Support for Custom HTTP and SOAP Headers” at [http://go.microsoft.com/fwlink/?LinkId=106692](http://go.microsoft.com/fwlink/?LinkId=106692)</span></span><br /><br /> <span data-ttu-id="2b3b6-205">この値は、変更することによっても設定できます <**endpointBehavior passwordHttpHeader**< web.config にします。**注:** 場合は、このプロパティの値を指定する必要があります、 **AuthenticationType**に設定されている**HTTPUserNamePassword**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-205">This value can also be set by modifying <**endpointBehavior passwordHttpHeader**< in web.config. **Note:**  You must specify a value for this property if the **AuthenticationType** is set to **HTTPUserNamePassword**.</span></span> <span data-ttu-id="2b3b6-206">場合設定**自動**、このプロパティは省略可能です。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-206">If set to **Auto**, this property is optional.</span></span>|  

   3.  <span data-ttu-id="2b3b6-207">目的の動作を設定した後には、次のようにクリックします。**次**を続行します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-207">After setting the desired behavior, click **Next** to continue.</span></span>  

8. <span data-ttu-id="2b3b6-208">**構成サービスのエンドポイントのバインドとアドレス** ページで、契約のアドレスとバインディングのプロパティを構成できます。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-208">On the **Configure Service Endpoint Binding and Address** page, you can configure the address and binding properties for the contracts.</span></span> <span data-ttu-id="2b3b6-209">内のコントラクトを選択、**を構成する契約を選択**しで目的の値を入力します、**アドレスとコントラクトのバインディングを構成する** ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-209">Select the contract in the **Select a contract to configure** list, and then enter the desired values in the **Configure the address and binding for the contract** dialog box.</span></span>  

   1.  <span data-ttu-id="2b3b6-210">選択、 **BindingConfiguration**バインドのプロパティの下のエントリ。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-210">Select the **BindingConfiguration** entry under Binding Properties.</span></span> <span data-ttu-id="2b3b6-211">ウィザードは、バインド構成のフィールドは自動的に設定するためのみ基本的な HTTP バインディングをサポート**System.ServiceModel.Configuration.BasicHttpBindingElement**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-211">The wizard only supports basic HTTP binding so the binding configuration field is automatically set to **System.ServiceModel.Configuration.BasicHttpBindingElement**.</span></span> <span data-ttu-id="2b3b6-212">このバインディングの構成プロパティを変更する、省略記号ボタンをクリックします **。**</span><span class="sxs-lookup"><span data-stu-id="2b3b6-212">To change the configuration properties for this binding, click the ellipsis **…**</span></span> <span data-ttu-id="2b3b6-213">ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-213">button.</span></span> <span data-ttu-id="2b3b6-214">セキュリティで保護された通信チャネルを使用する必要があります常に設定する、**モード**プロパティを**トランスポート**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-214">To use a secure communication channel, you must always set the **Mode** property to **Transport**.</span></span> <span data-ttu-id="2b3b6-215">これが既定値です。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-215">This is the default value.</span></span>  

   2.  <span data-ttu-id="2b3b6-216">選択、 **EndpointName**、エンドポイントの必要な名前を入力します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-216">Select the **EndpointName**, and then enter the desired name of the endpoint.</span></span>  

   3.  <span data-ttu-id="2b3b6-217">をクリックして変更を適用するには、**適用**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-217">To apply your changes, click **Apply**.</span></span>  

9. <span data-ttu-id="2b3b6-218">続行するには、 **[次へ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-218">To continue, click **Next**.</span></span> <span data-ttu-id="2b3b6-219">[概要] ページには、選択されたアダプターの操作のツリー構造が一覧表示します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-219">The Summary page lists a tree structure of the adapter operations that were selected.</span></span>  

10. <span data-ttu-id="2b3b6-220">概要を確認し、**完了**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-220">Review the summary, and then click **Finish**.</span></span>  

11. <span data-ttu-id="2b3b6-221">ウィザードでは、Web プロジェクトを作成し、次のファイルを追加します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-221">The wizard creates a Web project and adds the following files.</span></span>  


    |    <span data-ttu-id="2b3b6-222">ファイル</span><span class="sxs-lookup"><span data-stu-id="2b3b6-222">File</span></span>    |                                                <span data-ttu-id="2b3b6-223">説明</span><span class="sxs-lookup"><span data-stu-id="2b3b6-223">Description</span></span>                                                 |
    |------------|------------------------------------------------------------------------------------------------------------|
    |    <span data-ttu-id="2b3b6-224">.svc</span><span class="sxs-lookup"><span data-stu-id="2b3b6-224">.svc</span></span>    |                               <span data-ttu-id="2b3b6-225">WCF プロキシを参照するサービス ファイル。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-225">Service file that references to the WCF proxy.</span></span>                               |
    |    <span data-ttu-id="2b3b6-226">.cs</span><span class="sxs-lookup"><span data-stu-id="2b3b6-226">.cs</span></span>     |                                         <span data-ttu-id="2b3b6-227">WCF プロキシを実装します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-227">Implements the WCF proxy.</span></span>                                          |
    | <span data-ttu-id="2b3b6-228">web.config</span><span class="sxs-lookup"><span data-stu-id="2b3b6-228">web.config</span></span> | <span data-ttu-id="2b3b6-229">含む\<**エンドポイント**\, \<**バインド**\>、および\<**動作**\>要素\<**システム。ServiceModel**\></span><span class="sxs-lookup"><span data-stu-id="2b3b6-229">Contains \<**endpoint**\, \<**bindings**\>, and \<**behaviors**\> elements for \<**system.ServiceModel**\></span></span> |


12. <span data-ttu-id="2b3b6-230">WCF サービス プロジェクトを発行します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-230">Publish the WCF service project.</span></span>  

    1.  <span data-ttu-id="2b3b6-231">ソリューション エクスプ ローラーでプロジェクトを右クリックし、をクリックし、**発行**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-231">Right-click the project in Solution Explorer, and then click **Publish**.</span></span>  

    2.  <span data-ttu-id="2b3b6-232">**Web サイトの発行** ダイアログ ボックスで、WCF サービスの対象 URL を指定します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-232">In the **Publish Web Site** dialog box, specify the target URL for the WCF service.</span></span>  

    3.  <span data-ttu-id="2b3b6-233">選択**このプリコンパイル済みサイトの更新を許可する**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-233">Select **Allow this precompiled site to be updated**.</span></span>  

    4.  <span data-ttu-id="2b3b6-234">選択**固定名およびシングル ページ アセンブリを使用する**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-234">Select **Use fixed naming and single page assemblies**.</span></span>  

    5.  <span data-ttu-id="2b3b6-235">選択**プリコンパイル済みアセンブリで厳密な名前を有効にする**、しを使用する署名キーを指定します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-235">Select **Enable strong naming on precompiled assemblies**, and then specify the signing key to use.</span></span>  

13. <span data-ttu-id="2b3b6-236">Web サイトを発行する をクリックして**OK**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-236">To publish the Web site, click **OK**.</span></span>  

14. <span data-ttu-id="2b3b6-237">サービスが正常に発行されることを確認します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-237">Verify that the service is published successfully.</span></span>  

    1.  <span data-ttu-id="2b3b6-238">IIS 管理コンソールを起動します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-238">Start the IIS Management Console.</span></span>  <span data-ttu-id="2b3b6-239">クリックして**開始**、 をポイント**管理ツール**、順にクリックします**インターネット インフォメーション サービス**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-239">Click **Start**, point to **Administrative Tools**, and then click **Internet Information Services**.</span></span>  

    2.  <span data-ttu-id="2b3b6-240">サービスを発行したノードに移動します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-240">Navigate to the node where you published the service.</span></span>  <span data-ttu-id="2b3b6-241">サービス発行されていた場合 http://localhost/myservice に移動します**インターネット インフォメーション サービス**> **コンピューター名**> **Websites**> **既定の Web サイト**> **myservice**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-241">If the service was published as http://localhost/myservice, navigate to **Internet Information Services**> **Computer Name**> **Web Sites**> **Default Web Site**> **myservice**.</span></span>  

    3.  <span data-ttu-id="2b3b6-242">右側のウィンドウで、.svc ファイルを右クリックし、**参照**します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-242">On the right pane, right-click the .svc file, and then click **Browse**.</span></span> <span data-ttu-id="2b3b6-243">サービスに関する情報を含む Web ページが表示されます。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-243">The Web page shows up with information about the service.</span></span> <span data-ttu-id="2b3b6-244">クライアント アプリケーションから WCF または Web サービスの呼び出しを使用してこのサービスを使用できるようになりました。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-244">You can now consume this service by using WCF or Web service calls from client applications.</span></span> 

## <a name="security"></a><span data-ttu-id="2b3b6-245">Security</span><span class="sxs-lookup"><span data-stu-id="2b3b6-245">Security</span></span>
<span data-ttu-id="2b3b6-246">アダプターが、サービス内でホストされているときに、クライアント アプリケーションからの呼び出しはアダプター セキュリティ ブリッジを使用して、クライアントの資格情報をアダプターに渡す。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-246">When the adapter is hosted within a service, calls from client applications use the Adapter Security Bridge to pass client credentials to the adapter.</span></span>  

 <span data-ttu-id="2b3b6-247">WCF クライアントで認証を WCF サービスに送信すると、通常、サービスでは、認証が消費されます。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-247">When a WCF client sends authentication to a WCF service, normally the service consumes the authentication.</span></span> <span data-ttu-id="2b3b6-248">ただし、アダプターの場合は、基になる LOB システムで使用するための認証情報をキャプチャするにという考え方は。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-248">However, in the case of an adapter, the idea is to capture the authentication information for use with the underlying LOB system.</span></span> <span data-ttu-id="2b3b6-249">これは、エンドポイントの動作として表示されますが、アダプターのセキュリティ ブリッジを介して実装されます。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-249">This is implemented through the Adapter Security Bridge, which is surfaced as an endpoint behavior.</span></span> <span data-ttu-id="2b3b6-250">アダプターの開発者として何もないこの機能を活用するために実装する必要があります。ただし、アダプターを展開する場合は、どのクライアントによってサービスに資格情報が提供する検討する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-250">As an adapter developer, there is nothing that needs to be implemented to take advantage of this functionality; however, when deploying the adapter, you must consider how the client will be providing credentials to the service.</span></span>  

 <span data-ttu-id="2b3b6-251">メッセージ レベルのセキュリティを使用している場合、アダプターのセキュリティのブリッジは任意のバインディングでクライアント アプリケーションによって送信される ClientCredentials を取得できます。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-251">If you are using message-level security, the Adapter Security Bridge can retrieve the ClientCredentials sent by the client application on any binding.</span></span> <span data-ttu-id="2b3b6-252">基本 HTTP バインディングを使用している場合、カスタム ヘッダーを使用してユーザー名とパスワード情報を渡す代わりに選択できます。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-252">If you are using basic HTTP binding, you can instead select to use a custom header to pass the user name and password information.</span></span> <span data-ttu-id="2b3b6-253">多くの Web サービス クライアント アプリケーションは、カスタム ヘッダーを使用して資格情報を渡す必要がありますが、資格情報を渡す WCF に用意された、ClientCredential クラスを使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-253">It is recommended to use the ClientCredential class provided by WCF to pass credentials, however many Web Service client applications will need to use a custom header to pass credentials.</span></span>  

 <span data-ttu-id="2b3b6-254">アダプターがクライアント アプリケーションが提供する ClientCredentials で資格情報を検索する場所、構成の例を次に示します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-254">The following is an example configuration where the adapter looks for credentials in the ClientCredentials that the client application provides.</span></span> <span data-ttu-id="2b3b6-255">見つからない場合、アダプターは、指定された HTTP 要求ヘッダーで検索します。</span><span class="sxs-lookup"><span data-stu-id="2b3b6-255">If none is found, the adapter then looks in the HTTP request headers that are specified.</span></span>  

```  
<endpointBehaviors>  
   <behavior name="customEndpointBehavior">  
      <endpointBehavior usernameHttpHeader="UNHdr" passwordHttpHeader="PWHdr"  
         adapterSecurityBridgeType="Auto" />  
    </behavior>  
</endpointBehaviors>  
```      

## <a name="see-also"></a><span data-ttu-id="2b3b6-256">参照</span><span class="sxs-lookup"><span data-stu-id="2b3b6-256">See Also</span></span>  
 [<span data-ttu-id="2b3b6-257">開発アクティビティ</span><span class="sxs-lookup"><span data-stu-id="2b3b6-257">Development Activities</span></span>](../../esb-toolkit/development-activities.md)