---
title: "BizTalk Server を使用して SQL から FOR XML 句で SELECT ステートメントを使用してポーリング メッセージを受信 |Microsoft ドキュメント"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 65c629c1-9ef7-4aa1-8ec1-f94a3cb41cb0
caps.latest.revision: "13"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 77ac34fb06497f72b778592b3ce4c927b0ca3a07
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/20/2017
---
# <a name="receive-polling-messages-using-select-statements-with-for-xml-clause-from-sql-using-biztalk-server"></a><span data-ttu-id="a714d-102">BizTalk Server を使用して SQL から FOR XML 句で SELECT ステートメントを使用してポーリング メッセージを受信します。</span><span class="sxs-lookup"><span data-stu-id="a714d-102">Receive polling messages using SELECT statements with FOR XML Clause from SQL using BizTalk Server</span></span>
<span data-ttu-id="a714d-103">構成することができます、 [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] SELECT ステートメントまたは FOR XML 句を含むストアド プロシージャを使用して SQL Server のテーブルまたはビューのデータの定期的な変更メッセージを受信します。</span><span class="sxs-lookup"><span data-stu-id="a714d-103">You can configure the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] to receive periodic data-change messages for SQL Server tables or views by using SELECT statements or stored procedures that include a FOR XML clause.</span></span> <span data-ttu-id="a714d-104">これらのステートメントは、データベースをポーリングするアダプターを実行するポーリング ステートメントとして指定できます。</span><span class="sxs-lookup"><span data-stu-id="a714d-104">You can specify these statements as polling statement that the adapter executes to poll the database.</span></span> <span data-ttu-id="a714d-105">ポーリング ステートメントには、SELECT ステートメントまたは結果セットを返すストアド プロシージャを使用できます。</span><span class="sxs-lookup"><span data-stu-id="a714d-105">The polling statement can be a SELECT statement or a stored procedure that returns a result set.</span></span>  
  
 <span data-ttu-id="a714d-106">アダプターがポーリングをサポートする方法の詳細については、次を参照してください。[ポーリングのサポート](https://msdn.microsoft.com/library/dd788416.aspx)です。</span><span class="sxs-lookup"><span data-stu-id="a714d-106">For more information on how the adapter supports polling, see [Support for Polling](https://msdn.microsoft.com/library/dd788416.aspx).</span></span> <span data-ttu-id="a714d-107">ポーリング操作用の SOAP メッセージの構造については、次を参照してください。[ポーリングと TypedPolling 操作のメッセージ スキーマを](../../adapters-and-accelerators/adapter-sql/message-schemas-for-the-polling-and-typedpolling-operations.md)です。</span><span class="sxs-lookup"><span data-stu-id="a714d-107">For information about the structure of the SOAP message for polling operations, see [Message Schemas for the Polling and TypedPolling Operations](../../adapters-and-accelerators/adapter-sql/message-schemas-for-the-polling-and-typedpolling-operations.md).</span></span> <span data-ttu-id="a714d-108">SQL [FOR XML 句](https://docs.microsoft.com/sql/relational-databases/xml/for-xml-sql-server)詳細を示します。</span><span class="sxs-lookup"><span data-stu-id="a714d-108">The SQL [FOR XML clause](https://docs.microsoft.com/sql/relational-databases/xml/for-xml-sql-server) provides more details.</span></span>
  
> [!NOTE]
>  <span data-ttu-id="a714d-109">このトピックを使用する方法を示します、 **XmlPolling**ポーリング メッセージを受信する操作を受信します。</span><span class="sxs-lookup"><span data-stu-id="a714d-109">This topic demonstrates how to use the **XmlPolling** inbound operation to receive polling messages.</span></span> <span data-ttu-id="a714d-110">**XmlPolling** SELECT ステートメントまたは FOR XML 句を含むストアド プロシージャを使用して SQL Server データベースをポーリングする操作を使用します。</span><span class="sxs-lookup"><span data-stu-id="a714d-110">The **XmlPolling** operation is used to poll a SQL Server database using SELECT statements or stored procedures that include a FOR XML clause.</span></span> <span data-ttu-id="a714d-111">メッセージを**XmlPolling**操作には、SQL Server Management Studio で、SELECT ステートメントまたはストアド プロシージャを実行することで受信した xml メッセージが含まれています。</span><span class="sxs-lookup"><span data-stu-id="a714d-111">The message for the **XmlPolling** operation includes the xml message received by executing the SELECT statement or the stored procedure in SQL Server Management Studio.</span></span>  
>   
>  <span data-ttu-id="a714d-112">また、各種のポーリング メッセージを受信するのにアダプターを使用することができます。</span><span class="sxs-lookup"><span data-stu-id="a714d-112">You can also use the adapter to receive different types of polling messages.</span></span>  
>   
>  -   <span data-ttu-id="a714d-113">ポーリングの弱い型指定メッセージを取得する場合は、ポーリング操作を使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a714d-113">If you want to get a weakly-typed polling message, you must use the Polling Operation.</span></span> <span data-ttu-id="a714d-114">詳細については、次を参照してください。[ポーリング受信ベースのデータ変更のメッセージを使用して BizTalk Server で、SQL Server から](../../adapters-and-accelerators/adapter-sql/receive-polling-based-data-changed-messages-from-sql-server-using-biztalk.md)です。</span><span class="sxs-lookup"><span data-stu-id="a714d-114">For more information, see [Receive Polling-based Data-changed Messages from SQL Server by Using BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-polling-based-data-changed-messages-from-sql-server-using-biztalk.md).</span></span>  
> -   <span data-ttu-id="a714d-115">使用する必要がありますを厳密に型指定されたポーリング メッセージを取得する場合、 **TypedPolling**操作します。</span><span class="sxs-lookup"><span data-stu-id="a714d-115">If you want to get strongly-typed polling message, you must use the **TypedPolling** operation.</span></span> <span data-ttu-id="a714d-116">使用することも必要があります、 **TypedPolling**工程に 1 つの BizTalk アプリケーションで複数の操作をポーリングします。</span><span class="sxs-lookup"><span data-stu-id="a714d-116">You must also use the **TypedPolling** operation to have multiple polling operations in a single BizTalk application.</span></span> <span data-ttu-id="a714d-117">実行する方法の詳細について**TypedPolling**操作を参照してください[BizTalk Server を使用して SQL Server からデータ変更のポーリングに基づいたメッセージを受信厳密に型指定された](../../adapters-and-accelerators/adapter-sql/receive-strongly-typed-polling-based-data-changed-messages-from-sql-in-biztalk.md)です。</span><span class="sxs-lookup"><span data-stu-id="a714d-117">For instructions on how to perform **TypedPolling** operation, see [Receive Strongly-typed Polling-based Data-changed Messages from SQL Server using BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-strongly-typed-polling-based-data-changed-messages-from-sql-in-biztalk.md).</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="a714d-118">かどうかは 1 つの BizTalk アプリケーションに複数のポーリング操作を必要がありますを指定する、 **InboundID**接続一意にする URI の一部として接続プロパティです。</span><span class="sxs-lookup"><span data-stu-id="a714d-118">If you want to have more than one polling operation in a single BizTalk application, you must specify an **InboundID** connection property as part of the connection URI to make it unique.</span></span> <span data-ttu-id="a714d-119">一意の接続 URI の場合を複数作成できます、同じデータベースまたはデータベースでも同じテーブルをポーリングするポートを受信します。</span><span class="sxs-lookup"><span data-stu-id="a714d-119">With a unique connection URI, you can create multiple receive ports that poll the same database, or even the same table in a database.</span></span> <span data-ttu-id="a714d-120">詳細については、次を参照してください。[受信ポーリング メッセージ間で複数の受信ポートから BizTalk Server を使用して SQL](../../adapters-and-accelerators/adapter-sql/receive-polling-messages-across-multiple-receive-ports-from-sql-using-biztalk.md)です。</span><span class="sxs-lookup"><span data-stu-id="a714d-120">For more information, see [Receive Polling Messages Across Multiple Receive Ports from SQL using BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-polling-messages-across-multiple-receive-ports-from-sql-using-biztalk.md).</span></span>  
  
## <a name="how-this-topic-demonstrates-polling"></a><span data-ttu-id="a714d-121">このトピックの内容がポーリングを示しています</span><span class="sxs-lookup"><span data-stu-id="a714d-121">How This Topic Demonstrates Polling</span></span>  
 <span data-ttu-id="a714d-122">このトピックの内容を示すために方法、[!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)]サポート データを受信するメッセージの変更、FOR XML 句を使用して、SELECT ステートメントを使用して SQL Server データベースをポーリングするおです。</span><span class="sxs-lookup"><span data-stu-id="a714d-122">In this topic, to demonstrate how the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] supports receiving data change messages, we use a SELECT statement with the FOR XML clause to poll the SQL Server database.</span></span> <span data-ttu-id="a714d-123">SQL Server Management Studio で、このようなステートメントを呼び出す場合、出力は、xml メッセージの形式です。</span><span class="sxs-lookup"><span data-stu-id="a714d-123">When you invoke such a statement in SQL Server Management Studio, the output is in the form of an xml message.</span></span> <span data-ttu-id="a714d-124">このようなステートメントを使用して、SQL Server データベースをポーリングする、するには、xml の応答メッセージのスキーマが必要です。</span><span class="sxs-lookup"><span data-stu-id="a714d-124">To use such statements to poll a SQL Server database, you must have the schema of the response xml message.</span></span> <span data-ttu-id="a714d-125">[!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] FOR XML 句を伴う SELECT ステートメントを実行した後、ポーリング メッセージを受信するには、このスキーマが必要です。</span><span class="sxs-lookup"><span data-stu-id="a714d-125">The [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] requires this schema to receive a polling message after executing a SELECT statement with the FOR XML clause.</span></span> <span data-ttu-id="a714d-126">そのため、SQL Server データベースをポーリングする FOR XML 句で SELECT ステートメントを使用するに次の一連のタスクを実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a714d-126">So, to use a SELECT statement with FOR XML clause to poll the SQL Server database, you must perform the following set of tasks.</span></span>  
  
1.  <span data-ttu-id="a714d-127">FOR XML 句を伴う SELECT ステートメントの XML 応答メッセージのスキーマを生成します。</span><span class="sxs-lookup"><span data-stu-id="a714d-127">Generate the schema for the XML response message for the SELECT statement with FOR XML clause.</span></span>  
  
2.  <span data-ttu-id="a714d-128">BizTalk プロジェクトを作成し、生成されたスキーマをプロジェクトに追加します。</span><span class="sxs-lookup"><span data-stu-id="a714d-128">Create a BizTalk project and add the generated schema to the project.</span></span>  
  
3.  <span data-ttu-id="a714d-129">SQL Server データベースから XML 応答メッセージを受信するための BizTalk プロジェクトでメッセージを作成します。</span><span class="sxs-lookup"><span data-stu-id="a714d-129">Create a message in the BizTalk project for receiving XML response messages from the SQL Server database.</span></span>  
  
4.  <span data-ttu-id="a714d-130">SQL Server データベースからメッセージを受信して、フォルダーに保存するオーケストレーションを作成します。</span><span class="sxs-lookup"><span data-stu-id="a714d-130">Create an orchestration to receive messages from the SQL Server database and to save them to a folder.</span></span>  
  
5.  <span data-ttu-id="a714d-131">構築し、BizTalk プロジェクトを展開します。</span><span class="sxs-lookup"><span data-stu-id="a714d-131">Build and deploy the BizTalk project.</span></span>  
  
6.  <span data-ttu-id="a714d-132">BizTalk アプリケーションを作成する物理送信ポートと受信ポートを構成します。</span><span class="sxs-lookup"><span data-stu-id="a714d-132">Configure the BizTalk application by creating physical send and receive ports.</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="a714d-133">受信ポーリングのシナリオは、一方向の WCF カスタム常に構成する必要があります。 または WCF SQL 受信ポート。</span><span class="sxs-lookup"><span data-stu-id="a714d-133">For inbound polling scenarios you must always configure a one-way WCF-Custom or WCF-SQL receive port.</span></span> <span data-ttu-id="a714d-134">双方向の WCF カスタムまたは WCF SQL 受信ポートの受信操作はサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="a714d-134">Two-way WCF-Custom or WCF-SQL receive ports are not supported for inbound operations.</span></span>  
  
7.  <span data-ttu-id="a714d-135">BizTalk アプリケーションを起動します。</span><span class="sxs-lookup"><span data-stu-id="a714d-135">Start the BizTalk application.</span></span>  
  
##  <span data-ttu-id="a714d-136"><a name="BKMK_RespSchema"></a>SELECT ステートメントの応答メッセージのスキーマを生成します。</span><span class="sxs-lookup"><span data-stu-id="a714d-136"><a name="BKMK_RespSchema"></a> Generating Schema for the Response Message for SELECT Statement</span></span>  
 <span data-ttu-id="a714d-137">含めることによって、SELECT ステートメントの応答メッセージのスキーマを生成することができます、`xmlschema`句、`for xml`句。</span><span class="sxs-lookup"><span data-stu-id="a714d-137">You can generate the schema for the response message for the SELECT statement by including the `xmlschema` clause with the `for xml` clause.</span></span> <span data-ttu-id="a714d-138">このトピックで指定された従業員 ID の従業員の個人情報を取得するのに SELECT ステートメントを使用しました</span><span class="sxs-lookup"><span data-stu-id="a714d-138">In this topic, we use a SELECT statement to retrieve employee details for a given employee ID.</span></span> <span data-ttu-id="a714d-139">、SELECT ステートメントを実行することによって、スキーマを取得するには、次のように、SELECT ステートメントを記述する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a714d-139">To retrieve the schema by executing a SELECT statement, the SELECT statement must be written in the following manner:</span></span>  
  
```  
SELECT Employee_ID ,Name ,Designation FROM Employee for xml auto, xmlschema  
```  
  
 <span data-ttu-id="a714d-140">応答メッセージのスキーマを取得する次の SELECT ステートメントを実行します。</span><span class="sxs-lookup"><span data-stu-id="a714d-140">Execute this SELECT statement to get the schema for the response message.</span></span> <span data-ttu-id="a714d-141">スキーマを保存します。</span><span class="sxs-lookup"><span data-stu-id="a714d-141">Save the schema.</span></span> <span data-ttu-id="a714d-142">BizTalk プロジェクトを作成する必要が今すぐ[!INCLUDE[btsVStudioNoVersion](../../includes/btsvstudionoversion-md.md)]し、このスキーマをプロジェクトに追加します。</span><span class="sxs-lookup"><span data-stu-id="a714d-142">You must now create a BizTalk project in [!INCLUDE[btsVStudioNoVersion](../../includes/btsvstudionoversion-md.md)] and add this schema to the project.</span></span> <span data-ttu-id="a714d-143">この例では、名前を指定できますと、このスキーマ**PollingResponse.xsd**です。</span><span class="sxs-lookup"><span data-stu-id="a714d-143">For this example, you can name this schema as **PollingResponse.xsd**.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="a714d-144">削除するかどうかを確認、`xmlschema`句のスキーマを生成する SELECT ステートメントを実行した後です。</span><span class="sxs-lookup"><span data-stu-id="a714d-144">Make sure you remove the `xmlschema` clause after you have executed the SELECT statement to generate the schema.</span></span> <span data-ttu-id="a714d-145">失敗した場合に、最後に XmlPolling 操作の一環として BizTalk を通じて、SELECT ステートメントを実行するときに、応答メッセージのスキーマを再生成されます。</span><span class="sxs-lookup"><span data-stu-id="a714d-145">If you fail to do this, when you finally execute the SELECT statement through BizTalk as part of the XmlPolling operation, you will again generate the schema in the response message.</span></span> <span data-ttu-id="a714d-146">削除する必要があります xml として応答メッセージを取得する、`xmlschema`句。</span><span class="sxs-lookup"><span data-stu-id="a714d-146">So, to get the response message as xml you must remove the `xmlschema` clause.</span></span>  
  
#### <a name="to-add-the-schema-to-a-biztalk-project"></a><span data-ttu-id="a714d-147">BizTalk プロジェクトにスキーマを追加するには</span><span class="sxs-lookup"><span data-stu-id="a714d-147">To add the schema to a BizTalk project</span></span>  
  
1.  <span data-ttu-id="a714d-148">BizTalk プロジェクトを作成[!INCLUDE[btsVStudioNoVersion](../../includes/btsvstudionoversion-md.md)]です。</span><span class="sxs-lookup"><span data-stu-id="a714d-148">Create a BizTalk project in [!INCLUDE[btsVStudioNoVersion](../../includes/btsvstudionoversion-md.md)].</span></span>  
  
2.  <span data-ttu-id="a714d-149">BizTalk プロジェクトにストアド プロシージャの生成、応答スキーマを追加します。</span><span class="sxs-lookup"><span data-stu-id="a714d-149">Add the response schema you generated for the stored procedure to the BizTalk project.</span></span> <span data-ttu-id="a714d-150">ソリューション エクスプ ローラーで BizTalk プロジェクトを右クリックし、**追加**、クリックして**既存項目の**します。</span><span class="sxs-lookup"><span data-stu-id="a714d-150">Right-click the BizTalk project in the Solution Explorer, point to **Add**, and then click **Existing Item**.</span></span> <span data-ttu-id="a714d-151">[既存項目の追加] ダイアログ ボックスをクリックして、スキーマを保存した場所に移動**追加**です。</span><span class="sxs-lookup"><span data-stu-id="a714d-151">In the Add Existing Item dialog box, navigate to the location where you saved the schema and click **Add**.</span></span>  
  
3.  <span data-ttu-id="a714d-152">内のスキーマを開く[!INCLUDE[btsVStudioNoVersion](../../includes/btsvstudionoversion-md.md)]次の変更を加えます。</span><span class="sxs-lookup"><span data-stu-id="a714d-152">Open the schema in [!INCLUDE[btsVStudioNoVersion](../../includes/btsvstudionoversion-md.md)] and make the following changes.</span></span>  
  
    1.  <span data-ttu-id="a714d-153">スキーマにノードを追加し、新しく追加されたこのノードの下の既存のルート ノードを移動します。</span><span class="sxs-lookup"><span data-stu-id="a714d-153">Add a node to the schema and move the existing root node under this newly added node.</span></span> <span data-ttu-id="a714d-154">ルート ノードに名前を指定します。</span><span class="sxs-lookup"><span data-stu-id="a714d-154">Give a name to the root node.</span></span> <span data-ttu-id="a714d-155">このトピックの名前を変更するルート ノード**ルート**です。</span><span class="sxs-lookup"><span data-stu-id="a714d-155">For this topic, rename the root node to **Root**.</span></span>  
  
    2.  <span data-ttu-id="a714d-156">SELECT ステートメントの生成、応答スキーマは、sqltypes.xsd を参照します。</span><span class="sxs-lookup"><span data-stu-id="a714d-156">The response schema generated for the SELECT statement references a sqltypes.xsd.</span></span> <span data-ttu-id="a714d-157">Sqltypes.xsd スキーマから取得できます[http://go.microsoft.com/fwlink/p/?LinkId=131087](http://go.microsoft.com/fwlink/p/?LinkId=131087)です。</span><span class="sxs-lookup"><span data-stu-id="a714d-157">You can get the sqltypes.xsd schema from [http://go.microsoft.com/fwlink/p/?LinkId=131087](http://go.microsoft.com/fwlink/p/?LinkId=131087).</span></span> <span data-ttu-id="a714d-158">Sqltypes.xsd スキーマを BizTalk プロジェクトに追加します。</span><span class="sxs-lookup"><span data-stu-id="a714d-158">Add the sqltypes.xsd schema to the BizTalk project.</span></span>  
  
    3.  <span data-ttu-id="a714d-159">SELECT ステートメントの生成、スキーマ内の値を変更`import schemaLocation`以下にします。</span><span class="sxs-lookup"><span data-stu-id="a714d-159">In the schema generated for the SELECT statement, change the value of `import schemaLocation` to the following.</span></span>  
  
        ```  
        import schemaLocation=”sqltypes.xsd”  
        ```  
  
         <span data-ttu-id="a714d-160">これを行う sqltypes.xsd スキーマは、BizTalk プロジェクトに既に追加されたためです。</span><span class="sxs-lookup"><span data-stu-id="a714d-160">You do this because you have already added the sqltypes.xsd schema to your BizTalk project.</span></span>  
  
    4.  <span data-ttu-id="a714d-161">スキーマのターゲット名前空間を指定します。</span><span class="sxs-lookup"><span data-stu-id="a714d-161">Provide a target namespace for the schema.</span></span> <span data-ttu-id="a714d-162">クリックして、 **\<スキーマ >**ノード、プロパティ ウィンドウで、名前空間を指定し、 **Target Namespace**プロパティ。</span><span class="sxs-lookup"><span data-stu-id="a714d-162">Click the **\<Schema>** node, and in the properties pane, specify a namespace in the **Target Namespace** property.</span></span> <span data-ttu-id="a714d-163">このトピックの付与と名前空間`http://ForXmlPolling/namespace`です。</span><span class="sxs-lookup"><span data-stu-id="a714d-163">For this topic, give the namespace as `http://ForXmlPolling/namespace`.</span></span>  
  
## <a name="defining-messages-and-message-types"></a><span data-ttu-id="a714d-164">メッセージとメッセージの種類を定義します。</span><span class="sxs-lookup"><span data-stu-id="a714d-164">Defining Messages and Message Types</span></span>  
 <span data-ttu-id="a714d-165">以前に生成したスキーマには、オーケストレーション内のメッセージに対して必要な「種類」がについて説明します。</span><span class="sxs-lookup"><span data-stu-id="a714d-165">The schema that you generated earlier describes the "types" required for the messages in the orchestration.</span></span> <span data-ttu-id="a714d-166">メッセージは、通常、対象の型が、対応するスキーマで定義されている、変数です。</span><span class="sxs-lookup"><span data-stu-id="a714d-166">A message is typically a variable, the type for which is defined by the corresponding schema.</span></span> <span data-ttu-id="a714d-167">スキーマが生成されるは、BizTalk プロジェクトのオーケストレーションの種類からのメッセージをリンクする必要があります。</span><span class="sxs-lookup"><span data-stu-id="a714d-167">Once the schema is generated, you must link it to the messages from the Orchestration view of the BizTalk project.</span></span>  
  
 <span data-ttu-id="a714d-168">このトピックのメッセージを受信する SQL Server データベースから 1 つのメッセージを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a714d-168">For this topic, you must create one message to receive messages from the SQL Server database.</span></span>  
  
 <span data-ttu-id="a714d-169">メッセージを作成し、それらのスキーマにリンクするには、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="a714d-169">Perform the following steps to create messages and link them to schema.</span></span>  
  
#### <a name="to-create-messages-and-link-to-schema"></a><span data-ttu-id="a714d-170">メッセージを作成し、スキーマにリンクするには</span><span class="sxs-lookup"><span data-stu-id="a714d-170">To create messages and link to schema</span></span>  
  
1.  <span data-ttu-id="a714d-171">オーケストレーションを BizTalk プロジェクトに追加します。</span><span class="sxs-lookup"><span data-stu-id="a714d-171">Add an orchestration to the BizTalk project.</span></span> <span data-ttu-id="a714d-172">ソリューション エクスプ ローラーで、BizTalk プロジェクト名を右クリックし、**追加**、クリックして**新しい項目の**します。</span><span class="sxs-lookup"><span data-stu-id="a714d-172">From the Solution Explorer, right-click the BizTalk project name, point to **Add**, and then click **New Item**.</span></span> <span data-ttu-id="a714d-173">BizTalk オーケストレーションの名前を入力し、クリックして**追加**です。</span><span class="sxs-lookup"><span data-stu-id="a714d-173">Type a name for the BizTalk orchestration and then click **Add**.</span></span>  
  
2.  <span data-ttu-id="a714d-174">まだ開いていない場合は、BizTalk プロジェクトのオーケストレーション ビュー ウィンドウを開きます。</span><span class="sxs-lookup"><span data-stu-id="a714d-174">Open the orchestration view window of the BizTalk project, if it is not already open.</span></span> <span data-ttu-id="a714d-175">をクリックして**ビュー**、 をポイント**その他のウィンドウ**、順にクリック**オーケストレーション ビュー**です。</span><span class="sxs-lookup"><span data-stu-id="a714d-175">Click **View**, point to **Other Windows**, and then click **Orchestration View**.</span></span>  
  
3.  <span data-ttu-id="a714d-176">**オーケストレーション ビュー**を右クリックして**メッセージ**、クリックして**新しいメッセージ**です。</span><span class="sxs-lookup"><span data-stu-id="a714d-176">In the **Orchestration View**, right-click **Messages**, and then click **New Message**.</span></span>  
  
4.  <span data-ttu-id="a714d-177">新しく作成されたメッセージを右クリックし [**プロパティ] ウィンドウ**します。</span><span class="sxs-lookup"><span data-stu-id="a714d-177">Right-click the newly created message, and then select **Properties Window**.</span></span>  
  
5.  <span data-ttu-id="a714d-178">**プロパティ**ウィンドウ**Message_1**を次の操作します。</span><span class="sxs-lookup"><span data-stu-id="a714d-178">In the **Properties** pane for **Message_1**, do the following:</span></span>  
  
    |<span data-ttu-id="a714d-179">プロパティ</span><span class="sxs-lookup"><span data-stu-id="a714d-179">Use this</span></span>|<span data-ttu-id="a714d-180">目的</span><span class="sxs-lookup"><span data-stu-id="a714d-180">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="a714d-181">[Identifier]</span><span class="sxs-lookup"><span data-stu-id="a714d-181">Identifier</span></span>|<span data-ttu-id="a714d-182">型**PollingMessage**です。</span><span class="sxs-lookup"><span data-stu-id="a714d-182">Type **PollingMessage**.</span></span>|  
    |<span data-ttu-id="a714d-183">メッセージの種類</span><span class="sxs-lookup"><span data-stu-id="a714d-183">Message Type</span></span>|<span data-ttu-id="a714d-184">ドロップダウン リストから、展開**スキーマ**を選択して*ForXMLPolling.PollingResponse*ここで、 *ForXMLPolling* BizTalk プロジェクトの名前を指定します。</span><span class="sxs-lookup"><span data-stu-id="a714d-184">From the drop-down list, expand **Schemas**, and select *ForXMLPolling.PollingResponse*, where *ForXMLPolling* is the name of your BizTalk project.</span></span> <span data-ttu-id="a714d-185">*PollingResponse*下にある説明に従って、SELECT ステートメントを実行することによって生成される応答スキーマの名前を指定[BizTalk Server を使用して SQL から FOR XML 句で SELECT ステートメントを使用してポーリング メッセージを受信](../../adapters-and-accelerators/adapter-sql/receive-polling-messages-using-select-with-for-xml-clause-with-the-sql-adapter.md)です。</span><span class="sxs-lookup"><span data-stu-id="a714d-185">*PollingResponse* is the name of the response schema generated by executing the SELECT statement as described under [Receive polling messages using SELECT statements with FOR XML Clause from SQL using BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-polling-messages-using-select-with-for-xml-clause-with-the-sql-adapter.md).</span></span>|  
  
## <a name="setting-up-the-orchestration"></a><span data-ttu-id="a714d-186">オーケストレーションを設定します。</span><span class="sxs-lookup"><span data-stu-id="a714d-186">Setting up the Orchestration</span></span>  
 <span data-ttu-id="a714d-187">使用する BizTalk オーケストレーションを作成する必要があります[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]SQL Server データベースからデータの変更のポーリングに基づいたメッセージを受信します。</span><span class="sxs-lookup"><span data-stu-id="a714d-187">You must create a BizTalk orchestration to use [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] for receiving polling-based data-change messages from the SQL Server database.</span></span> <span data-ttu-id="a714d-188">このオーケストレーションでアダプターが指定された select ステートメントの応答を受信、 **PollingStatement**プロパティをバインドします。</span><span class="sxs-lookup"><span data-stu-id="a714d-188">In this orchestration, the adapter receives the response of the select statement specified for the **PollingStatement** binding property.</span></span> <span data-ttu-id="a714d-189">SELECT ステートメントの応答には、ファイルの場所に保存されます。</span><span class="sxs-lookup"><span data-stu-id="a714d-189">The response for the SELECT statement is saved to a FILE location.</span></span> <span data-ttu-id="a714d-190">SQL Server データベースをポーリングするための一般的なオーケストレーションにが含まれます。</span><span class="sxs-lookup"><span data-stu-id="a714d-190">A typical orchestration for polling a SQL Server database would contain:</span></span>  
  
-   <span data-ttu-id="a714d-191">受信図形と送信図形を SQL Server からメッセージを受信し、それぞれ、FILE ポートに送信します。</span><span class="sxs-lookup"><span data-stu-id="a714d-191">Receive and Send shapes to receive messages from SQL Server and send to a FILE port, respectively.</span></span>  
  
-   <span data-ttu-id="a714d-192">一方向の受信ポートを SQL Server からメッセージを受信します。</span><span class="sxs-lookup"><span data-stu-id="a714d-192">A one-way receive port to receive messages from SQL Server.</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="a714d-193">受信のポーリングのシナリオが常に設定する必要がありますの一方向の受信ポート。</span><span class="sxs-lookup"><span data-stu-id="a714d-193">For inbound polling scenarios you must always configure a one-way receive port.</span></span> <span data-ttu-id="a714d-194">双方向受信ポートが受信操作のサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="a714d-194">Two-way receive ports are not supported for inbound operations.</span></span>  
  
-   <span data-ttu-id="a714d-195">SQL Server データベースからフォルダーにポーリング応答を送信する一方向の送信ポートです。</span><span class="sxs-lookup"><span data-stu-id="a714d-195">A one-way send port to send polling responses from a SQL Server database to a folder.</span></span>  
  
 <span data-ttu-id="a714d-196">サンプル オーケストレーションには、次のようになります。</span><span class="sxs-lookup"><span data-stu-id="a714d-196">A sample orchestration resembles the following.</span></span>  
  
 <span data-ttu-id="a714d-197">![SQL Server データベースをポーリングするためのオーケストレーション](../../adapters-and-accelerators/adapter-sql/media/5cf65d53-d70d-444d-82f7-2561efcd9ee4.gif "5cf65d53-d70d-444d-82f7-2561efcd9ee4")</span><span class="sxs-lookup"><span data-stu-id="a714d-197">![Orchestration for polling a SQL Server database](../../adapters-and-accelerators/adapter-sql/media/5cf65d53-d70d-444d-82f7-2561efcd9ee4.gif "5cf65d53-d70d-444d-82f7-2561efcd9ee4")</span></span>  
  
### <a name="adding-message-shapes"></a><span data-ttu-id="a714d-198">メッセージの構築図形を追加します。</span><span class="sxs-lookup"><span data-stu-id="a714d-198">Adding Message Shapes</span></span>  
 <span data-ttu-id="a714d-199">メッセージの構築図形のごとに、次のプロパティを指定することを確認してください。</span><span class="sxs-lookup"><span data-stu-id="a714d-199">Make sure you specify the following properties for each of the message shapes.</span></span> <span data-ttu-id="a714d-200">図形 列に表示名は、単に記載されているオーケストレーションに表示されるメッセージの構築図形の名前です。</span><span class="sxs-lookup"><span data-stu-id="a714d-200">The names listed in the Shape column are the names of the message shapes as displayed in the just-mentioned orchestration.</span></span>  
  
|<span data-ttu-id="a714d-201">図形</span><span class="sxs-lookup"><span data-stu-id="a714d-201">Shape</span></span>|<span data-ttu-id="a714d-202">図形の種類</span><span class="sxs-lookup"><span data-stu-id="a714d-202">Shape Type</span></span>|<span data-ttu-id="a714d-203">[プロパティ]</span><span class="sxs-lookup"><span data-stu-id="a714d-203">Properties</span></span>|  
|-----------|----------------|----------------|  
|<span data-ttu-id="a714d-204">ReceiveMessage</span><span class="sxs-lookup"><span data-stu-id="a714d-204">ReceiveMessage</span></span>|<span data-ttu-id="a714d-205">Receive</span><span class="sxs-lookup"><span data-stu-id="a714d-205">Receive</span></span>|<span data-ttu-id="a714d-206">-設定**名前**に*ReceiveMessage*</span><span class="sxs-lookup"><span data-stu-id="a714d-206">- Set **Name** to *ReceiveMessage*</span></span><br /><br /> <span data-ttu-id="a714d-207">-設定**アクティブ**に*は True。*</span><span class="sxs-lookup"><span data-stu-id="a714d-207">- Set **Activate** to *True*</span></span>|  
|<span data-ttu-id="a714d-208">SaveMessage</span><span class="sxs-lookup"><span data-stu-id="a714d-208">SaveMessage</span></span>|<span data-ttu-id="a714d-209">Send</span><span class="sxs-lookup"><span data-stu-id="a714d-209">Send</span></span>|<span data-ttu-id="a714d-210">-設定**名前**に*SaveMessage*</span><span class="sxs-lookup"><span data-stu-id="a714d-210">- Set **Name** to *SaveMessage*</span></span>|  
  
### <a name="adding-ports"></a><span data-ttu-id="a714d-211">ポートの追加</span><span class="sxs-lookup"><span data-stu-id="a714d-211">Adding Ports</span></span>  
 <span data-ttu-id="a714d-212">論理ポートごとに、次のプロパティを指定することを確認してください。</span><span class="sxs-lookup"><span data-stu-id="a714d-212">Make sure you specify the following properties for each of the logical ports.</span></span> <span data-ttu-id="a714d-213">ポート列に表示される名前は、オーケストレーションで表示されているポートの名前です。</span><span class="sxs-lookup"><span data-stu-id="a714d-213">The names listed in the Port column are the names of the ports as displayed in the orchestration.</span></span>  
  
|<span data-ttu-id="a714d-214">ポート</span><span class="sxs-lookup"><span data-stu-id="a714d-214">Port</span></span>|<span data-ttu-id="a714d-215">[プロパティ]</span><span class="sxs-lookup"><span data-stu-id="a714d-215">Properties</span></span>|  
|----------|----------------|  
|<span data-ttu-id="a714d-216">SQLReceivePort</span><span class="sxs-lookup"><span data-stu-id="a714d-216">SQLReceivePort</span></span>|<span data-ttu-id="a714d-217">-設定**識別子**に*SQLReceivePort*</span><span class="sxs-lookup"><span data-stu-id="a714d-217">- Set **Identifier** to *SQLReceivePort*</span></span><br /><br /> <span data-ttu-id="a714d-218">-設定**型**に*SQLReceivePortType*</span><span class="sxs-lookup"><span data-stu-id="a714d-218">- Set **Type** to *SQLReceivePortType*</span></span><br /><br /> <span data-ttu-id="a714d-219">-設定**通信パターン**に*一方向*</span><span class="sxs-lookup"><span data-stu-id="a714d-219">- Set **Communication Pattern** to *One-Way*</span></span><br /><br /> <span data-ttu-id="a714d-220">-設定**通信方向**に*受信*</span><span class="sxs-lookup"><span data-stu-id="a714d-220">- Set **Communication Direction** to *Receive*</span></span>|  
|<span data-ttu-id="a714d-221">SaveMessagePort</span><span class="sxs-lookup"><span data-stu-id="a714d-221">SaveMessagePort</span></span>|<span data-ttu-id="a714d-222">-設定**識別子**に*SaveMessagePort*</span><span class="sxs-lookup"><span data-stu-id="a714d-222">- Set **Identifier** to *SaveMessagePort*</span></span><br /><br /> <span data-ttu-id="a714d-223">-設定**型**に*SaveMessagePortType*</span><span class="sxs-lookup"><span data-stu-id="a714d-223">- Set **Type** to *SaveMessagePortType*</span></span><br /><br /> <span data-ttu-id="a714d-224">-設定**通信パターン**に*一方向*</span><span class="sxs-lookup"><span data-stu-id="a714d-224">- Set **Communication Pattern** to *One-Way*</span></span><br /><br /> <span data-ttu-id="a714d-225">-設定**通信方向**に*送信*</span><span class="sxs-lookup"><span data-stu-id="a714d-225">- Set **Communication Direction** to *Send*</span></span>|  
  
### <a name="specify-messages-for-action-shapes-and-connect-to-ports"></a><span data-ttu-id="a714d-226">アクション図形のメッセージを指定し、ポートに接続</span><span class="sxs-lookup"><span data-stu-id="a714d-226">Specify Messages for Action Shapes and Connect to Ports</span></span>  
 <span data-ttu-id="a714d-227">次の表は、プロパティとアクション図形のメッセージを指定して、メッセージ、ポートにリンクを設定する必要があります、値を指定します。</span><span class="sxs-lookup"><span data-stu-id="a714d-227">The following table specifies the properties and their values that you should set to specify messages for action shapes and to link the messages to the ports.</span></span> <span data-ttu-id="a714d-228">図形 列に表示名は、既に説明したオーケストレーションに表示されるメッセージの構築図形の名前です。</span><span class="sxs-lookup"><span data-stu-id="a714d-228">The names listed in the Shape column are the names of the message shapes as displayed in the orchestration mentioned earlier.</span></span>  
  
|<span data-ttu-id="a714d-229">図形</span><span class="sxs-lookup"><span data-stu-id="a714d-229">Shape</span></span>|<span data-ttu-id="a714d-230">[プロパティ]</span><span class="sxs-lookup"><span data-stu-id="a714d-230">Properties</span></span>|  
|-----------|----------------|  
|<span data-ttu-id="a714d-231">ReceiveMessage</span><span class="sxs-lookup"><span data-stu-id="a714d-231">ReceiveMessage</span></span>|<span data-ttu-id="a714d-232">-設定**メッセージ**に*受信*</span><span class="sxs-lookup"><span data-stu-id="a714d-232">- Set **Message** to *Receive*</span></span><br /><br /> <span data-ttu-id="a714d-233">-設定**操作**に*SQLReceivePort.XmlPolling.Request*</span><span class="sxs-lookup"><span data-stu-id="a714d-233">- Set **Operation** to *SQLReceivePort.XmlPolling.Request*</span></span>|  
|<span data-ttu-id="a714d-234">SaveMessage</span><span class="sxs-lookup"><span data-stu-id="a714d-234">SaveMessage</span></span>|<span data-ttu-id="a714d-235">-設定**メッセージ**に*受信*</span><span class="sxs-lookup"><span data-stu-id="a714d-235">- Set **Message** to *Receive*</span></span><br /><br /> <span data-ttu-id="a714d-236">-設定**操作**に*SaveMessagePort.XmlPolling.Request*</span><span class="sxs-lookup"><span data-stu-id="a714d-236">- Set **Operation** to *SaveMessagePort.XmlPolling.Request*</span></span>|  
  
 <span data-ttu-id="a714d-237">これらのプロパティを指定した後、メッセージの構築図形とポートが接続されているし、オーケストレーションが完了します。</span><span class="sxs-lookup"><span data-stu-id="a714d-237">After you have specified these properties, the message shapes and ports are connected and your orchestration is complete.</span></span>  
  
 <span data-ttu-id="a714d-238">今すぐ BizTalk ソリューションをビルドしに配置する必要があります、[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]です。</span><span class="sxs-lookup"><span data-stu-id="a714d-238">You must now build the BizTalk solution and deploy it to a [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="a714d-239">詳細については、次を参照してください。[のビルドおよび実行されているオーケストレーション](../../core/building-and-running-orchestrations.md)です。</span><span class="sxs-lookup"><span data-stu-id="a714d-239">For more information, see [Building and Running Orchestrations](../../core/building-and-running-orchestrations.md).</span></span>
  
## <a name="configuring-the-biztalk-application"></a><span data-ttu-id="a714d-240">BizTalk アプリケーションを構成します。</span><span class="sxs-lookup"><span data-stu-id="a714d-240">Configuring the BizTalk Application</span></span>  
 <span data-ttu-id="a714d-241">以前に作成したオーケストレーションが下に表示、BizTalk プロジェクトを配置した後、**オーケストレーション**BizTalk Server 管理コンソール ウィンドウ。</span><span class="sxs-lookup"><span data-stu-id="a714d-241">After you have deployed the BizTalk project, the orchestration you created earlier is listed under the **Orchestrations** pane in the BizTalk Server Administration console.</span></span> <span data-ttu-id="a714d-242">使用する必要があります、[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]管理コンソール アプリケーションを構成します。</span><span class="sxs-lookup"><span data-stu-id="a714d-242">You must use the [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console to configure the application.</span></span> <span data-ttu-id="a714d-243">チュートリアルについては、次を参照してください。[チュートリアル: 基本的な BizTalk アプリケーションの展開](Walkthrough:%20Deploying%20a%20Basic%20BizTalk%20Application.md)です。</span><span class="sxs-lookup"><span data-stu-id="a714d-243">For a walkthrough, see [Walkthrough: Deploying a Basic BizTalk Application](Walkthrough:%20Deploying%20a%20Basic%20BizTalk%20Application.md).</span></span>
  
 <span data-ttu-id="a714d-244">アプリケーションの構成が含まれます。</span><span class="sxs-lookup"><span data-stu-id="a714d-244">Configuring an application involves:</span></span>  
  
-   <span data-ttu-id="a714d-245">アプリケーションのホストを選択します。</span><span class="sxs-lookup"><span data-stu-id="a714d-245">Selecting a host for the application.</span></span>  
  
-   <span data-ttu-id="a714d-246">BizTalk Server 管理コンソールで物理ポートにオーケストレーションで作成したポートをマッピングします。</span><span class="sxs-lookup"><span data-stu-id="a714d-246">Mapping the ports that you created in your orchestration to physical ports in the BizTalk Server Administration console.</span></span> <span data-ttu-id="a714d-247">このオーケストレーションの次の操作を行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="a714d-247">For this orchestration you must:</span></span>  
  
    -   <span data-ttu-id="a714d-248">ハード ディスクと、対応する file ポートを BizTalk オーケストレーションが、SQL Server データベースからメッセージをドロップ場所に場所を定義します。</span><span class="sxs-lookup"><span data-stu-id="a714d-248">Define a location on the hard disk and a corresponding file port where the BizTalk orchestration will drop the messages from the SQL Server database.</span></span> <span data-ttu-id="a714d-249">これらのメッセージは、受信ポートの指定したポーリング ステートメントへの応答になります。</span><span class="sxs-lookup"><span data-stu-id="a714d-249">These messages will be in response to the polling statement that you specify for the receive port.</span></span>  
  
    -   <span data-ttu-id="a714d-250">物理 Wcf-custom を定義するか、WCF SQL 一方向の受信ポートです。</span><span class="sxs-lookup"><span data-stu-id="a714d-250">Define a physical WCF-Custom or WCF-SQL one-way receive port.</span></span> <span data-ttu-id="a714d-251">このポートは、ポートを指定するポーリング ステートメントを使用して SQL Server データベースをポーリングします。</span><span class="sxs-lookup"><span data-stu-id="a714d-251">This port polls the SQL Server database with the polling statement you specify for the port.</span></span> <span data-ttu-id="a714d-252">ポートを作成する方法については、次を参照してください。 [SQL アダプターを物理ポートのバインドを手動で構成](../../adapters-and-accelerators/adapter-sql/manually-configure-a-physical-port-binding-to-the-sql-adapter.md)です。</span><span class="sxs-lookup"><span data-stu-id="a714d-252">For information about how to create ports, see [Manually configure a physical port binding to the SQL adapter](../../adapters-and-accelerators/adapter-sql/manually-configure-a-physical-port-binding-to-the-sql-adapter.md).</span></span> <span data-ttu-id="a714d-253">受信ポートのバインドのプロパティを指定することを確認してください。</span><span class="sxs-lookup"><span data-stu-id="a714d-253">Make sure you specify the following binding properties for the receive port.</span></span>  
  
        > [!IMPORTANT]
        >  <span data-ttu-id="a714d-254">デザイン時のバインドのプロパティを指定した場合、この手順を実行する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="a714d-254">You do not need to perform this step if you specified the binding properties at design-time.</span></span> <span data-ttu-id="a714d-255">このような場合は、WCF カスタムを作成または WCF SQL 受信ポート、必要なバインド プロパティを設定、によって作成されたバインド ファイルをインポートすることによって、[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]です。</span><span class="sxs-lookup"><span data-stu-id="a714d-255">In such a case, you can create a WCF-custom or WCF-SQL receive port, with the required binding properties set, by importing the binding file created by the [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span> <span data-ttu-id="a714d-256">詳細については、次を参照してください。 [SQL アダプターを使用するポートのバインド ファイルを使用する物理ポートのバインドを構成する](../../adapters-and-accelerators/adapter-sql/configure-a-physical-port-binding-using-a-port-binding-file-to-sql-adapter.md)です。</span><span class="sxs-lookup"><span data-stu-id="a714d-256">For more information see [Configure a physical port binding using a port binding file to use the SQL adapter](../../adapters-and-accelerators/adapter-sql/configure-a-physical-port-binding-using-a-port-binding-file-to-sql-adapter.md).</span></span>  
  
        |<span data-ttu-id="a714d-257">プロパティのバインド</span><span class="sxs-lookup"><span data-stu-id="a714d-257">Binding Property</span></span>|<span data-ttu-id="a714d-258">値</span><span class="sxs-lookup"><span data-stu-id="a714d-258">Value</span></span>|  
        |----------------------|-----------|  
        |<span data-ttu-id="a714d-259">**InboundOperationType**</span><span class="sxs-lookup"><span data-stu-id="a714d-259">**InboundOperationType**</span></span>|<span data-ttu-id="a714d-260">これを設定するかどうかを確認**XmlPolling**です。</span><span class="sxs-lookup"><span data-stu-id="a714d-260">Make sure you set this to **XmlPolling**.</span></span>|  
        |<span data-ttu-id="a714d-261">**PolledDataAvailableStatement**</span><span class="sxs-lookup"><span data-stu-id="a714d-261">**PolledDataAvailableStatement**</span></span>|<span data-ttu-id="a714d-262">SQL ステートメントを指定することを確認してください。</span><span class="sxs-lookup"><span data-stu-id="a714d-262">Make sure you specify a SQL statement.</span></span> <span data-ttu-id="a714d-263">このトピックの次のように指定します。</span><span class="sxs-lookup"><span data-stu-id="a714d-263">For this topic, specify:</span></span><br /><br /> `SELECT COUNT(*) FROM Employee`|  
        |<span data-ttu-id="a714d-264">**PollingStatement**</span><span class="sxs-lookup"><span data-stu-id="a714d-264">**PollingStatement**</span></span>|<span data-ttu-id="a714d-265">せず、同じステートメントを入力してください、 `xmlschema` 」の説明に従って、スキーマの生成中に指定した句[のBizTalkServerを使用してSQLからFORXML句でSELECTステートメントを使用してポーリングメッセージを受信](../../adapters-and-accelerators/adapter-sql/receive-polling-messages-using-select-with-for-xml-clause-with-the-sql-adapter.md).</span><span class="sxs-lookup"><span data-stu-id="a714d-265">Make sure you provide the same statement, without the `xmlschema` clause, that you specified while generating the schema as described in [Receive polling messages using SELECT statements with FOR XML Clause from SQL using BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-polling-messages-using-select-with-for-xml-clause-with-the-sql-adapter.md).</span></span><br /><br /> `SELECT Employee_ID ,Name ,Designation FROM Employee for xml auto`<br /><br /> <span data-ttu-id="a714d-266">**注:** 、SELECT ステートメントを含まないなお、`xmlschema`句。</span><span class="sxs-lookup"><span data-stu-id="a714d-266">**Note:** Note that the SELECT statement does not contain the `xmlschema` clause.</span></span>|  
        |<span data-ttu-id="a714d-267">**XmlStoredProcedureRootNodeName**</span><span class="sxs-lookup"><span data-stu-id="a714d-267">**XmlStoredProcedureRootNodeName**</span></span>|<span data-ttu-id="a714d-268">下の説明に従って、SELECT ステートメントの生成、応答スキーマに追加したルート ノードの名前を指定[SELECT ステートメントの応答メッセージのスキーマを生成する](#BKMK_RespSchema)です。</span><span class="sxs-lookup"><span data-stu-id="a714d-268">Specify the name of the root node that you added to the response schema you generated for the SELECT statement, as described under [Generating Schema for the Response Message for SELECT Statement](#BKMK_RespSchema).</span></span> <span data-ttu-id="a714d-269">このトピックのこれを設定**ルート**です。</span><span class="sxs-lookup"><span data-stu-id="a714d-269">For this topic, set this to **Root**.</span></span>|  
        |<span data-ttu-id="a714d-270">**XmlStoredProcedureRootNodeNamespace**</span><span class="sxs-lookup"><span data-stu-id="a714d-270">**XmlStoredProcedureRootNodeNamespace**</span></span>|<span data-ttu-id="a714d-271">下の説明に従って、SELECT ステートメントの生成、応答スキーマのターゲット名前空間を指定[SELECT ステートメントの応答メッセージのスキーマを生成する](#BKMK_RespSchema)です。</span><span class="sxs-lookup"><span data-stu-id="a714d-271">Specify the target namespace for the response schema you generated for the SELECT statement, as described under [Generating Schema for the Response Message for SELECT Statement](#BKMK_RespSchema).</span></span> <span data-ttu-id="a714d-272">このトピックのこれを設定`http://ForXmlPolling/namespace`です。</span><span class="sxs-lookup"><span data-stu-id="a714d-272">For this topic, set this to `http://ForXmlPolling/namespace`.</span></span>|  
  
         <span data-ttu-id="a714d-273">異なるバインディングのプロパティの詳細については、次を参照してください。 [SQL Server のアダプターのバインド プロパティの BizTalk アダプターの説明を読む](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md)です。</span><span class="sxs-lookup"><span data-stu-id="a714d-273">For more information about the different binding properties, see [Read about the BizTalk Adapter for SQL Server adapter Binding Properties](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="a714d-274">使用して受信操作の実行中に、トランザクション分離レベルとトランザクションのタイムアウトを構成することをお勧め、[!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)]です。</span><span class="sxs-lookup"><span data-stu-id="a714d-274">We recommend configuring the transaction isolation level and the transaction timeout while performing inbound operations using the [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)].</span></span> <span data-ttu-id="a714d-275">サービスを追加することで、Wcf-custom または WCF SQL の構成中に動作の受信ポートを行うことができます。</span><span class="sxs-lookup"><span data-stu-id="a714d-275">You can do so by adding the service behavior while configuring the WCF-Custom or WCF-SQL receive port.</span></span> <span data-ttu-id="a714d-276">サービスの動作を追加する方法については、次を参照してください。[トランザクション分離レベルの構成と SQL を使用したトランザクションのタイムアウト](../../adapters-and-accelerators/adapter-sql/configure-transaction-isolation-level-and-transaction-timeout-with-sql.md)です。</span><span class="sxs-lookup"><span data-stu-id="a714d-276">For instruction on how to add the service behavior, see [Configure Transaction Isolation Level and Transaction Timeout with SQL](../../adapters-and-accelerators/adapter-sql/configure-transaction-isolation-level-and-transaction-timeout-with-sql.md).</span></span>  
  
## <a name="starting-the-application"></a><span data-ttu-id="a714d-277">アプリケーションの起動</span><span class="sxs-lookup"><span data-stu-id="a714d-277">Starting the Application</span></span>  
 <span data-ttu-id="a714d-278">SQL Server データベースからメッセージを受信する BizTalk アプリケーションを起動する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a714d-278">You must start the BizTalk application for receiving messages from the SQL Server database.</span></span> <span data-ttu-id="a714d-279">BizTalk アプリケーションの起動方法の詳細については、次を参照してください。[オーケストレーションを開始する方法](../../core/how-to-start-an-orchestration.md)です。</span><span class="sxs-lookup"><span data-stu-id="a714d-279">For instructions on starting a BizTalk application, see [How to Start an Orchestration](../../core/how-to-start-an-orchestration.md).</span></span>
  
 <span data-ttu-id="a714d-280">この段階で確認します。</span><span class="sxs-lookup"><span data-stu-id="a714d-280">At this stage, make sure:</span></span>  
  
-   <span data-ttu-id="a714d-281">Wcf-custom または WCF SQL 一方向受信ポートを指定されたステートメントを使用して SQL Server データベースをポーリングする、 **PollingStatement**バインディング プロパティが実行されています。</span><span class="sxs-lookup"><span data-stu-id="a714d-281">The WCF-Custom or WCF-SQL one-way receive port, which polls the SQL Server database using the statements specified for the **PollingStatement** binding property, is running.</span></span>  
  
-   <span data-ttu-id="a714d-282">SQL Server からメッセージを受信する FILE 送信ポートが実行されています。</span><span class="sxs-lookup"><span data-stu-id="a714d-282">The FILE send port, which receives messages from SQL Server, is running.</span></span>  
  
-   <span data-ttu-id="a714d-283">操作の BizTalk オーケストレーションが実行されています。</span><span class="sxs-lookup"><span data-stu-id="a714d-283">The BizTalk orchestration for the operation is running.</span></span>  
  
## <a name="executing-the-operation"></a><span data-ttu-id="a714d-284">操作の実行</span><span class="sxs-lookup"><span data-stu-id="a714d-284">Executing the Operation</span></span>  
 <span data-ttu-id="a714d-285">アプリケーションを実行した後、次の一連のアクションが実行と同じ順序で。</span><span class="sxs-lookup"><span data-stu-id="a714d-285">After you run the application, the following set of actions take place, in the same sequence:</span></span>  
  
-   <span data-ttu-id="a714d-286">アダプターの実行、 **PolledDataAvailableStatement**従業員のテーブルが表示され、テーブルにポーリングのレコードがあることを決定します。</span><span class="sxs-lookup"><span data-stu-id="a714d-286">The adapter executes the **PolledDataAvailableStatement** on the Employee table and determines that the table has records for polling.</span></span>  
  
-   <span data-ttu-id="a714d-287">アダプターは、ポーリング ステートメントを実行し、SQL Server データベースからポーリング メッセージを受信します。</span><span class="sxs-lookup"><span data-stu-id="a714d-287">The adapter executes the polling statement and receives a polling message from the SQL Server database.</span></span> <span data-ttu-id="a714d-288">ポーリング ステートメントは、FOR XML 句を伴う SELECT ステートメントから構成されているために、アダプターによって受信されたポーリング メッセージは、次のようになります。</span><span class="sxs-lookup"><span data-stu-id="a714d-288">Because the polling statement consists of a SELECT statement with a FOR XML clause, the polling message received by the adapter resembles the following:</span></span>  
  
    ```  
    \<?xml version="1.0" encoding="utf-8" ?>   
    <Root xmlns="http://ForXmlPolling/namespace">  
      <Employee Employee_ID="10765" Name="John" Designation="Tester" xmlns="" />   
      <Employee Employee_ID="10766" Name="Sam" Designation="Manager" xmlns="" />   
      .....  
      .....  
    </Root>  
    ```  
  
     <span data-ttu-id="a714d-289">含む SELECT ステートメントを実行することによって生成されると、同じスキーマでポーリング メッセージを受信することに注意してください、 **xmlschema**句。</span><span class="sxs-lookup"><span data-stu-id="a714d-289">Notice that the polling message is received in the same schema as generated by executing the SELECT statement with the **xmlschema** clause.</span></span> <span data-ttu-id="a714d-290">ルート ノードと名前空間は、の値として指定したものと同じであるにも注意してください**XmlStoredProcedureRootNodeName**と**XmlStoredProcedureRootNodeNamespace**それぞれのプロパティをバインドします。</span><span class="sxs-lookup"><span data-stu-id="a714d-290">Also note that the root node and the namespace is the same you specified as values for **XmlStoredProcedureRootNodeName** and **XmlStoredProcedureRootNodeNamespace** binding properties respectively.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="a714d-291">[!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)]はポーリングから受信ポートを明示的に無効にするまで引き続き、[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]管理コンソールです。</span><span class="sxs-lookup"><span data-stu-id="a714d-291">The [!INCLUDE[adaptersqlshort](../../includes/adaptersqlshort-md.md)] will continue to poll until you explicitly disable the receive port from the [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span>  
  
## <a name="best-practices"></a><span data-ttu-id="a714d-292">ベスト プラクティス</span><span class="sxs-lookup"><span data-stu-id="a714d-292">Best Practices</span></span>  
 <span data-ttu-id="a714d-293">展開して、BizTalk プロジェクトを構成することが後、は、バインド ファイルと呼ばれる XML ファイルに構成設定をエクスポートできます。</span><span class="sxs-lookup"><span data-stu-id="a714d-293">After you have deployed and configured the BizTalk project, you can export configuration settings to an XML file called the binding file.</span></span> <span data-ttu-id="a714d-294">バインド ファイルを生成したできるように、送信ポートを作成し、同じオーケストレーション用のポートを受信する必要はありません、ファイルから構成設定をインポートすることができます。</span><span class="sxs-lookup"><span data-stu-id="a714d-294">Once you generate a binding file, you can import the configuration settings from the file, so that you do not need to create the send ports and receive ports for the same orchestration.</span></span> <span data-ttu-id="a714d-295">バインド ファイルの詳細については、次を参照してください。[アダプターのバインドを再利用](../../adapters-and-accelerators/adapter-sql/reuse-sql-adapter-bindings.md)です。</span><span class="sxs-lookup"><span data-stu-id="a714d-295">For more information about binding files, see [Reuse adapter bindings](../../adapters-and-accelerators/adapter-sql/reuse-sql-adapter-bindings.md).</span></span>
  
## <a name="see-also"></a><span data-ttu-id="a714d-296">参照</span><span class="sxs-lookup"><span data-stu-id="a714d-296">See Also</span></span>  
 [<span data-ttu-id="a714d-297">BizTalk Server と SQL アダプタを使用して SQL サーバーにポーリング</span><span class="sxs-lookup"><span data-stu-id="a714d-297">Poll SQL Server by Using the SQL Adapter with BizTalk Server</span></span>](../../adapters-and-accelerators/adapter-sql/poll-sql-server-using-the-sql-adapter-with-biztalk-server.md)