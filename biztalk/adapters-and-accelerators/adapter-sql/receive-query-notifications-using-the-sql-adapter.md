---
title: SQL アダプターを使用してクエリ通知を受け取る |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 6b2ed0f0-d005-4eec-b1a6-97a0c94678dc
caps.latest.revision: 10
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 015382d92be87118f2cc7ba1c594021b5c379937
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65368297"
---
# <a name="receive-query-notifications-using-the-sql-adapter"></a><span data-ttu-id="249da-102">SQL アダプターを使用してクエリ通知を受け取る</span><span class="sxs-lookup"><span data-stu-id="249da-102">Receive query notifications using the SQL adapter</span></span>
<span data-ttu-id="249da-103">SQL Server データベースのデータの変更についてのクエリ通知を受信するアダプターのクライアントがサブスクライブできます。</span><span class="sxs-lookup"><span data-stu-id="249da-103">The adapter clients can subscribe to receive query notifications about the data changes in the SQL Server database.</span></span> <span data-ttu-id="249da-104">SQL SELECT ステートメントまたはストアド プロシージャは、クエリ通知の送信をトリガーするためのテーブルのデータ変更の条件を指定および SQL Server クエリ通知を送信します、SELECT ステートメントまたはストアド プロシージャの変更の結果を設定するとします。</span><span class="sxs-lookup"><span data-stu-id="249da-104">A SQL SELECT statement or a stored procedure specifies the data-change criteria in a table for triggering of the query notifications, and the SQL Server sends query notifications as and when the result set for the SELECT statement or the stored procedure changes.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="249da-105">クエリ通知をサポートするには、アダプターのクライアントと SQL Server データベースが、特定の要件を満たすが。</span><span class="sxs-lookup"><span data-stu-id="249da-105">To support query notifications, the adapter clients and the SQL Server database have to fulfill certain requirements.</span></span> <span data-ttu-id="249da-106">これらの要件の詳細についてを参照してください「のクエリ通知を有効にする」 [ http://go.microsoft.com/fwlink/?LinkID=122323](http://go.microsoft.com/fwlink/?LinkID=122323)します。</span><span class="sxs-lookup"><span data-stu-id="249da-106">For detailed information about these requirements, see “Enabling Query Notifications” at [http://go.microsoft.com/fwlink/?LinkID=122323](http://go.microsoft.com/fwlink/?LinkID=122323).</span></span>  
  
 <span data-ttu-id="249da-107">一般的なクエリ通知には、次の項目が含まれます。</span><span class="sxs-lookup"><span data-stu-id="249da-107">A typical query notification involves the following:</span></span>  
  
- <span data-ttu-id="249da-108">アダプターのクライアントを指定する必要があります`Notification`の受信の操作として、 **InboundOperationType**プロパティをバインドします。</span><span class="sxs-lookup"><span data-stu-id="249da-108">The adapter clients must specify `Notification` as the inbound operation in the **InboundOperationType** binding property.</span></span> <span data-ttu-id="249da-109">このバインドのプロパティの既定値は`Polling`します。</span><span class="sxs-lookup"><span data-stu-id="249da-109">The default value for this binding property is `Polling`.</span></span>  
  
- <span data-ttu-id="249da-110">アダプター クライアントでのクエリ通知に登録する SQL ステートメントを指定する必要があります、 **NotificationStatement**プロパティをバインドします。</span><span class="sxs-lookup"><span data-stu-id="249da-110">The adapter clients must specify a SQL statement to register for query notifications in the **NotificationStatement** binding property.</span></span> <span data-ttu-id="249da-111">アダプター クライアントでは、指定された SQL ステートメントの変更の結果が設定されるとすぐに、SQL Server から通知を取得します。</span><span class="sxs-lookup"><span data-stu-id="249da-111">The adapter client gets a notification from SQL Server as soon as the result set for the specified SQL statement changes.</span></span>  
  
  > [!IMPORTANT]
  >  <span data-ttu-id="249da-112">通知配信登録の SQL ステートメントの通知を受信する*する必要があります*特定の条件を満たしています。</span><span class="sxs-lookup"><span data-stu-id="249da-112">To receive notifications, the SQL statement for the notification subscription *must* meet certain criteria.</span></span> <span data-ttu-id="249da-113">クエリ通知の使用できる SQL ステートメントの詳細については、次を参照してください。 [ http://go.microsoft.com/fwlink/?LinkId=122160](http://go.microsoft.com/fwlink/?LinkId=122160)します。</span><span class="sxs-lookup"><span data-stu-id="249da-113">For information about SQL statements that can be used for query notifications, see [http://go.microsoft.com/fwlink/?LinkId=122160](http://go.microsoft.com/fwlink/?LinkId=122160).</span></span>  
  
- <span data-ttu-id="249da-114">アダプター クライアントは、リスナーで開始するとすぐに、アダプターがアダプター クライアントに通知を送信するかどうかを指定する必要があります、 **NotifyOnListenerStart**プロパティをバインドします。</span><span class="sxs-lookup"><span data-stu-id="249da-114">The adapter clients must specify whether the adapter sends a notification to the adapter clients as soon as the listener is started in the **NotifyOnListenerStart** binding property.</span></span>  
  
- <span data-ttu-id="249da-115">通知としてアダプター クライアントに送信され、SQL ステートメントがで指定された結果セットがの場合、 **NotificationStatement**プロパティのバインドが変更されました。</span><span class="sxs-lookup"><span data-stu-id="249da-115">The notification is sent to the adapter clients as and when the result set of the SQL statement specified in the **NotificationStatement** binding property is changed.</span></span>  
  
  <span data-ttu-id="249da-116">これらのバインド プロパティの詳細については、次を参照してください。 [for SQL Server のアダプターのバインド プロパティの BizTalk アダプターについて](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md)します。</span><span class="sxs-lookup"><span data-stu-id="249da-116">For more information about these binding properties, see [Read about the BizTalk Adapter for SQL Server adapter binding properties](../../adapters-and-accelerators/adapter-sql/read-about-the-biztalk-adapter-for-sql-server-adapter-binding-properties.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="249da-117">通知配信登録は、ステートメントが実行されたトランザクションがコミットまたはロールバックするかどうかに関係なく、コミットは常にします。</span><span class="sxs-lookup"><span data-stu-id="249da-117">The notification subscription is always committed, regardless of whether the transaction in which the statement ran was committed or rolled back.</span></span> <span data-ttu-id="249da-118">そのため、通知の操作では、通知をサブスクライブしているクエリの結果が変更されたことがあります限りません。</span><span class="sxs-lookup"><span data-stu-id="249da-118">Therefore, the notification operation might not guarantee that the result of the query subscribed for notification has changed.</span></span> <span data-ttu-id="249da-119">たとえば、トランザクションでは、(通知のサブスクライブ) テーブルの行でデータを挿入および変更 (挿入) の詳細については、アダプターの通知をすぐに通知が送信されます。</span><span class="sxs-lookup"><span data-stu-id="249da-119">For example, suppose data is inserted in a table row (subscribed for notification) in a transaction, and immediately a notification is sent to the adapter informing about the change (insert).</span></span> <span data-ttu-id="249da-120">なんらかの理由により、トランザクションがロールバックし、効率的にデータは挿入されません、表の行にします。</span><span class="sxs-lookup"><span data-stu-id="249da-120">Due to some reason, the transaction rolls back, and effectively no data is inserted into the table row.</span></span> <span data-ttu-id="249da-121">ただし、SQL Server はトランザクションのロールバックのアダプターに通知を送信しません。</span><span class="sxs-lookup"><span data-stu-id="249da-121">However, the SQL Server does not send a notification to the adapter about the transaction roll back.</span></span> <span data-ttu-id="249da-122">SQL Server のクエリ通知の詳細については、次を参照してください。 [ http://go.microsoft.com/fwlink/?LinkId=145367](http://go.microsoft.com/fwlink/?LinkId=145367)します。</span><span class="sxs-lookup"><span data-stu-id="249da-122">For information about query notifications in SQL Server, see [http://go.microsoft.com/fwlink/?LinkId=145367](http://go.microsoft.com/fwlink/?LinkId=145367).</span></span>  
  
## <a name="differences-between-query-notification-and-polling"></a><span data-ttu-id="249da-123">クエリ通知とポーリング間の違い</span><span class="sxs-lookup"><span data-stu-id="249da-123">Differences between Query Notification and Polling</span></span>  
 <span data-ttu-id="249da-124">クエリ通知とポーリングは、両方の受信操作し、SQL Server データベースのデータの変更について、アダプターをクライアントに通知、次の表は、2 つの間のいくつかの違いを示します。</span><span class="sxs-lookup"><span data-stu-id="249da-124">Though query notification and polling are both inbound operations, and inform the adapter clients about the data changes in the SQL Server database, the following table lists some differences between the two.</span></span> <span data-ttu-id="249da-125">次の相違点を使用すると、要件に応じて、操作を決定できます。</span><span class="sxs-lookup"><span data-stu-id="249da-125">The following differences will help you decide on an operation depending on your requirements:</span></span>  
  
|<span data-ttu-id="249da-126">クエリ通知</span><span class="sxs-lookup"><span data-stu-id="249da-126">Query Notification</span></span>|<span data-ttu-id="249da-127">ポーリング</span><span class="sxs-lookup"><span data-stu-id="249da-127">Polling</span></span>|  
|------------------------|-------------|  
|<span data-ttu-id="249da-128">クエリ通知は、SQL Server によって開始されます。</span><span class="sxs-lookup"><span data-stu-id="249da-128">Query notification is initiated by SQL Server.</span></span> <span data-ttu-id="249da-129">だけ、アダプターによって発行された通知のステートメントでは、データベース ステートメントの結果セット内の変更がある場合は、通知を開始するように指示します。</span><span class="sxs-lookup"><span data-stu-id="249da-129">The notification statement issued by the adapter just instructs the database to initiate notification in case there is a change in the result set of the statement.</span></span>|<span data-ttu-id="249da-130">ポーリングは、アダプターによって開始されます。</span><span class="sxs-lookup"><span data-stu-id="249da-130">Polling is initiated by the adapter.</span></span> <span data-ttu-id="249da-131">アダプターは、データのポーリングに使用できるとポーリングの一部のデータがある場合は、ポーリング ステートメントを実行してポーリングを開始するかどうかを検証するステートメントを実行します。</span><span class="sxs-lookup"><span data-stu-id="249da-131">The adapter executes a statement to validate whether data is available for polling, and then initiates polling by executing the polling statement if some data is available for polling.</span></span>|  
|<span data-ttu-id="249da-132">クエリ通知のステートメントを使用すると、SQL Server データベース テーブルにデータを読み取るだけです。</span><span class="sxs-lookup"><span data-stu-id="249da-132">You can use the query notification statement to only read data in a SQL Server database table.</span></span>|<span data-ttu-id="249da-133">ポーリング ステートメントを使用して、読み取りまたは SQL Server データベース テーブル内のデータを更新することができます。</span><span class="sxs-lookup"><span data-stu-id="249da-133">You can use the polling statement to read or update data in a SQL Server database table.</span></span>|  
|<span data-ttu-id="249da-134">クエリ通知が、Insert などのデータの変更の種類にのみ通知は、更新、および削除します。</span><span class="sxs-lookup"><span data-stu-id="249da-134">Query notification informs only about the type of change in the data such as Insert, Update, and Delete.</span></span>|<span data-ttu-id="249da-135">ポーリングには、実際のデータが変更されたことについて通知されます。</span><span class="sxs-lookup"><span data-stu-id="249da-135">Polling informs you about the actual data that has changed.</span></span>|  
|<span data-ttu-id="249da-136">データの変更通知は瞬時です。</span><span class="sxs-lookup"><span data-stu-id="249da-136">The data-change notification is instantaneous.</span></span>|<span data-ttu-id="249da-137">データの変更通知が、ポーリング間隔に依存し、アダプター クライアントは、ポーリング間隔の最後に、データの変更について通知されます。</span><span class="sxs-lookup"><span data-stu-id="249da-137">The data-change notification depends on the polling interval, and the adapter clients are informed about the data changes at the end of every polling interval.</span></span> <span data-ttu-id="249da-138">**ヒント:** ポーリングすれば、スループットを向上させる継続的に、データの変更が行われていてと、発生したタイミングとしては、各変更の通知したくないです。</span><span class="sxs-lookup"><span data-stu-id="249da-138">**Tip:**  Polling can give you better throughput in scenarios where the data changes are happening continuously, and you do not want to be notified of each change as and when it happens.</span></span> <span data-ttu-id="249da-139">代わりに、その後の前回の変更の通知以降に発生したすべての変更を通知するポーリング間隔を指定します。</span><span class="sxs-lookup"><span data-stu-id="249da-139">Instead, you specify a polling interval after which you want to be notified of all the changes that have happened since the last change notification.</span></span>|  
  
 <span data-ttu-id="249da-140">クエリ通知の詳細については[!INCLUDE[adaptersql](../../includes/adaptersql-md.md)]を参照してください[を使用して BizTalk Server によって SQL クエリ通知の受信](../../adapters-and-accelerators/adapter-sql/receive-sql-query-notifications-using-biztalk-server.md)します。</span><span class="sxs-lookup"><span data-stu-id="249da-140">For more information about query notification in [!INCLUDE[adaptersql](../../includes/adaptersql-md.md)], see [Receive SQL Query Notifications by Using BizTalk Server](../../adapters-and-accelerators/adapter-sql/receive-sql-query-notifications-using-biztalk-server.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="249da-141">参照</span><span class="sxs-lookup"><span data-stu-id="249da-141">See Also</span></span>  
 <span data-ttu-id="249da-142">[どのような操作は、アダプターを使用して実行しますか?](https://msdn.microsoft.com/library/cc185435(v=bts.10).aspx)</span><span class="sxs-lookup"><span data-stu-id="249da-142">[What Operations Can be Performed Using the Adapter?](https://msdn.microsoft.com/library/cc185435(v=bts.10).aspx)</span></span>