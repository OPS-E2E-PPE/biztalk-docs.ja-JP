---
title: Sap Idoc に対する操作 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- IDOC, operations to receive an
- IDOCs
- IDOCs, operations on
- tRFC server
- IDOC, operations to send an
- RFC server
ms.assetid: 6abcc646-c7a3-48cf-a09e-01f516dcef97
caps.latest.revision: 5
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: c9c3bbf45074024b8745b845b3f9ca85f5ff814e
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/27/2018
ms.locfileid: "36972227"
---
# <a name="operations-on-idocs-in-sap"></a><span data-ttu-id="a9c31-102">Sap Idoc に対する操作</span><span class="sxs-lookup"><span data-stu-id="a9c31-102">Operations on IDOCs in SAP</span></span>
<span data-ttu-id="a9c31-103">Idoc は、SAP と SAP 以外のシステムと非同期的に通信するために SAP がサポートしている標準の EDI のようなドキュメントです。</span><span class="sxs-lookup"><span data-stu-id="a9c31-103">IDOCs are standardized EDI-like documents that SAP supports for asynchronously communicating with SAP and non-SAP systems.</span></span> <span data-ttu-id="a9c31-104">Idoc は、取引先の SAP システムまたは外部プログラムの間の販売の注文などの"business"ドキュメントの送受信に使用されます。</span><span class="sxs-lookup"><span data-stu-id="a9c31-104">IDOCs are used for sending and receiving “business” documents such as sales orders, for example, to or from a trading partner’s SAP system or an external program.</span></span>  
  
 <span data-ttu-id="a9c31-105">SAP システム数を送信し、Idoc を受信するポートの種類をサポートしています (file ポートなど CPIC ポート)、 [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] tRFC ポート経由で Idoc の送受信をサポートしています。</span><span class="sxs-lookup"><span data-stu-id="a9c31-105">Although the SAP system supports a number of port types to send and receive IDOCs (such as file port, CPIC port), the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports sending and receiving IDOCs via the tRFC port.</span></span>  
  
## <a name="operations-to-send-an-idoc"></a><span data-ttu-id="a9c31-106">IDOC を送信する操作</span><span class="sxs-lookup"><span data-stu-id="a9c31-106">Operations to Send an IDOC</span></span>  
 <span data-ttu-id="a9c31-107">TRFC の呼び出し、すべての SAP IDOC 呼び出しは内部的に扱われます、アダプターは、tRFC クライアントとして機能し、IDOC を送信する SAP の RFC を呼び出します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-107">All IDOC calls to SAP are internally treated as tRFC calls in which the adapter acts as a tRFC client and calls an RFC in SAP to send an IDOC.</span></span> <span data-ttu-id="a9c31-108">その他の tRFC クライアント呼び出しと同じようアダプター クライアントは必要に応じて、アダプターでは、さらにトランザクション ID (TID) での SAP システムの呼び出しに使用した関連付けますに GUID を渡します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-108">Just like any other tRFC client call, the adapter client optionally passes a GUID to the adapter, which in turn associates it with the transaction ID (TID) that it uses for the call on the SAP system.</span></span> <span data-ttu-id="a9c31-109">(アダプター クライアントが GUID を渡さない場合、アダプターが生成する、独自の GUID です。)アダプターでクライアントに応答メッセージは、GUID が返されます。</span><span class="sxs-lookup"><span data-stu-id="a9c31-109">(If the adapter client does not pass a GUID, the adapter generates its own GUID.) The GUID is returned to the adapter client in the response message.</span></span> <span data-ttu-id="a9c31-110">アダプター クライアントでは、この GUID を使用して、SAP システムで TID を確認します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-110">The adapter client can use this GUID to confirm the TID on the SAP system.</span></span> <span data-ttu-id="a9c31-111">TRFC の呼び出しは、SAP バインドで特殊な静的メソッドを呼び出すことによって取得できますに、アダプターによって使用される実際の SAP TID **ConvertGuidToTid**します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-111">The actual SAP TID used by the adapter for the tRFC call can be obtained by invoking a special static method in the SAP binding, **ConvertGuidToTid**.</span></span> <span data-ttu-id="a9c31-112">実際の TID を持つには、SAP システムの問題のトラブルシューティングに役立つ可能性があります。</span><span class="sxs-lookup"><span data-stu-id="a9c31-112">Having the actual TID may be useful for troubleshooting issues on the SAP system.</span></span>  
  
 <span data-ttu-id="a9c31-113">IDOC の完了を送信する呼び出しの後に、SAP システムで TID を確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a9c31-113">After the call to send the IDOC is completed, the TID must be confirmed on the SAP system.</span></span> <span data-ttu-id="a9c31-114">これにより、そのデータベースから TID を削除する SAP システムができます。</span><span class="sxs-lookup"><span data-stu-id="a9c31-114">This enables the SAP system to delete the TID from its database.</span></span> <span data-ttu-id="a9c31-115">アダプターのクライアントは、SAP システムで TID を確認できます。</span><span class="sxs-lookup"><span data-stu-id="a9c31-115">The adapter client can confirm the TID on the SAP system.</span></span>  
  
- <span data-ttu-id="a9c31-116">明示的に呼び出して、 **RfcConfirmTransID**アダプターの操作。</span><span class="sxs-lookup"><span data-stu-id="a9c31-116">Explicitly, by invoking the **RfcConfirmTransID** operation on the adapter.</span></span> <span data-ttu-id="a9c31-117">この操作は、(上記の応答メッセージで返される) の GUID を受け取り、アダプターは、SAP システムに関連付けられている TID を確認します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-117">This operation takes a GUID (returned in the response message above) and causes the adapter to confirm the associated TID on the SAP system.</span></span>  
  
- <span data-ttu-id="a9c31-118">設定して、暗黙的、 **AutoConfirmSentIdocs**プロパティをバインドします。</span><span class="sxs-lookup"><span data-stu-id="a9c31-118">Implicitly, by setting the **AutoConfirmSentIdocs** binding property.</span></span> <span data-ttu-id="a9c31-119">このバインドのプロパティが true の場合 IDOC を SAP システムに送信した後、アダプターがその TID を自動的にコミットします。</span><span class="sxs-lookup"><span data-stu-id="a9c31-119">If this binding property is true, the adapter automatically commits the TID after it sends the IDOC to the SAP system.</span></span> <span data-ttu-id="a9c31-120">参照してください[mySAP Business Suite バインド プロパティの BizTalk アダプターについて](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md)詳細についてはします。</span><span class="sxs-lookup"><span data-stu-id="a9c31-120">See [Read about BizTalk Adapter for mySAP Business Suite Binding Properties](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md) for more information.</span></span>  
  
  <span data-ttu-id="a9c31-121">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]次の Rfc を使用して、IDOC を送信します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-121">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] uses the following RFCs to send an IDOC:</span></span>  
  
- <span data-ttu-id="a9c31-122">INBOUND_IDOC_PROCESS します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-122">INBOUND_IDOC_PROCESS.</span></span> <span data-ttu-id="a9c31-123">この関数のモジュールが使用される SAP が 4.0 より前にリリースします。</span><span class="sxs-lookup"><span data-stu-id="a9c31-123">This function module is used for SAP releases before 4.0.</span></span>  
  
- <span data-ttu-id="a9c31-124">IDOC_INBOUND_ASYNCHRONOUS します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-124">IDOC_INBOUND_ASYNCHRONOUS.</span></span> <span data-ttu-id="a9c31-125">この関数のモジュールに使用される SAP リリース 4.0 以降です。</span><span class="sxs-lookup"><span data-stu-id="a9c31-125">This function module is used for SAP release 4.0 and later.</span></span>  
  
### <a name="sending-idocs-with-segment-data-across-multiple-lines"></a><span data-ttu-id="a9c31-126">複数の行のデータ セグメントで Idoc を送信します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-126">Sending IDOCs with Segment Data Across Multiple Lines</span></span>  
 <span data-ttu-id="a9c31-127">セグメントの Idoc を使用したされます。</span><span class="sxs-lookup"><span data-stu-id="a9c31-127">IDOCs are constituted of segments.</span></span> <span data-ttu-id="a9c31-128">IDOC フラット ファイル内の各セグメント エントリには、(DOCNUM フィールドを含む) セグメントのヘッダー情報と、セグメント データが含まれています。</span><span class="sxs-lookup"><span data-stu-id="a9c31-128">Each segment entry in an IDOC flat-file contains the segment header info (containing the DOCNUM field) and the segment data.</span></span> <span data-ttu-id="a9c31-129">いくつかの Idoc の複数の行、セグメント データを分割できます。</span><span class="sxs-lookup"><span data-stu-id="a9c31-129">In some IDOCs, the segment data can be split across multiple lines.</span></span> <span data-ttu-id="a9c31-130">以下に例を示します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-130">For example:</span></span>  
  
```  
Segment header (DOCNUM is one of the fields here)  |  Segment data  
Segment header (DOCNUM is one of the fields here)  |  Segment data  
Segment data wrapped from the previous line  
Segment header (DOCNUM is one of the fields here)  |  Segment data  
```  
  
 <span data-ttu-id="a9c31-131">WCF ベース[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]SAP システムにこのような Idoc の送信をサポートします。</span><span class="sxs-lookup"><span data-stu-id="a9c31-131">The WCF-based [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports sending such IDOCs to the SAP system.</span></span> <span data-ttu-id="a9c31-132">、このような Idoc の送信をサポートするために、[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]かどうかは、前の続きは、各セグメントのデータまたはある新しいセグメント データであるかを判断します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-132">To support sending such IDOCs, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] determines whether each segment data is a continuation of the previous one, or whether it is a new segment data.</span></span> <span data-ttu-id="a9c31-133">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]各セグメント ヘッダーを解析して DOCNUM フィールドを探してこれを決定します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-133">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] decides this by parsing each segment header and looking for the DOCNUM field.</span></span> <span data-ttu-id="a9c31-134">2 行目がセグメント ヘッダーを持たない場合、セグメント データは、2 つの行に分かれては、その結果、 [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] DOCNUM フィールドが見つからない。</span><span class="sxs-lookup"><span data-stu-id="a9c31-134">If the segment data is split across two lines, the second line does not have a segment header and as a result the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] does not find the DOCNUM field.</span></span> <span data-ttu-id="a9c31-135">そのため、[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]前のセグメント データの継続があると判断できます。</span><span class="sxs-lookup"><span data-stu-id="a9c31-135">Hence, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] can determine that it is a continuation of the previous segment data.</span></span>  
  
 <span data-ttu-id="a9c31-136">など前に、示した IDOC の表記で、 [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] DOCNUM のフィールドが見つからない"`Segment data wrapped from the previous line`"行に、前のセグメント データの継続があると判断することができます。</span><span class="sxs-lookup"><span data-stu-id="a9c31-136">For example, in the representation of an IDOC shown above, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] does not find any DOCNUM field in “`Segment data wrapped from the previous line`” and is able to decide that the line is a continuation of the previous segment data.</span></span> <span data-ttu-id="a9c31-137">IDOC のサイズを考えると、処理時間が長く、各セグメントのデータをそのようなチェックを実行する運用環境でのフラット ファイルがあります。</span><span class="sxs-lookup"><span data-stu-id="a9c31-137">Considering the size of IDOC flat files in production environments, performing such checks for each segment data may result in increased processing time.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="a9c31-138">アダプターは、IDOC データから識別および各セグメント レコードを抽出、復帰改行 (CRLF) ではなく DOCNUM フィールドを使用します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-138">The adapter uses the DOCNUM field instead of a carriage return line feed (CRLF) to identify and extract each segment record from IDOC data.</span></span> <span data-ttu-id="a9c31-139">コントロールとデータのレコードの DOCNUM フィールドは、無効または部分的に空白には、アダプターは、IDOC の解析に失敗します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-139">If the DOCNUM fields in the control and data records are invalid or partly blank, the adapter fails to parse the IDOC.</span></span> <span data-ttu-id="a9c31-140">そのため、IDOC が SAP システムには送信されません。</span><span class="sxs-lookup"><span data-stu-id="a9c31-140">Hence, the IDOC is not sent to the SAP system.</span></span>  
  
### <a name="operations-to-send-an-idoc"></a><span data-ttu-id="a9c31-141">IDOC を送信する操作</span><span class="sxs-lookup"><span data-stu-id="a9c31-141">Operations to Send an IDOC</span></span>  
 <span data-ttu-id="a9c31-142">Idoc を SAP システムに送信するため、次の操作がサポートされます。</span><span class="sxs-lookup"><span data-stu-id="a9c31-142">The following operations are supported for sending IDOCs to an SAP system:</span></span>  
  
- <span data-ttu-id="a9c31-143">**送信**します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-143">**Send**.</span></span> <span data-ttu-id="a9c31-144">厳密に型指定されたスキーマを使用して、SAP システムに IDOC を送信するのにには、この操作を使用します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-144">Use this operation to send an IDOC to the SAP system using a strongly-typed schema.</span></span> <span data-ttu-id="a9c31-145">この操作のスキーマは、制御レコードのフィールドとセグメントのヘッダー セグメント フィールドなど、データ レコードのフィールドを公開します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-145">The schema for this operation exposes control record fields and data record fields, including segment headers and segment fields.</span></span> <span data-ttu-id="a9c31-146">送信操作は、IDocType + CimType + ReleaseNumber + バージョンに固有の組み合わせ。</span><span class="sxs-lookup"><span data-stu-id="a9c31-146">The Send operation is specific to an IDocType + CimType + ReleaseNumber + Version combination.</span></span>  
  
   <span data-ttu-id="a9c31-147">この操作は、idoc ごとに表示されの特定の IDOC ノード下にある、[!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)]または[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-147">This operation is surfaced for each IDOC and is available under a specific IDOC node in the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] or [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span>  
  
  > [!NOTE]
  >  <span data-ttu-id="a9c31-148">IDOC_INBOUND_ASYNCHRONOUS RFC</span><span class="sxs-lookup"><span data-stu-id="a9c31-148">To be able to successfully perform a **Send** operation, you must have relevant authorization in the SAP system.</span></span> <span data-ttu-id="a9c31-149">詳しくは、</span><span class="sxs-lookup"><span data-stu-id="a9c31-149">For more information.</span></span>  
  
- <span data-ttu-id="a9c31-150">\*\*Rfc</span><span class="sxs-lookup"><span data-stu-id="a9c31-150">**SendIdoc**.</span></span> <span data-ttu-id="a9c31-151">INBOUND_IDOC_PROCESS RFC</span><span class="sxs-lookup"><span data-stu-id="a9c31-151">Use this operation to send an IDOC to the SAP system using a weakly-typed schema.</span></span> <span data-ttu-id="a9c31-152">別のバインド プロパティPadReceivedIdocsWithSpaces受信した IDOC を空白で埋めるときに省略可能なフィールドの受信に必要な形式は"String"です。</span><span class="sxs-lookup"><span data-stu-id="a9c31-152">The schema for this operation exposes IDOCs as a single string field consisting the control record and data record.</span></span> <span data-ttu-id="a9c31-153">これにより、アダプターの以前のバージョンを使用して受信した IDOC データ形式との互換性ができます。</span><span class="sxs-lookup"><span data-stu-id="a9c31-153">The SendIdoc operation takes an IDOC string and a GUID as a parameter.</span></span>  
  
   <span data-ttu-id="a9c31-154">これは 1 つの SAP システムによって公開されているすべての Idoc の表示操作であり、ルートで使用可能な**IDOC**内のノード、[!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)]または[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-154">This is a single operation surfaced for all IDOCs exposed by the SAP system and is available under the root **IDOC** node in the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] or [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span>  
  
  <span data-ttu-id="a9c31-155">詳細については。</span><span class="sxs-lookup"><span data-stu-id="a9c31-155">For more information about:</span></span>  
  
- <span data-ttu-id="a9c31-156">BizTalk Server を使用してトランザクション コンテキストでの SAP システムから IDOC を受信するを参照してください[を使用して BizTalk Server でのトランザクション コンテキストでの SAP からの Idoc の受信](../../adapters-and-accelerators/adapter-sap/send-idocs-to-sap-using-biztalk-server.md)します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-156">Sending an IDOC to an SAP system using BizTalk Server, see [Send IDOCs to SAP by Using BizTalk Server](../../adapters-and-accelerators/adapter-sap/send-idocs-to-sap-using-biztalk-server.md).</span></span>  
  
- <span data-ttu-id="a9c31-157">メッセージの構造と IDOC を受信するための SOAP アクションを参照してください[IDOC 操作のメッセージ スキーマ](../../adapters-and-accelerators/adapter-sap/send-idocs-to-sap-using-the-wcf-service-model.md)します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-157">Sending an IDOC to an SAP system using WCF service model, see [Send IDOCs to SAP by Using the WCF Service Model](../../adapters-and-accelerators/adapter-sap/send-idocs-to-sap-using-the-wcf-service-model.md).</span></span>  
  
- <span data-ttu-id="a9c31-158">メッセージの構造と IDOC を送信するための SOAP アクションを参照してください[IDOC 操作のメッセージ スキーマ](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md)します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-158">Message structures and SOAP action for sending an IDOC, see [Message Schemas for IDOC Operations](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md).</span></span>  
  
## <a name="operations-to-receive-an-idoc"></a><span data-ttu-id="a9c31-159">IDOC を受信する操作</span><span class="sxs-lookup"><span data-stu-id="a9c31-159">Operations to Receive an IDOC</span></span>  
 <span data-ttu-id="a9c31-160">IDOC を受信する、 [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] tRFC サーバーまたは RFC サーバーとして動作できます。</span><span class="sxs-lookup"><span data-stu-id="a9c31-160">To receive an IDOC, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] can behave either as a tRFC server or an RFC server:</span></span>  
  
- <span data-ttu-id="a9c31-161">TRFC サーバー バインド プロパティとして動作するアダプターの**TidDatabaseConnectionString**コンピューターに TID データベースへの接続文字列に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a9c31-161">For the adapter to behave as a tRFC server, the binding property **TidDatabaseConnectionString** must be set to the connection string for the TID database on your computer.</span></span> <span data-ttu-id="a9c31-162">トランザクションに関する詳細については、SAP 管理者に問い合わせるか、SAP のマニュアルを参照してください。</span><span class="sxs-lookup"><span data-stu-id="a9c31-162">For a tRFC server scenario, the adapter accepts a tRFC client call from the SAP system to receive the IDOC.</span></span>  
  
- <span data-ttu-id="a9c31-163">アダプターが RFC サーバーとして動作するため、 **TidDatabaseConnectionString** null にする必要があります (既定値)。</span><span class="sxs-lookup"><span data-stu-id="a9c31-163">For the adapter to behave as an RFC server, the **TidDatabaseConnectionString** should be null (default).</span></span> <span data-ttu-id="a9c31-164">RFC サーバー シナリオでは、アダプターは、SAP システムから IDOC を受信するため RFC クライアント呼び出しを受け入れます。</span><span class="sxs-lookup"><span data-stu-id="a9c31-164">For an RFC server scenario, the adapter accepts an RFC client call from the SAP system to receive the IDOC.</span></span>  
  
  <span data-ttu-id="a9c31-165">次の Rfc は Idoc; を送受信するために使用します。Idoc を送信するときに、アダプターは、SAP システムがそれらを使用して IDOC を受信するときに、これらの Rfc を使用します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-165">The following RFCs are used to send and receive IDOCs; when sending IDOCs, the adapter uses these RFCs, whereas when receiving IDOCS, the SAP system uses them.</span></span>  
  
- <span data-ttu-id="a9c31-166">INBOUND_IDOC_PROCESS します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-166">INBOUND_IDOC_PROCESS.</span></span> <span data-ttu-id="a9c31-167">この関数のモジュールが使用される SAP が 4.0 より前にリリースします。</span><span class="sxs-lookup"><span data-stu-id="a9c31-167">This function module is used for SAP releases before 4.0.</span></span>  
  
- <span data-ttu-id="a9c31-168">IDOC_INBOUND_ASYNCHRONOUS します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-168">IDOC_INBOUND_ASYNCHRONOUS.</span></span> <span data-ttu-id="a9c31-169">この関数のモジュールに使用される SAP リリース 4.0 以降です。</span><span class="sxs-lookup"><span data-stu-id="a9c31-169">This function module is used for SAP release 4.0 and later.</span></span>  
  
  <span data-ttu-id="a9c31-170">SAP システムから Idoc を受信するため、次の操作がサポートされます。</span><span class="sxs-lookup"><span data-stu-id="a9c31-170">The following operations are supported for receiving IDOCs from an SAP system:</span></span>  
  
- <span data-ttu-id="a9c31-171">**受信**します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-171">**Receive**.</span></span> <span data-ttu-id="a9c31-172">厳密に型指定されたスキーマを使用して、SAP システムから IDOC を受信するのにには、この操作を使用します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-172">Use this operation to receive an IDOC from the SAP system using a strongly-typed schema.</span></span> <span data-ttu-id="a9c31-173">この操作のスキーマは、制御レコードのフィールドとセグメントのヘッダーとセグメント フィールドを含むデータ レコードのフィールドを公開します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-173">The schema for this operation exposes control record fields and data record fields including segment headers and segment fields.</span></span>  
  
   <span data-ttu-id="a9c31-174">この操作は、idoc ごとに表示されの特定の IDOC ノード下にある、[!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)]または[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-174">This operation is surfaced for each IDOC and is available under a specific IDOC node in the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] or [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span>  
  
  > [!NOTE]
  >  <span data-ttu-id="a9c31-175">正常に実行できる、**受信**操作、SAP システムに関連する承認が必要です。</span><span class="sxs-lookup"><span data-stu-id="a9c31-175">To be able to successfully perform a **Receive** operation, you must have relevant authorization in the SAP system.</span></span> <span data-ttu-id="a9c31-176">詳しくは、</span><span class="sxs-lookup"><span data-stu-id="a9c31-176">For more information.</span></span>  
  
  > [!NOTE]
  >  <span data-ttu-id="a9c31-177">使用して、**受信**操作、複数の Idoc を受信することもできます。</span><span class="sxs-lookup"><span data-stu-id="a9c31-177">Using the **Receive** operation, you can also receive multiple IDOCs.</span></span>  
  
- <span data-ttu-id="a9c31-178">**ReceiveIdoc**します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-178">**ReceiveIdoc**.</span></span> <span data-ttu-id="a9c31-179">厳密に型指定のスキーマを使用して、SAP システムから IDOC を受信するのにには、この操作を使用します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-179">Use this operation to receive an IDOC from the SAP system using a weakly-typed schema.</span></span> <span data-ttu-id="a9c31-180">この操作のスキーマでは、制御レコードとレコードのデータで構成される 1 つの文字列フィールドとして Idoc を公開します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-180">The schema for this operation exposes IDOCs as a single string field consisting of the control record and data record.</span></span> <span data-ttu-id="a9c31-181">この操作での XML メッセージの文字列としての Idoc の受信、 \<idocData\>タグ。</span><span class="sxs-lookup"><span data-stu-id="a9c31-181">This operation receives IDOCs as a string in an XML message under the \<idocData\> tag.</span></span>  
  
   <span data-ttu-id="a9c31-182">これは 1 つの SAP システムによって公開されているすべての Idoc の表示操作であり、ルートで使用可能な**IDOC**内のノード、[!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)]または[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-182">This is a single operation surfaced for all IDOCs exposed by the SAP system and is available under the root **IDOC** node in the [!INCLUDE[addadapterservrefshort](../../includes/addadapterservrefshort-md.md)] or [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span>  
  
  <span data-ttu-id="a9c31-183">Idoc を受信するときに、[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]バインディング プロパティの値として指定できる、さまざまなメッセージ形式をサポートしている**ReceiveIDocFormat**によって公開されている、[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-183">When receiving IDOCs, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports different message formats, which can be specified as a value for the binding property, **ReceiveIDocFormat** exposed by the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)].</span></span>  
  
- <span data-ttu-id="a9c31-184">かどうか「型指定された」に設定すると、XML スキーマは厳密に型指定 IDOC 受信されています。</span><span class="sxs-lookup"><span data-stu-id="a9c31-184">If set to "Typed", the XML schema is strongly typed to the specific IDOC being received.</span></span> <span data-ttu-id="a9c31-185">(このメッセージのスキーマは受信操作から確認できます。</span><span class="sxs-lookup"><span data-stu-id="a9c31-185">(The schema for this message can be seen from the Receive operations.</span></span> <span data-ttu-id="a9c31-186">2004 スキーマが Idoc の別の異なる)。</span><span class="sxs-lookup"><span data-stu-id="a9c31-186">Note that the schema is different for different IDOCs).</span></span> <span data-ttu-id="a9c31-187">これには、XML IDOC が生成されます。</span><span class="sxs-lookup"><span data-stu-id="a9c31-187">This yields an XML IDOC.</span></span>  
  
- <span data-ttu-id="a9c31-188">かどうか"String"に設定して、IDOC の受信データが返されますの文字列値として。</span><span class="sxs-lookup"><span data-stu-id="a9c31-188">If set to "String", the incoming IDOC data is returned as a String value.</span></span> <span data-ttu-id="a9c31-189">(このメッセージのスキーマは ReceiveIdoc 操作から確認できます。)</span><span class="sxs-lookup"><span data-stu-id="a9c31-189">(The schema for this message can be seen from the ReceiveIdoc operation).</span></span> <span data-ttu-id="a9c31-190">XML メッセージが生成されます、 \<idocData\>タグ。</span><span class="sxs-lookup"><span data-stu-id="a9c31-190">This yields an XML message with the \<idocData\> tag.</span></span>  
  
- <span data-ttu-id="a9c31-191">場合は、メッセージ スキーマである"Rfc"に設定では、受信した IDOC のバージョンに応じて RFC 操作 IDOC_INBOUND_ASYNCHRONOUS または INBOUND_IDOC_PROCESS、RFC (または tRFC) スキーマと一致します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-191">If set to "Rfc", the message schema matches the RFC (or tRFC) schema for the RFC operations IDOC_INBOUND_ASYNCHRONOUS or INBOUND_IDOC_PROCESS, depending on the incoming IDOC version.</span></span> <span data-ttu-id="a9c31-192">このバインドのプロパティを指定する場合は、IDOC を受信する IDOC_INBOUND_ASYNCHRONOUS または INBOUND_IDOC_PROCESS RFC を使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a9c31-192">If you specify this binding property you should use the IDOC_INBOUND_ASYNCHRONOUS or INBOUND_IDOC_PROCESS RFC to receive the IDOC.</span></span> <span data-ttu-id="a9c31-193">最初の 2 つのオプションで、アダプターは、この RFC を内部的に使用します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-193">In the first two options, the adapter internally uses this RFC.</span></span> <span data-ttu-id="a9c31-194">このオプションで明示的に IDOC を受信するのにこの RFC を使用します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-194">In this option, you explicitly use this RFC to receive an IDOC.</span></span>  
  
  <span data-ttu-id="a9c31-195">IDOC を受信するために使用する操作は、アダプターによって出力される IDOC データの形式に一致する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a9c31-195">The operation that you use to receive an IDOC must match the format of the IDOC data emitted by the adapter.</span></span> <span data-ttu-id="a9c31-196">次の表では、IDOC を SAP から受信できるさまざまな組み合わせの概要を示します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-196">The following table provides a summary of the different combinations in which you can receive an IDOC from SAP.</span></span>  
  
|<span data-ttu-id="a9c31-197">使用して、IDOC を受信するには</span><span class="sxs-lookup"><span data-stu-id="a9c31-197">To receive an IDOC using</span></span>|<span data-ttu-id="a9c31-198">ReceiveIDOCFormat バインディング プロパティを設定するには</span><span class="sxs-lookup"><span data-stu-id="a9c31-198">Set the binding property ReceiveIDOCFormat to</span></span>|  
|------------------------------|---------------------------------------------------|  
|<span data-ttu-id="a9c31-199">**受信**操作</span><span class="sxs-lookup"><span data-stu-id="a9c31-199">**Receive** operation</span></span>|<span data-ttu-id="a9c31-200">型指定あり</span><span class="sxs-lookup"><span data-stu-id="a9c31-200">Typed</span></span>|  
|<span data-ttu-id="a9c31-201">**ReciveIdoc**操作</span><span class="sxs-lookup"><span data-stu-id="a9c31-201">**ReciveIdoc** operation</span></span>|<span data-ttu-id="a9c31-202">String</span><span class="sxs-lookup"><span data-stu-id="a9c31-202">String</span></span>|  
|<span data-ttu-id="a9c31-203">IDOC_INBOUND_ASYNCHRONOUS RFC</span><span class="sxs-lookup"><span data-stu-id="a9c31-203">IDOC_INBOUND_ASYNCHRONOUS RFC</span></span>|<span data-ttu-id="a9c31-204">Rfc</span><span class="sxs-lookup"><span data-stu-id="a9c31-204">Rfc</span></span>|  
|<span data-ttu-id="a9c31-205">INBOUND_IDOC_PROCESS RFC</span><span class="sxs-lookup"><span data-stu-id="a9c31-205">INBOUND_IDOC_PROCESS RFC</span></span>|<span data-ttu-id="a9c31-206">Rfc</span><span class="sxs-lookup"><span data-stu-id="a9c31-206">Rfc</span></span>|  
  
 <span data-ttu-id="a9c31-207">別のバインド プロパティ**PadReceivedIdocsWithSpaces**受信した IDOC を空白で埋めるときに省略可能なフィールドの受信に必要な形式は"String"です。</span><span class="sxs-lookup"><span data-stu-id="a9c31-207">Another binding property **PadReceivedIdocsWithSpaces** pads the received IDOC with white spaces for optional fields when receive format expected is “String”.</span></span> <span data-ttu-id="a9c31-208">これにより、アダプターの以前のバージョンを使用して受信した IDOC データ形式との互換性ができます。</span><span class="sxs-lookup"><span data-stu-id="a9c31-208">This enables compatibility with the IDOC data format received using the previous version of the adapter.</span></span>  
  
 <span data-ttu-id="a9c31-209">バインド プロパティの詳細については、[mySAP Business Suite バインド プロパティの BizTalk アダプターについて](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a9c31-209">For more information about binding properties, see [Read about BizTalk Adapter for mySAP Business Suite Binding Properties](../../adapters-and-accelerators/adapter-sap/read-about-biztalk-adapter-for-mysap-business-suite-binding-properties.md).</span></span>  
  
 <span data-ttu-id="a9c31-210">詳細については。</span><span class="sxs-lookup"><span data-stu-id="a9c31-210">For more information about:</span></span>  
  
-   <span data-ttu-id="a9c31-211">BizTalk Server を使用して SAP システムから IDOC の受信を参照してください[を使用して BizTalk Server での SAP からの Idoc の受信](../../adapters-and-accelerators/adapter-sap/receive-idocs-from-sap-using-biztalk-server.md)します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-211">Receiving an IDOC from an SAP system using BizTalk Server, see [Receive IDOCs from SAP by Using BizTalk Server](../../adapters-and-accelerators/adapter-sap/receive-idocs-from-sap-using-biztalk-server.md).</span></span>  
  
-   <span data-ttu-id="a9c31-212">BizTalk Server を使用してトランザクション コンテキストでの SAP システムから IDOC を受信するを参照してください[を使用して BizTalk Server でのトランザクション コンテキストでの SAP からの Idoc の受信](../../adapters-and-accelerators/adapter-sap/receive-idocs-from-sap-in-a-transactional-context-using-biztalk-server.md)します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-212">Receiving an IDOC from an SAP system in a transactional context using BizTalk Server, see [Receive IDOCs from SAP in a Transactional Context by Using BizTalk Server](../../adapters-and-accelerators/adapter-sap/receive-idocs-from-sap-in-a-transactional-context-using-biztalk-server.md).</span></span>  
  
-   <span data-ttu-id="a9c31-213">メッセージの構造と IDOC を受信するための SOAP アクションを参照してください[IDOC 操作のメッセージ スキーマ](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md)します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-213">Message structures and SOAP action for receiving an IDOC, see [Message Schemas for IDOC Operations](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md).</span></span>  
  
##  <a name="BKMK_Authorize"></a> <span data-ttu-id="a9c31-214">SAP の送信を使用するための承認または受信操作</span><span class="sxs-lookup"><span data-stu-id="a9c31-214">SAP Authorization for Using Send or Receive Operations</span></span>  
 <span data-ttu-id="a9c31-215">使用すると、**送信**または**受信**送信または厳密に型指定されたスキーマを使用して Idoc を受信する操作、[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]内部的にメタデータを取得する IDOCTYPE_READ_COMPLETE RFC を呼び出すIDOC します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-215">When you use the **Send** or **Receive** operations to send or receive IDOCs using a strongly-typed schema, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] internally invokes the IDOCTYPE_READ_COMPLETE RFC to retrieve the metadata for the IDOC.</span></span> <span data-ttu-id="a9c31-216">この RFC を呼び出すには、SAP で次の承認が必要です。</span><span class="sxs-lookup"><span data-stu-id="a9c31-216">Invoking this RFC requires the following authorization in SAP:</span></span>  
  
```  
Authorisation object S_IDOCDEFT, Fields:  
EDI_TCD, value 'WE30'  
ACTVT, value - 03 (display)  
EDI_DOC, value  *  
EDI_CIM, value *  
```  
  
 <span data-ttu-id="a9c31-217">SAP で SU01 トランザクションを使用すると、承認オブジェクトを追加します。</span><span class="sxs-lookup"><span data-stu-id="a9c31-217">You can use the SU01 transaction in SAP to add an authorization object.</span></span> <span data-ttu-id="a9c31-218">トランザクションに関する詳細については、SAP 管理者に問い合わせるか、SAP のマニュアルを参照してください。</span><span class="sxs-lookup"><span data-stu-id="a9c31-218">For more information about the transaction, contact your SAP administrator or refer to SAP documentation.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a9c31-219">参照</span><span class="sxs-lookup"><span data-stu-id="a9c31-219">See Also</span></span>  
 <span data-ttu-id="a9c31-220">[どのような操作は、アダプターを使用して実行しますか?](https://msdn.microsoft.com/library/cc185219(v=bts.10).aspx)</span><span class="sxs-lookup"><span data-stu-id="a9c31-220">[What Operations Can be Performed Using the Adapter?](https://msdn.microsoft.com/library/cc185219(v=bts.10).aspx)</span></span>