---
title: BizTalk Server を使用して SAP の Idoc を受信する |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- IDOCs, sample (receiving)
- IDOCs, business scenarios for receiving
- IDOCs, receiving from SAP using BizTalk Server
ms.assetid: b904bf07-1108-4ed3-8564-d83eaafff247
caps.latest.revision: 10
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 6673d6a35853ab240218c29afba50579c614135e
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65373086"
---
# <a name="receive-idocs-from-sap-using-biztalk-server"></a><span data-ttu-id="a4a23-102">BizTalk Server を使用して SAP の Idoc を受信します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-102">Receive IDOCs from SAP using BizTalk Server</span></span>
<span data-ttu-id="a4a23-103">IDOC の受信では、 [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] SAP からの特別な RFC 呼び出しを受信する RFC サーバーとして機能します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-103">Receiving an IDOC involves the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] to act as an RFC server to receive a special RFC call from SAP.</span></span> <span data-ttu-id="a4a23-104">SAP アダプターは、RFC サーバーまたは tRFC サーバーとして機能する Idoc を受信できます。</span><span class="sxs-lookup"><span data-stu-id="a4a23-104">The SAP adapter can receive IDOCs acting as an RFC server or a tRFC server.</span></span> <span data-ttu-id="a4a23-105">TRFC サーバーとして動作してアダプターを使用した IDOC の受信についての詳細については、次を参照してください。[を使用して BizTalk Server でのトランザクション コンテキストでの SAP からの Idoc の受信](../../adapters-and-accelerators/adapter-sap/receive-idocs-from-sap-in-a-transactional-context-using-biztalk-server.md)します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-105">For more information about receiving an IDOC with the adapter behaving as a tRFC server, see [Receive IDOCs from SAP in a Transactional Context by Using BizTalk Server](../../adapters-and-accelerators/adapter-sap/receive-idocs-from-sap-in-a-transactional-context-using-biztalk-server.md).</span></span>  

 <span data-ttu-id="a4a23-106">[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]サーフェスの Idoc を受信する 2 つの異なる操作。</span><span class="sxs-lookup"><span data-stu-id="a4a23-106">The [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] surfaces two different operations to receive IDOCs:</span></span>  

- <span data-ttu-id="a4a23-107">**受信**操作により厳密に型指定されたスキーマが Idoc を受信するアダプター。</span><span class="sxs-lookup"><span data-stu-id="a4a23-107">**Receive** operation enables adapter to receive IDOCs having a strongly-typed schema.</span></span>  

- <span data-ttu-id="a4a23-108">**ReceiveIdoc**操作により厳密に型指定のスキーマが Idoc を受信するアダプター。</span><span class="sxs-lookup"><span data-stu-id="a4a23-108">**ReceiveIdoc** operation enables adapter to receive IDOCs having a weakly-typed schema.</span></span> <span data-ttu-id="a4a23-109">この操作での XML メッセージの文字列としての Idoc の受信、 \<idocData\>タグ。</span><span class="sxs-lookup"><span data-stu-id="a4a23-109">This operation receives IDOCs as a string in an XML message under the \<idocData\> tag.</span></span>  

  <span data-ttu-id="a4a23-110">アダプター側での値を指定することができます、 **ReceiveIDocFormat**アダプターの受信が IDOC の形式を指定するプロパティをバインドします。</span><span class="sxs-lookup"><span data-stu-id="a4a23-110">On the adapter side, you can specify a value for the **ReceiveIDocFormat** binding property to specify the format of IDOC the adapter would receive.</span></span>  

- <span data-ttu-id="a4a23-111">**型指定された**厳密に型指定されたスキーマで Idoc を受信するが、アダプターを指定します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-111">**Typed** specifies the adapter will receive IDOCs with strongly-typed schema.</span></span> <span data-ttu-id="a4a23-112">これには、XML IDOC が生成されます。</span><span class="sxs-lookup"><span data-stu-id="a4a23-112">This yields an XML IDOC.</span></span>  

- <span data-ttu-id="a4a23-113">**文字列**厳密に型指定のスキーマで Idoc を受信するが、アダプターを指定します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-113">**String** specifies the adapter will receive IDOCs with weakly-typed schema.</span></span> <span data-ttu-id="a4a23-114">XML メッセージが生成されます、 \<idocData\>タグ。</span><span class="sxs-lookup"><span data-stu-id="a4a23-114">This yields an XML message with the \<idocData\> tag.</span></span>  

- <span data-ttu-id="a4a23-115">**Rfc**任意の形式で Idoc を受信するが、アダプターを指定します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-115">**Rfc** specifies the adapter will receive IDOCs in any format.</span></span>  

  <span data-ttu-id="a4a23-116">Idoc を受信するため、[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]も、オーケストレーションでアダプターのクライアントが使用できるメッセージ コンテキスト プロパティのセットをサポートしています。</span><span class="sxs-lookup"><span data-stu-id="a4a23-116">For receiving IDOCs, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] also supports a set of message context properties that adapter clients can use in the orchestrations.</span></span> <span data-ttu-id="a4a23-117">プロパティの一覧で、次を参照してください。[メッセージ コンテキスト プロパティの Idoc の受信を](../../adapters-and-accelerators/adapter-sap/message-context-properties-for-receiving-idocs.md)します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-117">For the list of properties, see [Message Context Properties for Receiving IDOCs](../../adapters-and-accelerators/adapter-sap/message-context-properties-for-receiving-idocs.md).</span></span>  

  <span data-ttu-id="a4a23-118">方法の詳細については[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]、SAP システムから Idoc を受信するサポートを参照してください[sap Idoc に対する操作](../../adapters-and-accelerators/adapter-sap/operations-on-idocs-in-sap.md)します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-118">For more information about how the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] supports receiving IDOCs from an SAP system, see [Operations on IDOCs in SAP](../../adapters-and-accelerators/adapter-sap/operations-on-idocs-in-sap.md).</span></span> <span data-ttu-id="a4a23-119">SOAP の構造の詳細については、IDOC を受信するメッセージを参照してください。 [IDOC 操作のメッセージ スキーマ](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md)します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-119">For more information about the structure of SOAP messages for receiving an IDOC, see [Message Schemas for IDOC Operations](../../adapters-and-accelerators/adapter-sap/message-schemas-for-idoc-operations.md).</span></span>  

## <a name="biztalk-scenarios-for-receiving-idocs-from-an-sap-system"></a><span data-ttu-id="a4a23-120">SAP システムから Idoc を受信するための BizTalk シナリオ</span><span class="sxs-lookup"><span data-stu-id="a4a23-120">BizTalk Scenarios for Receiving IDOCs from an SAP System</span></span>  
 <span data-ttu-id="a4a23-121">次の表は、SAP システムから Idoc を受信するため、BizTalk の主なシナリオを示します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-121">The following table provides key BizTalk scenarios for receiving IDOCs from an SAP system:</span></span>  


| <span data-ttu-id="a4a23-122">SAP からアダプターへの入力</span><span class="sxs-lookup"><span data-stu-id="a4a23-122">Input to Adapter from SAP</span></span> |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <span data-ttu-id="a4a23-123">BizTalk 処理</span><span class="sxs-lookup"><span data-stu-id="a4a23-123">BizTalk Processing</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |            <span data-ttu-id="a4a23-124">[出力]</span><span class="sxs-lookup"><span data-stu-id="a4a23-124">Output</span></span>             |
|---------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|
| <span data-ttu-id="a4a23-125">(TRFC インターフェイス) を使用して IDOC</span><span class="sxs-lookup"><span data-stu-id="a4a23-125">IDOC (via tRFC interface)</span></span> |                                                                                                                                                                                                                                                                                                                                           <span data-ttu-id="a4a23-126">**メタデータ デザイン時**</span><span class="sxs-lookup"><span data-stu-id="a4a23-126">**Metadata Design Time**</span></span><br /><br /> <span data-ttu-id="a4a23-127">1.GenerateFlatFileCompatibleIdocSchema バインディング プロパティを設定する**True**します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-127">1.  Set the binding property GenerateFlatFileCompatibleIdocSchema to **True**.</span></span><br /><span data-ttu-id="a4a23-128">2.スキーマを生成、**受信**操作を使用して特定 IDOC の[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-128">2.  Generate the schema for the **Receive** operation for a specific IDOC using [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span><br /><span data-ttu-id="a4a23-129">3.ReceiveIdocFormat バインディング プロパティを設定する**型指定された**します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-129">3.  Set the binding property ReceiveIdocFormat to **Typed**.</span></span><br /><br /> <span data-ttu-id="a4a23-130">**オーケストレーションのデザイン時**</span><span class="sxs-lookup"><span data-stu-id="a4a23-130">**Orchestration Design Time**</span></span><br /><br /> <span data-ttu-id="a4a23-131">1.XML の IDOC を受信します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-131">1.  Receive XML IDOC.</span></span><br /><span data-ttu-id="a4a23-132">2.フラット ファイル IDOC を XML に変換するのにには、フラット ファイル アセンブラーを使用します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-132">2.  Use flat-file assembler to convert XML IDOC to flat-file.</span></span>                                                                                                                                                                                                                                                                                                                                           |        <span data-ttu-id="a4a23-133">フラット ファイル IDOC</span><span class="sxs-lookup"><span data-stu-id="a4a23-133">Flat-file IDOC</span></span>         |
| <span data-ttu-id="a4a23-134">(TRFC インターフェイス) を使用して IDOC</span><span class="sxs-lookup"><span data-stu-id="a4a23-134">IDOC (via tRFC interface)</span></span> |                                                                                                                                                                                                                                                                                                                                                                             <span data-ttu-id="a4a23-135">**メタデータ デザイン時**</span><span class="sxs-lookup"><span data-stu-id="a4a23-135">**Metadata Design Time**</span></span><br /><br /> <span data-ttu-id="a4a23-136">1.GenerateFlatFileCompatibleIdocSchema バインディング プロパティを設定する**True**します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-136">1.  Set the binding property GenerateFlatFileCompatibleIdocSchema to **True**.</span></span><br /><span data-ttu-id="a4a23-137">2.スキーマを生成、**受信**操作を使用して特定 IDOC の[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-137">2.  Generate the schema for the **Receive** operation for a specific IDOC using [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span><br /><span data-ttu-id="a4a23-138">3.ReceiveIdocFormat バインディング プロパティを設定する**型指定された**します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-138">3.  Set the binding property ReceiveIdocFormat to **Typed**.</span></span><br /><br /> <span data-ttu-id="a4a23-139">**オーケストレーションのデザイン時**</span><span class="sxs-lookup"><span data-stu-id="a4a23-139">**Orchestration Design-Time**</span></span><br /><br /> <span data-ttu-id="a4a23-140">-XML の IDOC を受信します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-140">- Receive XML IDOC.</span></span>                                                                                                                                                                                                                                                                                                                                                                              |           <span data-ttu-id="a4a23-141">XML の IDOC</span><span class="sxs-lookup"><span data-stu-id="a4a23-141">XML IDOC</span></span>            |
| <span data-ttu-id="a4a23-142">(TRFC インターフェイス) を使用して IDOC</span><span class="sxs-lookup"><span data-stu-id="a4a23-142">IDOC (via tRFC interface)</span></span> | <span data-ttu-id="a4a23-143">**メタデータ デザイン時**</span><span class="sxs-lookup"><span data-stu-id="a4a23-143">**Metadata Design Time**</span></span><br /><br /> <span data-ttu-id="a4a23-144">1.GenerateFlatFileCompatibleIdocSchema バインディング プロパティを設定する**True**します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-144">1.  Set the binding property GenerateFlatFileCompatibleIdocSchema to **True**.</span></span><br /><span data-ttu-id="a4a23-145">2.スキーマを生成、**受信**操作を使用して特定 IDOC の[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-145">2.  Generate the schema for the **Receive** operation for a specific IDOC using [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span><br /><span data-ttu-id="a4a23-146">3.ReceiveIdocFormat バインディング プロパティを設定する**文字列**します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-146">3.  Set the binding property ReceiveIdocFormat to **String**.</span></span><br /><br /> <span data-ttu-id="a4a23-147">**オーケストレーションのデザイン時**</span><span class="sxs-lookup"><span data-stu-id="a4a23-147">**Orchestration Design Time**</span></span><br /><br /> <span data-ttu-id="a4a23-148">1.受信 XML メッセージをフラット ファイル IDOC で\<idocData\>タグ。</span><span class="sxs-lookup"><span data-stu-id="a4a23-148">1.  Receive XML message with flat-file IDOC in \<idocData\> tag.</span></span><br /><span data-ttu-id="a4a23-149">2.受信ポートの構成で、WCF アダプターの XPath のサポートを使用して、XML メッセージからフラット ファイル IDoc を抽出します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-149">2.  Use the WCF adapter’s XPath support in the receive port configuration to extract the flat-file IDoc from the XML message.</span></span> <span data-ttu-id="a4a23-150">以下に例を示します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-150">For example:</span></span><br />     `/*[local-name()='ReceiveIdoc']/*[local-name()='idocData']`<br /><span data-ttu-id="a4a23-151">3.XML の IDOC フラット ファイル IDOC に変換するのにには、フラット ファイル逆アセンブラーを使用します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-151">3.  Use flat-file disassembler to convert flat-file IDOC to XML IDOC.</span></span><br /><br /> <span data-ttu-id="a4a23-152">**重要な**、new を使用して Idoc を受信するのにはこの方法を使用できる WCF ベース[!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)]し、既存の BizTalk SAP アダプターからの Idoc の受信に書き込まれた既存の BizTalk プロジェクトに直接適用します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-152">**Important** This approach can be used to receive IDOCs using the new WCF-based [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] and directly apply them in an existing BizTalk project written to receive IDOCs from the existing BizTalk SAP adapter.</span></span> <span data-ttu-id="a4a23-153">これは、また、バージョン番号未満のリリース番号 (SYSREL) Idoc を受信するための推奨アプローチです。</span><span class="sxs-lookup"><span data-stu-id="a4a23-153">This is also the recommended approach to receive IDOCs with version number less than the release number (SYSREL).</span></span> |           <span data-ttu-id="a4a23-154">XML の IDOC</span><span class="sxs-lookup"><span data-stu-id="a4a23-154">XML IDOC</span></span>            |
| <span data-ttu-id="a4a23-155">(TRFC インターフェイス) を使用して IDOC</span><span class="sxs-lookup"><span data-stu-id="a4a23-155">IDOC (via tRFC interface)</span></span> |                                                                                                                                                                                                                                                                                                                                                                                     <span data-ttu-id="a4a23-156">**メタデータ デザイン時**</span><span class="sxs-lookup"><span data-stu-id="a4a23-156">**Metadata Design Time**</span></span><br /><br /> <span data-ttu-id="a4a23-157">1.スキーマを生成、 **ReceiveIdoc**操作を使用して IDOC ノード[!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-157">1.  Generate the schema for the **ReceiveIdoc** operation from the IDOC node using [!INCLUDE[consumeadapterservshort](../../includes/consumeadapterservshort-md.md)].</span></span><br /><span data-ttu-id="a4a23-158">2.ReceiveIdocFormat バインディング プロパティを設定する**文字列**します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-158">2.  Set the binding property ReceiveIdocFormat to **String**.</span></span><br /><br /> <span data-ttu-id="a4a23-159">**オーケストレーションのデザイン時**</span><span class="sxs-lookup"><span data-stu-id="a4a23-159">**Orchestration Design Time**</span></span><br /><br /> <span data-ttu-id="a4a23-160">-文字列として表される IDOC と XML メッセージが表示される、 \<idocData\>タグ。</span><span class="sxs-lookup"><span data-stu-id="a4a23-160">- Receive XML message with the IDOC represented as a string in the \<idocData\> tag.</span></span>                                                                                                                                                                                                                                                                                                                                                                                     | <span data-ttu-id="a4a23-161">XML メッセージのフラット ファイル IDOC</span><span class="sxs-lookup"><span data-stu-id="a4a23-161">Flat-file IDOC in XML message</span></span> |

## <a name="how-to-receive-an-idoc-from-an-sap-system"></a><span data-ttu-id="a4a23-162">SAP システムから IDOC を受信する方法は?</span><span class="sxs-lookup"><span data-stu-id="a4a23-162">How to Receive an IDOC from an SAP System?</span></span>  
 <span data-ttu-id="a4a23-163">使用して SAP システムでの操作を実行する[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]で説明されている手順のタスクが含まれます[SAP アプリケーションを作成する構成要素](../../adapters-and-accelerators/adapter-sap/building-blocks-to-create-sap-applications.md)します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-163">Performing an operation on an SAP system using [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] involves procedural tasks described in [Building blocks to create SAP applications](../../adapters-and-accelerators/adapter-sap/building-blocks-to-create-sap-applications.md).</span></span> <span data-ttu-id="a4a23-164">これらのタスクは、SAP システムから IDOC を受信するには。</span><span class="sxs-lookup"><span data-stu-id="a4a23-164">To receive an IDOC from an SAP system, these tasks are:</span></span>  

1. <span data-ttu-id="a4a23-165">BizTalk プロジェクトを作成し、SAP システムを起動する IDOC のスキーマを生成します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-165">Create a BizTalk project and generate schema for the IDOC you want to invoke in the SAP system.</span></span> <span data-ttu-id="a4a23-166">スキーマの生成中にことを必要なバインドのプロパティを設定することを確認して、前の表に記載されています。</span><span class="sxs-lookup"><span data-stu-id="a4a23-166">While generating the schema make sure you set the required binding properties, as listed in the previous table.</span></span> <span data-ttu-id="a4a23-167">バインドのプロパティを設定する方法については、次を参照してください。 [SAP アダプターのバインドのプロパティを構成する](../../adapters-and-accelerators/adapter-sap/configure-the-binding-properties-for-the-sap-adapter.md)します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-167">For instructions on how to set the binding properties, see [Configure the binding properties for the SAP adapter](../../adapters-and-accelerators/adapter-sap/configure-the-binding-properties-for-the-sap-adapter.md).</span></span>  

2. <span data-ttu-id="a4a23-168">SAP システムからメッセージを送受信するための BizTalk プロジェクトでは、メッセージを作成します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-168">Create messages in the BizTalk project for sending and receiving messages from the SAP system.</span></span>  

3. <span data-ttu-id="a4a23-169">SAP システムから IDOC を受信するオーケストレーションを作成します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-169">Create an orchestration to receive an IDOC from an SAP system.</span></span>  

4. <span data-ttu-id="a4a23-170">ビルドし、BizTalk プロジェクトを配置します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-170">Build and deploy the BizTalk project.</span></span>  

5. <span data-ttu-id="a4a23-171">BizTalk 物理を作成してアプリケーションの送信および受信ポートを構成します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-171">Configure the BizTalk application by creating physical send and receive ports.</span></span>  

6. <span data-ttu-id="a4a23-172">BizTalk アプリケーションを起動します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-172">Start the BizTalk application.</span></span>  

   <span data-ttu-id="a4a23-173">このトピックでは、これらのタスクを実行する手順を説明します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-173">This topic provides instructions to perform these tasks.</span></span>  

## <a name="samples-based-on-this-topic"></a><span data-ttu-id="a4a23-174">このトピックに基づくサンプル</span><span class="sxs-lookup"><span data-stu-id="a4a23-174">Samples Based On This Topic</span></span>  
 <span data-ttu-id="a4a23-175">サンプル、ReceiveIDOC、このトピックに基づく ReceiveIDOC_SYSREL も付属している、[!INCLUDE[adapterpacknoversion](../../includes/adapterpacknoversion-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-175">Samples, ReceiveIDOC and ReceiveIDOC_SYSREL, based on this topic are also provided with the [!INCLUDE[adapterpacknoversion](../../includes/adapterpacknoversion-md.md)].</span></span> <span data-ttu-id="a4a23-176">詳細については、次を参照してください。 [SAP アダプターのサンプル](../../adapters-and-accelerators/adapter-sap/samples-for-the-sap-adapter.md)します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-176">For more information, see [Samples for the SAP adapter](../../adapters-and-accelerators/adapter-sap/samples-for-the-sap-adapter.md).</span></span>  

## <a name="generating-schema"></a><span data-ttu-id="a4a23-177">スキーマを生成します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-177">Generating Schema</span></span>  
 <span data-ttu-id="a4a23-178">スキーマを生成する必要があります、*受信*の操作、 *ORDERS03 します。V3.620* IDOC、 */IDOC/ORDERS/ORDERS03*ノード。</span><span class="sxs-lookup"><span data-stu-id="a4a23-178">You must generate schema for the *Receive* operation of the *ORDERS03.V3.620* IDOC under the */IDOC/ORDERS/ORDERS03* node.</span></span> <span data-ttu-id="a4a23-179">参照してください[参照、検索と SAP の IDOC 操作のメタデータを get](../../adapters-and-accelerators/adapter-sap/browse-search-and-get-metadata-for-idoc-operations-in-sap.md)特定 IDOC のスキーマを生成する方法の詳細について。</span><span class="sxs-lookup"><span data-stu-id="a4a23-179">See [Browse, search and get Metadata for IDOC Operations in SAP](../../adapters-and-accelerators/adapter-sap/browse-search-and-get-metadata-for-idoc-operations-in-sap.md) for instructions on how to generate schema for a particular IDOC.</span></span> <span data-ttu-id="a4a23-180">スキーマを生成するときにも、次のプロパティを設定する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="a4a23-180">While generating the schema, you might want to set the following properties as well:</span></span>  

-   <span data-ttu-id="a4a23-181">*GenerateFlatFileCompatibleIDoc* – 生成\<appinfo\>タグを BizTalk フラット ファイル パーサーは、フラット ファイル Idoc をサポートするために BizTalk のシナリオで使用できるようにします。</span><span class="sxs-lookup"><span data-stu-id="a4a23-181">*GenerateFlatFileCompatibleIDoc* –Generates \<appinfo\> tags so that the BizTalk flat-file parser can be used in BizTalk scenarios to support flat-file IDOCs.</span></span>  

-   <span data-ttu-id="a4a23-182">*FlatFileSegmentIndicator* – 場合を示します、IDOC スキーマ\<appinfo\>タグは、セグメントの定義名またはセグメントの型名を含める必要があります。</span><span class="sxs-lookup"><span data-stu-id="a4a23-182">*FlatFileSegmentIndicator* – Indicates if the IDOC schema \<appinfo\> tags should contain segment definition names or segment type names.</span></span> <span data-ttu-id="a4a23-183">これは、SAP とは、フラット ファイル IDOC の送信/受信、使用を希望の場合に適用されます。</span><span class="sxs-lookup"><span data-stu-id="a4a23-183">This is applicable when a used wishes to send/receive a flat-file IDOC to/from SAP.</span></span> <span data-ttu-id="a4a23-184">場合、 *GenerateFlatFileCompatibleIDoc*を false に設定し、 *FlatFileSegmentIndicator*プロパティのバインドは無視されます。</span><span class="sxs-lookup"><span data-stu-id="a4a23-184">If the *GenerateFlatFileCompatibleIDoc* is set to false, then *FlatFileSegmentIndicator* binding property is ignored.</span></span>  

> [!IMPORTANT]
>  <span data-ttu-id="a4a23-185">着信 IDOC のスキーマを生成するため、選択して確認**サービス (受信操作)** から、**コントラクト型を選択します**ドロップダウン リストで、[!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-185">Because you are generating the schema for an inbound IDOC call, make sure you select **Service (Inbound operation)** from the **Select contract type** drop-down list in the [!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)].</span></span>  

## <a name="defining-messages-and-message-types"></a><span data-ttu-id="a4a23-186">メッセージおよびメッセージの種類を定義します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-186">Defining Messages and Message Types</span></span>  
 <span data-ttu-id="a4a23-187">以前に生成したスキーマには、オーケストレーション内のメッセージに必要な「型」について説明します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-187">The schema that you generated earlier describes the "types" required for the messages in the orchestration.</span></span> <span data-ttu-id="a4a23-188">メッセージは、通常、対象の型が、対応するスキーマで定義されている、変数です。</span><span class="sxs-lookup"><span data-stu-id="a4a23-188">A message is typically a variable, the type for which is defined by the corresponding schema.</span></span> <span data-ttu-id="a4a23-189">BizTalk プロジェクトのオーケストレーションからメッセージを最初の手順で生成したスキーマをリンクする必要があります。</span><span class="sxs-lookup"><span data-stu-id="a4a23-189">You must link the schema you generated in the first step to the messages from the Orchestration view of the BizTalk project.</span></span>  

 <span data-ttu-id="a4a23-190">このトピックでは、2 つのメッセージを作成する必要があります: 応答を送信する他の SAP システムから IDOC を受信する 1 つ。</span><span class="sxs-lookup"><span data-stu-id="a4a23-190">For this topic, you must create two messages—one to receive an IDOC from the SAP system and the other to send a response.</span></span>  

 <span data-ttu-id="a4a23-191">メッセージを作成し、スキーマにリンクするには、次の手順に従います。</span><span class="sxs-lookup"><span data-stu-id="a4a23-191">Perform the following steps to create messages and link them to the schema:</span></span>  

#### <a name="to-create-messages-and-link-to-schema"></a><span data-ttu-id="a4a23-192">メッセージを作成し、スキーマにリンクするには</span><span class="sxs-lookup"><span data-stu-id="a4a23-192">To create messages and link to schema</span></span>  

1.  <span data-ttu-id="a4a23-193">新しいオーケストレーションを BizTalk プロジェクトに追加します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-193">Add a new orchestration to the BizTalk project.</span></span>  

2.  <span data-ttu-id="a4a23-194">オーケストレーションの種類を BizTalk プロジェクトを開くまだ開いていない場合。</span><span class="sxs-lookup"><span data-stu-id="a4a23-194">Open the orchestration view the BizTalk project, if not already open.</span></span> <span data-ttu-id="a4a23-195">をクリックして**ビュー**、 をポイント**その他の Windows**、 をクリック**オーケストレーション**します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-195">Click **View**, point to **Other Windows**, and click **Orchestration View**.</span></span>  

3.  <span data-ttu-id="a4a23-196">**オーケストレーション**、右クリック**メッセージ**、順にクリックします**新しいメッセージ**します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-196">In the **Orchestration View**, right-click **Messages**, and then click **New Message**.</span></span>  

4.  <span data-ttu-id="a4a23-197">右クリックし、新規メッセージを作成および選択**プロパティ ウィンドウ**します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-197">Right-click the newly create message and select **Properties Window**.</span></span>  

5.  <span data-ttu-id="a4a23-198">**プロパティ**ウィンドウ **[message_1]** 次の操作を行います。</span><span class="sxs-lookup"><span data-stu-id="a4a23-198">In the **Properties** pane for **Message_1**, do the following:</span></span>  

    |<span data-ttu-id="a4a23-199">プロパティ</span><span class="sxs-lookup"><span data-stu-id="a4a23-199">Use this</span></span>|<span data-ttu-id="a4a23-200">目的</span><span class="sxs-lookup"><span data-stu-id="a4a23-200">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="a4a23-201">[Identifier]</span><span class="sxs-lookup"><span data-stu-id="a4a23-201">Identifier</span></span>|<span data-ttu-id="a4a23-202">型**要求**します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-202">Type **Request**.</span></span>|  
    |<span data-ttu-id="a4a23-203">メッセージ型</span><span class="sxs-lookup"><span data-stu-id="a4a23-203">Message Type</span></span>|<span data-ttu-id="a4a23-204">ドロップダウン リストから展開**スキーマ**、選択と*ReceiveIDOC.SAPBindingSchema2*ここで、 *ReceiveIDOC* BizTalk プロジェクトの名前を指定します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-204">From the drop-down list, expand **Schemas**, and select *ReceiveIDOC.SAPBindingSchema2*, where *ReceiveIDOC* is the name of your BizTalk project.</span></span> <span data-ttu-id="a4a23-205">*SAPBindingSchema2*は受信操作に対して生成されるスキーマです。</span><span class="sxs-lookup"><span data-stu-id="a4a23-205">*SAPBindingSchema2* is the schema generated for the Receive operation.</span></span>|  

6.  <span data-ttu-id="a4a23-206">新しいメッセージを作成する 2 の手順を繰り返します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-206">Repeat step 2 to create a new message.</span></span> <span data-ttu-id="a4a23-207">**プロパティ**ウィンドウで、新しいメッセージの場合は、次を実行します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-207">In the **Properties** pane for the new message, do the following:</span></span>  

    |<span data-ttu-id="a4a23-208">プロパティ</span><span class="sxs-lookup"><span data-stu-id="a4a23-208">Use this</span></span>|<span data-ttu-id="a4a23-209">目的</span><span class="sxs-lookup"><span data-stu-id="a4a23-209">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="a4a23-210">[Identifier]</span><span class="sxs-lookup"><span data-stu-id="a4a23-210">Identifier</span></span>|<span data-ttu-id="a4a23-211">型**応答**します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-211">Type **Response**.</span></span>|  
    |<span data-ttu-id="a4a23-212">メッセージ型</span><span class="sxs-lookup"><span data-stu-id="a4a23-212">Message Type</span></span>|<span data-ttu-id="a4a23-213">ドロップダウン リストから展開**スキーマ**、選択および*ReceiveIDOC.SAPBindingSchema3*します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-213">From the drop-down list, expand **Schemas**, and select *ReceiveIDOC.SAPBindingSchema3*.</span></span>|  

## <a name="setting-up-the-orchestration"></a><span data-ttu-id="a4a23-214">オーケストレーションのセットアップ</span><span class="sxs-lookup"><span data-stu-id="a4a23-214">Setting up the Orchestration</span></span>  
 <span data-ttu-id="a4a23-215">使用する BizTalk オーケストレーションを作成する必要があります[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]SAP システムから Idoc を受信するためです。</span><span class="sxs-lookup"><span data-stu-id="a4a23-215">You must create a BizTalk orchestration to use [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)] for receiving IDOCs from the SAP system.</span></span> <span data-ttu-id="a4a23-216">一般的なシナリオで、 [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] SAP システムから IDOC の呼び出しを受け取り、要求を処理し、SAP システムへの応答を渡します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-216">In a typical scenario, the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] receives an IDOC call from the SAP system, processes the request, and passes the response to the SAP system.</span></span> <span data-ttu-id="a4a23-217">オーケストレーションの一部として、これを実現するには、オーケストレーションを含める必要があります。</span><span class="sxs-lookup"><span data-stu-id="a4a23-217">To achieve this as part of an orchestration, the orchestration must contain:</span></span>  

- <span data-ttu-id="a4a23-218">双方向の受信ポート、SAP システムから Idoc を受信し、応答を送信します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-218">A two-way receive port to receive IDOCs from the SAP system and send the response.</span></span>  

- <span data-ttu-id="a4a23-219">送信し、受信図形。</span><span class="sxs-lookup"><span data-stu-id="a4a23-219">Send and Receive shapes.</span></span>  

- <span data-ttu-id="a4a23-220">メッセージの図形を作成し、その中の SAP システムに送信される応答を生成する、メッセージの割り当て図形。</span><span class="sxs-lookup"><span data-stu-id="a4a23-220">Construct Message shape, and within that a Message Assignment shape, to generate a response to be sent to the SAP system.</span></span>  

  > [!NOTE]
  >  <span data-ttu-id="a4a23-221">オーケストレーションが含まれている場合は、双方向受信ポート (要求-応答) に SAP システムから Idoc を受信する、オーケストレーションは、SAP システムへの応答を送信する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a4a23-221">If the orchestration includes a two-way receive port (request-response) to receive IDOCs from the SAP system, the orchestration must send a response back to the SAP system.</span></span> <span data-ttu-id="a4a23-222">それ以外の場合は、SAP システムは、[次へ] の IDOC を送信しません。</span><span class="sxs-lookup"><span data-stu-id="a4a23-222">If not, the SAP system does not send the next IDOC.</span></span> <span data-ttu-id="a4a23-223">ただし場合は、一方向の受信ポート、オーケストレーションが SAP システムへの応答を送信する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="a4a23-223">However, if a one-way receive port, the orchestration does not have to send a response to the SAP system.</span></span>  

- <span data-ttu-id="a4a23-224">フォルダーに、SAP システムから受信した Idoc を送信する一方向の送信ポート。</span><span class="sxs-lookup"><span data-stu-id="a4a23-224">A one-way send port to send the IDOCs received from the SAP system to a folder.</span></span>  

  <span data-ttu-id="a4a23-225">SAP システムから IDOC を受信するためのサンプルのオーケストレーションは、ようになります。</span><span class="sxs-lookup"><span data-stu-id="a4a23-225">A sample orchestration for receiving an IDOC from an SAP system looks like:</span></span>  

  <span data-ttu-id="a4a23-226">![Idoc を受信するオーケストレーション](../../adapters-and-accelerators/adapter-sap/media/20d4f251-2474-4fd5-becd-2915f9efa81b.gif "20d4f251-2474-4fd5-becd-2915f9efa81b")</span><span class="sxs-lookup"><span data-stu-id="a4a23-226">![Orchestration to receive IDOCs](../../adapters-and-accelerators/adapter-sap/media/20d4f251-2474-4fd5-becd-2915f9efa81b.gif "20d4f251-2474-4fd5-becd-2915f9efa81b")</span></span>  

### <a name="adding-message-shapes"></a><span data-ttu-id="a4a23-227">メッセージの構築図形を追加します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-227">Adding Message Shapes</span></span>  
 <span data-ttu-id="a4a23-228">メッセージの構築図形のごとに、次のプロパティを指定することを確認します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-228">Make sure you specify the following properties for each of the message shapes.</span></span> <span data-ttu-id="a4a23-229">表示される名前、*図形*列は、メッセージの構築図形の名前、オーケストレーションの上に表示されます。</span><span class="sxs-lookup"><span data-stu-id="a4a23-229">The names listed in the *Shape* column are the names of the message shapes as displayed in the orchestration above.</span></span>  

|<span data-ttu-id="a4a23-230">図形</span><span class="sxs-lookup"><span data-stu-id="a4a23-230">Shape</span></span>|<span data-ttu-id="a4a23-231">図形の種類</span><span class="sxs-lookup"><span data-stu-id="a4a23-231">Shape Type</span></span>|<span data-ttu-id="a4a23-232">[プロパティ]</span><span class="sxs-lookup"><span data-stu-id="a4a23-232">Properties</span></span>|  
|-----------|----------------|----------------|  
|<span data-ttu-id="a4a23-233">ListenToSAP</span><span class="sxs-lookup"><span data-stu-id="a4a23-233">ListenToSAP</span></span>|<span data-ttu-id="a4a23-234">Receive</span><span class="sxs-lookup"><span data-stu-id="a4a23-234">Receive</span></span>|<span data-ttu-id="a4a23-235">-設定**名前**に*ListenToSAP*</span><span class="sxs-lookup"><span data-stu-id="a4a23-235">- Set **Name** to *ListenToSAP*</span></span><br /><br /> <span data-ttu-id="a4a23-236">-設定**アクティブ**に*は True。*</span><span class="sxs-lookup"><span data-stu-id="a4a23-236">- Set **Activate** to *True*</span></span>|  
|<span data-ttu-id="a4a23-237">SaveIDOC</span><span class="sxs-lookup"><span data-stu-id="a4a23-237">SaveIDOC</span></span>|<span data-ttu-id="a4a23-238">Send</span><span class="sxs-lookup"><span data-stu-id="a4a23-238">Send</span></span>|<span data-ttu-id="a4a23-239">-設定**名前**に*SaveIDOC*</span><span class="sxs-lookup"><span data-stu-id="a4a23-239">- Set **Name** to *SaveIDOC*</span></span>|  
|<span data-ttu-id="a4a23-240">SendResponse</span><span class="sxs-lookup"><span data-stu-id="a4a23-240">SendResponse</span></span>|<span data-ttu-id="a4a23-241">Send</span><span class="sxs-lookup"><span data-stu-id="a4a23-241">Send</span></span>|<span data-ttu-id="a4a23-242">-設定**名前**に*SendResponse*</span><span class="sxs-lookup"><span data-stu-id="a4a23-242">- Set **Name** to *SendResponse*</span></span>|  

### <a name="adding-construct-message-shape"></a><span data-ttu-id="a4a23-243">メッセージの構築図形を追加します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-243">Adding Construct Message Shape</span></span>  
 <span data-ttu-id="a4a23-244">オーケストレーション内では、応答を生成し、SAP システムに送信する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a4a23-244">Within the orchestration, you must generate a response and send it to the SAP system.</span></span> <span data-ttu-id="a4a23-245">これを行うには、メッセージの構築図形を追加する必要があり、内でメッセージの割り当ての図形をオーケストレーションにします。</span><span class="sxs-lookup"><span data-stu-id="a4a23-245">To do so, you must add a Construct Message shape and within that a Message Assignment shape to your orchestration.</span></span> <span data-ttu-id="a4a23-246">メッセージの割り当て図形では、SAP システムに送信される応答メッセージを生成するコードを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-246">The Message Assignment shape invokes code that generates a response message that is sent to the SAP system.</span></span> <span data-ttu-id="a4a23-247">メッセージの割り当て図形では、SAP システムに送信される応答のアクションも設定します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-247">The Message Assignment shape also sets the action for the response to be sent to the SAP system.</span></span>  

> [!IMPORTANT]
>  <span data-ttu-id="a4a23-248">オーケストレーションが含まれている場合は、双方向受信ポート (要求-応答) に SAP システムから Idoc を受信する、オーケストレーションは、SAP システムへの応答を送信する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a4a23-248">If the orchestration includes a two-way receive port (request-response) to receive IDOCs from the SAP system, the orchestration must send a response back to the SAP system.</span></span> <span data-ttu-id="a4a23-249">それ以外の場合は、SAP システムは、[次へ] の IDOC を送信しません。</span><span class="sxs-lookup"><span data-stu-id="a4a23-249">If not, the SAP system does not send the next IDOC.</span></span> <span data-ttu-id="a4a23-250">ただし場合は、一方向の受信ポート、オーケストレーションが SAP システムへの応答を送信する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="a4a23-250">However, if a one-way receive port, the orchestration does not have to send a response to the SAP system.</span></span>  

 <span data-ttu-id="a4a23-251">メッセージの構築図形で、設定、**メッセージ構築**プロパティを**応答**します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-251">For the construct message shape, set the **Message Constructed** property to **Response**.</span></span>  

 <span data-ttu-id="a4a23-252">応答を生成するコードは、BizTalk プロジェクトと同じ Visual Studio ソリューションの一部になります。</span><span class="sxs-lookup"><span data-stu-id="a4a23-252">The code to generate the response could be part of the same Visual Studio solution as your BizTalk project.</span></span> <span data-ttu-id="a4a23-253">応答メッセージを生成するためのサンプル コードは、次のように検索します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-253">A sample code for generating a response message looks like this.</span></span>  

```  
namespace IdocReceiveResponseMessageCreator  
{  
    public class IdocReceiveResponseMessageCreator  
    {  
        private static XmlDocument Message;  
        private static string XmlFileLocation;  
        private static string ResponseDoc;  

        public static XmlDocument XMLMessageCreator()  
        {  
            XmlFileLocation = "C:\\test\\in";  
            try  
            {  
                ResponseDoc = (Directory.GetFiles(XmlFileLocation, "*.xml", SearchOption.TopDirectoryOnly))[0];  
            }  
            catch (Exception ex)  
            {  
                Console.WriteLine("Trying to get XML from: " + XmlFileLocation);  
                Console.WriteLine("EXCEPTION: " + ex.ToString());  
                throw ex;  
            }  
            //Create Message From XML  
            Message = new XmlDocument();  
            Message.PreserveWhitespace = true;  
            Message.Load(ResponseDoc);  
            return Message;  
        }   
    }  
}  
```  

> [!NOTE]
>  <span data-ttu-id="a4a23-254">プロジェクトをビルドした後に IdocReceiveResponseMessageCreator.dll がプロジェクト ディレクトリに作成されます。</span><span class="sxs-lookup"><span data-stu-id="a4a23-254">After you build the project, IdocReceiveResponseMessageCreator.dll will be created in the project directory.</span></span> <span data-ttu-id="a4a23-255">この DLL は、グローバル アセンブリ キャッシュ (GAC) に追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a4a23-255">You must add this DLL to the global assembly cache (GAC).</span></span>  

 <span data-ttu-id="a4a23-256">メッセージの割り当て図形から次のコードを呼び出すと、SAP システムに送信する応答のアクションを設定するのには、次の式を追加します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-256">Add the following expression to invoke this code from the Message Assignment shape and to set the action for the response sent to the SAP system.</span></span> <span data-ttu-id="a4a23-257">式を追加するには、式エディターを開きますメッセージの割り当て図形をダブルクリックします。</span><span class="sxs-lookup"><span data-stu-id="a4a23-257">To add an expression, double-click the Message Assignment shape to open the Expression Editor.</span></span>  

```  
Response = IdocReceiveResponseMessageCreator.IdocReceiveResponseMessageCreator.XMLMessageCreator();  
Response(WCF.Action)= "http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS03//620/Receive/response";  
```  

> [!IMPORTANT]
>  <span data-ttu-id="a4a23-258">応答メッセージのアクションを明示的に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a4a23-258">You must explicitly set the action on the response message.</span></span> <span data-ttu-id="a4a23-259">アクションを設定しないと、WCF カスタム アダプターが"Response"要求された操作を追加することでのアクションのメッセージが到着します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-259">If you do not set the action, WCF-Custom adapter arrives at the action message by appending “Response” to the request action.</span></span> <span data-ttu-id="a4a23-260">そのため、応答メッセージのアクションを`http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS03//620/ReceiveResponse`します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-260">So, the action for the response message becomes `http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS03//620/ReceiveResponse`.</span></span> <span data-ttu-id="a4a23-261">ただし、sapBinding が必要ですが、応答アクションを追加して"/応答"例については、要求アクションに`http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS03//620/Receive/response`します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-261">However, the sapBinding expects the response action by appending “/response” to the request action, for example `http://Microsoft.LobServices.Sap/2007/03/Idoc/3/ORDERS03//620/Receive/response`.</span></span>  

### <a name="adding-ports"></a><span data-ttu-id="a4a23-262">ポートの追加</span><span class="sxs-lookup"><span data-stu-id="a4a23-262">Adding Ports</span></span>  
 <span data-ttu-id="a4a23-263">論理ポートの次のプロパティを指定することを確認します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-263">Make sure you specify the following properties for the logical port.</span></span> <span data-ttu-id="a4a23-264">名前、*ポート*列が、ポートの名前、オーケストレーションに表示されます。</span><span class="sxs-lookup"><span data-stu-id="a4a23-264">The name listed in the *Port* column is the name of the port as displayed in the orchestration.</span></span>  

|<span data-ttu-id="a4a23-265">Port</span><span class="sxs-lookup"><span data-stu-id="a4a23-265">Port</span></span>|<span data-ttu-id="a4a23-266">[プロパティ]</span><span class="sxs-lookup"><span data-stu-id="a4a23-266">Properties</span></span>|  
|----------|----------------|  
|<span data-ttu-id="a4a23-267">ReceiveIDOCPort</span><span class="sxs-lookup"><span data-stu-id="a4a23-267">ReceiveIDOCPort</span></span>|<span data-ttu-id="a4a23-268">-設定**識別子**に*ReceiveIDOCPort*</span><span class="sxs-lookup"><span data-stu-id="a4a23-268">- Set **Identifier** to *ReceiveIDOCPort*</span></span><br /><br /> <span data-ttu-id="a4a23-269">-設定**型**に*ReceiveIDOCPortType*</span><span class="sxs-lookup"><span data-stu-id="a4a23-269">- Set **Type** to *ReceiveIDOCPortType*</span></span><br /><br /> <span data-ttu-id="a4a23-270">-設定**通信パターン**に*要求-応答*</span><span class="sxs-lookup"><span data-stu-id="a4a23-270">- Set **Communication Pattern** to *Request-Response*</span></span><br /><br /> <span data-ttu-id="a4a23-271">-設定**通信方向**に*受信送信*</span><span class="sxs-lookup"><span data-stu-id="a4a23-271">- Set **Communication Direction** to *Receive-Send*</span></span>|  
|<span data-ttu-id="a4a23-272">GetIDOCPort</span><span class="sxs-lookup"><span data-stu-id="a4a23-272">GetIDOCPort</span></span>|<span data-ttu-id="a4a23-273">-設定**識別子**に*GetIDOCPort*</span><span class="sxs-lookup"><span data-stu-id="a4a23-273">- Set **Identifier** to *GetIDOCPort*</span></span><br /><br /> <span data-ttu-id="a4a23-274">-設定**型**に*GetIDOCPortType*</span><span class="sxs-lookup"><span data-stu-id="a4a23-274">- Set **Type** to *GetIDOCPortType*</span></span><br /><br /> <span data-ttu-id="a4a23-275">-設定**通信パターン**に*一方向*</span><span class="sxs-lookup"><span data-stu-id="a4a23-275">- Set **Communication Pattern** to *One-Way*</span></span><br /><br /> <span data-ttu-id="a4a23-276">-設定**通信方向**に*送信*</span><span class="sxs-lookup"><span data-stu-id="a4a23-276">- Set **Communication Direction** to *Send*</span></span>|  

> [!IMPORTANT]
>  <span data-ttu-id="a4a23-277">オーケストレーションが含まれている場合は、双方向受信ポート (要求-応答) に SAP システムから Idoc を受信する、オーケストレーションは、SAP システムへの応答を送信する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a4a23-277">If the orchestration includes a two-way receive port (request-response) to receive IDOCs from the SAP system, the orchestration must send a response back to the SAP system.</span></span> <span data-ttu-id="a4a23-278">それ以外の場合は、SAP システムは、[次へ] の IDOC を送信しません。</span><span class="sxs-lookup"><span data-stu-id="a4a23-278">If not, the SAP system does not send the next IDOC.</span></span>  

### <a name="adding-a-flat-file-assembler"></a><span data-ttu-id="a4a23-279">フラット ファイル アセンブラーを追加します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-279">Adding a Flat File Assembler</span></span>  
 <span data-ttu-id="a4a23-280">フラット ファイル IDOC の受信メッセージに変換するアセンブラーを追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a4a23-280">You must add an assembler to convert the incoming IDOC message to a flat file.</span></span>  

##### <a name="to-add-a-flat-file-assembler"></a><span data-ttu-id="a4a23-281">フラット ファイル アセンブラーを追加するには</span><span class="sxs-lookup"><span data-stu-id="a4a23-281">To add a flat file assembler</span></span>  

1.  <span data-ttu-id="a4a23-282">BizTalk プロジェクトを右クリックし、**追加**、選択および**新しい項目の**します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-282">Right-click the BizTalk project, point to **Add**, and select **New Item**.</span></span>  

2.  <span data-ttu-id="a4a23-283">ダイアログ ボックスで、次の操作を行います。</span><span class="sxs-lookup"><span data-stu-id="a4a23-283">From the dialog box, do the following:</span></span>  

    |<span data-ttu-id="a4a23-284">プロパティ</span><span class="sxs-lookup"><span data-stu-id="a4a23-284">Use this</span></span>|<span data-ttu-id="a4a23-285">目的</span><span class="sxs-lookup"><span data-stu-id="a4a23-285">To do this</span></span>|  
    |--------------|----------------|  
    |<span data-ttu-id="a4a23-286">カテゴリ</span><span class="sxs-lookup"><span data-stu-id="a4a23-286">Categories</span></span>|<span data-ttu-id="a4a23-287">パイプライン ファイル</span><span class="sxs-lookup"><span data-stu-id="a4a23-287">Pipeline Files</span></span>|  
    |<span data-ttu-id="a4a23-288">Visual Studio にインストールされたテンプレート</span><span class="sxs-lookup"><span data-stu-id="a4a23-288">Visual Studio installed templates</span></span>|<span data-ttu-id="a4a23-289">送信パイプライン</span><span class="sxs-lookup"><span data-stu-id="a4a23-289">Send Pipeline</span></span>|  
    |<span data-ttu-id="a4a23-290">名前</span><span class="sxs-lookup"><span data-stu-id="a4a23-290">Name</span></span>|<span data-ttu-id="a4a23-291">SendIDOC</span><span class="sxs-lookup"><span data-stu-id="a4a23-291">SendIDOC</span></span>|  

3.  <span data-ttu-id="a4a23-292">パイプライン デザイナーが開きます。</span><span class="sxs-lookup"><span data-stu-id="a4a23-292">This opens the Pipeline Designer.</span></span> <span data-ttu-id="a4a23-293">**BizTalk パイプライン コンポーネント**ツールボックス、ドラッグ、**フラット ファイル アセンブラー**パイプライン コンポーネントを**アセンブル**送信パイプラインのステージ。</span><span class="sxs-lookup"><span data-stu-id="a4a23-293">From the **BizTalk Pipeline Components** toolbox, drag the **Flat file assembler** pipeline component into the **Assemble** stage of the send pipeline.</span></span>  

4.  <span data-ttu-id="a4a23-294">**パイプライン コンポーネントのプロパティ**ビューの値を指定、**ドキュメント スキーマ**プロパティ。</span><span class="sxs-lookup"><span data-stu-id="a4a23-294">From the **Pipeline Component Properties** view, specify a value for the **Document Schema** property.</span></span> <span data-ttu-id="a4a23-295">ドロップダウン リストから作成スキーマを選択することを確認して、IDOC に対応する受信操作。</span><span class="sxs-lookup"><span data-stu-id="a4a23-295">From the drop-down make sure you select the schema corresponding to the IDOC receive operation.</span></span>  

## <a name="specify-messages-for-action-shapes-and-connect-to-ports"></a><span data-ttu-id="a4a23-296">アクション図形のメッセージを指定し、ポートに接続</span><span class="sxs-lookup"><span data-stu-id="a4a23-296">Specify Messages for Action Shapes and Connect to Ports</span></span>  
 <span data-ttu-id="a4a23-297">次の表には、プロパティとメッセージのアクション図形とポートにリンクすることを指定するために設定するには、その値を指定します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-297">The following table specifies the properties and their values to be set to specify messages for action shapes and linking them to the ports.</span></span> <span data-ttu-id="a4a23-298">表示される名前、*図形*列は、メッセージの構築図形の名前、オーケストレーションの上に表示されます。</span><span class="sxs-lookup"><span data-stu-id="a4a23-298">The names listed in the *Shape* column are the names of the message shapes as displayed in the orchestration above.</span></span>  

|<span data-ttu-id="a4a23-299">図形</span><span class="sxs-lookup"><span data-stu-id="a4a23-299">Shape</span></span>|<span data-ttu-id="a4a23-300">[プロパティ]</span><span class="sxs-lookup"><span data-stu-id="a4a23-300">Properties</span></span>|  
|-----------|----------------|  
|<span data-ttu-id="a4a23-301">ListenToSAP</span><span class="sxs-lookup"><span data-stu-id="a4a23-301">ListenToSAP</span></span>|<span data-ttu-id="a4a23-302">-設定**メッセージ**に*要求*</span><span class="sxs-lookup"><span data-stu-id="a4a23-302">- Set **Message** to *Request*</span></span><br /><br /> <span data-ttu-id="a4a23-303">-設定**操作**に*ReceiveIDOCPort.ReceiveIDOC.Request*</span><span class="sxs-lookup"><span data-stu-id="a4a23-303">- Set **Operation** to *ReceiveIDOCPort.ReceiveIDOC.Request*</span></span>|  
|<span data-ttu-id="a4a23-304">SaveIDOC</span><span class="sxs-lookup"><span data-stu-id="a4a23-304">SaveIDOC</span></span>|<span data-ttu-id="a4a23-305">-設定**メッセージ**に*要求*</span><span class="sxs-lookup"><span data-stu-id="a4a23-305">- Set **Message** to *Request*</span></span><br /><br /> <span data-ttu-id="a4a23-306">-設定**操作**に*GetIDOCPort.ReceiveIDOC.Request*</span><span class="sxs-lookup"><span data-stu-id="a4a23-306">- Set **Operation** to *GetIDOCPort.ReceiveIDOC.Request*</span></span>|  
|<span data-ttu-id="a4a23-307">SendResponse</span><span class="sxs-lookup"><span data-stu-id="a4a23-307">SendResponse</span></span>|<span data-ttu-id="a4a23-308">-設定**メッセージ**に*応答*</span><span class="sxs-lookup"><span data-stu-id="a4a23-308">- Set **Message** to *Response*</span></span><br /><br /> <span data-ttu-id="a4a23-309">-設定**操作**に*ReceiveIDOCPort.ReceiveIDOC.Response*</span><span class="sxs-lookup"><span data-stu-id="a4a23-309">- Set **Operation** to *ReceiveIDOCPort.ReceiveIDOC.Response*</span></span>|  

 <span data-ttu-id="a4a23-310">これらのプロパティを指定したら、メッセージの構築図形とポートが接続されているし、オーケストレーションが完了します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-310">After you have specified these properties, the message shapes and ports are connected and your orchestration is complete.</span></span>  

 <span data-ttu-id="a4a23-311">ここで、BizTalk ソリューションをビルドしに配置する必要があります、[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-311">You must now build the BizTalk solution and deploy it to a [!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="a4a23-312">詳細については、次を参照してください[のビルドとオーケストレーションの実行。](../../core/building-and-running-orchestrations.md)</span><span class="sxs-lookup"><span data-stu-id="a4a23-312">For more information, see [Building and Running Orchestrations](../../core/building-and-running-orchestrations.md)</span></span>

## <a name="configuring-the-biztalk-application"></a><span data-ttu-id="a4a23-313">BizTalk アプリケーションを構成します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-313">Configuring the BizTalk Application</span></span>  
 <span data-ttu-id="a4a23-314">先ほど作成したオーケストレーションが 下にある BizTalk プロジェクトを配置した後、**オーケストレーション**BizTalk Server 管理コンソール ウィンドウ。</span><span class="sxs-lookup"><span data-stu-id="a4a23-314">After you have deployed the BizTalk project, the orchestration you created earlier is listed under the **Orchestrations** pane in the BizTalk Server Administration console.</span></span> <span data-ttu-id="a4a23-315">BizTalk Server 管理コンソールを使用して、アプリケーションを構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a4a23-315">You must use the BizTalk Server Administration console to configure the application.</span></span> <span data-ttu-id="a4a23-316">アプリケーションを構成する方法の詳細については、次を参照してください。[アプリケーションを構成する方法](../../core/how-to-configure-an-application.md)します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-316">For more information about configuring an application, see [How to Configure an Application](../../core/how-to-configure-an-application.md).</span></span>

 <span data-ttu-id="a4a23-317">アプリケーションを構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a4a23-317">Configuring an application involves:</span></span>  

- <span data-ttu-id="a4a23-318">アプリケーションのホストを選択します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-318">Selecting a host for the application.</span></span>  

- <span data-ttu-id="a4a23-319">BizTalk Server 管理コンソールで物理ポートにオーケストレーションで作成したポートをマッピングします。</span><span class="sxs-lookup"><span data-stu-id="a4a23-319">Mapping the ports that you created in your orchestration to physical ports in the BizTalk Server Administration console.</span></span> <span data-ttu-id="a4a23-320">このオーケストレーションの次の操作を行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="a4a23-320">For this orchestration you must:</span></span>  

  - <span data-ttu-id="a4a23-321">送信場所と物理送信ポートを定義します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-321">Define send locations and physical send port.</span></span> <span data-ttu-id="a4a23-322">この場所は、SAP システムから Idoc が格納されます。</span><span class="sxs-lookup"><span data-stu-id="a4a23-322">This location will contain the IDOCs coming from the SAP system.</span></span>  

    > [!IMPORTANT]
    >  <span data-ttu-id="a4a23-323">XMLTransmit パイプラインのことを選択することを確認して***SendIDOC***します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-323">For the XMLTransmit pipeline, make sure you select ***SendIDOC***.</span></span> <span data-ttu-id="a4a23-324">BizTalk プロジェクトの一部としてこのパイプラインを作成したとします。</span><span class="sxs-lookup"><span data-stu-id="a4a23-324">You created this pipeline as part of the BizTalk project.</span></span>  

  - <span data-ttu-id="a4a23-325">WCF カスタム定義または WCF SAP 受信ポート。</span><span class="sxs-lookup"><span data-stu-id="a4a23-325">Define a WCF-Custom or WCF-SAP receive port.</span></span> <span data-ttu-id="a4a23-326">このポートは、SAP システムから受信 IDOC を受信し、オーケストレーションに渡します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-326">This port will receive an inbound IDOC from the SAP system and pass it on to the orchestration.</span></span> <span data-ttu-id="a4a23-327">このポートには、SAP システムへの応答も送信します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-327">This port also sends the response to the SAP system.</span></span> <span data-ttu-id="a4a23-328">ポートを作成する方法については、次を参照してください。 [SAP アダプターを物理ポートのバインドを手動で構成](../../adapters-and-accelerators/adapter-sap/manually-configure-a-physical-port-binding-to-the-sap-adapter.md)します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-328">For information about how to create ports, see [Manually configure a physical port binding to the SAP adapter](../../adapters-and-accelerators/adapter-sap/manually-configure-a-physical-port-binding-to-the-sap-adapter.md).</span></span>

    > [!IMPORTANT]
    >  <span data-ttu-id="a4a23-329">バインディングのプロパティを必ず**ReceiveIDocFormat**に設定されている**型指定された**します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-329">Make sure the binding property **ReceiveIDocFormat** is set to **Typed**.</span></span>  
    > 
    > [!IMPORTANT]
    >  <span data-ttu-id="a4a23-330">場合バインディング プロパティ**EnableBizTalkCompatibilityMode** BizTalk プロパティ スキーマ DLL を追加するかどうかを確認してください、true に設定されているため、 [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] BizTalk アプリケーションでは、アプリケーションのリソースとして、プロジェクトがデプロイされます。</span><span class="sxs-lookup"><span data-stu-id="a4a23-330">If the binding property **EnableBizTalkCompatibilityMode** is set to true, make sure you add the BizTalk property schema DLL for the [!INCLUDE[adaptersap_short](../../includes/adaptersap-short-md.md)] as a resource in your BizTalk application, that is, the application in which your project is deployed.</span></span> <span data-ttu-id="a4a23-331">リソースを追加する手順についてを参照してください。 [SAP アダプターを使用した運用上の問題のトラブルシューティングを行う](../../adapters-and-accelerators/adapter-sap/troubleshoot-operational-issues-with-the-sap-adapter.md)します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-331">For instructions on adding resources see [Troubleshoot Operational Issues with the SAP adapter](../../adapters-and-accelerators/adapter-sap/troubleshoot-operational-issues-with-the-sap-adapter.md).</span></span>  
    > 
    > [!NOTE]
    >  <span data-ttu-id="a4a23-332">使用して、スキーマの生成、[!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)]ポートとそれらのポートに設定するアクションに関する情報を含むバインド ファイルも作成されます。</span><span class="sxs-lookup"><span data-stu-id="a4a23-332">Generating the schema using the [!INCLUDE[consumeadapterservlong](../../includes/consumeadapterservlong-md.md)] also creates a binding file containing information about the ports and the actions to be set for those ports.</span></span> <span data-ttu-id="a4a23-333">(発信) の送信ポートを作成または (着信) 用のポートを受信する BizTalk 管理コンソールから、このバインド ファイルをインポートできます。</span><span class="sxs-lookup"><span data-stu-id="a4a23-333">You can import this binding file from the BizTalk Administration Console to create send ports (for outbound calls) or receive ports (for inbound calls).</span></span> <span data-ttu-id="a4a23-334">詳細については、次を参照してください。 [sap ポートのバインド ファイルを使用して物理的なポート バインドを構成する](../../adapters-and-accelerators/adapter-sap/configure-a-physical-port-binding-using-a-port-binding-file-to-sap.md)します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-334">For more information, see [Configure a physical port binding using a port binding file to SAP](../../adapters-and-accelerators/adapter-sap/configure-a-physical-port-binding-using-a-port-binding-file-to-sap.md).</span></span>

  <span data-ttu-id="a4a23-335">BizTalk アプリケーションに IdocReceiveResponseMessageCreator プロジェクトのアセンブリを追加することも必要があります。</span><span class="sxs-lookup"><span data-stu-id="a4a23-335">You must also add the assembly for the IdocReceiveResponseMessageCreator project to your BizTalk application.</span></span> <span data-ttu-id="a4a23-336">SAP システムに送信される応答を生成するには、このプロジェクトを作成したとします。</span><span class="sxs-lookup"><span data-stu-id="a4a23-336">You created this project to generate the response to be sent to the SAP system.</span></span> <span data-ttu-id="a4a23-337">そのためには次を行います。</span><span class="sxs-lookup"><span data-stu-id="a4a23-337">To do so:</span></span>  

1.  <span data-ttu-id="a4a23-338">右クリックし、バインドをインポートする BizTalk アプリケーションの下で、BizTalk Server 管理コンソールの左側にあるコンソール ツリーで**リソース**、 をポイント**追加**順にクリックします**BizTalk アセンブリ**します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-338">In the console tree on the left side of the BizTalk Server Administration console, under the BizTalk application where you imported the bindings, right-click **Resources**, point to **Add** and then click **BizTalk Assemblies**.</span></span>  

2.  <span data-ttu-id="a4a23-339">**リソースの追加** ダイアログ ボックスをクリックします**追加**IdocReceiveResponseMessageCreator.dll を含むフォルダーに移動します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-339">In the **Add Resources** dialog box, Click **Add** and navigate to the folder containing IdocReceiveResponseMessageCreator.dll.</span></span> <span data-ttu-id="a4a23-340">ファイルを選択し、をクリックし、**オープン**します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-340">Select the file and then click **Open**.</span></span>  

3.  <span data-ttu-id="a4a23-341">**リソースの追加**ダイアログ ボックスで、をクリックして**OK**。</span><span class="sxs-lookup"><span data-stu-id="a4a23-341">In the **Add Resources** dialog box, click **OK**.</span></span>  

## <a name="starting-the-application"></a><span data-ttu-id="a4a23-342">アプリケーションの起動</span><span class="sxs-lookup"><span data-stu-id="a4a23-342">Starting the Application</span></span>  
 <span data-ttu-id="a4a23-343">SAP システムから IDOC を受信するための BizTalk アプリケーションを起動する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a4a23-343">You must start the BizTalk application for receiving an IDOC from the SAP system.</span></span> <span data-ttu-id="a4a23-344">BizTalk アプリケーションを開始する手順については、次を参照してください。[オーケストレーションを開始する方法](../../core/how-to-start-an-orchestration.md)、または[アプリケーションを起動する方法](../../core/how-to-start-and-stop-a-biztalk-application.md)します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-344">For instructions on starting a BizTalk application, see [How to Start an Orchestration](../../core/how-to-start-an-orchestration.md), or [How to start an application](../../core/how-to-start-and-stop-a-biztalk-application.md).</span></span>

 <span data-ttu-id="a4a23-345">この段階で、ことを確認します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-345">At this stage, make sure:</span></span>  

-   <span data-ttu-id="a4a23-346">ファイルの場所を受信した IDOC を保存する FILE 送信ポートが実行されています。</span><span class="sxs-lookup"><span data-stu-id="a4a23-346">The FILE send port to save the incoming IDOC to a file location is running</span></span>  

-   <span data-ttu-id="a4a23-347">受信 Idoc を受信するポートの Wcf-custom または WCF SAP SAP からシステムが実行されています。</span><span class="sxs-lookup"><span data-stu-id="a4a23-347">The WCF-Custom or WCF-SAP receive port to receive IDOCs from the SAP system is running.</span></span>  

-   <span data-ttu-id="a4a23-348">操作の BizTalk オーケストレーションが実行されています。</span><span class="sxs-lookup"><span data-stu-id="a4a23-348">The BizTalk orchestration for the operation is running.</span></span>  

## <a name="executing-the-operation"></a><span data-ttu-id="a4a23-349">操作の実行</span><span class="sxs-lookup"><span data-stu-id="a4a23-349">Executing the Operation</span></span>  
 <span data-ttu-id="a4a23-350">アプリケーションを実行した後は、SAP システムを移動し、アダプターに IDOC を送信する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a4a23-350">After you run the application, you must go the SAP system and send an IDOC into the adapter.</span></span> <span data-ttu-id="a4a23-351">アダプターは、IDOC を受信し、オーケストレーションの一部として指定されたファイルの場所に保存します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-351">The adapter receives the IDOC and saves it to a file location specified as part of the orchestration.</span></span>  

## <a name="possible-exceptions"></a><span data-ttu-id="a4a23-352">可能性のある例外</span><span class="sxs-lookup"><span data-stu-id="a4a23-352">Possible Exceptions</span></span>  
 <span data-ttu-id="a4a23-353">BizTalk Server を使用して SAP システムから IDOC を受信中に発生する可能性が、例外については、次を参照してください。[例外とエラーは、SAP アダプターを使用した処理](../../adapters-and-accelerators/adapter-sap/exceptions-and-error-handling-with-the-sap-adapter.md)します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-353">For information about the exceptions you might encounter while receiving an IDOC from an SAP system using BizTalk Server, see [Exceptions and Error Handling with the SAP adapter](../../adapters-and-accelerators/adapter-sap/exceptions-and-error-handling-with-the-sap-adapter.md).</span></span>  

## <a name="best-practices"></a><span data-ttu-id="a4a23-354">ベスト プラクティス</span><span class="sxs-lookup"><span data-stu-id="a4a23-354">Best Practices</span></span>  
 <span data-ttu-id="a4a23-355">展開し、BizTalk プロジェクトの構成後は、バインド ファイルと呼ばれる XML ファイル構成設定をエクスポートできます。</span><span class="sxs-lookup"><span data-stu-id="a4a23-355">After you have deployed and configured the BizTalk project, you can export configuration settings to an XML file called the bindings file.</span></span> <span data-ttu-id="a4a23-356">バインド ファイルを生成した後は、受信ポートなど、同じオーケストレーションの送信ポートを作成する必要はありませんように、ファイルから構成設定をインポートできます。</span><span class="sxs-lookup"><span data-stu-id="a4a23-356">Once you generate a bindings file, you can import the configuration settings from the file so that you do not need to create the send ports, receive ports, etc. for the same orchestration.</span></span> <span data-ttu-id="a4a23-357">バインド ファイルの詳細については、次を参照してください。[再利用の SAP アダプター バインド](../../adapters-and-accelerators/adapter-sap/reuse-sap-adapter-bindings.md)します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-357">For more information about binding files, see [Reuse SAP adapter bindings](../../adapters-and-accelerators/adapter-sap/reuse-sap-adapter-bindings.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="a4a23-358">参照</span><span class="sxs-lookup"><span data-stu-id="a4a23-358">See Also</span></span>  
[<span data-ttu-id="a4a23-359">BizTalk アプリケーションを開発します。</span><span class="sxs-lookup"><span data-stu-id="a4a23-359">Develop BizTalk applications</span></span>](../../adapters-and-accelerators/adapter-sap/develop-biztalk-applications-using-the-sap-adapter.md)