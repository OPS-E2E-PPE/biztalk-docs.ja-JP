---
title: Oracle データベースでのポーリングに基づいたデータ変更メッセージを受信するためのサポート |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- notifications, polling-based
- post-polling
- POLLINGSTMT
- polling interval
- polling
ms.assetid: 9ff29d3f-ebb1-4d82-9106-150f939cbd9e
caps.latest.revision: 10
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 5fc03b831cbfcc3ce4b1db4a8fe5b0a1028f8513
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65375933"
---
# <a name="support-for-receiving-polling-based-data-changed-messages-in-oracle-database"></a>Oracle データベースでのポーリングに基づいたデータ変更メッセージを受信するためのサポート
[!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)]クライアント プログラムは、Oracle データベースに格納されたデータへの変更を知らせる、Oracle データベースからメッセージを受信します。 [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)]アダプターが指定された SELECT クエリ、ストアド プロシージャ、関数、またはプロシージャまたはパッケージ内の関数を実行する場合、「ポーリング ベース」のメッセージの受信をサポートしていますが、データを取得しでは、通常、クライアントに結果を提供します。時間間隔。 これを有効にする、 [!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)] POLLINGSTMT 操作を公開します。 さらに、すべてのストアド プロシージャ、関数、およびプロシージャおよびパッケージ内の関数は、ポーリングの受信操作として公開されます。  

 アダプターは、Oracle データベースをポーリングの 2 つの方法を提供します。  

-   **SELECT ステートメントを使用して**します。 テーブルと Oracle データベースでビューをポーリングする単純な SELECT ステートメントを指定することができます。 アダプターは、指定した間隔で SELECT ステートメントを実行し、アダプターのクライアントに結果を返します。  

-   **ストアド プロシージャ、関数、またはプロシージャまたはパッケージ内の関数を使用して**します。 ストアド プロシージャ、関数、またはプロシージャまたは Oracle データベースをポーリングするパッケージ内の関数を指定することができます。 アダプターは、指定した間隔で要求メッセージを実行し、アダプターのクライアントに結果を返します。  

## <a name="polling-operation-workflow"></a>ポーリング操作のワークフロー  
 使用して一般的なポーリング操作、[!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)]次が含まれます。  

1. アダプターのクライアントを指定する必要があります**ポーリング**の受信の操作として、 **InboundOperationType**プロパティをバインドします。 このバインドのプロパティの既定値は**ポーリング**します。  

2. アダプター クライアントの SELECT ステートメントを指定する必要があります、 **PolledDataAvailableStatement**ポーリングに使用できるデータがあるかどうかを決定するプロパティをバインドします。 このステートメントの実行に、返される結果セットの最初の行の最初の列には、正の整数値が含まれている場合は日付のポーリングに使用できます。 このバインドのプロパティの値の設定既定では、 `Select 1 FROM DUAL`、かどうかに、アダプターがポーリングされるテーブルのデータがかどうかに関係なくポーリングを続ける必要がありますが含まれています。  

3. アダプター クライアントのポーリング間隔を指定する必要があります、 **PollingInterval**間隔を秒単位で指定したステートメントを定義するプロパティのバインド、 **PolledDataAvailableStatement**プロパティのバインドが実行されます。 ポーリング間隔の最後に、ポーリング済みデータの使用可能なステートメントを実行して、結果セットが返されます。  

4. SELECT ステートメントまたはストアド プロシージャのアダプターのクライアントを指定する必要があります、 **PollingStatement**プロパティをバインドします。  

   - テーブルまたはビューをポーリングする場合は、このバインドのプロパティで選択クエリを指定する必要があります。  

   - ストアド プロシージャ、関数、またはプロシージャまたはパッケージ内の関数を使用してポーリングする場合は、このバインドのプロパティで、該当する操作の全体の要求メッセージを指定する必要があります。  

     内のステートメント、 **PollingStatement**によって決定される、ポーリングに使用できるデータが場合にのみ実行プロパティのバインド、 **PolledDataAvailableStatement**手順 1. でプロパティをバインドします。  

5. アダプターのクライアントがポーリング操作のアクションを指定する必要があります、 **PollingAction**プロパティをバインドします。 Consume Adapter Service アドインを使用して、操作の生成されたメタデータから特定の操作のポーリング アクションが決定されます。  

   > [!NOTE]
   >  テーブルをポーリングしての SELECT ステートメントを使用して表示するか、 **PollingStatement**バインディング プロパティ、する必要はありませんのすべての値を指定する、 **PollingAction**プロパティをバインドします。 既定値、null の場合、ここで渡されます。  

6. アダプターのクライアントが使用できる、 **PollWhileDataFound**ポーリング間隔を無視し、継続的に使用可能な場合と、データをポーリングするプロパティをバインドします。  

   > [!IMPORTANT]
   >  値を設定した場合、 **PollWhileDataFound**バインド プロパティを True に、アダプターのクライアントがポーリング継続的に、プロセスと Oracle からのデータがループ内での Oracle データベースへの接続を開いたり閉じたりします。 ODP.NET 接続を開く率は、閉じられている接続よりも大きいが、時間がたつと、接続が使い果たされると、例外がスローされます。 回避策としては、ことを確認しますの値、 **UseOracleConnectionPool**を True に設定されている適切な値に記載されて、 **IncrPoolSize**接続の数を制御するプロパティのバインドアダプター クライアントしてを開くことができます。  

7. アダプター クライアント用、Oracle PL/SQL ブロック、ポーリング後ステートメントを指定できます、 **PostPollStatement**プロパティをバインドします。 指定されたステートメントの後にこのバインドのプロパティで指定されたステートメントが実行、 **PollingStatement**プロパティのバインドを実行します。  

   アダプターがポーリング ステートメントとポーリング後ステートメントをトランザクションにラップし、トランザクションのタイムアウト値が指定された値として設定されて、 **PollingInterval**プロパティをバインドします。 そのため、受信メッセージを処理して、応答の送信に必要な時間以降のタイムアウト値を指定する重要です。 クライアント プログラムはメッセージを使用または後のポーリング クエリの実行に要した時間がタイムアウト値を超える場合は、トランザクションがロールバックします。 時間のタイムアウト値よりも小さい場合、アダプターはトランザクションをコミットし、次のポーリングを実行する前に、ポーリングの残り時間の「スリープ」。  

   アダプターは、Oracle データベースからすべての空のポーリング応答を抑制します。  

## <a name="differences-between-polling-and-notification"></a>ポーリングと通知の間の相違点  
 ポーリングと通知は、両方の受信操作し、Oracle データベースでデータの変更について、アダプターをクライアントに通知、次の表は、2 つの間のいくつかの違いを示します。 次の相違点を使用すると、要件に応じて、操作を決定できます。  


|                                                                                                                                                                                                                                                      ポーリング                                                                                                                                                                                                                                                      |                                                                                                                              Notification                                                                                                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                                                                                                                                                                          サポートされているすべての Oracle データベース バージョンのポーリングがサポートされている、[!INCLUDE[adapteroracle_short](../../includes/adapteroracle-short-md.md)]します。                                                                                                                                                                           |                                                                                               通知は、Oracle database バージョン 10.2 に対してのみサポートされている以降です。                                                                                               |
| 一定の間隔でポーリングに使用できるデータを確認するポーリング間隔を構成するかまたは瞬時とタイミング データを使用します。 **ヒント:** ポーリングすれば、スループットを向上させる継続的に、データの変更が行われていてと、発生したタイミングとしては、各変更の通知したくないです。 代わりに、その後の前回の変更の通知以降に発生したすべての変更を通知するポーリング間隔を指定します。 |                                                                                                          データの変更通知は瞬時では常にします。                                                                                                          |
|                                                                                                                                         ポーリングは、アダプターによって開始されます。 アダプターは、データのポーリングに使用できるとポーリングの一部のデータがある場合は、ポーリング ステートメントを実行してポーリングを開始するかどうかを検証する SQL ステートメントを実行します。                                                                                                                                         | 通知は、Oracle データベースで開始されます。 だけ、アダプターによって発行された通知のステートメントでは、データベース ステートメントの結果セット内の変更がある場合は、通知を開始するように指示します。 通知は、Oracle データベースの機能です。 |
|                                                                                                                                                                                                                 ポーリング ステートメントを使用して、読み取りまたは Oracle データベース内のデータを更新することができます。                                                                                                                                                                                                                  |                                                                                             通知のステートメントを使用すると、Oracle データベースでデータを読み取るだけです。                                                                                             |
|                                                                                                                                                                                                                            ポーリングには、実際のデータが変更されたことについて通知されます。                                                                                                                                                                                                                            |                                                                                   通知が、Insert などのデータの変更の種類にのみ通知は、更新、および削除します。                                                                                    |

 詳細については。  

- アダプターは、Oracle データベースからのポーリング ベースのメッセージの受信をサポートする方法を参照してください。[ポーリングに基づいたデータ変更メッセージを受信](../../adapters-and-accelerators/adapter-oracle-database/receive-polling-based-data-changed-messages-in-oracle-database-adapter.md)します。  

- 使用して Oracle データベースからのポーリング ベースのメッセージを受信[!INCLUDE[btsBizTalkServerNoVersion](../../includes/btsbiztalkservernoversion-md.md)]を参照してください[関数の呼び出しと Biztalk Server を使用して Oracle データベースでプロシージャ](../../adapters-and-accelerators/adapter-oracle-database/invoke-functions-and-procedures-in-oracle-database-using-biztalk-server.md)します。  

- WCF サービス モデルを使用して Oracle データベースからのポーリング ベースのメッセージを受信を参照してください[WCF チャネル モデルを使用して SQL Server からのデータ変更メッセージの受信のポーリングに基づいた](../../adapters-and-accelerators/adapter-sql/receive-polling-based-data-changed-messages-from-sql-server-using-a-wcf-channel.md)します。  

- WCF チャネル モデルを使用して Oracle データベースからのポーリング ベースのメッセージを受信を参照してください[WCF チャネル モデルを使用して SQL Server からのデータ変更メッセージの受信のポーリングに基づいた](../../adapters-and-accelerators/adapter-sql/receive-polling-based-data-changed-messages-from-sql-server-using-a-wcf-channel.md)します。  

- メッセージの構造と、ポーリング クエリを実行するための SOAP アクションを参照してください[ポーリング操作のメッセージ スキーマ](../../adapters-and-accelerators/adapter-oracle-database/message-schemas-for-the-polling-operations2.md)します。  

## <a name="see-also"></a>参照  
 [どのような操作は、アダプターを使用して実行しますか?](https://msdn.microsoft.com/library/cc185219(v=bts.10).aspx)