---
title: BizTalk Server 層のボトルネック |Microsoft ドキュメント
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 3ad36897-4e4a-43b9-9cb7-0bf22bd954fb
caps.latest.revision: 12
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: cd2eddf6cc88737375998237db97ca699a676170
ms.sourcegitcommit: 5abd0ed3f9e4858ffaaec5481bfa8878595e95f7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/28/2017
ms.locfileid: "25976776"
---
# <a name="bottlenecks-in-the-biztalk-server-tier"></a>BizTalk Server 層のボトルネック
BizTalk 層は以下の機能領域に分割できます。  
  
-   受信  
  
-   処理  
  
-   転送します。  
  
-   Tracking  
  
-   その他  
  
 これらの領域、システム リソース (CPU、メモリ、およびディスク) が飽和状態にする、プラットフォームをスケール アップしてサーバーをアップグレードする表示、またはアプリケーションの特性に基づきアウトします。 システム リソースが飽和状態になっていない場合は、ここで説明する手順を実行します。  
  
## <a name="bottlenecks-in-the-receive-location"></a>受信場所のボトルネック  
 受信場所でメッセージが蓄積する場合 (たとえば、ファイル受信フォルダーが大きく)、これは、システムがデータを受信する負荷に対応する十分な速さ吸収することができないことを示します。 これは内部の調整のためです。 BizTalk Server が受信速度を削減する場合は、サブスクライバーのすることはできません、データの処理に十分な原因のデータベース テーブルにバックログの蓄積が高速です。 ボトルネックの原因がハードウェアの制限である場合は、スケール アップしてください。 スケール アップの詳細については、BizTalk Server 2010 のドキュメントの次のトピックを参照してください。  
  
-   [BizTalk Server 層のスケール アップ](http://go.microsoft.com/fwlink/?LinkId=158073)(http://go.microsoft.com/fwlink/?LinkId=158073)。  
  
-   [SQL Server 層のスケール アップ](http://go.microsoft.com/fwlink/?LinkId=158077)(http://go.microsoft.com/fwlink/?LinkId=158077)。  
  
 受信ハンドラーにマップされているホストにホスト インスタンス (サーバー) を追加してスケール アウトすることもできます。 スケール アウトの詳細については、BizTalk Server 2010 のドキュメントの次のトピックを参照してください。  
  
-   [BizTalk Server 層のスケール アウト](http://go.microsoft.com/fwlink/?LinkId=158076)(http://go.microsoft.com/fwlink/?LinkId=158076)。  
  
-   [SQL Server 層のスケール アウト](http://go.microsoft.com/fwlink/?LinkId=158075)(http://go.microsoft.com/fwlink/?LinkId=158075)。  
  
 Perfmon を使用して、システムのリソース使用率を監視します。 ボトルネックの原因が外部の受信場所でないことを確認することが重要です。 たとえば、頻繁なディスク I/O のため、リモート ファイル共有が飽和状態、リモートの送信キューをホストしているサーバーが飽和状態にならない、または HTTP の負荷を生成するために使用するクライアントがないスレッドで不足しているかどうかを確認します。  
  
## <a name="processing-bottlenecks"></a>処理のボトルネック  
 Host Queue-Length のパフォーマンス カウンターが上昇している場合、オーケストレーションが十分高速に完了しなかったことを示します。 詳細については、このトピックの「Perfmon カウンター表を参照してください。 この原因としては、メモリの競合や CPU の飽和が考えられます。  
  
 オーケストレーション サーバーがボトルネックになっている場合は、Perfmon を使用して原因を特定します。  
  
 サーバーが CPU の制約を受けている場合は、以下の対策を検討します。  
  
-   ワークフローが複雑な場合、オーケストレーションを複数の小さなオーケストレーションに分割することを検討してください。  
  
    > [!NOTE]  
    >  オーケストレーションを複数のワークフローに分割すると、待機時間が増加したり複雑さが増したりする可能性があります。 複数のワークフロー増加することに公開されており、BizTalkMsgBoxDb で処理されるメッセージの数、データベースに対する追加の負荷が増大します。  
  
-   複雑なマップを使用する場合は、受信/送信ポートに移動できるかどうかを検討してください。 必ずどのポートがある追加の帯域幅を確認してください。  
  
-   ハードウェアのスケール アップまたは追加の処理サーバーを構成してスケール アウトを検討してください。  
  
## <a name="transmitting-bottlenecks"></a>送信のボトルネック  
 スケール アップを検討してください、サーバーをホストしているリソース (ディスク、メモリや CPU など) に送信アダプターが飽和状態場合、サーバーまたはスケール アウトするその他は、ホスト サーバーに送信します。 送信層がボトルネックになる場合、送信先 (BizTalk の外部) でのデータの受信が遅れている可能性もあります。 送信先でのデータの受信が遅れると、メッセージ ボックス データベース (Application SendHostQ) にメッセージが蓄積されます。  
  
 すべてのエンドポイントがトポロジのスコープ内にある場合は、先に原因を特定します。 たとえば、負荷を受信する HTTP の場所が最適に構成を決定します。 それ以外の場合は、スケール アウトを検討してください。また、過度な出力メッセージが BizTalk によって配信されるため、変換先が増えているかどうかを決定します。 場合は、アーカイブおよび送信先のメッセージを削除するメンテナンス プランを必要があります。 ディスク ドライブにデータをコミットする、BizTalk サービスの機能深刻な影響をコピー先フォルダー内のファイル数が多いことができます。  
  
## <a name="tracking-bottlenecks"></a>追跡のボトルネック  
 追跡ホスト インスタンスは、ビジネス アクティビティ監視 (BAM) および正常性と動作状況の追跡 (HAT) のデータ、メッセージ ボックス データベース (TrackingData テーブル) から BizTalk 追跡や BAM プライマリ インポート データベースのテーブルに移動します。 追跡ホスト インスタンスで複数のメッセージ ボックス データベースを構成している場合のメッセージ ボックス データベースあたり 4 つのスレッドを使用します。  
  
 追跡ホスト インスタンスが CPU バインドにある可能性があります。 場合は、スケール アウトを構成して追加のサーバー ホストの追跡を有効になっているか、サーバーをスケール アップを検討します。 複数のホスト インスタンスでは、構成された複数のメッセージ ボックス データベースに対して自動的に負荷はします。 スケーリングの詳細については、トピックを参照してください。 [、ソリューションのスケーリング](http://go.microsoft.com/fwlink/?LinkId=158078)(http://go.microsoft.com/fwlink/?LinkId=158078)。  
  
 これは通常ように構成されている、BizTalk 追跡と BAM プライマリのサイズが増加、BizTalk 追跡データベースや BAM プライマリ インポート データベースのデータ メンテナンス ジョブが実行されていないため、メッセージ ボックス データベースの TrackingData テーブルが増えた場合、データベースをインポートします。 後、これらのデータベースが大きくなりすぎないこと、TrackingData テーブルにデータを挿入する追跡ホストの機能に悪影響を及ぼすことができます。 これにより、履歴データをメッセージ ボックス データベース テーブルにバックアップされます。 TrackingData テーブルの増加が発生する制限の開始。  
  
 のみ、記録されたデータの量を減らすし、追跡のボトルネックのリスクを低減これは、アプリケーションのために必要な最小の追跡を有効にする必要があります。 オーケストレーションおよび送信/受信ポートなどの個々 の項目の追跡設定を無効にする方法については、次を参照してください。[追跡を無効にする方法](http://go.microsoft.com/fwlink/?LinkId=160064)(http://go.microsoft.com/fwlink/?LinkId=160064)。  
  
## <a name="other"></a>その他  
 さまざまな機能がそれぞれ専用の分離ホスト インスタンスで実行されるように展開トポロジを構成します。 このように各ホスト インスタンスは、(たとえば、32 ビット システム、2 GB の仮想メモリ アドレス空間、ハンドル、スレッド) 上のリソースの独自セットを取得します。 かどうか、サーバーは十分な CPU ヘッドルームと複数のホスト インスタンスをホストするためのメモリが、同じ物理コンピューター上で実行するように構成することができます。 それ以外の場合は、機能を専用のサーバーに移動することによってスケール アウトを検討してください。 同じ機能を複数のサーバーで実行すると、高可用性の構成を実現することもできます。  
  
## <a name="biztalk-system-performance-counters"></a>BizTalk システム パフォーマンス カウンター  
  
|オブジェクト|Instance|カウンター|監視の目的|  
|------------|--------------|-------------|------------------------|  
|プロセッサ|_Total|[% プロセッサ時間]|リソースの競合|  
|[処理]|BTSNTSvc|Virtual Bytes|メモリ リーク/メモリの肥大化|  
|[処理]|BTSNTSvc|Private Bytes|メモリ リーク/メモリの肥大化|  
|[処理]|BTSNTSvc|Handle Count|リソースの競合|  
|[処理]|BTSNTSvc|スレッド数|リソースの競合|  
|Physical Disk|_Instance|% Idle Time|リソースの競合|  
|Physical Disk|_Instance|Avg. Disk Queue Length|リソースの競合|  
  
### <a name="cpu-contention"></a>CPU の競合  
 プロセッサが飽和状態になっている場合は、送信とオーケストレーションから受信を分離してアプリケーションをフラグメントことができます。 これを行うには、個別のホストを作成、ホスト固有の機能 (受信/送信/オーケストレーション、追跡) をマップおよびこれら個別のホストに専用のサーバーを追加します。 オーケストレーションの機能は、CPU を消費するでは多くの場合です。 オーケストレーションが別の専用サーバーで実行するためにシステムを構成する場合は、このシステム全体のスループットの向上に役立ちます。  
  
 複数のオーケストレーションを展開している場合は、異なる専用オーケストレーション ホストに参加できます。 専用オーケストレーション ホストに別々 の物理サーバーのマッピングにより、いる別のオーケストレーションを分離し、同じサーバー上または同一の物理アドレス空間での共有リソースに対する競合しません。  
  
 未使用のホスト インスタンスを停止します。 未使用のホスト インスタンスは、処理するメッセージをメッセージ ボックス データベースを定期的にチェックして CPU およびメモリ リソースに対して競合ことができます。 さらに、未使用の停止は、場所、送信ポート、およびオーケストレーションを受信します。  
  
### <a name="spool-table-growth"></a>スプール テーブルの増加  
 下流のボトルネックやリソースの競合には、スプールを過度に成長を開始し、全体的なパフォーマンスが低下する可能性があります。 詳細についてを参照してください「スプール テーブルの増加」[メッセージ ボックス データベース Database1 のボトルネックを特定する方法](../technical-guides/how-to-identify-bottlenecks-in-the-messagebox-database1.md)です。  
  
### <a name="memory-starvation"></a>メモリ不足  
 高スループットのシナリオでは、システム メモリの需要が増大する場合があります。 32 ビット プロセスはによる制限を使用できるメモリの量である各ホストが独自 2 GB のアドレス空間を受信できるように、別のホスト インスタンスに受信、処理、送信機能を分離することをお勧めです。 さらに、複数のホスト インスタンスを同じ物理サーバーで実行している場合は、実際のメモリからデータをディスクにスワップを回避する 4/8 GB のメモリにアップグレードできます。 長時間のオーケストレーションは、長い割り当てられたメモリに保持できます。 これには、メモリの肥大化と調整を開始する可能性があります。 サイズの大きいメッセージでは、メモリ消費が多いこともあります。  
  
 削減し、サイズの大きいメッセージが処理されるときに発生するメモリの肥大化の問題を軽減できます、**内部メッセージ キュー サイズ**と**CPU あたりのインプロセス メッセージ**特定ホスト用の値。  
  
> [!NOTE]  
>  待機時間に問題がある場合に変更**内部メッセージ キュー サイズ**と**CPU あたりのインプロセス メッセージ**に注意してこのシステムのエンド ツー エンドの待機時間が増える可能性があります。  
  
### <a name="disk-contention"></a>ディスクの競合  
 (たとえばで、大量のファイルや MSMQ トランスポート)、ディスクが飽和状態になり場合、は、マルチ スピンドルへのアップグレードや、RAID 10 によるディスクのストライピングを検討してください。 さらに、ファイル トランスポートを使用するたびに、受信することを確認し、50,000 個のファイルよりも大きい拡張しないフォルダーに送信する重要なです。  
  
 受信フォルダーは、BizTalk Server システムに受信したデータを制限する場合は、大規模に拡張できます。 ことが重要 send フォルダーからデータを移動できるように、このフォルダー内の拡張に追加のデータを記述する BizTalk Server の機能は影響しません。 MSMQ キューのトランザクションではない場合、BizTalk Server のディスクの競合が削減されるようにリモートで受信キューを作成することをお勧めします。  
  
 リモートの非トランザクション キューの構成では、キューをホストしているリモート サーバーをクラスター化できるように、高可用性も提供します。  
  
### <a name="other-system-resource-contention"></a>その他のシステム リソースの競合  
 、トランスポートの種類によっては、HTTP (MaxIOThreads、MaxWorkerThreads など) は、IIS のようなシステム リソースを構成する必要があります。  
  
 ASP.NET 2.0 および ASP.Net 4 で、 \<processModel autoConfig ="true"\> machine.config ファイルの設定は自動的に最適なパフォーマンスを次の設定を構成します。  
  
-   ワーカー スレッド最大数  
  
-   最大 IO スレッド数  
  
-   httpRuntime 要素の minFreeThreads 属性  
  
-   httpRuntime 要素の minLocalRequestFreeThreads 属性  
  
-   maxConnection 属性、 \<connectionManagement\>要素 (ネットワーク設定)  
  
 アダプターのパフォーマンスに影響するパラメーターを構成する方法の詳細については、次を参照してください。 [processModel 要素の構成設定を ASP.NET](http://go.microsoft.com/fwlink/?LinkId=158080) (http://go.microsoft.com/fwlink/?LinkId=158080)。  
  
 BizTalk Server アダプターに影響する構成設定の詳細については、次を参照してください。[構成パラメーターに影響を与えるアダプター パフォーマンス](http://go.microsoft.com/fwlink/?LinkID=154200)(http://go.microsoft.com/fwlink/?LinkID=154200)。  
  
 に加えて、BizTalk Server アプリケーションを最適化するには、同じサーバーで実行されている他の ASP.NET アプリケーションは全体的なパフォーマンスに影響があります。 すべてのシステム リソースに対する需要を削減する ASP.NET アプリケーションを最適化するために重要です。 詳細については、次を参照してください。 [ASP.NET パフォーマンス](http://go.microsoft.com/fwlink/?LinkId=158081)(http://go.microsoft.com/fwlink/?LinkId=158081)。  
  
 最大のパフォーマンスを構成する場合は、メッセージング エンジン (メッセージ キュー、MQSeries)、アプリケーション、データベース、他の外部システムを最適化してください。 Active Directory など、BizTalk ソリューション全体の一部であります。 これらの他の外部システムのパフォーマンスのボトルネック、BizTalk ソリューションに悪影響を及ぼすことができます。  
  
### <a name="downstream-bottlenecks"></a>下流のボトルネック  
 ダウン ストリーム システムが BizTalk から十分に高速のデータを受信できない場合は、この出力データが BizTalk データベースがバックアップされます。 これが肥大化して、調整を開始すると、受信パイプが縮小なり、BizTalk システムの全体的なスループットに影響を与えます。 この状況を直接示すは、スプール テーブルの拡張です。 ボトルネックと、スプール テーブルの詳細については、次を参照してください。[メッセージ ボックス データベース Database1 のボトルネックを特定する方法](../technical-guides/how-to-identify-bottlenecks-in-the-messagebox-database1.md)です。  
  
### <a name="throttling-impact"></a>制限の影響  
 調整は最終的に回復不可能な状態に到達できないシステムの保護を開始します。 したがって、調整を使用、システムが正常に機能しているかどうかを確認し、問題の原因を検出することができます。 制限の状態からボトルネックの原因を特定した後は、問題の原因を特定する他のパフォーマンス カウンターを分析します。 たとえば、メッセージ ボックス データベースで競合が増加メモリ不足によって発生したディスクの過剰なページングによる CPU 使用率が考えられます。 メッセージ ボックス データベースで競合が増加も考えられます彩度の高いディスク ドライブにより高いロック競合。 不定期の調整がパフォーマンスに重大な脅威ありませんが、永続的な制限と、さらに重要な基になる問題を示すことができます。 調整を BizTalk Server が使用はこれらの条件の詳細については、次を参照してください。[どのように BizTalk Server を実装してホスト Throttling](http://go.microsoft.com/fwlink/?LinkID=155286) (http://go.microsoft.com/fwlink/?LinkID=155286)。  
  
 BizTalk Server throttling どう役立つか使用可能なリソースの使用を管理し、リソースの競合を最小限に抑えるの詳細については、次を参照してください。[を最適化するリソース使用状況を通じてホスト制限](http://go.microsoft.com/fwlink/?LinkID=155770)(http://go.microsoft.com/fwlink/?LinkID=155770)。  
  
## <a name="biztalk-application-counters"></a>BizTalk アプリケーション カウンター  
  
|オブジェクト|Instance|カウンター|Description|  
|------------|--------------|-------------|-----------------|  
|BizTalk Messaging|RxHost|Documents Received/Sec|受信速度|  
|BizTalk Messaging|TxHost|Documents Processed/Sec|送信速度|  
|XLANG/s Orchestrations|PxHost|Orchestrations Completed/Sec.|処理速度|  
|BizTalk: メッセージ ボックス: 一般的なカウンター|MsgBoxName|Spool Size|すべてのホスト キューの合計サイズ|  
|BizTalk: メッセージ ボックス: 一般的なカウンター|MsgBoxName|Tracking Data Size|メッセージ ボックスの TrackingData テーブルのサイズ|  
|BizTalk:MessageBox:Host Counters|PxHost:MsgBoxName|Host Queue - Length|特定のホスト キューに存在するメッセージの数|  
|BizTalk:MessageBox:Host Counters|TxHost:MsgBoxName|Host Queue - Length|特定のホスト キューに存在するメッセージの数|  
|BizTalk:Message Agent|RxHost|Database Size|公開 (PxHost) キューのサイズ|  
|BizTalk:Message Agent|PxHost|Database Size|公開 (TxHost) キューのサイズ|  
|BizTalk:Message Agent|HostName|Message Delivery Throttling State|XLANG と送信トランスポートに影響|  
|BizTalk:Message Agent|HostName|Message Publishing Throttling State|XLANG と受信トランスポートに影響|  
  
### <a name="where-do-i-start"></a>監視の開始  
 監視、 **Message Delivery Throttling State**と**Message Publishing Throttling State**各ホスト インスタンスをお勧めします。 これらのカウンターの値が 0 以外の場合は、これは、BizTalk システム内の調整を示し、さらに、ボトルネックの原因を分析することができます。 その他のパフォーマンス カウンターの説明については、次を参照してください。[データベース層のボトルネック](../technical-guides/bottlenecks-in-the-database-tier.md)です。  
  
## <a name="orchestration-engine-performance-counters"></a>オーケストレーション エンジンのパフォーマンス カウンター  
 継続的なオーケストレーション dehydration\rehydration と永続化ポイントは、全体的なパフォーマンスに重大な影響を持つことができますので、オーケストレーションの実行時の設定をチューニング微調整することを強くお勧めします。  複数の永続化ポイントとトランザクションのスコープを含む可能性のある複雑なオーケストレーションをテストする際に、次のカウンターを使用する必要があります。  
  
|カウンター|コメント|  
|-------------|--------------|  
|Orchestrations dehydrated/sec|1 秒あたりの平均待避数。|  
|Orchestrations rehydrated/sec|1 秒あたりの平均復元数。|  
|Persistence points/sec|永続化されたオーケストレーション インスタンスの 1 秒あたりの平均数。|  
|Orchestrations resident in memory|ホスト インスタンスによって現在ホストされているオーケストレーション インスタンスの数。|  
|Orchestrations completed/sec|1 秒あたりの完了の平均数。|  
|Orchestrations suspended/sec|1 秒あたりの平均中断数。|  
|Transactional scopes committed/sec|1 秒あたりの平均コミット数。|  
|Transactional scopes aborted/sec|1 秒あたりの平均中止数。|  
|Transactional scopes compensated/sec|1 秒あたりの平均補正数。|  
  
## <a name="backlog-buildup"></a>バックログの蓄積  
 1 対 1 の展開のシナリオ 1 通のメッセージが結果を受信したメッセージが 1 で処理され、送信速度が受信速度と等しくない場合は、送信、バックログ、システムでします。 このような状況では、スプール サイズを監視できます。 送信速度のボトルネックの原因を特定するには、ときに、一度に 1 つのユース ケース シナリオを実行します。 オーケストレーションを分離、受信場所、および送信ホストを分離する場所です。  
  
 ホストを監視するパフォーマンス モニター ログに、[BizTalk:Message Box:host Counters] を追加します。 Host Queue - Length: カウンターは、特定のホスト キュー内のメッセージの合計数を追跡します。 これらのカウンターの 1 つ以上が解決しない場合に、これらのホストによって実行される成果物に特に注意を与えるより大きくなる場合。  
  
 スプールが直線的に拡大している場合は、アプリケーション キューがスプールの増大を担当するを判断します。  
  
 アプリケーション キューのいずれもが成長しています、spool のサイズが増大する場合は、purge ジョブが追いついていないことが可能性があります。 これは、エージェントが実行されていないか、SQL Server 上の他のシステム リソースの競合がある場合に発生します。  
  
 アプリケーション キューのいずれかが増えている場合は、この増加の原因を診断します。 特定のアプリケーション キューのドレインを実行するようになっているシステムのシステム リソースの監視 (たとえば、オーケストレーション ホスト-q が拡大しているサーバー上の CPU 不足のため)。 さらに、特定のホスト インスタンスの制限カウンターの値を確認します。  
  
 BizTalk:Messsage エージェント メッセージ配信の制限の状態および Message Publishing Throttling State パフォーマンス カウンターがゼロでない場合は、スロットルの理由を確認する値をチェック (たとえば、メモリのしきい値を超えると、インフライトのメッセージ カウントすぎます高など)。  
  
## <a name="stand-alone-profiler"></a>スタンドアロンのプロファイラー  
 パフォーマンス カウンターは、高レベルのボトルネックの場所を検出するために使用できます。 ただし、場所が絞り込んだ後、密接に軽減するためには、複数のコードの問題を調査する必要があります。 Visual Studio 2010 に付属しているスタンドアロン プロファイラーは、コードがそのサイクルのほとんどを費やしている場所の診断に役立つ非常に便利なツールです。 詳細については、「  
  
## <a name="l2l3-cache"></a>L2/L3 キャッシュ  
 ハードウェアの観点からは、オンボードの CPU キャッシュを使用して、最大のメリットをすることができます。 CPU キャッシュが大きければキャッシュのヒット率が高くなり、システムでメモリからディスクへのデータのページングを行う必要が少なくなります。  
  
## <a name="64-bit-performance-bottlenecks"></a>64 ビット パフォーマンスのボトルネック  
 64 ビット システムのパフォーマンスが 32 ビット システムより低く見える場合があります。 これは、いくつかの理由から、最も重要な 1 つの可能なメモリです。  
  
 32 ビット システム、2 GB のメモリのパフォーマンスの測定とのような 64 ビット システム、2 GB のメモリに結果を比較することは、同様の比較されません。 64 ビット システムは、ディスク I/O バインド (ディスクのアイドル時間の割合が低い & 高 Disk Queue Length) と CPU バインド (最大 CPU と高のコンテキストの切り替え) に表示されます。 ただし、これはないファイルの I/O を実行する 64 ビット システムでは、高価です。  
  
 64 ビット システムより多くのメモリ負荷の高い (64 ビット アドレッシング) は、その結果は、オペレーティング システムが 2 GB の使用可能なメモリの多くを消費します。 この場合、その他のほとんどの操作にファイル サブシステムを強調してディスクへのページングが発生します。 そのため、システムのメモリの両方のデータ入力/出力をページングする CPU サイクルが消費コードおよびコストの高いディスク待機時間の影響を受けます。 それが、ディスクの競合と CPU 消費の増加として現れます。  
  
 この問題を軽減する方法は、メモリをアップグレードすることで、サーバーをスケール アップします。 8 GB までスケール アップをお勧め、ただしより多くのメモリを追加することが役に立ちません問題の原因はメモリ不足に起因 CPU リソースが不足しない限り、スループットが向上します。  
  
## <a name="using-bam-to-identify-bottlenecks-and-high-latency-issues"></a>BAM を使用して、ボトルネックと待機時間の長いの問題を識別するには  
 低待機時間が重要な場合は、システムは、BizTalk Server システム内の各段階を完了にかかる時間を測定する BAM を使用できます。 HAT を使用して、メッセージの状態をデバッグし、メッセージのルーティングの問題の原因を診断するのにことができます、メッセージ フローのさまざまな時点を追跡するために BAM を使用することができます。 BAM 追跡の継続を持つアクティビティを定義するプロファイルを作成すると、ワークフロー プロセス内で最も高価なステージを追跡しやすく、システムのさまざまな部分間の待機時間を測定することができます。  
  
 HAT のオーケストレーション デバッガーを使用して、中断されたインスタンスのクエリを実行、デバッグ モードでは、インスタンスを再開し、Technical Details ビューを使用して適切なブレークポイントを追加することができます。 これにより、動作とデバッグ メッセージをステップごとにトレースすることができます。  
  
 ブレークポイントを設定して以下のイベントを追跡することができます。  
  
-   オーケストレーションの開始と終了  
  
-   図形の開始と終了  
  
-   メッセージの送信と受信  
  
-   例外  
  
 各ブレークポイントで、ローカル変数、メッセージとそのプロパティ、ポート、およびロール リンクに関する情報を調べることができます。  
  
## <a name="see-also"></a>参照  
 [ボトルネックの検索と解消](../technical-guides/finding-and-eliminating-bottlenecks.md)