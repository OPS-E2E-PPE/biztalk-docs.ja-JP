---
title: BizTalk Server 層のボトルネック |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 3ad36897-4e4a-43b9-9cb7-0bf22bd954fb
caps.latest.revision: 12
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 8f8c7b4366390c040d7a4a34b473bdf4c3cfd352
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/27/2018
ms.locfileid: "37004947"
---
# <a name="bottlenecks-in-the-biztalk-server-tier"></a>BizTalk Server 層のボトルネック
BizTalk 層は以下の機能領域に分割できます。  
  
- 受信  
  
- 処理  
  
- 送信  
  
- Tracking  
  
- その他  
  
  これらの領域、システム リソース (CPU、メモリ、およびディスク) が飽和状態にする、プラットフォームをスケール アップしてサーバーをアップグレードする表示、またはアプリケーションの特性に基づいてアウトします。 システム リソースが飽和状態になっていない場合は、ここで説明する手順を実行します。  
  
## <a name="bottlenecks-in-the-receive-location"></a>受信場所のボトルネック  
 メッセージが受信場所ビルドする場合 (たとえば、ファイル受信フォルダーが大きく)、これは、システムがデータを十分に高速、着信負荷を吸収することができないことを示します。 これは、内部の調整のため。 BizTalk Server が受信速度を削減する、サブスクライバーができる場合は、データを処理する原因となるための十分なバックログの蓄積、データベース テーブル内の高速です。 ボトルネックの原因がハードウェアの制限である場合は、スケール アップしてください。 スケール アップの詳細については、BizTalk Server 2010 のドキュメントでは、次のトピックを参照してください。  
  
- [BizTalk Server 層のスケール アップ](http://go.microsoft.com/fwlink/?LinkId=158073)(http://go.microsoft.com/fwlink/?LinkId=158073)します。  
  
- [SQL Server 層のスケール アップ](http://go.microsoft.com/fwlink/?LinkId=158077)(http://go.microsoft.com/fwlink/?LinkId=158077)します。  
  
  受信ハンドラーにマップされているホストにホスト インスタンス (サーバー) を追加してスケール アウトすることもできます。 スケール アウトの詳細については、BizTalk Server 2010 のドキュメントでは、次のトピックを参照してください。  
  
- [BizTalk Server 層のスケール アウト](http://go.microsoft.com/fwlink/?LinkId=158076)(http://go.microsoft.com/fwlink/?LinkId=158076)します。  
  
- [SQL Server 層のスケール アウト](http://go.microsoft.com/fwlink/?LinkId=158075)(http://go.microsoft.com/fwlink/?LinkId=158075)します。  
  
  Perfmon を使用して、システム上のリソース使用状況を監視します。 ボトルネックの原因が外部の受信場所でないことを確認することが重要です。 たとえば、高いディスク I/O のため、リモート ファイル共有が飽和状態に、リモートの発信キューをホストするサーバーが飽和状態にならない、または HTTP の負荷を生成するために使用するクライアントは、スレッドで不足していないかどうかを確認します。  
  
## <a name="processing-bottlenecks"></a>処理のボトルネック  
 Host Queue-Length のパフォーマンス カウンターが上昇している場合、オーケストレーションが十分に高速に完了しないことを示します。 詳細については、このトピックの「Perfmon カウンター表を参照してください。 この原因としては、メモリの競合や CPU の飽和が考えられます。  
  
 オーケストレーション サーバーがボトルネックになっている場合は、Perfmon を使用して原因を特定します。  
  
 サーバーが CPU の制約を受けている場合は、以下の対策を検討します。  
  
-   ワークフローが複雑な場合、オーケストレーションを複数の小さなオーケストレーションに分割することを検討してください。  
  
    > [!NOTE]  
    >  オーケストレーションを複数のワークフローに分割すると、待機時間が増加したり複雑さが増したりする可能性があります。 複数のワークフロー可能性もあります増加に発行され、BizTalkMsgBoxDb から送出されるメッセージの数で、データベースの追加の負荷が増大します。  
  
-   複雑なマップを使用する場合は、受信/送信ポートに移動できるかどうかを検討してください。 どのポートがある追加の帯域幅を確認してください。  
  
-   ハードウェアのスケール アップまたは、追加の処理サーバーを構成することでスケール アウトを検討してください。  
  
## <a name="transmitting-bottlenecks"></a>送信のボトルネック  
 スケール アップを検討してください (たとえば、ディスク、メモリ、または CPU)、リソースに送信アダプターが飽和状態にサーバーのホスト場合、サーバーまたは追加をスケール アウトは、ホスト サーバーに送信します。 送信層がボトルネックになる場合、送信先 (BizTalk の外部) でのデータの受信が遅れている可能性もあります。 送信先でのデータの受信が遅れると、メッセージ ボックス データベース (Application SendHostQ) にメッセージが蓄積されます。  
  
 すべてのエンドポイントが、トポロジのスコープ内にある場合は、先に原因を分離します。 たとえば、負荷を受信する HTTP の場所が最適に構成されているかどうかを決定します。 必要でない場合は、スケール アウトを検討します。また、過剰な出力メッセージが BizTalk によって配信されるため、変換先が増加しているかどうかを決定します。 場合は、アーカイブおよび送信先のメッセージを削除するメンテナンス プランを必要があります。 BizTalk サービスのデータをディスク ドライブにコミットするための機能深刻な影響を変換先のフォルダー内のファイル数が多いことができます。  
  
## <a name="tracking-bottlenecks"></a>追跡のボトルネック  
 追跡ホスト インスタンスは、ビジネス アクティビティ監視 (BAM) および正常性と動作状況の追跡 (HAT) データをメッセージ ボックス データベース (TrackingData テーブル) から BizTalk 追跡や BAM プライマリ インポート データベースのテーブルを移動します。 追跡ホスト インスタンスで複数のメッセージ ボックス データベースが構成されている場合はメッセージ ボックス データベースごとの 4 つのスレッドを使用します。  
  
 追跡ホスト インスタンスが CPU バウンドであることができます。 場合は、サーバーをスケール アップを検討するかホストの追跡を有効になっていると、追加のサーバーを構成することでスケール アウトします。 複数のホスト インスタンスは負荷が自動的に構成された複数のメッセージ ボックス データベースです。 スケーリングの詳細については、トピックを参照してください。 [、ソリューションのスケーリング](http://go.microsoft.com/fwlink/?LinkId=158078)(http://go.microsoft.com/fwlink/?LinkId=158078)します。  
  
 場合は、メッセージ ボックス データベースの TrackingData テーブルが大きく、多くのように構成されている、BizTalk の追跡と BAM プライマリのサイズが増加、BizTalk の追跡と BAM プライマリ インポート データベースのデータ管理ジョブが実行されていないため、します。データベースをインポートします。 これらのデータベースが大きくなりすぎないようにした後、TrackingData テーブルにデータを挿入する追跡ホストの機能に悪影響を及ぼすことができます。 これにより、メッセージ ボックス データベースのテーブルにバックアップするデータを追跡します。 TrackingData テーブルの増加により、開始するために調整が発生します。  
  
 のみ、アプリケーションでは、これが記録されたデータ量を削減し、追跡のボトルネックのリスクを軽減に必要な最小の追跡を有効にする必要があります。 オーケストレーションおよび送信/受信ポートなどの個々 の項目の追跡設定を無効にする方法については、次を参照してください。[追跡を無効にする方法](http://go.microsoft.com/fwlink/?LinkId=160064)(http://go.microsoft.com/fwlink/?LinkId=160064)します。  
  
## <a name="other"></a>その他  
 さまざまな機能がそれぞれ専用の分離ホスト インスタンスで実行されるように展開トポロジを構成します。 このように各ホスト インスタンスは、独自の (たとえば、32 ビット システム、2 GB の仮想メモリ アドレス空間、ハンドル、スレッド) 上のリソース セットを取得します。 サーバーが十分な CPU ヘッドルームと複数のホスト インスタンスをホストするためのメモリが、同じ物理コンピューターで実行するように構成することができます。 必要でない場合は、専用のサーバーに機能を移動することによってスケール アウトを検討します。 同じ機能を複数のサーバーで実行すると、高可用性の構成を実現することもできます。  
  
## <a name="biztalk-system-performance-counters"></a>BizTalk システム パフォーマンス カウンター  
  
|オブジェクト|Instance|カウンター|監視の目的|  
|------------|--------------|-------------|------------------------|  
|プロセッサ|_Total|[% プロセッサ時間]|リソースの競合|  
|Process|BTSNTSvc|Virtual Bytes|メモリ リーク/メモリの肥大化|  
|Process|BTSNTSvc|Private Bytes|メモリ リーク/メモリの肥大化|  
|Process|BTSNTSvc|Handle Count|リソースの競合|  
|Process|BTSNTSvc|スレッド数|リソースの競合|  
|Physical Disk|インスタンス (_i)|% Idle Time|リソースの競合|  
|Physical Disk|インスタンス (_i)|Avg. Disk Queue Length|リソースの競合|  
  
### <a name="cpu-contention"></a>CPU の競合  
 プロセッサが飽和状態になっている場合は、送信とオーケストレーションからの受信を分離することで、アプリケーションをフラグメントことができます。 これを行うには、個別のホストを作成、特定の機能 (受信/送信/オーケストレーション、追跡) をホストにマップおよびこれら個別のホストに専用のサーバーを追加します。 オーケストレーションの機能は、多くの場合、CPU 負荷の高いです。 オーケストレーションが別の専用サーバーで実行するためにシステムを構成する場合は、このシステム全体のスループットの向上に役立ちます。  
  
 複数のオーケストレーションが展開されている場合は、異なる専用オーケストレーション ホストに参加させることができます。 専用オーケストレーション ホストに別々 の物理サーバーのマッピングにより、別のオーケストレーションは分離され、同じ物理アドレス空間または同じサーバー上の共有リソースに対する競合しません。  
  
 使用されていないホスト インスタンスを停止します。 使用されていないホスト インスタンスには、定期的に処理するメッセージをメッセージ ボックスをチェックして CPU およびメモリ リソースの競合が発生ことができます。 さらに、未使用の停止は、場所、送信ポート、およびオーケストレーションを受信します。  
  
### <a name="spool-table-growth"></a>スプール テーブルの拡張  
 下流のボトルネックやリソースの競合には、spool のサイズが過度に増加し始めるし、全体的なパフォーマンスが低下する可能性があります。 詳細についてを参照してください「スプール テーブルの増大」[メッセージ ボックス データベース 1 のボトルネックを特定する方法](../technical-guides/how-to-identify-bottlenecks-in-the-messagebox-database1.md)します。  
  
### <a name="memory-starvation"></a>メモリ不足  
 高スループットのシナリオでは、システム メモリの需要が増大する場合があります。 使用できるメモリの量によって、32 ビット プロセスが制限されるため、各ホストが独自 2 GB のアドレス空間を受信するように、個別のホスト インスタンスに受信、処理、送信機能を分離することを推奨します。 さらに、複数のホスト インスタンスを同じ物理サーバーで実行している場合は、実際のメモリからデータをディスクにスワップを回避するために 4/8 GB のメモリをアップグレードできます。 長時間のオーケストレーションは、長い時間が割り当てられたメモリに保持できます。 これには、メモリが肥大化し、調整を開始することがあります。 サイズの大きいメッセージは、高いメモリ消費量もあります。  
  
 サイズの大きいメッセージを下げることによって処理されるときに発生するメモリの肥大化の問題の影響を軽減できます、**内部メッセージ キュー サイズ**と**CPU あたりのインプロセス メッセージ**特定ホスト用の値。  
  
> [!NOTE]  
>  待機時間が重要である場合は、変更**内部メッセージ キュー サイズ**と**CPU あたりのインプロセス メッセージ**ようにこのシステムのエンド ツー エンドの待機時間を増やすことができますに注意して行う必要があります。  
  
### <a name="disk-contention"></a>ディスクの競合  
 (たとえば、ファイルや MSMQ トランスポートの数が多い) で、ディスクが飽和状態になり場合、は、マルチ スピンドルへのアップグレードや、RAID 10 によるディスクのストライピングを検討してください。 さらに、ファイル トランスポートを使用することは、受信することを確認し、送信ファイルの数が 50,000 を超える拡張しないフォルダーに重要です。  
  
 受信フォルダーは、BizTalk Server システムに着信データを制限する場合は、大規模に拡張できます。 追加のデータを記述する BizTalk Server の機能は影響しませんこのフォルダーに拡張できるように、送信フォルダーからデータを移動する重要です。 非トランザクション MSMQ キューの場合、BizTalk Server のディスクの競合が減少するために、受信キューをリモートで作成することをお勧めします。  
  
 リモートの非トランザクション キューの構成では、キューをホストするリモート サーバーがクラスター化できるように、高可用性も提供します。  
  
### <a name="other-system-resource-contention"></a>その他のシステム リソースの競合  
 、トランスポートの種類によっては、HTTP (MaxIOThreads、MaxWorkerThreads など) は、IIS などのシステム リソースを構成する必要があります。  
  
 ASP.NET 2.0 と ASP.Net 4 で、 \<processModel autoConfig ="true"\> machine.config ファイルの設定は自動的に最適なパフォーマンスは、次の設定を構成します。  
  
- ワーカー スレッド最大数  
  
- 最大 IO スレッドの数  
  
- httpRuntime 要素の minFreeThreads 属性  
  
- httpRuntime 要素の minLocalRequestFreeThreads 属性  
  
- maxConnection 属性、 \<connectionManagement\>要素 (ネットワーク設定)  
  
  アダプターのパフォーマンスに影響するパラメーターを構成する方法の詳細については、次を参照してください。 [processModel 要素の構成設定を ASP.NET](http://go.microsoft.com/fwlink/?LinkId=158080) (http://go.microsoft.com/fwlink/?LinkId=158080)します。  
  
  BizTalk Server アダプターに影響する構成設定の詳細については、次を参照してください。[構成パラメーターを アダプターのパフォーマンスの影響を与える](http://go.microsoft.com/fwlink/?LinkID=154200)(http://go.microsoft.com/fwlink/?LinkID=154200)します。  
  
  BizTalk Server アプリケーションを最適化するだけでなく、同じサーバーで実行されている他の ASP.NET アプリケーション全体のパフォーマンスに影響することができます。 すべてのシステム リソースの需要を削減する ASP.NET アプリケーションを最適化するために重要です。 詳細については、次を参照してください。 [ASP.NET パフォーマンス](http://go.microsoft.com/fwlink/?LinkId=158081)(http://go.microsoft.com/fwlink/?LinkId=158081)します。  
  
  最大のパフォーマンスを構成する場合は、エンジン (メッセージ キュー、MQSeries)、アプリケーション、データベース、メッセージングなどの他の外部システムの最適化を検討 Active Directory、BizTalk ソリューション全体の一部であるなど。 これらの他の外部システムのいずれかでパフォーマンスのボトルネックには、BizTalk ソリューションに悪影響を及ぼすことができます。  
  
### <a name="downstream-bottlenecks"></a>下流のボトルネック  
 下流システムで BizTalk から十分な速度のデータを受け取ることがない場合、この出力データは、BizTalk データベースでバックアップされます。 これは、コマンドで、肥大化の結果、調整を開始すると、受信パイプが縮小、および BizTalk システムの全体的なスループットに影響を与えます。 この状況を直接示すは、スプール テーブルの増加です。 ボトルネックとスプール テーブルの詳細については、次を参照してください。[メッセージ ボックス データベース 1 のボトルネックを特定する方法](../technical-guides/how-to-identify-bottlenecks-in-the-messagebox-database1.md)します。  
  
### <a name="throttling-impact"></a>制限の影響  
 調整最終的に回復不可能な状態から、システムの保護を開始します。 したがって、調整を使用をシステムが正常に機能しているかどうかを確認し、問題のソースを検出することができます。 制限の状態からボトルネックの原因を特定した後は、問題の原因を特定する他のパフォーマンス カウンターを分析します。 たとえば、メッセージ ボックス データベースで競合が増加メモリ不足によって発生したディスクの過剰なページングによる CPU 使用率が高い可能性があります。 メッセージ ボックス データベースで競合が増加が飽和状態のディスク ドライブのための高いロックの競合によっても原因。 不定期の調整がパフォーマンスに重大な脅威ありませんが、永続的な調整より重要な基になる問題を示すことができます。 BizTalk Server が調整を使いますが、それらの条件の詳細については、次を参照してください。[どのように BizTalk Server 実装ホスト Throttling](http://go.microsoft.com/fwlink/?LinkID=155286) (http://go.microsoft.com/fwlink/?LinkID=155286)します。  
  
 BizTalk Server の調整に役立てる方法、使用可能なリソースを管理し、リソースの競合を最小限に抑えるの詳細については、次を参照してください。[を最適化するリソースをホストの調整](http://go.microsoft.com/fwlink/?LinkID=155770)(http://go.microsoft.com/fwlink/?LinkID=155770)します。  
  
## <a name="biztalk-application-counters"></a>BizTalk アプリケーション カウンター  
  
|オブジェクト|Instance|カウンター|説明|  
|------------|--------------|-------------|-----------------|  
|BizTalk Messaging|RxHost|Documents Received/Sec|受信速度|  
|BizTalk Messaging|TxHost|Documents Processed/Sec|送信速度|  
|XLANG/s Orchestrations|PxHost|Orchestrations Completed/Sec.|処理速度|  
|BizTalk: メッセージ ボックス: 一般的なカウンター|MsgBoxName|Spool Size|すべてのホスト キューの合計サイズ|  
|BizTalk: メッセージ ボックス: 一般的なカウンター|MsgBoxName|Tracking Data Size|メッセージ ボックスの TrackingData テーブルのサイズ|  
|BizTalk:MessageBox:Host Counters|PxHost:MsgBoxName|Host Queue - Length|特定のホスト キューに存在するメッセージの数|  
|BizTalk:MessageBox:Host Counters|TxHost:MsgBoxName|Host Queue - Length|特定のホスト キューに存在するメッセージの数|  
|BizTalk:Message Agent|RxHost|Database Size|公開 (PxHost) キューのサイズ|  
|BizTalk:Message Agent|PxHost|Database Size|公開 (TxHost) キューのサイズ|  
|BizTalk:Message Agent|HostName|Message Delivery Throttling State|XLANG と送信トランスポートに影響|  
|BizTalk:Message Agent|HostName|Message Publishing Throttling State|XLANG と受信トランスポートに影響|  
  
### <a name="where-do-i-start"></a>監視の開始  
 監視、 **Message Delivery Throttling State**と**Message Publishing Throttling State**各ホスト インスタンスをお勧めします。 これらのカウンターの値は、0 ではない、これは、BizTalk システムで調整することを示します。 し、さらに、ボトルネックの原因を分析することができます。 その他のパフォーマンス カウンターの説明については、次を参照してください。[データベース層のボトルネック](../technical-guides/bottlenecks-in-the-database-tier.md)します。  
  
## <a name="orchestration-engine-performance-counters"></a>オーケストレーション エンジンのパフォーマンス カウンター  
 継続的なオーケストレーション dehydration\rehydration と永続化ポイントが全体のパフォーマンスに重大な影響を与えることができますのでは、オーケストレーションの実行時の設定をチューニング微調整することを強くお勧めします。  複数の永続化ポイントとトランザクションのスコープを含む可能性のある複雑なオーケストレーションをテストするときに、次のカウンターを使用する必要があります。  
  
|カウンター|コメント|  
|-------------|--------------|  
|Orchestrations dehydrated/sec|1 秒あたりの平均待避数。|  
|Orchestrations rehydrated/sec|1 秒あたりの平均復元数。|  
|Persistence points/sec|永続化されたオーケストレーション インスタンスの 1 秒あたりの平均数。|  
|Orchestrations resident in memory|ホスト インスタンスによって現在ホストされているオーケストレーション インスタンスの数。|  
|Orchestrations completed/sec|1 秒あたりに完了した平均数です。|  
|Orchestrations suspended/sec|1 秒あたりの平均中断数。|  
|Transactional scopes committed/sec|1 秒あたりの平均コミット数。|  
|Transactional scopes aborted/sec|1 秒あたりの平均中止数。|  
|Transactional scopes compensated/sec|1 秒あたりの平均補正数。|  
  
## <a name="backlog-buildup"></a>バックログの蓄積  
 1 対 1 の展開シナリオの 1 つの結果を受信メッセージの処理し、システムでは、バックログが、送信速度が受信速度と等しくない場合は、送信、します。 このような状況では、スプール サイズを監視できます。 送信速度のボトルネックの原因を判断するときは、一度に 1 つのユース ケース シナリオを実行します。 オーケストレーションを分離する、受信場所、および送信ホストを分離する場所。  
  
 ホストを監視するため、パフォーマンス モニターのログを BizTalk:Message Box:host Counters を追加します。 Host Queue - Length: 特定のホスト キュー内のメッセージの合計数を追跡するカウンター。 これらのカウンターの 1 つ以上が続く場合は、それらのホストによって実行される成果物に特に注意をできるように、時間の経過と共に拡張します。  
  
 スプールが直線的になっていますが場合、は、アプリケーション キューがスプールの増大を決定します。  
  
 アプリケーション キューのいずれもが成長しています、spool のサイズが成長を続ける場合は、purge ジョブが追いついていないことが可能性があります。 これは、エージェントが実行されていないか、SQL Server の他のシステム リソースの競合がある場合に発生します。  
  
 アプリケーション キューのいずれかが増えている場合は、増加の原因を診断します。 特定のアプリケーション キューのドレインを実行するようになっているシステム上のシステム リソースを監視する (たとえば、オーケストレーション ホスト-q が増加しているサーバー上の CPU 不足が原因)。 さらに、特定のホスト インスタンスの制限カウンターの値を確認します。  
  
 BizTalk:Messsage エージェントのメッセージ配信の調整状態と Message Publishing Throttling State パフォーマンス カウンターがゼロでない場合は、スロットルの理由を確認する値を確認してください (たとえば、メモリのしきい値を超えると、インフライトのメッセージ数すぎます。高など)。  
  
## <a name="stand-alone-profiler"></a>スタンドアロンの Profiler  
 パフォーマンス カウンターは、高レベルのボトルネックの場所を検出するために使用できます。 ただし、場所が絞り込んだ後、簡単に行うには、最も近いには、複数のコードの問題を調査する必要があります。 Visual Studio 2010 に付属しているスタンドアロン Profiler は、コードがそのサイクルのほとんどを費やすは診断に役立つ非常に便利なツールを指定できます。 詳細については、「  
  
## <a name="l2l3-cache"></a>L2 と L3 キャッシュ  
 ハードウェアの観点から、オンボードの CPU キャッシュを使用して最大のメリットを得ることができます。 CPU キャッシュが大きければキャッシュのヒット率が高くなり、システムでメモリからディスクへのデータのページングを行う必要が少なくなります。  
  
## <a name="64-bit-performance-bottlenecks"></a>64 ビット パフォーマンスのボトルネック  
 64 ビット システムのパフォーマンスが 32 ビット システムより低く見える場合があります。 これは、いくつかの理由から、最も重要な 1 つの可能なメモリします。  
  
 2 GB のメモリの 32 ビット システムのパフォーマンスを測定して、メモリの 2 gb のような 64 ビット システムに結果を比較する、同じことを比較できません。 64 ビット システムは、ディスク i/o バインド (ディスクのアイドル時間の割合が低いと高いディスク キューの長さ) と CPU バインド (CPU が上限と高のコンテキストの切り替え) に表示されます。 ただし、これは、ファイル I/O を実行する 64 ビット システムでは、高価ためにありません。  
  
 64 ビット システムより多くのメモリ集中型 (64 ビット アドレッシング) は、その結果は、オペレーティング システムが 2 GB の使用可能なメモリの大部分を消費します。 このような他のほとんどの操作、ファイル サブシステムを強調してディスクへのページングが発生します。 そのため、システムのメモリの両方のデータ入力/出力をページングする CPU サイクルが消費し、コード、コストの高いディスク待機時間の影響を受けます。 それが、ディスクの競合と CPU 消費の増加として現れます。  
  
 この問題を軽減する方法は、メモリをアップグレードすることで、サーバーをスケール アップします。 8 GB にスケール アップをお勧め、ただしより多くのメモリを追加することはないヘルプ、問題の原因がメモリ不足が原因の CPU 不足でない限り、スループットを向上させます。  
  
## <a name="using-bam-to-identify-bottlenecks-and-high-latency-issues"></a>BAM を使用してボトルネックや待機時間の長い問題を特定するには  
 低待機時間が重要な場合は、BizTalk Server システム内の各段階を完了にかかる時間を測定する BAM を使用できます。 HAT を使用して、メッセージの状態をデバッグおよびメッセージのルーティングの問題の原因を診断するのにこと、メッセージ フローのさまざまなポイントを追跡するために BAM を使用することができます。 BAM 追跡を継続アクティビティを定義するプロファイルを作成すると、ワークフロー プロセス内で最も高価な段階を追跡するシステムのさまざまな部分の間の待機時間を測定することができます。  
  
 HAT のオーケストレーション デバッガーを使用して、中断されたインスタンスのクエリ実行、デバッグ モードでインスタンスを再開および Technical Details ビューを使用して適切なブレークポイントを追加することができます。 これにより、動作とデバッグ メッセージをステップごとにトレースすることができます。  
  
 ブレークポイントを設定して以下のイベントを追跡することができます。  
  
- オーケストレーションの開始と終了  
  
- 図形の開始と終了  
  
- メッセージの送信と受信  
  
- 例外  
  
  各ブレークポイントで、ローカル変数、メッセージとそのプロパティ、ポート、およびロール リンクに関する情報を調べることができます。  
  
## <a name="see-also"></a>参照  
 [ボトルネックの検索と解消](../technical-guides/finding-and-eliminating-bottlenecks.md)