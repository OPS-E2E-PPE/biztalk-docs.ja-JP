---
title: アプリケーションの更新のベスト プラクティス |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 072eaf25-a1ee-4af3-b034-525a04260ef4
caps.latest.revision: 3
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 75dbde61369cdc8658dd9b39fa75fe2655225222
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/27/2018
ms.locfileid: "37001731"
---
# <a name="best-practices-for-updating-applications"></a><span data-ttu-id="d9520-102">アプリケーションの更新のベスト プラクティス</span><span class="sxs-lookup"><span data-stu-id="d9520-102">Best Practices for Updating Applications</span></span>
<span data-ttu-id="d9520-103">このトピックでは、BizTalk アプリケーションとアイテムを更新するときに使用を検討する必要がありますのベスト プラクティスについて説明します。</span><span class="sxs-lookup"><span data-stu-id="d9520-103">This topic describes best practices that you should consider using when updating BizTalk applications and artifacts.</span></span>  
  
## <a name="versioning"></a><span data-ttu-id="d9520-104">バージョン管理</span><span class="sxs-lookup"><span data-stu-id="d9520-104">Versioning</span></span>  
 <span data-ttu-id="d9520-105">**バージョン管理戦略を実装します。**</span><span class="sxs-lookup"><span data-stu-id="d9520-105">**Implement a versioning strategy**</span></span>  
  
- <span data-ttu-id="d9520-106">適切なバージョン管理戦略では、長時間実行されるトランザクションの使用など、BizTalk アプリケーションのアップグレードやバグ修正を行うダウンことはできません必要があります。</span><span class="sxs-lookup"><span data-stu-id="d9520-106">A good versioning strategy is essential if long-running transactions are used or the BizTalk application cannot be taken down to do upgrades or bug fixes.</span></span> <span data-ttu-id="d9520-107">すべての BizTalk アイテムのバージョン管理戦略を計画する必要があります。 オーケストレーションとマップでスキーマ、マップ、カスタム アダプター、パイプライン、パイプライン コンポーネント、オーケストレーション、ビジネス ルール、BAM、およびカスタム クラスが呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="d9520-107">You should plan the versioning strategy of all BizTalk artifacts: schemas, maps, custom adapters, pipelines, pipeline components, orchestrations, business rules, BAM, and custom classes called in orchestrations and maps.</span></span>  
  
  <span data-ttu-id="d9520-108">**BizTalk 管理データベースおよびグローバル アセンブリ キャッシュ (GAC) 内のアセンブリと一致します。**</span><span class="sxs-lookup"><span data-stu-id="d9520-108">**Match the assemblies in the BizTalk Management database and the global assembly cache (GAC)**</span></span>  
  
- <span data-ttu-id="d9520-109">アプリケーションが正しく機能するようアセンブリの同じバージョンは、GAC のように、BizTalk 管理データベースのことを確認します。</span><span class="sxs-lookup"><span data-stu-id="d9520-109">Ensure that the same versions of assemblies are in the BizTalk Management database as in the GAC, so that your application functions properly.</span></span> <span data-ttu-id="d9520-110">アセンブリを展開するときに必ずしもそのアセンブリを GAC にインストールしていない場合は、GAC と BizTalk 管理データベースに異なるバージョンのアセンブリが格納されている可能性があります。</span><span class="sxs-lookup"><span data-stu-id="d9520-110">If you do not always install an assembly in the GAC when you deploy it, you might have different versions in the GAC and the BizTalk Management database, which will cause processing errors during run time.</span></span>  
  
  <span data-ttu-id="d9520-111">**BizTalk アセンブリ チェッカーと GAC のリモート ツールを使用してバージョン管理を確認します。**</span><span class="sxs-lookup"><span data-stu-id="d9520-111">**Use the BizTalk Assembly Checker and Remote GAC tool to verify versioning**</span></span>  
  
- <span data-ttu-id="d9520-112">**BizTalk アセンブリ チェッカーと GAC のリモート ツール**(BTSAssemblyChecker.exe) が BizTalk 管理データベースに展開されたアセンブリのバージョンをチェックしが、すべての BizTalk の GAC に正しく登録されていることを確認しますサーバーのコンピューター。</span><span class="sxs-lookup"><span data-stu-id="d9520-112">The **BizTalk Assembly Checker and Remote GAC tool** (BTSAssemblyChecker.exe) checks the versions of assemblies deployed to the BizTalk Management database and verifies that they are correctly registered in the GAC on all BizTalk Server computers.</span></span> <span data-ttu-id="d9520-113">このツールを使用すると、特定の BizTalk アプリケーションのアイテムを含むすべてのアセンブリが BizTalk のすべてのノードにインストールされていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="d9520-113">You can use this tool to verify that all the assemblies containing the artifacts of a certain BizTalk application are installed on all BizTalk nodes.</span></span> <span data-ttu-id="d9520-114">このツールは、サイド バイ サイド展開アプローチを使用する場合に特に、各 BizTalk コンピューターに、一連のアセンブリの正しいバージョンがインストールされていることを確認する solid のバージョン管理戦略を組み合わせてに特に便利です。</span><span class="sxs-lookup"><span data-stu-id="d9520-114">The tool is particularly useful in conjunction with a solid versioning strategy to verify that the correct version of a set of assemblies is installed on each BizTalk machine, especially when side-by-side deployment approach is used.</span></span>  
  
- <span data-ttu-id="d9520-115">このツールは Support\Tools\x86\BTSAssemblyChecker.exe で BizTalk Server のインストール メディアで使用できます。</span><span class="sxs-lookup"><span data-stu-id="d9520-115">The tool is available with the BizTalk Server installation media at Support\Tools\x86\BTSAssemblyChecker.exe.</span></span>  
  
  <span data-ttu-id="d9520-116">**バージョン管理製品を使用します。**</span><span class="sxs-lookup"><span data-stu-id="d9520-116">**Use a Versioning Product**</span></span>  
  
- <span data-ttu-id="d9520-117">BizTalk アイテムの追跡とバージョン管理の Microsoft Visual Studio® Team Foundation Server 2010 など、バージョン管理製品を使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d9520-117">You should use a versioning product, such as Microsoft Visual Studio® Team Foundation Server 2010, for tracking and versioning BizTalk artifacts.</span></span> <span data-ttu-id="d9520-118">Microsoft Visual Studio® Team Foundation Server 2010 の詳細については、次を参照してください[Microsoft Visual Studio® Team Foundation Server 2010](http://go.microsoft.com/fwlink/?LinkId=210637) (http://go.microsoft.com/fwlink/?LinkId=210637)</span><span class="sxs-lookup"><span data-stu-id="d9520-118">For more information about Microsoft Visual Studio® Team Foundation Server 2010 see [Microsoft Visual Studio® Team Foundation Server 2010](http://go.microsoft.com/fwlink/?LinkId=210637) (http://go.microsoft.com/fwlink/?LinkId=210637)</span></span>  
  
  <span data-ttu-id="d9520-119">**複数の BizTalk アプリケーションにアイテムを要素**</span><span class="sxs-lookup"><span data-stu-id="d9520-119">**Factor artifacts into multiple BizTalk applications**</span></span>  
  
- <span data-ttu-id="d9520-120">BizTalk アイテムのアセンブリのバージョン管理を実行するには、BizTalk ソリューションのアセンブリ必要があります考慮する BizTalk Server のバージョン管理を許可するように (パッケージ化)。</span><span class="sxs-lookup"><span data-stu-id="d9520-120">In order to perform assembly versioning of BizTalk artifacts, your BizTalk solution assemblies need to be factored (packaged) in such a way to allow for BizTalk Server versioning.</span></span> <span data-ttu-id="d9520-121">ファクタリングに関する詳細については、[アプリケーションへの成果物を追加する](../technical-guides/adding-artifacts-to-an-application.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d9520-121">For more information about factoring, see [Adding Artifacts to an Application](../technical-guides/adding-artifacts-to-an-application.md).</span></span>  
  
## <a name="updating-an-application"></a><span data-ttu-id="d9520-122">アプリケーションの更新</span><span class="sxs-lookup"><span data-stu-id="d9520-122">Updating an Application</span></span>  
 <span data-ttu-id="d9520-123">**.Msi ファイルを使用してアプリケーションを更新します。**</span><span class="sxs-lookup"><span data-stu-id="d9520-123">**Use an .msi file to update an application**</span></span>  
  
-   <span data-ttu-id="d9520-124">アプリケーションのアップグレードは、実稼働環境で操作を意図的かつ正確では通常です。</span><span class="sxs-lookup"><span data-stu-id="d9520-124">Upgrading applications is typically a deliberate and precise operation in production.</span></span> <span data-ttu-id="d9520-125">アプリケーションをアップグレードするときに通常、手動のチェックリストを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d9520-125">When you upgrade an application, you should normally use a manual checklist.</span></span> <span data-ttu-id="d9520-126">ただし、.msi ファイルを使用して特定の手順を効率化することができます。</span><span class="sxs-lookup"><span data-stu-id="d9520-126">However, you may be able to streamline certain steps by using an .msi file.</span></span> <span data-ttu-id="d9520-127">.Msi ファイルを使用するときに再頒布可能パッケージに、アプリケーションのアイテムをラップすることができます。</span><span class="sxs-lookup"><span data-stu-id="d9520-127">When you use an .msi file, you can wrap up your application artifacts into a distributable package.</span></span> <span data-ttu-id="d9520-128">.Msi ファイルは、複数のランタイム ボックスを最新の Dll にロールアウトまたはグループ レベルの展開を実行するときに特に便利です。</span><span class="sxs-lookup"><span data-stu-id="d9520-128">An .msi file is particularly useful when you roll out updated DLLs to multiple runtime boxes or perform a group-level deployment.</span></span> <span data-ttu-id="d9520-129">.Msi ファイルを作成するときに、他のすべてのリソースが変更されていないとバインドをパッケージから除外する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d9520-129">When you create an .msi file, you should exclude all other unchanged resources and bindings from the package.</span></span>  
  
-   <span data-ttu-id="d9520-130">BizTalk アセンブリを更新する場合停止、参加解除、再参加させ、およびしインポートして .msi ファイルをインストールした後と前に、BizTalk アイテムを手動で開始をする必要があります。</span><span class="sxs-lookup"><span data-stu-id="d9520-130">If you update a BizTalk assembly, you should stop, unenlist, re-enlist, and then start BizTalk artifacts manually before and after you import and install the .msi file.</span></span> <span data-ttu-id="d9520-131">BizTalk アセンブリの更新の詳細については、[チェックリスト: アセンブリを更新](../technical-guides/checklist-updating-an-assembly.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d9520-131">For more information about updating a BizTalk assembly, see [Checklist: Updating an Assembly](../technical-guides/checklist-updating-an-assembly.md).</span></span>  
  
-   <span data-ttu-id="d9520-132">サイド バイ サイド バージョン管理を使用して BizTalk Server アセンブリをアップグレードする場合は前に、と後、.msi ファイルを使用して、手動の手順を実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d9520-132">If you upgrade a BizTalk Server assembly using side-by-side versioning, you will have to perform manual steps before and after using the .msi file.</span></span> <span data-ttu-id="d9520-133">必要な手動の手順の詳細については、[チェックリスト: サイド バイ サイドで、アプリケーションを使用してバージョン管理を更新](../technical-guides/checklist-updating-an-application-using-side-by-side-versioning.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d9520-133">For more information about the manual steps that are required, see [Checklist: Updating an Application Using Side-by-Side Versioning](../technical-guides/checklist-updating-an-application-using-side-by-side-versioning.md).</span></span>  
  
## <a name="updating-an-assembly"></a><span data-ttu-id="d9520-134">アセンブリの更新</span><span class="sxs-lookup"><span data-stu-id="d9520-134">Updating an Assembly</span></span>  
 <span data-ttu-id="d9520-135">**運用環境でアセンブリのバージョンがインクリメントします。**</span><span class="sxs-lookup"><span data-stu-id="d9520-135">**Increment the version of an assembly in a production environment**</span></span>  
  
- <span data-ttu-id="d9520-136">実稼働環境で実行されているアセンブリを更新する場合は、常にアセンブリ バージョン番号を増やす必要があります。</span><span class="sxs-lookup"><span data-stu-id="d9520-136">If you are updating an assembly that is running in a production environment, you should always increment the assembly version number.</span></span>  
  
  <span data-ttu-id="d9520-137">**更新プログラム、更新されたアセンブリと GAC**</span><span class="sxs-lookup"><span data-stu-id="d9520-137">**Update the GAC with an updated assembly**</span></span>  
  
- <span data-ttu-id="d9520-138">オーケストレーション、スキーマ、またはマップを含むアセンブリを更新するときに、新しいバージョンを含むアセンブリと GAC を更新する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d9520-138">When you update an assembly containing an orchestration, schema, or map, you must update the GAC with the assembly containing the new version.</span></span> <span data-ttu-id="d9520-139">それ以外の場合、BizTalk Server は期限切れのバージョンを使用します。</span><span class="sxs-lookup"><span data-stu-id="d9520-139">Otherwise, BizTalk Server will use the outdated version.</span></span> <span data-ttu-id="d9520-140">これを行うには、アプリケーションが関連付けられているホストのインスタンスを実行している各コンピューターで、更新されたアイテムが含まれているアセンブリの古いバージョンを GAC からアンインストールし、新しいバージョンをインストールします。</span><span class="sxs-lookup"><span data-stu-id="d9520-140">To do this, on each computer that is running an instance of the host to which an application is bound, uninstall from the GAC the outdated version of the assembly containing the updated artifact and make sure that the new version is installed.</span></span>  
  
  <span data-ttu-id="d9520-141">**アセンブリを更新した後のホスト インスタンスを再起動します。**</span><span class="sxs-lookup"><span data-stu-id="d9520-141">**Restart a host instance after updating an assembly**</span></span>  
  
- <span data-ttu-id="d9520-142">既存のアプリケーションでの BizTalk アセンブリが更新された場合は、変更を反映するためのホスト インスタンスを再起動する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d9520-142">If a BizTalk assembly in an existing application is updated, you may need to restart host instances for the changes to take effect.</span></span> <span data-ttu-id="d9520-143">ホスト インスタンスを再起動すると、ホスト インスタンスで実行されているその他のすべてのアプリケーションが停止します。</span><span class="sxs-lookup"><span data-stu-id="d9520-143">Restarting a host instance stops all other applications that are running on the host instance.</span></span>  
  
## <a name="updating-an-artifact"></a><span data-ttu-id="d9520-144">アイテムの更新</span><span class="sxs-lookup"><span data-stu-id="d9520-144">Updating an Artifact</span></span>  
 <span data-ttu-id="d9520-145">**依存している成果物の前に、依存するアイテムを展開解除します。**</span><span class="sxs-lookup"><span data-stu-id="d9520-145">**Undeploy a dependent artifact before the artifact that it depends on**</span></span>  
  
- <span data-ttu-id="d9520-146">別のアイテムが依存するアイテムの展開を解除する場合、依存するアイテムを最初に展開解除する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d9520-146">If you are undeploying an artifact on which another artifact depends, you must undeploy the dependent artifact first.</span></span>  
  
  > [!NOTE]  
  >  <span data-ttu-id="d9520-147">最初、依存するアイテムの展開を解除するはありません、BizTalk Server 管理コンソールは警告を表示して、間違った順序でアイテムの展開解除されないようにします。</span><span class="sxs-lookup"><span data-stu-id="d9520-147">If you do not undeploy the dependent artifact first, the BizTalk Server Administration console will display a warning and prevent you from undeploying artifacts in the incorrect order.</span></span>  
  
  <span data-ttu-id="d9520-148">**別のアプリケーションが依存している成果物を停止できません。**</span><span class="sxs-lookup"><span data-stu-id="d9520-148">**Do not stop an artifact that another application depends on**</span></span>  
  
- <span data-ttu-id="d9520-149">あるアプリケーション内にあるアイテムを停止すると (アプリケーション全体を停止した場合など)、このアプリケーションに依存する別のアプリケーションが正しく機能しなくなります。</span><span class="sxs-lookup"><span data-stu-id="d9520-149">If you stop an artifact in one application (which may result from stopping the entire application) that another application depends on, the dependent application will not function correctly.</span></span> <span data-ttu-id="d9520-150">アプリケーションの停止の詳細については、[BizTalk アプリケーション開始および停止方法](http://go.microsoft.com/fwlink/?LinkID=154729)(http://go.microsoft.com/fwlink/?LinkID=154729)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d9520-150">For more information about stopping an application, see [How to Start and Stop a BizTalk Application](http://go.microsoft.com/fwlink/?LinkID=154729) (http://go.microsoft.com/fwlink/?LinkID=154729).</span></span>  
  
  <span data-ttu-id="d9520-151">**アイテムを移動する前にアセンブリへの参照を追加します。**</span><span class="sxs-lookup"><span data-stu-id="d9520-151">**Add a reference to an assembly before moving an artifact**</span></span>  
  
- <span data-ttu-id="d9520-152">別のアプリケーションにアイテムを移動する場合は、移動するアイテムが依存するアイテムが含まれているアプリケーションを移動先のアプリケーションが参照している場合を除き、そのアイテムが依存するその他のアイテムも移動されます。</span><span class="sxs-lookup"><span data-stu-id="d9520-152">When you move an artifact to a new application, any other artifacts on which it has dependencies are also moved unless the new application has a reference to the application(s) containing the artifacts on which the moved artifact depends.</span></span> <span data-ttu-id="d9520-153">また、移動するアイテムに依存しているアイテムも、そのようなアイテムが含まれているアプリケーションが移動先のアプリケーションを参照している場合を除き、移動先のアプリケーションに移動されます。</span><span class="sxs-lookup"><span data-stu-id="d9520-153">Also, any artifacts that have dependencies on the moved artifact are moved unless the application(s) containing them have a reference to the new application.</span></span> <span data-ttu-id="d9520-154">アイテムを移動する際には、同時に移動されるその他のアイテムの一覧が表示されます。</span><span class="sxs-lookup"><span data-stu-id="d9520-154">When moving an artifact, you are shown the list of other artifacts that will also be moved.</span></span>  
  
## <a name="updating-bindings"></a><span data-ttu-id="d9520-155">バインドを更新しています</span><span class="sxs-lookup"><span data-stu-id="d9520-155">Updating Bindings</span></span>  
 <span data-ttu-id="d9520-156">**バインドの再構成を自動化します。**</span><span class="sxs-lookup"><span data-stu-id="d9520-156">**Automate the reconfiguration of bindings**</span></span>  
  
-   <span data-ttu-id="d9520-157">アプリケーションのアセンブリを更新すると、多くの場合、そのバインドが上書きされます。また、アセンブリがまったくバインドされず、バインドの再構成を手動で行う必要が生じることもあります。</span><span class="sxs-lookup"><span data-stu-id="d9520-157">When you update an assembly in an application, its bindings are often overwritten or else the assembly may not be bound at all, forcing you to manually reconfigure bindings.</span></span> <span data-ttu-id="d9520-158">バインド ファイルを使用して、このプロセスを自動化できます。</span><span class="sxs-lookup"><span data-stu-id="d9520-158">You can automate this process by using a binding file.</span></span> <span data-ttu-id="d9520-159">アセンブリの同じバージョンを更新する場合最初に、アセンブリのバインド ファイルをエクスポートし、アセンブリを更新、アプリケーションにアセンブリをインポートし、バインド ファイルをインポートすることによって、以前のバインドを適用します。</span><span class="sxs-lookup"><span data-stu-id="d9520-159">If you are updating the same version of an assembly, you can first export a binding file for the assembly, then update the assembly, then import the assembly into the application, and then reapply the previous bindings by importing the binding file.</span></span> <span data-ttu-id="d9520-160">新しいバージョンのアセンブリを更新する場合は、バインド ファイルのエクスポート、アセンブリの新しいバージョンを反映、アプリケーションに新しいアセンブリをインポートおよびバインド ファイルをインポートすることによって新しいバインドを適用するファイルを編集できます。</span><span class="sxs-lookup"><span data-stu-id="d9520-160">If you are updating an assembly with a newer version, you can export a binding file, edit the file to reflect the new assembly version, import the new assembly into the application, and then apply the new bindings by importing the binding file.</span></span> <span data-ttu-id="d9520-161">バインド ファイルの詳細については、[をバインド ファイルのバインドのエクスポート方法](../technical-guides/how-to-export-bindings-to-a-binding-file.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d9520-161">For more information about binding files, see [How to Export Bindings to a Binding File](../technical-guides/how-to-export-bindings-to-a-binding-file.md).</span></span> <span data-ttu-id="d9520-162">バインド ファイルの編集の詳細については、[バインド ファイルのカスタマイズ](http://go.microsoft.com/fwlink/?LinkID=155000)(http://go.microsoft.com/fwlink/?LinkID=155000)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d9520-162">For more information about editing a binding file, see [Customizing Binding Files](http://go.microsoft.com/fwlink/?LinkID=155000) (http://go.microsoft.com/fwlink/?LinkID=155000).</span></span>  
  
## <a name="starting-or-stopping-an-application"></a><span data-ttu-id="d9520-163">開始または停止するアプリケーション</span><span class="sxs-lookup"><span data-stu-id="d9520-163">Starting or Stopping an Application</span></span>  
 <span data-ttu-id="d9520-164">**成果物を更新する、アプリケーションを停止します。**</span><span class="sxs-lookup"><span data-stu-id="d9520-164">**Stop an application to update artifacts**</span></span>  
  
-   <span data-ttu-id="d9520-165">アプリケーションのアイテムを更新する、アプリケーションを停止しない場合は、エンドポイントを無効にして、MessageBox データベースにパブリケーションを停止、停止、および実行中のインスタンスを参加解除を一時的にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="d9520-165">If you do not stop an application to update artifacts in the application, you need to temporarily halt publication to the MessageBox database by disabling endpoints, and stop and unenlist any running instances.</span></span> <span data-ttu-id="d9520-166">停止して、実行中のインスタンスを参加解除、すべての退避または中断されたインスタンス必要があります手動で再開し、完了すると、か終了します。</span><span class="sxs-lookup"><span data-stu-id="d9520-166">To stop and unenlist running instances, all dehydrated or suspended instances must be either manually resumed and completed, or terminated.</span></span>  
  
-   <span data-ttu-id="d9520-167">アイテムを更新したり、アプリケーションをインストールするためにアプリケーションを停止する必要はありませんが、アイテムを更新する場合は常にアプリケーションを停止することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="d9520-167">Although it is not required to stop an application in order to update an artifact or install the application, we recommend that you always stop an application when you update an artifact.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d9520-168">参照</span><span class="sxs-lookup"><span data-stu-id="d9520-168">See Also</span></span>  
 [<span data-ttu-id="d9520-169">バインド ファイルにバインドをエクスポートする方法</span><span class="sxs-lookup"><span data-stu-id="d9520-169">How to Export Bindings to a Binding File</span></span>](../technical-guides/how-to-export-bindings-to-a-binding-file.md)