---
title: ボトルネックの調査 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 2ab8e485-ffe5-4f71-9ce2-f72c0c939e5d
caps.latest.revision: 6
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 35bb2b4c9d8eef862b2a0b009802b3bd5801320e
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65294806"
---
# <a name="investigating-bottlenecks"></a><span data-ttu-id="4854f-102">ボトルネックの調査</span><span class="sxs-lookup"><span data-stu-id="4854f-102">Investigating Bottlenecks</span></span>
<span data-ttu-id="4854f-103">このトピックでは、ボトルネックを調査するための推奨プロセスについて説明します。</span><span class="sxs-lookup"><span data-stu-id="4854f-103">This topic describes a recommended process for investigating bottlenecks.</span></span>  
  
## <a name="what-is-the-source-of-the-problem"></a><span data-ttu-id="4854f-104">問題の原因は何ですか。</span><span class="sxs-lookup"><span data-stu-id="4854f-104">What is the source of the problem?</span></span>  
 <span data-ttu-id="4854f-105">ボトルネックの原因には、ハードウェアまたは関連するソフトウェアです。</span><span class="sxs-lookup"><span data-stu-id="4854f-105">The source of the bottleneck could be hardware or software related.</span></span> <span data-ttu-id="4854f-106">リソースが使用されていない場合は、通常のボトルネックを示す値。</span><span class="sxs-lookup"><span data-stu-id="4854f-106">When resources are underused, it is usually an indication of a bottleneck.</span></span> <span data-ttu-id="4854f-107">ボトルネックは、ハードウェアの制限、非効率的なソフトウェア構成、または両方によって発生することができます。</span><span class="sxs-lookup"><span data-stu-id="4854f-107">Bottlenecks can be caused by hardware limitations, by inefficient software configurations, or by both.</span></span>  
  
 <span data-ttu-id="4854f-108">という 1 つのボトルネックを軽減する可能性が次の 1 つの探索段階的なプロセスは、ボトルネックを特定します。</span><span class="sxs-lookup"><span data-stu-id="4854f-108">Identifying bottlenecks is an incremental process whereby alleviating one bottleneck can lead to the discovery of the next one.</span></span> <span data-ttu-id="4854f-109">識別して、これらのボトルネックを緩和の技術は、このトピックの目的です。</span><span class="sxs-lookup"><span data-stu-id="4854f-109">The science of identifying and alleviating these bottlenecks is the objective of this topic.</span></span> <span data-ttu-id="4854f-110">短時間のピーク時に実行するシステムのことができます。</span><span class="sxs-lookup"><span data-stu-id="4854f-110">It is possible for a system to perform at peaks for short periods of time.</span></span> <span data-ttu-id="4854f-111">ただし、維持可能なスループットのシステムのみを処理できます速度の遅いコンポーネント。</span><span class="sxs-lookup"><span data-stu-id="4854f-111">However, for sustainable throughput a system can only process as fast as its slowest performing component.</span></span>  
  
## <a name="using-an-iterative-approach-to-testing"></a><span data-ttu-id="4854f-112">テストを反復的なアプローチを使用します。</span><span class="sxs-lookup"><span data-stu-id="4854f-112">Using an iterative approach to testing</span></span>  
 <span data-ttu-id="4854f-113">または (オーケストレーション/データベース) の中間に、システムのエンドポイント (入り口/出口) でボトルネックが発生することができます。</span><span class="sxs-lookup"><span data-stu-id="4854f-113">Bottlenecks can occur at the endpoints (entry/exit) of the system or in the middle (orchestration/database).</span></span> <span data-ttu-id="4854f-114">ボトルネックを特定した後は、ソースを識別するために構造化されたアプローチを使用します。</span><span class="sxs-lookup"><span data-stu-id="4854f-114">After the bottleneck has been isolated, use a structured approach to identify the source.</span></span> <span data-ttu-id="4854f-115">ボトルネックを緩和すると、それが、新たなボトルネックが導入されていない他の場所で、システムのことを確認するには、もう一度パフォーマンスを測定する重要です。</span><span class="sxs-lookup"><span data-stu-id="4854f-115">After the bottleneck is eased, it is important to measure performance again to ensure that a new bottleneck has not been introduced elsewhere in the system.</span></span>  
  
 <span data-ttu-id="4854f-116">識別するボトルネックを修復するプロセスは、反復的な方法で行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="4854f-116">The process of identifying and fixing bottlenecks should be done in an iterative manner.</span></span> <span data-ttu-id="4854f-117">一度に 1 つだけのパラメーターを異なる、各テストの実行中に同じ手順を繰り返しますおよびし、1 つの変更の影響を確認するパフォーマンスの測定します。</span><span class="sxs-lookup"><span data-stu-id="4854f-117">Vary only one parameter at a time, repeat exactly the same steps during each test run, and then measure performance to verify the impact of the single modification.</span></span> <span data-ttu-id="4854f-118">一度に 1 つ以上のパラメーターをさまざまな変更の効果を非表示でした。</span><span class="sxs-lookup"><span data-stu-id="4854f-118">Varying more than one parameter at a time could conceal the effect of the change.</span></span>  
  
 <span data-ttu-id="4854f-119">たとえば、パラメーター 1 を変更するには、パフォーマンスが向上します。</span><span class="sxs-lookup"><span data-stu-id="4854f-119">For example, changing parameter 1 could improve performance.</span></span> <span data-ttu-id="4854f-120">ただし、パラメーター 1 の変更を組み合わせて 2 番目のパラメーターを変更することが悪影響を与えます、negate パラメーター 1 の変更の利点があります。</span><span class="sxs-lookup"><span data-stu-id="4854f-120">However, changing parameter 2 in conjunction with changing parameter 1 could have a detrimental effect and negate the benefits of changing parameter 1.</span></span> <span data-ttu-id="4854f-121">これを net 0 効果、さまざまなパラメーター 1 の効果が偽陰性、およびさまざまなパラメーター 2 の影響の偽陽性になります。</span><span class="sxs-lookup"><span data-stu-id="4854f-121">This leads to a net zero effect and results in a false negative on the effect of varying parameter 1 and a false positive on the effect of varying parameter 2.</span></span>  
  
## <a name="testing-consistency"></a><span data-ttu-id="4854f-122">テストの一貫性</span><span class="sxs-lookup"><span data-stu-id="4854f-122">Testing consistency</span></span>  
 <span data-ttu-id="4854f-123">パフォーマンス特性を測定する設定を変更した後は、変更の結果の検証に行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="4854f-123">Measuring performance characteristics after changing settings should be done to validate the effect of the change.</span></span>  
  
-   <span data-ttu-id="4854f-124">**ハードウェア -** ハードウェアのさまざまな一貫性のない動作が発生し、誤解を招く結果が生成するために、一貫性のあるハードウェアを使用します。</span><span class="sxs-lookup"><span data-stu-id="4854f-124">**Hardware -** Use consistent hardware because varying the hardware can cause inconsistent behavior and produce misleading results.</span></span> <span data-ttu-id="4854f-125">たとえば、BizTalk ソリューションのパフォーマンスをテストするのにラップトップ コンピューターを使用するはできません。</span><span class="sxs-lookup"><span data-stu-id="4854f-125">For example, you would not use a laptop to test performance of a BizTalk solution.</span></span>  
  
-   <span data-ttu-id="4854f-126">**テスト実行の継続時間 -** 結果が維持可能なであることを確認する固定最低限の期間のパフォーマンスを測定します。</span><span class="sxs-lookup"><span data-stu-id="4854f-126">**Test Run Duration -** Measure performance for a fixed minimum period to ensure that the results are sustainable.</span></span> <span data-ttu-id="4854f-127">また、システムの場所のすべてのキャッシュを設定、データベース テーブルが予想の数に到達したおよび調整は 1 回のスループットを制御するための十分な時間を指定した定義済みの期間の初期のウォーム/ランプが行われたが長期にわたってテストの実行しきい値がヒットします。</span><span class="sxs-lookup"><span data-stu-id="4854f-127">Running tests for longer periods also ensures the system has gone through the initial warm/ramp up period where all caches are populated, database tables have reached expected counts, and throttling is given sufficient time to regulate throughput once predefined thresholds are hit.</span></span> <span data-ttu-id="4854f-128">このアプローチでは、最適なスループットを検出するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="4854f-128">This approach will help discover optimal sustainable throughput.</span></span>  
  
-   <span data-ttu-id="4854f-129">**テスト パラメーター –** テストの実行するテストの実行からテストのパラメーターは変わりません。</span><span class="sxs-lookup"><span data-stu-id="4854f-129">**Test Parameters –** Do not vary test parameters from test run to test run.</span></span> <span data-ttu-id="4854f-130">たとえば、マップの複雑さやドキュメントのサイズをさまざまな異なるスループットと待機時間の結果を生成できます。</span><span class="sxs-lookup"><span data-stu-id="4854f-130">For example, varying map complexity and/or document sizes can produce different throughput and latency results.</span></span>  
  
-   <span data-ttu-id="4854f-131">**クリーンアップ状態 -** テストが完了した後は、テスト環境の状態が、次のテストを実行する前にクリーンであることを確認します。</span><span class="sxs-lookup"><span data-stu-id="4854f-131">**Clean State -** After a test is complete, ensure that the state of the test environment is clean before running the next test.</span></span> <span data-ttu-id="4854f-132">たとえば、履歴データは、実行時のスループットに影響を与える、データベース構築できます。</span><span class="sxs-lookup"><span data-stu-id="4854f-132">For example, historical data can build up in the database affecting run-time throughput.</span></span> <span data-ttu-id="4854f-133">サービス インスタンスのリサイクルは、メモリ、データベース接続、およびスレッドのようにキャッシュされたリソースを解放するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="4854f-133">Recycling the service instances helps to release cached resources like memory, database connections, and threads.</span></span> <span data-ttu-id="4854f-134">作成して」の説明に従って、bts_CleanupMsgbox ストアド プロシージャを実行することがあります、テスト環境内で[テスト環境でメッセージ ボックス データベースからデータを手動で消去する方法](http://go.microsoft.com/fwlink/?LinkId=158064)(http://go.microsoft.com/fwlink/?LinkId=158064)します。</span><span class="sxs-lookup"><span data-stu-id="4854f-134">In your test environment, you may want to create and execute the bts_CleanupMsgbox stored procedure as described in [How to Manually Purge Data from the MessageBox Database in a Test Environment](http://go.microsoft.com/fwlink/?LinkId=158064) (http://go.microsoft.com/fwlink/?LinkId=158064).</span></span> <span data-ttu-id="4854f-135">このスクリプトは、実行の間を最新の状態に関しては、メッセージ ボックスに、BizTalk Server のテスト環境を返すものです。</span><span class="sxs-lookup"><span data-stu-id="4854f-135">This script is intended to return your BizTalk Server test environment to a fresh state with regards to the Message Box between runs.</span></span> <span data-ttu-id="4854f-136">スクリプトでは、実行中のすべてのインスタンスとすべての情報など、状態、メッセージ、およびサブスクリプションの場合、それらのインスタンスを削除しますが、すべてのアクティベーションのサブスクリプションのまま、オーケストレーションへの再参加またはポートを送信する必要はありませんので。</span><span class="sxs-lookup"><span data-stu-id="4854f-136">The script deletes all running instances and all information about those instances including state, messages, and subscriptions, but leaves all activation subscriptions so you do not have to re-enlist your orchestrations or send ports.</span></span> <span data-ttu-id="4854f-137">このツールが実稼働システムでサポートされていないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="4854f-137">Note that this tool is not supported on production systems.</span></span>  
  
-   <span data-ttu-id="4854f-138">**パフォーマンス テストとチューニング -** このテスト カテゴリの目標は、アプリケーションのパフォーマンスとスループットを最大化し、システムの最大持続可能なスループット (MST) を検索します。</span><span class="sxs-lookup"><span data-stu-id="4854f-138">**Performance Testing and Tuning -** The goal of this test category is to maximize performance and throughput of your application and find the Maximum Sustainable Throughput (MST) of your system.</span></span>  <span data-ttu-id="4854f-139">計画と維持可能な最大のパフォーマンスを計測の詳細については、次を参照してください[パフォーマンス維持の計画](http://go.microsoft.com/fwlink/?LinkId=158065)(http://go.microsoft.com/fwlink/?LinkId=158065)と[維持可能なパフォーマンスとは何ですか?。](http://go.microsoft.com/fwlink/?LinkId=132304)</span><span class="sxs-lookup"><span data-stu-id="4854f-139">For more information about planning and measuring Maximum Sustainable Performance see [Planning for Sustained Performance](http://go.microsoft.com/fwlink/?LinkId=158065) (http://go.microsoft.com/fwlink/?LinkId=158065) and [What Is Sustainable Performance?](http://go.microsoft.com/fwlink/?LinkId=132304)</span></span> <span data-ttu-id="4854f-140">(http://go.microsoft.com/fwlink/?LinkId=132304)。</span><span class="sxs-lookup"><span data-stu-id="4854f-140">(http://go.microsoft.com/fwlink/?LinkId=132304).</span></span>  
  
     <span data-ttu-id="4854f-141">MST は、システムが実稼働環境で無制限に処理できるメッセージ トラフィックの最大負荷です。</span><span class="sxs-lookup"><span data-stu-id="4854f-141">The MST is the highest load of message traffic that a system can handle indefinitely in a production environment.</span></span> <span data-ttu-id="4854f-142">実稼働に移行する前に、パフォーマンスとスループットのすべての BizTalk アプリケーションをテストしてください。</span><span class="sxs-lookup"><span data-stu-id="4854f-142">All BizTalk applications should be tested for performance and throughput before going into production.</span></span> <span data-ttu-id="4854f-143">少なくとも最も一般的な使用状況を表すテスト ケースの代表的なセットを実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="4854f-143">At a minimum, you should run a representative set of test cases that represent the most common usage scenarios.</span></span> <span data-ttu-id="4854f-144">予想される負荷をテストして、最大の負荷を別の環境、運用環境の特性に一致することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="4854f-144">We recommend that you test against expected loads and peak loads in a separate environment that matches characteristics of the production environment.</span></span> <span data-ttu-id="4854f-145">この環境は、すべての企業の標準的なサービスをインストールし、監視エージェントは、ウイルス対策ソフトウェアなど、実行している必要があります。</span><span class="sxs-lookup"><span data-stu-id="4854f-145">This environment should have all of the corporate standard services installed and running, such as monitoring agents, and antivirus software.</span></span>  
  
-   <span data-ttu-id="4854f-146">また、実行されているその他の BizTalk アプリケーションの横には、実稼働環境で同じハードウェア上での BizTalk アプリケーションをテストすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="4854f-146">We also recommend that you test new BizTalk applications on the same hardware in production alongside the other BizTalk applications that are running.</span></span> <span data-ttu-id="4854f-147">これら他の BizTalk アプリケーションでは、BizTalk Server、SQL Server、ネットワーク I/O、およびディスク I/O の負荷を高めます。</span><span class="sxs-lookup"><span data-stu-id="4854f-147">These other BizTalk applications put additional load on the BizTalk Server, SQL Server, network I/O, and disk I/O.</span></span> <span data-ttu-id="4854f-148">さらに、1 つの BizTalk アプリケーション (この場合、スプールの深さを取得が大きすぎて、たとえば) を調整する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="4854f-148">In addition, one BizTalk application could cause another to throttle (when the spool depth gets too large, for example).</span></span> <span data-ttu-id="4854f-149">すべての BizTalk アプリケーションがパフォーマンスにする必要があります/ストレス テストから実稼働に移行します。</span><span class="sxs-lookup"><span data-stu-id="4854f-149">All BizTalk applications should be performance / stress tested before going into production.</span></span> <span data-ttu-id="4854f-150">さらに、ピーク ロードから回復するシステムにかかる時間を決定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="4854f-150">In addition, you should determine how long it takes the system to recover from peak loads.</span></span> <span data-ttu-id="4854f-151">システム完全復旧しないピーク ロードから [次へ] のピーク時の負荷が発生する前に、問題を取得しました。</span><span class="sxs-lookup"><span data-stu-id="4854f-151">If the system does not fully recover from a peak load before the next peak load occurs, then you've got a problem.</span></span> <span data-ttu-id="4854f-152">システムがさらに表示されます、さらに分離されことはありませんできる完全に回復します。</span><span class="sxs-lookup"><span data-stu-id="4854f-152">The system will get further and further behind and will never be able to fully recover.</span></span>  
  
## <a name="expectations-throughput-vs-latency"></a><span data-ttu-id="4854f-153">待機時間とスループットを期待します。</span><span class="sxs-lookup"><span data-stu-id="4854f-153">Expectations: throughput vs. latency</span></span>  
 <span data-ttu-id="4854f-154">一定量のスループットや待機時間、デプロイされたシステムを想定できます。</span><span class="sxs-lookup"><span data-stu-id="4854f-154">You can expect a certain amount of throughput and/or latency from the deployed system.</span></span> <span data-ttu-id="4854f-155">反対側の要求をシステムに配置する高いスループットと低待機時間を同時に実現しようとしています。</span><span class="sxs-lookup"><span data-stu-id="4854f-155">Attempting to achieve high throughput and low latency simultaneously places opposing demands on the system.</span></span> <span data-ttu-id="4854f-156">妥当な待機時間の最適なスループットを期待できます。</span><span class="sxs-lookup"><span data-stu-id="4854f-156">You can expect optimal throughput with reasonable latency.</span></span> <span data-ttu-id="4854f-157">システムが増加 (など、CPU 消費率が高い、高いディスク i/o の競合、メモリの負荷、およびロックの競合) と、スループットが向上しますが、強調します。</span><span class="sxs-lookup"><span data-stu-id="4854f-157">As throughput improves, stress (such as, higher CPU consumption, higher disk-I/O contention, memory pressure, and greater lock contention) on the system increases.</span></span> <span data-ttu-id="4854f-158">このような状況では、待機時間にマイナスの影響があります。</span><span class="sxs-lookup"><span data-stu-id="4854f-158">This situation can have a negative impact on latency.</span></span> <span data-ttu-id="4854f-159">システムの最適な容量を検出、識別し、ボトルネックを最小限に抑えることお勧めします。</span><span class="sxs-lookup"><span data-stu-id="4854f-159">To discover optimal capacity of a system, we recommend that you identify and minimize any bottlenecks.</span></span>  
  
 <span data-ttu-id="4854f-160">データベース内に存在する完成したインスタンスのボトルネックを引き起こすことができます。</span><span class="sxs-lookup"><span data-stu-id="4854f-160">Completed instances residing in the database can cause bottlenecks.</span></span> <span data-ttu-id="4854f-161">ボトルネックが発生すると、パフォーマンスが低下することができます。</span><span class="sxs-lookup"><span data-stu-id="4854f-161">When bottlenecks occur, performance can degrade.</span></span> <span data-ttu-id="4854f-162">ドレインするまでにシステムのための十分な時間には、問題を修正するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="4854f-162">Giving the system sufficient time to drain can help fix the problem.</span></span> <span data-ttu-id="4854f-163">バックログが蓄積された原因を特定し、問題の修正に協力が重要です。</span><span class="sxs-lookup"><span data-stu-id="4854f-163">Discovering the cause of the backlog buildup and helping fix the issue is important.</span></span>  
  
 <span data-ttu-id="4854f-164">バックログの原因を検出するには、履歴データを分析し、(を使用状況のパターンを検出し、バックログの原因の診断) パフォーマンス カウンターを監視できます。</span><span class="sxs-lookup"><span data-stu-id="4854f-164">To discover the cause of the backlog, you can analyze historical data and monitor performance counters (to discover usage patterns, and diagnose the source of the backlog).</span></span> <span data-ttu-id="4854f-165">一般的には、大量のデータを毎晩バッチ方式で処理されるときにバックログが発生します。</span><span class="sxs-lookup"><span data-stu-id="4854f-165">Commonly, backlogs can occur when large volumes of data are processed in a batched manner on a nightly basis.</span></span> <span data-ttu-id="4854f-166">システムとのバックログから回復するには、その機能の容量を検出すると便利です。</span><span class="sxs-lookup"><span data-stu-id="4854f-166">You may find it useful to discover the capacity of the system and its ability to recover from a backlog.</span></span> <span data-ttu-id="4854f-167">この情報は、予想外のピーク スループットを処理するために、システム内に対応する overdrive シナリオとバッファーの大きさを処理するためのハードウェア要件を評価するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="4854f-167">This information can help you to estimate hardware requirements for handling overdrive scenarios and the amount of buffer room to accommodate within a system to handle unforeseen spikes in throughput.</span></span>  
  
 <span data-ttu-id="4854f-168">パフォーマンス カウンターの監視は、実行時に発生する可能性がある潜在的なボトルネックを individuate に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="4854f-168">Monitoring performance counters can help individuate potential bottlenecks that could arise at runtime.</span></span> <span data-ttu-id="4854f-169">ただし、疑いソリューションを構成するカスタム コンポーネントの 1 つを CPU またはメモリのボトルネックの原因である可能性がありますが、ときに強くお勧めで使用する、プロファイリング ツールこのような Visual Studio Profiler または ANTS パフォーマンス Profiler パフォーマンス テスト対象を絞り込み、問題を生成するクラスに確信を持って individuate します。</span><span class="sxs-lookup"><span data-stu-id="4854f-169">However, when we suspect that the culprit of CPU or memory bottleneck may be one of the custom components that compose the solution, we strongly recommend that you use profiling tools such Visual Studio Profiler or ANTS Performance Profiler during a performance test to narrow and individuate with certainty the class that generates the problem.</span></span> <span data-ttu-id="4854f-170">当然ながら、アプリケーションのプロファイリングは、パフォーマンスが妨害されます。</span><span class="sxs-lookup"><span data-stu-id="4854f-170">Obviously, profiling an application interferes with performance.</span></span> <span data-ttu-id="4854f-171">そのため、メモリ消費量、CPU 使用率や待機時間が発生するこれらのコンポーネントを individuating に注目する必要がありますがこれらのテストと、これらのテスト中に収集された図形を破棄する必要があります。</span><span class="sxs-lookup"><span data-stu-id="4854f-171">Therefore, these tests should be focused on individuating those components that cause memory consumption, CPU utilization or latency and figures collected during these tests should be discarded.</span></span>  
  
 <span data-ttu-id="4854f-172">最適なスループットの詳細に必要です、システムの調整、デプロイされたアプリケーション、長所と、システムの脆弱性、および、特定のシナリオの使用量パターンの理解します。</span><span class="sxs-lookup"><span data-stu-id="4854f-172">Tuning the system for optimal sustainable throughput requires an in depth understanding of the deployed application, the strengths and weaknesses of the system, and usage patterns of the specific scenario.</span></span> <span data-ttu-id="4854f-173">ボトルネックを特定しするものに近いトポロジで徹底的なテストを明確に最適なスループットを予測する唯一の方法は、実稼働環境で使用されます。</span><span class="sxs-lookup"><span data-stu-id="4854f-173">The only way to discover bottlenecks and predict optimal sustainable throughput with certainty is through thorough testing on a topology that closely matches what will be used in production.</span></span> <span data-ttu-id="4854f-174">別のホスト インスタンスに 1 つの成果物 (受信場所、送信ポート、オーケストレーション) を分離して、パフォーマンス モニター ツール内で適切なカウンターの設定は、絞り込むために重要な特定のユース ケースに対してロード テストとストレス テストを実行するときに、ボトルネックの原因。</span><span class="sxs-lookup"><span data-stu-id="4854f-174">When running load and stress tests against a certain use case, isolating single artifacts (receive locations, send ports, orchestrations) into separate host instances and setting the right counters inside the performance monitor tool is crucial to narrow down the cause of a bottleneck.</span></span>  
  
 <span data-ttu-id="4854f-175">このセクションの他のトピックでは、そのトポロジを定義するプロセスについて説明し、短縮するには、ボトルネックを回避する方法に関するガイダンスを提供します。</span><span class="sxs-lookup"><span data-stu-id="4854f-175">Other topics in this section guide you through the process of defining that topology, and provide guidance on how to lessen and avoid bottlenecks.</span></span>  
  
## <a name="scaling"></a><span data-ttu-id="4854f-176">スケーリング</span><span class="sxs-lookup"><span data-stu-id="4854f-176">Scaling</span></span>  
 <span data-ttu-id="4854f-177">展開されたトポロジのさまざまな段階でボトルネックが発生することができます。</span><span class="sxs-lookup"><span data-stu-id="4854f-177">Bottlenecks can occur at various stages of a deployed topology.</span></span> <span data-ttu-id="4854f-178">いくつかのボトルネックは、スケール アップまたはスケール アウト環境のいずれかでアドレス指定できます。</span><span class="sxs-lookup"><span data-stu-id="4854f-178">Some bottlenecks can be addressed by either scaling up or scaling out the environment.</span></span> <span data-ttu-id="4854f-179">スケール アップは、既存のコンピューターをアップグレードするプロセスです。</span><span class="sxs-lookup"><span data-stu-id="4854f-179">Scaling up is the process of upgrading the existing computer.</span></span> <span data-ttu-id="4854f-180">たとえば、8 プロセッサ コンピューターでは、だけでなく置き換える既存の Cpu と RAM を追加する 4 つのプロセッサのコンピューターから BizTalk Server コンピューターをアップグレードできます。</span><span class="sxs-lookup"><span data-stu-id="4854f-180">For example, you can upgrade a BizTalk Server computer from a four-processor computer to an eight-processor computer, as well as substituting the existing CPUs and adding more RAM.</span></span> <span data-ttu-id="4854f-181">この方法では、ドキュメントの解析とマッピングなどのリソースを消費するタスクを高速化できます。</span><span class="sxs-lookup"><span data-stu-id="4854f-181">In this way, you can accelerate resource-intensive tasks such as document parsing and mapping.</span></span> <span data-ttu-id="4854f-182">スケール アウトは、サーバーのデプロイに追加のプロセスです。</span><span class="sxs-lookup"><span data-stu-id="4854f-182">Scaling out is the process of adding servers to your deployment.</span></span> <span data-ttu-id="4854f-183">スケール アップまたはアウトする意思決定は、ボトルネックと構成対象のアプリケーションの種類によって異なります。</span><span class="sxs-lookup"><span data-stu-id="4854f-183">The decision to scale up or out depends on the type of bottleneck and the application being configured.</span></span> <span data-ttu-id="4854f-184">アプリケーションは、スケール アップとスケール アウトを活用できるゼロから構築する必要があります。次のガイダンスでは、発生したボトルネックに基づいてハードウェア展開トポロジを変更する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="4854f-184">An application needs to be built from the ground up to be capable of taking advantage of scaling up or out. The following guidance explains how to change hardware deployment topologies based on bottlenecks encountered.</span></span>  
  
 <span data-ttu-id="4854f-185">**スケール アップ**BizTalk ソリューションを実行していることを意味 (例では、追加の CPU およびメモリ) のハードウェアをアップグレードします。</span><span class="sxs-lookup"><span data-stu-id="4854f-185">**Scaling up** means running a BizTalk solution on upgraded hardware (for example, adding CPU’s and memory).</span></span> <span data-ttu-id="4854f-186">1) スケール アウトは、高価すぎる、または 2) スケール アウトが解決しないボトルネックになっているときにスケール アップを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="4854f-186">You should look at scaling up when 1) scaling out is too expensive or 2) scaling out will not help solve a bottleneck.</span></span> <span data-ttu-id="4854f-187">たとえば、変換、および高速なマシンでタスクを実行する場合は、サイズの大きいメッセージを処理に費やされた時間を大幅に短縮できます。</span><span class="sxs-lookup"><span data-stu-id="4854f-187">For example, you can significantly reduce the time spent transforming and processing a large message if you run the task on a faster machine.</span></span>  
  
 <span data-ttu-id="4854f-188">**スケール アウト**アプリケーション プラットフォームは、BizTalk Server グループに BizTalk のノードを追加し、それらを使用して、ソリューションの 1 つまたは複数の部分を実行するので構成されています。</span><span class="sxs-lookup"><span data-stu-id="4854f-188">**Scaling out** the application platform consists of adding BizTalk nodes to the BizTalk Server Group and using them to run one or more parts of the solution.</span></span> <span data-ttu-id="4854f-189">スケール アウト処理、ホストの追跡、送信の分離の [受信] に必要な 1) 場合や、2) と確認する必要がありますメモリ、I/O またはネットワーク I/O のリソースが 1 台のサーバーの限界です。</span><span class="sxs-lookup"><span data-stu-id="4854f-189">You should look at scaling out when 1) you need to isolate send, receive, processing, tracking hosts or 2) when memory, I/O or Network I/O resources are maxed out for a single server.</span></span> <span data-ttu-id="4854f-190">複数のサーバーの負荷を分散できます。ただし、BizTalk Server グループに新しいノードの追加と、メッセージ ボックス データベースのロックの競合が増加することができます。</span><span class="sxs-lookup"><span data-stu-id="4854f-190">The load can be spread across multiple servers; however, adding new nodes to the BizTalk Server Group can increase the lock contention on the MessageBox database.</span></span>  
  
 <span data-ttu-id="4854f-191">これがスケール アップするかスケール アウトしますか。</span><span class="sxs-lookup"><span data-stu-id="4854f-191">So should you scale up or scale out?</span></span> <span data-ttu-id="4854f-192">1 つのタスクを可能になったため BizTalk ソリューションの待機時間を短縮できるスケール アップお使いのプラットフォーム (たとえば、メッセージのマッピング) 高速に実行します。</span><span class="sxs-lookup"><span data-stu-id="4854f-192">Scaling up your platform can reduce the latency of a BizTalk solution because it makes single tasks (for example, message mapping) run faster.</span></span> <span data-ttu-id="4854f-193">スケール アウトできます最大持続可能な・ スループットとスケーラビリティを向上、BizTalk ソリューションのため、複数のマシンにワークロードを分散することができます。</span><span class="sxs-lookup"><span data-stu-id="4854f-193">Scaling out can improve the maximum sustainable throughtput and the scalability of your BizTalk solution because it allows you to spread the workload across multiple machines.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4854f-194">参照</span><span class="sxs-lookup"><span data-stu-id="4854f-194">See Also</span></span>  
 [<span data-ttu-id="4854f-195">ボトルネックの検索と解消</span><span class="sxs-lookup"><span data-stu-id="4854f-195">Finding and Eliminating Bottlenecks</span></span>](../technical-guides/finding-and-eliminating-bottlenecks.md)