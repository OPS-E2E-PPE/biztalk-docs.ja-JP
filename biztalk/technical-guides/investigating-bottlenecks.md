---
title: "ボトルネックを調査 |Microsoft ドキュメント"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 2ab8e485-ffe5-4f71-9ce2-f72c0c939e5d
caps.latest.revision: "6"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e34d01bbfafd1a05f87fff5cda2b21764d43f42b
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/20/2017
---
# <a name="investigating-bottlenecks"></a><span data-ttu-id="bd79a-102">ボトルネックを調査</span><span class="sxs-lookup"><span data-stu-id="bd79a-102">Investigating Bottlenecks</span></span>
<span data-ttu-id="bd79a-103">このトピックでは、ボトルネックを調査するための推奨プロセスについて説明します。</span><span class="sxs-lookup"><span data-stu-id="bd79a-103">This topic describes a recommended process for investigating bottlenecks.</span></span>  
  
## <a name="what-is-the-source-of-the-problem"></a><span data-ttu-id="bd79a-104">問題の原因は何ですか。</span><span class="sxs-lookup"><span data-stu-id="bd79a-104">What is the source of the problem?</span></span>  
 <span data-ttu-id="bd79a-105">ボトルネックの原因がハードウェアまたはソフトウェアに関連する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="bd79a-105">The source of the bottleneck could be hardware or software related.</span></span> <span data-ttu-id="bd79a-106">リソースが使用されていない場合に、通常、ボトルネックを示す値。</span><span class="sxs-lookup"><span data-stu-id="bd79a-106">When resources are underused, it is usually an indication of a bottleneck.</span></span> <span data-ttu-id="bd79a-107">ボトルネックは、ハードウェアの制限、非効率的なソフトウェア構成、または両方で発生することができます。</span><span class="sxs-lookup"><span data-stu-id="bd79a-107">Bottlenecks can be caused by hardware limitations, by inefficient software configurations, or by both.</span></span>  
  
 <span data-ttu-id="bd79a-108">ボトルネックの特定では、あるボトルネックを緩和すると次のボトルネックが見つかることもまれではなく、作業を積み重ねが必要になります。</span><span class="sxs-lookup"><span data-stu-id="bd79a-108">Identifying bottlenecks is an incremental process whereby alleviating one bottleneck can lead to the discovery of the next one.</span></span> <span data-ttu-id="bd79a-109">こうしたボトルネックの特定と緩和について科学的に説明することがこのトピックの目的です。</span><span class="sxs-lookup"><span data-stu-id="bd79a-109">The science of identifying and alleviating these bottlenecks is the objective of this topic.</span></span> <span data-ttu-id="bd79a-110">システムは、短期間なら最大限の性能を発揮できます。</span><span class="sxs-lookup"><span data-stu-id="bd79a-110">It is possible for a system to perform at peaks for short periods of time.</span></span> <span data-ttu-id="bd79a-111">しかし、スループットを維持するには、そのシステムの最も遅いコンポーネントの速度でしか処理できなくなる場合もあります。</span><span class="sxs-lookup"><span data-stu-id="bd79a-111">However, for sustainable throughput a system can only process as fast as its slowest performing component.</span></span>  
  
## <a name="using-an-iterative-approach-to-testing"></a><span data-ttu-id="bd79a-112">テストを反復的な方法を使用します。</span><span class="sxs-lookup"><span data-stu-id="bd79a-112">Using an iterative approach to testing</span></span>  
 <span data-ttu-id="bd79a-113">エンドポイント (入り口/出口)、システムまたは中間 (オーケストレーション/データベース) でボトルネックが発生することができます。</span><span class="sxs-lookup"><span data-stu-id="bd79a-113">Bottlenecks can occur at the endpoints (entry/exit) of the system or in the middle (orchestration/database).</span></span> <span data-ttu-id="bd79a-114">ボトルネックを特定した後は、ソースを識別するのに構造化されたアプローチを使用します。</span><span class="sxs-lookup"><span data-stu-id="bd79a-114">After the bottleneck has been isolated, use a structured approach to identify the source.</span></span> <span data-ttu-id="bd79a-115">ボトルネックが容易になりますが後、もう一度ように新しいボトルネックが生じていないことされて別の場所、システムでパフォーマンスを測定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bd79a-115">After the bottleneck is eased, it is important to measure performance again to ensure that a new bottleneck has not been introduced elsewhere in the system.</span></span>  
  
 <span data-ttu-id="bd79a-116">識別するボトルネックを修復するプロセスは、反復的な方法で行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="bd79a-116">The process of identifying and fixing bottlenecks should be done in an iterative manner.</span></span> <span data-ttu-id="bd79a-117">一度に 1 つだけのパラメーターを異なる、各テストの実行中に同じ手順を繰り返しますおよび単一の変更の影響を確認するパフォーマンスを測定します。</span><span class="sxs-lookup"><span data-stu-id="bd79a-117">Vary only one parameter at a time, repeat exactly the same steps during each test run, and then measure performance to verify the impact of the single modification.</span></span> <span data-ttu-id="bd79a-118">一度に複数のパラメーターを変更すると、変更の効果がわからなくなってしまう可能性があります。</span><span class="sxs-lookup"><span data-stu-id="bd79a-118">Varying more than one parameter at a time could conceal the effect of the change.</span></span>  
  
 <span data-ttu-id="bd79a-119">たとえば、パラメーター 1 を変更するには、パフォーマンスが向上します。</span><span class="sxs-lookup"><span data-stu-id="bd79a-119">For example, changing parameter 1 could improve performance.</span></span> <span data-ttu-id="bd79a-120">ただし、パラメーター 1 の変更を組み合わせて 2 番目のパラメーターを変更することが悪影響を与えます、パラメーター 1 の変更の利点を負数化します。</span><span class="sxs-lookup"><span data-stu-id="bd79a-120">However, changing parameter 2 in conjunction with changing parameter 1 could have a detrimental effect and negate the benefits of changing parameter 1.</span></span> <span data-ttu-id="bd79a-121">これは、効果はゼロ net につながるとさまざまなパラメーター 1 の効果が偽陰性、偽陽性さまざまなパラメーター 2 の影響にできます。</span><span class="sxs-lookup"><span data-stu-id="bd79a-121">This leads to a net zero effect and results in a false negative on the effect of varying parameter 1 and a false positive on the effect of varying parameter 2.</span></span>  
  
## <a name="testing-consistency"></a><span data-ttu-id="bd79a-122">テストの一貫性</span><span class="sxs-lookup"><span data-stu-id="bd79a-122">Testing consistency</span></span>  
 <span data-ttu-id="bd79a-123">設定を変更した後、パフォーマンス特性を測定を行う変更の結果を検証する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bd79a-123">Measuring performance characteristics after changing settings should be done to validate the effect of the change.</span></span>  
  
-   <span data-ttu-id="bd79a-124">**ハードウェア -**ハードウェアをさまざまな一貫性のない動作が発生し、誤解を招く結果を生成するために、一貫性のあるハードウェアを使用します。</span><span class="sxs-lookup"><span data-stu-id="bd79a-124">**Hardware -** Use consistent hardware because varying the hardware can cause inconsistent behavior and produce misleading results.</span></span> <span data-ttu-id="bd79a-125">たとえば、BizTalk ソリューションのパフォーマンスをテストするのにラップトップを使用するはされません。</span><span class="sxs-lookup"><span data-stu-id="bd79a-125">For example, you would not use a laptop to test performance of a BizTalk solution.</span></span>  
  
-   <span data-ttu-id="bd79a-126">**テストの実行期間 -**結果が維持可能なことを確認する固定最低限の期間のパフォーマンスを測定します。</span><span class="sxs-lookup"><span data-stu-id="bd79a-126">**Test Run Duration -** Measure performance for a fixed minimum period to ensure that the results are sustainable.</span></span> <span data-ttu-id="bd79a-127">長期間のテストを実行するようになります、初期ウォーム/増加の場所のすべてのキャッシュが設定されて、データベース テーブルに達しました予期される数は、および調整を 1 回のスループットを制御するための十分な時間を指定した定義済みの期間を通じて、システムになりましたしきい値がヒットします。</span><span class="sxs-lookup"><span data-stu-id="bd79a-127">Running tests for longer periods also ensures the system has gone through the initial warm/ramp up period where all caches are populated, database tables have reached expected counts, and throttling is given sufficient time to regulate throughput once predefined thresholds are hit.</span></span> <span data-ttu-id="bd79a-128">このアプローチは、維持可能な最大スループットを特定するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="bd79a-128">This approach will help discover optimal sustainable throughput.</span></span>  
  
-   <span data-ttu-id="bd79a-129">**テスト パラメーター:**テストの実行するテストの実行からテスト パラメーターは変わりません。</span><span class="sxs-lookup"><span data-stu-id="bd79a-129">**Test Parameters –** Do not vary test parameters from test run to test run.</span></span> <span data-ttu-id="bd79a-130">たとえば、マップの複雑さやドキュメントのサイズを変更すると、スループットや待機時間の結果が変わってしまう可能性があります。</span><span class="sxs-lookup"><span data-stu-id="bd79a-130">For example, varying map complexity and/or document sizes can produce different throughput and latency results.</span></span>  
  
-   <span data-ttu-id="bd79a-131">**クリーンアップ状態 -**テストが完了したら、テスト環境の状態が次のテストを実行する前にクリーンであることを確認します。</span><span class="sxs-lookup"><span data-stu-id="bd79a-131">**Clean State -** After a test is complete, ensure that the state of the test environment is clean before running the next test.</span></span> <span data-ttu-id="bd79a-132">たとえば、履歴データは、実行時のスループットに影響を与えるデータベース内を構築することができます。</span><span class="sxs-lookup"><span data-stu-id="bd79a-132">For example, historical data can build up in the database affecting run-time throughput.</span></span> <span data-ttu-id="bd79a-133">サービス インスタンスのリサイクルは、メモリ、データベース接続、およびスレッドのようにキャッシュされたリソースを解放するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="bd79a-133">Recycling the service instances helps to release cached resources like memory, database connections, and threads.</span></span> <span data-ttu-id="bd79a-134">作成して」の説明に従って、bts_CleanupMsgbox ストアド プロシージャを実行することがあります、テスト環境に[テスト環境でメッセージ ボックス データベースからデータを手動で消去する方法](http://go.microsoft.com/fwlink/?LinkId=158064)(http://go.microsoft.com/fwlink/?LinkId=158064)。</span><span class="sxs-lookup"><span data-stu-id="bd79a-134">In your test environment, you may want to create and execute the bts_CleanupMsgbox stored procedure as described in [How to Manually Purge Data from the MessageBox Database in a Test Environment](http://go.microsoft.com/fwlink/?LinkId=158064) (http://go.microsoft.com/fwlink/?LinkId=158064).</span></span> <span data-ttu-id="bd79a-135">このスクリプトは、実行の間を最新の状態に関して、メッセージ ボックスに、BizTalk Server のテスト環境を返します。</span><span class="sxs-lookup"><span data-stu-id="bd79a-135">This script is intended to return your BizTalk Server test environment to a fresh state with regards to the Message Box between runs.</span></span> <span data-ttu-id="bd79a-136">スクリプトは、実行中のすべてのインスタンスとなどの状態、メッセージ、およびサブスクリプションの場合、それらのインスタンスに関するすべての情報を削除がため re-enlist、オーケストレーションまたは送信ポートにする必要はありませんにすべてのアクティベーションのサブスクリプションのままにします。</span><span class="sxs-lookup"><span data-stu-id="bd79a-136">The script deletes all running instances and all information about those instances including state, messages, and subscriptions, but leaves all activation subscriptions so you do not have to re-enlist your orchestrations or send ports.</span></span> <span data-ttu-id="bd79a-137">このツールが実稼働システムでサポートされていないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="bd79a-137">Note that this tool is not supported on production systems.</span></span>  
  
-   <span data-ttu-id="bd79a-138">**パフォーマンス テストとチューニング -**テスト カテゴリの目標は、アプリケーションのパフォーマンスとスループットを最大化し、システムの最大持続可能なスループット (MST) を検索することです。</span><span class="sxs-lookup"><span data-stu-id="bd79a-138">**Performance Testing and Tuning -** The goal of this test category is to maximize performance and throughput of your application and find the Maximum Sustainable Throughput (MST) of your system.</span></span>  <span data-ttu-id="bd79a-139">計画と維持可能な最大のパフォーマンスの測定の詳細については、次を参照してください。[継続的なパフォーマンスの計画](http://go.microsoft.com/fwlink/?LinkId=158065)(http://go.microsoft.com/fwlink/?LinkId=158065) および[維持可能なパフォーマンスは何ですか。](http://go.microsoft.com/fwlink/?LinkId=132304)</span><span class="sxs-lookup"><span data-stu-id="bd79a-139">For more information about planning and measuring Maximum Sustainable Performance see [Planning for Sustained Performance](http://go.microsoft.com/fwlink/?LinkId=158065) (http://go.microsoft.com/fwlink/?LinkId=158065) and [What Is Sustainable Performance?](http://go.microsoft.com/fwlink/?LinkId=132304)</span></span> <span data-ttu-id="bd79a-140">(http://go.microsoft.com/fwlink/?LinkId=132304)。</span><span class="sxs-lookup"><span data-stu-id="bd79a-140">(http://go.microsoft.com/fwlink/?LinkId=132304).</span></span>  
  
     <span data-ttu-id="bd79a-141">MST は、システムが実稼働環境で無制限に処理できるメッセージ トラフィックの最大負荷です。</span><span class="sxs-lookup"><span data-stu-id="bd79a-141">The MST is the highest load of message traffic that a system can handle indefinitely in a production environment.</span></span> <span data-ttu-id="bd79a-142">実稼働に移行する前に、パフォーマンスとスループットのすべての BizTalk アプリケーションをテストしてください。</span><span class="sxs-lookup"><span data-stu-id="bd79a-142">All BizTalk applications should be tested for performance and throughput before going into production.</span></span> <span data-ttu-id="bd79a-143">少なくとも、最も一般的な使用シナリオを表しているテスト_ケースの代表的なセットを実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bd79a-143">At a minimum, you should run a representative set of test cases that represent the most common usage scenarios.</span></span> <span data-ttu-id="bd79a-144">予想される負荷に対してテストして、実稼働環境の特性に一致する別の環境で負荷がピークのことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="bd79a-144">We recommend that you test against expected loads and peak loads in a separate environment that matches characteristics of the production environment.</span></span> <span data-ttu-id="bd79a-145">この環境は、すべての企業の標準的なサービス インストールされ、監視エージェント、およびウイルス対策ソフトウェアなど、実行が必要です。</span><span class="sxs-lookup"><span data-stu-id="bd79a-145">This environment should have all of the corporate standard services installed and running, such as monitoring agents, and antivirus software.</span></span>  
  
-   <span data-ttu-id="bd79a-146">また、実行されているその他の BizTalk アプリケーションの横には、実稼働環境では、同じハードウェア上での BizTalk アプリケーションをテストすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="bd79a-146">We also recommend that you test new BizTalk applications on the same hardware in production alongside the other BizTalk applications that are running.</span></span> <span data-ttu-id="bd79a-147">これら他の BizTalk アプリケーションは、BizTalk Server、SQL Server、ネットワーク I/O、およびディスク I/O の負荷を高めます。</span><span class="sxs-lookup"><span data-stu-id="bd79a-147">These other BizTalk applications put additional load on the BizTalk Server, SQL Server, network I/O, and disk I/O.</span></span> <span data-ttu-id="bd79a-148">さらに、1 つの BizTalk アプリケーション可能性があります (きたら、スプールの深さが大きすぎてなど) を調整します。</span><span class="sxs-lookup"><span data-stu-id="bd79a-148">In addition, one BizTalk application could cause another to throttle (when the spool depth gets too large, for example).</span></span> <span data-ttu-id="bd79a-149">すべての BizTalk アプリケーションは、パフォーマンスをする必要があります/ストレス テストから実稼働に移行します。</span><span class="sxs-lookup"><span data-stu-id="bd79a-149">All BizTalk applications should be performance / stress tested before going into production.</span></span> <span data-ttu-id="bd79a-150">さらに、ピーク ロードから回復するシステムに要する時間を決定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bd79a-150">In addition, you should determine how long it takes the system to recover from peak loads.</span></span> <span data-ttu-id="bd79a-151">システム完全復旧しない負荷のピーク時から [次へ] のピーク時の負荷が発生する前に、問題を取得したらです。</span><span class="sxs-lookup"><span data-stu-id="bd79a-151">If the system does not fully recover from a peak load before the next peak load occurs, then you've got a problem.</span></span> <span data-ttu-id="bd79a-152">システムがさらに表示されます、さらに分離し、決してできるを完全に回復します。</span><span class="sxs-lookup"><span data-stu-id="bd79a-152">The system will get further and further behind and will never be able to fully recover.</span></span>  
  
## <a name="expectations-throughput-vs-latency"></a><span data-ttu-id="bd79a-153">待機時間とスループットを期待します。</span><span class="sxs-lookup"><span data-stu-id="bd79a-153">Expectations: throughput vs. latency</span></span>  
 <span data-ttu-id="bd79a-154">ある程度のスループットや待機時間、配置済みのシステムを想定できます。</span><span class="sxs-lookup"><span data-stu-id="bd79a-154">You can expect a certain amount of throughput and/or latency from the deployed system.</span></span> <span data-ttu-id="bd79a-155">反対側の要求をシステムに配置する高いスループットと低待機時間を同時に実現しようとしています。</span><span class="sxs-lookup"><span data-stu-id="bd79a-155">Attempting to achieve high throughput and low latency simultaneously places opposing demands on the system.</span></span> <span data-ttu-id="bd79a-156">妥当な待機時間では、最適なスループットを期待できます。</span><span class="sxs-lookup"><span data-stu-id="bd79a-156">You can expect optimal throughput with reasonable latency.</span></span> <span data-ttu-id="bd79a-157">スループットが向上しますが、として、システム値の上昇 (など、CPU 消費率が高くより高いディスク I/O の競合、メモリ不足、およびロックの競合が大きい) 強調します。</span><span class="sxs-lookup"><span data-stu-id="bd79a-157">As throughput improves, stress (such as, higher CPU consumption, higher disk-I/O contention, memory pressure, and greater lock contention) on the system increases.</span></span> <span data-ttu-id="bd79a-158">このような状況では、待機時間にマイナスの影響があります。</span><span class="sxs-lookup"><span data-stu-id="bd79a-158">This situation can have a negative impact on latency.</span></span> <span data-ttu-id="bd79a-159">システムの最適処理能力を探索するを特定し、ボトルネックを最小限にすることお勧めします。</span><span class="sxs-lookup"><span data-stu-id="bd79a-159">To discover optimal capacity of a system, we recommend that you identify and minimize any bottlenecks.</span></span>  
  
 <span data-ttu-id="bd79a-160">完了したインスタンスがデータベース内に存在するには、ボトルネックが発生します。</span><span class="sxs-lookup"><span data-stu-id="bd79a-160">Completed instances residing in the database can cause bottlenecks.</span></span> <span data-ttu-id="bd79a-161">ボトルネックが発生すると、パフォーマンスが低下することができます。</span><span class="sxs-lookup"><span data-stu-id="bd79a-161">When bottlenecks occur, performance can degrade.</span></span> <span data-ttu-id="bd79a-162">ドレインするシステムのための十分な時間を与えると、問題を解決するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="bd79a-162">Giving the system sufficient time to drain can help fix the problem.</span></span> <span data-ttu-id="bd79a-163">バックログが蓄積された原因を特定と問題を修正することが重要です。</span><span class="sxs-lookup"><span data-stu-id="bd79a-163">Discovering the cause of the backlog buildup and helping fix the issue is important.</span></span>  
  
 <span data-ttu-id="bd79a-164">バックログの原因を検出するには、履歴データを分析し、(を使用パターンを検出し、バックログの原因を診断) パフォーマンス カウンターを監視できます。</span><span class="sxs-lookup"><span data-stu-id="bd79a-164">To discover the cause of the backlog, you can analyze historical data and monitor performance counters (to discover usage patterns, and diagnose the source of the backlog).</span></span> <span data-ttu-id="bd79a-165">一般的には、大量のデータを毎晩バッチ方式で処理されるときにバックログが発生します。</span><span class="sxs-lookup"><span data-stu-id="bd79a-165">Commonly, backlogs can occur when large volumes of data are processed in a batched manner on a nightly basis.</span></span> <span data-ttu-id="bd79a-166">システムとその機能のバックログから回復する容量を検出すると便利です。</span><span class="sxs-lookup"><span data-stu-id="bd79a-166">You may find it useful to discover the capacity of the system and its ability to recover from a backlog.</span></span> <span data-ttu-id="bd79a-167">この情報は、overdrive シナリオとバッファーの大きさを処理するためにスループットの予想外の急増に対応するシステム内で対応するためのハードウェア要件を予測するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="bd79a-167">This information can help you to estimate hardware requirements for handling overdrive scenarios and the amount of buffer room to accommodate within a system to handle unforeseen spikes in throughput.</span></span>  
  
 <span data-ttu-id="bd79a-168">パフォーマンス カウンターを監視するには、実行時に発生する可能性がある潜在的なボトルネックを individuate のに役立つことができます。</span><span class="sxs-lookup"><span data-stu-id="bd79a-168">Monitoring performance counters can help individuate potential bottlenecks that could arise at runtime.</span></span> <span data-ttu-id="bd79a-169">ただし、CPU またはメモリのボトルネックの発生源できる場合、ソリューションを構成するカスタム コンポーネントのいずれかの疑いが、ときに強くお勧めで使用する、プロファイリング ツールなどの Visual Studio プロファイラーまたはアリ パフォーマンス プロファイラー パフォーマンス テスト絞り込み、問題を生成するクラスを明確に individuate です。</span><span class="sxs-lookup"><span data-stu-id="bd79a-169">However, when we suspect that the culprit of CPU or memory bottleneck may be one of the custom components that compose the solution, we strongly recommend that you use profiling tools such Visual Studio Profiler or ANTS Performance Profiler during a performance test to narrow and individuate with certainty the class that generates the problem.</span></span> <span data-ttu-id="bd79a-170">当然ながら、アプリケーションのプロファイリングでは、パフォーマンスに干渉します。</span><span class="sxs-lookup"><span data-stu-id="bd79a-170">Obviously, profiling an application interferes with performance.</span></span> <span data-ttu-id="bd79a-171">したがって、メモリ消費量、CPU 使用率や待機時間が発生するこれらのコンポーネントを individuating にこれらのテストの重点を置きますが、これらのテスト中に収集された図形を破棄する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bd79a-171">Therefore, these tests should be focused on individuating those components that cause memory consumption, CPU utilization or latency and figures collected during these tests should be discarded.</span></span>  
  
 <span data-ttu-id="bd79a-172">最適なスループット必要詳細なシステムをチューニング、展開されたアプリケーション、長所と、システムの脆弱性および特定のシナリオの使用パターンの詳細についてはします。</span><span class="sxs-lookup"><span data-stu-id="bd79a-172">Tuning the system for optimal sustainable throughput requires an in depth understanding of the deployed application, the strengths and weaknesses of the system, and usage patterns of the specific scenario.</span></span> <span data-ttu-id="bd79a-173">ボトルネックを特定し、維持可能な最大スループットを確実に予測するためには、実稼働環境で使用されるものに近いトポロジで徹底的なテストを行うしかありません。</span><span class="sxs-lookup"><span data-stu-id="bd79a-173">The only way to discover bottlenecks and predict optimal sustainable throughput with certainty is through thorough testing on a topology that closely matches what will be used in production.</span></span> <span data-ttu-id="bd79a-174">別のホスト インスタンスに (受信場所、送信ポート、オーケストレーション) 1 つの成果物を分離して、パフォーマンス モニター ツール内の正しいカウンターの設定を絞り込むために重要な特定のユース ケースに対してロード テストとストレス テストを実行するときに、ボトルネックの原因。</span><span class="sxs-lookup"><span data-stu-id="bd79a-174">When running load and stress tests against a certain use case, isolating single artifacts (receive locations, send ports, orchestrations) into separate host instances and setting the right counters inside the performance monitor tool is crucial to narrow down the cause of a bottleneck.</span></span>  
  
 <span data-ttu-id="bd79a-175">このセクションの他のトピックでは、そのトポロジの定義のプロセスを指示し、を軽減し、ボトルネックを回避する方法についてガイダンスを提供します。</span><span class="sxs-lookup"><span data-stu-id="bd79a-175">Other topics in this section guide you through the process of defining that topology, and provide guidance on how to lessen and avoid bottlenecks.</span></span>  
  
## <a name="scaling"></a><span data-ttu-id="bd79a-176">スケーリング</span><span class="sxs-lookup"><span data-stu-id="bd79a-176">Scaling</span></span>  
 <span data-ttu-id="bd79a-177">展開されたトポロジのさまざまな段階でボトルネックが発生することができます。</span><span class="sxs-lookup"><span data-stu-id="bd79a-177">Bottlenecks can occur at various stages of a deployed topology.</span></span> <span data-ttu-id="bd79a-178">ボトルネックは、スケール アップまたはスケール アウト環境のいずれかによって対処できます。</span><span class="sxs-lookup"><span data-stu-id="bd79a-178">Some bottlenecks can be addressed by either scaling up or scaling out the environment.</span></span> <span data-ttu-id="bd79a-179">スケール アップは、既存のコンピューターをアップグレードするプロセスです。</span><span class="sxs-lookup"><span data-stu-id="bd79a-179">Scaling up is the process of upgrading the existing computer.</span></span> <span data-ttu-id="bd79a-180">たとえば、4 プロセッサのコンピューターから BizTalk Server コンピューターをアップグレードするには、8 つのプロセッサのコンピューターだけでなく、既存の Cpu の置換と以上の RAM を追加するのにします。</span><span class="sxs-lookup"><span data-stu-id="bd79a-180">For example, you can upgrade a BizTalk Server computer from a four-processor computer to an eight-processor computer, as well as substituting the existing CPUs and adding more RAM.</span></span> <span data-ttu-id="bd79a-181">この方法では、ドキュメントの解析とマッピングなどのリソースを消費するタスクを高速化できます。</span><span class="sxs-lookup"><span data-stu-id="bd79a-181">In this way, you can accelerate resource-intensive tasks such as document parsing and mapping.</span></span> <span data-ttu-id="bd79a-182">スケール アウトは、デプロイにサーバーを追加するプロセスです。</span><span class="sxs-lookup"><span data-stu-id="bd79a-182">Scaling out is the process of adding servers to your deployment.</span></span> <span data-ttu-id="bd79a-183">スケール アップまたはアウトするかどうかは、ボトルネックになっていると、構成するアプリケーションの種類によって異なります。</span><span class="sxs-lookup"><span data-stu-id="bd79a-183">The decision to scale up or out depends on the type of bottleneck and the application being configured.</span></span> <span data-ttu-id="bd79a-184">アプリケーションは、スケール アップまたはアウトを活用できる一から構築する必要があります。次のガイダンスでは、発生したボトルネックに基づいてハードウェア展開トポロジを変更する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="bd79a-184">An application needs to be built from the ground up to be capable of taking advantage of scaling up or out. The following guidance explains how to change hardware deployment topologies based on bottlenecks encountered.</span></span>  
  
 <span data-ttu-id="bd79a-185">**スケール アップ**、BizTalk ソリューションを実行していることを意味が (CPU の追加など、およびメモリ) のハードウェアをアップグレードします。</span><span class="sxs-lookup"><span data-stu-id="bd79a-185">**Scaling up** means running a BizTalk solution on upgraded hardware (for example, adding CPU’s and memory).</span></span> <span data-ttu-id="bd79a-186">1) スケール アウトは、高価すぎますまたは 2) スケール アウトできませんの解決に役立つボトルネックになっているときにスケール アップを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="bd79a-186">You should look at scaling up when 1) scaling out is too expensive or 2) scaling out will not help solve a bottleneck.</span></span> <span data-ttu-id="bd79a-187">たとえば、変換して、高速なマシンでタスクを実行する場合は、サイズの大きいメッセージを処理に費やされた時間を大幅に削減することができます。</span><span class="sxs-lookup"><span data-stu-id="bd79a-187">For example, you can significantly reduce the time spent transforming and processing a large message if you run the task on a faster machine.</span></span>  
  
 <span data-ttu-id="bd79a-188">**スケール アウト**アプリケーション プラットフォームは、BizTalk Server グループに BizTalk のノードを追加して、それらを使用して、ソリューションの 1 つまたは複数の部分を実行するので構成されています。</span><span class="sxs-lookup"><span data-stu-id="bd79a-188">**Scaling out** the application platform consists of adding BizTalk nodes to the BizTalk Server Group and using them to run one or more parts of the solution.</span></span> <span data-ttu-id="bd79a-189">場合 1) に必要な分離送信、受信、処理を追跡ホスト、または 2) のスケール アウトを見てくださいメモリ、I/O またはネットワーク I/O のリソースは単一のサーバーすべてに使用されています。</span><span class="sxs-lookup"><span data-stu-id="bd79a-189">You should look at scaling out when 1) you need to isolate send, receive, processing, tracking hosts or 2) when memory, I/O or Network I/O resources are maxed out for a single server.</span></span> <span data-ttu-id="bd79a-190">負荷分散できるように複数のサーバーです。ただし、BizTalk Server グループに新しいノードを追加するには、メッセージ ボックス データベースのロックの競合が増加します。</span><span class="sxs-lookup"><span data-stu-id="bd79a-190">The load can be spread across multiple servers; however, adding new nodes to the BizTalk Server Group can increase the lock contention on the MessageBox database.</span></span>  
  
 <span data-ttu-id="bd79a-191">したがって必要があるスケール アップまたはスケール アウトしますか。</span><span class="sxs-lookup"><span data-stu-id="bd79a-191">So should you scale up or scale out?</span></span> <span data-ttu-id="bd79a-192">1 つのタスクを可能になったため、BizTalk ソリューションの待機時間を減らすことができます、プラットフォームのスケール アップ (たとえば、メッセージのマッピング) 高速に実行します。</span><span class="sxs-lookup"><span data-stu-id="bd79a-192">Scaling up your platform can reduce the latency of a BizTalk solution because it makes single tasks (for example, message mapping) run faster.</span></span> <span data-ttu-id="bd79a-193">スケール アウトを向上できます最大持続可能なスループットとスケーラビリティの BizTalk ソリューションのため、複数のマシンに負荷を分散することができます。</span><span class="sxs-lookup"><span data-stu-id="bd79a-193">Scaling out can improve the maximum sustainable throughtput and the scalability of your BizTalk solution because it allows you to spread the workload across multiple machines.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="bd79a-194">参照</span><span class="sxs-lookup"><span data-stu-id="bd79a-194">See Also</span></span>  
 [<span data-ttu-id="bd79a-195">検索して、ボトルネックを解消します。</span><span class="sxs-lookup"><span data-stu-id="bd79a-195">Finding and Eliminating Bottlenecks</span></span>](../technical-guides/finding-and-eliminating-bottlenecks.md)