---
title: "SQL Server の設定を変更しないで |Microsoft ドキュメント"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 4b383bfb-c3d9-47d4-b294-f6be94302734
caps.latest.revision: "2"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: d2fb6e2553c005d3ba8651c860ff844e8cc74106
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/20/2017
---
# <a name="sql-server-settings-that-should-not-be-changed"></a><span data-ttu-id="2d894-102">SQL Server の設定を変更しないでください。</span><span class="sxs-lookup"><span data-stu-id="2d894-102">SQL Server Settings That Should Not Be Changed</span></span>
<span data-ttu-id="2d894-103">設定する場合に[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]の運用の準備手順の間に[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]、次の設定を変更しないようにします。</span><span class="sxs-lookup"><span data-stu-id="2d894-103">When setting up [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] during the operational readiness procedures for [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], you should not make changes to the following settings.</span></span>  
  
## <a name="sql-server-max-degree-of-parallelism"></a><span data-ttu-id="2d894-104">SQL Server の並列処理の最大限度</span><span class="sxs-lookup"><span data-stu-id="2d894-104">SQL Server Max Degree of Parallelism</span></span>  
 <span data-ttu-id="2d894-105">Max Degree の並列化 (MDOP) の構成中に「1」に設定されている[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]の[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]instance(s) をホストする、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]メッセージ ボックス データベースです。</span><span class="sxs-lookup"><span data-stu-id="2d894-105">Max Degree of Parallelism (MDOP) is set to “1” during the configuration of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] for the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instance(s) that host the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] MessageBox database(s).</span></span> <span data-ttu-id="2d894-106">これは、[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]インスタンス レベルの設定。</span><span class="sxs-lookup"><span data-stu-id="2d894-106">This is a [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instance-level setting.</span></span> <span data-ttu-id="2d894-107">この設定は、「1」の値からない変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2d894-107">This setting should not be changed from the value of “1”.</span></span> <span data-ttu-id="2d894-108">重大な悪影響を持つ「1」以外のものに変更することができます、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ストアド プロシージャとパフォーマンス。</span><span class="sxs-lookup"><span data-stu-id="2d894-108">Changing this to anything other than “1” can have a significant negative impact on the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] stored procedures and performance.</span></span> <span data-ttu-id="2d894-109">インスタンスの並列処理の設定を変更する場合[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]で実行されている他のデータベース アプリケーションに悪影響を与えるには、 [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] 、インスタンスの別のインスタンスを作成する必要があります[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]をホストするため[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]データベース。</span><span class="sxs-lookup"><span data-stu-id="2d894-109">If changing the parallelism setting for an instance of [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] will have an adverse effect on other database applications that are being executed on the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instance, you should create a separate instance of [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] dedicated to hosting the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases.</span></span>  
  
 <span data-ttu-id="2d894-110">並列クエリでは、バッチ処理に最も適したは一般にし、意思決定支援ワークロード。</span><span class="sxs-lookup"><span data-stu-id="2d894-110">Parallel queries are generally best suited to batch processing and decision support workloads.</span></span> <span data-ttu-id="2d894-111">通常、これらは、並列で実行される、多くの短い、高速なクエリを持つトランザクション処理環境で必要はありません。</span><span class="sxs-lookup"><span data-stu-id="2d894-111">They are typically not desirable in a transaction processing environment where you have many short, fast queries running in parallel.</span></span> <span data-ttu-id="2d894-112">クエリのパフォーマンス低下につながるまたはでもでデッドロックが、クエリ プランを変更することもあります原因設定 MDOP をさらに、変更、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]クエリ。</span><span class="sxs-lookup"><span data-stu-id="2d894-112">In addition, changing the MDOP setting sometimes causes the query plan to be changed, which leads to poor query performance or even deadlocks with the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] queries.</span></span>  
  
 <span data-ttu-id="2d894-113">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ストアド プロシージャが適切な結合を提供および多くの作業を行うと、プランの変更から、クエリ オプティマイザーを保持しようとするために可能な限り、ヒントをロックします。</span><span class="sxs-lookup"><span data-stu-id="2d894-113">The [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] stored procedures provide the correct joins and lock hints wherever possible in order to try to keep the query optimizer from doing much work and changing the plan.</span></span> <span data-ttu-id="2d894-114">これらのストアド プロシージャは、クエリ オプティマイザーが可能な限り、画像から除外するようにクエリを構築することによって、一貫性のあるクエリの実行を提供します。</span><span class="sxs-lookup"><span data-stu-id="2d894-114">These stored procedures provide consistent query executions by constructing the queries such that the query optimizer is taken out of the picture as much as possible.</span></span>  
  
 <span data-ttu-id="2d894-115">詳細については、Microsoft サポート技術情報の記事 899000 を参照してください。 ["BizTalk Server を構成するときに、SQL Server のインスタンスの並列処理の設定"](http://go.microsoft.com/fwlink/?LinkId=153432) (http://go.microsoft.com/fwlink/?LinkId=153432)。</span><span class="sxs-lookup"><span data-stu-id="2d894-115">For more information, see Microsoft Knowledge Base article 899000, ["The Parallelism setting for the instance of SQL Server when you configure BizTalk Server"](http://go.microsoft.com/fwlink/?LinkId=153432) (http://go.microsoft.com/fwlink/?LinkId=153432).</span></span>  
  
## <a name="sql-server-statistics-on-the-messagebox-database"></a><span data-ttu-id="2d894-116">メッセージ ボックス データベースで SQL Server の統計情報</span><span class="sxs-lookup"><span data-stu-id="2d894-116">SQL Server Statistics on the MessageBox Database</span></span>  
 <span data-ttu-id="2d894-117">既定で、次のオプションがになっている、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]メッセージ ボックス データベースが作成されるとき。</span><span class="sxs-lookup"><span data-stu-id="2d894-117">The following options are turned off by default in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] MessageBox database when it is created:</span></span>  
  
-   <span data-ttu-id="2d894-118">統計の自動作成します。</span><span class="sxs-lookup"><span data-stu-id="2d894-118">Auto create statistics</span></span>  
  
-   <span data-ttu-id="2d894-119">統計の自動更新</span><span class="sxs-lookup"><span data-stu-id="2d894-119">Auto update statistics</span></span>  
  
 <span data-ttu-id="2d894-120">メッセージ ボックス データベースにこれらのオプションを有効にしないでください。</span><span class="sxs-lookup"><span data-stu-id="2d894-120">Do not enable these options on MessageBox databases.</span></span> <span data-ttu-id="2d894-121">「統計の自動作成」の有効化し、オプションの「統計の更新を自動」特に高負荷環境で不適切なクエリ実行の遅延が発生することができます。</span><span class="sxs-lookup"><span data-stu-id="2d894-121">Enabling the "auto create statistics" and "auto update statistics" options can cause undesirable query execution delays, especially in a high-load environment.</span></span>  
  
 <span data-ttu-id="2d894-122">さらに、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ストアド プロシージャは、完全結合とクエリに指定されたロック ヒントがあります。</span><span class="sxs-lookup"><span data-stu-id="2d894-122">In addition, the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] stored procedures have exact joins and lock hints specified on the queries.</span></span> <span data-ttu-id="2d894-123">これは、によって最適なクエリ プランが使用されるようにするため、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]でのクエリ[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="2d894-123">This is done to ensure that the optimal query plan is used by the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] queries in [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)].</span></span> <span data-ttu-id="2d894-124">分布と期待される結果のクエリがわかっているです。返される行の概数がわかっているとします。</span><span class="sxs-lookup"><span data-stu-id="2d894-124">The distributions and expected results for the queries are known; the approximate number of rows returned is known.</span></span> <span data-ttu-id="2d894-125">統計情報は、通常必要ありません。</span><span class="sxs-lookup"><span data-stu-id="2d894-125">Statistics are generally not needed.</span></span>  
  
 <span data-ttu-id="2d894-126">詳細については、次のサポート技術情報の記事を参照してください。</span><span class="sxs-lookup"><span data-stu-id="2d894-126">For more information, see the following Microsoft Knowledge Base articles:</span></span>  
  
-   <span data-ttu-id="2d894-127">**912262**—[「、自動統計更新オプション、自動統計の作成オプション、および並列処理の設定が、BizTalk Server BizTalkMsgBoxDB データベースをホストする SQL Server データベース インスタンスでになっている」](http://go.microsoft.com/fwlink/?LinkId=153430)(http://go.microsoft.com/fwlink/?LinkId=153430)。</span><span class="sxs-lookup"><span data-stu-id="2d894-127">**912262**—["The auto update statistics option, the auto create statistics option, and the Parallelism setting are turned off in the SQL Server database instance that hosts the BizTalk Server BizTalkMsgBoxDB database"](http://go.microsoft.com/fwlink/?LinkId=153430) (http://go.microsoft.com/fwlink/?LinkId=153430).</span></span>  
  
-   <span data-ttu-id="2d894-128">**917845**—[「するブロックが発生する、BizTalk Server で、BizTalkMsgBoxDb データベースに接続しようとすると、条件、またはその他の SQL Server の問題をデッドロック」](http://go.microsoft.com/fwlink/?LinkId=153429) (http://go.microsoft.com/fwlink/?LinkId=153429)。</span><span class="sxs-lookup"><span data-stu-id="2d894-128">**917845**—["You experience blocking, deadlock conditions, or other SQL Server issues when you try to connect to the BizTalkMsgBoxDb database in BizTalk Server"](http://go.microsoft.com/fwlink/?LinkId=153429) (http://go.microsoft.com/fwlink/?LinkId=153429).</span></span>  
  
## <a name="changes-to-the-messagebox-database"></a><span data-ttu-id="2d894-129">メッセージ ボックス データベースへの変更</span><span class="sxs-lookup"><span data-stu-id="2d894-129">Changes to the MessageBox Database</span></span>  
 <span data-ttu-id="2d894-130">メッセージ ボックス データベースは、Microsoft 以外のアプリケーションのソース コードのように処理されます。</span><span class="sxs-lookup"><span data-stu-id="2d894-130">The MessageBox database should be treated like non-Microsoft application source code.</span></span> <span data-ttu-id="2d894-131">必要がありますいない「に合わせて調整する」、メッセージ ボックス データベースを介してテーブル、インデックス、ストアド プロシージャ、およびほとんどの SQL Server データベースの設定を変更します。</span><span class="sxs-lookup"><span data-stu-id="2d894-131">That is, you should not “tweak” the MessageBox database via changes to tables, indexes, stored procedures, and most SQL Server database settings.</span></span> <span data-ttu-id="2d894-132">詳細については、BizTalk のコア エンジンのブログ エントリを参照してください。 ["できる項目と、メッセージ ボックス データベース サーバーでは実行できません"](http://go.microsoft.com/fwlink/?LinkId=101577) (http://go.microsoft.com/fwlink/?LinkId=101577)。</span><span class="sxs-lookup"><span data-stu-id="2d894-132">For more information, in the BizTalk Core Engine's WebLog, see the entry ["What you can and can't do with the MessageBox Database server"](http://go.microsoft.com/fwlink/?LinkId=101577) (http://go.microsoft.com/fwlink/?LinkId=101577).</span></span>  
  
## <a name="default-settings-for-the-database-index-rebuilds-and-defragmentation"></a><span data-ttu-id="2d894-133">データベースのインデックス再構築と最適化の既定の設定</span><span class="sxs-lookup"><span data-stu-id="2d894-133">Default Settings for the Database Index Rebuilds and Defragmentation</span></span>  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="2d894-134">最適化インデックスはサポートされません。</span><span class="sxs-lookup"><span data-stu-id="2d894-134"> does not support defragmenting indexes.</span></span> <span data-ttu-id="2d894-135">"DBCC INDEXDEFRAG"および"ALTER INDEX…</span><span class="sxs-lookup"><span data-stu-id="2d894-135">“DBCC INDEXDEFRAG” and “ALTER INDEX …</span></span> <span data-ttu-id="2d894-136">REORGANIZE..."</span><span class="sxs-lookup"><span data-stu-id="2d894-136">REORGANIZE …”</span></span> <span data-ttu-id="2d894-137">ページ ロック、ブロックが発生することができを使用してデッドロックを使用しているのではサポートされていません[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]です。</span><span class="sxs-lookup"><span data-stu-id="2d894-137">are not supported since they use page locking, which can cause blocking and deadlocks with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="2d894-138">("DBCC DBREINDEX"および"ALTER INDEX... の機能はサポートのデータベースのインデックスの再構築します。</span><span class="sxs-lookup"><span data-stu-id="2d894-138"> does support database index rebuilds (“DBCC DBREINDEX” and “ALTER INDEX …</span></span> <span data-ttu-id="2d894-139">REBUILD...")、メンテナンス期間中にのみ実行する必要がありますが、ときに[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]はデータを処理していません。</span><span class="sxs-lookup"><span data-stu-id="2d894-139">REBUILD …”), but they should only be done during maintenance windows when [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] is not processing data.</span></span> <span data-ttu-id="2d894-140">インデックスの再作成中に[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]処理は、データがサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="2d894-140">Index rebuilds while [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] is processing data are not supported.</span></span>  
  
 <span data-ttu-id="2d894-141">詳細については、Microsoft サポート技術情報の記事 917845 を参照してください["するブロックが発生する、BizTalk Server で、BizTalkMsgBoxDb データベースに接続しようとすると、条件、またはその他の SQL Server の問題をデッドロック"](http://go.microsoft.com/fwlink/?LinkId=153429) (http://go.microsoft.com/fwlink/?LinkId=153429)。</span><span class="sxs-lookup"><span data-stu-id="2d894-141">For more information, see Microsoft Knowledge Base article 917845 [" You experience blocking, deadlock conditions, or other SQL Server issues when you try to connect to the BizTalkMsgBoxDb database in BizTalk Server"](http://go.microsoft.com/fwlink/?LinkId=153429) (http://go.microsoft.com/fwlink/?LinkId=153429).</span></span>  
  
 <span data-ttu-id="2d894-142">インデックスの断片化ができるだけ多くのパフォーマンスの問題の[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]DSS システムまたはインデックス スキャンを実行する OLTP システムであるようです。</span><span class="sxs-lookup"><span data-stu-id="2d894-142">Index fragmentation is not as much of a performance issue for [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] as it would be for a DSS system or an OLTP system that performs index scans.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="2d894-143">非常に選択的なクエリと更新プログラムおよび[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]またはインデックス スキャンのストアド プロシージャがテーブルに発生することはできません。</span><span class="sxs-lookup"><span data-stu-id="2d894-143"> does very selective queries and updates and [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] stored procedures should not cause table or index scans.</span></span>  
  
 <span data-ttu-id="2d894-144">インデックスの断片化とワークロードの種類の詳細については、次を参照してください。 ["Microsoft SQL Server 2000 インデックスの最適化に関するベスト プラクティス"](http://go.microsoft.com/fwlink/?LinkId=101580) (http://go.microsoft.com/fwlink/?LinkId=101580)。</span><span class="sxs-lookup"><span data-stu-id="2d894-144">For more information about index fragmentation and workload types, see ["Microsoft SQL Server 2000 Index Defragmentation Best Practices"](http://go.microsoft.com/fwlink/?LinkId=101580) (http://go.microsoft.com/fwlink/?LinkId=101580).</span></span> <span data-ttu-id="2d894-145">アーティクルから見積もり:</span><span class="sxs-lookup"><span data-stu-id="2d894-145">A quote from the article:</span></span>  
  
 <span data-ttu-id="2d894-146">"図 1 に示すように、ほとんど間に違いは、ストアド プロシージャの前と、後パフォーマンスを最適化します。</span><span class="sxs-lookup"><span data-stu-id="2d894-146">“As shown in Figure 1, there is little difference between the performance of the stored procedures before and after defragmenting.</span></span> <span data-ttu-id="2d894-147">これらのストアド プロシージャによって発行された基になるクエリは、データの一部が非常に選択的に処理をワークロードのパフォーマンスが悪影響を及ぼす受けません断片化したインデックス。"</span><span class="sxs-lookup"><span data-stu-id="2d894-147">Because the underlying queries issued by these stored procedures acted upon very selective portions of the data, workload performance was not adversely affected by fragmented indexes.”</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2d894-148">記事の内容にも適用[!INCLUDE[btsSQLServer2008](../includes/btssqlserver2008-md.md)]と[!INCLUDE[btsSQLServer2005](../includes/btssqlserver2005-md.md)]です。</span><span class="sxs-lookup"><span data-stu-id="2d894-148">The contents of the article also apply to [!INCLUDE[btsSQLServer2008](../includes/btssqlserver2008-md.md)] and [!INCLUDE[btsSQLServer2005](../includes/btssqlserver2005-md.md)].</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2d894-149">参照</span><span class="sxs-lookup"><span data-stu-id="2d894-149">See Also</span></span>  
 [<span data-ttu-id="2d894-150">チェックリスト: SQL Server を構成します。</span><span class="sxs-lookup"><span data-stu-id="2d894-150">Checklist: Configuring SQL Server</span></span>](~/technical-guides/checklist-configuring-sql-server.md)