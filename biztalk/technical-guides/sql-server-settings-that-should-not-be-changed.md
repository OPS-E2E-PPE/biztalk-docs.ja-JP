---
title: SQL Server の設定を変更しないように |Microsoft Docs
description: Max Degree of Parallelism を自動作成統計の自動更新の統計、および BizTalk Server でのインデックスの再構築
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 4b383bfb-c3d9-47d4-b294-f6be94302734
caps.latest.revision: 2
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 60479097dc9e56c2bc0c525d0de7d7a33afccaa5
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/27/2018
ms.locfileid: "36978267"
---
# <a name="sql-server-settings-that-should-not-be-changed"></a><span data-ttu-id="587f5-103">SQL Server の設定を変更しないでください。</span><span class="sxs-lookup"><span data-stu-id="587f5-103">SQL Server Settings That Should Not Be Changed</span></span>
<span data-ttu-id="587f5-104">設定するときに[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]の運用準備手順の間に[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]、次の設定を変更しないでいます。</span><span class="sxs-lookup"><span data-stu-id="587f5-104">When setting up [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] during the operational readiness procedures for [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], you should not make changes to the following settings.</span></span>  
  
## <a name="sql-server-max-degree-of-parallelism"></a><span data-ttu-id="587f5-105">SQL Server の並列処理の最大限度</span><span class="sxs-lookup"><span data-stu-id="587f5-105">SQL Server Max Degree of Parallelism</span></span>  
 <span data-ttu-id="587f5-106">最大限の並列処理 (MDOP) は、構成する際に「1」に設定されて[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]の[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]インスタンスをホストする、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]メッセージ ボックス データベースです。</span><span class="sxs-lookup"><span data-stu-id="587f5-106">Max Degree of Parallelism (MDOP) is set to “1” during the configuration of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] for the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instance(s) that host the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] MessageBox database(s).</span></span> <span data-ttu-id="587f5-107">これは、[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]インスタンス レベルの設定。</span><span class="sxs-lookup"><span data-stu-id="587f5-107">This is a [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instance-level setting.</span></span> <span data-ttu-id="587f5-108">この設定は、「1」の値から変更する必要があります。</span><span class="sxs-lookup"><span data-stu-id="587f5-108">This setting should not be changed from the value of “1”.</span></span> <span data-ttu-id="587f5-109">「1」以外のものに変更するの大きな悪影響を及ぼすことができます、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ストアド プロシージャとパフォーマンス。</span><span class="sxs-lookup"><span data-stu-id="587f5-109">Changing this to anything other than “1” can have a significant negative impact on the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] stored procedures and performance.</span></span> <span data-ttu-id="587f5-110">インスタンスを並列処理の設定を変更する場合[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]で実行されている他のデータベース アプリケーションに悪影響を与えるが、[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]インスタンスの別のインスタンスを作成する必要があります[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]専用のホスト[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]データベース。</span><span class="sxs-lookup"><span data-stu-id="587f5-110">If changing the parallelism setting for an instance of [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] will have an adverse effect on other database applications that are being executed on the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instance, you should create a separate instance of [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] dedicated to hosting the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases.</span></span>  
  
 <span data-ttu-id="587f5-111">並列クエリでは、バッチ処理に最も適したは一般にし、意思決定支援作業します。</span><span class="sxs-lookup"><span data-stu-id="587f5-111">Parallel queries are generally best suited to batch processing and decision support workloads.</span></span> <span data-ttu-id="587f5-112">通常では、並列で実行されている多数の短い、高速なクエリを持つトランザクション処理環境で望ましいはありません。</span><span class="sxs-lookup"><span data-stu-id="587f5-112">They are typically not desirable in a transaction processing environment where you have many short, fast queries running in parallel.</span></span> <span data-ttu-id="587f5-113">クエリのパフォーマンス低下につながるまたはでもデッドロックがクエリ プランを変更することもあります原因設定 MDOP をさらに、変更、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]クエリ。</span><span class="sxs-lookup"><span data-stu-id="587f5-113">In addition, changing the MDOP setting sometimes causes the query plan to be changed, which leads to poor query performance or even deadlocks with the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] queries.</span></span>  
  
 <span data-ttu-id="587f5-114">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ストアド プロシージャが適切な結合を提供および多くの作業を行い、プランの変更から、クエリ オプティマイザーを維持しようとするために可能な場合にヒントをロックします。</span><span class="sxs-lookup"><span data-stu-id="587f5-114">The [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] stored procedures provide the correct joins and lock hints wherever possible in order to try to keep the query optimizer from doing much work and changing the plan.</span></span> <span data-ttu-id="587f5-115">これらのストアド プロシージャは、クエリ オプティマイザーが可能な限り、画像から実行されるように、クエリを構築することによって、一貫性のあるクエリの実行を提供します。</span><span class="sxs-lookup"><span data-stu-id="587f5-115">These stored procedures provide consistent query executions by constructing the queries such that the query optimizer is taken out of the picture as much as possible.</span></span>  
  
 <span data-ttu-id="587f5-116">詳細については、次を参照してください。 [KB 899000: BizTalk Server で使用される SQL Server インスタンスの並列処理の設定](https://support.microsoft.com/help/899000/the-parallelism-setting-for-the-instance-of-sql-server-when-you-config)します。</span><span class="sxs-lookup"><span data-stu-id="587f5-116">For more information, see [KB 899000: Parallelism setting for SQL Server instance used by BizTalk Server](https://support.microsoft.com/help/899000/the-parallelism-setting-for-the-instance-of-sql-server-when-you-config).</span></span>  
  
## <a name="sql-server-statistics-on-the-messagebox-database"></a><span data-ttu-id="587f5-117">メッセージ ボックス データベースで SQL Server の統計</span><span class="sxs-lookup"><span data-stu-id="587f5-117">SQL Server Statistics on the MessageBox Database</span></span>  
 <span data-ttu-id="587f5-118">次のオプションが既定でオフ、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]メッセージ ボックス データベースが作成されたとき。</span><span class="sxs-lookup"><span data-stu-id="587f5-118">The following options are turned off by default in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] MessageBox database when it is created:</span></span>  
  
- <span data-ttu-id="587f5-119">統計の自動作成します。</span><span class="sxs-lookup"><span data-stu-id="587f5-119">Auto create statistics</span></span>  
  
- <span data-ttu-id="587f5-120">統計の自動更新</span><span class="sxs-lookup"><span data-stu-id="587f5-120">Auto update statistics</span></span>  
  
  <span data-ttu-id="587f5-121">メッセージ ボックス データベースにこれらのオプションを有効にしないでください。</span><span class="sxs-lookup"><span data-stu-id="587f5-121">Do not enable these options on MessageBox databases.</span></span> <span data-ttu-id="587f5-122">「統計の自動作成」を有効にして、オプションの「自動 update statistics」特に負荷の高い環境で望ましくないクエリ実行の遅延が発生することができます。</span><span class="sxs-lookup"><span data-stu-id="587f5-122">Enabling the "auto create statistics" and "auto update statistics" options can cause undesirable query execution delays, especially in a high-load environment.</span></span>  
  
  <span data-ttu-id="587f5-123">さらに、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ストアド プロシージャは、正確な結合とクエリに指定されたロック ヒントがあります。</span><span class="sxs-lookup"><span data-stu-id="587f5-123">In addition, the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] stored procedures have exact joins and lock hints specified on the queries.</span></span> <span data-ttu-id="587f5-124">これは、によって最適なクエリ プランが使用されるようにするため、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]でクエリを[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="587f5-124">This is done to ensure that the optimal query plan is used by the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] queries in [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)].</span></span> <span data-ttu-id="587f5-125">ディストリビューションと、クエリの結果を予想が呼ばれます。返される行の概数をいいます。</span><span class="sxs-lookup"><span data-stu-id="587f5-125">The distributions and expected results for the queries are known; the approximate number of rows returned is known.</span></span> <span data-ttu-id="587f5-126">通常、統計情報は必要ありません。</span><span class="sxs-lookup"><span data-stu-id="587f5-126">Statistics are generally not needed.</span></span>  
  
  <span data-ttu-id="587f5-127">詳細については、次のサポート技術情報の記事を参照してください。</span><span class="sxs-lookup"><span data-stu-id="587f5-127">For more information, see the following Microsoft Knowledge Base articles:</span></span>  
  
- <span data-ttu-id="587f5-128">**912262**—[「自動更新の統計オプションの自動作成統計のオプションと、BizTalk Server BizTalkMsgBoxDB データベースをホストする SQL Server データベース インスタンスで並列処理の設定がになっている」](https://support.microsoft.com/help/912262/the-auto-update-statistics-option-the-auto-create-statistics-option-an).</span><span class="sxs-lookup"><span data-stu-id="587f5-128">**912262**—["The auto update statistics option, the auto create statistics option, and the Parallelism setting are turned off in the SQL Server database instance that hosts the BizTalk Server BizTalkMsgBoxDB database"](https://support.microsoft.com/help/912262/the-auto-update-statistics-option-the-auto-create-statistics-option-an).</span></span>  
  
- <span data-ttu-id="587f5-129">**917845**—[「、発生したブロックしている BizTalk Server で、BizTalkMsgBoxDb データベースに接続しようとすると、条件、またはその他の SQL Server の問題をデッドロック」](https://support.microsoft.com/help/917845/you-experience-blocking--deadlock-conditions--or-other-sql-server-issu)します。</span><span class="sxs-lookup"><span data-stu-id="587f5-129">**917845**—["You experience blocking, deadlock conditions, or other SQL Server issues when you try to connect to the BizTalkMsgBoxDb database in BizTalk Server"](https://support.microsoft.com/help/917845/you-experience-blocking--deadlock-conditions--or-other-sql-server-issu).</span></span>  
  
## <a name="changes-to-the-messagebox-database"></a><span data-ttu-id="587f5-130">メッセージ ボックス データベースへの変更</span><span class="sxs-lookup"><span data-stu-id="587f5-130">Changes to the MessageBox Database</span></span>  
 <span data-ttu-id="587f5-131">メッセージ ボックス データベースは、Microsoft 以外のアプリケーションのソース コードのように処理されます。</span><span class="sxs-lookup"><span data-stu-id="587f5-131">The MessageBox database should be treated like non-Microsoft application source code.</span></span> <span data-ttu-id="587f5-132">つまり、する必要がありますいない「を調整する」テーブル、インデックス、ストアド プロシージャ、およびほとんどの SQL Server データベースの設定の変更を使用してメッセージ ボックス データベースです。</span><span class="sxs-lookup"><span data-stu-id="587f5-132">That is, you should not “tweak” the MessageBox database via changes to tables, indexes, stored procedures, and most SQL Server database settings.</span></span> <span data-ttu-id="587f5-133">詳細については、BizTalk コア エンジンのブログでは、次を参照してください。[ことを確認し、メッセージ ボックス データベース サーバーで実行できない](http://go.microsoft.com/fwlink/p/?LinkId=101577)します。</span><span class="sxs-lookup"><span data-stu-id="587f5-133">For more information, in the BizTalk Core Engine's WebLog, see [What you can and can't do with the MessageBox Database server](http://go.microsoft.com/fwlink/p/?LinkId=101577).</span></span>  
  
## <a name="default-settings-for-the-database-index-rebuilds-and-defragmentation"></a><span data-ttu-id="587f5-134">データベースのインデックス再構築と最適化の既定の設定</span><span class="sxs-lookup"><span data-stu-id="587f5-134">Default Settings for the Database Index Rebuilds and Defragmentation</span></span>  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="587f5-135"> インデックスの最適化をサポートしません。</span><span class="sxs-lookup"><span data-stu-id="587f5-135"> does not support defragmenting indexes.</span></span> <span data-ttu-id="587f5-136">"DBCC INDEXDEFRAG"および"ALTER INDEX…</span><span class="sxs-lookup"><span data-stu-id="587f5-136">“DBCC INDEXDEFRAG” and “ALTER INDEX …</span></span> <span data-ttu-id="587f5-137">REORGANIZE..."</span><span class="sxs-lookup"><span data-stu-id="587f5-137">REORGANIZE …”</span></span> <span data-ttu-id="587f5-138">ページ ロックのブロックしている可能性があるとを使用したデッドロックを使用するためにサポートされていません[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="587f5-138">are not supported since they use page locking, which can cause blocking and deadlocks with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="587f5-139"> ("DBCC DBREINDEX"および"ALTER INDEX... はサポートのデータベースのインデックスの再構築します。</span><span class="sxs-lookup"><span data-stu-id="587f5-139"> does support database index rebuilds (“DBCC DBREINDEX” and “ALTER INDEX …</span></span> <span data-ttu-id="587f5-140">REBUILD...")、メンテナンス期間中にのみ実行する必要がありますが、ときに[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]がデータを処理していません。</span><span class="sxs-lookup"><span data-stu-id="587f5-140">REBUILD …”), but they should only be done during maintenance windows when [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] is not processing data.</span></span> <span data-ttu-id="587f5-141">インデックスを再構築中に[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]処理は、データがサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="587f5-141">Index rebuilds while [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] is processing data are not supported.</span></span>  
  
 <span data-ttu-id="587f5-142">詳細については、次を参照してください。 [KB 917845:、ブロッキングが発生した BizTalk Server で、BizTalkMsgBoxDb データベースに接続しようとすると、条件、またはその他の SQL Server の問題をデッドロック"](https://support.microsoft.com/help/917845/you-experience-blocking--deadlock-conditions--or-other-sql-server-issu)します。</span><span class="sxs-lookup"><span data-stu-id="587f5-142">For more information, see [KB 917845: You experience blocking, deadlock conditions, or other SQL Server issues when you try to connect to the BizTalkMsgBoxDb database in BizTalk Server"](https://support.microsoft.com/help/917845/you-experience-blocking--deadlock-conditions--or-other-sql-server-issu).</span></span>  
  
 <span data-ttu-id="587f5-143">インデックスの断片化がないほどのパフォーマンスの問題の[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]DSS システムまたはインデックス スキャンを実行する OLTP システムであるようです。</span><span class="sxs-lookup"><span data-stu-id="587f5-143">Index fragmentation is not as much of a performance issue for [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] as it would be for a DSS system or an OLTP system that performs index scans.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="587f5-144"> 非常に高いクエリと更新プログラムと[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]またはインデックス スキャンのストアド プロシージャがテーブルに発生することはできません。</span><span class="sxs-lookup"><span data-stu-id="587f5-144"> does very selective queries and updates and [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] stored procedures should not cause table or index scans.</span></span>  
  
 
## <a name="see-also"></a><span data-ttu-id="587f5-145">参照</span><span class="sxs-lookup"><span data-stu-id="587f5-145">See Also</span></span>  
 [<span data-ttu-id="587f5-146">チェックリスト: SQL Server の構成</span><span class="sxs-lookup"><span data-stu-id="587f5-146">Checklist: Configuring SQL Server</span></span>](~/technical-guides/checklist-configuring-sql-server.md)
