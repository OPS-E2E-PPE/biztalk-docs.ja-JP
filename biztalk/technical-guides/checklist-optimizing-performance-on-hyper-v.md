---
title: 'チェックリスト: HYPER-V のパフォーマンスの最適化 |Microsoft Docs'
ms.custom: ''
ms.date: 06/29/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 942a61eb-0fdd-4c8b-b0ad-d32951f0f631
caps.latest.revision: 23
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: bbd9ec3f47c12107c4ebfc32f109a5248b97a75f
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/27/2018
ms.locfileid: "36975563"
---
# <a name="checklist-optimizing-performance-on-hyper-v"></a><span data-ttu-id="55935-102">チェックリスト: HYPER-V のパフォーマンスを最適化します。</span><span class="sxs-lookup"><span data-stu-id="55935-102">Checklist: Optimizing Performance on Hyper-V</span></span>
<span data-ttu-id="55935-103">次の点は、BizTalk Server を実行している場合や、[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]を HYPER-V 仮想マシンで BizTalk Server データベースを持つインスタンス。</span><span class="sxs-lookup"><span data-stu-id="55935-103">The following considerations apply when running BizTalk Server and/or the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instance(s) that have the BizTalk Server databases on Hyper-V virtual machines.</span></span>  

## <a name="allocate-110125-of-cpu-and-disk-resources-to-the-hyper-v-virtual-machines"></a><span data-ttu-id="55935-104">HYPER-V 仮想マシンに CPU とディスク リソースの 110% – 125% を割り当てる</span><span class="sxs-lookup"><span data-stu-id="55935-104">Allocate 110%–125% of CPU and Disk Resources to the Hyper-V Virtual Machines</span></span>  
 <span data-ttu-id="55935-105">CPU リソースの 110% 125% とソリューションの使用する HYPER-V 仮想マシンを物理ハードウェア ソリューションに必要なディスク リソースの 105% ~ 110% を割り当てることを計画します。</span><span class="sxs-lookup"><span data-stu-id="55935-105">Plan to allocate 110% to 125% of the CPU resources and 105% - 110% of the disk resources required by a physical hardware solution to the Hyper-V virtual machines used for the solution.</span></span> <span data-ttu-id="55935-106">追加のリソースと、HYPER-V 仮想マシンを構成することで、HYPER-V 仮想化テクノロジに必要なオーバーヘッドも考慮に入れるため中に物理ハードウェアと同等のパフォーマンスを提供できるようになります。</span><span class="sxs-lookup"><span data-stu-id="55935-106">By configuring the Hyper-V virtual machine with additional resources, you will ensure that it can provide performance on par with physical hardware while accommodating any overhead required by Hyper-V virtualization technology.</span></span>  


|                                                                                      <span data-ttu-id="55935-107">手順</span><span class="sxs-lookup"><span data-stu-id="55935-107">Step</span></span>                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <span data-ttu-id="55935-108">リファレンス</span><span class="sxs-lookup"><span data-stu-id="55935-108">Reference</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                      <span data-ttu-id="55935-109">ハードウェア要件、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ソリューション。</span><span class="sxs-lookup"><span data-stu-id="55935-109">Scope the hardware requirements for the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] solution.</span></span>                       | <span data-ttu-id="55935-110">-の「の計画環境の BizTalk Server」セクションのガイダンスに従って、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]操作ガイド[ http://go.microsoft.com/fwlink/?LinkId=122399 ](http://go.microsoft.com/fwlink/?LinkId=122399)ソリューションのハードウェア要件のスコープ。</span><span class="sxs-lookup"><span data-stu-id="55935-110">-   Follow the guidance in the “Planning the Environment for BizTalk Server” section of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Operations Guide at [http://go.microsoft.com/fwlink/?LinkId=122399](http://go.microsoft.com/fwlink/?LinkId=122399) to scope the hardware requirements for the solution.</span></span><br /><span data-ttu-id="55935-111">-確認で「BizTalk Server 層を計画」に記載されている考慮事項を計画する BizTalk Server のエディション ソリューションで必要な BizTalk Server の数のスコープに[ http://go.microsoft.com/fwlink/?LinkId=122401](http://go.microsoft.com/fwlink/?LinkId=122401)します。</span><span class="sxs-lookup"><span data-stu-id="55935-111">-   To scope the edition and number of BizTalk Servers that will be required by the solution review BizTalk Server planning considerations documented in “Planning the BizTalk Server Tier” at [http://go.microsoft.com/fwlink/?LinkId=122401](http://go.microsoft.com/fwlink/?LinkId=122401).</span></span><br /><span data-ttu-id="55935-112">スコープのバージョンとの数に[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]、ソリューションで必要なコンピューターでの計画に関する考慮事項を「、データベース層の計画」に記載されているデータベースの確認[ http://go.microsoft.com/fwlink/?LinkId=122402 ](http://go.microsoft.com/fwlink/?LinkId=122402)と"パフォーマンスHYPER-V での SQL Server の実行のオーバーヘッド"セクションで使用可能な「を実行している SQL Server 2008 in a Hyper-v 環境ベスト プラクティスとパフォーマンスに関する考慮事項」のホワイト ペーパーの[ http://go.microsoft.com/fwlink/?LinkId=144622](http://go.microsoft.com/fwlink/?LinkId=144622)します。</span><span class="sxs-lookup"><span data-stu-id="55935-112">-   To scope the version and number of [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] computers that will be required by the solution, review database planning considerations documented in “Planning the Database Tier” at [http://go.microsoft.com/fwlink/?LinkId=122402](http://go.microsoft.com/fwlink/?LinkId=122402) and the “Performance Overhead of Running SQL Server in Hyper-V” section of the “Running SQL Server 2008 in a Hyper-V Environment Best Practices and Performance Considerations” whitepaper available at [http://go.microsoft.com/fwlink/?LinkId=144622](http://go.microsoft.com/fwlink/?LinkId=144622).</span></span><br /><span data-ttu-id="55935-113">、開発の計画を完了するにはテスト、ステージング、実稼働環境「開発、テスト、ステージング、および運用環境の計画」でご確認[ http://go.microsoft.com/fwlink/?LinkId=122403](http://go.microsoft.com/fwlink/?LinkId=122403)します。</span><span class="sxs-lookup"><span data-stu-id="55935-113">-   To complete planning for development, testing, staging, and production environments review “Planning the Development, Testing, Staging, and Production Environments” at [http://go.microsoft.com/fwlink/?LinkId=122403](http://go.microsoft.com/fwlink/?LinkId=122403).</span></span> |
| <span data-ttu-id="55935-114">BizTalk Server ソリューションのハードウェア要件をスコープには後で、HYPER-V マシンを構成する計画**110 – 125%** CPU とディスク リソースの可能な場合。</span><span class="sxs-lookup"><span data-stu-id="55935-114">After scoping the hardware requirements of your BizTalk Server solution, plan to configure the Hyper-V machines with **110% – 125%** of the CPU and disk resources if possible.</span></span> |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <span data-ttu-id="55935-115">たとえばを 2 GB の RAM をソリューションによって使用される物理的な BizTalk Server コンピューターのハードウェア要件と判断された場合、デュアル コアの CPU、物理ディスク 2 GHZ、および 2 x 500 GB で実行されているし、理想的には、ソリューションで使用される、HYPER-V 仮想マシンになります実行している 2 つ以上の仮想プロセッサで構成されている > =、(通常をスピンドル数を追加または高速なディスクを使用して) 2.2 GHZ、および物理ディスクを高速化します。</span><span class="sxs-lookup"><span data-stu-id="55935-115">For example, if the hardware requirements for a physical BizTalk Server computer used by the solution is determined to be 2GB RAM, a dual core CPU running at 2GHZ, and 2x 500 GB physical disks, then ideally, the Hyper-V virtual machine used by the solution would be configured with 2 or more virtual processors running >= 2.2 GHZ, and faster physical disks (typically by adding spindles or using faster disks).</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |

## <a name="optimize-hyper-v-performance"></a><span data-ttu-id="55935-116">HYPER-V のパフォーマンスを最適化します。</span><span class="sxs-lookup"><span data-stu-id="55935-116">Optimize Hyper-V Performance</span></span>  
 <span data-ttu-id="55935-117">最適なパフォーマンス、HYPER-V を構成するのにには、次の一般的なガイドラインを使用します。</span><span class="sxs-lookup"><span data-stu-id="55935-117">Use the following general guidelines to configure Hyper-V for optimal performance.</span></span>  

|<span data-ttu-id="55935-118">手順</span><span class="sxs-lookup"><span data-stu-id="55935-118">Step</span></span>|<span data-ttu-id="55935-119">リファレンス</span><span class="sxs-lookup"><span data-stu-id="55935-119">Reference</span></span>|  
|----------|---------------|  
|<span data-ttu-id="55935-120">パフォーマンスの仮想化サーバーのチューニングの推奨されるガイダンスを適用します。</span><span class="sxs-lookup"><span data-stu-id="55935-120">Apply recommended guidance for performance tuning virtualization servers.</span></span> <span data-ttu-id="55935-121">**注:** で記載されているテスト シナリオの[BizTalk サーバー仮想化のパフォーマンスのテスト](~/technical-guides/testing-biztalk-server-virtualization-performance.md)、適用された構成オプションの説明「物理インフラストラクチャの詳細」を"仮想化の詳細」のセクションでは、[テスト シナリオの概要](~/technical-guides/test-scenario-overview.md)トピック。</span><span class="sxs-lookup"><span data-stu-id="55935-121">**Note:**  For the test scenarios described in [Testing BizTalk Server Virtualization Performance](~/technical-guides/testing-biztalk-server-virtualization-performance.md), the configuration options that were applied are described in the “Physical Infrastructure Specifics” and the “Virtualization Specifics” sections of the [Test Scenario Overview](~/technical-guides/test-scenario-overview.md) topic.</span></span>|<span data-ttu-id="55935-122">「仮想化サーバーのパフォーマンス チューニング」セクションで使用可能な"のパフォーマンス チューニング ガイドラインの Windows Server 2008 R2"ドキュメントの[ http://go.microsoft.com/fwlink/?LinkID=202087](http://go.microsoft.com/fwlink/?LinkID=202087)します。</span><span class="sxs-lookup"><span data-stu-id="55935-122">“Performance Tuning for Virtualization Servers” section of the “Performance Tuning Guidelines for Windows Server 2008 R2” document available at [http://go.microsoft.com/fwlink/?LinkID=202087](http://go.microsoft.com/fwlink/?LinkID=202087).</span></span>|  
|<span data-ttu-id="55935-123">使用されていない仮想マシン接続ウィンドウを閉じます。</span><span class="sxs-lookup"><span data-stu-id="55935-123">Close any Virtual Machine Connection windows that aren’t being used.</span></span>|<span data-ttu-id="55935-124">HYPER-V マネージャーで仮想マシン名をダブルクリックしたときに表示される仮想マシン接続のオーナー ウィンドウは、可能性がありますそれ以外の場合に使用するリソースを消費します。</span><span class="sxs-lookup"><span data-stu-id="55935-124">The Virtual Machine Connection window(s) displayed when double-clicking a virtual machine name in the Hyper-V manager consume resources that could be otherwise utilized.</span></span>|  
|<span data-ttu-id="55935-125">閉じるか、HYPER-V マネージャーを最小化します。</span><span class="sxs-lookup"><span data-stu-id="55935-125">Close or minimize the Hyper-V manager.</span></span>|<span data-ttu-id="55935-126">HYPER-V マネージャーでは、CPU 使用率とアップタイムの各仮想マシンの実行を継続的にポーリングすることによってリソースが消費されます。</span><span class="sxs-lookup"><span data-stu-id="55935-126">The Hyper-V manager consumes resources by continually polling each running virtual machine for CPU utilization and uptime.</span></span> <span data-ttu-id="55935-127">これらのリソースを閉じるか、または HYPER-V マネージャーを最小限に抑えることが解放されます。</span><span class="sxs-lookup"><span data-stu-id="55935-127">Closing or minimizing the Hyper-V manager will free up these resources.</span></span>|  

## <a name="optimize-performance-of-disk-memory-network-and-processor-in-a-hyper-v-environment"></a><span data-ttu-id="55935-128">ディスク、メモリ、ネットワーク、および HYPER-V 環境でのプロセッサのパフォーマンスを最適化します。</span><span class="sxs-lookup"><span data-stu-id="55935-128">Optimize Performance of Disk, Memory, Network, and Processor in a Hyper-V Environment</span></span>  
 <span data-ttu-id="55935-129">ディスク、メモリ、ネットワーク、および HYPER-V の仮想環境でのプロセッサのパフォーマンスを最適化するために、次のガイドラインを使用します。</span><span class="sxs-lookup"><span data-stu-id="55935-129">Use the following guidelines to optimize performance of disk, memory, network, and processor in a Hyper-V virtual environment.</span></span>  

### <a name="optimize-processor-performance"></a><span data-ttu-id="55935-130">プロセッサのパフォーマンスを最適化します。</span><span class="sxs-lookup"><span data-stu-id="55935-130">Optimize Processor Performance</span></span>  
 <span data-ttu-id="55935-131">HYPER-V の仮想環境で実行されているゲスト オペレーティング システムのプロセッサのパフォーマンスを最適化するためにこれらのガイドラインに従います。</span><span class="sxs-lookup"><span data-stu-id="55935-131">Follow these guidelines to optimize processor performance of guest operating systems running in a Hyper-V virtual environment:</span></span>  

- <span data-ttu-id="55935-132">**最適なパフォーマンス - 使用可能な論理プロセッサの仮想プロセッサの 1 対 1 の割り当てを構成する**最適な構成をゲスト オペレーティング システム内の仮想プロセッサの 1 対 1 の比率は、CPU の処理を要するアプリケーションを実行するときに論理プロセッサ、ホスト オペレーティング システムを使用できます。</span><span class="sxs-lookup"><span data-stu-id="55935-132">**Configure a 1-to-1 allocation of virtual processors to available logical processors for best performance -** When running a CPU intensive application, the best configuration is a 1-to-1 ratio of virtual processors in the guest operating system(s) to the logical processors available to the host operating system.</span></span> <span data-ttu-id="55935-133">その他の構成 2:1 または 1:2 などの非効率です。</span><span class="sxs-lookup"><span data-stu-id="55935-133">Any other configuration such as 2:1 or 1:2 is less efficient.</span></span> <span data-ttu-id="55935-134">次の図は、ホスト オペレーティング システムで使用できる論理プロセッサにゲスト オペレーティング システムの仮想プロセッサ コアの 1 対 1 の割り当てを示しています。</span><span class="sxs-lookup"><span data-stu-id="55935-134">The following graphic illustrates a 1-to-1 allocation of virtual processor cores in the guest operating system(s) to logical processors available to the host operating system:</span></span>  

   <span data-ttu-id="55935-135">![1 対 1 の物理と仮想プロセッサの比率から](../technical-guides/media/90f98f0d-a223-404c-b419-81369dc92970.gif "1 対 1 の物理と仮想プロセッサの比率")</span><span class="sxs-lookup"><span data-stu-id="55935-135">![One to One Physical to Virtual Processor Ratio](../technical-guides/media/90f98f0d-a223-404c-b419-81369dc92970.gif "One to One Physical to Virtual Processor Ratio")</span></span>  
  <span data-ttu-id="55935-136">仮想と論理プロセッサの比率</span><span class="sxs-lookup"><span data-stu-id="55935-136">Virtual to logical processor ratio</span></span>  

- <span data-ttu-id="55935-137">**さまざまなゲスト オペレーティング システムの仮想プロセッサの制限を認識し、計画を立てて -** 全体に影響を与えることができます、HYPER-V 仮想マシンで実行されているゲスト オペレーティング システムを利用できるプロセッサ コアの数ホストされるアプリケーションのパフォーマンス。</span><span class="sxs-lookup"><span data-stu-id="55935-137">**Be aware of the virtual processor limit for different guest operating systems and plan accordingly -** The number of processor cores that are available to the guest operating system running in a Hyper-V virtual machine can impact the overall performance of the hosted application.</span></span> <span data-ttu-id="55935-138">そのため、考慮対象として行う必要があります、BizTalk Server をホストする HYPER-V 仮想マシンで、オペレーティング システムをインストールしたりゲストや[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]BizTalk Server データベースをホストするインスタンス。</span><span class="sxs-lookup"><span data-stu-id="55935-138">Therefore, consideration should be made as to which guest operating system will be installed on the Hyper-V virtual machine to host the BizTalk Server and/or [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instance(s) that host the BizTalk Server databases.</span></span> <span data-ttu-id="55935-139">HYPER-V は、指定したゲスト オペレーティング システムの仮想プロセッサの数を次に対応します。</span><span class="sxs-lookup"><span data-stu-id="55935-139">Hyper-V accommodates the following number of virtual processors for the specified guest operating system:</span></span>  

|                                                                      <span data-ttu-id="55935-140">オペレーティング システム</span><span class="sxs-lookup"><span data-stu-id="55935-140">Operating system</span></span>                                                                       | <span data-ttu-id="55935-141">仮想プロセッサ数の上限</span><span class="sxs-lookup"><span data-stu-id="55935-141">Virtual processor limit</span></span> |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|
| [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]<span data-ttu-id="55935-142">。</span><span class="sxs-lookup"><span data-stu-id="55935-142">.</span></span> <span data-ttu-id="55935-143">すべてのエディション[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]は 64 ビットのみです。</span><span class="sxs-lookup"><span data-stu-id="55935-143">All editions of [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] are 64-bit only.</span></span> |            <span data-ttu-id="55935-144">4</span><span class="sxs-lookup"><span data-stu-id="55935-144">4</span></span>            |
|                                               [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)]<span data-ttu-id="55935-145"> 64 ビット</span><span class="sxs-lookup"><span data-stu-id="55935-145"> 64-bit</span></span>                                               |            <span data-ttu-id="55935-146">4</span><span class="sxs-lookup"><span data-stu-id="55935-146">4</span></span>            |
|                                               [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)]<span data-ttu-id="55935-147"> 32 ビット</span><span class="sxs-lookup"><span data-stu-id="55935-147"> 32-bit</span></span>                                               |            <span data-ttu-id="55935-148">4</span><span class="sxs-lookup"><span data-stu-id="55935-148">4</span></span>            |
|                                                                      <span data-ttu-id="55935-149">Windows 7 64 ビット</span><span class="sxs-lookup"><span data-stu-id="55935-149">Windows 7 64-bit</span></span>                                                                       |            <span data-ttu-id="55935-150">4</span><span class="sxs-lookup"><span data-stu-id="55935-150">4</span></span>            |
|                                                                      <span data-ttu-id="55935-151">Windows 7 32 ビット</span><span class="sxs-lookup"><span data-stu-id="55935-151">Windows 7 32-bit</span></span>                                                                       |            <span data-ttu-id="55935-152">4</span><span class="sxs-lookup"><span data-stu-id="55935-152">4</span></span>            |
|                                                                    <span data-ttu-id="55935-153">Windows Vista 64 ビット</span><span class="sxs-lookup"><span data-stu-id="55935-153">Windows Vista 64-bit</span></span>                                                                     |            <span data-ttu-id="55935-154">2</span><span class="sxs-lookup"><span data-stu-id="55935-154">2</span></span>            |
|                                                                    <span data-ttu-id="55935-155">Windows Vista 32 ビット</span><span class="sxs-lookup"><span data-stu-id="55935-155">Windows Vista  32-bit</span></span>                                                                    |            <span data-ttu-id="55935-156">2</span><span class="sxs-lookup"><span data-stu-id="55935-156">2</span></span>            |

> [!NOTE]
>  <span data-ttu-id="55935-157">HYPER-V でサポートされているゲスト オペレーティング システムの詳細については、次を参照してください。 [ http://go.microsoft.com/fwlink/?LinkID=118347](http://go.microsoft.com/fwlink/?LinkID=118347)します。</span><span class="sxs-lookup"><span data-stu-id="55935-157">For more information about the guest operating systems that are supported on Hyper-V, see [http://go.microsoft.com/fwlink/?LinkID=118347](http://go.microsoft.com/fwlink/?LinkID=118347).</span></span>  

### <a name="optimize-disk-performance"></a><span data-ttu-id="55935-158">ディスクのパフォーマンスを最適化します。</span><span class="sxs-lookup"><span data-stu-id="55935-158">Optimize Disk Performance</span></span>  
 <span data-ttu-id="55935-159">HYPER-V の仮想環境で実行されているゲスト オペレーティング システムのディスクのパフォーマンスを最適化するためにこれらのガイドラインに従います。</span><span class="sxs-lookup"><span data-stu-id="55935-159">Follow these guidelines to optimize disk performance of guest operating systems running in a Hyper-V virtual environment:</span></span>  

|<span data-ttu-id="55935-160">手順</span><span class="sxs-lookup"><span data-stu-id="55935-160">Step</span></span>|<span data-ttu-id="55935-161">リファレンス</span><span class="sxs-lookup"><span data-stu-id="55935-161">Reference</span></span>|  
|----------|---------------|  
|<span data-ttu-id="55935-162">固定サイズ バーチャル ハード_ディスク (VHD) オプションを使用して、HYPER-V 仮想マシンで使用するための仮想ディスクを構成します。</span><span class="sxs-lookup"><span data-stu-id="55935-162">Configure virtual disks for use with the Hyper-V virtual machines using the fixed-size virtual hard disk (VHD) option.</span></span> <span data-ttu-id="55935-163">固定サイズの VHD は、クラスタ リングのサポートとスナップショット ディスクのサポートなどの機能の柔軟性と物理ディスクのパフォーマンスを提供します。</span><span class="sxs-lookup"><span data-stu-id="55935-163">Fixed-size VHD offers performance approaching that of physical disks together with the flexibility of features such as clustering support and snapshot disk support.</span></span>|<span data-ttu-id="55935-164">HYPER-V 環境でディスク記憶域は、仮想 IDE コント ローラーまたは仮想 SCSI コント ローラーを使用してアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="55935-164">Disk storage in a Hyper-V environment is accessible through a virtual IDE controller or a virtual SCSI controller.</span></span> <span data-ttu-id="55935-165">Microsoft 仮想化テクノロジの以前のバージョンとは異なり、仮想 IDE コント ローラーまたは仮想 SCSI コント ローラーを使用して仮想ハード_ディスクにアクセスするときのパフォーマンスの違いはありません。</span><span class="sxs-lookup"><span data-stu-id="55935-165">Unlike previous versions of Microsoft virtualization technology, there is no performance difference between using a virtual IDE controller or a virtual SCSI controller when accessing virtual hard disks.</span></span> <span data-ttu-id="55935-166">次のディスク ストレージのオプションは、HYPER-V 環境で使用可能なされます。</span><span class="sxs-lookup"><span data-stu-id="55935-166">The following disk storage options are available for use in a Hyper-V environment:</span></span><br /><br /> <span data-ttu-id="55935-167">-   **固定サイズ ディスク -** 固定サイズ バーチャル ハード ディスク (VHD) は、いずれかのデータのブロックは、物理ディスクの作成時に定義されている最大ディスク サイズに基づくで事前に割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="55935-167">-   **Fixed size disks -** A fixed-size virtual hard disk (VHD) is one for which data blocks are pre-allocated on a physical disk based on the maximum disk size defined at the time of creation.</span></span> <span data-ttu-id="55935-168">たとえば、100 GB の固定サイズの VHD を作成する場合、HYPER-V は、新しい VHD の作成時に、VHD のヘッダーとフッターの必要なオーバーヘッドだけでなく、データ ブロックの記憶域のすべての 100 GB を割り当てます。</span><span class="sxs-lookup"><span data-stu-id="55935-168">For example, if you create a 100 GB fixed-size VHD, Hyper-V will allocate all 100 GB of data block storage in addition to the overhead required for the VHD headers and footers when it creates the new VHD.</span></span><br /><span data-ttu-id="55935-169">-   **可変のディスク -** 可変の VHD は、1 つの初期の仮想ハード ディスクが含まれていないデータ ブロックにはです。</span><span class="sxs-lookup"><span data-stu-id="55935-169">-   **Dynamically expanding disks -** A dynamically expanding VHD is one for which the initial virtual hard disk contains no data blocks.</span></span> <span data-ttu-id="55935-170">代わりに、VHD の作成時に指定された最大サイズまで、VHD にデータが書き込まれるときは、領域は動的に割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="55935-170">Instead space is dynamically allocated as data is written to the VHD, up to the maximum size specified when the VHD was created.</span></span> <span data-ttu-id="55935-171">たとえば、100 GB の可変のディスクは最初に VHD のヘッダーのみが含まれていて、2 MB 未満の物理記憶域スペースが必要です。</span><span class="sxs-lookup"><span data-stu-id="55935-171">For example, a 100-GB dynamically expanding disk initially contains only VHD headers and requires less than 2 MB of physical storage space.</span></span> <span data-ttu-id="55935-172">新しいデータは、可変の VHD を仮想マシンの書き込み、最大 100 GB の VHD ファイルに 2 MB 単位で追加の物理データ ブロックが割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="55935-172">As new data is written by the virtual machine to the dynamically expanding VHD, additional physical data blocks are allocated in 2-MB increments to the VHD file, up to a maximum of 100 GB.</span></span><br /><span data-ttu-id="55935-173">-   **差分ディスク -** 差分ディスクは特殊な種類の「親」VHD に関連付けられている VHD ファイルを動的に拡張します。</span><span class="sxs-lookup"><span data-stu-id="55935-173">-   **Differencing Disks -** A differencing disk is a special type of dynamically expanding VHD file that is associated with a “parent” VHD.</span></span> <span data-ttu-id="55935-174">この親/子の記憶域トポロジでは、親ディスクは変更されず、「子」差分ディスクのみに行われた書き込み操作。</span><span class="sxs-lookup"><span data-stu-id="55935-174">In this parent/child storage topology, the parent disk remains unchanged and any write operations made to the “child” differencing disk only.</span></span> <span data-ttu-id="55935-175">最初に読み取り操作は更新されたコンテンツが差分ディスクに書き込まれたかどうかを確認する差分ディスクに対してチェックします。場合は、コンテンツは、差分ディスクでは、コンテンツは、親 VHD から読み取られます。</span><span class="sxs-lookup"><span data-stu-id="55935-175">Any read operations are first checked against the differencing disk to see whether updated content was written to the differencing disk; if the content isn’t in the differencing disk, then the content is read from the parent VHD.</span></span> <span data-ttu-id="55935-176">差分ディスクは、特定のベースライン構成を維持する必要があるあり、簡単にテストしたいでし、基準に変更をロールバックして、シナリオに便利です。</span><span class="sxs-lookup"><span data-stu-id="55935-176">Differencing disks are useful for scenarios where you need to maintain a particular baseline configuration and would like to easily test and then rollback changes to the baseline.</span></span> <span data-ttu-id="55935-177">差分ディスクによって提供される親/子の記憶域トポロジの柔軟性はテストに便利ですが、これはパフォーマンスの最適な構成があるため、親/子のトポロジの管理に関連するオーバーヘッド差分ディスクを使用する場合に必要です。</span><span class="sxs-lookup"><span data-stu-id="55935-177">While the flexibility of the parent/child storage topology provided through differencing disks is useful for testing, this is not the optimal configuration for performance because there is overhead associated with maintaining the parent/child topology required when using differencing disks.</span></span><br /><span data-ttu-id="55935-178">-   **パススルー ディスク –** パススルー ディスクの機能により、ゲスト オペレーティング システムで HYPER-V ホスト ファイル システムをバイパスし、ディスクに直接アクセスします。</span><span class="sxs-lookup"><span data-stu-id="55935-178">-   **Passthrough disks –** The passthrough disk feature allows the guest operating system to bypass the Hyper-V Host file system and access the disk directly.</span></span> <span data-ttu-id="55935-179">パススルーを使用してゲスト オペレーティング システムに利用可能なディスクは、HYPER-V ホスト、ホストとゲスト オペレーティング システムはしないように、ディスクを同時にアクセスするには「オフライン」に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="55935-179">Disks that are made available to guest operating systems via passthrough must be set to “offline” in the Hyper-V host to ensure that both the host and guest operating system do not attempt to access the disk simultaneously.</span></span> <span data-ttu-id="55935-180">パススルー ディスクはパフォーマンスはわずかな利点は、その他のディスクを記憶域のオプションを提供して、仮想ディスクを仮想マシンのスナップショットとクラスタ リングのサポートなどの特定の機能をサポートしていません。</span><span class="sxs-lookup"><span data-stu-id="55935-180">The passthrough disk does offer a marginal performance advantage over other disk storage options but does not support certain functionality of virtual disks, such as Virtual machine snapshots and clustering support.</span></span> <span data-ttu-id="55935-181">したがってマージナル パフォーマンス上の利点が相殺機能不足しているために、BizTalk または SQL Server 環境でパススルー ディスクの機能の使用は推奨されません。</span><span class="sxs-lookup"><span data-stu-id="55935-181">Therefore use of the passthrough disk feature is not recommended in a BizTalk or SQL Server environment because the marginal performance benefits are more than offset by the missing functionality.</span></span><br /><br /> <span data-ttu-id="55935-182">HYPER-V で提供されるディスク ストレージの選択肢の相対的なパフォーマンスの詳細についてを参照してください「HYPER-V ストレージの分析」ブログ エントリ[ http://go.microsoft.com/fwlink/?LinkID=132848](http://go.microsoft.com/fwlink/?LinkID=132848)します。</span><span class="sxs-lookup"><span data-stu-id="55935-182">For more information about the relative performance of disk storage choices provided with Hyper-V, see the blog entry “Hyper-V Storage Analysis”, at [http://go.microsoft.com/fwlink/?LinkID=132848](http://go.microsoft.com/fwlink/?LinkID=132848).</span></span>|  
|<span data-ttu-id="55935-183">SCSI コント ローラーを使用してデータ ボリュームのディスクを構成します。</span><span class="sxs-lookup"><span data-stu-id="55935-183">Configure disks for data volumes using the SCSI controller</span></span>|<span data-ttu-id="55935-184">これは、SCSI コント ローラーが、エミュレートされた IDE コント ローラーで、HYPER-V 統合サービスをインストールせずに、HYPER-V 統合サービスがインストールされている場合にのみインストールするために推奨されます。</span><span class="sxs-lookup"><span data-stu-id="55935-184">This is recommended because the SCSI controller can only be installed if Hyper-V integration services are installed whereas the emulated IDE controller is available without installing Hyper-V integration services.</span></span> <span data-ttu-id="55935-185">Integration services で提供される IDE フィルター ドライバーを使用して実行するディスク I/O、ディスク I/O パフォーマンスがエミュレートされた IDE コント ローラーで提供されるよりも大幅に向上します。</span><span class="sxs-lookup"><span data-stu-id="55935-185">Disk I/O performed using the IDE filter driver provided with integration services is significantly better than disk I/O performance provided with the emulated IDE controller.</span></span> <span data-ttu-id="55935-186">そのため、最適なディスクを HYPER-V 仮想環境でのデータ ファイルの I/O パフォーマンスを確保するには、ホストとゲストの両方のオペレーティング システムに統合サービスをインストールし、統合 SCSI コント ローラーとデータ ボリュームのディスクを構成します。</span><span class="sxs-lookup"><span data-stu-id="55935-186">Therefore, to ensure optimal disk I/O performance for the data files in a Hyper-V virtualized environment, install integration services on both the host and guest operating system and configure disks for data volumes with the synthetic SCSI controller.</span></span> <span data-ttu-id="55935-187">複数のデータ ドライブにまたがる高負荷の高いストレージ I/O ワークロードでは、全体的なパフォーマンスを向上させる統合独立した SCSI コント ローラーに各 VHD をアタッチする必要があります。</span><span class="sxs-lookup"><span data-stu-id="55935-187">For highly intensive storage I/O workloads that span multiple data drives, each VHD should be attached to a separate synthetic SCSI controller for better overall performance.</span></span> <span data-ttu-id="55935-188">さらに、各 VHD は、個別の物理ディスクに格納する必要があります。</span><span class="sxs-lookup"><span data-stu-id="55935-188">In addition, each VHD should be stored on separate physical disks.</span></span> <span data-ttu-id="55935-189">**重要:** SCSI コント ローラーには、システム ディスクをアタッチできません。</span><span class="sxs-lookup"><span data-stu-id="55935-189">**Important:**  Do not attach a system disk to a SCSI controller.</span></span> <span data-ttu-id="55935-190">オペレーティング システムを含むバーチャル ハード_ディスクは、IDE コント ローラーに接続する必要があります。</span><span class="sxs-lookup"><span data-stu-id="55935-190">A virtual hard disk that contains an operating system must be attached to an IDE controller.</span></span>|  

### <a name="optimize-memory-performance"></a><span data-ttu-id="55935-191">メモリ パフォーマンスを最適化します。</span><span class="sxs-lookup"><span data-stu-id="55935-191">Optimize Memory Performance</span></span>  
 <span data-ttu-id="55935-192">HYPER-V の仮想環境で実行されているゲスト オペレーティング システムのメモリのパフォーマンスを最適化するためにこれらのガイドラインに従います。</span><span class="sxs-lookup"><span data-stu-id="55935-192">Follow these guidelines to optimize memory performance of guest operating systems running in a Hyper-V virtual environment:</span></span>  

|<span data-ttu-id="55935-193">手順</span><span class="sxs-lookup"><span data-stu-id="55935-193">Step</span></span>|<span data-ttu-id="55935-194">リファレンス</span><span class="sxs-lookup"><span data-stu-id="55935-194">Reference</span></span>|  
|----------|---------------|  
|<span data-ttu-id="55935-195">HYPER-V 仮想マシンをホストする物理コンピューターにインストールされているための十分なメモリがあることを確認します。</span><span class="sxs-lookup"><span data-stu-id="55935-195">Ensure there is sufficient memory installed on the physical computer that hosts the Hyper-V virtual machines</span></span>|<span data-ttu-id="55935-196">-使用可能な物理メモリが、HYPER-V 仮想マシンで実行されている BizTalk Server の最も重要なパフォーマンス要因ではよくあります。</span><span class="sxs-lookup"><span data-stu-id="55935-196">-   Available physical memory is often the most significant performance factor for BizTalk Server running on a Hyper-V virtual machine.</span></span> <span data-ttu-id="55935-197">これは、各仮想マシンは、非ページ プール メモリ、またはメモリをディスクにページングされることはできませんに存在する必要があります。</span><span class="sxs-lookup"><span data-stu-id="55935-197">This is because each virtual machine must reside in non-paged-pool memory, or memory that cannot be paged to the disk.</span></span> <span data-ttu-id="55935-198">非ページ プール メモリは、仮想マシンをホストする物理コンピューターをディスクにページングされることはできません必要がありますが、メモリの合計に等しいの使用可能な物理メモリ割り当てられているため各仮想マシンと、次の。</span><span class="sxs-lookup"><span data-stu-id="55935-198">Because non-paged-pool memory cannot be paged to disk, the physical computer that hosts the virtual machines should have available physical memory equal to the sum of the memory allocated for each virtual machine plus the following:</span></span><br />     <span data-ttu-id="55935-199">ハイパーバイザーの 300 MB に加えて、最初 GB の ram を各仮想マシンと他のすべて GB の RAM を追加の各仮想マシンに割り当てられている 8 MB と 512 MB のホストに割り当てられた 32 MBルート パーティションで実行されているオペレーティング システム</span><span class="sxs-lookup"><span data-stu-id="55935-199">300 MB for the Hypervisor                         plus 32 MB for the first GB of RAM allocated to each virtual machine                         plus another 8 MB for every additional GB of RAM allocated to each virtual machine                         plus 512 MB for the host operating system running on the root partition</span></span><br />     <span data-ttu-id="55935-200">たとえば、HYPER-V 仮想マシンが 2 GB のメモリは、HYPER-V マネージャーで、約 2388 MB になります、HYPER-V 仮想マシンを実行しているときに使用する実際の物理メモリを割り当てられている場合 (仮想マシンに割り当てられた、ハイパーバイザーの 300 MB +2 GB +32 MB + 8 MB = 2388 MB)。</span><span class="sxs-lookup"><span data-stu-id="55935-200">For example, if a Hyper-V virtual machine is allocated 2 GB of memory in the Hyper-V Manager, the actual physical memory used when running that Hyper-V virtual machine would be approximately 2388MB (300MB for the hypervisor +2GB allocated for the virtual machine + 32MB + 8MB = 2388MB).</span></span> <span data-ttu-id="55935-201">ハイパーバイザーはのみを 1 回読み込む必要があります、ため、後続の仮想マシンの初期化は、ハイパーバイザーの読み込みに関連する 300 MB のオーバーヘッドは発生しません。</span><span class="sxs-lookup"><span data-stu-id="55935-201">Because the hypervisor only needs to be loaded once, initialization of subsequent virtual machines does not incur the 300 MB overhead associated with loading the hypervisor.</span></span> <span data-ttu-id="55935-202">そのため、2 つの HYPER-V 仮想マシンが HYPER-V マネージャーでメモリの割り当てられた各 2 GB の場合は、これらの HYPER-V 仮想マシンの実行時に使用する実際の物理メモリが約 4476 MB (ハイパーバイザーの 300 MB +4 GB に割り当てられた仮想マシン + 64 MB + 16 MB = 4476 MB)。</span><span class="sxs-lookup"><span data-stu-id="55935-202">Therefore, if two Hyper-V virtual machines are each allocated 2 GB of memory in the Hyper-V Manager, the actual physical memory used when running these Hyper-V virtual machines would be approximately 4476MB (300MB for the hypervisor +4GB allocated for the virtual machines + 64 MB + 16MB = 4476MB).</span></span> <span data-ttu-id="55935-203">**注:** 一般則として I/O 仮想化、スナップショット ファイルのサポート、および子パーティションの管理などのサービスを提供するルート パーティションに、最低 512 MB のメモリを割り当てることを計画します。</span><span class="sxs-lookup"><span data-stu-id="55935-203">**Note:**      As a general rule of thumb, plan to allocate at least 512 MB memory for the root partition to provide services such as I/O virtualization, snapshot files support, and child partition management.</span></span><br /><span data-ttu-id="55935-204">-   **可能であれば、64 ビットのゲスト オペレーティング システムを使用して、** – 各ゲスト オペレーティング システムの 64 ビットのオペレーティング システムを使用してください。</span><span class="sxs-lookup"><span data-stu-id="55935-204">-   **Use a 64-bit guest operating system when possible** – Consider using a 64-bit operating system for each guest operating system.</span></span> <span data-ttu-id="55935-205">これは、既定では、32 ビット Windows オペレーティング システムはのみ最大 2 GB の 1 つのプロセス仮想アドレス空間を解決するために実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="55935-205">This should be done because by default, 32-bit Windows operating systems can only address up to 2GB of virtual address space per process.</span></span> <span data-ttu-id="55935-206">64 ビットのオペレーティング システムのインストールには、HYPER-V 仮想マシンをホストする物理コンピューターにインストールされているメモリのフル活用するためにアプリケーションができます。</span><span class="sxs-lookup"><span data-stu-id="55935-206">Installation of a 64-bit operating system allows applications to take full advantage of the memory installed on the physical computer that hosts the Hyper-V virtual machines.</span></span>|  

### <a name="optimize-network-performance"></a><span data-ttu-id="55935-207">ネットワーク パフォーマンスを最適化します。</span><span class="sxs-lookup"><span data-stu-id="55935-207">Optimize Network Performance</span></span>  
 <span data-ttu-id="55935-208">HYPER-V 仮想マシンでの代理とエミュレートされたネットワーク アダプターをサポートしていますが、統合デバイスは CPU オーバーヘッドの削減、パフォーマンスが著しく向上します。</span><span class="sxs-lookup"><span data-stu-id="55935-208">Hyper-V supports synthetic and emulated network adapters in virtual machines, but the synthetic devices offer significantly better performance and reduced CPU overhead.</span></span> <span data-ttu-id="55935-209">各アダプターは、外部のネットワーク接続が必要な場合、物理ネットワーク アダプターに接続できる仮想ネットワーク スイッチに接続されます。</span><span class="sxs-lookup"><span data-stu-id="55935-209">Each of these adapters is connected to a virtual network switch, which can be connected to a physical network adapter if external network connectivity is needed.</span></span> <span data-ttu-id="55935-210">このセクションでは、HYPER-V 仮想環境で実行されているゲスト オペレーティング システムのネットワーク パフォーマンスを最適化する推奨事項に従ってください。</span><span class="sxs-lookup"><span data-stu-id="55935-210">Follow the recommendations in this section to optimize network performance of guest operating systems running in a Hyper-V virtual environment.</span></span>  

> [!NOTE]
>  <span data-ttu-id="55935-211">これらの推奨事項は、"パフォーマンス チューニングの仮想化サーバー セクションからダウンロードできます"のパフォーマンス チューニング ガイドラインの Windows Server 2008 R2"ホワイト ペーパーの[ http://go.microsoft.com/fwlink/?LinkID=202087](http://go.microsoft.com/fwlink/?LinkID=202087)します。</span><span class="sxs-lookup"><span data-stu-id="55935-211">These recommendations are from the “Performance Tuning for Virtualization Servers” section of the “Performance Tuning Guidelines for Windows Server 2008 R2” whitepaper available for download at [http://go.microsoft.com/fwlink/?LinkID=202087](http://go.microsoft.com/fwlink/?LinkID=202087).</span></span> <span data-ttu-id="55935-212">方法については、割り込み節度を含め、ルート パーティション内のネットワーク アダプターのチューニング、このガイドの「パフォーマンス チューニングのネットワーク サブシステム」セクションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="55935-212">For how to tune the network adapter in the root partition, including interrupt moderation, refer to the “Performance Tuning for Networking Subsystem” section of this guide.</span></span> <span data-ttu-id="55935-213">子パーティションに、必要な場合、そのセクションでは TCP のチューニングを適用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="55935-213">The TCP tunings in that section should be applied, if required, to the child partitions.</span></span>  

|                                                                            <span data-ttu-id="55935-214">手順</span><span class="sxs-lookup"><span data-stu-id="55935-214">Step</span></span>                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                 <span data-ttu-id="55935-215">リファレンス</span><span class="sxs-lookup"><span data-stu-id="55935-215">Reference</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                   <span data-ttu-id="55935-216">プライベート仮想ネットワークを使用する同じ HYPER-V ホスト コンピューターで実行されている HYPER-V 仮想マシンの構成します。</span><span class="sxs-lookup"><span data-stu-id="55935-216">Configure Hyper-V Virtual Machines that are Running on the same Hyper-V host computer to use a Private Virtual Network</span></span>                   |                                                                                                                                                                                                                                                                                                                                  <span data-ttu-id="55935-217">「同じ Hyper-v ホストで実行されている構成、HYPER-V 仮想マシンは、プライベート仮想ネットワークを使用するコンピューターをホスト」セクションの推奨事項に従ってください[ネットワーク最適化](~/technical-guides/network-optimizations.md)します。</span><span class="sxs-lookup"><span data-stu-id="55935-217">Follow recommendations in the “Configure Hyper-V Virtual Machines that are Running on the same Hyper-V host computer to use a Private Virtual Network” section of [Network Optimizations](~/technical-guides/network-optimizations.md).</span></span>                                                                                                                                                                                                                                                                                                                                  |
|                                                <span data-ttu-id="55935-218">TCP オフロード、仮想マシンのネットワーク カードを無効にします。</span><span class="sxs-lookup"><span data-stu-id="55935-218">Disable TCP Offloading for the Virtual Machine Network Cards</span></span>                                                |                                                                                                                                                                                                                                                                                                                                                               <span data-ttu-id="55935-219">「を無効にする TCP オフロード用の仮想マシンのネットワーク カード」セクションの推奨事項に従ってください[ネットワーク最適化](~/technical-guides/network-optimizations.md)します。</span><span class="sxs-lookup"><span data-stu-id="55935-219">Follow recommendations in the “Disable TCP Offloading for the Virtual Machine Network Cards” section of [Network Optimizations](~/technical-guides/network-optimizations.md).</span></span>                                                                                                                                                                                                                                                                                                                                                               |
|                                      <span data-ttu-id="55935-220">HYPER-V の統合ネットワーク アダプターを使用するゲスト オペレーティング システムを構成します。</span><span class="sxs-lookup"><span data-stu-id="55935-220">Configure guest operating systems to use the Hyper-V synthetic network adapter.</span></span>                                       |                                                                                                                                                   <span data-ttu-id="55935-221">HYPER-V の機能が大幅に実現するために Vm 向けに設計されている統合ネットワーク アダプターでは減って CPU オーバーヘッドにネットワーク I/O を既存のハードウェアを模したエミュレートされたネットワーク アダプターと比較されます。</span><span class="sxs-lookup"><span data-stu-id="55935-221">Hyper-V features a synthetic network adapter that is designed specifically for VMs to achieve significantly reduced CPU overhead on network I/O when it is compared to the emulated network adapter that mimics existing hardware.</span></span> <span data-ttu-id="55935-222">統合ネットワーク アダプターは、共有メモリをより効率的なデータ転送を使用して、vmbus 子およびルート パーティション間で通信します。</span><span class="sxs-lookup"><span data-stu-id="55935-222">The synthetic network adapter communicates between the child and root partitions over the VMBus by using shared memory for more efficient data transfer.</span></span> <br /><span data-ttu-id="55935-223">エミュレートされたネットワーク アダプターは、VM の設定 ダイアログ ボックスを使用して削除して統合ネットワーク アダプターに置き換えください。</span><span class="sxs-lookup"><span data-stu-id="55935-223">The emulated network adapter should be removed through the VM settings dialog box and replaced with a synthetic network adapter.</span></span> <span data-ttu-id="55935-224">ゲストは VM 統合サービスをインストールすることが必要です。</span><span class="sxs-lookup"><span data-stu-id="55935-224">The guest requires that the VM integration services be installed.</span></span>                                                                                                                                                    |
|                          <span data-ttu-id="55935-225">利用できる場合は、ルート パーティションで物理ネットワーク アダプター ドライバーのオフロード機能を有効にします。</span><span class="sxs-lookup"><span data-stu-id="55935-225">If available, enable offload capabilities for the physical network adapter driver in the root partition.</span></span>                          | <span data-ttu-id="55935-226">ネイティブのシナリオでは、物理ネットワーク アダプターの機能をオフロードように、VM のシナリオでは、ネットワーク I/o の CPU 使用率を減らします。</span><span class="sxs-lookup"><span data-stu-id="55935-226">As with the native scenario, offload capabilities in the physical network adapter reduce the CPU usage of network I/Os in VM scenarios.</span></span> <span data-ttu-id="55935-227">HYPER-V で現在使用 LSOv1 と TCPv4 チェックサム オフロードします。</span><span class="sxs-lookup"><span data-stu-id="55935-227">Hyper-V currently uses LSOv1 and TCPv4 checksum offload.</span></span> <span data-ttu-id="55935-228">ルート パーティション内の物理ネットワーク アダプターのドライバーには、オフロード機能を有効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="55935-228">The offload capabilities must be enabled in the driver for the physical network adapter in the root partition.</span></span> <span data-ttu-id="55935-229">詳細については、ネットワーク アダプターのオフロード機能は、の使用可能な"のパフォーマンス チューニング ガイドラインの Windows Server 2008 R2"ホワイト ペーパーの「パフォーマンス チューニングの仮想化サーバー」セクションの"ネットワーク アダプターを選択する」セクションを参照してください。ダウンロード[ http://go.microsoft.com/fwlink/?LinkID=202087](http://go.microsoft.com/fwlink/?LinkID=202087)します。</span><span class="sxs-lookup"><span data-stu-id="55935-229">For details on offload capabilities in network adapters, refer to the “Choosing a Network Adapter” section of the “Performance Tuning for Virtualization Servers” section of the “Performance Tuning Guidelines for Windows Server 2008 R2” whitepaper available for download at [http://go.microsoft.com/fwlink/?LinkID=202087](http://go.microsoft.com/fwlink/?LinkID=202087).</span></span><br /><span data-ttu-id="55935-230">ドライバーは、特定のネットワーク アダプターの無効化 LSOv1 が LSOv2 を既定で有効になります。</span><span class="sxs-lookup"><span data-stu-id="55935-230">Drivers for certain network adapters disable LSOv1 but enable LSOv2 by default.</span></span> <span data-ttu-id="55935-231">システム管理者必要があります、ドライバーを使用して LSOv1 を明示的に有効にする**プロパティ**デバイス マネージャー ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="55935-231">System administrators must explicitly enable LSOv1 by using the driver **Properties** dialog box in Device Manager.</span></span> |
|                                        <span data-ttu-id="55935-232">させるネットワーク スイッチのトポロジの構成の複数のネットワーク アダプターを使用します。</span><span class="sxs-lookup"><span data-stu-id="55935-232">Configure network switch topology to make use of multiple network adapters.</span></span>                                         |                                                                                                                                                                                                                                             <span data-ttu-id="55935-233">HYPER-V では、それぞれが接続できる物理ネットワーク アダプターに必要な場合は、複数の仮想ネットワーク スイッチの作成をサポートします。</span><span class="sxs-lookup"><span data-stu-id="55935-233">Hyper-V supports creating multiple virtual network switches, each of which can be attached to a physical network adapter if needed.</span></span> <span data-ttu-id="55935-234">VM の各ネットワーク アダプターは、仮想ネットワーク スイッチに接続できます。</span><span class="sxs-lookup"><span data-stu-id="55935-234">Each network adapter in a VM can be connected to a virtual network switch.</span></span> <span data-ttu-id="55935-235">物理サーバーに複数のネットワーク アダプターがある場合は、ネットワーク集中型の読み込みを使用した Vm がより使いやすく、物理ネットワーク アダプターの別の仮想スイッチに接続されているを利用できます。</span><span class="sxs-lookup"><span data-stu-id="55935-235">If the physical server has multiple network adapters, VMs with network-intensive loads can benefit from being connected to different virtual switches to better use the physical network adapters.</span></span>                                                                                                                                                                                                                                             |
| <span data-ttu-id="55935-236">複数の物理ネットワーク カードは、1 つの論理プロセッサには、各ネットワーク カードのバインド デバイスの割り込みの HYPER-V ホスト コンピューターにインストールされます。 場合、</span><span class="sxs-lookup"><span data-stu-id="55935-236">If multiple physical network cards are installed on the Hyper-V host computer, bind device interrupts for each network card to a single logical processor.</span></span> |                                                                                                                                                                                            <span data-ttu-id="55935-237">特定のワークロードでは、1 つのネットワーク アダプターのデバイスの割り込みを 1 つの論理プロセッサにバインドに、HYPER-V のパフォーマンスが向上できます。</span><span class="sxs-lookup"><span data-stu-id="55935-237">Under certain workloads, binding the device interrupts for a single network adapter to a single logical processor can improve performance for Hyper-V.</span></span> <span data-ttu-id="55935-238">この高度なチューニングのみに完全にネットワーク帯域幅を使用して特定の問題に対処することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="55935-238">We recommend this advanced tuning only to address specific problems in fully using network bandwidth.</span></span> <span data-ttu-id="55935-239">システム管理者は、IntPolicy ツールを使用して、デバイスの割り込みを特定のプロセッサにバインドすることができます。</span><span class="sxs-lookup"><span data-stu-id="55935-239">System administrators can use the IntPolicy tool to bind device interrupts to specific processors.</span></span> <span data-ttu-id="55935-240">IntPolicy ツールの詳細については、次を参照してください。 [ http://go.microsoft.com/fwlink/?LinkID=129773](http://go.microsoft.com/fwlink/?LinkID=129773)します。</span><span class="sxs-lookup"><span data-stu-id="55935-240">For more information about the IntPolicy tool, see [http://go.microsoft.com/fwlink/?LinkID=129773](http://go.microsoft.com/fwlink/?LinkID=129773).</span></span>                                                                                                                                                                                             |
|                                        <span data-ttu-id="55935-241">可能であれば、HYPER-V 統合ネットワーク アダプターのタグ付け VLAN を有効にします。</span><span class="sxs-lookup"><span data-stu-id="55935-241">If possible, enable VLAN tagging for the Hyper-V synthetic network adapter.</span></span>                                         |                                                                                                                                                                                                                                                 <span data-ttu-id="55935-242">HYPER-V の統合ネットワーク アダプターでは、VLAN タグ付けをサポートします。</span><span class="sxs-lookup"><span data-stu-id="55935-242">The Hyper-V synthetic network adapter supports VLAN tagging.</span></span> <span data-ttu-id="55935-243">物理ネットワーク アダプターは、多数の送信とチェックサムの両方をカプセル化オフロード NDIS_ENCAPSULATION_IEEE_802_3_P_AND_Q_IN_OOB をサポートしている場合は、ネットワークのパフォーマンスが著しく向上を提供します。</span><span class="sxs-lookup"><span data-stu-id="55935-243">It provides significantly better network performance if the physical network adapter supports NDIS_ENCAPSULATION_IEEE_802_3_P_AND_Q_IN_OOB encapsulation for both large send and checksum offload.</span></span> <span data-ttu-id="55935-244">このサポートは、HYPER-V は VLAN タグ付けを必要とするパケットのハードウェア オフロードを使用することはできず、ネットワークのパフォーマンスが低下することができます。</span><span class="sxs-lookup"><span data-stu-id="55935-244">Without this support, Hyper-V cannot use hardware offload for packets that require VLAN tagging and network performance can be decreased.</span></span>                                                                                                                                                                                                                                                 |
|                           <span data-ttu-id="55935-245">HYPER-V ホスト コンピューターで高速のネットワーク アダプターをインストールし、最高のパフォーマンスを構成します。</span><span class="sxs-lookup"><span data-stu-id="55935-245">Install high speed network adapter on the Hyper-V host computer and configure for maximum performance.</span></span>                           |                                                                                                                                                                                                                                                                                   <span data-ttu-id="55935-246">ネットワーク速度、二重モード、およびフロー制御パラメーターが設定に対応することが重要です - HYPER-V ホスト コンピューターで 1 GB ネットワーク アダプターのインストールを検討し、「自動ネゴシエーション」を使用してではなく速度は固定で、ネットワーク アダプターを構成します。スイッチの設定に接続されています。</span><span class="sxs-lookup"><span data-stu-id="55935-246">Consider installing 1-GB network adapters on the Hyper-V host computer and configure the network adapters with a fixed speed as opposed to using “auto negotiate” - It is very important that the network speed, duplex, and flow control parameters are set to correspond to the settings on the switch to which they are connected.</span></span>                                                                                                                                                                                                                                                                                   |
|                                                 <span data-ttu-id="55935-247">ネットワーク パフォーマンスを最適化するためのベスト プラクティスに従ってください。</span><span class="sxs-lookup"><span data-stu-id="55935-247">Follow best practices for optimizing network performance.</span></span>                                                  |                                                                                                                                                                <span data-ttu-id="55935-248">トピック[ネットワーク最適化](~/technical-guides/network-optimizations.md)ネットワークのパフォーマンスを最適化するための一般的なガイダンスを提供します。</span><span class="sxs-lookup"><span data-stu-id="55935-248">The topic [Network Optimizations](~/technical-guides/network-optimizations.md) offers general guidance for optimizing network performance.</span></span> <span data-ttu-id="55935-249">このトピックでは、パフォーマンスの最適化の具体的な推奨事項を提供していません中に[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]手法のいずれかに該当するは、HYPER-V 仮想化環境で[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ソリューションでは、物理ハードウェア上で、または、HYPER-V を実行しているかどうか仮想化された環境。</span><span class="sxs-lookup"><span data-stu-id="55935-249">While this topic does not offer specific recommendations for optimizing performance of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] in a Hyper-V virtualized environment, the techniques are applicable to any [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] solution, whether running on physical hardware or on a Hyper-V virtualized environment.</span></span>                                                                                                                                                                 |

## <a name="optimize-sql-server-performance"></a><span data-ttu-id="55935-250">SQL Server のパフォーマンスを最適化します。</span><span class="sxs-lookup"><span data-stu-id="55935-250">Optimize SQL Server Performance</span></span>  
 <span data-ttu-id="55935-251">トピックの推奨事項に従って[SQL Server の最適化](~/technical-guides/sql-server-optimizations.md)の BizTalk Server ソリューションの SQL Server のパフォーマンスを最適化します。</span><span class="sxs-lookup"><span data-stu-id="55935-251">Follow the recommendations in the topic [SQL Server Optimizations](~/technical-guides/sql-server-optimizations.md) to optimize SQL Server performance for the BizTalk Server solution.</span></span> <span data-ttu-id="55935-252">このトピックでは、パフォーマンスの最適化の具体的な推奨事項を提供していません中に[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]手法のいずれかに該当するは、HYPER-V 仮想化環境で[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ソリューションでは、物理ハードウェア上で、または、HYPER-V を実行しているかどうか仮想化された環境。</span><span class="sxs-lookup"><span data-stu-id="55935-252">While this topic does not offer specific recommendations for optimizing performance of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] in a Hyper-V virtualized environment, the techniques are applicable to any [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] solution, whether running on physical hardware or on a Hyper-V virtualized environment.</span></span>  

## <a name="optimize-biztalk-server-solution"></a><span data-ttu-id="55935-253">BizTalk Server ソリューションを最適化します。</span><span class="sxs-lookup"><span data-stu-id="55935-253">Optimize BizTalk Server Solution</span></span>  
 <span data-ttu-id="55935-254">トピックの推奨事項に従って[BizTalk Server の最適化](~/technical-guides/biztalk-server-optimizations.md)BizTalk Server ソリューションのパフォーマンスを最適化します。</span><span class="sxs-lookup"><span data-stu-id="55935-254">Follow the recommendations in the topic [BizTalk Server Optimizations](~/technical-guides/biztalk-server-optimizations.md) to optimize performance of the BizTalk Server solution.</span></span> <span data-ttu-id="55935-255">このトピックでは、パフォーマンスの最適化の具体的な推奨事項を提供していません中に[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]手法のいずれかに該当するは、HYPER-V 仮想化環境で[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ソリューションでは、物理ハードウェア上で、または、HYPER-V を実行しているかどうか仮想化された環境。</span><span class="sxs-lookup"><span data-stu-id="55935-255">While this topic does not offer specific recommendations for optimizing performance of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] in a Hyper-V virtualized environment, the techniques are applicable to any [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] solution, whether running on physical hardware or on a Hyper-V virtualized environment.</span></span>