---
title: "チェックリスト: HYPER-V のパフォーマンスを最適化する |Microsoft ドキュメント"
ms.custom: 
ms.date: 06/29/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 942a61eb-0fdd-4c8b-b0ad-d32951f0f631
caps.latest.revision: "23"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: db0afbdc9d89296f8aaff94db057bf2e9c072392
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/01/2017
---
# <a name="checklist-optimizing-performance-on-hyper-v"></a><span data-ttu-id="6c0f7-102">チェックリスト: HYPER-V のパフォーマンスを最適化します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-102">Checklist: Optimizing Performance on Hyper-V</span></span>
<span data-ttu-id="6c0f7-103">次の点は、BizTalk Server を実行している場合や、[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]を HYPER-V 仮想マシンで、BizTalk Server データベースを持つインスタンス。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-103">The following considerations apply when running BizTalk Server and/or the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instance(s) that have the BizTalk Server databases on Hyper-V virtual machines.</span></span>  
  
## <a name="allocate-110125-of-cpu-and-disk-resources-to-the-hyper-v-virtual-machines"></a><span data-ttu-id="6c0f7-104">HYPER-V の仮想マシンに CPU とディスク リソースの 110% – 125% を割り当てる</span><span class="sxs-lookup"><span data-stu-id="6c0f7-104">Allocate 110%–125% of CPU and Disk Resources to the Hyper-V Virtual Machines</span></span>  
 <span data-ttu-id="6c0f7-105">110% から 125% の CPU リソースと 105 ~ 110% ソリューションを使用する HYPER-V 仮想マシンを物理ハードウェア ソリューションに必要なディスク リソースを割り当てることを計画します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-105">Plan to allocate 110% to 125% of the CPU resources and 105% - 110% of the disk resources required by a physical hardware solution to the Hyper-V virtual machines used for the solution.</span></span> <span data-ttu-id="6c0f7-106">HYPER-V 仮想マシンを構成すると追加のリソースは、HYPER-V 仮想化テクノロジに必要なオーバーヘッドに対応しているときに、物理ハードウェアと同等のパフォーマンスを提供できることを確認します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-106">By configuring the Hyper-V virtual machine with additional resources, you will ensure that it can provide performance on par with physical hardware while accommodating any overhead required by Hyper-V virtualization technology.</span></span>  
  
|<span data-ttu-id="6c0f7-107">手順</span><span class="sxs-lookup"><span data-stu-id="6c0f7-107">Step</span></span>|<span data-ttu-id="6c0f7-108">リファレンス</span><span class="sxs-lookup"><span data-stu-id="6c0f7-108">Reference</span></span>|  
|----------|---------------|  
|<span data-ttu-id="6c0f7-109">スコープのためのハードウェア要件、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ソリューションです。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-109">Scope the hardware requirements for the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] solution.</span></span>|<span data-ttu-id="6c0f7-110">-"の計画、環境の BizTalk Server"」のガイダンスに従う、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]操作ガイド[http://go.microsoft.com/fwlink/?LinkId=122399](http://go.microsoft.com/fwlink/?LinkId=122399)ソリューションのハードウェア要件のスコープを指定します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-110">-   Follow the guidance in the “Planning the Environment for BizTalk Server” section of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Operations Guide at [http://go.microsoft.com/fwlink/?LinkId=122399](http://go.microsoft.com/fwlink/?LinkId=122399) to scope the hardware requirements for the solution.</span></span><br /><span data-ttu-id="6c0f7-111">エディションとソリューションが必要な BizTalk Server の数は、BizTalk Server で「BizTalk Server 層を計画」に記載されている考慮事項を計画をレビューのスコープに[http://go.microsoft.com/fwlink/?LinkId=122401](http://go.microsoft.com/fwlink/?LinkId=122401)です。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-111">-   To scope the edition and number of BizTalk Servers that will be required by the solution review BizTalk Server planning considerations documented in “Planning the BizTalk Server Tier” at [http://go.microsoft.com/fwlink/?LinkId=122401](http://go.microsoft.com/fwlink/?LinkId=122401).</span></span><br /><span data-ttu-id="6c0f7-112">-バージョンとの数のスコープを設定するには[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]、ソリューションが必要なコンピューターでの計画に関する考慮事項の計画、データベース層に記載されているデータベースの確認[http://go.microsoft.com/fwlink/?LinkId = 122402](http://go.microsoft.com/fwlink/?LinkId=122402)で利用可能な「実行されている SQL Server 2008 in a HYPER-V 環境ベスト プラクティスとパフォーマンスに関する考慮事項」のホワイト ペーパーの"パフォーマンス オーバーヘッドのを実行している SQL Server で HYPER-V"」、および[http://go.microsoft.com/fwlink/ しますか。LinkId = 144622](http://go.microsoft.com/fwlink/?LinkId=144622)です。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-112">-   To scope the version and number of [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] computers that will be required by the solution, review database planning considerations documented in “Planning the Database Tier” at [http://go.microsoft.com/fwlink/?LinkId=122402](http://go.microsoft.com/fwlink/?LinkId=122402) and the “Performance Overhead of Running SQL Server in Hyper-V” section of the “Running SQL Server 2008 in a Hyper-V Environment Best Practices and Performance Considerations” whitepaper available at [http://go.microsoft.com/fwlink/?LinkId=144622](http://go.microsoft.com/fwlink/?LinkId=144622).</span></span><br /><span data-ttu-id="6c0f7-113">、開発の計画を完了するにはテスト、ステージング、実稼働環境を確認「開発、テスト、ステージング、および実稼働環境の計画」で[http://go.microsoft.com/fwlink/?LinkId=122403](http://go.microsoft.com/fwlink/?LinkId=122403)です。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-113">-   To complete planning for development, testing, staging, and production environments review “Planning the Development, Testing, Staging, and Production Environments” at [http://go.microsoft.com/fwlink/?LinkId=122403](http://go.microsoft.com/fwlink/?LinkId=122403).</span></span>|  
|<span data-ttu-id="6c0f7-114">BizTalk Server ソリューションのハードウェア要件をスコープするには後で HYPER-V マシンの構成を計画します。 **110 – 125%** 、CPU およびディスク リソースの可能な場合です。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-114">After scoping the hardware requirements of your BizTalk Server solution, plan to configure the Hyper-V machines with **110% – 125%** of the CPU and disk resources if possible.</span></span>|<span data-ttu-id="6c0f7-115">たとえば場合ソリューションによって使用される物理的な BizTalk Server コンピューターのハードウェア要件は、2 GB の RAM をあると判断される、物理ディスクは、2 GHZ、および 2 x 500 GB で実行されている、デュアル コアの CPU、理想的には、ソリューションで使用される HYPER-V 仮想マシンになります実行している 2 つ以上の仮想プロセッサを使用して構成 > =、(通常のスピンドルを追加することや、高速なディスクを使用して) によって 2.2 GHZ、および高速の物理ディスクです。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-115">For example, if the hardware requirements for a physical BizTalk Server computer used by the solution is determined to be 2GB RAM, a dual core CPU running at 2GHZ, and 2x 500 GB physical disks, then ideally, the Hyper-V virtual machine used by the solution would be configured with 2 or more virtual processors running >= 2.2 GHZ, and faster physical disks (typically by adding spindles or using faster disks).</span></span>|  
  
## <a name="optimize-hyper-v-performance"></a><span data-ttu-id="6c0f7-116">HYPER-V のパフォーマンスを最適化します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-116">Optimize Hyper-V Performance</span></span>  
 <span data-ttu-id="6c0f7-117">次の一般的なガイドラインを使用すると、パフォーマンスを最適に HYPER-V を構成できます。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-117">Use the following general guidelines to configure Hyper-V for optimal performance.</span></span>  
  
|<span data-ttu-id="6c0f7-118">手順</span><span class="sxs-lookup"><span data-stu-id="6c0f7-118">Step</span></span>|<span data-ttu-id="6c0f7-119">リファレンス</span><span class="sxs-lookup"><span data-stu-id="6c0f7-119">Reference</span></span>|  
|----------|---------------|  
|<span data-ttu-id="6c0f7-120">パフォーマンスの仮想化サーバーのチューニングの推奨されるガイダンスを適用します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-120">Apply recommended guidance for performance tuning virtualization servers.</span></span> <span data-ttu-id="6c0f7-121">**注:**テスト シナリオ」に記載の[BizTalk サーバー仮想化のパフォーマンスのテスト](~/technical-guides/testing-biztalk-server-virtualization-performance.md)、適用された構成オプションの説明、「物理インフラストラクチャの詳細」を"仮想化の詳細」セクションで、[テスト シナリオの概要](~/technical-guides/test-scenario-overview.md)トピックです。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-121">**Note:**  For the test scenarios described in [Testing BizTalk Server Virtualization Performance](~/technical-guides/testing-biztalk-server-virtualization-performance.md), the configuration options that were applied are described in the “Physical Infrastructure Specifics” and the “Virtualization Specifics” sections of the [Test Scenario Overview](~/technical-guides/test-scenario-overview.md) topic.</span></span>|<span data-ttu-id="6c0f7-122">「仮想化サーバーのパフォーマンス チューニング」ドキュメントのセクションで、"パフォーマンス チューニング ガイドラインの Windows Server 2008 R2"で使用可能な[http://go.microsoft.com/fwlink/?LinkID=202087](http://go.microsoft.com/fwlink/?LinkID=202087)です。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-122">“Performance Tuning for Virtualization Servers” section of the “Performance Tuning Guidelines for Windows Server 2008 R2” document available at [http://go.microsoft.com/fwlink/?LinkID=202087](http://go.microsoft.com/fwlink/?LinkID=202087).</span></span>|  
|<span data-ttu-id="6c0f7-123">使用されていない仮想マシン接続ウィンドウを閉じます。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-123">Close any Virtual Machine Connection windows that aren’t being used.</span></span>|<span data-ttu-id="6c0f7-124">HYPER-V マネージャーで仮想マシン名をダブルクリックしたときに表示する仮想マシン接続のオーナー ウィンドウは、それ以外の場合利用できるリソースを消費します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-124">The Virtual Machine Connection window(s) displayed when double-clicking a virtual machine name in the Hyper-V manager consume resources that could be otherwise utilized.</span></span>|  
|<span data-ttu-id="6c0f7-125">閉じるか、HYPER-V マネージャーを最小化します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-125">Close or minimize the Hyper-V manager.</span></span>|<span data-ttu-id="6c0f7-126">HYPER-V マネージャーでは、CPU 使用率と稼働時間の各仮想マシンの実行を継続的にポーリングすることによってリソースが消費されます。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-126">The Hyper-V manager consumes resources by continually polling each running virtual machine for CPU utilization and uptime.</span></span> <span data-ttu-id="6c0f7-127">閉じるか、HYPER-V マネージャーを最小限に抑えることは、これらのリソースを解放します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-127">Closing or minimizing the Hyper-V manager will free up these resources.</span></span>|  
  
## <a name="optimize-performance-of-disk-memory-network-and-processor-in-a-hyper-v-environment"></a><span data-ttu-id="6c0f7-128">ディスク、メモリ、ネットワーク、および HYPER-V 環境でのプロセッサのパフォーマンスを最適化します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-128">Optimize Performance of Disk, Memory, Network, and Processor in a Hyper-V Environment</span></span>  
 <span data-ttu-id="6c0f7-129">ディスク、メモリ、ネットワーク、および HYPER-V の仮想環境でのプロセッサのパフォーマンスを最適化するために、次のガイドラインを使用します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-129">Use the following guidelines to optimize performance of disk, memory, network, and processor in a Hyper-V virtual environment.</span></span>  
  
### <a name="optimize-processor-performance"></a><span data-ttu-id="6c0f7-130">プロセッサのパフォーマンスを最適化します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-130">Optimize Processor Performance</span></span>  
 <span data-ttu-id="6c0f7-131">HYPER-V 仮想環境で実行されているゲスト オペレーティング システムのプロセッサのパフォーマンスを最適化するためにこれらのガイドラインに従います。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-131">Follow these guidelines to optimize processor performance of guest operating systems running in a Hyper-V virtual environment:</span></span>  
  
-   <span data-ttu-id="6c0f7-132">**最適なパフォーマンス - 使用可能な論理プロセッサに仮想プロセッサの 1 対 1 の割り当てを構成する**最善の構成にゲスト オペレーティング システム内の仮想プロセッサの 1 対 1 の比率は、CPU の処理を要するアプリケーションを実行する場合ホスト オペレーティング システムで使用できる論理プロセッサ。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-132">**Configure a 1-to-1 allocation of virtual processors to available logical processors for best performance -** When running a CPU intensive application, the best configuration is a 1-to-1 ratio of virtual processors in the guest operating system(s) to the logical processors available to the host operating system.</span></span> <span data-ttu-id="6c0f7-133">2:1 または 1:2 など他の構成は、効率が低下します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-133">Any other configuration such as 2:1 or 1:2 is less efficient.</span></span> <span data-ttu-id="6c0f7-134">次の図は、ホスト オペレーティング システムで使用できる論理プロセッサにゲスト オペレーティング システムの仮想プロセッサ コアの 1 対 1 の割り当てを示しています。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-134">The following graphic illustrates a 1-to-1 allocation of virtual processor cores in the guest operating system(s) to logical processors available to the host operating system:</span></span>  
  
     <span data-ttu-id="6c0f7-135">![1 対 1 の物理と仮想プロセッサの比率から](../technical-guides/media/90f98f0d-a223-404c-b419-81369dc92970.gif "1 対 1 の物理と仮想プロセッサの比率")</span><span class="sxs-lookup"><span data-stu-id="6c0f7-135">![One to One Physical to Virtual Processor Ratio](../technical-guides/media/90f98f0d-a223-404c-b419-81369dc92970.gif "One to One Physical to Virtual Processor Ratio")</span></span>  
<span data-ttu-id="6c0f7-136">仮想と論理プロセッサの比率</span><span class="sxs-lookup"><span data-stu-id="6c0f7-136">Virtual to logical processor ratio</span></span>  
  
-   <span data-ttu-id="6c0f7-137">**さまざまなゲスト オペレーティング システム用の仮想プロセッサ数の認識し、計画を立てて -**全体的な HYPER-V 仮想マシンで実行されているゲスト オペレーティング システムに使用できるプロセッサ コアの数に影響する場合ホストされるアプリケーションのパフォーマンス。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-137">**Be aware of the virtual processor limit for different guest operating systems and plan accordingly -** The number of processor cores that are available to the guest operating system running in a Hyper-V virtual machine can impact the overall performance of the hosted application.</span></span> <span data-ttu-id="6c0f7-138">そのため、考慮の対象に、BizTalk Server をホストする HYPER-V 仮想マシンで、オペレーティング システムをインストールするゲストに関するや[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]BizTalk Server データベースをホストするインスタンス。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-138">Therefore, consideration should be made as to which guest operating system will be installed on the Hyper-V virtual machine to host the BizTalk Server and/or [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instance(s) that host the BizTalk Server databases.</span></span> <span data-ttu-id="6c0f7-139">HYPER-V では、次の指定したゲスト オペレーティング システムの仮想プロセッサ数は対応します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-139">Hyper-V accommodates the following number of virtual processors for the specified guest operating system:</span></span>  
  
|<span data-ttu-id="6c0f7-140">オペレーティング システム</span><span class="sxs-lookup"><span data-stu-id="6c0f7-140">Operating system</span></span>|<span data-ttu-id="6c0f7-141">仮想プロセッサ数の上限</span><span class="sxs-lookup"><span data-stu-id="6c0f7-141">Virtual processor limit</span></span>|  
|----------------------|-----------------------------|  
|[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]<span data-ttu-id="6c0f7-142">」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-142">.</span></span> <span data-ttu-id="6c0f7-143">すべてのエディション[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]は 64 ビットのみです。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-143">All editions of [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] are 64-bit only.</span></span>|<span data-ttu-id="6c0f7-144">4</span><span class="sxs-lookup"><span data-stu-id="6c0f7-144">4</span></span>|  
|[!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)]<span data-ttu-id="6c0f7-145">64 ビット</span><span class="sxs-lookup"><span data-stu-id="6c0f7-145"> 64-bit</span></span>|<span data-ttu-id="6c0f7-146">4</span><span class="sxs-lookup"><span data-stu-id="6c0f7-146">4</span></span>|  
|[!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)]<span data-ttu-id="6c0f7-147">32 ビット</span><span class="sxs-lookup"><span data-stu-id="6c0f7-147"> 32-bit</span></span>|<span data-ttu-id="6c0f7-148">4</span><span class="sxs-lookup"><span data-stu-id="6c0f7-148">4</span></span>|  
|<span data-ttu-id="6c0f7-149">Windows 7 64 ビット</span><span class="sxs-lookup"><span data-stu-id="6c0f7-149">Windows 7 64-bit</span></span>|<span data-ttu-id="6c0f7-150">4</span><span class="sxs-lookup"><span data-stu-id="6c0f7-150">4</span></span>|  
|<span data-ttu-id="6c0f7-151">Windows 7 32 ビット</span><span class="sxs-lookup"><span data-stu-id="6c0f7-151">Windows 7 32-bit</span></span>|<span data-ttu-id="6c0f7-152">4</span><span class="sxs-lookup"><span data-stu-id="6c0f7-152">4</span></span>|  
|<span data-ttu-id="6c0f7-153">Windows Vista 64 ビット</span><span class="sxs-lookup"><span data-stu-id="6c0f7-153">Windows Vista 64-bit</span></span>|<span data-ttu-id="6c0f7-154">2</span><span class="sxs-lookup"><span data-stu-id="6c0f7-154">2</span></span>|  
|<span data-ttu-id="6c0f7-155">Windows Vista 32 ビット</span><span class="sxs-lookup"><span data-stu-id="6c0f7-155">Windows Vista  32-bit</span></span>|<span data-ttu-id="6c0f7-156">2</span><span class="sxs-lookup"><span data-stu-id="6c0f7-156">2</span></span>|  
  
> [!NOTE]
>  <span data-ttu-id="6c0f7-157">HYPER-V でサポートされているゲスト オペレーティング システムの詳細については、次を参照してください。 [http://go.microsoft.com/fwlink/?LinkID=118347](http://go.microsoft.com/fwlink/?LinkID=118347)です。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-157">For more information about the guest operating systems that are supported on Hyper-V, see [http://go.microsoft.com/fwlink/?LinkID=118347](http://go.microsoft.com/fwlink/?LinkID=118347).</span></span>  
  
### <a name="optimize-disk-performance"></a><span data-ttu-id="6c0f7-158">ディスクのパフォーマンスを最適化します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-158">Optimize Disk Performance</span></span>  
 <span data-ttu-id="6c0f7-159">HYPER-V 仮想環境で実行されているゲスト オペレーティング システムのディスクのパフォーマンスを最適化するためにこれらのガイドラインに従います。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-159">Follow these guidelines to optimize disk performance of guest operating systems running in a Hyper-V virtual environment:</span></span>  
  
|<span data-ttu-id="6c0f7-160">手順</span><span class="sxs-lookup"><span data-stu-id="6c0f7-160">Step</span></span>|<span data-ttu-id="6c0f7-161">リファレンス</span><span class="sxs-lookup"><span data-stu-id="6c0f7-161">Reference</span></span>|  
|----------|---------------|  
|<span data-ttu-id="6c0f7-162">容量固定のバーチャル ハード_ディスク (VHD) オプションを使用して HYPER-V 仮想マシンを使用するための仮想ディスクを構成します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-162">Configure virtual disks for use with the Hyper-V virtual machines using the fixed-size virtual hard disk (VHD) option.</span></span> <span data-ttu-id="6c0f7-163">固定サイズの VHD は、クラスタ リングのサポート、およびスナップショット ディスクのサポートなどの機能の柔軟性と物理ディスクのパフォーマンスを提供します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-163">Fixed-size VHD offers performance approaching that of physical disks together with the flexibility of features such as clustering support and snapshot disk support.</span></span>|<span data-ttu-id="6c0f7-164">ディスク記憶域を HYPER-V 環境では、仮想 IDE コント ローラーまたは仮想 SCSI コント ローラーを使用してアクセスします。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-164">Disk storage in a Hyper-V environment is accessible through a virtual IDE controller or a virtual SCSI controller.</span></span> <span data-ttu-id="6c0f7-165">以前のバージョンの Microsoft 仮想化テクノロジとは異なり、仮想 IDE コント ローラーまたは仮想 SCSI コント ローラーを使用してバーチャル ハード_ディスクにアクセスするときのパフォーマンスの違いはありません。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-165">Unlike previous versions of Microsoft virtualization technology, there is no performance difference between using a virtual IDE controller or a virtual SCSI controller when accessing virtual hard disks.</span></span> <span data-ttu-id="6c0f7-166">次のディスク記憶域オプションは、HYPER-V 環境で使用されます。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-166">The following disk storage options are available for use in a Hyper-V environment:</span></span><br /><br /> <span data-ttu-id="6c0f7-167">-   **固定サイズのディスク -**容量固定のバーチャル ハード_ディスク (VHD) は、ブロックは、物理ディスクの作成時に定義されている最大ディスク サイズに基づくで事前に割り当てられた、データのいずれか。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-167">-   **Fixed size disks -** A fixed-size virtual hard disk (VHD) is one for which data blocks are pre-allocated on a physical disk based on the maximum disk size defined at the time of creation.</span></span> <span data-ttu-id="6c0f7-168">100 GB の固定サイズの VHD を作成する場合など、HYPER-V では、すべての 100 GB の新しい VHD を作成するときに、VHD のヘッダーとフッターに必要なオーバーヘッドだけでなく、データ ブロックの記憶域に割り当てます。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-168">For example, if you create a 100 GB fixed-size VHD, Hyper-V will allocate all 100 GB of data block storage in addition to the overhead required for the VHD headers and footers when it creates the new VHD.</span></span><br /><span data-ttu-id="6c0f7-169">-   **容量可変の拡張ディスク -**容量可変の VHD は、1 つの対象の最初の仮想ハード ディスクが含まれていないデータ ブロックにはです。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-169">-   **Dynamically expanding disks -** A dynamically expanding VHD is one for which the initial virtual hard disk contains no data blocks.</span></span> <span data-ttu-id="6c0f7-170">代わりに、VHD の作成時に指定された最大サイズまで、VHD にデータが書き込まれるときは、領域は動的に割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-170">Instead space is dynamically allocated as data is written to the VHD, up to the maximum size specified when the VHD was created.</span></span> <span data-ttu-id="6c0f7-171">たとえば、100 GB の容量可変の拡張ディスクは最初に VHD ヘッダーのみが含まれていて、2 MB 未満の物理記憶域領域が必要です。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-171">For example, a 100-GB dynamically expanding disk initially contains only VHD headers and requires less than 2 MB of physical storage space.</span></span> <span data-ttu-id="6c0f7-172">新しいデータが書き込まれると、バーチャル マシンが容量可変の VHD に、追加の物理データ ブロックは、最大 100 GB まで、VHD ファイルを 2 MB 単位で割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-172">As new data is written by the virtual machine to the dynamically expanding VHD, additional physical data blocks are allocated in 2-MB increments to the VHD file, up to a maximum of 100 GB.</span></span><br /><span data-ttu-id="6c0f7-173">-   **差分ディスク -**差分ディスクは特殊な種類の「親」VHD に関連付けられている VHD ファイルを動的に拡張します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-173">-   **Differencing Disks -** A differencing disk is a special type of dynamically expanding VHD file that is associated with a “parent” VHD.</span></span> <span data-ttu-id="6c0f7-174">この親/子の記憶域トポロジでは、親のディスクは変更されていません、差分ディスクのみ「子」に加えられたすべての書き込み操作です。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-174">In this parent/child storage topology, the parent disk remains unchanged and any write operations made to the “child” differencing disk only.</span></span> <span data-ttu-id="6c0f7-175">更新されたコンテンツが; 差分ディスクに書き込まれるかどうかを表示する差分ディスクの読み取り操作がチェックされ最初コンテンツがない場合、差分ディスクで、内容は親 VHD から読み取られます。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-175">Any read operations are first checked against the differencing disk to see whether updated content was written to the differencing disk; if the content isn’t in the differencing disk, then the content is read from the parent VHD.</span></span> <span data-ttu-id="6c0f7-176">差分ディスクは、簡単にテストして、特定の基準構成を維持するために必要とする、基準に変更をロールバックし、シナリオに便利です。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-176">Differencing disks are useful for scenarios where you need to maintain a particular baseline configuration and would like to easily test and then rollback changes to the baseline.</span></span> <span data-ttu-id="6c0f7-177">差分ディスクを介して提供された親/子の記憶域のトポロジの柔軟性はテストに役立ちますが、これはパフォーマンスの最適な構成があるため、親/子トポロジの管理に関連するオーバーヘッド差分ディスクを使用する場合に必要です。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-177">While the flexibility of the parent/child storage topology provided through differencing disks is useful for testing, this is not the optimal configuration for performance because there is overhead associated with maintaining the parent/child topology required when using differencing disks.</span></span><br /><span data-ttu-id="6c0f7-178">-   **パススルー ディスク –**パススルー ディスクの機能は、ゲスト オペレーティング システムを HYPER-V ホストのファイル システムをバイパスし、ディスクに直接アクセスを許可します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-178">-   **Passthrough disks –** The passthrough disk feature allows the guest operating system to bypass the Hyper-V Host file system and access the disk directly.</span></span> <span data-ttu-id="6c0f7-179">パススルーでゲスト オペレーティング システムを利用可能なディスクは、HYPER-V ホスト、ホストとゲスト オペレーティング システムの両方はしないように、ディスクを同時にアクセスするには「オフライン」に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-179">Disks that are made available to guest operating systems via passthrough must be set to “offline” in the Hyper-V host to ensure that both the host and guest operating system do not attempt to access the disk simultaneously.</span></span> <span data-ttu-id="6c0f7-180">パススルー ディスクは、オプションも用意されて、パフォーマンスはわずか利点は、その他のディスク記憶域は、仮想ディスクを仮想マシンのスナップショットとクラスタ リングのサポートなどの特定の機能をサポートしていません。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-180">The passthrough disk does offer a marginal performance advantage over other disk storage options but does not support certain functionality of virtual disks, such as Virtual machine snapshots and clustering support.</span></span> <span data-ttu-id="6c0f7-181">したがってマージナル パフォーマンス上の利点は、複数の不足している機能のオフセットために、BizTalk または SQL Server 環境でパススルー ディスクの機能の使用は推奨されません。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-181">Therefore use of the passthrough disk feature is not recommended in a BizTalk or SQL Server environment because the marginal performance benefits are more than offset by the missing functionality.</span></span><br /><br /> <span data-ttu-id="6c0f7-182">HYPER-V で提供されるディスク記憶域の選択肢の相対的なパフォーマンスの詳細についてを参照してください、ブログ エントリ「HYPER-V 記憶域の分析」で[http://go.microsoft.com/fwlink/?LinkID=132848](http://go.microsoft.com/fwlink/?LinkID=132848)です。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-182">For more information about the relative performance of disk storage choices provided with Hyper-V, see the blog entry “Hyper-V Storage Analysis”, at [http://go.microsoft.com/fwlink/?LinkID=132848](http://go.microsoft.com/fwlink/?LinkID=132848).</span></span>|  
|<span data-ttu-id="6c0f7-183">SCSI コント ローラーを使用して、データ ボリュームのディスクを構成します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-183">Configure disks for data volumes using the SCSI controller</span></span>|<span data-ttu-id="6c0f7-184">SCSI コント ローラーは、HYPER-V 統合サービスをインストールしなくても、エミュレートされた IDE コント ローラーは使用可能な HYPER-V 統合サービスがインストールされている場合にのみインストールされますのでお勧めします。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-184">This is recommended because the SCSI controller can only be installed if Hyper-V integration services are installed whereas the emulated IDE controller is available without installing Hyper-V integration services.</span></span> <span data-ttu-id="6c0f7-185">Integration services に用意されている IDE フィルター ドライバーを使用して実行するディスク I/O は、ディスク I/O のパフォーマンスをエミュレートされた IDE コント ローラーに用意されているよりも大幅に向上します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-185">Disk I/O performed using the IDE filter driver provided with integration services is significantly better than disk I/O performance provided with the emulated IDE controller.</span></span> <span data-ttu-id="6c0f7-186">そのため、最適なディスク I/O パフォーマンス、HYPER-V 仮想化環境でデータ ファイルには、ホストとゲストの両方のオペレーティング システムに統合サービスをインストールし、合成の SCSI コント ローラーとデータ ボリュームのディスクを構成します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-186">Therefore, to ensure optimal disk I/O performance for the data files in a Hyper-V virtualized environment, install integration services on both the host and guest operating system and configure disks for data volumes with the synthetic SCSI controller.</span></span> <span data-ttu-id="6c0f7-187">高負荷の高いストレージの I/O ワークロードの複数のデータ ドライブに配置されている場合に、全体的なパフォーマンスを向上させるため代理個別の SCSI コント ローラーに各 VHD をアタッチする必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-187">For highly intensive storage I/O workloads that span multiple data drives, each VHD should be attached to a separate synthetic SCSI controller for better overall performance.</span></span> <span data-ttu-id="6c0f7-188">さらに、各 VHD は、個別の物理ディスクに保存する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-188">In addition, each VHD should be stored on separate physical disks.</span></span> <span data-ttu-id="6c0f7-189">**重要:** SCSI コント ローラーのシステム ディスクをアタッチできません。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-189">**Important:**  Do not attach a system disk to a SCSI controller.</span></span> <span data-ttu-id="6c0f7-190">IDE コント ローラーには、オペレーティング システムを含むバーチャル ハード ディスクをアタッチする必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-190">A virtual hard disk that contains an operating system must be attached to an IDE controller.</span></span>|  
  
### <a name="optimize-memory-performance"></a><span data-ttu-id="6c0f7-191">メモリのパフォーマンスを最適化します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-191">Optimize Memory Performance</span></span>  
 <span data-ttu-id="6c0f7-192">HYPER-V 仮想環境で実行されているゲスト オペレーティング システムのメモリのパフォーマンスを最適化するためにこれらのガイドラインに従います。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-192">Follow these guidelines to optimize memory performance of guest operating systems running in a Hyper-V virtual environment:</span></span>  
  
|<span data-ttu-id="6c0f7-193">手順</span><span class="sxs-lookup"><span data-stu-id="6c0f7-193">Step</span></span>|<span data-ttu-id="6c0f7-194">リファレンス</span><span class="sxs-lookup"><span data-stu-id="6c0f7-194">Reference</span></span>|  
|----------|---------------|  
|<span data-ttu-id="6c0f7-195">HYPER-V 仮想マシンをホストする物理コンピューターにインストールされているための十分なメモリがあることを確認します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-195">Ensure there is sufficient memory installed on the physical computer that hosts the Hyper-V virtual machines</span></span>|<span data-ttu-id="6c0f7-196">-使用可能な物理メモリは、HYPER-V 仮想マシンで実行されている BizTalk Server の最上位のパフォーマンス要因では多くの場合です。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-196">-   Available physical memory is often the most significant performance factor for BizTalk Server running on a Hyper-V virtual machine.</span></span> <span data-ttu-id="6c0f7-197">これは、非ページ プール メモリまたはディスクにページできません。 メモリ内の各仮想マシンが存在する必要があるためです。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-197">This is because each virtual machine must reside in non-paged-pool memory, or memory that cannot be paged to the disk.</span></span> <span data-ttu-id="6c0f7-198">非ページ プール メモリは、ディスク、仮想マシンをホストする物理コンピューターへページングされることはできませんので必要があります、メモリの合計に等しいの使用可能な物理メモリに割り当てられているに加えて、次の各仮想マシン。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-198">Because non-paged-pool memory cannot be paged to disk, the physical computer that hosts the virtual machines should have available physical memory equal to the sum of the memory allocated for each virtual machine plus the following:</span></span><br />     <span data-ttu-id="6c0f7-199">ハイパーバイザーの 300 MB と最初 GB の RAM が、各仮想マシンと他のすべて GB の RAM を追加の各仮想マシンに割り当てられているため、8 MB と、ホストの 512 MB に割り当てられているため、32 MBルート パーティションで実行されているオペレーティング システム</span><span class="sxs-lookup"><span data-stu-id="6c0f7-199">300 MB for the Hypervisor                         plus 32 MB for the first GB of RAM allocated to each virtual machine                         plus another 8 MB for every additional GB of RAM allocated to each virtual machine                         plus 512 MB for the host operating system running on the root partition</span></span><br />     <span data-ttu-id="6c0f7-200">たとえば、HYPER-V 仮想マシンが 2 GB の HYPER-V マネージャーで、HYPER-V 仮想マシンを実行すると、約 2388 MB がある場合に使用される実際の物理メモリのメモリを割り当てられている場合 (仮想マシンに、ハイパーバイザーは 300 MB +2 GB が割り当てられた +32 MB + 8 MB = 2388 MB)。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-200">For example, if a Hyper-V virtual machine is allocated 2 GB of memory in the Hyper-V Manager, the actual physical memory used when running that Hyper-V virtual machine would be approximately 2388MB (300MB for the hypervisor +2GB allocated for the virtual machine + 32MB + 8MB = 2388MB).</span></span> <span data-ttu-id="6c0f7-201">ハイパーバイザーはのみに 1 回読み込む必要がある、ために、後続の仮想マシンの初期化しても、ハイパーバイザーの読み込みに関連付けられている 300 MB のオーバーヘッドは発生しません。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-201">Because the hypervisor only needs to be loaded once, initialization of subsequent virtual machines does not incur the 300 MB overhead associated with loading the hypervisor.</span></span> <span data-ttu-id="6c0f7-202">そのため、2 つの HYPER-V 仮想マシンが HYPER-V マネージャーでメモリの割り当てられた各 2 GB の場合は、これらの HYPER-V 仮想マシンを実行しているときに使用する実際の物理メモリは約 4476 MB する (ハイパーバイザーの 300 MB +4 GB に割り当てられた仮想マシン + 64 MB + 16 MB = 4476 MB)。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-202">Therefore, if two Hyper-V virtual machines are each allocated 2 GB of memory in the Hyper-V Manager, the actual physical memory used when running these Hyper-V virtual machines would be approximately 4476MB (300MB for the hypervisor +4GB allocated for the virtual machines + 64 MB + 16MB = 4476MB).</span></span> <span data-ttu-id="6c0f7-203">**注:**全般則として I/O 仮想化、スナップショット ファイルのサポート、および子パーティションの管理などのサービスを提供するルート パーティションには、少なくとも 512 MB のメモリを割り当てることを計画します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-203">**Note:**      As a general rule of thumb, plan to allocate at least 512 MB memory for the root partition to provide services such as I/O virtualization, snapshot files support, and child partition management.</span></span><br /><span data-ttu-id="6c0f7-204">-   **可能な場合は、64 ビットのゲスト オペレーティング システムを使用して**: 各ゲスト オペレーティング システムの 64 ビット オペレーティング システムを使用してください。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-204">-   **Use a 64-bit guest operating system when possible** – Consider using a 64-bit operating system for each guest operating system.</span></span> <span data-ttu-id="6c0f7-205">これをするため、既定では、32 ビット Windows オペレーティング システムが、アドレスを 1 つのプロセス仮想アドレス領域の最大 2 GB です。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-205">This should be done because by default, 32-bit Windows operating systems can only address up to 2GB of virtual address space per process.</span></span> <span data-ttu-id="6c0f7-206">64 ビット オペレーティング システムのインストールには、HYPER-V 仮想マシンをホストする物理コンピューターにインストールされているメモリを利用できるようにアプリケーションができます。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-206">Installation of a 64-bit operating system allows applications to take full advantage of the memory installed on the physical computer that hosts the Hyper-V virtual machines.</span></span>|  
  
### <a name="optimize-network-performance"></a><span data-ttu-id="6c0f7-207">ネットワークのパフォーマンスを最適化します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-207">Optimize Network Performance</span></span>  
 <span data-ttu-id="6c0f7-208">統合デバイスでパフォーマンスが著しく向上は、CPU オーバーヘッドの削減は HYPER-V 仮想マシンで統合し、エミュレートされたネットワーク アダプターをサポートします。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-208">Hyper-V supports synthetic and emulated network adapters in virtual machines, but the synthetic devices offer significantly better performance and reduced CPU overhead.</span></span> <span data-ttu-id="6c0f7-209">各アダプターが、外部ネットワーク接続が必要な場合、物理ネットワーク アダプターに接続できる仮想ネットワーク スイッチに接続されています。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-209">Each of these adapters is connected to a virtual network switch, which can be connected to a physical network adapter if external network connectivity is needed.</span></span> <span data-ttu-id="6c0f7-210">HYPER-V 仮想環境で実行されているゲスト オペレーティング システムのネットワーク パフォーマンスを最適化するためにこのセクションの推奨事項に従ってください。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-210">Follow the recommendations in this section to optimize network performance of guest operating systems running in a Hyper-V virtual environment.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="6c0f7-211">これらの推奨事項は、"パフォーマンス チューニングの仮想化"のサーバーのセクション"パフォーマンス チューニング ガイドラインの Windows Server 2008 R2"ホワイト ペーパーをダウンロードから[http://go.microsoft.com/fwlink/?LinkID=202087](http://go.microsoft.com/fwlink/?LinkID=202087)です。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-211">These recommendations are from the “Performance Tuning for Virtualization Servers” section of the “Performance Tuning Guidelines for Windows Server 2008 R2” whitepaper available for download at [http://go.microsoft.com/fwlink/?LinkID=202087](http://go.microsoft.com/fwlink/?LinkID=202087).</span></span> <span data-ttu-id="6c0f7-212">方法について割り込み節度を含むルート パーティション内のネットワーク アダプターを調整し、このガイドの「パフォーマンス チューニングのネットワーク サブシステム」セクションを参照してください。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-212">For how to tune the network adapter in the root partition, including interrupt moderation, refer to the “Performance Tuning for Networking Subsystem” section of this guide.</span></span> <span data-ttu-id="6c0f7-213">子パーティションに必要な場合、そのセクションの TCP チューニングを適用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-213">The TCP tunings in that section should be applied, if required, to the child partitions.</span></span>  
  
|<span data-ttu-id="6c0f7-214">手順</span><span class="sxs-lookup"><span data-stu-id="6c0f7-214">Step</span></span>|<span data-ttu-id="6c0f7-215">リファレンス</span><span class="sxs-lookup"><span data-stu-id="6c0f7-215">Reference</span></span>|  
|----------|---------------|  
|<span data-ttu-id="6c0f7-216">プライベート仮想ネットワークを使用して、同じ HYPER-V ホスト コンピューターで実行されている HYPER-V 仮想マシンの構成します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-216">Configure Hyper-V Virtual Machines that are Running on the same Hyper-V host computer to use a Private Virtual Network</span></span>|<span data-ttu-id="6c0f7-217">「同じ HYPER-V で実行されている構成 HYPER-V 仮想マシンは、プライベート仮想ネットワークを使用してコンピューターをホスト」セクションの推奨事項に従う[ネットワーク最適化](~/technical-guides/network-optimizations.md)です。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-217">Follow recommendations in the “Configure Hyper-V Virtual Machines that are Running on the same Hyper-V host computer to use a Private Virtual Network” section of [Network Optimizations](~/technical-guides/network-optimizations.md).</span></span>|  
|<span data-ttu-id="6c0f7-218">TCP オフロード、仮想マシンのネットワーク カードを無効にします。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-218">Disable TCP Offloading for the Virtual Machine Network Cards</span></span>|<span data-ttu-id="6c0f7-219">「を無効にする TCP オフロードすることを仮想マシンのネットワーク カード」セクションの推奨事項に従う[ネットワーク最適化](~/technical-guides/network-optimizations.md)です。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-219">Follow recommendations in the “Disable TCP Offloading for the Virtual Machine Network Cards” section of [Network Optimizations](~/technical-guides/network-optimizations.md).</span></span>|  
|<span data-ttu-id="6c0f7-220">HYPER-V 統合ネットワーク アダプターを使用するゲスト オペレーティング システムを構成します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-220">Configure guest operating systems to use the Hyper-V synthetic network adapter.</span></span>|<span data-ttu-id="6c0f7-221">HYPER-V の機能は大幅に実現するために Vm で特に設計された統合ネットワーク アダプターでは減って CPU オーバーヘッドはネットワーク I/O の既存のハードウェアを模倣したエミュー レートされたネットワーク アダプターと比較されます。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-221">Hyper-V features a synthetic network adapter that is designed specifically for VMs to achieve significantly reduced CPU overhead on network I/O when it is compared to the emulated network adapter that mimics existing hardware.</span></span> <span data-ttu-id="6c0f7-222">統合ネットワーク アダプターは、共有メモリをより効率的なデータの転送を使用して VMBus 経由での子とルート パーティション間で通信します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-222">The synthetic network adapter communicates between the child and root partitions over the VMBus by using shared memory for more efficient data transfer.</span></span> <br /><span data-ttu-id="6c0f7-223">エミュレートされたネットワーク アダプターの VM 設定 ダイアログ ボックスを使用して削除し、統合ネットワーク アダプターに置き換えられます必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-223">The emulated network adapter should be removed through the VM settings dialog box and replaced with a synthetic network adapter.</span></span> <span data-ttu-id="6c0f7-224">ゲストは、VM 統合サービスをインストールすることが必要です。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-224">The guest requires that the VM integration services be installed.</span></span>|  
|<span data-ttu-id="6c0f7-225">利用できる場合は、ルート パーティション内の物理ネットワーク アダプター ドライバーのオフロード機能を有効にします。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-225">If available, enable offload capabilities for the physical network adapter driver in the root partition.</span></span>|<span data-ttu-id="6c0f7-226">シナリオでは、ネイティブ、オフロード、物理ネットワーク アダプターの機能と VM のシナリオでは、ネットワーク I/o の CPU 使用率を削減します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-226">As with the native scenario, offload capabilities in the physical network adapter reduce the CPU usage of network I/Os in VM scenarios.</span></span> <span data-ttu-id="6c0f7-227">HYPER-V は、現在使用 LSOv1 と TCPv4 チェックサム オフロードします。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-227">Hyper-V currently uses LSOv1 and TCPv4 checksum offload.</span></span> <span data-ttu-id="6c0f7-228">ルート パーティション内の物理ネットワーク アダプターのドライバーには、オフロード機能を有効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-228">The offload capabilities must be enabled in the driver for the physical network adapter in the root partition.</span></span> <span data-ttu-id="6c0f7-229">ネットワーク アダプターにオフロード機能については、"パフォーマンス チューニング ガイドラインの Windows Server 2008 R2"」のホワイト ペーパーの使用可能なのパフォーマンス チューニングの仮想化サーバー」「セクションの「ネットワーク アダプターを選択する」セクションを参照してくださいダウンロード[http://go.microsoft.com/fwlink/?LinkID=202087](http://go.microsoft.com/fwlink/?LinkID=202087)です。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-229">For details on offload capabilities in network adapters, refer to the “Choosing a Network Adapter” section of the “Performance Tuning for Virtualization Servers” section of the “Performance Tuning Guidelines for Windows Server 2008 R2” whitepaper available for download at [http://go.microsoft.com/fwlink/?LinkID=202087](http://go.microsoft.com/fwlink/?LinkID=202087).</span></span><br /><span data-ttu-id="6c0f7-230">ドライバーは、特定のネットワーク アダプターの無効化 LSOv1 が LSOv2 を既定で有効になります。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-230">Drivers for certain network adapters disable LSOv1 but enable LSOv2 by default.</span></span> <span data-ttu-id="6c0f7-231">システム管理者必要があります、ドライバーを使用して LSOv1 を明示的に有効にする**プロパティ**デバイス マネージャー ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-231">System administrators must explicitly enable LSOv1 by using the driver **Properties** dialog box in Device Manager.</span></span>|  
|<span data-ttu-id="6c0f7-232">ネットワーク スイッチのトポロジの構成の複数のネットワーク アダプターを使用します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-232">Configure network switch topology to make use of multiple network adapters.</span></span>|<span data-ttu-id="6c0f7-233">HYPER-V では、それぞれに添付できる物理ネットワーク アダプターが必要な場合、複数の仮想ネットワーク スイッチの作成をサポートします。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-233">Hyper-V supports creating multiple virtual network switches, each of which can be attached to a physical network adapter if needed.</span></span> <span data-ttu-id="6c0f7-234">VM の場合は、各ネットワーク アダプターは、仮想ネットワーク スイッチに接続できます。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-234">Each network adapter in a VM can be connected to a virtual network switch.</span></span> <span data-ttu-id="6c0f7-235">物理サーバーに複数のネットワーク アダプターがある場合より、物理ネットワーク アダプターを使用する別の仮想スイッチに接続されている Vm ネットワークに依存する読み込みを伴うと便利です。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-235">If the physical server has multiple network adapters, VMs with network-intensive loads can benefit from being connected to different virtual switches to better use the physical network adapters.</span></span>|  
|<span data-ttu-id="6c0f7-236">場合は、複数の物理ネットワーク カードは、1 つの論理プロセッサには、各ネットワーク カードのバインド デバイス割り込み、HYPER-V ホスト コンピューターにインストールされます。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-236">If multiple physical network cards are installed on the Hyper-V host computer, bind device interrupts for each network card to a single logical processor.</span></span>|<span data-ttu-id="6c0f7-237">一定の負荷は、単一のネットワーク アダプターのデバイスの割り込みを 1 つの論理プロセッサにバインドすると HYPER-V のパフォーマンスが改善します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-237">Under certain workloads, binding the device interrupts for a single network adapter to a single logical processor can improve performance for Hyper-V.</span></span> <span data-ttu-id="6c0f7-238">この完全なネットワーク帯域幅を使用して特定の問題に対処するだけの高度なチューニングをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-238">We recommend this advanced tuning only to address specific problems in fully using network bandwidth.</span></span> <span data-ttu-id="6c0f7-239">システム管理者は、デバイスの割り込みを特定のプロセッサにバインドするのに IntPolicy ツールを使用することができます。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-239">System administrators can use the IntPolicy tool to bind device interrupts to specific processors.</span></span> <span data-ttu-id="6c0f7-240">IntPolicy ツールの詳細については、次を参照してください。 [http://go.microsoft.com/fwlink/?LinkID=129773](http://go.microsoft.com/fwlink/?LinkID=129773)です。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-240">For more information about the IntPolicy tool, see [http://go.microsoft.com/fwlink/?LinkID=129773](http://go.microsoft.com/fwlink/?LinkID=129773).</span></span>|  
|<span data-ttu-id="6c0f7-241">可能であれば、HYPER-V 統合ネットワーク アダプターのタグの VLAN を有効にします。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-241">If possible, enable VLAN tagging for the Hyper-V synthetic network adapter.</span></span>|<span data-ttu-id="6c0f7-242">HYPER-V 統合ネットワーク アダプターでは、VLAN タグ付けをサポートします。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-242">The Hyper-V synthetic network adapter supports VLAN tagging.</span></span> <span data-ttu-id="6c0f7-243">物理ネットワーク アダプターは、多数の送信とチェックサムの両方のカプセル化オフロード NDIS_ENCAPSULATION_IEEE_802_3_P_AND_Q_IN_OOB をサポートしている場合は、ネットワーク パフォーマンスを大幅に向上を提供します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-243">It provides significantly better network performance if the physical network adapter supports NDIS_ENCAPSULATION_IEEE_802_3_P_AND_Q_IN_OOB encapsulation for both large send and checksum offload.</span></span> <span data-ttu-id="6c0f7-244">このサポートのない HYPER-V は、VLAN タグ付けを必要とするパケットのハードウェア オフロードを使用することはできませんし、ネットワーク パフォーマンスが低下することができます。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-244">Without this support, Hyper-V cannot use hardware offload for packets that require VLAN tagging and network performance can be decreased.</span></span>|  
|<span data-ttu-id="6c0f7-245">HYPER-V ホスト コンピューターに高速のネットワーク アダプターをインストールし、最大のパフォーマンスを構成します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-245">Install high speed network adapter on the Hyper-V host computer and configure for maximum performance.</span></span>|<span data-ttu-id="6c0f7-246">ネットワーク速度、二重モード、およびフロー制御パラメーターが設定を対応することが非常に重要である - HYPER-V ホスト コンピューター上の 1 GB ネットワーク アダプターのインストールを検討し、「自動ネゴシエーション」を使用してではなく固定速度を備えたネットワーク アダプターを構成します。スイッチの設定を接続先。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-246">Consider installing 1-GB network adapters on the Hyper-V host computer and configure the network adapters with a fixed speed as opposed to using “auto negotiate” - It is very important that the network speed, duplex, and flow control parameters are set to correspond to the settings on the switch to which they are connected.</span></span>|  
|<span data-ttu-id="6c0f7-247">ネットワークのパフォーマンスを最適化するためのベスト プラクティスに従います。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-247">Follow best practices for optimizing network performance.</span></span>|<span data-ttu-id="6c0f7-248">トピック[ネットワーク最適化](~/technical-guides/network-optimizations.md)ネットワークのパフォーマンスを最適化するための一般的なガイダンスを提供します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-248">The topic [Network Optimizations](~/technical-guides/network-optimizations.md) offers general guidance for optimizing network performance.</span></span> <span data-ttu-id="6c0f7-249">このトピックの内容がのパフォーマンスを最適化するための推奨事項を提供していないときに[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]手法は、いずれかに該当する HYPER-V の仮想化環境で[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ソリューションでは、HYPER-V、または物理ハードウェアで実行中かどうか仮想化された環境です。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-249">While this topic does not offer specific recommendations for optimizing performance of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] in a Hyper-V virtualized environment, the techniques are applicable to any [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] solution, whether running on physical hardware or on a Hyper-V virtualized environment.</span></span>|  
  
## <a name="optimize-sql-server-performance"></a><span data-ttu-id="6c0f7-250">SQL Server のパフォーマンスを最適化します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-250">Optimize SQL Server Performance</span></span>  
 <span data-ttu-id="6c0f7-251">トピックの推奨事項に従って[SQL Server の最適化](~/technical-guides/sql-server-optimizations.md)を BizTalk Server ソリューションの SQL Server のパフォーマンスを最適化します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-251">Follow the recommendations in the topic [SQL Server Optimizations](~/technical-guides/sql-server-optimizations.md) to optimize SQL Server performance for the BizTalk Server solution.</span></span> <span data-ttu-id="6c0f7-252">このトピックの内容がのパフォーマンスを最適化するための推奨事項を提供していないときに[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]手法は、いずれかに該当する HYPER-V の仮想化環境で[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ソリューションでは、HYPER-V、または物理ハードウェアで実行中かどうか仮想化された環境です。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-252">While this topic does not offer specific recommendations for optimizing performance of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] in a Hyper-V virtualized environment, the techniques are applicable to any [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] solution, whether running on physical hardware or on a Hyper-V virtualized environment.</span></span>  
  
## <a name="optimize-biztalk-server-solution"></a><span data-ttu-id="6c0f7-253">BizTalk Server ソリューションを最適化します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-253">Optimize BizTalk Server Solution</span></span>  
 <span data-ttu-id="6c0f7-254">トピックの推奨事項に従って[BizTalk Server の最適化](~/technical-guides/biztalk-server-optimizations.md)BizTalk Server ソリューションのパフォーマンスを最適化します。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-254">Follow the recommendations in the topic [BizTalk Server Optimizations](~/technical-guides/biztalk-server-optimizations.md) to optimize performance of the BizTalk Server solution.</span></span> <span data-ttu-id="6c0f7-255">このトピックの内容がのパフォーマンスを最適化するための推奨事項を提供していないときに[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]手法は、いずれかに該当する HYPER-V の仮想化環境で[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ソリューションでは、HYPER-V、または物理ハードウェアで実行中かどうか仮想化された環境です。</span><span class="sxs-lookup"><span data-stu-id="6c0f7-255">While this topic does not offer specific recommendations for optimizing performance of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] in a Hyper-V virtualized environment, the techniques are applicable to any [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] solution, whether running on physical hardware or on a Hyper-V virtualized environment.</span></span>