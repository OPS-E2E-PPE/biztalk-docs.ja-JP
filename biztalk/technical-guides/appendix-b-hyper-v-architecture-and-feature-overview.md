---
title: 付録 B:HYPER-V のアーキテクチャと機能の概要 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 87b6b9a0-a470-43f7-b076-36075477cc34
caps.latest.revision: 13
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: bfd53cf4ef318c3f1e6858b32b57177026aa4248
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65401366"
---
# <a name="appendix-b-hyper-v-architecture-and-feature-overview"></a>付録 B:HYPER-V のアーキテクチャと機能の概要
このトピックでは、HYPER-V のアーキテクチャの概要を説明します、HYPER-V の長所と短所について説明します。  
  
## <a name="hyper-v-architecture"></a>HYPER-V のアーキテクチャ  
  
 HYPER-V は、ハイパーバイザー ベースの仮想化プラットフォームと Windows Server のマーキー機能、ライブ マイグレーションのいずれかのテクノロジです。 HYPER-V、Windows Server はのクイック マイグレーションは、わずか数秒のダウンタイムでの物理ホスト間で Vm を移動する可能性があります。 ライブ マイグレーションでは、物理的なターゲットの間を移動はミリ秒で、移行操作が接続しているユーザーに非表示になることを意味で発生します。 参照してください[新機能については、HYPER-V で Windows Server](https://docs.microsoft.com/windows-server/virtualization/hyper-v/what-s-new-in-hyper-v-on-windows)します。
  
 ハイパーバイザーは、互いに独立した複数の仮想マシン (Vm) をホストできますが、プロセッサ、メモリ、および I/O デバイスの仮想化により、基になるハードウェア リソースを共有する特定のプロセッサを仮想化プラットフォームです。  
  
 HYPER-V 仮想マシンで実行されているゲスト オペレーティング システム提供のパフォーマンスは物理ハードウェアで実行されているオペレーティング システムのパフォーマンスに近づいています*場合*仮想サーバーが必要なクライアント (VSC) ドライバーとサービスゲスト オペレーティング システムにインストールされます。 HYPER-V の仮想サーバーのクライアント (VSC) コード、HYPER-V とも呼ばれます I/O に対応するには、HYPER-V「仮想マシン バス」に直接アクセスできるようにおよびは、HYPER-V 統合サービスのインストールで使用できます。 他のクライアント オペレーティング システムの VSC ドライバーを提供する HYPER-V 統合サービスを利用もします。  
  
 HYPER-V では、パーティションの観点からの分離をサポートします。 パーティションは、オペレーティング システムが実行される、ハイパーバイザーでサポートされる分離の論理単位です。 Microsoft ハイパーバイザーには、少なくとも 1 つの親、またはルート、パーティション、Windows Server を実行している必要があります。 仮想化スタックでは、親パーティションで実行され、ハードウェア デバイスに直接アクセスします。 ゲスト オペレーティング システムをホストするパーティションと、ルート パーティションでは、子が作成されます。 ルート パーティションでは、ハイパー コール アプリケーション プログラミング インターフェイス (API) を使用して子パーティションを作成します。  
  
 パーティションは、物理プロセッサへのアクセスはありません。 またプロセッサの割り込みを処理しないでください。 代わりに、プロセッサの仮想ビューがあるとゲストの各パーティションにプライベートな仮想メモリ アドレス領域で実行します。 ハイパーバイザーは、プロセッサに割り込みを処理し、それぞれのパーティションにリダイレクトします。 HYPER-V もハードウェアが、入力出力メモリ管理ユニット (IOMMU)、CPU で使用されるメモリ管理のハードウェアに依存しないで動作するを使用して、各種のゲスト仮想アドレス空間の間のアドレス変換を高速化します。 物理メモリのアドレスを子パーティションによって使用されるアドレスを再マップする、IOMMU が使用されます。  
  
 子パーティションは、他のハードウェア リソースに直接アクセスできないし、仮想デバイス (仮想デバイス) として、リソースの仮想ビューが表示されます。 仮想デバイスへの要求は、VMBus、または、要求を処理する親パーティション内のデバイスにハイパーバイザーのいずれかにリダイレクトされます。 VMBus は、論理パーティション内の通信チャネルです。 親パーティションは、子パーティションからデバイスへのアクセス要求を処理する VMBus 経由で通信を仮想化サービス プロバイダー (Vsp) をホストします。 子パーティションでは、デバイスの要求を VMBus を使用して、親パーティションの Vsp にリダイレクトする仮想化サービス コンシューマー (Vsc) をホストします。 このプロセス全体は、ゲスト オペレーティング システムに対して透過的です。  
  
 仮想デバイスでは、という名前の記憶域、ネットワーク、グラフィック、入力のサブシステムの I/O の対応、Windows Server Virtualization 機能も利用できます。 対応の I/O は、任意のデバイスのエミュレーション層をバイパスして、VMBus を直接利用する高レベルの通信プロトコル (SCSI) などの特殊な仮想化対応の実装です。 これより効率的に通信が、ハイパーバイザーと VMBus 対応である対応のゲストが必要です。 HYPER-V 対応の I/O およびハイパーバイザー対応カーネルは、HYPER-V 統合サービスのインストールを通じて提供されます。 統合コンポーネントは、仮想サーバーのクライアント (VSC) ドライバーを含めるには、その他のクライアント オペレーティング システムも利用します。 HYPER-V では、Intel VT または AMD Virtualization (AMD-V) テクノロジなどのハードウェア支援による仮想化を含むプロセッサが提供されている必要があります。  
  
 次の図では、Windows Server で実行されている HYPER-V 環境のアーキテクチャの概要を示します。  
  
 ![ハイパー&#45;V アーキテクチャの概要](../technical-guides/media/eadd2a84-3936-4b48-a0e2-05b94882d848.gif "eadd2a84-3936-4b48-a0e2-05b94882d848")  

  
 上記の図で使用される用語を次に示します。  
  
- **APIC** – Programmable Interrupt Controller の詳細。 その割り込みに割り当てられる優先度レベルが許容されるデバイスを出力します。  
  
- **子パーティション**–、ゲスト オペレーティング システムをホストしているパーティション。 物理メモリと、子パーティションによってデバイスにすべてのアクセスは、仮想マシン バス (VMBus) またはハイパーバイザーを通じて提供されます。  
  
- **ハイパー コール**– ハイパーバイザーと通信するためのインターフェイス。 ハイパー コール インターフェイスは、ハイパーバイザーによって提供される最適化へのアクセスに対応します。  
  
- **ハイパーバイザー** – ハードウェアと 1 つまたは複数のオペレーティング システムの間に位置するソフトウェアのレイヤー。 その主な仕事では、パーティションと呼ばれる分離された実行環境を提供します。 ハイパーバイザーでは、制御し、基になるハードウェアへのアクセスを介しします。  
  
- **IC** – 統合コンポーネントです。 子パーティションを他のパーティションと、ハイパーバイザーとの通信を許可するコンポーネントです。  
  
- **I/O スタック**– 入力/出力のスタック。  
  
- **MSR** – メモリ サービス ルーチン。  
  
- **ルート パーティション**– デバイス ドライバー、電源管理、およびデバイスのホット追加/削除など、コンピューター レベルの機能を管理します。 ルート (または親) のパーティションには、物理メモリとデバイスに直接アクセスするパーティションのみが存在します。  
  
- **VID** – 仮想化インフラストラクチャ ドライバー。 管理サービスのパーティション分割、管理サービスの仮想プロセッサとメモリ管理サービスのパーティションを提供します。  
  
- **VMBus** – システムで複数のアクティブな仮想化されたパーティションのパーティション内の通信およびデバイス列挙のために使用されるチャネル ベースの通信メカニズム。 VMBus は、HYPER-V 統合サービスと共にインストールされます。  
  
- **VMMS** – 仮想マシン管理サービス。 子パーティション内のすべての仮想マシンの状態の管理を担当します。  
  
- **VMWP** – 仮想マシン ワーカー プロセス。 仮想化スタックのユーザー モード コンポーネント。 ワーカー プロセスは、子パーティションでゲスト オペレーティング システムを親パーティションの Windows Server のインスタンスからの仮想マシン管理サービスを提供します。 仮想マシン管理サービスでは、実行中の仮想マシンごとに個別のワーカー プロセスを生成します。  
  
- **VSC** – 仮想化サービスのクライアント。 子パーティション内にある統合デバイス インスタンスを指定します。 Vsc は、親パーティション内の仮想化サービス プロバイダー (Vsp) が提供するハードウェア リソースを利用します。 ときは、子パーティションのデバイスの I/O 要求を満たすために、vmbus、親パーティションに対応する Vsp と通信します。  
  
- **VSP** – 仮想化サービス プロバイダー。 ルート パーティション内に存在し、仮想マシン バス (VMBus) 経由で子パーティションを合成デバイスのサポートを提供します。  
  
- **WinHv** – Windows ハイパーバイザー インターフェイス ライブラリ。 WinHv がパーティション分割されたオペレーティング システムのドライバーとドライバーの標準の Windows の呼び出し規約を使用して、ハイパーバイザーの呼び出しを許可するハイパーバイザー間のブリッジ本質的には  
  
- **WMI** –、バーチャル マシン管理サービスを管理すると、仮想マシンを制御する一連の Windows Management Instrumentation の WMI ベースの Api を公開します。  
  
  これらの用語のほとんどがで定義されている、[用語集](../technical-guides/glossary8.md)します。  
  
> [!NOTE]  
>  [HYPER-V テクノロジの概要](https://docs.microsoft.com/windows-server/virtualization/hyper-v/hyper-v-technology-overview)は適切なリソースです。 
  
## <a name="advantages"></a>長所
 HYPER-V 仮想化環境でエンタープライズ レベルのソリューションを実行する利点を以下に示します。  
  
1. **ハードウェア リソースの統合**-複数の物理サーバーに簡単に統合できます比較的少数のサーバー、HYPER-V による仮想化を実装することで。 統合には、展開済みのハードウェア リソースの完全な使用が対応しています。 Windows server、HYPER-V ホスト コンピューターで最大 64 個の論理 Cpu にアクセスできます。 この機能が新しいマルチコア システムの利点を受け取るだけでなく、物理ホストごとのさらなるバーチャル マシン統合率も意味します。  
  
2. **管理の容易さ**:  
  
   -   統合とリソースの一元化、管理を簡略化します。  
  
   -   量のより簡単にスケール アップとスケール アウトの実装に対応します。  
  
3. **コストの削減有効**:  
  
   -   複数の仮想マシンが単一の物理コンピューターで実行できるため、ハードウェアのコストが大幅に削減、したがって、別の物理マシンはすべてのコンピューターに必要はありません。  
  
   -   HYPER-V のライセンス コストは、Windows Server のライセンス コストは含めることができ、スタンドアロン製品としても購入する可能性があります。
  
   -   電源の要件を削減する物理的なハードウェア「フット プリント」のための仮想化された HYPER-V 環境に既存のアプリケーションを統合することで大幅に削減可能性がありますが必要です。  
  
4. **フォールト トレランスのサポート、HYPER-V がクラスタ リングを通じて**– ため、HYPER-V をクラスター対応のアプリケーション、Windows Server は、ネイティブのホスト クラスタ リングを HYPER-V 仮想化環境で作成された仮想マシンのサポートを提供します。  
  
5. **展開と管理が容易**:  
  
   -   少ない物理サーバーに既存のサーバーの統合には、展開が簡略化します。  
  
   -   包括的な HYPER-V の管理ソリューションでは、System Center Virtual Machine Manager で使用することができます。 [System center VMM の新](https://docs.microsoft.com/system-center/vmm/whats-new?view=sc-vmm-2016)いくつかのガイダンスを提供します。
  
6. **キー、HYPER-V のパフォーマンス特性**:  
  
   -   **強化されたハードウェアのアーキテクチャを共有**- Hyper V は、アクセスの改善とネットワーク、ディスクなどのコア リソースの使用率を提供し、ハイパーバイザー対応カーネルとビデオのときに実行されているゲスト オペレーティング システムが搭載されています。必要な仮想サーバーのクライアント (VSC) コード (HYPER-V 対応の I/O と呼ばれます)。 啓発は、メモリ管理などの特定のオペレーティング システム関数のコストを減らすために、オペレーティング システムを強化します。 他のクライアント オペレーティング システムの VSC ドライバーを含めるには、統合コンポーネントが利用も。  
  
        ディスクのパフォーマンスは、Microsoft BizTalk Server などのディスク I/O 集中型のエンタープライズ アプリケーションにとって重要とだけでなく、HYPER-V 対応の I/O。HYPER-V では、物理ディスクのパフォーマンスに従ったディスクのパフォーマンスを提供する「パススルー」ディスクのサポートを提供します。 「パススルー」ディスクのサポートにより利便性のためにわずかな費用でパフォーマンスの向上を提供することに注意してください。 「パススルー」ディスクは、基本的に物理ディスク/Lun を仮想マシンに接続されており、仮想ディスクを仮想マシンのスナップショットなどの機能の一部サポートしていません。  
  
   -   **プロセッサ ハードウェア依存の仮想化サポート**– HYPER-V が最近のプロセッサ テクノロジで提供されているプロセッサ ハードウェア支援による仮想化のサポートを最大限に活用します。  
  
   -   **ゲスト オペレーティング システムのサポートのマルチコア (SMP)** – HYPER-V により、アプリケーションをマルチ スレッド機能の活用をバーチャル マシンで仮想マシン環境で最大 4 つのプロセッサをサポートする機能を提供します。マシン。  
  
   -   **32 ビットと 64 ビットの両方のゲスト オペレーティング システムのサポート**– HYPER-V、Windows などの別のサーバー プラットフォーム全体で 32 ビットと 64 ビット システムを含む、オペレーティング システムのさまざまな種類を同時に実行するための広範なサポートを提供しますLinux®、および他のユーザーにします。  
  
7. **包括的な製品サポート**– 展開済みで、HYPER-V で実行する場合、Microsoft がこれらのアプリケーションのコード修正プログラム サポートをします (Exchange Server や SQL Server) などの Microsoft のエンタープライズ アプリケーションは完全にテストされた HYPER-V で実行されているため、環境。  
  
8. **スケーラビリティ**– 追加電源、ネットワーク帯域幅、および記憶域の容量を処理して実現できます迅速かつ簡単に分配をゲスト仮想マシンのホスト コンピューターから使用可能なリソースを追加します。 ホスト コンピューターがアップグレードされたこと、または機能を持つホスト コンピューターに、ゲスト仮想マシンを移動することが必要です。  
  
   HYPER-V で提供される仮想化テクノロジを活用することの利点の深さについての詳細は、次を参照してください。、 [Hyper-v テクノロジの概要](https://docs.microsoft.com/windows-server/virtualization/hyper-v/hyper-v-technology-overview)します。 
  
## <a name="disadvantages"></a>欠点
 HYPER-V 仮想化環境でエンタープライズ レベルのソリューションを実行中のいくつかのデメリットがあります。  
  
-   **ハードウェアの要件 –** サーバーの統合の確認要求により、HYPER-V 仮想マシン、CPU とメモリを消費する傾向し、比較可能なコンピューティングの読み込みを伴う物理サーバーよりも大きい値のディスク I/O 帯域幅が必要です。 64 ビット Windows Server のすべてのエディションは 64 ビットのみ、HYPER-V サーバーの役割は使用可能なだけであるため、物理ハードウェアがハードウェア支援による仮想化をサポートする必要があります。 つまり、プロセッサは Intel VT または AMD Virtualization (AMD-V) テクノロジと互換性がある、システム BIOS でデータ実行防止 (DEP) をサポートする必要があります、DEP を有効にする必要があります。  
  
-   **ソフトウェアの要件 –** HYPER-V 仮想マシンで実行されている、ほとんどの Microsoft ソフトウェアがサポートされていること、一部の Microsoft ソフトウェアは、HYPER-V 仮想化環境との互換性を確保するテスト対象であること。 たとえば、ほとんどの Microsoft のエンタープライズ レベル アプリケーション サポート、HYPER-V で実行されているか、HYPER-V でサポートされているテスト中します。 BizTalk Server と HYPER-V 上の SQL Server のサポートの詳細については、次を参照してください[付録 c:。BizTalk Server と SQL Server の HYPER-V サポート](../technical-guides/appendix-c-biztalk-server-and-sql-server-hyper-v-supportability.md)します。