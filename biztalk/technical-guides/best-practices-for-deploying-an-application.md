---
title: アプリケーションを展開するためのベスト プラクティス |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 53852303-d368-4f9e-b4e2-f5918f65000b
caps.latest.revision: 2
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 0ae58e18c4fd3279d4c15f5dbccca7acb38a454a
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/27/2018
ms.locfileid: "36979083"
---
# <a name="best-practices-for-deploying-an-application"></a>アプリケーションを展開するためのベスト プラクティス
このトピックでは、BizTalk アプリケーションの配置で従う必要のあるベスト プラクティスを使用します。  

## <a name="deploying-a-biztalk-application"></a>BizTalk アプリケーションの展開  
 **アプリケーションの展開手順のドキュメント**  

- 展開が実行された、さらに展開または展開解除する方法を知り、レコードがあるために、防御、アプリケーションの展開で使用されるすべての手順が文書化することを確認します。 スクリプト化されていないものは、詳細な手順を文書化する必要があります。 これは、外部システムとサード パーティ製コンポーネントの展開への変更を文書化を含める必要があります。  

  **スクリプト アプリケーション展開**  

- できるだけ多くのアプリケーションの配置手順のスクリプトを作成します。 展開プロセス中に人的ミスのリスクを軽減するスクリプトします。  

## <a name="creating-a-biztalk-application"></a>BizTalk アプリケーションを作成します。  
 **BizTalk アプリケーションと .msi ファイルの作成をスクリプト化**  

-   BizTalk アプリケーションの作成をスクリプト化するには、BtsTask.exe を使用できます。 アプリケーションの作成をスクリプト化すると、パッケージ作成できる場合に自動的にビルド サーバーで、自動化されたプロセスを使用しています。 アプリケーションを作成するスクリプトの詳細については、次を参照してください。 [Deploying and Managing BizTalk Applications](../core/deploying-and-managing-biztalk-applications.md)します。

## <a name="deploying-a-biztalk-assembly"></a>BizTalk アセンブリの配置  
 **実稼働コンピューターには、Visual Studio からアセンブリを展開できません。**  

-   開発プロセス中にその開発者は多くの場合、Visual Studio からアセンブリを再デプロイする必要があります。 再展開を可能にするため、Visual Studio ではアセンブリに含まれるアイテムの展開解除、バインド解除、停止、および参加解除が行われます。 これは開発環境では必要であり適切なことですが、実稼働環境では予期しない結果や結果や好ましくない結果を引き起こす可能性があります。 この理由も実稼働コンピューターには、Visual Studio からアセンブリを展開からすべてのユーザーを避けることのできる、実稼働コンピューターに Visual Studio をインストールしないことをお勧めします。  

-   また、Visual Studio を実行しているコンピューターからは実稼動データベースを参照しないでください。  

## <a name="adding-artifacts-to-a-biztalk-application"></a>BizTalk アプリケーションにアイテムを追加します。  
 **1 つのアプリケーションで関連する成果物をグループ化します。**  

- できるだけ多くの関連アイテムを、同じ BizTalk アプリケーションにまとめます。 こうすることで、複数のアイテムを 1 つのエンティティとして管理および展開できるようになり、管理が容易になります。 同じビジネス プロセスをサポートするアイテムや、類似の機能を実行するアイテムは、1 つのアプリケーションにグループ化できます。  

  **別のアプリケーションで共有の成果物を配置します。**  

- 複数のアプリケーションで共有されるアイテムは、独立したアプリケーションで展開します。 たとえば、2 つのアプリケーションでスキーマを共有している場合は、そのスキーマを独立したアプリケーションに配置します。 BizTalk グループ内の 1 つだけの成果物は、1 つローカル一意識別子 (LUID) を持つことができますのでお勧めします。 LUID は、成果物の名前と必要に応じて他の属性で構成されます。 場合は、1 つのアプリケーションにアイテムを含めるし、別のアプリケーションへの参照を作成しを参照するアプリケーションが正しく機能しないアイテムが含まれるアプリケーションを停止するとします。  

   このベスト プラクティスは、種類が File としてアプリケーションに追加されるファイル アイテム (Readme ファイル、スクリプトなど) 以外の、すべての種類のアイテムに適用できます。 これと同じ名前の 1 つ以上のファイル成果物は、BizTalk グループにデプロイできるためです。 したがって複数のアプリケーションで同じ名前のファイルを使用できるので、このベスト プラクティスは当てはまりません。 この場合は、1 つのアプリケーションを停止しても、その他のアプリケーションには影響ありません。 ファイル アイテムを追加する方法の詳細については、次を参照してください。[アプリケーションにファイルを追加する方法](../core/how-to-add-a-file-to-an-application.md)します。  

  **別のアプリケーションで共有 Web サイトのデプロイします。**  

- 複数のビジネス アプリケーションで共有される Web サイトは、独立したアプリケーションで展開します。 この理由は、BizTalk アプリケーションをアンインストールすると、アプリケーションに含まれる Web サイトは実行中であっても削除されるためです。 削除した Web サイトが他のビジネス ソリューションと共有されていた場合、そのビジネス ソリューションは正常に機能しなくなります。  

  **別のアプリケーションでの共有ポリシーを展開します。**  

- 複数のアプリケーションで使用されるポリシーは、1 つのアプリケーションから別のアプリケーションへの参照を作成せずに、独立したアプリケーションで展開します。 この理由は、アプリケーションを停止すると、そのアプリケーションのポリシーは展開解除されるためです。 他のアプリケーションで使用されているポリシーを含むアプリケーションを停止すると、どちらのアプリケーションでもポリシーは機能しなくなります。  

  **別のアプリケーションで共有証明書を展開します。**  

- 複数アプリケーションの送信ポートまたは受信ポートで使用される証明書は、独立したアプリケーションで展開します。その後、展開したアプリケーションに対し、その証明書を使用するアプリケーションから参照を作成します。 これは、2 つのアプリケーションで同じ証明書をインポートすることはできませんので、BizTalk グループ内の 1 つだけの成果物で、1 つの LUID があるためにです。 同じ証明書を使用する 2 つのアプリケーションをインポートしようとすると、最初のインポートは成功しますが、2 番目のインポートは成功しません。 [上書き] インポート オプションを使って既存の証明書を上書きしようとしても、その証明書は別のアプリケーションに含まれているため上書きできません。  

## <a name="exporting-and-importing-a-biztalk-application"></a>エクスポートと、BizTalk アプリケーションをインポートします。  
 **大規模な .msi ファイルを展開する場合は、アプリケーションを展開する BizTalk Server で使用される COM + コンポーネントの既定のトランザクション タイムアウトを増加する必要があります。**  

- 非常に大きい、.msi ファイルを展開しようとしたかどうか (100 MB 以上)、アプリケーション展開中に BizTalk Server で使用される COM + コンポーネントの既定のトランザクション タイムアウト内でアプリケーションを展開しない場合があります。 トランザクションは、デプロイが完了する前にこれら COM + コンポーネントがタイムアウトに関連付けられている、展開は失敗します。 非常に大規模な .msi ファイルを展開している場合は、この問題を軽減するためにこれらのアプローチの 1 つ検討しています。  

- 1 つの大規模な .msi ファイルではなく複数の小さい .msi ファイルをデプロイします。  

  -   既定のトランザクション タイムアウト 3,000 秒を Microsoft.BizTalk.ApplicationDeployment.Group とコンポーネント サービス管理のインターフェイスで Microsoft.BizTalk.Deployment.DeployerComponent コンポーネントに関連付けられているを増やします。 これらのコンポーネントはそれぞれ、Microsoft.BizTalk.ApplicationDeployment.Engine および Microsoft.Biztalk.Deployment COM + アプリケーションに属しています。 詳細については、マイクロソフト サポート技術情報記事 287499 を参照してください。 [MTS または COM + のトランザクションのタイムアウト値を変更する方法](https://support.microsoft.com/help/287499/how-to-change-the-transaction-time-out-value-for-mts-or-com)します。  

  **バインドが上書きされるを防ぐ**  

- エクスポートするアプリケーションのバインドで、.msi ファイルのインポート先アプリケーションのバインドを上書きしないようにするには、エクスポート操作中にエクスポートするリソースとしてバインド ファイルを選択しないでください。  

  **.Msi ファイルが安全であることを確認します。**  

- .Msi ファイルには、機密データを含めることができます。 ファイルが安全であることを確認する手順を実行してください。 .Msi ファイルのセキュリティの詳細については、次を参照してください。[セキュリティと Windows インストーラー](../core/security-and-windows-installer.md)します。  

  **バインド ファイルが安全であることを確認します。**  

- バインド ファイルには、機密データを含めることができます。 ファイルが安全であることを確認する手順を実行してください。  

  **成果物を変更しているだれとエクスポートをスケジュール設定**  

- ユーザーがいないに成果物を変更している可能性が高い時間中にエクスポート操作をスケジュールします。 これが必要な場合は、ユーザーは、エクスポート操作の進行中のデータベース関連アイテム、仮想ディレクトリ、証明書、またはポリシーを変更するが、エクスポートされた .msi ファイルに変更は反映されません。  

## <a name="importing-a-biztalk-application"></a>BizTalk アプリケーションをインポートします。  
 **.Msi ファイルのファイルをインポートするスクリプト**  

- 既存の BizTalk .msi ファイルのインポートをスクリプト化するには、BtsTask.exe を使用できます。 .Msi ファイルをインポートするスクリプトの作成方法の詳細については、次を参照してください。 [Deploying and Managing BizTalk Applications](../core/deploying-and-managing-biztalk-applications.md)します。 

  > [!NOTE]  
  >  ホワイト ペーパーは、BizTalk Server にも適用されます。  

- 処理前または処理後のスクリプトとして実行するスクリプトを追加することができます。 ただし、(インポート、インストールまたはアンインストール) で、スクリプトの実行コンテキストを決定する環境変数を確認するようにスクリプトにロジックを含めるし、必要に応じて処理する必要があります。 詳細については、前処理および後処理のスクリプトを使用して、次を参照してください。[アプリケーション展開のカスタマイズを前処理および後処理のスクリプトを使用して](../core/using-pre-and-post-processing-scripts-to-customize-application-deployment.md)します。 

  **参照されるアイテムの存在を確認します。**  

- インポートするアプリケーションに別のアプリケーションへの参照がある場合は、BizTalk Server が参照先のアプリケーションが存在することを確認します。 ただし、アプリケーションの依存関係を持っているアイテムが参照されているアプリケーションに含まれることを検証しません。 別のアプリケーションでの成果物への依存関係のあるアプリケーションをインポートするときに、参照先アプリケーションに必要な成果物または成果物が含まれていることを確認することをお勧めします。  

  **変更されたアセンブリをグローバル アセンブリ キャッシュに格納するため、.msi ファイルからインポートします。**  

- アプリケーションでアイテムを更新するには、変更または更新した成果物を .msi ファイルから、アプリケーションにインポートします。 成果物をインポートする .msi ファイルを使用しない場合は、変更されたアセンブリをグローバル アセンブリ キャッシュに格納することで、グループ内のすべてのサーバーを更新する必要があります。  

  **合計サーバー数のサブセットを更新するグループの処理ホスト**  

- アプリケーションでアイテムを更新するときに通常、BizTalk グループ内のすべてのサーバーを更新する必要があります。 ただし、ホスト グループの処理を使用する場合だけ、合計サーバー数、グループ内のサブセットを更新します。  

  **インポート操作がタイムアウトした場合は、別の .msi ファイルにアプリケーションを分割します。**  

- 時間が 3,600 秒を超えた場合、インポート操作はタイムアウトします。 .Msi ファイルをインポートしようとして、操作がタイムアウトになる場合は、アプリケーションを再エクスポートし、エクスポートするアイテムのサブセットを選択すると、アプリケーションには、複数の .msi ファイルの内容を分割する必要があります。 アプリケーションを .msi ファイルにエクスポートする方法の詳細については、次を参照してください。 [BizTalk アプリケーションのエクスポート](../core/how-to-export-a-biztalk-application.md)します。
