---
title: "専用の追跡ホストの構成 |Microsoft ドキュメント"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: f997bcc2-08fd-4e9a-ba44-542ec8460d6d
caps.latest.revision: "2"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: b3651d91f9c4b28fae30182ed6ddd18cde1bb3f2
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/20/2017
---
# <a name="configuring-a-dedicated-tracking-host"></a><span data-ttu-id="114a5-102">専用の追跡ホストの構成</span><span class="sxs-lookup"><span data-stu-id="114a5-102">Configuring a Dedicated Tracking Host</span></span>
[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="114a5-103">最適化されているため、スループット、メインのオーケストレーションとメッセージング エンジン実際には移動しないでイベントやメッセージ、BizTalk 追跡 (DTA) またはビジネス アクティビティ監視 (BAM) データベースに直接ので、これは、プライマリからこれらのエンジンを迂回させますビジネス プロセスを実行中のジョブです。</span><span class="sxs-lookup"><span data-stu-id="114a5-103"> is optimized for throughput, so the main orchestration and messaging engines do not actually move events or messages directly to the BizTalk Tracking (DTA) or Business Activity Monitoring (BAM) databases, since this would divert these engines from their primary job of executing business processes.</span></span> <span data-ttu-id="114a5-104">代わりに、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]イベントとメッセージがメッセージ ボックス データベースになり、BizTalk 追跡データベースまたは BAM データベースへの移行を必須としてマークを付けます。</span><span class="sxs-lookup"><span data-stu-id="114a5-104">Instead, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] leaves the events and messages in the MessageBox database and marks them as requiring a move to the BizTalk Tracking or BAM databases.</span></span> <span data-ttu-id="114a5-105">バック グラウンド プロセス (追跡ホスト) してから、BizTalk 追跡データベースに SQL Server エージェント ジョブ コピー追跡したメッセージの中に、BizTalk の追跡と BAM データベースに移動するイベント。</span><span class="sxs-lookup"><span data-stu-id="114a5-105">A background process (the tracking host) then moves the events to the BizTalk Tracking and BAM databases, while a SQL Server Agent job copies tracked messages to the BizTalk Tracking database.</span></span>  
  
## <a name="advantages-of-using-a-dedicated-tracking-host"></a><span data-ttu-id="114a5-106">専用の追跡ホストを使用する利点</span><span class="sxs-lookup"><span data-stu-id="114a5-106">Advantages of Using a Dedicated Tracking Host</span></span>  
 <span data-ttu-id="114a5-107">追跡をホストする BizTalk ホストとは、DTA と BAM 追跡データをメッセージ ボックス データベースから、BizTalk 追跡 (DTA) データベースおよび BAM プライマリ インポート データベースへの移動を担当します。</span><span class="sxs-lookup"><span data-stu-id="114a5-107">A BizTalk Host that hosts tracking is responsible for moving the DTA and BAM tracking data from the MessageBox database to the BizTalk Tracking (DTA) and BAM Primary Import databases.</span></span> <span data-ttu-id="114a5-108">この移動の追跡データは、追跡をホストしている同じホストで実行されているその他の BizTalk アイテムのパフォーマンスに影響を及ぼします。</span><span class="sxs-lookup"><span data-stu-id="114a5-108">This movement of tracking data has an impact on the performance of other BizTalk artifacts that are running in the same host that is hosting tracking.</span></span> <span data-ttu-id="114a5-109">したがって、ホストの追跡が何も実行しない専用のホストを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="114a5-109">Thus, you should use a dedicated host that does nothing but host tracking.</span></span>  
  
 <span data-ttu-id="114a5-110">専用の追跡ホストを使用することもできますを妨げることがなく他の BizTalk ホストを停止する[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]追跡します。</span><span class="sxs-lookup"><span data-stu-id="114a5-110">Using a dedicated tracking host also allows you to stop other BizTalk hosts without interfering with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] tracking.</span></span> <span data-ttu-id="114a5-111">追跡メッセージ ボックス データベースからデータの移動は重大で正常な[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]システムです。</span><span class="sxs-lookup"><span data-stu-id="114a5-111">The movement of tracking data out of the MessageBox database is critical for a healthy [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] system.</span></span> <span data-ttu-id="114a5-112">BizTalk グループ内の追跡データの移動を担当する BizTalk ホストを停止すると、データのデコードに追跡サービスは実行されません。</span><span class="sxs-lookup"><span data-stu-id="114a5-112">If the BizTalk Host responsible for moving tracking data in the BizTalk group is stopped, the Tracking Data Decode service will not run.</span></span> <span data-ttu-id="114a5-113">この効果は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="114a5-113">The impact of this is as follows:</span></span>  
  
-   <span data-ttu-id="114a5-114">HAT 追跡データは、BizTalk 追跡データベースにメッセージ ボックス データベースから移動されません。</span><span class="sxs-lookup"><span data-stu-id="114a5-114">HAT tracking data will not be moved from the MessageBox database to the BizTalk Tracking database.</span></span>  
  
-   <span data-ttu-id="114a5-115">BAM の追跡データは、BAM プライマリ インポート データベースにメッセージ ボックス データベースから移動されません。</span><span class="sxs-lookup"><span data-stu-id="114a5-115">BAM tracking data will not be moved from the MessageBox database to the BAM Primary Import database.</span></span>  
  
-   <span data-ttu-id="114a5-116">データが移動されていないために、メッセージ ボックス データベースから削除できません。</span><span class="sxs-lookup"><span data-stu-id="114a5-116">Because data is not moved, it cannot be deleted from the MessageBox database.</span></span>  
  
-   <span data-ttu-id="114a5-117">場合データのデコードに追跡サービスを停止すると、追跡インターセプターは引き続き実行され、メッセージ ボックス データベースに追跡データを書き込みます。</span><span class="sxs-lookup"><span data-stu-id="114a5-117">When the Tracking Data Decode service is stopped, tracking interceptors will still run and write tracking data to the MessageBox database.</span></span> <span data-ttu-id="114a5-118">データが移動されていない場合は、メッセージ ボックス データベースになります肥大化、時間の経過と共にパフォーマンスが低下する可能性がなります。</span><span class="sxs-lookup"><span data-stu-id="114a5-118">If the data is not moved, this will cause the MessageBox database to become bloated, which will affect performance over time.</span></span> <span data-ttu-id="114a5-119">場合でも、カスタム プロパティは追跡されませんまたは BAM プロファイルが設定されていない、既定では一部のデータは、追跡 (など、パイプラインは、受信/送信イベントおよびオーケストレーションのイベント)。</span><span class="sxs-lookup"><span data-stu-id="114a5-119">Even if custom properties are not tracked or BAM profiles are not set up, by default some data is tracked (such as pipeline receive / send events and orchestration events).</span></span> <span data-ttu-id="114a5-120">データのデコードに追跡サービスを実行しないようにする場合は、すべての追跡インターセプターをデータベースにデータ保存しないようにオフにします。</span><span class="sxs-lookup"><span data-stu-id="114a5-120">If you do not want to run the Tracking Data Decode service, turn off all tracking so that no interceptors save data to the database.</span></span> <span data-ttu-id="114a5-121">グローバル追跡を無効にするを参照してください。[グローバル追跡を無効にする方法](http://go.microsoft.com/fwlink/?LinkId=154193)(http://go.microsoft.com/fwlink/?LinkId=154193) を使用して、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールを選択的に追跡イベントを無効にします。</span><span class="sxs-lookup"><span data-stu-id="114a5-121">To disable global tracking, see [How to Turn Off Global Tracking](http://go.microsoft.com/fwlink/?LinkId=154193) (http://go.microsoft.com/fwlink/?LinkId=154193) Use the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console to selectively disable tracking events.</span></span>  
  
## <a name="optimizing-performance-for-a-dedicated-tracking-host"></a><span data-ttu-id="114a5-122">専用の追跡ホストのパフォーマンスを最適化します。</span><span class="sxs-lookup"><span data-stu-id="114a5-122">Optimizing Performance for a Dedicated Tracking Host</span></span>  
 <span data-ttu-id="114a5-123">このホストを実行するには、少なくとも 2 つのコンピューターで実行する必要があります[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)](の場合に備えた冗長性のいずれかに失敗する)。</span><span class="sxs-lookup"><span data-stu-id="114a5-123">This host should be run on at least two computers running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] (for redundancy in case one fails).</span></span> <span data-ttu-id="114a5-124">最適なパフォーマンスが必要には、少なくとも 1 つの追跡メッセージ ボックス データベースごとにホストのインスタンス。</span><span class="sxs-lookup"><span data-stu-id="114a5-124">For optimal performance, you should have at least one tracking host instance per MessageBox database.</span></span> <span data-ttu-id="114a5-125">追跡ホスト インスタンスの実際の数が n+1、する必要があります、N、メッセージ ボックス データベースの数を = です。</span><span class="sxs-lookup"><span data-stu-id="114a5-125">The actual number of tracking host instances should be N + 1, where N = the number of MessageBox databases.</span></span> <span data-ttu-id="114a5-126">「+ 1」は、冗長性のためです。</span><span class="sxs-lookup"><span data-stu-id="114a5-126">The "+ 1" is for redundancy.</span></span> <span data-ttu-id="114a5-127">1 つだけの追跡は、インスタンスをホストするための追加よりも多くのメリットが特定のメッセージ ボックス データベースのデータを移動されません。</span><span class="sxs-lookup"><span data-stu-id="114a5-127">There is no benefit to adding more than that, because only one tracking host instance can move data for a specific MessageBox database.</span></span> <span data-ttu-id="114a5-128">その結果、ロックする必要がありますしない問題。</span><span class="sxs-lookup"><span data-stu-id="114a5-128">As a result, locking should never be an issue.</span></span> <span data-ttu-id="114a5-129">追加の 1 つのフォールト トレランス追加ホスト インスタンスの追跡ホストする場合は、追跡のいずれかのインスタンスが失敗する、追加のインスタンスは、失敗したインスタンスの職務と仮定します。</span><span class="sxs-lookup"><span data-stu-id="114a5-129">The one additional tracking host instance is added for fault tolerance; if one of the tracking host instances fails, the additional instance will assume the duties of the failed instance.</span></span>  
  
 <span data-ttu-id="114a5-130">追跡ホスト インスタンスが特定のメッセージ ボックス データベースの追跡データを移動しますが、されません 1 つ以上の追跡ホスト インスタンスの特定のメッセージ ボックス データベースのデータを移動します。</span><span class="sxs-lookup"><span data-stu-id="114a5-130">A tracking host instance moves tracking data for specific MessageBox databases, but there will never be more than one tracking host instance moving data for a specific MessageBox database.</span></span> <span data-ttu-id="114a5-131">たとえば、3 つのメッセージ ボックス データベースと 2 つのホスト インスタンスの追跡がある場合は、そのホスト インスタンスのいずれかの必要があります、メッセージ ボックス データベースの 2 つのデータを移動します。</span><span class="sxs-lookup"><span data-stu-id="114a5-131">For example, if you have three MessageBox databases, and only two tracking host instances, then one of the host instances needs to move data for two of the MessageBox databases.</span></span> <span data-ttu-id="114a5-132">追跡ホスト インスタンスの追跡、3 番目の追加は分散作業を実行している別のコンピューターのホスト[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]です。</span><span class="sxs-lookup"><span data-stu-id="114a5-132">Adding a third tracking host instance distributes the tracking host work to another computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="114a5-133">このシナリオでは、複数の追跡ホストの配布と 4 つ目のホスト インスタンスの追跡を追加する機能しますが、余分なは、フォールト トレランスのホスト インスタンスを追跡します。</span><span class="sxs-lookup"><span data-stu-id="114a5-133">In this scenario, adding a fourth tracking host instance would not distribute any more tracking host work, but would provide an extra tracking host instance for fault tolerance.</span></span>  
  
 <span data-ttu-id="114a5-134">BAM イベント バス サービスの詳細については、次のトピックを参照してください。[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)]ヘルプ。</span><span class="sxs-lookup"><span data-stu-id="114a5-134">For more information about the BAM Event Bus service, see the following topics in [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] Help:</span></span>  
  
-   <span data-ttu-id="114a5-135">[BAM イベント バス サービスを管理する](http://go.microsoft.com/fwlink/?LinkId=154194)(http://go.microsoft.com/fwlink/?LinkId=154194)</span><span class="sxs-lookup"><span data-stu-id="114a5-135">[Managing the BAM Event Bus Service](http://go.microsoft.com/fwlink/?LinkId=154194) (http://go.microsoft.com/fwlink/?LinkId=154194)</span></span>  
  
-   <span data-ttu-id="114a5-136">[BAM イベント バス サービスのインスタンスを作成する](http://go.microsoft.com/fwlink/?LinkId=154195)(http://go.microsoft.com/fwlink/?LinkId=154195)</span><span class="sxs-lookup"><span data-stu-id="114a5-136">[Creating Instances of the BAM Event Bus Service](http://go.microsoft.com/fwlink/?LinkId=154195) (http://go.microsoft.com/fwlink/?LinkId=154195)</span></span>  
  
## <a name="configuring-a-dedicated-tracking-host"></a><span data-ttu-id="114a5-137">専用の追跡ホストの構成</span><span class="sxs-lookup"><span data-stu-id="114a5-137">Configuring a Dedicated Tracking Host</span></span>  
 <span data-ttu-id="114a5-138">このセクションで、手順を実行するには、ホストの追跡を許可するホストのプロパティを変更するための次のユーザー権利があります。</span><span class="sxs-lookup"><span data-stu-id="114a5-138">To perform the procedure in this section, you must have the following user rights for modifying host properties to allow host tracking:</span></span>  
  
-   <span data-ttu-id="114a5-139">メンバーである必要がある必要があります、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理者グループ。</span><span class="sxs-lookup"><span data-stu-id="114a5-139">You must be a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group.</span></span>  
  
-   <span data-ttu-id="114a5-140">SQL Server には次の権利が必要です。</span><span class="sxs-lookup"><span data-stu-id="114a5-140">You must have the following rights in SQL Server:</span></span>  
  
    -   <span data-ttu-id="114a5-141">SQL Server の管理者またはのメンバーのいずれかにする必要があります、 *db_owner*または*db_securityadmin* BizTalk 追跡データベース (BizTalk DTADb)、メッセージ ボックス データベース (SQL Server データベース ロールBizTalkMsgBoxDb)、および BAM プライマリ インポート データベース (BAMPrimaryImport)。</span><span class="sxs-lookup"><span data-stu-id="114a5-141">You must be either a SQL Server administrator or a member of the *db_owner* or *db_securityadmin* SQL Server database roles in the BizTalk Tracking database (BizTalk DTADb), MessageBox databases (BizTalkMsgBoxDb), and the BAM Primary Import database (BAMPrimaryImport).</span></span>  
  
    -   <span data-ttu-id="114a5-142">メッセージ ボックス データベース、またはのメンバーのすべてのコンピューター上の sysadmin SQL Server ロールのメンバーがあります、 *db_owner*または*db_ddladmin*すべてのメッセージ ボックス データベースの SQL Server ロール。</span><span class="sxs-lookup"><span data-stu-id="114a5-142">You must be a member of the sysadmin SQL Server role on all the computers where there are MessageBox databases, or a member of the *db_owner* or *db_ddladmin* SQL Server role for all the MessageBox databases.</span></span>  
  
#### <a name="to-enable-host-tracking"></a><span data-ttu-id="114a5-143">ホストの追跡を有効にするには</span><span class="sxs-lookup"><span data-stu-id="114a5-143">To enable host tracking</span></span>  
  
1.  <span data-ttu-id="114a5-144">をクリックして**開始**、 をクリックして**プログラム**、 をクリックして**Microsoft** [!INCLUDE[btsBizTalkServer2006r3ui](../includes/btsbiztalkserver2006r3ui-md.md)]、順にクリック**BizTalk Server 管理コンソール**です。</span><span class="sxs-lookup"><span data-stu-id="114a5-144">Click **Start**, click **Programs**, click **Microsoft** [!INCLUDE[btsBizTalkServer2006r3ui](../includes/btsbiztalkserver2006r3ui-md.md)], and then click **BizTalk Server Administration**.</span></span>  
  
2.  <span data-ttu-id="114a5-145">コンソール ツリーで  [!INCLUDE[btsBizTalkServer2006r3ui](../includes/btsbiztalkserver2006r3ui-md.md)] **管理**[BizTalk グループ]、をクリックして**プラットフォームの設定**、クリックして**ホスト**です。</span><span class="sxs-lookup"><span data-stu-id="114a5-145">In the console tree, expand [!INCLUDE[btsBizTalkServer2006r3ui](../includes/btsbiztalkserver2006r3ui-md.md)] **Administration**, expand the BizTalk group, click **Platform Settings**, and then click **Hosts**.</span></span>  
  
3.  <span data-ttu-id="114a5-146">詳細ウィンドウで、変更、およびをクリックするホストを右クリックして**プロパティ**です。</span><span class="sxs-lookup"><span data-stu-id="114a5-146">In the details pane, right-click the host that you want to modify, and then click **Properties**.</span></span>  
  
4.  <span data-ttu-id="114a5-147">**ホストのプロパティ**ダイアログ ボックスの**全般** タブ、オンまたはオフ**オプション-ホストの追跡を許可する**、順にクリック**ok**です。</span><span class="sxs-lookup"><span data-stu-id="114a5-147">In the **Host Properties** dialog box, on the **General** tab, select or clear **Options - Allow Host Tracking**, and then click **OK**.</span></span>  
  
     <span data-ttu-id="114a5-148">ホストで BizTalk の追跡コンポーネントを読み込んで、状態監視データおよびビジネス データを処理する場合は、このチェック ボックスをオンにします。</span><span class="sxs-lookup"><span data-stu-id="114a5-148">Select this check box to indicate that the host loads the BizTalk Tracking component to process health monitoring and business data.</span></span> <span data-ttu-id="114a5-149">このチェック ボックスをオンにすると、メッセージ ボックス データベースの追跡テーブルおよび追跡データベースに対する読み取り/書き込みアクセスが現在のホストに許可されます。</span><span class="sxs-lookup"><span data-stu-id="114a5-149">If you select this check box, the current host will have read/write access to the tracking tables in the MessageBox database, as well as to the Tracking database.</span></span> <span data-ttu-id="114a5-150">これに伴い、このホスト内で実行されるオブジェクトにも、これらのデータベースに対する読み取りと書き込みのアクセス許可が与えられます。</span><span class="sxs-lookup"><span data-stu-id="114a5-150">Accordingly, any objects running in this host will also have read/write access to these databases.</span></span>  
  
     <span data-ttu-id="114a5-151">チェック ボックスをオフにした場合、ホストはメッセージ ボックス データベースに追跡テーブルへの書き込みアクセスのみを持つし、追跡データベースへのアクセス権がないです。</span><span class="sxs-lookup"><span data-stu-id="114a5-151">If you clear the check box, the host will have only write access to the tracking tables in the MessageBox database and will not have access to the Tracking database.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="114a5-152">参照</span><span class="sxs-lookup"><span data-stu-id="114a5-152">See Also</span></span>  
 [<span data-ttu-id="114a5-153">チェックリスト: BizTalk Server を構成します。</span><span class="sxs-lookup"><span data-stu-id="114a5-153">Checklist: Configuring BizTalk Server</span></span>](../technical-guides/checklist-configuring-biztalk-server.md)