---
title: サイド バイ サイド バージョン管理を使用してスキーマの更新 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: a7360ec5-b5e9-40c7-9a7c-965fcc95ddb0
caps.latest.revision: 2
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: ed0d9d3a204641ac4bccb856e62be15cc2589786
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/27/2018
ms.locfileid: "36976411"
---
# <a name="updating-a-schema-using-side-by-side-versioning"></a><span data-ttu-id="df526-102">サイド バイ サイド バージョン管理を使用してスキーマの更新</span><span class="sxs-lookup"><span data-stu-id="df526-102">Updating a Schema Using Side-by-Side Versioning</span></span>
<span data-ttu-id="df526-103">スキーマをサイド バイ サイド バージョン管理を行うことができます。</span><span class="sxs-lookup"><span data-stu-id="df526-103">You can perform side-by-side versioning with schemas.</span></span> <span data-ttu-id="df526-104">スキーマの新しいバージョンをアセンブリに追加すると、既存のスキーマ (とそのバージョン) にしたまま、スキーマのバージョンをアップグレードする変更されていない場合は。</span><span class="sxs-lookup"><span data-stu-id="df526-104">You do so by adding a new version of the schema to an assembly, upgrading the version of the schema, while leaving the existing schema (and its version) unchanged.</span></span>  
  
 <span data-ttu-id="df526-105">スキーマのバージョンをインクリメントする場合は、すべてのパイプライン インスタンスとそれを使用するパイプライン コンポーネントのスキーマへの参照を更新する必要があります。</span><span class="sxs-lookup"><span data-stu-id="df526-105">If you increment a schema version, you must update the reference to the schema for any pipeline instances and pipeline components that use it.</span></span> <span data-ttu-id="df526-106">スキーマに依存するすべてのオーケストレーションとスキーマを参照します (または新しいマップを作成する) のマップを更新することも必要があります。</span><span class="sxs-lookup"><span data-stu-id="df526-106">You must also update the maps that reference the schema (or create new maps) as well as any orchestrations that rely on the schema.</span></span>  
  
 <span data-ttu-id="df526-107">スキーマの展開を解除する場合、スキーマの以前のバージョン、使用可能な場合、アクティブになります。</span><span class="sxs-lookup"><span data-stu-id="df526-107">If you undeploy a schema, the previous version of the schema, if available, will become active.</span></span>  
  
## <a name="schema-resolution-in-pipelines"></a><span data-ttu-id="df526-108">パイプラインでスキーマの解決</span><span class="sxs-lookup"><span data-stu-id="df526-108">Schema Resolution in Pipelines</span></span>  
 <span data-ttu-id="df526-109">追加する場合、アプリケーション アセンブリを BizTalk グループ内の既存のスキーマと同じメッセージ型を持つ新しいスキーマを含む、最新のバージョン番号を持つスキーマはスキーマの解決はパイプラインで発生したときに使用されます。</span><span class="sxs-lookup"><span data-stu-id="df526-109">If you add to an application an assembly that includes a new schema with the same message type as an existing schema in the BizTalk group, the schema with the latest version number will be used when schema resolution occurs in pipelines.</span></span> <span data-ttu-id="df526-110">1 つのメッセージの種類は、1 つ以上の .NET 型を参照して、このあいまいさがパイプラインの実行エラーにあります。</span><span class="sxs-lookup"><span data-stu-id="df526-110">If one message type refers to more than one .NET type, this ambiguity may cause pipeline execution failure.</span></span> <span data-ttu-id="df526-111">これは、メッセージの種類、ターゲットの名前空間、およびインスタンスのルート名がスキーマの検索に使用されるためです。</span><span class="sxs-lookup"><span data-stu-id="df526-111">This is because schema lookup uses message type, the target namespace, and root name of the instance.</span></span> <span data-ttu-id="df526-112">この種類の障害は、パイプラインで、スキーマ、新しいスキーマと同じメッセージの種類を使用する任意のアプリケーションで発生します。</span><span class="sxs-lookup"><span data-stu-id="df526-112">This type of failure can occur for pipelines in any application that uses a schema with the same message type as the new schema.</span></span> <span data-ttu-id="df526-113">スキーマの解決の詳細については、次を参照してください。[スキーマの解決パイプライン コンポーネントで](http://go.microsoft.com/fwlink/?LinkID=154207)(<http://go.microsoft.com/fwlink/?LinkID=154207>) で[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ヘルプ。</span><span class="sxs-lookup"><span data-stu-id="df526-113">For more information about schema resolution, see [Schema Resolution in Pipeline Components](http://go.microsoft.com/fwlink/?LinkID=154207) (<http://go.microsoft.com/fwlink/?LinkID=154207>) in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Help.</span></span>  
  
 <span data-ttu-id="df526-114">XML 逆アセンブラーのスキーマの解決の動作は、以前のバージョンと並行スキーマの新しいバージョンを追加した後、追加の変更を必要があります。</span><span class="sxs-lookup"><span data-stu-id="df526-114">The schema resolution behavior for the XML Disassembler may require additional changes after adding a new version of a schema side by side with an older version.</span></span> <span data-ttu-id="df526-115">場合によっては、パイプライン デザイナーで、パイプラインの逆アセンブラー プロパティで、スキーマの特定のバージョンへのハードコードされた参照にすることがあります。</span><span class="sxs-lookup"><span data-stu-id="df526-115">In certain cases, you may want to hard-code references in the pipeline disassembler properties in the Pipeline Designer to specific versions of the schemas.</span></span> <span data-ttu-id="df526-116">これにより、XML 逆アセンブラーが XML コンテンツ検出時に、メッセージからメッセージ型を動的を使用して読み込むスキーマを決定します、動的解決の動作を回避することができます。</span><span class="sxs-lookup"><span data-stu-id="df526-116">This enables you to avoid the dynamic resolution behavior, in which the XML Disassembler determines which schema to load by using the message type dynamically discovered at runtime from the message XML content.</span></span>  
  
## <a name="updating-a-schema-in-an-orchestration"></a><span data-ttu-id="df526-117">オーケストレーションでのスキーマの更新</span><span class="sxs-lookup"><span data-stu-id="df526-117">Updating a Schema in an Orchestration</span></span>  
 <span data-ttu-id="df526-118">複数の送信に関連付けられているスキーマを変更する図形をオーケストレーションで受信すると、送信ごとに関連付けられているメッセージのメッセージの種類プロパティを設定して変更をはるかに簡単に作成または受信図形がマルチパート メッセージの種類にはスキーマです。</span><span class="sxs-lookup"><span data-stu-id="df526-118">When you change the schema associated with multiple send and receive shapes in an orchestration, you can make changes much easier by setting the Message Type property for the message associated with each send or receive shape to Multi-part Message Type, rather than Schema.</span></span> <span data-ttu-id="df526-119">同じスキーマには、各図形に関連付けられているメッセージ部分の Type プロパティを設定できます。</span><span class="sxs-lookup"><span data-stu-id="df526-119">You can then set the Type property for the message part associated with each shapes to be the same schema.</span></span> <span data-ttu-id="df526-120">によって、そのために、各図形のメッセージの種類を変更することのではなく、各メッセージ部分の Type プロパティを変更して、その後、スキーマを変更できます。</span><span class="sxs-lookup"><span data-stu-id="df526-120">By so doing, you can subsequently change the schema by changing the Type property for each message part, rather than having to change the Message Type for each shape.</span></span> <span data-ttu-id="df526-121">このプロセスが簡単に変更を加える方法の詳細については、、[優れた BizTalk プログラミングを 8 のヒントと秘訣](http://go.microsoft.com/fwlink/?LinkId=101594)ホワイト ペーパー (http://go.microsoft.com/fwlink/?LinkId=101594)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="df526-121">For more information about making changes easier by this process, see the [8 Tips and Tricks for Better BizTalk Programming](http://go.microsoft.com/fwlink/?LinkId=101594) white paper (http://go.microsoft.com/fwlink/?LinkId=101594).</span></span>  
  
## <a name="versioning-schemas"></a><span data-ttu-id="df526-122">バージョン管理スキーマ</span><span class="sxs-lookup"><span data-stu-id="df526-122">Versioning Schemas</span></span>  
 <span data-ttu-id="df526-123">BizTalk Server では、それを含むアセンブリの最新のバージョンからのスキーマを実行します。</span><span class="sxs-lookup"><span data-stu-id="df526-123">BizTalk Server takes a schema from the most recent version of the assembly containing it.</span></span> <span data-ttu-id="df526-124">これは、スキーマの新しいバージョンを作成する場合、新しいバージョンを完全に置き換えますスキーマのすべての以前のバージョンを意味します。</span><span class="sxs-lookup"><span data-stu-id="df526-124">This means that if you create a new version of a schema, the new version completely replaces all previous versions of the schema.</span></span> <span data-ttu-id="df526-125">これは、短期間のトランザクションの場合に有効です。</span><span class="sxs-lookup"><span data-stu-id="df526-125">This works well when transactions are short-lived.</span></span> <span data-ttu-id="df526-126">ただし、ビジネス プロセス管理ソリューションでのトランザクションは有効期間が長い: 完了 1 年間に注文かかる場合があります。</span><span class="sxs-lookup"><span data-stu-id="df526-126">However, transactions in the Business Process Management solution are long-lived: an order may take up to a year to complete.</span></span>  
  
 <span data-ttu-id="df526-127">スキーマの複数のバージョンが使用される可能性を考慮して、ソリューションの各スキーマは名前空間にバージョン番号を含んでいます。</span><span class="sxs-lookup"><span data-stu-id="df526-127">To allow for the possibility of using multiple versions of a schema being in use, each schema in the solution includes a version number in its namespace.</span></span> <span data-ttu-id="df526-128">BizTalk パイプラインは、ターゲットの名前空間に基づくメッセージと、スキーマで定義されているルート ノード名のメッセージの種類を決定します。</span><span class="sxs-lookup"><span data-stu-id="df526-128">BizTalk pipelines determine the message type of a message based on the target namespace plus the root node name defined in the schema.</span></span> <span data-ttu-id="df526-129">たとえば、注文スキーマの名前空間は次のようになっています。</span><span class="sxs-lookup"><span data-stu-id="df526-129">For example, the namespace for the Order schema is as follows:</span></span>  
  
```  
http://Microsoft.Samples.BizTalk.SouthridgeVideo.Schemas.Order.v1  
```  
  
 <span data-ttu-id="df526-130">名前空間は、スキーマ、およびバージョン番号は含めることにも、スキーマに対して一意の名前空間を識別、ために、新しいスキーマは、以前のバージョンから個別になります。</span><span class="sxs-lookup"><span data-stu-id="df526-130">Because the namespace identifies the schema, and inclusion of the version number makes the namespace unique to the schema, the new schema will be distinct from the older version.</span></span> <span data-ttu-id="df526-131">したがって、古いスキーマを置き換えずに新しいスキーマを使用できます。</span><span class="sxs-lookup"><span data-stu-id="df526-131">Thus, a new schema can be used without supplanting the old schema.</span></span>  
  
 <span data-ttu-id="df526-132">この事前に計画する必要があります、スキーマのバージョンを変更すると、ソリューションの多くの部分が影響することができます。</span><span class="sxs-lookup"><span data-stu-id="df526-132">Changing the schema version can affect many parts of your solution, so this should be planned in advance.</span></span> <span data-ttu-id="df526-133">スキーマのバージョン変更の影響の詳細については、次を参照してください。[スキーマの解決パイプライン コンポーネントで](http://go.microsoft.com/fwlink/?LinkID=154207)(<http://go.microsoft.com/fwlink/?LinkID=154207>) で[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ヘルプ。</span><span class="sxs-lookup"><span data-stu-id="df526-133">For more information about the effect of schema version changes, see [Schema Resolution in Pipeline Components](http://go.microsoft.com/fwlink/?LinkID=154207) (<http://go.microsoft.com/fwlink/?LinkID=154207>) in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Help.</span></span>  
  
 <span data-ttu-id="df526-134">オーケストレーション内のスキーマのバージョンを変更する場合は、マルチパート メッセージの種類を使用します。</span><span class="sxs-lookup"><span data-stu-id="df526-134">When changing the version of schemas in an orchestration, use multipart message types.</span></span> <span data-ttu-id="df526-135">柔軟性にそうなりますとスキーマのバージョン管理します。</span><span class="sxs-lookup"><span data-stu-id="df526-135">Doing so will result in greater flexibility when versioning schemas.</span></span> <span data-ttu-id="df526-136">マルチパート メッセージの種類を使用する利点に関する詳細については、MSDN Magazine の記事ではヒント 1、「常に使用してマルチパート メッセージの種類、」を参照してください。 [8 つのヒントとテクニック プログラミングを向上させる BizTalk](http://go.microsoft.com/fwlink/?LinkId=101594) (http://go.microsoft.com/fwlink/?LinkId=101594)します。</span><span class="sxs-lookup"><span data-stu-id="df526-136">For more information about the advantages of using multipart message types, see tip #1, “Always Use Multi-Part Message Types,” in the MSDN Magazine article [8 Tips And Tricks For Better BizTalk Programming](http://go.microsoft.com/fwlink/?LinkId=101594) (http://go.microsoft.com/fwlink/?LinkId=101594).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="df526-137">参照</span><span class="sxs-lookup"><span data-stu-id="df526-137">See Also</span></span>  
 [<span data-ttu-id="df526-138">アプリケーション更新のベスト プラクティス</span><span class="sxs-lookup"><span data-stu-id="df526-138">Best Practices for Updating Applications</span></span>](../technical-guides/best-practices-for-updating-applications.md)