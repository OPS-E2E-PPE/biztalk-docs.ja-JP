---
title: IIS のパフォーマンスの最適化 |Microsoft ドキュメント
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 6722a2ee-3704-4aaa-9b0d-cef97bcb9a04
caps.latest.revision: 10
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 93f1bca77aea5aa6c75521e46edc8fc4d01b2d73
ms.sourcegitcommit: 5abd0ed3f9e4858ffaaec5481bfa8878595e95f7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/28/2017
ms.locfileid: "25976352"
---
# <a name="optimizing-iis-performance"></a>IIS のパフォーマンスを最適化します。
## <a name="apply-iis-configuration-options-to-improve-iis-performance"></a>IIS のパフォーマンスを向上させるために IIS の構成オプションを適用します。  
 インターネット インフォメーション サービス (IIS) では、IIS のパフォーマンスに影響するための多数の構成パラメーターを公開します。 このトピックでは、これらのパラメーターのいくつかについて説明し、IIS のパフォーマンスを向上させるために、パラメーター値を設定するための一般的なガイダンスを示します。  
  
### <a name="log-only-essential-information-or-completely-disable-iis-logging"></a>重要な情報のみをログまたは IIS のログを完全に無効にします。  
 IIS ログを最小化または実稼働環境でも無効にする必要があります。 ログ記録を無効にするには、これらの手順に従います。  
  
1.  をクリックして**開始**、 をポイント**すべてのプログラム**、 をクリックして**管理ツール**、クリックして**インターネット インフォメーション サービス (IIS) マネージャー**.  
  
2.  **接続** ウィンドウをクリックして展開**サイト**をクリックしてログ記録を無効をクリックして選択する Web サイトを選択**機能ビュー**、し、ダブルクリックして、**ログ**機能します。  
  
3.  をクリックして**を無効にする**で、**アクション**をこの Web サイトのログ記録を無効にするウィンドウです。  
  
### <a name="disable-iis-asp-debugging-in-production-environments"></a>実稼働環境で IIS の ASP のデバッグを無効にします。  
 運用環境で IIS の ASP のデバッグを無効にする必要があります。 IIS ASP を無効にする手順を次のデバッグ: で、**接続** ウィンドウをクリックして展開**サイト**ASP のデバッグを無効にするには、の選択をwebサイトを選択するをクリックします **。機能ビュー**、順にダブルクリックし、 **ASP**機能します。 クリックして展開**コンパイル**をクリックして展開**デバッグ プロパティ**、いることを確認し、両方**クライアント側のデバッグを有効にする**と**サーバー側を有効にします。デバッグ**に設定されている**False**です。  
  
1.  をクリックして**開始**、 をポイント**すべてのプログラム**、 をクリックして**管理ツール**、クリックして**インターネット インフォメーション サービス (IIS) マネージャー**.  
  
2.  **接続** ウィンドウをクリックして展開**サイト**、ASP のデバッグを無効にするをクリックして選択する web サイトを選択する をクリックします**機能ビュー**、し、。ダブルクリックして、 **ASP**機能します。  
  
3.  クリックして展開**コンパイル**をクリックして展開**デバッグ プロパティ**、いることを確認し、両方**クライアント側のデバッグを有効にする**と**サーバー側を有効にします。デバッグ**に設定されている**False**です。  
  
4.  必要に応じてをクリックして**適用**で、**アクション**ウィンドウです。  
  
 ASP.NET アプリケーションおよび Web サービスを指定することでデバッグを無効にする、\<コンパイル デバッグ ="false"\> web アプリケーションの web.config ファイルのセクションです。  
  
### <a name="tune-the-value-of-the-asp-threads-per-processor-limit-property"></a>ASP スレッドごとのプロセッサ制限プロパティの値を調整します。  
 ASP**スレッドあたりプロセッサ数の上限**プロパティは、IIS を作成できる 1 プロセッサあたりのワーカー スレッドの最大数を指定します。 プロセッサ使用率が 50% 以上を満たすまで以上のプロセッサあたりのスレッド制限に対して、値を増やします。 この設定できるに大きな影響を Web アプリケーションのスケーラビリティと、サーバーのパフォーマンス一般にします。 このプロパティは、同時に実行できる ASP 要求の最大数を定義するため、ASP アプリケーションが外部コンポーネントへの拡張の呼び出しを行う場合を除いて、既定値にこの設定する必要がありますしたまま。 この場合、スレッドあたりプロセッサ数の上限の値を大きくことがあります。 これにより、サーバーへの同時要求を処理するスレッドを作成できます。 スレッドあたりプロセッサ数の上限の既定値は 25 です。 このプロパティの推奨最大値は 100 です。  
  
 プロセッサごとのスレッド制限の値を大きくには、以下の手順: で、**接続**ウィンドウで、web サーバーを選択して、クリックして選択**機能ビュー**、順にダブルクリックし、 **ASP**機能します。  
  
1.  をクリックして**開始**、 をポイント**すべてのプログラム**、 をクリックして**管理ツール**、クリックして**インターネット インフォメーション サービス (IIS) マネージャー**.  
  
2.  **接続**ウィンドウで、web サーバーを選択して、クリックして選択**機能ビュー**、順にダブルクリックし、 **ASP**機能します。  
  
3.  クリックして展開**制限プロパティ****動作**、 をクリックして**スレッドあたりプロセッサ数の上限**、目的の値を入力**スレッドあたりプロセッサ数の上限**  をクリック**適用**で、**アクション**ウィンドウです。  
  
 プロパティを変更する方法について、\<制限\>要素 IIS 7.5 または 7.0 の\<asp\>要素を参照してください[ASP 制限\<制限\>](http://go.microsoft.com/fwlink/?LinkId=157483)(http://go.microsoft.com/fwlink/?LinkId=157483)。  
  
> [!NOTE]  
>  このプロパティは、サーバー レベルでのみ適用できる、このプロパティの変更は、サーバー上で実行されるすべての Web サイトに影響します。  
  
### <a name="tune-the-value-of-the-asp-queue-length-property"></a>ASP キューの長さのプロパティの値を調整します。  
 このプロパティをチューニングの目的は、ASP 要求キューがいっぱいになったとき、サーバーで、HTTP 503 (サーバーがビジー状態) エラーをクライアントに送信する頻度を最小限に抑えながら良好な応答時間のことです。 ASP キューの長さのプロパティの値が低すぎる場合は、サーバーは、HTTP 503 エラーをより高い頻度で送信します。 ASP キューの長さのプロパティの値が高すぎる場合は、ユーザーは、サーバーが応答していないことと実際の要求がキューで待機しているを感じる可能性があります。 大量のトラフィックの期間中に、キューを監視して、web 要求のピーク時とオフのパターンを識別できる必要があります。 ピーク時の値をメモを行い、ピーク時の値の真上 ASP キューの長さのプロパティの値を設定します。 キューを使用して短期的な急増に対応、応答時間を確認および維持、予期しないスパイクが発生したときにオーバー ロードを避けるためにシステムを調整します。 ASP キューの長さのプロパティを調整するためのデータがない、適切な開始点のスレッドの合計にキューの 1 対 1 の比率を設定するされます。 たとえば、ASP スレッドごとのプロセッサ制限プロパティは 25 に設定され、4 つのプロセッサがある場合 (4 * 25 = 100 スレッド) を 100 に ASP キューの長さのプロパティを設定、およびそこからチューニングします。  
  
 プロパティをキューの長さの値を増やすには、これらの手順に従います。  
  
1.  をクリックして**開始**、 をポイント**すべてのプログラム**、 をクリックして**管理ツール**、クリックして**インターネット インフォメーション サービス (IIS) マネージャー**.  
  
2.  **接続**ウィンドウで、Web サーバーを選択して、クリックして選択**機能ビュー**、順にダブルクリックし、 **ASP**機能します。  
  
3.  クリックして展開**制限プロパティ**[**動作**、] をクリックして**キューの長さ**、目的の値を入力**キューの長さ**し、をクリックして**適用**で、**アクション**ウィンドウです。  
  
 プロパティを変更する方法について、\<制限\>要素 IIS 7.5 または 7.0 の\<asp\>要素を参照してください[ASP 制限\<制限\>](http://go.microsoft.com/fwlink/?LinkId=157483)(http://go.microsoft.com/fwlink/?LinkId=157483)。  
  
> [!NOTE]  
>  このプロパティは、サーバー レベルでのみ適用できる、このプロパティの変更は、サーバー上で実行されるすべての Web サイトに影響します。  
  
### <a name="tune-the-maxpoolthreads-registry-entry"></a>MaxPoolThreads レジストリ エントリをチューニングします。  
 この設定は、プロセッサごとに作成するプールのスレッドの数を指定します。 プールのスレッドは、ネットワークの要求および着信要求の処理を監視します。 MaxPoolThreads 数では ISAPI アプリケーションで使用されるスレッドは含まれません。 一般に、プロセッサごとに 20 を超えるスレッドを作成しないでください。 MaxPoolThreads は、既定値は 4 で HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\InetInfo\Parameters\ にある REG_DWORD レジストリ エントリです。  
  
### <a name="disable-wcf-services-tracing"></a>WCF サービスのトレースを無効にします。  
 WCF サービスが実稼働環境でトレースを無効にするには、構成エディター ツール (SvcConfigEditor.exe) を使用します。 構成エディター ツールの詳細については、次を参照してください。[構成エディター ツール (SvcConfigEditor.exe)](http://go.microsoft.com/fwlink/?LinkID=127070) (http://go.microsoft.com/fwlink/?LinkID=127070)。  
  
### <a name="configure-aspnet-20-maxconcurrentrequests-for-iis-7570-integrated-mode"></a>IIS 7.5 または 7.0 統合モード用の ASP.NET 2.0 MaxConcurrentRequests を構成します。  
 ASP.NET 2.0 は、IIS 7.5 または 7.0 統合モードでホストされている、ときにスレッドの使用が異なる方法よりもに IIS 7.5 または 7.0 クラシック モードでします。 ASP.NET 2.0 が統合モードで IIS 7.5 でホストされている場合、ASP.NET 2.0 は、現在実行中の要求を同時に実行するスレッドの数ではなく要求の数を制限します。 同期のシナリオでは、これは直接制限いないスレッドの数要求の数は、スレッドの数と同じになるためします。 非同期のシナリオでの要求とスレッド数可能性があることが非常に異なるスレッドよりもはるかに多くの要求をする可能性があるためです。 統合モードの IIS 7.5 で ASP.NET 2.0 を実行するときに minFreeThreads および machine.config 内の"httpRuntime"要素の minLocalRequestFreeThreads は無視されます。 IIS 7.5 統合モードでは、HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\ASP.NET\2.0.50727.0 内の MaxConcurrentRequestsPerCPU をという名前の DWORD は CPU ごとの同時要求の数を決定します。 既定では、レジストリ キーが存在しないと、CPU あたりの要求の数は 12 に制限されます。 .NET framework 3.5 SP1 には、aspnet.config ファイルを使用して、構成の IIS アプリケーション プールをサポートするバージョン 2.0 のバイナリに更新プログラムが含まれています。 この構成は統合モードのみに適用されます (ISAPI/クラシック モードでは、これらの設定を無視します)。新しい aspnet.config config セクションには、既定値は次のとおりです。  
  
```  
<system.web>  
   <applicationPool maxConcurrentRequestsPerCPU="12" maxConcurrentThreadsPerCPU="0" requestQueueLimit="5000"/>  
</system.web>  
```  
  
 IIS 7.5、統合モードで、maxWorkerThreads と、""ファイルの processModel セクションは machine.config で maxIoThreads パラメーターは、要求を本質的に実行中の数を制御するために使用されませんが、CLR スレッド プールのサイズを制御するためには使用されます。ASP.NET によって使用されます。 ときに、machine.config の"processModel"セクションが"autoConfig = true"(既定の設定は)、これにより、アプリケーション プールの論理 CPU ごとの最大 100 個のワーカー スレッド (MaxWorkerThreads)。 その 2 つのデュアル コア Cpu で共通の汎用的なサーバーは 400 MaxWorkerThreads があります。 最も高いアプリケーションを除くすべてのための十分な場合があります。  
  
 IIS 7.5 で ASP.NET スレッドの使用法を構成する方法の詳細については、次を参照してください。 [IIS 7.0 で ASP.NET スレッドの使用に関する Thomas Marquardt のブログ](http://go.microsoft.com/fwlink/?LinkId=157518)(http://go.microsoft.com/fwlink/?LinkId=157518)。  
  
### <a name="configure-aspnet-4-maxconcurrentrequests-for-iis-7570-integrated-mode"></a>IIS 7.5 または 7.0 統合モード用の ASP.NET 4 MaxConcurrentRequests を構成します。  
 .NET Framework 4、maxConcurrentRequestsPerCPU の既定の設定に膨大な数は 5000 し、そのため、のに十分な非同期要求を同時に実行します。 詳細については、次を参照してください。 [ \<applicationPool\>要素 (Web 設定)](http://go.microsoft.com/fwlink/?LinkID=205339) (http://go.microsoft.com/fwlink/?LinkID=205339)。  
  
 IIS 7.5 または 7.0 統合モードでは、HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\ASP.NET\4.0.30319.0 内の MaxConcurrentRequestsPerCPU をという名前の DWORD は CPU ごとの同時要求の数を決定します。 既定では、レジストリ キーが存在しないと、CPU あたりの要求の数は 5000 に制限されます。  
  
### <a name="enable-iis-http-compression"></a>IIS の HTTP 圧縮を有効にします。  
 使用できる帯域幅をより効率的に使用するのには、IIS の HTTP 圧縮を有効にします。 HTTP 圧縮は、ローカル ストレージまたは UNC リソースからコンテンツを提供するかどうかに関係なく圧縮対応のブラウザーおよび IIS の間で高速の伝送時間を示します。  
  
-   **Web サーバー レベルの圧縮を構成します。**  
  
    1.  をクリックして**開始**、 をポイント**すべてのプログラム**、 をクリックして**管理ツール**、クリックして**インターネット インフォメーション サービス (IIS) マネージャー**.  
  
    2.  **接続**ウィンドウで、Web サーバーを選択して、クリックして選択**機能ビュー**、順にダブルクリックし、**圧縮**機能します。  
  
    3.  必要な圧縮オプションを設定し、クリックして**適用**で、**アクション**ウィンドウです。  
  
-   **Web サイト レベルで圧縮を構成します。**  
  
    1.  をクリックして**開始**、 をポイント**すべてのプログラム**、 をクリックして**管理ツール**、クリックして**インターネット インフォメーション サービス (IIS) マネージャー**.  
  
    2.  **接続** ウィンドウをクリックして展開**サイト**、圧縮を構成するをクリックして選択する Web サイトを選択する をクリックします**機能ビュー**、および。ダブルクリックし、**圧縮**機能します。  
  
    3.  必要な圧縮オプションを設定し、クリックして**適用**で、**アクション**ウィンドウです。  
  
## <a name="see-also"></a>参照  
 [パフォーマンスの最適化](../technical-guides/optimizing-performance.md)