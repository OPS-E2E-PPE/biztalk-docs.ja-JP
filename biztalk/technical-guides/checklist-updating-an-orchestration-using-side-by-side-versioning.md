---
title: チェックリスト:サイド バイ サイド バージョン管理を使用してオーケストレーションの更新 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 97f66987-0269-4dfe-a648-7b68412e86fe
caps.latest.revision: 2
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: bd8c0f9e1424982324aff88115188b9d6a74f835
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65397086"
---
# <a name="checklist-updating-an-orchestration-using-side-by-side-versioning"></a><span data-ttu-id="c63a1-102">チェックリスト:サイド バイ サイド バージョン管理を使用してオーケストレーションを更新しています</span><span class="sxs-lookup"><span data-stu-id="c63a1-102">Checklist: Updating an Orchestration Using Side-by-Side Versioning</span></span>
<span data-ttu-id="c63a1-103">オーケストレーションへの変更は他にも、マップなどの成果物への変更よりも複雑にすることはできます。</span><span class="sxs-lookup"><span data-stu-id="c63a1-103">Changes to orchestrations can be more involved than changes to other artifacts, such as maps.</span></span> <span data-ttu-id="c63a1-104">有効期間が短いオーケストレーションがあれば、単純な更新は十分であります。</span><span class="sxs-lookup"><span data-stu-id="c63a1-104">If you have short-lived orchestrations, then a simple update may be sufficient.</span></span> <span data-ttu-id="c63a1-105">実行時間の長いオーケストレーションまたは既存のインスタンスを終了することはできませんがある場合は、サイド バイ サイド バージョン管理が唯一の選択肢はなります。</span><span class="sxs-lookup"><span data-stu-id="c63a1-105">But if you have long-running orchestrations or cannot terminate existing instances, then side-by-side versioning will be your only option.</span></span>  
  
 <span data-ttu-id="c63a1-106">オーケストレーションでは、実行時間の長いトランザクションを処理するときにすぐに更新されたバージョンのオーケストレーションを変更できません。</span><span class="sxs-lookup"><span data-stu-id="c63a1-106">When an orchestration handles long-running transactions, you cannot change to the updated version of the orchestration immediately.</span></span> <span data-ttu-id="c63a1-107">元のバージョンが失われないように、メッセージの処理が完了するを許可する必要があります。</span><span class="sxs-lookup"><span data-stu-id="c63a1-107">You must allow the original version to finish processing its messages so that they are not lost.</span></span> <span data-ttu-id="c63a1-108">これを行うには、元の 1 つとして、同じアプリケーションに更新されたオーケストレーションを展開します。</span><span class="sxs-lookup"><span data-stu-id="c63a1-108">To accomplish this, you deploy the updated orchestration into the same application as the original one.</span></span> <span data-ttu-id="c63a1-109">元のバージョンを停止し、以前のバージョンがインフライト メッセージの処理を続行中には、すべての新しいメッセージを受信するように、更新されたバージョンを開始します。</span><span class="sxs-lookup"><span data-stu-id="c63a1-109">You then stop the original version and start the updated version so that it receives all new messages while the previous version continues to process any in-flight messages.</span></span> <span data-ttu-id="c63a1-110">元のオーケストレーションは、そのすべてのメッセージの処理が終了したらが展開された BizTalk アプリケーションから解除します。</span><span class="sxs-lookup"><span data-stu-id="c63a1-110">After the original orchestration has finished processing all of its messages, you undeploy it from the BizTalk application in which it was deployed.</span></span>  
  
|<span data-ttu-id="c63a1-111">手順</span><span class="sxs-lookup"><span data-stu-id="c63a1-111">Steps</span></span>|<span data-ttu-id="c63a1-112">リファレンス</span><span class="sxs-lookup"><span data-stu-id="c63a1-112">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="c63a1-113">オーケストレーションに必要な変更を行った後は、アセンブリのバージョン番号をインクリメントします。</span><span class="sxs-lookup"><span data-stu-id="c63a1-113">After making the necessary changes to the orchestration, increment the assembly version number.</span></span>|[<span data-ttu-id="c63a1-114">アセンブリを更新する方法</span><span class="sxs-lookup"><span data-stu-id="c63a1-114">How to Update an Assembly</span></span>](../technical-guides/how-to-update-an-assembly.md)|  
|<span data-ttu-id="c63a1-115">Visual Studio から BizTalk アプリケーションにアセンブリを展開して、アセンブリをテストします。</span><span class="sxs-lookup"><span data-stu-id="c63a1-115">Deploy the assembly from Visual Studio into a BizTalk application, and then test the assembly.</span></span> <span data-ttu-id="c63a1-116">**注:** GAC にアセンブリをインストールする展開オプションを選択することを確認します。</span><span class="sxs-lookup"><span data-stu-id="c63a1-116">**Note:**  Make sure you select the deployment option to install the assembly in the GAC.</span></span>|<span data-ttu-id="c63a1-117">[BizTalk アプリケーションに Visual Studio から BizTalk アセンブリを展開](http://go.microsoft.com/fwlink/?LinkID=154719)(http://go.microsoft.com/fwlink/?LinkID=154719)します。</span><span class="sxs-lookup"><span data-stu-id="c63a1-117">[Deploying BizTalk Assemblies from Visual Studio into a BizTalk Application](http://go.microsoft.com/fwlink/?LinkID=154719) (http://go.microsoft.com/fwlink/?LinkID=154719).</span></span>|  
|<span data-ttu-id="c63a1-118">.Msi ファイルに、テスト環境でのアプリケーションからアセンブリをエクスポートします。</span><span class="sxs-lookup"><span data-stu-id="c63a1-118">Export the assembly from the application in your test environment into an .msi file.</span></span>|[<span data-ttu-id="c63a1-119">アプリケーションを .msi ファイルにエクスポートする方法</span><span class="sxs-lookup"><span data-stu-id="c63a1-119">How to Export an Application to an .msi File</span></span>](../technical-guides/how-to-export-an-application-to-an-msi-file.md)|  
|<span data-ttu-id="c63a1-120">.Msi ファイルを更新するオーケストレーションを含む実稼働環境で BizTalk アプリケーションにインポートします。</span><span class="sxs-lookup"><span data-stu-id="c63a1-120">Import the .msi file into the BizTalk application in your production environment that contains the orchestration that you want to update.</span></span> <span data-ttu-id="c63a1-121">**注:** 次の手順を使用するには、運用環境に展開すると、アセンブリをテストします。</span><span class="sxs-lookup"><span data-stu-id="c63a1-121">**Note:**  You can use the following steps for testing the assembly as well as deploying it into your production environment.</span></span>|[<span data-ttu-id="c63a1-122">.msi ファイルのアプリケーションをインポートする方法</span><span class="sxs-lookup"><span data-stu-id="c63a1-122">How to Import an Application from an .msi File</span></span>](../technical-guides/how-to-import-an-application-from-an-msi-file.md)|  
|<span data-ttu-id="c63a1-123">元のオーケストレーションとして同じバインディングを使用して、更新されたオーケストレーションをバインドします。</span><span class="sxs-lookup"><span data-stu-id="c63a1-123">Bind the updated orchestration using the same bindings as the original orchestration.</span></span>|<span data-ttu-id="c63a1-124">[オーケストレーションのバインドを構成する方法](http://go.microsoft.com/fwlink/?LinkId=154850)(http://go.microsoft.com/fwlink/?LinkId=154850)します。</span><span class="sxs-lookup"><span data-stu-id="c63a1-124">[How to Configure Bindings for an Orchestration](http://go.microsoft.com/fwlink/?LinkId=154850) (http://go.microsoft.com/fwlink/?LinkId=154850).</span></span>|  
|<span data-ttu-id="c63a1-125">元のオーケストレーションの参加を解除し、更新されたオーケストレーションを開始します。</span><span class="sxs-lookup"><span data-stu-id="c63a1-125">Unenlist the original orchestration, and then start the updated orchestration.</span></span> <span data-ttu-id="c63a1-126">**注:** メッセージの消失を回避するには、必要がありますこれを行うプログラムを使用します。</span><span class="sxs-lookup"><span data-stu-id="c63a1-126">**Note:**  To avoid any dropped messages, you should do this programmatically.</span></span>|<span data-ttu-id="c63a1-127">プログラムによって、オーケストレーションの展開に関する詳細については、次を参照してください。[展開とプログラム、オーケストレーションの新しいバージョンを開始](http://go.microsoft.com/fwlink/?LinkId=154851)(http://go.microsoft.com/fwlink/?LinkId=154851)します。</span><span class="sxs-lookup"><span data-stu-id="c63a1-127">For more information about deploying the orchestration programmatically, see [Deploying and Starting a New Version of an Orchestration Programmatically](http://go.microsoft.com/fwlink/?LinkId=154851) (http://go.microsoft.com/fwlink/?LinkId=154851).</span></span><br /><br /> <span data-ttu-id="c63a1-128">オーケストレーションを手動で展開の詳細については、BizTalk Server ヘルプでは、次を参照してください。</span><span class="sxs-lookup"><span data-stu-id="c63a1-128">For more information about deploying the orchestration manually, see the following in BizTalk Server Help:</span></span><br /><br /> <span data-ttu-id="c63a1-129">-   [オーケストレーションを参加解除する方法](http://go.microsoft.com/fwlink/?LinkId=154852)(http://go.microsoft.com/fwlink/?LinkId=154852)します。</span><span class="sxs-lookup"><span data-stu-id="c63a1-129">-   [How to Unenlist an Orchestration](http://go.microsoft.com/fwlink/?LinkId=154852) (http://go.microsoft.com/fwlink/?LinkId=154852).</span></span><br /><span data-ttu-id="c63a1-130">-   [オーケストレーションを参加させる方法](http://go.microsoft.com/fwlink/?LinkId=154853)(http://go.microsoft.com/fwlink/?LinkId=154853)します。</span><span class="sxs-lookup"><span data-stu-id="c63a1-130">-   [How to Enlist an Orchestration](http://go.microsoft.com/fwlink/?LinkId=154853) (http://go.microsoft.com/fwlink/?LinkId=154853).</span></span><br /><span data-ttu-id="c63a1-131">-   [オーケストレーションを開始する方法](http://go.microsoft.com/fwlink/?LinkId=154854)(http://go.microsoft.com/fwlink/?LinkId=154854)します。</span><span class="sxs-lookup"><span data-stu-id="c63a1-131">-   [How to Start an Orchestration](http://go.microsoft.com/fwlink/?LinkId=154854) (http://go.microsoft.com/fwlink/?LinkId=154854).</span></span>|  
|<span data-ttu-id="c63a1-132">システムの監視、グループのハブを使用して元のオーケストレーションのバージョンのインスタンスがクエリ ビュー ページします。</span><span class="sxs-lookup"><span data-stu-id="c63a1-132">Monitor the system for instances of the original orchestration version using the Group Hub page query view.</span></span>|<span data-ttu-id="c63a1-133">[オーケストレーションのインスタンス情報を表示する方法](http://go.microsoft.com/fwlink/?LinkId=154855)(http://go.microsoft.com/fwlink/?LinkId=154855)します。</span><span class="sxs-lookup"><span data-stu-id="c63a1-133">[How to View Instance Information for an Orchestration](http://go.microsoft.com/fwlink/?LinkId=154855) (http://go.microsoft.com/fwlink/?LinkId=154855).</span></span>|  
|<span data-ttu-id="c63a1-134">すべてのアクティブ、退避済み、および中断されたインスタンスが完了したら、アプリケーションから元のオーケストレーションの展開を解除します。</span><span class="sxs-lookup"><span data-stu-id="c63a1-134">When all of its active, dehydrated, and suspended instances are complete, undeploy the original orchestration from the application.</span></span>|<span data-ttu-id="c63a1-135">[オーケストレーションをアプリケーションから削除する方法](http://go.microsoft.com/fwlink/?LinkId=154856)(http://go.microsoft.com/fwlink/?LinkId=154856)します。</span><span class="sxs-lookup"><span data-stu-id="c63a1-135">[How to Remove an Orchestration from an Application](http://go.microsoft.com/fwlink/?LinkId=154856) (http://go.microsoft.com/fwlink/?LinkId=154856).</span></span>|  
|<span data-ttu-id="c63a1-136">必要に応じて、アプリケーションを実行している各コンピューターの GAC から元のアセンブリ バージョンをアンインストールします。</span><span class="sxs-lookup"><span data-stu-id="c63a1-136">Optionally uninstall the original assembly version from the GAC on each computer running the application.</span></span>|<span data-ttu-id="c63a1-137">[GAC からアセンブリをアンインストールする方法](http://go.microsoft.com/fwlink/?LinkId=154857)(http://go.microsoft.com/fwlink/?LinkId=154857)します。</span><span class="sxs-lookup"><span data-stu-id="c63a1-137">[How to Uninstall an Assembly from the GAC](http://go.microsoft.com/fwlink/?LinkId=154857) (http://go.microsoft.com/fwlink/?LinkId=154857).</span></span>|  
  
## <a name="binding-to-receive-ports-and-locations"></a><span data-ttu-id="c63a1-138">受信ポートと受信場所へのバインド</span><span class="sxs-lookup"><span data-stu-id="c63a1-138">Binding to Receive Ports and Locations</span></span>  
 <span data-ttu-id="c63a1-139">新規作成する場合は、受信ポートおよびオーケストレーションの新しいバージョンの場所、単に新しいポートにバインドしへの参加以降、新しい成果物は、通常ための十分です。</span><span class="sxs-lookup"><span data-stu-id="c63a1-139">If you want to create new receive ports and locations for the new version of the orchestration, simply binding to the new ports and enlisting/starting the new artifacts will typically be sufficient.</span></span> <span data-ttu-id="c63a1-140">新しい受信場所を作成して、ポートは、通常、優先のアプローチでは、実際のシナリオは、数の関連付けが処理する必要があるで受信も実行時間の長いオーケストレーションを使用している場合に特にします。</span><span class="sxs-lookup"><span data-stu-id="c63a1-140">Creating new receive locations and ports is usually the preferred approach, especially if your scenario uses long-running orchestrations where a number of correlating receives still need to be processed.</span></span> <span data-ttu-id="c63a1-141">この場合、しないことができますを既存の再利用する受信ポートまたは参加解除を実行します。</span><span class="sxs-lookup"><span data-stu-id="c63a1-141">In this case, you may not be able to reuse existing receive ports or perform unenlistment.</span></span> <span data-ttu-id="c63a1-142">新しいポートを作成する場合は、この変更を処理するために、バックエンドとパートナーのシステムの可能性があることを確認します。</span><span class="sxs-lookup"><span data-stu-id="c63a1-142">If you create new ports, be sure that it is possible for your backend and partner systems to handle this change.</span></span> <span data-ttu-id="c63a1-143">有効でない場合は、すべての実行時間の長いインスタンスをアップグレードする前に、最後に待機する必要があります。</span><span class="sxs-lookup"><span data-stu-id="c63a1-143">If not, you will have to wait for all long-running instances to culminate before upgrading.</span></span>  
  
 <span data-ttu-id="c63a1-144">既存のポートを使用する場合は、次の操作を行います。</span><span class="sxs-lookup"><span data-stu-id="c63a1-144">If you want to use existing ports, do the following:</span></span>  
  
1.  <span data-ttu-id="c63a1-145">オーケストレーションの新しいバージョンを既存のポートにバインドします。</span><span class="sxs-lookup"><span data-stu-id="c63a1-145">Bind the new version of the orchestration to existing ports.</span></span>  
  
2.  <span data-ttu-id="c63a1-146">以前のバージョンのオーケストレーションを参加解除 (ただし停止しません)。</span><span class="sxs-lookup"><span data-stu-id="c63a1-146">Unenlist (but do not stop) the old orchestration version.</span></span>  
  
3.  <span data-ttu-id="c63a1-147">参加させ、新しいオーケストレーションのバージョンを開始します。</span><span class="sxs-lookup"><span data-stu-id="c63a1-147">Enlist and start the new orchestration version.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="c63a1-148">手順 2 および 3 の 1 つのトランザクションを実行するのにスクリプトを使用するには、メッセージが手動クリックして間のサブスクリプションを欠落していないができるようにします。</span><span class="sxs-lookup"><span data-stu-id="c63a1-148">You can use a script to do steps 2 and 3 in one transaction, so that messages will not be missing subscriptions between manual clicking.</span></span>