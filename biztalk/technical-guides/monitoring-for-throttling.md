---
title: 調整の監視 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 3d1d4c72-6942-4572-b27f-c58d37c94062
caps.latest.revision: 2
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 1dfbc767b5a5bc8f26625d0b5339221d8112d545
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/27/2018
ms.locfileid: "36997987"
---
# <a name="monitoring-for-throttling"></a><span data-ttu-id="6cfc2-102">調整の監視</span><span class="sxs-lookup"><span data-stu-id="6cfc2-102">Monitoring for Throttling</span></span>
<span data-ttu-id="6cfc2-103">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理パックの制限の状態を示すパフォーマンス カウンターを監視する[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="6cfc2-103">The [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] management pack monitors performance counters that indicate the throttling state of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="6cfc2-104">調整を理解するためにいくつかの重要な要因は、以下に示します。</span><span class="sxs-lookup"><span data-stu-id="6cfc2-104">Some key factors to understand about throttling are listed below.</span></span>  
  
- <span data-ttu-id="6cfc2-105">割合に基づく制限は 1 つのホストとメッセージの数に基づいてメッセージの送信と受信します。</span><span class="sxs-lookup"><span data-stu-id="6cfc2-105">Rate-based throttling is per host and is based on the rate of messages inbound vs. outbound messages.</span></span>  
  
- <span data-ttu-id="6cfc2-106">配信の制限 (**MsgBox では、送信ポートまたはオーケストレーション]-> [**)、受信レートは、メッセージ ボックスからメッセージが受信される数。</span><span class="sxs-lookup"><span data-stu-id="6cfc2-106">For delivery throttling (**MsgBox -> Send Port or Orchestration**), inbound rate is the rate at which messages are received from the message box.</span></span> <span data-ttu-id="6cfc2-107">送信レートとは、メッセージを正常にアダプター経由で配信される速度です。</span><span class="sxs-lookup"><span data-stu-id="6cfc2-107">Outbound rate is the rate at which messages are successfully delivered via the adapters.</span></span>  
  
- <span data-ttu-id="6cfc2-108">公開の制限 (**受信アダプター**または**オーケストレーション MsgBox]-> [)、** 受信レートは、アダプターから受信されるメッセージ数とレート メッセージは送信レートは、MsgBox に接続します。</span><span class="sxs-lookup"><span data-stu-id="6cfc2-108">For publishing throttling (**Receive adapters** or **Orchestrations -> MsgBox),** inbound rate is the rate at which messages are received from the adapters and outbound rate is the rate messages are plugged into the MsgBox.</span></span>  
  
- <span data-ttu-id="6cfc2-109">データベースの合計メッセージ以外のホスト間では、制限メカニズムは存在しません。</span><span class="sxs-lookup"><span data-stu-id="6cfc2-109">No throttling mechanism exists between hosts other than total messages in the database.</span></span>  
  
  <span data-ttu-id="6cfc2-110">追加の背景情報については、トピックを参照してください[どのように BizTalk Server 実装ホスト Throttling](http://go.microsoft.com/fwlink/?LinkID=155286) (<http://go.microsoft.com/fwlink/?LinkID=155286>) で[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ヘルプします。</span><span class="sxs-lookup"><span data-stu-id="6cfc2-110">For additional background information, refer to the topic [How BizTalk Server Implements Host Throttling](http://go.microsoft.com/fwlink/?LinkID=155286) (<http://go.microsoft.com/fwlink/?LinkID=155286>) in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Help.</span></span>  
  
  [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="6cfc2-111"> には、自己制限が組み込まれているため、さまざまなパラメーターに基づいてサーバーのオーバーロードを回避できます。</span><span class="sxs-lookup"><span data-stu-id="6cfc2-111"> incorporates self-throttling, which helps to prevent overloading of the server based on various parameters.</span></span> <span data-ttu-id="6cfc2-112">制限の発生原因となるようなオーバーロードが一時的なものであれば、運用上の問題としてそれほど大きくはありません。</span><span class="sxs-lookup"><span data-stu-id="6cfc2-112">A temporary overload that causes throttling to occur is not an operationally significant event.</span></span> <span data-ttu-id="6cfc2-113">ただし、永続的な制限が発生するようでは、安定した環境とはいえません。永続的な制限はインフラストラクチャ レベルの基本的な問題を示している可能性があります。</span><span class="sxs-lookup"><span data-stu-id="6cfc2-113">Persistent throttling, however, is not expected in a stable environment and could indicate underlying problems at the infrastructure level.</span></span> <span data-ttu-id="6cfc2-114">管理パックでは、このような永続的な制限の条件でパフォーマンスしきい値ルールのプロアクティブな監視を提供します。</span><span class="sxs-lookup"><span data-stu-id="6cfc2-114">The management pack provides proactive monitoring of such persistent throttling conditions with performance threshold rules.</span></span>  
  
  <span data-ttu-id="6cfc2-115">ルールは監視の 4 つの使用率/パフォーマンス追跡では、次の表に記載されている 4 つの異なる条件による制限の期間を拡張します。</span><span class="sxs-lookup"><span data-stu-id="6cfc2-115">Four utilization/performance tracking rules monitor for extended periods of throttling caused by four different conditions as indicated in the following table.</span></span>  
  
|                                                     <span data-ttu-id="6cfc2-116">条件</span><span class="sxs-lookup"><span data-stu-id="6cfc2-116">Condition</span></span>                                                     |                                        <span data-ttu-id="6cfc2-117">Rule</span><span class="sxs-lookup"><span data-stu-id="6cfc2-117">Rule</span></span>                                         |
|-------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------|
|     [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="6cfc2-118"> サービス プロセス メモリ</span><span class="sxs-lookup"><span data-stu-id="6cfc2-118"> service process memory</span></span>     |     <span data-ttu-id="6cfc2-119">かなりの時間の高いプロセス メモリの警告: BizTalk Throttled</span><span class="sxs-lookup"><span data-stu-id="6cfc2-119">Warning: BizTalk Throttled on High Process Memory for a significant period</span></span>      |
|                                        <span data-ttu-id="6cfc2-120">処理されるメッセージの数</span><span class="sxs-lookup"><span data-stu-id="6cfc2-120">Number of messages being processed</span></span>                                         | <span data-ttu-id="6cfc2-121">警告: BizTalk Throttled で高い Inprocess メッセージ数が長く</span><span class="sxs-lookup"><span data-stu-id="6cfc2-121">Warning: BizTalk Throttled on High Inprocess Message Count for a significant period</span></span> |
| <span data-ttu-id="6cfc2-122">スレッドの数、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]プロセス</span><span class="sxs-lookup"><span data-stu-id="6cfc2-122">Number of threads in a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] process</span></span> |      <span data-ttu-id="6cfc2-123">かなりの時間、高のスレッド数の警告: BizTalk Throttled</span><span class="sxs-lookup"><span data-stu-id="6cfc2-123">Warning: BizTalk Throttled on High Thread Count for a significant period</span></span>       |
|  <span data-ttu-id="6cfc2-124">サイズ、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]データベースのキュー</span><span class="sxs-lookup"><span data-stu-id="6cfc2-124">Size of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] database queues</span></span>   |      <span data-ttu-id="6cfc2-125">High Database Size for かなりの時間の警告: BizTalk Throttled</span><span class="sxs-lookup"><span data-stu-id="6cfc2-125">Warning: BizTalk Throttled on High Database Size for a significant period</span></span>      |
  
 <span data-ttu-id="6cfc2-126">これらのしきい値ルールは、制限状態インジケーター パフォーマンス カウンターに基づくデータ プロバイダーを使用します。</span><span class="sxs-lookup"><span data-stu-id="6cfc2-126">These threshold rules use data providers based on throttling state indicator performance counters.</span></span> <span data-ttu-id="6cfc2-127">これらのパフォーマンス カウンターの詳細については、セクションを参照してください[パフォーマンス カウンター](http://go.microsoft.com/fwlink/?LinkId=157269) (<http://go.microsoft.com/fwlink/?LinkId=157269>) で[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ヘルプします。</span><span class="sxs-lookup"><span data-stu-id="6cfc2-127">For more information about these performance counters, refer to the section [Performance Counters](http://go.microsoft.com/fwlink/?LinkId=157269) (<http://go.microsoft.com/fwlink/?LinkId=157269>) in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Help.</span></span>  
  
 <span data-ttu-id="6cfc2-128">サンプル数の平均が特定のしきい値を超えた場合にアラートを生成するこれらの規則が構成されている (既定値は 30 になります)。</span><span class="sxs-lookup"><span data-stu-id="6cfc2-128">These rules are configured to raise an alert if the average of over a certain number of samples crosses a particular threshold (default is 30).</span></span> <span data-ttu-id="6cfc2-129">たとえば、"警告: BizTalk Throttled on High Database Size for 長く"すべての制限の状態を監視するルールは、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]特定のコンピューターでプロセス。</span><span class="sxs-lookup"><span data-stu-id="6cfc2-129">For example, “Warning: BizTalk Throttled on High Database Size for a significant period” is a rule monitoring the throttling state of all [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] processes in a given computer.</span></span> <span data-ttu-id="6cfc2-130">このルールで制限状態インジケーター パフォーマンス カウンター「BizTalk:Message Agent-High データベースのサイズ」に基づくデータ プロバイダー</span><span class="sxs-lookup"><span data-stu-id="6cfc2-130">This rule uses a data provider based on the throttling state indicator performance counter “BizTalk:Message Agent-High database size.”</span></span> <span data-ttu-id="6cfc2-131">このパフォーマンス カウンター値が 1 の場合、関連付けられたプロセスは、データベース サイズが大きいという理由で制限されます。</span><span class="sxs-lookup"><span data-stu-id="6cfc2-131">If this performance counter value is 1, then the associated process is throttling because of high database size.</span></span>  
  
 <span data-ttu-id="6cfc2-132">30 のサンプルの平均値を取得して、サンプルの平均値が 0.6 を超えた場合にアラートを発生させる前のルールが構成されます。</span><span class="sxs-lookup"><span data-stu-id="6cfc2-132">The preceding rule is configured to take an average of 30 samples and raise an alert if the average of the samples is more than 0.6.</span></span> <span data-ttu-id="6cfc2-133">各サンプルは 1 分間隔で実行される、ため、過去 30 分以内は 60% の時間、高のデータベースのサイズが原因で、そのコンピューターには少なくとも 1 つまたは複数の BizTalk Server プロセスが制限されたことを意味します。</span><span class="sxs-lookup"><span data-stu-id="6cfc2-133">Since each sample is taken at an interval of one minute, this implies that over the past 30 minutes, at least one or more BizTalk Server processes in that computer were throttling because of high database size, 60 percent of the time.</span></span>  
  
 <span data-ttu-id="6cfc2-134">この方法は、アプリケーションのシナリオによっては適合しない場合があります。</span><span class="sxs-lookup"><span data-stu-id="6cfc2-134">This heuristic may not suit your particular application scenario.</span></span> <span data-ttu-id="6cfc2-135">前に説明したように、環境内で従来の動作に基づき、する必要がありますを構成するこれらの規則が正しい値でいずれかで。</span><span class="sxs-lookup"><span data-stu-id="6cfc2-135">Based on the historical behavior in your environment as described before, you should configure these rules with the correct values by either:</span></span>  
  
-   <span data-ttu-id="6cfc2-136">サンプルを調整します。</span><span class="sxs-lookup"><span data-stu-id="6cfc2-136">Adjusting the samples.</span></span>  
  
-   <span data-ttu-id="6cfc2-137">しきい値の値を調整します。</span><span class="sxs-lookup"><span data-stu-id="6cfc2-137">Adjusting the threshold value.</span></span>  
  
-   <span data-ttu-id="6cfc2-138">必要に応じて、プロバイダーのサンプリングの間隔を変更します。</span><span class="sxs-lookup"><span data-stu-id="6cfc2-138">If necessary, modifying the interval of sampling for the provider.</span></span>