---
title: "BizTalk Server Databases2 をクラスタ リング |Microsoft ドキュメント"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 1b68bc3f-c0c4-4050-8ca3-df6dd1927637
caps.latest.revision: "3"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 4c84f8f6ef26c567a1bbac44df078f2df58ca9da
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/20/2017
---
# <a name="clustering-the-biztalk-server-databases"></a><span data-ttu-id="f1546-102">BizTalk Server データベースのクラスター化</span><span class="sxs-lookup"><span data-stu-id="f1546-102">Clustering the BizTalk Server Databases</span></span>
<span data-ttu-id="f1546-103">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] データベースに障害が発生すると、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 環境は正常に機能することができなくなります。</span><span class="sxs-lookup"><span data-stu-id="f1546-103">If the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases become unavailable, the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment will not function correctly.</span></span> <span data-ttu-id="f1546-104">高可用性を実現するには、Microsoft を作成することができます[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]のクラスター、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]データベース、次の図に示すようにします。</span><span class="sxs-lookup"><span data-stu-id="f1546-104">To provide high availability, you can create a Microsoft [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] cluster for the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases, as shown in the following figure.</span></span>  
  
 <span data-ttu-id="f1546-105">![BizTalk Server のデータベース層](../core/media/tdi-highava-sqlcluster.gif "TDI_HighAva_SQLCluster")</span><span class="sxs-lookup"><span data-stu-id="f1546-105">![BizTalk Server Database Tier](../core/media/tdi-highava-sqlcluster.gif "TDI_HighAva_SQLCluster")</span></span>  
  
 <span data-ttu-id="f1546-106">高可用性ソリューションを作成する、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]データベース、する必要がありますには、少なくとも 2 台のコンピューターを実行している[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]とクラスターの共有ディスク アレイ。</span><span class="sxs-lookup"><span data-stu-id="f1546-106">To create a highly available solution for the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases, you must have at least two computers that are running [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] and a shared disk array in the cluster.</span></span>  
  
## <a name="clustering-options"></a><span data-ttu-id="f1546-107">クラスタ リングのオプション</span><span class="sxs-lookup"><span data-stu-id="f1546-107">Clustering Options</span></span>  
 <span data-ttu-id="f1546-108">最適なクラスター構成の決定、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ビジネス ニーズに合わせてデータベース。</span><span class="sxs-lookup"><span data-stu-id="f1546-108">Determine the best cluster configuration for the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases for your business needs.</span></span> <span data-ttu-id="f1546-109">オプションの一覧を次に示します。</span><span class="sxs-lookup"><span data-stu-id="f1546-109">Here is a list of the options:</span></span>  
  
-   <span data-ttu-id="f1546-110">**アクティブ/パッシブ**です。</span><span class="sxs-lookup"><span data-stu-id="f1546-110">**Active/passive**.</span></span> <span data-ttu-id="f1546-111">高可用性、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]アクティブ/パッシブのサーバー クラスター構成で構成されている 2 つ以上のデータベース コンピューターのデータベースが通常で構成されます。</span><span class="sxs-lookup"><span data-stu-id="f1546-111">High availability for the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases typically consists of two or more database computers configured in an active/passive server cluster configuration.</span></span> <span data-ttu-id="f1546-112">これらのコンピューターに共通のディスク リソースを共有する (など、RAID 1 + 0 SCSI ディスク アレイやストレージ エリア ネットワーク) Windows クラスタ リングを使用してバックアップの冗長性とフォールト トレランスを提供します。</span><span class="sxs-lookup"><span data-stu-id="f1546-112">These computers share a common disk resource (such as a RAID 1+0 SCSI disk array or storage area network) and use Windows Clustering to provide backup redundancy and fault tolerance.</span></span>  
  
-   <span data-ttu-id="f1546-113">**アクティブ/アクティブ**です。</span><span class="sxs-lookup"><span data-stu-id="f1546-113">**Active/active**.</span></span> <span data-ttu-id="f1546-114">Windows クラスタ リングと[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]に実行できるように[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]"active"、および実行中の 1 つまたは複数のクラスターの各ノードのあるアクティブ/アクティブ モードで[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]インスタンス。</span><span class="sxs-lookup"><span data-stu-id="f1546-114">Windows Clustering and [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] allow you to run [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] in Active/Active mode where each node of the cluster is “active” and running one or more [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instances.</span></span> <span data-ttu-id="f1546-115">たとえば、このようにすると 1 つのノードとその他のすべてのメッセージ ボックス データベースに[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]他のノード上のデータベースです。</span><span class="sxs-lookup"><span data-stu-id="f1546-115">For example, this would allow you to have the MessageBox database on one node and all other [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases on the other node.</span></span> <span data-ttu-id="f1546-116">これにより、クラスターのハードウェアの使用状況が、アクティブ/アクティブを最大限に高まります[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]構成は、注意を払って使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f1546-116">This allows you to maximize cluster hardware usage, but an active/active [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] configuration should be used with care.</span></span>  
  
     <span data-ttu-id="f1546-117">各ノードに同時に負荷を処理できるすべての[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]をインスタンス化中に、[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]クラスター ノードのフェールオーバー シナリオしますか?</span><span class="sxs-lookup"><span data-stu-id="f1546-117">Can each node simultaneously handle the load of all [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instances during a [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] cluster node failover scenario?</span></span> <span data-ttu-id="f1546-118">十分な CPU リソースがあるか。</span><span class="sxs-lookup"><span data-stu-id="f1546-118">Are there enough CPU resources?</span></span> <span data-ttu-id="f1546-119">十分なメモリはありますか。</span><span class="sxs-lookup"><span data-stu-id="f1546-119">Is there sufficient memory?</span></span> <span data-ttu-id="f1546-120">ネットワーク帯域幅について説明します。</span><span class="sxs-lookup"><span data-stu-id="f1546-120">What about network bandwidth?</span></span> <span data-ttu-id="f1546-121">ディスク I/O の競合ですか。</span><span class="sxs-lookup"><span data-stu-id="f1546-121">How about disk I/O contention?</span></span>  
  
     <span data-ttu-id="f1546-122">これらは、アクティブ/アクティブの場合を判断するために回答する必要がある質問の一部[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]クラスターが、BizTalk アプリケーションに適しています。</span><span class="sxs-lookup"><span data-stu-id="f1546-122">These are just some of the questions that need to be answered in order to determine if an active/active [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] cluster is right for your BizTalk applications.</span></span> <span data-ttu-id="f1546-123">1 つのノードは、すべてを処理できないと判断されたかどうかは[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]インスタンス、フェールオーバー シナリオでは、代わりには、アクティブ/アクティブ/パッシブ クラスタ リングを使用します。</span><span class="sxs-lookup"><span data-stu-id="f1546-123">If it is determined that one node cannot handle all [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instances in a failover scenario, an alternative is to use active/active/passive clustering.</span></span>  
  
-   <span data-ttu-id="f1546-124">**アクティブ/アクティブ/パッシブ**です。</span><span class="sxs-lookup"><span data-stu-id="f1546-124">**Active/active/passive**.</span></span> <span data-ttu-id="f1546-125">実行時の環境では、BizTalk 管理データベース、メッセージ ボックス データベース、追跡分析サービス データベース、BAM 分析データベース、BAM スター スキーマ データベース、BAM プライマリ インポート データベース、および BAM アーカイブ データベースへの書き込み処理が行われます。</span><span class="sxs-lookup"><span data-stu-id="f1546-125">The run-time processes write to the BizTalk Management database, MessageBox databases, Tracking Analysis Services database, BAM Analysis database, BAM Star Schema database, BAM Primary Import database, and BAM Archive database.</span></span> <span data-ttu-id="f1546-126">したがって、これらのデータベースを障害から保護することが特に重要となります。当然、どのデータベースをクラスター化するかという判断において、より高い優先順位が付けられることになります。</span><span class="sxs-lookup"><span data-stu-id="f1546-126">Therefore, these databases are especially important if a disaster occurs, and must have greater priority when determining what databases to cluster.</span></span> <span data-ttu-id="f1546-127">その他のデータベースに対する書き込みは、ユーザーまたはツールによってのみ行われます。</span><span class="sxs-lookup"><span data-stu-id="f1546-127">Only users or tools write to the other databases.</span></span> <span data-ttu-id="f1546-128">メッセージ ボックス データベースの場合は、アクティブ/アクティブ/パッシブまたはアクティブ/アクティブ/アクティブ/パッシブ構成で必要なハードウェアを最小限に抑えるをすることもできます。</span><span class="sxs-lookup"><span data-stu-id="f1546-128">For the MessageBox databases, you can consider an active/active/passive or active/active/active/passive configuration to minimize the hardware needed.</span></span>  
  
> [!NOTE]  
>  [!INCLUDE[btsSQLServer2008R2](../includes/btssqlserver2008r2-md.md)]<span data-ttu-id="f1546-129">および[!INCLUDE[btsSQLServer2008](../includes/btssqlserver2008-md.md)]Standard Edition は、2 つのノードのフェールオーバー クラスターをサポートします。</span><span class="sxs-lookup"><span data-stu-id="f1546-129"> and [!INCLUDE[btsSQLServer2008](../includes/btssqlserver2008-md.md)] Standard Edition supports 2-node failover clusters.</span></span> <span data-ttu-id="f1546-130">アクティブ/アクティブ/パッシブ構成を使用するかどうかは[!INCLUDE[btsSQLServer2008R2](../includes/btssqlserver2008r2-md.md)]または[!INCLUDE[btsSQLServer2008](../includes/btssqlserver2008-md.md)]の Enterprise Edition を使用する必要があります[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]です。</span><span class="sxs-lookup"><span data-stu-id="f1546-130">If you decide to use the active/active/passive configuration on [!INCLUDE[btsSQLServer2008R2](../includes/btssqlserver2008r2-md.md)] or [!INCLUDE[btsSQLServer2008](../includes/btssqlserver2008-md.md)], you must use the Enterprise Edition of [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)].</span></span>  
  
## <a name="procedures-for-clustering-the-databases"></a><span data-ttu-id="f1546-131">データベースをクラスター化するための手順</span><span class="sxs-lookup"><span data-stu-id="f1546-131">Procedures for Clustering the Databases</span></span>  
 <span data-ttu-id="f1546-132">クラスタ リングを開始する前に、次の前提条件を満たすかどうかを確認、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]データベース。</span><span class="sxs-lookup"><span data-stu-id="f1546-132">Make sure you meet the following prerequisites before you start clustering the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases.</span></span>  
  
-   <span data-ttu-id="f1546-133">ドメイン グループを作成する場合、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]環境では、グローバル ドメイン アカウントを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f1546-133">When you create the domain groups for your [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment, you must create global domain accounts.</span></span>  
  
-   <span data-ttu-id="f1546-134">構成、[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]クラスターのインストールおよび構成する前に[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]です。</span><span class="sxs-lookup"><span data-stu-id="f1546-134">Configure the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] cluster before you install and configure [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="f1546-135">クラスタ リングの詳細については[!INCLUDE[btsSQLServer2008R2](../includes/btssqlserver2008r2-md.md)]を参照してください[SQL Server 2008 R2 のフェールオーバー クラスタ リングの概要](http://go.microsoft.com/fwlink/?LinkId=156820)(http://go.microsoft.com/fwlink/?LinkId=156820)。</span><span class="sxs-lookup"><span data-stu-id="f1546-135">For more information about clustering [!INCLUDE[btsSQLServer2008R2](../includes/btssqlserver2008r2-md.md)], see [Getting Started with SQL Server 2008 R2 Failover Clustering](http://go.microsoft.com/fwlink/?LinkId=156820) (http://go.microsoft.com/fwlink/?LinkId=156820).</span></span>  
  
-   <span data-ttu-id="f1546-136">さらに、マスター シークレット サーバーをクラスター化する場合は、マスター シークレット サーバーを最初に構成しておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="f1546-136">If you are also clustering the master secret server, configure that server first.</span></span> <span data-ttu-id="f1546-137">エンタープライズ シングル サインオンの高可用性の詳細については、次を参照してください。[マスター シークレット サーバーの高可用性](../technical-guides/high-availability-for-the-master-secret-server.md)です。</span><span class="sxs-lookup"><span data-stu-id="f1546-137">For more information about high availability for Enterprise Single Sign-On, see [High Availability for the Master Secret Server](../technical-guides/high-availability-for-the-master-secret-server.md).</span></span>  
  
#### <a name="to-run-the-biztalk-server-configuration-wizard"></a><span data-ttu-id="f1546-138">BizTalk Server の構成ウィザードを実行するには</span><span class="sxs-lookup"><span data-stu-id="f1546-138">To run the BizTalk Server Configuration Wizard</span></span>  
  
1.  <span data-ttu-id="f1546-139">ランタイム サーバーに [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] をインストールします。</span><span class="sxs-lookup"><span data-stu-id="f1546-139">Install [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] on a runtime server.</span></span>  
  
2.  <span data-ttu-id="f1546-140">起動して、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]構成プログラムです。</span><span class="sxs-lookup"><span data-stu-id="f1546-140">Launch the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Configuration program.</span></span> <span data-ttu-id="f1546-141">をクリックして**開始**、 をポイント**プログラム**、 をポイント**Microsoft [!INCLUDE[btsBizTalkServer2006r3ui](../includes/btsbiztalkserver2006r3ui-md.md)]** 、順にクリック**BizTalk Server 構成**です。</span><span class="sxs-lookup"><span data-stu-id="f1546-141">Click **Start**, point to **Programs**, point to **Microsoft [!INCLUDE[btsBizTalkServer2006r3ui](../includes/btsbiztalkserver2006r3ui-md.md)]**, and then click **BizTalk Server Configuration**.</span></span>  
  
3.  <span data-ttu-id="f1546-142">カスタム構成を適用する」の手順に従います[カスタム Configuration Manager の操作](http://go.microsoft.com/fwlink/?LinkId=156822)(http://go.microsoft.com/fwlink/?LinkId=156822) で[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ヘルプします。</span><span class="sxs-lookup"><span data-stu-id="f1546-142">To apply a custom configuration, follow the steps in [Working with the Custom Configuration Manager](http://go.microsoft.com/fwlink/?LinkId=156822) (http://go.microsoft.com/fwlink/?LinkId=156822) in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Help.</span></span> <span data-ttu-id="f1546-143">BizTalk Server データベースで SQL Server クラスターの名前を入力するには、SQL Server クラスターを指定する、**データベース**構成のダイアログ。</span><span class="sxs-lookup"><span data-stu-id="f1546-143">To specify the SQL Server cluster for the BizTalk Server databases enter the name of the SQL Server cluster in the **Databases** dialog of the configuration.</span></span>  
  
4.  <span data-ttu-id="f1546-144">完了、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]で手順に従って構成[カスタム構成](http://go.microsoft.com/fwlink/?LinkId=156823)(http://go.microsoft.com/fwlink/?LinkId=156823) で[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ヘルプします。</span><span class="sxs-lookup"><span data-stu-id="f1546-144">Complete the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] configuration by following the instructions in [Custom Configuration](http://go.microsoft.com/fwlink/?LinkId=156823) (http://go.microsoft.com/fwlink/?LinkId=156823) in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Help.</span></span>  
  
 <span data-ttu-id="f1546-145">クラスタ リングの詳細については[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]データベースを参照してください[Improving Fault Tolerance in Windows Server 2008 フェールオーバー クラスターまたは Windows Server 2003 サーバー クラスターを使用して BizTalk Server](http://go.microsoft.com/fwlink/?LinkId=156819) (http://go.microsoft.com/fwlink/?LinkId=156819)。</span><span class="sxs-lookup"><span data-stu-id="f1546-145">For more information about clustering [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases, see [Improving Fault Tolerance in BizTalk Server by Using a Windows Server 2008 Failover Cluster or Windows Server 2003 Server Cluster](http://go.microsoft.com/fwlink/?LinkId=156819) (http://go.microsoft.com/fwlink/?LinkId=156819).</span></span>  
  
## <a name="behavior-of-biztalk-host-instances-during-sql-server-failover"></a><span data-ttu-id="f1546-146">SQL Server フェールオーバー時の BizTalk ホスト インスタンスの動作</span><span class="sxs-lookup"><span data-stu-id="f1546-146">Behavior of BizTalk Host Instances During SQL Server Failover</span></span>  
 <span data-ttu-id="f1546-147">SQL Server フェールオーバー時の BizTalk ホスト インスタンスの動作の詳細については、次を参照してください。[動作の BizTalk Server ホスト インスタンスを SQL Server フェールオーバー時](http://go.microsoft.com/fwlink/?LinkId=151287)(http://go.microsoft.com/fwlink/?LinkId=151287)。</span><span class="sxs-lookup"><span data-stu-id="f1546-147">For more information about behavior of BizTalk host instances during SQL Server failover, see [Behavior of BizTalk Server Host Instances during SQL Server Failover](http://go.microsoft.com/fwlink/?LinkId=151287) (http://go.microsoft.com/fwlink/?LinkId=151287).</span></span>  
  
## <a name="using-sql-server-database-mirroring"></a><span data-ttu-id="f1546-148">SQL Server データベース ミラーリングの使用</span><span class="sxs-lookup"><span data-stu-id="f1546-148">Using SQL Server Database Mirroring</span></span>  
 <span data-ttu-id="f1546-149">詳細については、BizTalk Server データベースのクラスタ リングに関する SQL Server データベース ミラーリングを使用して、次を参照してください[使用の SQL Server データベース ミラーリングまたはボリューム シャドウ コピー サービス](http://go.microsoft.com/fwlink/?LinkId=151288)(http://go.microsoft.com/fwlink/?。LinkId = 151288) BizTalk Server ヘルプの「します。</span><span class="sxs-lookup"><span data-stu-id="f1546-149">For more information about using SQL Server database mirroring with respect to BizTalk Server database clustering, see [Use of SQL Server database mirroring or the Volume Shadow Copy service](http://go.microsoft.com/fwlink/?LinkId=151288) (http://go.microsoft.com/fwlink/?LinkId=151288) in BizTalk Server help.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f1546-150">参照</span><span class="sxs-lookup"><span data-stu-id="f1546-150">See Also</span></span>  
 [<span data-ttu-id="f1546-151">BizTalk Server データベースのスケール アウト</span><span class="sxs-lookup"><span data-stu-id="f1546-151">Scaling Out the BizTalk Server Databases</span></span>](../technical-guides/scaling-out-the-biztalk-server-databases.md)