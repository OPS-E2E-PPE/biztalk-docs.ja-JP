---
title: BizTalk Server の一般的な Optimizations2 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 41b452e9-d94c-4bcb-8ef6-e9cea28fc0ab
caps.latest.revision: 6
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 2451661db0e4da8dd801a3e4296b4c4f712ff503
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65392039"
---
# <a name="general-biztalk-server-optimizations"></a><span data-ttu-id="8be36-102">BizTalk Server の一般的な最適化</span><span class="sxs-lookup"><span data-stu-id="8be36-102">General BizTalk Server Optimizations</span></span>
<span data-ttu-id="8be36-103">次の推奨事項は、向上に使用できる[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]パフォーマンス。</span><span class="sxs-lookup"><span data-stu-id="8be36-103">The following recommendations can be used to increase [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] performance.</span></span> <span data-ttu-id="8be36-104">このトピックで示した最適化が後に適用されます[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]をインストールして構成します。</span><span class="sxs-lookup"><span data-stu-id="8be36-104">The optimizations listed in this topic are applied after [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] has been installed and configured.</span></span>  
  
## <a name="create-multiple-biztalk-server-hosts-and-separate-host-instances-by-functionality"></a><span data-ttu-id="8be36-105">機能によって複数の BizTalk Server ホストと別のホスト インスタンスを作成します。</span><span class="sxs-lookup"><span data-stu-id="8be36-105">Create multiple BizTalk Server hosts and separate host instances by functionality</span></span>  
 <span data-ttu-id="8be36-106">送信、受信、処理、および追跡機能の個別のホストを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8be36-106">Separate hosts should be created for sending, receiving, processing, and tracking functionality.</span></span> <span data-ttu-id="8be36-107">複数の BizTalk ホストを作成して、柔軟に、BizTalk グループで、ワークロードを構成するときに、BizTalk グループ内の BizTalk サーバーの間での処理の分散の主要な手段は。</span><span class="sxs-lookup"><span data-stu-id="8be36-107">Creating multiple BizTalk hosts provides flexibility when configuring the workload in your BizTalk group and is the primary means of distributing processing across the BizTalk Servers in a BizTalk group.</span></span> <span data-ttu-id="8be36-108">複数のホストでは、他のホストに影響を与えずに 1 つのホストを停止することもできます。</span><span class="sxs-lookup"><span data-stu-id="8be36-108">Multiple hosts also allow you to stop one host without affecting other hosts.</span></span> <span data-ttu-id="8be36-109">たとえば、停止できるようにメッセージを送信するキュー メッセージ ボックス データベースで発生するメッセージの受信の受信を許可する一方する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="8be36-109">For example, you may want to stop sending messages to let them queue up in the Messagebox database, while still allowing the inbound receiving of messages to occur.</span></span> <span data-ttu-id="8be36-110">機能別のホスト インスタンスを分離することでは、次の利点も用意されています。</span><span class="sxs-lookup"><span data-stu-id="8be36-110">Separating host instances by functionality also provides the following benefits:</span></span>  
  
-   <span data-ttu-id="8be36-111">各ホスト インスタンスでは、.NET スレッド プールでメモリ、ハンドル、スレッドなどのリソースの独自セットがあります。</span><span class="sxs-lookup"><span data-stu-id="8be36-111">Each host instance has its own set of resources such as memory, handles, and threads in the .NET thread pool.</span></span>  
  
-   <span data-ttu-id="8be36-112">複数の BizTalk ホストは、各ホストには、独自の作業キュー テーブル、メッセージ ボックス データベースが割り当てられるために、メッセージ ボックス データベースのホスト キュー テーブルでの競合も軽減されます。</span><span class="sxs-lookup"><span data-stu-id="8be36-112">Multiple BizTalk hosts will also reduce contention on the Messagebox database host queue tables because each host is assigned its own work queue tables in the Messagebox database.</span></span>  
  
-   <span data-ttu-id="8be36-113">調整は、ホスト レベルで BizTalk Server に実装されます。</span><span class="sxs-lookup"><span data-stu-id="8be36-113">Throttling is implemented in BizTalk Server at the host-level.</span></span> <span data-ttu-id="8be36-114">これにより、各ホストの制限は異なる特性を設定することができます。</span><span class="sxs-lookup"><span data-stu-id="8be36-114">This allows you to set different throttling characteristics for each host.</span></span>  
  
-   <span data-ttu-id="8be36-115">ホスト レベルでセキュリティが実装されています。各ホストは、個別の Windows id の下で実行されます。</span><span class="sxs-lookup"><span data-stu-id="8be36-115">Security is implemented at the host-level; each host runs under a discrete Windows identity.</span></span> <span data-ttu-id="8be36-116">これは、ようにすると、たとえば、Host_A のアクセスを許可していないファイル共有にアクセスする他のホストのいずれかの中に FileShare_B を付与します。</span><span class="sxs-lookup"><span data-stu-id="8be36-116">This would allow you, for example, to give Host_A access to FileShare_B, while not allowing any of the other hosts to access the file share.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="8be36-117">追加のホスト インスタンスを作成する利点はありますも潜在的な欠点が多すぎるのホスト インスタンスが作成された場合です。</span><span class="sxs-lookup"><span data-stu-id="8be36-117">While there are benefits to creating additional host instances, there are also potential drawbacks if too many host instances are created.</span></span> <span data-ttu-id="8be36-118">各ホスト インスタンスは、メッセージ ボックス データベースに対して追加の負荷を生成およびコンピューターのリソース (CPU、メモリ、スレッド) などを利用する Windows サービス (BTSNTSvc.exe) です。</span><span class="sxs-lookup"><span data-stu-id="8be36-118">Each host instance is a Windows service (BTSNTSvc.exe), which generates additional load against the MessageBox database and consumes computer resources (such as CPU, memory, threads).</span></span>  
  
 <span data-ttu-id="8be36-119">BizTalk Server ホストのプロパティを変更する方法の詳細については、「どのようにするホスト プロパティの変更」、BizTalk Server ヘルプでを参照してください。 [ http://go.microsoft.com/fwlink/?LinkId=101588](http://go.microsoft.com/fwlink/?LinkId=101588)します。</span><span class="sxs-lookup"><span data-stu-id="8be36-119">For more information about modifying BizTalk Server Host properties, see "How to Modify Host Properties" in the BizTalk Server help at [http://go.microsoft.com/fwlink/?LinkId=101588](http://go.microsoft.com/fwlink/?LinkId=101588).</span></span>  
  
## <a name="configure-a-dedicated-tracking-host"></a><span data-ttu-id="8be36-120">専用の追跡ホストを構成します。</span><span class="sxs-lookup"><span data-stu-id="8be36-120">Configure a dedicated tracking host</span></span>  
 <span data-ttu-id="8be36-121">メインのオーケストレーションとメッセージング エンジンは実際には移動メッセージ、BizTalk 追跡または BAM データベースに直接実行しているビジネス プロセスの主な仕事からこれらのエンジンをそらすこれは、ために、スループットを BizTalk Server が最適化されています。</span><span class="sxs-lookup"><span data-stu-id="8be36-121">BizTalk Server is optimized for throughput, so the main orchestration and messaging engines do not actually move messages directly to the BizTalk Tracking or BAM databases, as this would divert these engines from their primary job of executing business processes.</span></span> <span data-ttu-id="8be36-122">代わりに、BizTalk Server は、メッセージ、メッセージ ボックス データベースに残りますされ、BizTalk 追跡データベースへの移行を必要とするとしてマークを付けます。</span><span class="sxs-lookup"><span data-stu-id="8be36-122">Instead, BizTalk Server leaves the messages in the MessageBox database and marks them as requiring a move to the BizTalk Tracking database.</span></span> <span data-ttu-id="8be36-123">バック グラウンド プロセス (追跡ホスト) し、BizTalk の追跡と BAM データベースにメッセージを移動します。</span><span class="sxs-lookup"><span data-stu-id="8be36-123">A background process (the tracking host) then moves the messages to the BizTalk Tracking and BAM databases.</span></span> <span data-ttu-id="8be36-124">追跡がリソースの処理を要する操作であるため、個別のホストを作成してください専用の追跡、追跡メッセージの処理を専用のホスト上に影響を最小限に抑えます。</span><span class="sxs-lookup"><span data-stu-id="8be36-124">Because tracking is a resource intensive operation, a separate host should be created that is dedicated to tracking, thereby minimizing the impact that tracking has on hosts dedicated to message processing.</span></span>  
  
 <span data-ttu-id="8be36-125">専用の追跡ホストを使用してでは BizTalk Server 追跡を妨げることがなく他の BizTalk ホストを停止することもできます。</span><span class="sxs-lookup"><span data-stu-id="8be36-125">Using a dedicated tracking host also allows you to stop other BizTalk hosts without interfering with BizTalk Server tracking.</span></span> <span data-ttu-id="8be36-126">追跡メッセージ ボックス データベースからデータの移動は、正常な BizTalk Server システムにとって重要です。</span><span class="sxs-lookup"><span data-stu-id="8be36-126">The movement of tracking data out of the Messagebox database is critical for a healthy BizTalk Server system.</span></span> <span data-ttu-id="8be36-127">BizTalk グループ内の追跡データの移動を行う BizTalk ホストが停止している場合、データのデコードに追跡サービスは実行されません。</span><span class="sxs-lookup"><span data-stu-id="8be36-127">If the BizTalk Host responsible for moving tracking data in the BizTalk group is stopped, the Tracking Data Decode service will not run.</span></span> <span data-ttu-id="8be36-128">この効果は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="8be36-128">The impact of this is as follows:</span></span>  
  
- <span data-ttu-id="8be36-129">HAT 追跡データは、BizTalk 追跡データベースにメッセージ ボックス データベースから移動されません。</span><span class="sxs-lookup"><span data-stu-id="8be36-129">HAT tracking data will not be moved from the Messagebox database to the BizTalk Tracking database.</span></span>  
  
- <span data-ttu-id="8be36-130">BAM の追跡データは、BAM プライマリ インポート データベースにメッセージ ボックス データベースから移動されません。</span><span class="sxs-lookup"><span data-stu-id="8be36-130">BAM tracking data will not be moved from the Messagebox database to the BAM Primary Import database.</span></span>  
  
- <span data-ttu-id="8be36-131">データが移動されていないために、メッセージ ボックス データベースから削除できません。</span><span class="sxs-lookup"><span data-stu-id="8be36-131">Because data is not moved, it cannot be deleted from the Messagebox database.</span></span>  
  
- <span data-ttu-id="8be36-132">データのデコードに追跡サービスを停止すると、追跡インターセプタはまだ起動追跡データを書き込むメッセージ ボックス データベースにします。</span><span class="sxs-lookup"><span data-stu-id="8be36-132">When the Tracking Data Decode service is stopped, tracking interceptors will still fire and write tracking data to the Messagebox database.</span></span> <span data-ttu-id="8be36-133">データが移動されていない場合、メッセージ ボックス データベース、いっぱいになる時間の経過と共にパフォーマンスに影響できるようになります。</span><span class="sxs-lookup"><span data-stu-id="8be36-133">If the data is not moved, this will cause the Messagebox database to become bloated, which will impact performance over time.</span></span> <span data-ttu-id="8be36-134">場合でも、カスタム プロパティは追跡されませんまたは BAM プロファイルが設定されていない、既定ではいくつかのデータが追跡 (など、パイプラインは、受信/送信イベントおよびオーケストレーションのイベント)。</span><span class="sxs-lookup"><span data-stu-id="8be36-134">Even if custom properties are not tracked or BAM profiles are not set up, by default some data is tracked (such as pipeline receive / send events and orchestration events).</span></span> <span data-ttu-id="8be36-135">データのデコードに追跡サービスを実行しない場合は、すべての追跡インターセプターをデータベースにデータ保存しないようにオフにします。</span><span class="sxs-lookup"><span data-stu-id="8be36-135">If you do not want to run the Tracking Data Decode service, turn off all tracking so that no interceptors save data to the database.</span></span> <span data-ttu-id="8be36-136">グローバル追跡を無効にするには、"有効にするオフ グローバルの追跡方法、BizTalk Server でのヘルプをご覧ください。 [ http://go.microsoft.com/fwlink/?LinkId=101589](http://go.microsoft.com/fwlink/?LinkId=101589)します。</span><span class="sxs-lookup"><span data-stu-id="8be36-136">To disable global tracking, see "How to Turn Off Global Tracking" in the BizTalk Server help at [http://go.microsoft.com/fwlink/?LinkId=101589](http://go.microsoft.com/fwlink/?LinkId=101589).</span></span> <span data-ttu-id="8be36-137">BizTalk Server 管理コンソールを使用して、選択的に追跡イベントを無効にします。</span><span class="sxs-lookup"><span data-stu-id="8be36-137">Use the BizTalk Server Administration console to selectively disable tracking events.</span></span>  
  
  <span data-ttu-id="8be36-138">追跡ホストは、BizTalk サーバー (1 つが失敗した場合の冗長性) を実行するには少なくとも 2 台のコンピューターで実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8be36-138">The tracking host should be run on at least two computers running BizTalk Server (for redundancy in case one fails).</span></span> <span data-ttu-id="8be36-139">最適なパフォーマンスを少なくとも 1 つの追跡がある必要がありますメッセージ ボックス データベースごとにホストのインスタンス。</span><span class="sxs-lookup"><span data-stu-id="8be36-139">For optimal performance, you should have at least one tracking host instance per Messagebox database.</span></span> <span data-ttu-id="8be36-140">追跡ホスト インスタンスの実際の数があります (N + 1)、N = メッセージ ボックス データベースの数。</span><span class="sxs-lookup"><span data-stu-id="8be36-140">The actual number of tracking host instances should be (N + 1), where N = the number of Messagebox databases.</span></span> <span data-ttu-id="8be36-141">「+ 1」の追跡をホストするコンピューターのいずれかが失敗した場合、冗長性のためです。</span><span class="sxs-lookup"><span data-stu-id="8be36-141">The "+ 1" is for redundancy, in case one of the computers hosting tracking fails.</span></span>  
  
  <span data-ttu-id="8be36-142">追跡ホスト インスタンスが特定のメッセージ ボックス データベースの追跡データを移動しますが、されません 1 つ以上の追跡ホスト インスタンスの特定のメッセージ ボックス データベースのデータを移動します。</span><span class="sxs-lookup"><span data-stu-id="8be36-142">A tracking host instance moves tracking data for specific Messagebox databases, but there will never be more than one tracking host instance moving data for a specific Messagebox database.</span></span> <span data-ttu-id="8be36-143">たとえば、3 つのメッセージ ボックス データベースとホスト インスタンスを追跡するだけの 2 つある場合は、そのホスト インスタンスの 1 つ必要があります、メッセージ ボックス データベースの 2 つのデータを移動します。</span><span class="sxs-lookup"><span data-stu-id="8be36-143">For example, if you have three Messagebox databases, and only two tracking host instances, then one of the host instances needs to move data for two of the Messagebox databases.</span></span> <span data-ttu-id="8be36-144">追跡ホスト インスタンスを追跡する 3 つ目の追加は分散作業を BizTalk Server を実行している別のコンピューターをホストします。</span><span class="sxs-lookup"><span data-stu-id="8be36-144">Adding a third tracking host instance distributes the tracking host work to another computer running BizTalk Server.</span></span> <span data-ttu-id="8be36-145">このシナリオで、4 つ目のホスト インスタンスの追跡は、複数の追跡ホストを配布できませんを追加するが提供されます余分なフォールト トレランスのホスト インスタンスを追跡します。</span><span class="sxs-lookup"><span data-stu-id="8be36-145">In this scenario, adding a fourth tracking host instance would not distribute any more tracking host work, but would provide an extra tracking host instance for fault tolerance.</span></span>  
  
  <span data-ttu-id="8be36-146">BAM イベント バス サービスの詳細については、BizTalk Server ヘルプの次のトピックを参照してください。</span><span class="sxs-lookup"><span data-stu-id="8be36-146">For more information about the BAM Event Bus service, see the following topics in the BizTalk Server help:</span></span>  
  
- <span data-ttu-id="8be36-147">「に、BAM イベント バス サービスを管理」 [ http://go.microsoft.com/fwlink/?LinkId=101590](http://go.microsoft.com/fwlink/?LinkId=101590)します。</span><span class="sxs-lookup"><span data-stu-id="8be36-147">"Managing the BAM Event Bus Service" at [http://go.microsoft.com/fwlink/?LinkId=101590](http://go.microsoft.com/fwlink/?LinkId=101590).</span></span>  
  
- <span data-ttu-id="8be36-148">「BAM イベント バス サービスのインスタンスを作成する」 [ http://go.microsoft.com/fwlink/?LinkId=101591](http://go.microsoft.com/fwlink/?LinkId=101591)します。</span><span class="sxs-lookup"><span data-stu-id="8be36-148">"Creating Instances of the BAM Event Bus Service" at [http://go.microsoft.com/fwlink/?LinkId=101591](http://go.microsoft.com/fwlink/?LinkId=101591).</span></span>  
  
## <a name="manage-aspnet-thread-usage-or-concurrently-executing-requests-for-web-applications-that-host-orchestrations-published-as-a-web-or-wcf-service"></a><span data-ttu-id="8be36-149">ASP.NET スレッドの使用状況を管理またはホストのオーケストレーションを Web または WCF サービスとして公開されたことを Web アプリケーションの要求に同時に実行します。</span><span class="sxs-lookup"><span data-stu-id="8be36-149">Manage ASP.NET thread usage or concurrently executing requests for Web applications that host orchestrations published as a Web or WCF Service</span></span>  
 <span data-ttu-id="8be36-150">Web サービスを変更する必要がありますに公開された worker と I/O スレッド (IIS 6.0 および IIS 7.0 でクラシック モード)、または同時に実行される、オーケストレーションをホストする ASP.NET Web アプリケーションの要求 (IIS 7.0 統合モード) の数の数、次の条件:</span><span class="sxs-lookup"><span data-stu-id="8be36-150">The number of worker and I/O threads (IIS 6.0 and IIS 7.0 in classic mode) or the number of concurrently executing requests (IIS 7.0 integrated mode) for an ASP.NET Web application that hosts an orchestration published as a Web service should be modified under the following conditions:</span></span>  
  
-   <span data-ttu-id="8be36-151">CPU 使用率は、ホストする Web サーバー上のボトルネックではありません。</span><span class="sxs-lookup"><span data-stu-id="8be36-151">CPU utilization is not a bottleneck on the hosting Web server.</span></span>  
  
-   <span data-ttu-id="8be36-152">値、 **ASP.NET アプリ v2.0.50727\Request Wait Time**または**ASP.NET アプリ v2.0.50727\Request 実行時間**パフォーマンス カウンターが著しく大きいです。</span><span class="sxs-lookup"><span data-stu-id="8be36-152">The value of the **ASP.NET Apps v2.0.50727\Request Wait Time** or **ASP.NET Apps v2.0.50727\Request Execution Time** performance counters is unusually high.</span></span>  
  
-   <span data-ttu-id="8be36-153">Web アプリケーションをホストするコンピューターのアプリケーション ログに生成された次のようなエラー:</span><span class="sxs-lookup"><span data-stu-id="8be36-153">An error similar to the following generated in the Application log of the computer that hosts the Web application:</span></span>  
  
    ```  
    Event Type: Warning  
    Event Source: W3SVC Event Category: None  
    Event ID: 1013  
    Date: 6/4/2009  
    Time: 1:03:47 PM  
    User: N/A  
    Computer: <ComputerName>  
    Description: A process serving application pool 'DefaultAppPool' exceeded time limits during shut down. The process id was '<xxxx>'  
    ```  
  
### <a name="manage-aspnet-thread-usage-for-web-applications-that-host-orchestrations-on-iis-60-and-on-iis-70-running-in-classic-mode"></a><span data-ttu-id="8be36-154">クラシック モードで実行されている IIS 7.0 と IIS 6.0 でオーケストレーションをホストする Web アプリケーションの ASP.NET スレッドの使用状況を管理します。</span><span class="sxs-lookup"><span data-stu-id="8be36-154">Manage ASP.NET thread usage for Web applications that host orchestrations on IIS 6.0 and on IIS 7.0 running in Classic mode</span></span>  
 <span data-ttu-id="8be36-155">ときに、 **autoConfig** IIS 6.0 サーバーまたはクラシック モードで実行している IIS 7.0 サーバーの machine.config ファイル内の値に設定されて**true**、ASP.NET 2.0 は、ワーカー スレッドの数を管理し、I/O スレッドが関連付けられている IIS ワーカー プロセスに割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="8be36-155">When the **autoConfig** value in the machine.config file of an IIS 6.0 server or IIS 7.0 server running in Classic mode is set to **true**, ASP.NET 2.0 manages the number of worker threads and I/O threads that are allocated to any associated IIS worker processes:</span></span>  
  
```  
<processModel autoConfig="true" />  
```  
  
 <span data-ttu-id="8be36-156">ワーカー スレッドと ASP.NET 2.0 Web アプリケーションの I/O スレッドの数を手動で変更するには、関連付けられている machine.config ファイルを開くし、の新しい値を入力し、 **maxWorkerThreads**と**maxIoThreads**パラメーター。</span><span class="sxs-lookup"><span data-stu-id="8be36-156">To manually modify the number of worker and I/O threads for an ASP.NET 2.0 Web application, open the associated machine.config file, and then enter new values for the **maxWorkerThreads** and **maxIoThreads** parameters:</span></span>  
  
```  
<!-- <processModel autoConfig="true" /> -->  
    <processModel maxWorkerThreads="200" maxIoThreads="200" />  
```  
  
> [!NOTE]  
>  <span data-ttu-id="8be36-157">これらの値は、ガイダンスのためだけです。これらのパラメーターへの変更をテストすることを確認します。</span><span class="sxs-lookup"><span data-stu-id="8be36-157">These values are for guidance only; ensure you test changes to these parameters.</span></span>  
  
 <span data-ttu-id="8be36-158">ASP.NET 2.0 Web アプリケーションの machine.config ファイル内のパラメーターをチューニングの詳細については、マイクロソフト サポート技術情報の記事を参照してください[821268"の競合、パフォーマンスの低下、および ASP.NET から Web サービス要求を行うときにデッドロック。アプリケーション"](http://go.microsoft.com/fwlink/?LinkID=66483) (http://go.microsoft.com/fwlink/?LinkID=66483)します。</span><span class="sxs-lookup"><span data-stu-id="8be36-158">For more information about tuning parameters in the machine.config file for an ASP.NET 2.0 Web application, see Microsoft Knowledge Base article  [821268 “Contention, poor performance, and deadlocks when you make Web service requests from ASP.NET applications”](http://go.microsoft.com/fwlink/?LinkID=66483) (http://go.microsoft.com/fwlink/?LinkID=66483).</span></span>  
  
### <a name="manage-the-number-of-concurrently-executing-requests-for-web-applications-that-host-orchestrations-on-iis-70-running-in-integrated-mode"></a><span data-ttu-id="8be36-159">同時に実行される統合モードで実行されている IIS 7.0 でオーケストレーションをホストする Web アプリケーションの要求数を管理します。</span><span class="sxs-lookup"><span data-stu-id="8be36-159">Manage the number of concurrently executing requests for Web applications that host orchestrations on IIS 7.0 running in Integrated mode</span></span>  
 <span data-ttu-id="8be36-160">ASP.NET 2.0 が統合モードで IIS 7.0 でホストされている場合のスレッド処理が異なりますよりも IIS 6.0 または IIS 7.0 でクラシック モード。</span><span class="sxs-lookup"><span data-stu-id="8be36-160">When ASP.NET 2.0 is hosted on IIS 7.0 in integrated mode, the use of threads is handled differently than on IIS 6.0 or on IIS 7.0 in classic mode.</span></span> <span data-ttu-id="8be36-161">ASP.NET 2.0 が同時に実行の数を制限する ASP.NET 2.0 が統合モードで IIS 7.0 でホストされている場合**要求**の数ではなく**スレッド**要求を同時に実行します。</span><span class="sxs-lookup"><span data-stu-id="8be36-161">When ASP.NET 2.0 is hosted on IIS 7.0 in integrated mode, ASP.NET 2.0 restricts the number of concurrently executing **requests** rather than the number of **threads** concurrently executing requests.</span></span> <span data-ttu-id="8be36-162">同期のシナリオのこの直接が制限されましていないスレッドの数が非同期のシナリオの要求とスレッドの数は可能性があります非常に異なります。</span><span class="sxs-lookup"><span data-stu-id="8be36-162">For synchronous scenarios this will indirectly limit the number of threads but for asynchronous scenarios the number of requests and threads will likely be very different.</span></span> <span data-ttu-id="8be36-163">統合モードで IIS 7.0 で ASP.NET 2.0 を実行すると、 **maxWorkerThreads**と**maxIoThreads**実行中のスレッド数を管理する、machine.config ファイルでパラメーターを使用しません。</span><span class="sxs-lookup"><span data-stu-id="8be36-163">When running ASP.NET 2.0 on IIS 7.0 in integrated mode, the **maxWorkerThreads** and **maxIoThreads** parameters in the machine.config file are not used to govern the number of running threads.</span></span> <span data-ttu-id="8be36-164">指定された値を変更することで同時に実行される要求の数を CPU あたり 12 個の既定値から変更する代わりに、 **maxConcurrentThreadsPerCPU**します。</span><span class="sxs-lookup"><span data-stu-id="8be36-164">Instead, the number of concurrently executing requests can be changed from the default value of 12 per CPU by modifying the value specified for **maxConcurrentThreadsPerCPU**.</span></span> <span data-ttu-id="8be36-165">**MaxConcurrentThreadsPerCPU** reqistry または aspnet.config ファイルの構成セクションでは、値を指定することができます。</span><span class="sxs-lookup"><span data-stu-id="8be36-165">The **maxConcurrentThreadsPerCPU** value can be specified either in the reqistry or in the config section of an aspnet.config file.</span></span> <span data-ttu-id="8be36-166">既定値を変更する次の手順に従って**maxConcurrentThreadsPerCPU**同時に実行される要求の数を管理します。</span><span class="sxs-lookup"><span data-stu-id="8be36-166">Follow these steps to change the default value for **maxConcurrentThreadsPerCPU** to govern the number of concurrently executing requests:</span></span>  
  
 <span data-ttu-id="8be36-167">**レジストリで maxConcurrentThreadsPerCPU 値を設定するには**</span><span class="sxs-lookup"><span data-stu-id="8be36-167">**To set the maxConcurrentThreadsPerCPU value in the registry**</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="8be36-168">レジストリ エディターの不適切な使用により問題が発生し、オペレーティング システムの再インストールが必要となることがあります。</span><span class="sxs-lookup"><span data-stu-id="8be36-168">Incorrect use of Registry Editor may cause problems requiring you to reinstall your operating system.</span></span> <span data-ttu-id="8be36-169">レジストリ エディターは、ご自身の責任で使用してください。</span><span class="sxs-lookup"><span data-stu-id="8be36-169">Use Registry Editor at your own risk.</span></span> <span data-ttu-id="8be36-170">バックアップ、復元、およびレジストリを変更する方法の詳細についてで、マイクロソフト サポート技術情報記事「Microsoft Windows レジストリの説明」を参照して[ http://go.microsoft.com/fwlink/?LinkId=62729](http://go.microsoft.com/fwlink/?LinkId=62729)します。</span><span class="sxs-lookup"><span data-stu-id="8be36-170">For more information about how to back up, restore, and modify the registry, see the Microsoft Knowledge Base article "Description of the Microsoft Windows registry" at [http://go.microsoft.com/fwlink/?LinkId=62729](http://go.microsoft.com/fwlink/?LinkId=62729).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="8be36-171">この設定はグローバルであり、個々 のアプリケーション プールまたはアプリケーションは変更できません。</span><span class="sxs-lookup"><span data-stu-id="8be36-171">This setting is global and cannot be changed for individual application pools or applications.</span></span>  
  
1. <span data-ttu-id="8be36-172">をクリックして**開始**、 をクリックして**実行**、型**regedit.exe**、順にクリックします**ok**レジストリ エディターを起動します。</span><span class="sxs-lookup"><span data-stu-id="8be36-172">Click **Start**, click **Run**, type **regedit.exe**, and then click **OK** to start Registry Editor.</span></span>  
  
2. <span data-ttu-id="8be36-173">移動します**HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\ASP.NET\2.0.50727.0**</span><span class="sxs-lookup"><span data-stu-id="8be36-173">Navigate to **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\ASP.NET\2.0.50727.0**</span></span>  
  
3. <span data-ttu-id="8be36-174">次の手順に従って、キーを作成します。</span><span class="sxs-lookup"><span data-stu-id="8be36-174">Create the key by following these steps:</span></span>  
  
   1.  <span data-ttu-id="8be36-175">**編集** メニューのをクリックして**新規**、 をクリックし、**キー**します。</span><span class="sxs-lookup"><span data-stu-id="8be36-175">On the **Edit** menu, click **New**, and then click **Key**.</span></span>  
  
   2.  <span data-ttu-id="8be36-176">型**maxConcurrentThreadsPerCPU**、し、キーを押します**ENTER**します。</span><span class="sxs-lookup"><span data-stu-id="8be36-176">Type **maxConcurrentThreadsPerCPU**, and then press **ENTER**.</span></span>  
  
   3.  <span data-ttu-id="8be36-177">で、 **maxConcurrentThreadsPerCPU**キー、maxConcurrentThreadsPerCPU の新しい値で DWORD エントリを作成します。</span><span class="sxs-lookup"><span data-stu-id="8be36-177">Under the **maxConcurrentThreadsPerCPU** key, create a DWORD entry with the new value for maxConcurrentThreadsPerCPU.</span></span>  
  
   4.  <span data-ttu-id="8be36-178">レジストリ エディターを閉じます。</span><span class="sxs-lookup"><span data-stu-id="8be36-178">Close Registry Editor.</span></span>  
  
   <span data-ttu-id="8be36-179">**Aspnet.config ファイルの構成セクションでは、アプリケーション プールの maxConcurrentThreadsPerCPU 値を設定するには**</span><span class="sxs-lookup"><span data-stu-id="8be36-179">**To set the maxConcurrentThreadsPerCPU value for an application pool in the config section of an aspnet.config file**</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="8be36-180">構成ファイルを使用して次の値の設定を対応するためには、Microsoft .NET Framework 3.5 Service Pack 1 をインストールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="8be36-180">Microsoft .NET Framework 3.5 Service Pack 1 must be installed to accommodate setting the values below via configuration file.</span></span> <span data-ttu-id="8be36-181">Microsoft .NET Framework 3.5 Service Pack 1 をダウンロードする[ http://go.microsoft.com/fwlink/?LinkID=136345](http://go.microsoft.com/fwlink/?LinkID=136345)します。</span><span class="sxs-lookup"><span data-stu-id="8be36-181">You can download Microsoft .NET Framework 3.5 Service Pack 1 from [http://go.microsoft.com/fwlink/?LinkID=136345](http://go.microsoft.com/fwlink/?LinkID=136345).</span></span>  
  
-   <span data-ttu-id="8be36-182">アプリケーション プールの aspnet.config ファイルを開き、新しい値を入力し、 **maxConcurrentRequestsPerCPU**と**requestQueueLimit**パラメーター。</span><span class="sxs-lookup"><span data-stu-id="8be36-182">Open the aspnet.config file for the application pool, and then enter new values for the **maxConcurrentRequestsPerCPU** and **requestQueueLimit** parameters:</span></span>  
  
```  
<system.web>  
    <applicationPool maxConcurrentRequestsPerCPU="12" requestQueueLimit="5000"/>  
</system.web>  
```  
  
> [!NOTE]  
>  <span data-ttu-id="8be36-183">この値に指定された値よりも優先されます**maxConcurrentThreadsPerCPU**レジストリにします。</span><span class="sxs-lookup"><span data-stu-id="8be36-183">This value overrides the value specified for **maxConcurrentThreadsPerCPU** in the registry.</span></span> <span data-ttu-id="8be36-184">RequestQueueLimit 設定では、aspnet.config ファイルの設定は、machine.config ファイルで設定を上書きする点を除いて processModel/requestQueueLimit の場合と同じです。</span><span class="sxs-lookup"><span data-stu-id="8be36-184">The requestQueueLimit setting is the same as processModel/requestQueueLimit, except that the setting in the aspnet.config file will override the setting in the machine.config file.</span></span>  
  
## <a name="define-clr-hosting-thread-values-for-biztalk-host-instances"></a><span data-ttu-id="8be36-185">CLR ホストの BizTalk ホスト インスタンス用のスレッド値の定義します。</span><span class="sxs-lookup"><span data-stu-id="8be36-185">Define CLR hosting thread values for BizTalk host instances</span></span>  
 <span data-ttu-id="8be36-186">Windows スレッドは、Windows プロセスに使用できる最も基本的な実行可能単位なので、BizTalk ホストのインスタンスに関連付けられた .NET スレッド プールには十分なスレッドを割り当てて、スレッドが不足しないようにすることが重要です。</span><span class="sxs-lookup"><span data-stu-id="8be36-186">Because a Windows thread is the most basic executable unit available to a Windows process, it is important to allocate enough threads to the .NET thread pool associated with an instance of a BizTalk host to prevent thread starvation.</span></span> <span data-ttu-id="8be36-187">スレッドの不足が発生したときに、パフォーマンスが低下する、要求された作業を実行できる十分なスレッドはありませんがあります。</span><span class="sxs-lookup"><span data-stu-id="8be36-187">When thread starvation occurs, there are not enough threads available to perform the requested work that negatively impacts performance.</span></span> <span data-ttu-id="8be36-188">同時に、ホストに関連付けられた .NET スレッド プールに必要以上にスレッドを割り当てないよう注意する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8be36-188">At the same time, care should be taken to prevent allocating more threads to the.NET thread pool associated with a host than is necessary.</span></span> <span data-ttu-id="8be36-189">ホストに関連付けられた .NET スレッド プールに割り当てたスレッドが多すぎると、コンテキストの切り替えが増加する場合があります。</span><span class="sxs-lookup"><span data-stu-id="8be36-189">The allocation of too many threads to the .NET thread pool associated with a host may increase context switching.</span></span> <span data-ttu-id="8be36-190">コンテキストの切り替えには、パフォーマンス コストが生じますが、別のスレッドを 1 つのスレッドを実行してから、Windows カーネルが切り替わるときに発生します。</span><span class="sxs-lookup"><span data-stu-id="8be36-190">Context switching occurs when the Windows kernel switches from running one thread to a different thread, which incurs a performance cost.</span></span> <span data-ttu-id="8be36-191">過剰なスレッドの割り当ては、全体的なパフォーマンスに悪影響を与えるが、過剰なコンテキストの切り替えことができます。</span><span class="sxs-lookup"><span data-stu-id="8be36-191">Excessive thread allocation can cause excessive context switching, which will negatively impact overall performance.</span></span>  
  
 <span data-ttu-id="8be36-192">BizTalk Server のレジストリで適切な CLR Hosting 値を作成して、BizTalk ホストのインスタンスに関連付けられた .NET スレッド プールで使用できる Windows スレッド数を変更します。</span><span class="sxs-lookup"><span data-stu-id="8be36-192">Modify the number of Windows threads available in the .NET thread pool associated with an instance of a BizTalk host by creating the appropriate CLR Hosting values in the registry of the BizTalk Server.</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="8be36-193">レジストリ エディターの不適切な使用により問題が発生し、オペレーティング システムの再インストールが必要となることがあります。</span><span class="sxs-lookup"><span data-stu-id="8be36-193">Incorrect use of Registry Editor may cause problems requiring you to reinstall your operating system.</span></span> <span data-ttu-id="8be36-194">レジストリ エディターは、ご自身の責任で使用してください。</span><span class="sxs-lookup"><span data-stu-id="8be36-194">Use Registry Editor at your own risk.</span></span> <span data-ttu-id="8be36-195">バックアップ、復元、およびレジストリを変更する方法の詳細についてで、マイクロソフト サポート技術情報記事「Microsoft Windows レジストリの説明」を参照して[ http://go.microsoft.com/fwlink/?LinkId=62729](http://go.microsoft.com/fwlink/?LinkId=62729)します。</span><span class="sxs-lookup"><span data-stu-id="8be36-195">For more information about how to back up, restore, and modify the registry, see the Microsoft Knowledge Base article "Description of the Microsoft Windows registry" at [http://go.microsoft.com/fwlink/?LinkId=62729](http://go.microsoft.com/fwlink/?LinkId=62729).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="8be36-196">**ワーカー スレッド**キューに置かれた作業項目の処理に使用し、 **I/O スレッド**専用のコールバック スレッドが完了した非同期 I/O 要求を処理するために、I/O 完了ポートに関連付けられています。</span><span class="sxs-lookup"><span data-stu-id="8be36-196">**Worker threads** are used to handle queued work items and **I/O threads** are dedicated callback threads associated with an I/O completion port to handle a completed asynchronous I/O request.</span></span>  
  
 <span data-ttu-id="8be36-197">**BizTalk ホストの各インスタンスに関連付けられた .NET スレッド プールで使用できるスレッドの数を変更するには、次の手順を実行します。**</span><span class="sxs-lookup"><span data-stu-id="8be36-197">**To modify the number of threads available in the .NET thread pool associated with each instance of a BizTalk host, follow these steps:**</span></span>  
  
1. <span data-ttu-id="8be36-198">BizTalk ホスト インスタンスを停止します。</span><span class="sxs-lookup"><span data-stu-id="8be36-198">Stop the BizTalk host instance.</span></span>  
  
2. <span data-ttu-id="8be36-199">をクリックして**開始**、 をクリックして**実行**、型**regedit.exe**、順にクリックします**ok**レジストリ エディターを起動します。</span><span class="sxs-lookup"><span data-stu-id="8be36-199">Click **Start**, click **Run**, type **regedit.exe**, and then click **OK** to start Registry Editor.</span></span>  
   <span data-ttu-id="8be36-200">移動します**hkey_local_machine \system\currentcontrolset\services\btssvc$**<em>hostname</em>] 場所*ホスト名*ホストに関連付けられているホストの名前を指定しますインスタンス。</span><span class="sxs-lookup"><span data-stu-id="8be36-200">Navigate to **HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\BTSSvc$**<em>hostname</em>] where *hostname* is the name of the host associated with the host instance.</span></span>  
  
   > [!NOTE]  
   >  <span data-ttu-id="8be36-201">このレジストリ キーとして表すことが BizTalk Server 2004 から BizTalk Server 2006 インストールをアップグレードした場合 \**hkey_local_machine \system\currentcontrolset\services\btssvc \* \* \* guid*] 場所*guid* GUID を BizTalk Server ホストの各インスタンスに固有です。</span><span class="sxs-lookup"><span data-stu-id="8be36-201">If you have upgraded your BizTalk Server 2006 installation from BizTalk Server 2004, this registry key may be represented as \**HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\BTSSvc\*\*\*guid*] where *guid* is a GUID unique to each instance of a BizTalk Server host.</span></span>  
  
3. <span data-ttu-id="8be36-202">検索、 **CLR Hosting**キー。</span><span class="sxs-lookup"><span data-stu-id="8be36-202">Locate the **CLR Hosting** key.</span></span> <span data-ttu-id="8be36-203">このキーが存在しない場合は、次の手順に従って、キーを作成します。</span><span class="sxs-lookup"><span data-stu-id="8be36-203">If this key does not exist, then create the key by following these steps:</span></span>  
  
   1.  <span data-ttu-id="8be36-204">**編集** メニューのをクリックして**新規**、 をクリックし、**キー**します。</span><span class="sxs-lookup"><span data-stu-id="8be36-204">On the **Edit** menu, click **New**, and then click **Key**.</span></span>  
  
   2.  <span data-ttu-id="8be36-205">型**CLR Hosting**、押します **」と入力**します。</span><span class="sxs-lookup"><span data-stu-id="8be36-205">Type **CLR Hosting**, and then press **ENTER**.</span></span>  
  
4. <span data-ttu-id="8be36-206">下、 **CLR Hosting**キーの値を持つ、次の DWORD エントリを作成します。</span><span class="sxs-lookup"><span data-stu-id="8be36-206">Under the **CLR Hosting** key, create the following DWORD entries with the indicated values.</span></span>  
  
   |<span data-ttu-id="8be36-207">DWORD エントリ</span><span class="sxs-lookup"><span data-stu-id="8be36-207">DWORD entry</span></span>|<span data-ttu-id="8be36-208">既定値</span><span class="sxs-lookup"><span data-stu-id="8be36-208">Default value</span></span>|<span data-ttu-id="8be36-209">推奨値</span><span class="sxs-lookup"><span data-stu-id="8be36-209">Recommended value</span></span>|  
   |-----------------|-------------------|-----------------------|  
   |<span data-ttu-id="8be36-210">MaxIOThreads</span><span class="sxs-lookup"><span data-stu-id="8be36-210">MaxIOThreads</span></span>|<span data-ttu-id="8be36-211">20</span><span class="sxs-lookup"><span data-stu-id="8be36-211">20</span></span>|<span data-ttu-id="8be36-212">100</span><span class="sxs-lookup"><span data-stu-id="8be36-212">100</span></span>|  
   |<span data-ttu-id="8be36-213">MaxWorkerThreads</span><span class="sxs-lookup"><span data-stu-id="8be36-213">MaxWorkerThreads</span></span>|<span data-ttu-id="8be36-214">25</span><span class="sxs-lookup"><span data-stu-id="8be36-214">25</span></span>|<span data-ttu-id="8be36-215">100**重要です。** 100 を超えるには、この値を大きくと、BizTalk Server メッセージ ボックス データベースをホストする SQL Server コンピューターのパフォーマンスに悪影響を与えることができます。</span><span class="sxs-lookup"><span data-stu-id="8be36-215">100 **Important:**  Increasing this value beyond 100 can have an adverse effect on the performance of the SQL Server computer hosting the BizTalk Server MessageBox database.</span></span> <span data-ttu-id="8be36-216">この問題が発生した場合、SQL Server でデッドロック状態が発生することがあります。</span><span class="sxs-lookup"><span data-stu-id="8be36-216">When this problem occurs, SQL Server may encounter a deadlock condition.</span></span> <span data-ttu-id="8be36-217">このパラメーターは 100 の値を超えて増加しませんをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="8be36-217">It is recommended this parameter is not increased beyond a value of 100.</span></span>|  
   |<span data-ttu-id="8be36-218">MinIOThreads</span><span class="sxs-lookup"><span data-stu-id="8be36-218">MinIOThreads</span></span>|<span data-ttu-id="8be36-219">1</span><span class="sxs-lookup"><span data-stu-id="8be36-219">1</span></span>|<span data-ttu-id="8be36-220">25</span><span class="sxs-lookup"><span data-stu-id="8be36-220">25</span></span>|  
   |<span data-ttu-id="8be36-221">MinWorkerThreads</span><span class="sxs-lookup"><span data-stu-id="8be36-221">MinWorkerThreads</span></span>|<span data-ttu-id="8be36-222">1</span><span class="sxs-lookup"><span data-stu-id="8be36-222">1</span></span>|<span data-ttu-id="8be36-223">25</span><span class="sxs-lookup"><span data-stu-id="8be36-223">25</span></span>|  
  
   > [!NOTE]  
   >  <span data-ttu-id="8be36-224">上記の推奨値は、ほとんどのシナリオだけで十分ですが、各ホスト インスタンスで実行中の数のアダプター ハンドラーまたはオーケストレーションによって大きく必要があります。</span><span class="sxs-lookup"><span data-stu-id="8be36-224">These recommended values will be sufficient for most scenarios but may need to be increased depending on how many adapter handlers or orchestrations are running in each host instance.</span></span>  
  
   > [!NOTE]  
   >  <span data-ttu-id="8be36-225">これらの値は、サーバー上のプロセッサの数を掛けた暗黙的にします。</span><span class="sxs-lookup"><span data-stu-id="8be36-225">These values are implicitly multiplied by the number of processors on the server.</span></span> <span data-ttu-id="8be36-226">たとえば、MaxWorkerThreads のエントリを 100 の値に設定します。 効果的に設定値の 400 4 CPU サーバーでします。</span><span class="sxs-lookup"><span data-stu-id="8be36-226">For example, setting the MaxWorkerThreads entry to a value of 100 would effectively set a value of 400 on a 4 CPU server.</span></span>  
  
5. <span data-ttu-id="8be36-227">レジストリ エディターを閉じます。</span><span class="sxs-lookup"><span data-stu-id="8be36-227">Close Registry Editor.</span></span>  
  
6. <span data-ttu-id="8be36-228">BizTalk ホスト インスタンスを再起動します。</span><span class="sxs-lookup"><span data-stu-id="8be36-228">Restart the BizTalk host instance.</span></span>  
  
## <a name="disable-tracking-for-orchestrations-send-ports-receive-ports-and-pipelines-when-tracking-is-not-required"></a><span data-ttu-id="8be36-229">オーケストレーションの追跡を無効化、送信ポート、追跡が必要な場合に、ポート、およびパイプラインの受信</span><span class="sxs-lookup"><span data-stu-id="8be36-229">Disable tracking for orchestrations, send ports, receive ports, and pipelines when tracking is not required</span></span>  
 <span data-ttu-id="8be36-230">追跡では、データがメッセージ ボックス データベースに書き込まれ、BizTalk 追跡データベースに非同期に移動するのには、BizTalk Server 内でオーバーヘッドのパフォーマンスが発生します。</span><span class="sxs-lookup"><span data-stu-id="8be36-230">Tracking incurs performance overhead within BizTalk Server as data has to be written to the MessageBox database and then asynchronously moved to the BizTalk Tracking database.</span></span> <span data-ttu-id="8be36-231">追跡がビジネス要件でない場合は、オーバーヘッドを削減し、パフォーマンスを向上させる追跡を無効になります。</span><span class="sxs-lookup"><span data-stu-id="8be36-231">If tracking is not a business requirement, then disable tracking to reduce overhead and increase performance.</span></span> <span data-ttu-id="8be36-232">追跡を構成する方法の詳細については、「を構成する追跡を使用して、BizTalk Server 管理コンソール」BizTalk Server でのヘルプを参照してください。 [ http://go.microsoft.com/fwlink/?LinkID=106742](http://go.microsoft.com/fwlink/?LinkID=106742)します。</span><span class="sxs-lookup"><span data-stu-id="8be36-232">For more information about configuring tracking, see “Configuring Tracking Using the BizTalk Server Administration Console” in the BizTalk Server help at [http://go.microsoft.com/fwlink/?LinkID=106742](http://go.microsoft.com/fwlink/?LinkID=106742).</span></span>  
  
## <a name="decrease-the-purging-period-for-the-dta-purge-and-archive-job-from-7-days-to-2-days-in-high-throughput-scenarios"></a><span data-ttu-id="8be36-233">DTA Purge and Archive ジョブから 7 日間で高スループットのシナリオ 2 日間に、削除期間を短縮します。</span><span class="sxs-lookup"><span data-stu-id="8be36-233">Decrease the purging period for the DTA Purge and Archive job from 7 days to 2 days in high throughput scenarios</span></span>  
 <span data-ttu-id="8be36-234">既定では、BizTalk Server でのデータを追跡するため、削除間隔は 7 日間に設定します。</span><span class="sxs-lookup"><span data-stu-id="8be36-234">By default, the purging interval for tracking data in BizTalk Server is set to 7 days.</span></span> <span data-ttu-id="8be36-235">高スループットのシナリオでは、メッセージ ボックスとさらに悪い影響メッセージの処理スループットのパフォーマンスに影響が最終的に、追跡データベース内のデータを過剰なビルドではこのことがあります。</span><span class="sxs-lookup"><span data-stu-id="8be36-235">In a high throughput scenario, this can result in an excessive build up of data in the Tracking database, which will eventually impact the performance of the MessageBox and in turn negatively impact message processing throughput.</span></span>  
  
 <span data-ttu-id="8be36-236">高スループットのシナリオでは、ハードおよびソフトの既定の 7 日から 2 日間に間隔をパージを減らします。</span><span class="sxs-lookup"><span data-stu-id="8be36-236">In high throughput scenarios, reduce the hard and soft purging interval from the default of 7 days to 2 days.</span></span> <span data-ttu-id="8be36-237">削除間隔を構成する方法の詳細については、"方法を構成、DTA の消去とアーカイブ ジョブ"BizTalk Server でのヘルプを参照してください。 [ http://go.microsoft.com/fwlink/?LinkID=104908](http://go.microsoft.com/fwlink/?LinkID=104908)します。</span><span class="sxs-lookup"><span data-stu-id="8be36-237">For more information about configuring the purging interval, see “How to Configure the DTA Purge and Archive Job” in the BizTalk Server help at [http://go.microsoft.com/fwlink/?LinkID=104908](http://go.microsoft.com/fwlink/?LinkID=104908).</span></span>  
  
## <a name="install-the-latest-service-packs"></a><span data-ttu-id="8be36-238">最新のサービス パックをインストールします。</span><span class="sxs-lookup"><span data-stu-id="8be36-238">Install the latest service packs</span></span>  
 <span data-ttu-id="8be36-239">パフォーマンスの問題が発生する可能性を修正できる修正プログラムが含まれているこれらの両方の BizTalk Server と .NET Framework の最新のサービス パックをインストールしてください。</span><span class="sxs-lookup"><span data-stu-id="8be36-239">The latest service packs for both BizTalk Server and the .NET Framework should be installed, as these contain fixes that can correct performance issues you may encounter.</span></span>  
  
## <a name="do-not-cluster-biztalk-hosts-unless-absolutely-necessary"></a><span data-ttu-id="8be36-240">しない限り、BizTalk ホストをクラスターは絶対に必要な</span><span class="sxs-lookup"><span data-stu-id="8be36-240">Do not cluster BizTalk hosts unless absolutely necessary</span></span>  
 <span data-ttu-id="8be36-241">中に[!INCLUDE[btsBizTalkServer2006](../includes/btsbiztalkserver2006-md.md)]およびそれ以降のバージョンの[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]をクラスター リソースとして BizTalk ホストを構成するためにのみ検討間での複数の BizTalk ホストできないリソースへの高可用性を提供する必要がある場合は、これを行うコンピューター。</span><span class="sxs-lookup"><span data-stu-id="8be36-241">While [!INCLUDE[btsBizTalkServer2006](../includes/btsbiztalkserver2006-md.md)] and subsequent versions of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] allow you to configure a BizTalk host as a cluster resource, you should only consider doing this if you need to provide high availability to a resource that cannot be hosted across multiple BizTalk computers.</span></span> <span data-ttu-id="8be36-242">FTP プロトコルはファイルのロックを指定しないために、たとえば、FTP アダプターを使用してポートは、1 つのホスト インスタンスに存在のみする必要があります、ためただし、これは、1 つはクラスタ リングからメリットが得られる障害点です。</span><span class="sxs-lookup"><span data-stu-id="8be36-242">As an example, ports using the FTP adapter should only reside on one host instance, as the FTP protocol does not provide file locking, however, this introduces a single point of failure which would benefit from clustering.</span></span> <span data-ttu-id="8be36-243">アダプターには、ファイル、SQL、HTTP のみのホストの処理などが含まれているホストは、負荷がコンピューター間で分散され、クラスタ リングの利点は、内部的に指定できます。</span><span class="sxs-lookup"><span data-stu-id="8be36-243">Hosts that contain adapters, such as file, SQL, HTTP or processing only hosts, can be internally load balanced across machines and do not benefit from clustering.</span></span>  
  
## <a name="performance-optimizations-in-the-biztalk-server-documentation"></a><span data-ttu-id="8be36-244">BizTalk Server のドキュメントでパフォーマンスの最適化</span><span class="sxs-lookup"><span data-stu-id="8be36-244">Performance optimizations in the BizTalk Server documentation</span></span>  
 <span data-ttu-id="8be36-245">適切な BizTalk Server のドキュメントの次の推奨事項が適用されます。</span><span class="sxs-lookup"><span data-stu-id="8be36-245">Apply the following recommendations from the BizTalk Server documentation as appropriate:</span></span>  
  
-   <span data-ttu-id="8be36-246">「メッセージ ボックスの待機時間に関する問題のトラブルシューティング」 [http://go.microsoft.com/fwlink/?LinkId=114747](http://go.microsoft.com/fwlink/?LinkId=114747)</span><span class="sxs-lookup"><span data-stu-id="8be36-246">“Troubleshooting MessageBox Latency Issues” at [http://go.microsoft.com/fwlink/?LinkId=114747](http://go.microsoft.com/fwlink/?LinkId=114747)</span></span>  
  
-   <span data-ttu-id="8be36-247">「パフォーマンスのボトルネックを識別する」 [http://go.microsoft.com/fwlink/?LinkID=104418](http://go.microsoft.com/fwlink/?LinkID=104418)</span><span class="sxs-lookup"><span data-stu-id="8be36-247">“Identifying Performance Bottlenecks” at [http://go.microsoft.com/fwlink/?LinkID=104418](http://go.microsoft.com/fwlink/?LinkID=104418)</span></span>  
  
-   <span data-ttu-id="8be36-248">「DBNETLIB 例外の回避」 [http://go.microsoft.com/fwlink/?LinkID=108787](http://go.microsoft.com/fwlink/?LinkID=108787)</span><span class="sxs-lookup"><span data-stu-id="8be36-248">“Avoiding DBNETLIB Exceptions” at [http://go.microsoft.com/fwlink/?LinkID=108787](http://go.microsoft.com/fwlink/?LinkID=108787)</span></span>  
  
-   <span data-ttu-id="8be36-249">「TCP/IP ポートの枯渇を回避する」 [http://go.microsoft.com/fwlink/?LinkID=101610](http://go.microsoft.com/fwlink/?LinkID=101610)</span><span class="sxs-lookup"><span data-stu-id="8be36-249">“Avoiding TCP/IP Port Exhaustion” at [http://go.microsoft.com/fwlink/?LinkID=101610](http://go.microsoft.com/fwlink/?LinkID=101610)</span></span>  
  
-   <span data-ttu-id="8be36-250">「EPM スレッド プールのサイズを設定する」 [http://go.microsoft.com/fwlink/?LinkId=114748](http://go.microsoft.com/fwlink/?LinkId=114748)</span><span class="sxs-lookup"><span data-stu-id="8be36-250">“Setting the EPM Threadpool Size” at [http://go.microsoft.com/fwlink/?LinkId=114748](http://go.microsoft.com/fwlink/?LinkId=114748)</span></span>