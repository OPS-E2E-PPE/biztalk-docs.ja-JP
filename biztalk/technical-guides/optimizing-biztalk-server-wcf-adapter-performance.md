---
title: BizTalk Server WCF Adapter パフォーマンスの最適化 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 2900c845-15be-4466-8fa0-b51b2486842f
caps.latest.revision: 12
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 500ad07a47285b2a73b3bf6a768b5a722568807f
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65393496"
---
# <a name="optimizing-biztalk-server-wcf-adapter-performance"></a><span data-ttu-id="b0a8a-102">BizTalk Server WCF Adapter パフォーマンスの最適化</span><span class="sxs-lookup"><span data-stu-id="b0a8a-102">Optimizing BizTalk Server WCF Adapter Performance</span></span>
<span data-ttu-id="b0a8a-103">このトピックでは、適切な WCF アダプターまたはバインドの種類とさまざまな WCF アダプターの構成オプションを適用するためのガイダンスを選択するための推奨事項を提供します。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-103">This topic provides recommendations for selecting the appropriate WCF adapter or binding type and guidance for applying various WCF adapter configuration options.</span></span>  
  
## <a name="considerations-when-choosing-which-wcf-adapter-to-use-or-which-wcf-customwcf-customisolated-binding-type-to-use"></a><span data-ttu-id="b0a8a-104">どの WCF アダプターを使用するかを使用するどの WCF カスタム WCF CustomIsolated バインドの種類を選択する際の考慮事項</span><span class="sxs-lookup"><span data-stu-id="b0a8a-104">Considerations when choosing which WCF adapter to use or which WCF-Custom/WCF-CustomIsolated binding type to use</span></span>  
  
-   <span data-ttu-id="b0a8a-105">厳密にはメッセージのサイズが増えるために必要な場合、メッセージ レベルのセキュリティを使わないでください。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-105">Do not use message-level security if not strictly required because it increases the size of messages.</span></span> <span data-ttu-id="b0a8a-106">これは、さらに、ソリューションの全体的なスループットを最小限です。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-106">This in turn can minimize the overall throughput of the solution.</span></span>  
  
-   <span data-ttu-id="b0a8a-107">どの WCF アダプターを使用する、またはカスタム/WCF-Wcf-customisolated を選択するときに**バインドの種類**を使用する十分に検討、アプリケーションの要件など、互換性、パフォーマンス、ホスティング プラットフォーム、セキュリティ、およびサポートトランスポート。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-107">When choosing which WCF adapter to use or which WCF-Custom/WCF-CustomIsolated **binding type** to use, carefully consider any application requirements such as compatibility, performance, hosting platform, security, and supported transports.</span></span> <span data-ttu-id="b0a8a-108">次のガイドラインは一般に、WCF に適用できますし、BizTalk Server に固有ではないです。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-108">The guidelines listed below are applicable to WCF in general, and are not specific to BizTalk Server:</span></span>  
  
    -   <span data-ttu-id="b0a8a-109">**BasicHttpBinding** WCF サービスは、WebSphere の Web サービスや ASMX Web サービスを必要とする .NET 1.1 アプリケーションなどのレガシ クライアントをサポートする必要がある場合に使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-109">**BasicHttpBinding** should be used if the WCF service needs to support legacy clients such as WebSphere Web services or .NET 1.1 applications that expect an ASMX Web service.</span></span> <span data-ttu-id="b0a8a-110">メッセージまたはトランスポート セキュリティを必要とする場合、BasicHttpBinding は、既定では、任意のセキュリティを実装できません、ために、明示的にこのバインディングで構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-110">Because BasicHttpBinding does not implement any security by default, if you require message or transport security, you should configure it explicitly on this binding.</span></span> <span data-ttu-id="b0a8a-111">BasicHttpBinding を使用して、ASMX ベースの Web サービスとクライアント、および、WS に準拠するその他のサービスと通信できるエンドポイントを公開する-基本プロファイル 1.1。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-111">Use BasicHttpBinding to expose endpoints that are able to communicate with ASMX-based Web services and clients and other services that conform to the WS-I Basic Profile 1.1.</span></span> <span data-ttu-id="b0a8a-112">トランスポート セキュリティを構成するときに BasicHttpBinding の既定値は、同じ資格情報を使用しないなどの従来の ASMX Web サービス。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-112">When configuring transport security, BasicHttpBinding defaults to use no credentials just like a classic ASMX Web service.</span></span> <span data-ttu-id="b0a8a-113">BasicHttpBinding を使用すると、IIS 7.5 または 7.0 の IIS で WCF サービスをホストできます。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-113">BasicHttpBinding allows you to host the WCF service in IIS 7.5 or IIS 7.0.</span></span>  
  
    -   <span data-ttu-id="b0a8a-114">**WsHttpBinding**インターネット経由で WCF クライアントが WCF サービスが呼び出された場合に使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-114">**WsHttpBinding** should be used if the WCF service will be called by WCF clients over the Internet.</span></span> <span data-ttu-id="b0a8a-115">WsHttpBinding は、ASMX Web サービスを期待する従来のクライアントをサポートする必要はありませんし、WsHttpBinding では、IIS 7.5 または 7.0 の IIS で WCF サービスをホストできます。 インターネットのシナリオに最適です。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-115">WsHttpBinding is a good choice for Internet scenarios in which you do not have to support legacy clients that expect an ASMX Web service and WsHttpBinding allows you to host the WCF service in IIS 7.5 or IIS 7.0.</span></span> <span data-ttu-id="b0a8a-116">レガシ クライアントをサポートする場合は、BasicHttpBinding を使用する代わりに検討してください。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-116">If you do need to support legacy clients, consider using BasicHttpBinding instead.</span></span>   
        <span data-ttu-id="b0a8a-117">WCF 受信場所の公開または ws-をサポートする送信ポートを採用する必要があるときに、WsHttpBinding を使用する必要があります \* Ws-security や WS AtomicTransactions などのプロトコル。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-117">WsHttpBinding should be used when you need to expose WCF Receive Locations or adopt Send Ports which support WS-\* Protocols like WS-Security or WS-AtomicTransactions.</span></span>  
  
    -   <span data-ttu-id="b0a8a-118">**NetTcpBinding**優れた選択肢は、イントラネット内のクライアントをサポートする必要がある場合。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-118">**NetTcpBinding** is an excellent choice if you need to support clients within your intranet.</span></span> <span data-ttu-id="b0a8a-119">NetTcpBinding では、イントラネットのシナリオに適しては転送のパフォーマンスが、重要な場合ありの代わりに IIS での Windows サービスでサービスをホストすることができますできます。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-119">NetTcpBinding is a good choice for intranet scenarios if transport performance is important to you, and if it is acceptable to host the service in a Windows service instead of in IIS.</span></span> <span data-ttu-id="b0a8a-120">セキュリティで保護された信頼できるバインド環境を提供する場合は、このバインディングを使用します.NET へのネットワーク コンピューター間の通信。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-120">Use this binding when you want to provide a secure and reliable binding environment for .NET-to-.NET cross-machine communication.</span></span> <span data-ttu-id="b0a8a-121">NetTcpBinding は、Windows サービスまたは IIS 7.5 または 7.0 でホストされる必要がありますに注意してください。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-121">Note that the NetTcpBinding  must be hosted in a Windows service or in IIS 7.5/7.0.</span></span>  
  
    -   <span data-ttu-id="b0a8a-122">**NetNamedPipeBinding**サービスと同じコンピューターに WCF クライアントをサポートする必要がある場合に使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-122">**NetNamedPipeBinding** should be used if you need to support WCF clients on the same computer as your service.</span></span> <span data-ttu-id="b0a8a-123">このバインディングでは、プロセスの間、同じコンピューターの通信をセキュリティで保護された信頼できるバインド環境を提供します。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-123">This binding provides a secure and reliable binding environment for cross-process, same-computer communication.</span></span> <span data-ttu-id="b0a8a-124">このバインドは、名前付きパイプを使用する場合に使用してプロトコル。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-124">Use this binding when you want to make use of the NamedPipe protocol.</span></span> <span data-ttu-id="b0a8a-125">Windows サービスまたは IIS 7.5 または 7.0 に対応した NetNamedPipeBinding をホストする必要がありますに注意してください。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-125">Note that the NetNamedPipeBinding must be hosted in a Windows service or in IIS 7.5/7.0.</span></span>  
  
    -   <span data-ttu-id="b0a8a-126">**NetMsmqBinding**切断されているキューをサポートする必要がある場合に使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-126">**NetMsmqBinding** should be used if you need to support disconnected queuing.</span></span> <span data-ttu-id="b0a8a-127">キューは、メッセージ キュー (MSMQ とも呼ばれます) を使用して、トランスポートは、非接続操作モード、障害の分離、負荷平準化をサポートできるようにとして提供されます。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-127">Queuing is provided by using Message Queuing (also known as MSMQ) as a transport, which enables support for disconnected operations, failure isolation, and load leveling.</span></span> <span data-ttu-id="b0a8a-128">クライアントとサービスが同時にオンラインであるがない場合に、NetMsmqBinding を使用できます。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-128">You can use NetMsmqBinding when the client and the service do not have to be online at the same time.</span></span> <span data-ttu-id="b0a8a-129">負荷平準化を使用して、受信メッセージの任意の数を管理することもできます。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-129">You can also manage any number of incoming messages by using load leveling.</span></span> <span data-ttu-id="b0a8a-130">メッセージ キューは、障害の分離を使用して、他のメッセージの処理の影響を与えずにメッセージが失敗する場所をサポートします。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-130">Message Queuing supports failure isolation, where messages can fail without affecting the processing of other messages.</span></span> <span data-ttu-id="b0a8a-131">NetMsmqBinding は、Windows サービスまたは IIS 7.5 または 7.0 でホストされる必要がありますに注意してください。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-131">Note that the NetMsmqBinding  must be hosted in a Windows service or in IIS 7.5/7.0.</span></span>  
  
    -   <span data-ttu-id="b0a8a-132">**WsDualHttpBinding**双方向サービスをサポートする必要がある場合に使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-132">**WsDualHttpBinding** should be used if you need to support a duplex service.</span></span> <span data-ttu-id="b0a8a-133">双方向サービスは、コールバックを使用してクライアントに通信するためにサービスの機能を提供するための双方向メッセージ パターンを使用するサービスです。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-133">A duplex service is a service that uses duplex message patterns, thus providing the ability for a service to communicate back to the client via a callback.</span></span> <span data-ttu-id="b0a8a-134">WsDualHttpBinding は、Windows サービスまたは IIS 7.5 または 7.0 でホストされる必要がありますに注意してください。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-134">Note that the WsDualHttpBinding  must be hosted in a Windows service or in IIS 7.5/7.0.</span></span>  
  
## <a name="wcf-binding-comparison"></a><span data-ttu-id="b0a8a-135">WCF バインドの比較</span><span class="sxs-lookup"><span data-stu-id="b0a8a-135">WCF Binding Comparison</span></span>  
 <span data-ttu-id="b0a8a-136">バインドは、チャネル スタックを構成するためのメカニズムを提供します。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-136">Bindings provide a mechanism for configuring channel stacks.</span></span> <span data-ttu-id="b0a8a-137">バインディングはトランスポート チャネル、メッセージ エンコーダー、および一連のプロトコル チャネルを使用してチャネル スタックを構築するプロセスを作成します。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-137">A binding creates a process to build a channel stack using a transport channel, a message encoder, and a set of protocol channels.</span></span> <span data-ttu-id="b0a8a-138">Windows Communication Foundation は、最も一般的な通信シナリオに対処する事前構成済みの付属している多数の組み込みバインドで出荷されます。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-138">Windows Communication Foundation ships with numerous built-in bindings that come preconfigured to address most common communication scenarios.</span></span>  
  
|<span data-ttu-id="b0a8a-139">クラス名のバインド</span><span class="sxs-lookup"><span data-stu-id="b0a8a-139">Binding Class Name</span></span>|<span data-ttu-id="b0a8a-140">[Transport]</span><span class="sxs-lookup"><span data-stu-id="b0a8a-140">Transport</span></span>|<span data-ttu-id="b0a8a-141">メッセージのエンコード</span><span class="sxs-lookup"><span data-stu-id="b0a8a-141">Message Encoding</span></span>|<span data-ttu-id="b0a8a-142">セキュリティ モード</span><span class="sxs-lookup"><span data-stu-id="b0a8a-142">Security Mode</span></span>|<span data-ttu-id="b0a8a-143">信頼性の高いメッセージング</span><span class="sxs-lookup"><span data-stu-id="b0a8a-143">Reliable Messaging</span></span>|<span data-ttu-id="b0a8a-144">トランザクション フロー (既定で無効)</span><span class="sxs-lookup"><span data-stu-id="b0a8a-144">Transaction Flow (disabled by default)</span></span>|  
|------------------------|---------------|----------------------|-------------------|------------------------|----------------------------------------------|  
|<span data-ttu-id="b0a8a-145">BasicHttpBinding</span><span class="sxs-lookup"><span data-stu-id="b0a8a-145">BasicHttpBinding</span></span>|<span data-ttu-id="b0a8a-146">HTTP</span><span class="sxs-lookup"><span data-stu-id="b0a8a-146">HTTP</span></span>|<span data-ttu-id="b0a8a-147">テキスト</span><span class="sxs-lookup"><span data-stu-id="b0a8a-147">Text</span></span>|<span data-ttu-id="b0a8a-148">なし</span><span class="sxs-lookup"><span data-stu-id="b0a8a-148">None</span></span>|<span data-ttu-id="b0a8a-149">サポートされていません</span><span class="sxs-lookup"><span data-stu-id="b0a8a-149">Not supported</span></span>|<span data-ttu-id="b0a8a-150">サポートされていません</span><span class="sxs-lookup"><span data-stu-id="b0a8a-150">Not supported</span></span>|  
|<span data-ttu-id="b0a8a-151">WSHttpBinding</span><span class="sxs-lookup"><span data-stu-id="b0a8a-151">WSHttpBinding</span></span>|<span data-ttu-id="b0a8a-152">HTTP</span><span class="sxs-lookup"><span data-stu-id="b0a8a-152">HTTP</span></span>|<span data-ttu-id="b0a8a-153">テキスト</span><span class="sxs-lookup"><span data-stu-id="b0a8a-153">Text</span></span>|<span data-ttu-id="b0a8a-154">メッセージ</span><span class="sxs-lookup"><span data-stu-id="b0a8a-154">Message</span></span>|<span data-ttu-id="b0a8a-155">Disabled</span><span class="sxs-lookup"><span data-stu-id="b0a8a-155">Disabled</span></span>|<span data-ttu-id="b0a8a-156">WS AtomicTransactions</span><span class="sxs-lookup"><span data-stu-id="b0a8a-156">WS-AtomicTransactions</span></span>|  
|<span data-ttu-id="b0a8a-157">NetTcpBinding</span><span class="sxs-lookup"><span data-stu-id="b0a8a-157">NetTcpBinding</span></span>|<span data-ttu-id="b0a8a-158">TCP</span><span class="sxs-lookup"><span data-stu-id="b0a8a-158">TCP</span></span>|<span data-ttu-id="b0a8a-159">Binary</span><span class="sxs-lookup"><span data-stu-id="b0a8a-159">Binary</span></span>|<span data-ttu-id="b0a8a-160">[Transport]</span><span class="sxs-lookup"><span data-stu-id="b0a8a-160">Transport</span></span>|<span data-ttu-id="b0a8a-161">Disabled</span><span class="sxs-lookup"><span data-stu-id="b0a8a-161">Disabled</span></span>|<span data-ttu-id="b0a8a-162">OleTransactions</span><span class="sxs-lookup"><span data-stu-id="b0a8a-162">OleTransactions</span></span>|  
|<span data-ttu-id="b0a8a-163">NetNamedPipesBinding</span><span class="sxs-lookup"><span data-stu-id="b0a8a-163">NetNamedPipesBinding</span></span>|<span data-ttu-id="b0a8a-164">名前付きパイプ</span><span class="sxs-lookup"><span data-stu-id="b0a8a-164">Named Pipes</span></span>|<span data-ttu-id="b0a8a-165">Binary</span><span class="sxs-lookup"><span data-stu-id="b0a8a-165">Binary</span></span>|<span data-ttu-id="b0a8a-166">[Transport]</span><span class="sxs-lookup"><span data-stu-id="b0a8a-166">Transport</span></span>|<span data-ttu-id="b0a8a-167">サポートされていません</span><span class="sxs-lookup"><span data-stu-id="b0a8a-167">Not supported</span></span>|<span data-ttu-id="b0a8a-168">OleTransactions</span><span class="sxs-lookup"><span data-stu-id="b0a8a-168">OleTransactions</span></span>|  
|<span data-ttu-id="b0a8a-169">NetMsmqBinding</span><span class="sxs-lookup"><span data-stu-id="b0a8a-169">NetMsmqBinding</span></span>|<span data-ttu-id="b0a8a-170">MSMQ (MSMQ)</span><span class="sxs-lookup"><span data-stu-id="b0a8a-170">MSMQ</span></span>|<span data-ttu-id="b0a8a-171">Binary</span><span class="sxs-lookup"><span data-stu-id="b0a8a-171">Binary</span></span>|<span data-ttu-id="b0a8a-172">メッセージ</span><span class="sxs-lookup"><span data-stu-id="b0a8a-172">Message</span></span>|<span data-ttu-id="b0a8a-173">サポートされていません</span><span class="sxs-lookup"><span data-stu-id="b0a8a-173">Not supported</span></span>|<span data-ttu-id="b0a8a-174">サポートされていません</span><span class="sxs-lookup"><span data-stu-id="b0a8a-174">Not supported</span></span>|  
|<span data-ttu-id="b0a8a-175">customBinding</span><span class="sxs-lookup"><span data-stu-id="b0a8a-175">CustomBinding</span></span>|<span data-ttu-id="b0a8a-176">決定します。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-176">You decide</span></span>|<span data-ttu-id="b0a8a-177">決定します。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-177">You decide</span></span>|<span data-ttu-id="b0a8a-178">決定します。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-178">You decide</span></span>|<span data-ttu-id="b0a8a-179">決定します。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-179">You decide</span></span>|<span data-ttu-id="b0a8a-180">決定します。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-180">You decide</span></span>|  
  
 <span data-ttu-id="b0a8a-181">通信ニーズに基づいて特定のバインディングを選択することができます。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-181">You can select a particular binding based on your communication needs.</span></span> <span data-ttu-id="b0a8a-182">以下に例を示します。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-182">For example:</span></span>  
  
-   <span data-ttu-id="b0a8a-183">**BasicHttpBinding**単純な Web サービスとの相互運用に適しています。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-183">**BasicHttpBinding** is designed for interoperability with simple Web services.</span></span> <span data-ttu-id="b0a8a-184">BasicHttpBinding では、HTTP をトランスポートとメッセージ エンコーディングにテキストを使用します。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-184">BasicHttpBinding uses HTTP for the transport and text for the message encoding.</span></span>  
  
-   <span data-ttu-id="b0a8a-185">**WSHttpBinding**のさまざまな ws-利用することがより高度な Web サービスとの相互運用に適しています \* プロトコル。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-185">**WSHttpBinding** is designed for interoperability with more advanced Web services that might take advantage of different WS-\* protocols.</span></span>  <span data-ttu-id="b0a8a-186">WSHttpBinding では、トランスポートとメッセージ エンコーディングにテキストを HTTP も使用します。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-186">WSHttpBinding also uses HTTP for the transport and text for the message encoding.</span></span>  
  
-   <span data-ttu-id="b0a8a-187">**NetTcpBinding**と**NetNamedPipeBinding**用に設計された効率的なまたはを実行およびその他の WCF アプリケーションとの通信を ant マシン間で同じコンピューターにそれぞれします。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-187">**NetTcpBinding** and **NetNamedPipeBinding** are designed for efficient and perform ant communication with other WCF applications across machines or on the same machine respectively.</span></span>  
  
-   <span data-ttu-id="b0a8a-188">使用することが実行時に 1 つまたは複数のカスタム プロトコル チャネルを使用して、最大限の柔軟性を必要がある場合、 **CustomBinding**バインド要素、バインドの作成を決定する可能性を提供します。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-188">If you need maximum flexibility by using one or multiple custom protocol channels at runtime, you can use the **CustomBinding** that gives you the possibility to decide which binding elements compose your binding.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="b0a8a-189">バインドには、応答時間とスループットに関してさまざまな特性があります。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-189">Bindings have different characteristics in terms of response time and throughput.</span></span> <span data-ttu-id="b0a8a-190">そのため、NetTcpBindind と NetNamesPipeBinding 可能であればパフォーマンスを向上する一般的なアドバイスが使用しています。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-190">So, the general advice to increase performance is using the NetTcpBindind and NetNamesPipeBinding when possible.</span></span>  
  
## <a name="use-the-tcp-transport-and-binary-message-encoding-to-maximize-wcf-adapter-throughput-and-minimize-wcf-adapter-latency"></a><span data-ttu-id="b0a8a-191">TCP トランスポートとバイナリ メッセージを WCF アダプターのスループットを最大化し、WCF アダプターの待機時間を最小限に抑えるエンコーディングを使用して、</span><span class="sxs-lookup"><span data-stu-id="b0a8a-191">Use the TCP transport and binary message encoding to maximize WCF adapter throughput and minimize WCF adapter latency</span></span>  
 <span data-ttu-id="b0a8a-192">スループットを最大化するときに Wcf-nettcp アダプターを使用します。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-192">Use the WCF-NetTcp adapter when possible to maximize throughput.</span></span> <span data-ttu-id="b0a8a-193">TCP/IP トランスポート プロトコルおよびバイナリ メッセージ エンコーディングと比較してその他の WCF - パフォーマンスの向上をまとめて提供する、Wcf-nettcp アダプターを使用して \* アダプター。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-193">The WCF-NetTcp adapter uses TCP/IP transport protocol and binary message encoding which together provide improved performance as compared to other WCF-\* adapters.</span></span>  
  
 <span data-ttu-id="b0a8a-194">Wcf-custom (または Wcf-customisolated アダプターの受信場所) を構成にする代わりに、 **customBinding**バインドの種類。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-194">Alternatively, you can configure the WCF-Custom (or WCF-CustomIsolated adapter for Receive Locations) with a **customBinding** binding type.</span></span> <span data-ttu-id="b0a8a-195">次に、追加、 **binaryMessageEncoding**バインド バイナリ メッセージ エンコーディングを実装する拡張機能と**tcpTransport**バインドのメッセージのトランスポート プロトコルとして TCP/IP を実装する拡張機能。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-195">Then, add the **binaryMessageEncoding** binding extension to implement binary message encoding and the **tcpTransport** binding extension to implement TCP/IP as the message transport protocol.</span></span> <span data-ttu-id="b0a8a-196">このアプローチを選択し、必要なバインド要素のみを構成して、BizTalk メッセージング エンジンの既定の動作を拡張するカスタム チャネルを作成することを許容するため非常に柔軟性があります。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-196">This approach is very flexible because it allows you to select and configure only the binding elements you need and to create custom channels to extend the default behavior of the BizTalk Messaging Engine.</span></span> <span data-ttu-id="b0a8a-197">WCF カスタム アダプターを実装する場合、 **customBinding**バインドの種類、バインド拡張機能の構成パラメーターをスループットを最大化し、待機時間を最小限に抑えるのため、これらの値を指定します。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-197">If you implement the WCF-Custom adapter with the **customBinding** binding type, specify these values for the binding extension Configuration parameters to maximize throughput and minimize latency.</span></span>  
  
 <span data-ttu-id="b0a8a-198">**送信ポートの構成値。**</span><span class="sxs-lookup"><span data-stu-id="b0a8a-198">**Send Port Configuration Values:**</span></span>  
  
|<span data-ttu-id="b0a8a-199">設定</span><span class="sxs-lookup"><span data-stu-id="b0a8a-199">Setting</span></span>|<span data-ttu-id="b0a8a-200">既定値</span><span class="sxs-lookup"><span data-stu-id="b0a8a-200">Default value</span></span>|<span data-ttu-id="b0a8a-201">推奨値</span><span class="sxs-lookup"><span data-stu-id="b0a8a-201">Recommended value</span></span>|  
|-------------|-------------------|-----------------------|  
|<span data-ttu-id="b0a8a-202">**TcpTransportBindingElement.ConnectionPoolSettings.maxOutboundConnectionsPerEndpoint** - を取得または接続プールにキャッシュされている各エンドポイントの発信接続の最大数を設定します。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-202">**TcpTransportBindingElement.ConnectionPoolSettings.maxOutboundConnectionsPerEndpoint** - Gets or sets the maximum number of outbound connections for each endpoint cached in the connection pool.</span></span> <span data-ttu-id="b0a8a-203">これによって、一意のリモート エンドポイントのそれぞれに対してキャッシュされる接続数が制限されます。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-203">This limits the number of connections that are cached for each unique remote endpoint.</span></span> <span data-ttu-id="b0a8a-204">アクティブなクライアント接続することでこの値を超えた場合、サービスが、クライアントに応答しないように表示され、予想される一意の各リモート エンドポイントに対してキャッシュされる接続の最大数に対応するために、この値を調整する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-204">If this value is exceeded by having more active client connections, the service may appear unresponsive to the client, and this value should be adjusted to accommodate the maximum number of expected connections that are cached for each unique remote endpoint.</span></span> <span data-ttu-id="b0a8a-205">このプロパティの詳細については、次を参照してください。 [TcpConnectionPoolSettings.MaxOutboundConnectionsPerEndpoint プロパティ](http://go.microsoft.com/fwlink/?LinkId=157737)(http://go.microsoft.com/fwlink/?LinkId=157737) msdn です。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-205">For more information about this property, see [TcpConnectionPoolSettings.MaxOutboundConnectionsPerEndpoint Property](http://go.microsoft.com/fwlink/?LinkId=157737) (http://go.microsoft.com/fwlink/?LinkId=157737) on MSDN.</span></span>|<span data-ttu-id="b0a8a-206">10</span><span class="sxs-lookup"><span data-stu-id="b0a8a-206">10</span></span>|<span data-ttu-id="b0a8a-207">お試しください > = 20</span><span class="sxs-lookup"><span data-stu-id="b0a8a-207">Try >= 20</span></span>|  
  
 <span data-ttu-id="b0a8a-208">**ポートの構成値が表示されます。**</span><span class="sxs-lookup"><span data-stu-id="b0a8a-208">**Receive Port Configuration Values:**</span></span>  
  
|<span data-ttu-id="b0a8a-209">設定</span><span class="sxs-lookup"><span data-stu-id="b0a8a-209">Setting</span></span>|<span data-ttu-id="b0a8a-210">.NET Framework 4 の既定値</span><span class="sxs-lookup"><span data-stu-id="b0a8a-210">Default value for .NET Framework 4</span></span>|<span data-ttu-id="b0a8a-211">.NET Framework 4 の推奨値</span><span class="sxs-lookup"><span data-stu-id="b0a8a-211">Recommended value for .NET Framework 4</span></span>|<span data-ttu-id="b0a8a-212">.NET Framework 3.5 用の既定値</span><span class="sxs-lookup"><span data-stu-id="b0a8a-212">Default value for .NET Framework 3.5</span></span>|<span data-ttu-id="b0a8a-213">.NET Framework 3.5 の推奨値</span><span class="sxs-lookup"><span data-stu-id="b0a8a-213">Recommended value for .NET Framework 3.5</span></span>|  
|-------------|----------------------------------------|--------------------------------------------|------------------------------------------|----------------------------------------------|  
|<span data-ttu-id="b0a8a-214">**TcpTransportBindingElement.MaxPendingAccepts** - を取得または設定の最大保留中の非同期受け入れ操作数、サービスへの着信接続を処理するために使用できます。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-214">**TcpTransportBindingElement.MaxPendingAccepts** - Gets or sets the maximum number of pending asynchronous accept operations that are available for processing incoming connections to the service.</span></span> <span data-ttu-id="b0a8a-215">高レベルの同時接続が開始される場合は、この値は十分でない可能性があります、と共に調整する必要があります、 **MaxPendingConnections**より高いレベルの同時クライアント接続を処理するためにプロパティしようとします。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-215">For scenarios with high levels of simultaneous connection initiations, this value may be inadequate and should be adjusted along with the **MaxPendingConnections** property to handle higher levels of concurrent client connection attempts.</span></span> <span data-ttu-id="b0a8a-216">このプロパティをサービスをホストするコンピューターに存在するプロセッサの数より大きい値に設定する必要します。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-216">It should not be necessary to set this property to a value greater than the number of processors present in the machine hosting the service.</span></span> <span data-ttu-id="b0a8a-217">このプロパティの詳細については、次を参照してください。 [ConnectionOrientedTransportBindingElement.MaxPendingAccepts プロパティ](http://go.microsoft.com/fwlink/?LinkId=157738)(http://go.microsoft.com/fwlink/?LinkId=157738) msdn です。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-217">For more information about this property, see [ConnectionOrientedTransportBindingElement.MaxPendingAccepts Property](http://go.microsoft.com/fwlink/?LinkId=157738) (http://go.microsoft.com/fwlink/?LinkId=157738) on MSDN.</span></span>|<span data-ttu-id="b0a8a-218">1</span><span class="sxs-lookup"><span data-stu-id="b0a8a-218">1</span></span>|<span data-ttu-id="b0a8a-219">2 \* は ProcessorCount</span><span class="sxs-lookup"><span data-stu-id="b0a8a-219">2\*ProcessorCount</span></span>|<span data-ttu-id="b0a8a-220">1</span><span class="sxs-lookup"><span data-stu-id="b0a8a-220">1</span></span>|<span data-ttu-id="b0a8a-221">お試しください > = 20</span><span class="sxs-lookup"><span data-stu-id="b0a8a-221">Try >= 20</span></span>|  
|<span data-ttu-id="b0a8a-222">**TcpTransportBindingElement.MaxPendingConnections** - を取得またはサービスでのディスパッチを待機している接続の最大数を設定します。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-222">**TcpTransportBindingElement.MaxPendingConnections** - Gets or sets the maximum number of connections awaiting dispatch on the service.</span></span> <span data-ttu-id="b0a8a-223">これにより、ディスパッチを待機している同時クライアント接続の数が制限されます。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-223">This limits the number of simultaneous client connections awaiting dispatch.</span></span> <span data-ttu-id="b0a8a-224">この値が小さすぎる場合は、クライアント接続の試行がサービスによって拒否されます。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-224">If this value is too low, client connection attempts may be rejected by the service.</span></span> <span data-ttu-id="b0a8a-225">高すぎる場合は、サービスは負荷が高い期間中またはクライアントに応答が遅いを表示可能性があります。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-225">If it is too high, the service may appear slow or unresponsive to clients during heavy load periods.</span></span> <span data-ttu-id="b0a8a-226">このプロパティは、サービスを実行し、最大容量、それを超えないようにする値に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-226">This property should be set to a value that allows the service to run at full capacity, and no higher.</span></span> <span data-ttu-id="b0a8a-227">スタックの上位層**AcceptDispatch**、その接続は、ディスパッチ待機接続のキューから削除します。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-227">When a higher layer in the stack calls **AcceptDispatch**, that connection is removed from the queue of connections awaiting dispatch.</span></span> <span data-ttu-id="b0a8a-228">このプロパティの詳細については、次を参照してください。 [ConnectionOrientedTransportBindingElement.MaxPendingConnections プロパティ](http://go.microsoft.com/fwlink/?LinkId=157735)(http://go.microsoft.com/fwlink/?LinkId=157735) msdn です。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-228">For more information about this property, see [ConnectionOrientedTransportBindingElement.MaxPendingConnections Property](http://go.microsoft.com/fwlink/?LinkId=157735) (http://go.microsoft.com/fwlink/?LinkId=157735) on MSDN.</span></span>|<span data-ttu-id="b0a8a-229">10</span><span class="sxs-lookup"><span data-stu-id="b0a8a-229">10</span></span>|<span data-ttu-id="b0a8a-230">16 \* は ProcessorCount</span><span class="sxs-lookup"><span data-stu-id="b0a8a-230">16\*ProcessorCount</span></span>|<span data-ttu-id="b0a8a-231">10</span><span class="sxs-lookup"><span data-stu-id="b0a8a-231">10</span></span>|<span data-ttu-id="b0a8a-232">お試しください > = 20</span><span class="sxs-lookup"><span data-stu-id="b0a8a-232">Try >= 20</span></span>|  
|<span data-ttu-id="b0a8a-233">**TcpTransportBindingElement.ListenBacklog** - を取得または保留可能なキュー内の接続要求の最大数を設定します。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-233">**TcpTransportBindingElement.ListenBacklog** - Gets or sets the maximum number of queued connection requests that can be pending.</span></span> <span data-ttu-id="b0a8a-234">**ListenBacklog** 「受入保留」の数を記述するソケット レベルのプロパティは、キューに入れられる要求。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-234">**ListenBacklog** is a socket-level property that describes the number of "pending accept" requests to be queued.</span></span> <span data-ttu-id="b0a8a-235">基になるソケット キューが同時接続の最大数を超えていないことを確認します。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-235">Ensure that the underlying socket queue is not exceeded by the maximum number of concurrent connections.</span></span> <span data-ttu-id="b0a8a-236">このプロパティの詳細については、次を参照してください。 [TcpTransportBindingElement.ListenBacklog プロパティ](http://go.microsoft.com/fwlink/?LinkId=157734)(http://go.microsoft.com/fwlink/?LinkId=157734) msdn です。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-236">For more information about this property see [TcpTransportBindingElement.ListenBacklog Property](http://go.microsoft.com/fwlink/?LinkId=157734) (http://go.microsoft.com/fwlink/?LinkId=157734) on MSDN.</span></span>|<span data-ttu-id="b0a8a-237">10</span><span class="sxs-lookup"><span data-stu-id="b0a8a-237">10</span></span>|<span data-ttu-id="b0a8a-238">16 \* は ProcessorCount</span><span class="sxs-lookup"><span data-stu-id="b0a8a-238">16\*ProcessorCount</span></span>|<span data-ttu-id="b0a8a-239">10</span><span class="sxs-lookup"><span data-stu-id="b0a8a-239">10</span></span>|<span data-ttu-id="b0a8a-240">お試しください > = 20</span><span class="sxs-lookup"><span data-stu-id="b0a8a-240">Try >= 20</span></span>|  
  
 <span data-ttu-id="b0a8a-241">**Wcf-custom または Wcf-customisolated 受信場所にサービスのための ServiceThrottlingBehavior の動作を追加し、次の設定を使用します。**</span><span class="sxs-lookup"><span data-stu-id="b0a8a-241">**Add the ServiceThrottlingBehavior service behavior to a WCF-Custom or WCF-CustomIsolated Receive Location and use the following settings:**</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="b0a8a-242">最初に追加する必要があるための ServiceThrottlingBehavior のサービス動作のいずれの要素を変更することができます、前に、 **serviceThrottling**する動作拡張機能、**動作**のタブ、 **WCF カスタム\*トランスポートのプロパティ** ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-242">Before any elements of the ServiceThrottlingBehavior service behavior can be modified, you must first add the **serviceThrottling** behavior extension to the **Behaviors** tab of the **WCF-Custom\* Transport Properties** dialog box.</span></span> <span data-ttu-id="b0a8a-243">ServiceThrottling を動作のリストに追加するには、選択、**動作**のタブ、 **Wcf-custom\*トランスポートのプロパティ**ダイアログ ボックスで、右クリックして**ServiceBehavior** [**動作**、] をクリックして**拡張機能の追加**を選択します**serviceThrottling**、順にクリックします**OK**します。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-243">To add serviceThrottling to the list of Behaviors, select the **Behaviors** tab of the **WCF-Custom\* Transport Properties** dialog box, right-click **ServiceBehavior** under **Behavior**, click **Add extension**, select **serviceThrottling**, and then click **OK**.</span></span> <span data-ttu-id="b0a8a-244">使用可能なプロパティを選択するには、をクリック**ServiceThrottlingElement**必要に応じて、プロパティの値を変更します。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-244">Then click to select the properties available under **ServiceThrottlingElement** and change the value for the properties as needed.</span></span>  
  
|<span data-ttu-id="b0a8a-245">設定</span><span class="sxs-lookup"><span data-stu-id="b0a8a-245">Setting</span></span>|<span data-ttu-id="b0a8a-246">.NET Framework 4 の既定値</span><span class="sxs-lookup"><span data-stu-id="b0a8a-246">Default value for .NET Framework 4</span></span>|<span data-ttu-id="b0a8a-247">.NET Framework 4 の推奨値</span><span class="sxs-lookup"><span data-stu-id="b0a8a-247">Recommended value for .NET Framework 4</span></span>|<span data-ttu-id="b0a8a-248">.NET Framework 3.5 用の既定値</span><span class="sxs-lookup"><span data-stu-id="b0a8a-248">Default value for .NET Framework 3.5</span></span>|<span data-ttu-id="b0a8a-249">推奨値を .net Framework 3.5</span><span class="sxs-lookup"><span data-stu-id="b0a8a-249">Recommended value for .Net Framework 3.5</span></span>|  
|-------------|----------------------------------------|--------------------------------------------|------------------------------------------|----------------------------------------------|  
|<span data-ttu-id="b0a8a-250">**ServiceThrottlingBehavior.MaxConcurrentCalls** - を取得または設定でアクティブに処理されるメッセージの最大数を指定する値を**ServiceHost**します。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-250">**ServiceThrottlingBehavior.MaxConcurrentCalls** - Gets or sets a value that specifies the maximum number of messages actively processing across a **ServiceHost**.</span></span> <span data-ttu-id="b0a8a-251">**MaxConcurrentCalls**プロパティでアクティブに処理されるメッセージの最大数を指定します、 **ServiceHost**オブジェクト。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-251">The **MaxConcurrentCalls** property specifies the maximum number of messages actively processing across a **ServiceHost** object.</span></span> <span data-ttu-id="b0a8a-252">各チャネルがメッセージの値に対してカウントされませんが保留中のいずれかを指定できます**MaxConcurrentCalls**まで WCF は、その処理を開始します。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-252">Each channel can have one pending message that does not count against the value of **MaxConcurrentCalls** until WCF begins to process it.</span></span> <span data-ttu-id="b0a8a-253">このプロパティの詳細については、次を参照してください。 [ServiceThrottlingBehavior.MaxConcurrentCalls](http://go.microsoft.com/fwlink/?LinkId=157838) (http://go.microsoft.com/fwlink/?LinkId=157838) msdn です。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-253">For more information about this property, see [ServiceThrottlingBehavior.MaxConcurrentCalls](http://go.microsoft.com/fwlink/?LinkId=157838) (http://go.microsoft.com/fwlink/?LinkId=157838) on MSDN.</span></span> <span data-ttu-id="b0a8a-254">BizTalk Wcf-custom と Wcf-customisolated の既定値は受信アダプター **MaxConcurrentCalls**プロパティは**16** CPU ごと。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-254">The default value for the BizTalk WCF-Custom and WCF-CustomIsolated receive adapters **MaxConcurrentCalls** property is **16** per CPU.</span></span> <span data-ttu-id="b0a8a-255">**注:** BizTalk Server WCF 受信アダプター以外は、Wcf-custom および Wcf-customisolated アダプター公開、**同時呼び出しの最大**プロパティを**バインド**のタブ、 **WCF\*トランスポートのプロパティ** ダイアログ ボックスに、この動作を構成します。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-255">**Note:**  BizTalk Server WCF receive adapters other than the WCF-Custom and WCF-CustomIsolated adapter expose a **Maximum Concurrent Calls** property on the **Binding** tab of the **WCF-\* Transport Properties** dialog box to configure this behavior.</span></span> <span data-ttu-id="b0a8a-256">既定値、**同時呼び出しの最大**動作は**200**します。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-256">The default value of the **Maximum Concurrent Calls** behavior is **200**.</span></span>|<span data-ttu-id="b0a8a-257">16 \* は ProcessorCount</span><span class="sxs-lookup"><span data-stu-id="b0a8a-257">16\*ProcessorCount</span></span>|<span data-ttu-id="b0a8a-258">16 \* は ProcessorCount</span><span class="sxs-lookup"><span data-stu-id="b0a8a-258">16\*ProcessorCount</span></span>|<span data-ttu-id="b0a8a-259">-16 BizTalk Wcf-custom と Wcf-customisolated の受信アダプターです。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-259">-   16 for the BizTalk WCF-Custom and WCF-CustomIsolated receive adapters.</span></span><br /><span data-ttu-id="b0a8a-260">~ 200、他の WCF 受信アダプターです。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-260">-   200 for the other WCF receive adapters.</span></span>|<span data-ttu-id="b0a8a-261">-お試しください > Wcf-custom および Wcf-customisolated 受信アダプター用に 200 を = です。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-261">-   Try >= 200 for the WCF-Custom and WCF-CustomIsolated receive adapters.</span></span><br /><span data-ttu-id="b0a8a-262">-> の 200 を再試行してください、**同時呼び出しの最大**プロパティを**バインド**のタブ、 **wcf-\*トランスポートのプロパティ**BizTalk Server WCF の ダイアログ ボックスWcf-custom および Wcf-customisolated アダプター以外のアダプターが表示されます。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-262">-   Try > 200 for the **Maximum Concurrent Calls** property on the **Binding** tab of the **WCF-\* Transport Properties** dialog box for BizTalk Server WCF receive adapters other than the WCF-Custom and WCF-CustomIsolated adapter.</span></span>|  
|<span data-ttu-id="b0a8a-263">**ServiceThrottlingBehavior.maxConcurrentInstances** - を取得または設定の最大数を指定する値**InstanceContext**一度に実行できるサービス内のオブジェクト。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-263">**ServiceThrottlingBehavior.maxConcurrentInstances** - Gets or sets a value that specifies the maximum number of **InstanceContext** objects in the service that can execute at once.</span></span> <span data-ttu-id="b0a8a-264">**MaxConcurrentInstances**プロパティの最大数を指定する**InstanceContext**サービス内のオブジェクト。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-264">The **MaxConcurrentInstances** property specifies the maximum number of **InstanceContext** objects in the service.</span></span> <span data-ttu-id="b0a8a-265">間のリレーションシップに留意することが重要、 **MaxConcurrentInstances**プロパティおよび**InstanceContextMode**プロパティ。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-265">It is important to keep in mind the relationship between the **MaxConcurrentInstances** property and the **InstanceContextMode** property.</span></span> <span data-ttu-id="b0a8a-266">場合**InstanceContextMode** PerSession には、結果の値はセッションの合計数。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-266">If **InstanceContextMode** is PerSession, the resulting value is the total number of sessions.</span></span> <span data-ttu-id="b0a8a-267">場合**InstanceContextMode** PerCall は、結果として得られる値は、同時呼び出しの数。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-267">If **InstanceContextMode** is PerCall, the resulting value is the number of concurrent calls.</span></span> <span data-ttu-id="b0a8a-268">最大数の中にメッセージを受信した場合**InstanceContext**オブジェクトが既に存在、まで、メッセージが保持されている、 **InstanceContext**オブジェクトを閉じる。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-268">If a message arrives while the maximum number of **InstanceContext** objects already exist, the message is held until an **InstanceContext** object closes.</span></span> <span data-ttu-id="b0a8a-269">このプロパティの詳細については、次を参照してください。 [ServiceThrottlingBehavior.MaxConcurrentInstances プロパティ](http://go.microsoft.com/fwlink/?LinkId=157897)(http://go.microsoft.com/fwlink/?LinkId=157897) msdn です。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-269">For more information about this property, see [ServiceThrottlingBehavior.MaxConcurrentInstances Property](http://go.microsoft.com/fwlink/?LinkId=157897) (http://go.microsoft.com/fwlink/?LinkId=157897) on MSDN.</span></span> <span data-ttu-id="b0a8a-270">Wcf-custom および Wcf-customisolated 受信アダプター MaxConcurrentInstances プロパティの既定値は**116** CPU ごと。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-270">The default value for the WCF-Custom and WCF-CustomIsolated receive adapter MaxConcurrentInstances property is **116** per CPU.</span></span> <span data-ttu-id="b0a8a-271">**注:** WCF 受信場所はこのクラスが ServiceBehavior(InstanceContextMode= としてマークされているためと Microsoft.BizTalk.Adapter.Wcf.Runtime.dll アセンブリに含まれる BizTalkServiceInstance クラスのインスタンスとして実装します。InstanceContextMode.Single、ConcurrencyMode=ConcurrencyMode.Multiple)。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-271">**Note:**  Since WCF receive locations are implemented as instances of the BizTalkServiceInstance class contained in the Microsoft.BizTalk.Adapter.Wcf.Runtime.dll assembly and since this class is marked as ServiceBehavior(InstanceContextMode=InstanceContextMode.Single, ConcurrencyMode=ConcurrencyMode.Multiple).</span></span> <span data-ttu-id="b0a8a-272">すべての着信要求は同じシングルトン オブジェクトによって管理され、このパラメーターは無視されます。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-272">all incoming requests are managed by the same singleton object and this parameter is ignored.</span></span> <span data-ttu-id="b0a8a-273">受信場所の特定の WCF カスタムに maxConcurrentInstances プロパティを設定できるようにも何も起こりません、アクティブなインスタンスの数は常に 1 に等しいためです。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-273">So setting the maxConcurrentInstances property on certain WCF-Custom receive locations has no effect, since the number of active instances is always equal to 1.</span></span>|<span data-ttu-id="b0a8a-274">116 \* は ProcessorCount</span><span class="sxs-lookup"><span data-stu-id="b0a8a-274">116\*ProcessorCount</span></span>|<span data-ttu-id="b0a8a-275">116 \* は ProcessorCount</span><span class="sxs-lookup"><span data-stu-id="b0a8a-275">116\*ProcessorCount</span></span>|<span data-ttu-id="b0a8a-276">26</span><span class="sxs-lookup"><span data-stu-id="b0a8a-276">26</span></span>|<span data-ttu-id="b0a8a-277">お試しください > = 200</span><span class="sxs-lookup"><span data-stu-id="b0a8a-277">Try >= 200</span></span>|  
|<span data-ttu-id="b0a8a-278">**ServiceThrottlingBehavior.MaxConcurrentSessions** - **MaxConcurrentSessions**プロパティを取得またはセッションの最大数を設定、 **ServiceHost**オブジェクトが同時に受け入れることができます。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-278">**ServiceThrottlingBehavior.MaxConcurrentSessions** - The **MaxConcurrentSessions** property gets or sets the maximum number of sessions a **ServiceHost** object can accept at one time.</span></span> <span data-ttu-id="b0a8a-279">理解することが重要、セッションではここでは信頼できるセッションをサポートするチャネルのみに限定されません。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-279">It is important to understand that sessions in this case does is not limited to only channels that support reliable sessions.</span></span> <span data-ttu-id="b0a8a-280">各リスナー オブジェクトは、保留中の値に対してカウントされませんチャネル セッションのいずれかを指定できます**MaxConcurrentSessions**まで WCF チャネル セッションを受け入れるし、チャネル セッションのメッセージの処理を開始します。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-280">Each listener object can have one pending channel session that does not count against the value of **MaxConcurrentSessions** until WCF accepts the channel session and begins processing the channel session messages.</span></span> <span data-ttu-id="b0a8a-281">このプロパティで最も役に立つは、セッションを使用するシナリオ。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-281">This property is most useful in scenarios that make use of sessions.</span></span> <span data-ttu-id="b0a8a-282">このプロパティがクライアント スレッドの数よりも小さい値に設定されている場合、複数のクライアントからの要求は、同じソケット接続でキューに登録を取得可能性があります。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-282">When this property is set to a value less than the number of client threads, the requests from multiple clients may get queued in the same socket connection.</span></span> <span data-ttu-id="b0a8a-283">サービスでセッションを作成していないクライアントからの要求がブロックされます。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-283">The requests from the client that has not created a session with the service will be blocked.</span></span> <span data-ttu-id="b0a8a-284">これらはブロックされたまま、サービスの他のクライアントとのセッションが閉じるまで、サービスで開いているセッションの数に指定された値に達した場合**MaxConcurrentSessions**します。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-284">They will remain blocked until the service closes its session with the other clients, if the number of open sessions on the service has reached the value specified for **MaxConcurrentSessions**.</span></span> <span data-ttu-id="b0a8a-285">提供されないクライアントの要求が、タイムアウトしたか、およびサービスがセッションを閉じます。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-285">The client requests that are not served are then timed out, and the service closes the session.</span></span> <span data-ttu-id="b0a8a-286">このような状況を避けるためには、クライアントを実行するスレッドの異なるアプリケーション ドメインから別のソケット接続で要求メッセージを受け入れるように検討してください。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-286">To avoid this situation, consider running the client threads from different application domains so that the request messages are accepted by different socket connections.</span></span> <span data-ttu-id="b0a8a-287">このプロパティの詳細については、次を参照してください。 [ServiceThrottlingBehavior.MaxConcurrentSessions プロパティ](http://go.microsoft.com/fwlink/?LinkID=157864)(http://go.microsoft.com/fwlink/?LinkId=157864) msdn です。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-287">For more information about this property, see [ServiceThrottlingBehavior.MaxConcurrentSessions Property](http://go.microsoft.com/fwlink/?LinkID=157864) (http://go.microsoft.com/fwlink/?LinkId=157864) on MSDN.</span></span>|<span data-ttu-id="b0a8a-288">100 \* は ProcessorCount</span><span class="sxs-lookup"><span data-stu-id="b0a8a-288">100\*ProcessorCount</span></span>|<span data-ttu-id="b0a8a-289">100 \* は ProcessorCount</span><span class="sxs-lookup"><span data-stu-id="b0a8a-289">100\*ProcessorCount</span></span>|<span data-ttu-id="b0a8a-290">10</span><span class="sxs-lookup"><span data-stu-id="b0a8a-290">10</span></span>|<span data-ttu-id="b0a8a-291">お試しください > = 200</span><span class="sxs-lookup"><span data-stu-id="b0a8a-291">Try >= 200</span></span>|  
  
 <span data-ttu-id="b0a8a-292">ポートの構成設定の変更が適用されます、系統的; 変更各パラメーターを個別に変更し、パフォーマンスと全体的な安定性の変更の効果をテストします。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-292">When modifying port configuration settings apply changes methodically; modify each parameter individually and, test the effects of the change on performance and overall stability.</span></span> <span data-ttu-id="b0a8a-293">常に、適切な値を適用するか、特定のシナリオに依存します。 値の設定が低すぎる場合、スケーラビリティを削減できます。一方、値の設定が高すぎると、アプリケーションの要件は、コンピューター上の物理リソースの容量を超える可能性があります。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-293">As always, the proper value to apply depends on the particular scenario: if a value is set too low, scalability can be reduced; whereas if a value is set too high, the application requirement may exceed the capacity of physical resources on the computer.</span></span> <span data-ttu-id="b0a8a-294">さらに、これらのプロパティが関連するのでは、首尾一貫した方法で、設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-294">In addition, since these properties are related, they should be set in a consistent and coherent way.</span></span> <span data-ttu-id="b0a8a-295">WCF サービスのパフォーマンスを制御するための ServiceThrottlingBehavior の使用に関する詳細については、次を参照してください。[パフォーマンスを制御する WCF サービスを使用して ServiceThrottlingBehavior](http://go.microsoft.com/fwlink/?LinkId=157908) (http://go.microsoft.com/fwlink/?LinkId=157908) msdn です。</span><span class="sxs-lookup"><span data-stu-id="b0a8a-295">For more information about using ServiceThrottlingBehavior to control WCF Service Performance, see [Using ServiceThrottlingBehavior to Control WCF Service Performance](http://go.microsoft.com/fwlink/?LinkId=157908) (http://go.microsoft.com/fwlink/?LinkId=157908) on MSDN.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b0a8a-296">参照</span><span class="sxs-lookup"><span data-stu-id="b0a8a-296">See Also</span></span>  
 [<span data-ttu-id="b0a8a-297">BizTalk Server パフォーマンスの最適化</span><span class="sxs-lookup"><span data-stu-id="b0a8a-297">Optimizing BizTalk Server Performance</span></span>](../technical-guides/optimizing-biztalk-server-performance.md)