---
title: ネットワーク最適化 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 9ff0392f-37ae-4ca6-8cc6-d53065de64c5
caps.latest.revision: 6
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 04c6f8250fb67b74c1faad2feeb46207aeb902e6
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65242608"
---
# <a name="network-optimizations"></a><span data-ttu-id="2c3bb-102">ネットワークの最適化</span><span class="sxs-lookup"><span data-stu-id="2c3bb-102">Network Optimizations</span></span>
<span data-ttu-id="2c3bb-103">BizTalk Server コンピューターが SQL Server コンピューターから独立した BizTalk Server 環境で BizTalk Server によって処理される各メッセージには、ネットワーク経由で通信が必要です。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-103">In a BizTalk Server environment where the BizTalk Server computer(s) are separate from the SQL Server computer(s), each and every message processed by BizTalk Server requires communication over the network.</span></span> <span data-ttu-id="2c3bb-104">この通信には、BizTalk Server コンピューターと BizTalk メッセージ ボックス データベース、BizTalk 管理データベース、BAM データベース、および他のデータベース間のかなりのトラフィックが含まれています。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-104">This communication includes considerable traffic between the BizTalk Server computers and the BizTalk Message Box database(s), the BizTalk Management database(s), the BAM databases, and other databases.</span></span> <span data-ttu-id="2c3bb-105">高負荷のシナリオでこの通信により、かなりのネットワーク トラフィックとネットワークの設定が最適化されていない、十分なネットワーク インターフェイス カードがインストールされている場合、または十分なネットワーク帯域幅が場合は特に、ボトルネックになることができます。ご利用いただけます。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-105">In high-load scenarios, this communication can result in considerable network traffic and can become a bottleneck, especially when network settings have not been optimized, not enough network interface cards are installed, or insufficient network bandwidth is available.</span></span>  
  
 <span data-ttu-id="2c3bb-106">このトピックでは、同じ HYPER-V ホスト コンピューターで実行されている HYPER-V 仮想マシン間のネットワークのパフォーマンスを向上させるための手順を提供し、ネットワークのパフォーマンスを向上させるための一般的な推奨事項を提供します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-106">This topic provides steps for improving networking performance between Hyper-V virtual machines running on the same Hyper-V host computer and provides some general recommendations for improving network performance.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2c3bb-107">ネットワーク IO がボトルネックである最も一般的なインジケーター カウンターは、「SQL Server: Wait Statistics\Network IO 待機します」。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-107">The most common indicator that Network IO is a bottleneck is the counter “SQL Server:Wait Statistics\Network IO waits.”</span></span> <span data-ttu-id="2c3bb-108">ときの値は、**平均待機時間**このカウンターの値がより大きい 0 個の 1 つ以上、SQL Server コンピューターのネットワークの IO がボトルネックになっています。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-108">When the value for **Avg Wait Time** in this counter is greater than zero on one or more of your SQL Server computers, then Network IO is a bottleneck.</span></span>  
  
## <a name="improving-network-performance-of-biztalk-server-on-hyper-v"></a><span data-ttu-id="2c3bb-109">Hyper V 上の BizTalk Server のネットワーク パフォーマンスを向上させる</span><span class="sxs-lookup"><span data-stu-id="2c3bb-109">Improving Network Performance of BizTalk Server on Hyper-V</span></span>  
  
### <a name="configure-hyper-v-virtual-machines-that-are-running-on-the-same-hyper-v-host-computer-to-use-a-private-virtual-network"></a><span data-ttu-id="2c3bb-110">プライベート仮想ネットワークを使用する同じ HYPER-V ホスト コンピューターで実行されている HYPER-V 仮想マシンの構成します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-110">Configure Hyper-V Virtual Machines that are Running on the same Hyper-V host computer to use a Private Virtual Network</span></span>  
 <span data-ttu-id="2c3bb-111">実行されている HYPER-V 仮想マシン間のネットワークのパフォーマンスを向上させるために、同じ HYPER-V ホスト コンピューターは、プライベート仮想ネットワークとルート間のネットワーク トラフィックのプライベート仮想ネットワーク経由で仮想マシンを作成します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-111">To improve networking performance between Hyper-V virtual machines that are running on the same Hyper-V host computer, create a private virtual network and route network traffic between virtual machines through the private virtual network.</span></span>  
  
##### <a name="create-a-private-virtual-network"></a><span data-ttu-id="2c3bb-112">プライベート仮想ネットワークを作成します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-112">Create a Private Virtual Network</span></span>  
  
1.  <span data-ttu-id="2c3bb-113">クリックして**開始**、 をクリックして**すべてのプログラム**します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-113">Click **Start**, click **All Programs**.</span></span> <span data-ttu-id="2c3bb-114">をクリックして**管理ツール**、 をクリックし、 **、HYPER-V マネージャー**します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-114">Click **Administrative Tools**, and then click **Hyper-V Manager**.</span></span>  
  
2.  <span data-ttu-id="2c3bb-115">HYPER-V マネージャーの左側のウィンドウで右クリック **、HYPER-V マネージャー**、 をクリックし、**サーバーへの接続**します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-115">In the left-hand pane of the Hyper-V Manager, right-click **Hyper-V Manager**, and then click **Connect to Server**.</span></span>  
  
3.  <span data-ttu-id="2c3bb-116">**コンピューターの選択** ダイアログ ボックスで、HYPER-V ホスト コンピューターの名前を入力し、順にクリックします**OK**します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-116">In the **Select Computer** dialog box, enter the name of the Hyper-V host computer, and then click **OK**.</span></span>  
  
4.  <span data-ttu-id="2c3bb-117">HYPER-V マネージャーの左側のウィンドウで、HYPER-V ホストを右クリックし、**仮想ネットワーク マネージャー**します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-117">In the left-hand pane of the Hyper-V Manager, right-click the Hyper-V host, and then click **Virtual Network Manager**.</span></span>  
  
5.  <span data-ttu-id="2c3bb-118">仮想ネットワーク マネージャーで **を作成する仮想ネットワークの種類ですか?**、 をクリックして**プライベート**、 をクリックし、**追加**。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-118">In the Virtual Network Manager, under **What type of virtual network do you want to create?**, click **Private**, and then click **Add**.</span></span>  
  
6.  <span data-ttu-id="2c3bb-119">新しい仮想ネットワークでの名前を入力し、クリックして**OK**します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-119">Enter a name for the new virtual network, and then click **OK**.</span></span> <span data-ttu-id="2c3bb-120">仮想ネットワークは、この HYPER-V ホスト上で実行される各 HYPER-V 仮想マシンにご利用いただけます。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-120">The virtual network is now available to each Hyper-V virtual machine that is run on this Hyper-V host.</span></span>  
  
##### <a name="add-the-private-virtual-network-to-hyper-v-virtual-machines-running-on-the-hyper-v-host"></a><span data-ttu-id="2c3bb-121">プライベート仮想ネットワークに HYPER-V 仮想マシンを追加、HYPER-V ホストで実行されています。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-121">Add the Private Virtual Network to Hyper-V Virtual Machines running on the Hyper-V Host</span></span>  
  
1.  <span data-ttu-id="2c3bb-122">クリックして**開始**、 をクリックして**すべてのプログラム**します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-122">Click **Start**, click **All Programs**.</span></span> <span data-ttu-id="2c3bb-123">をクリックして**管理ツール**、 をクリックし、 **、HYPER-V マネージャー**します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-123">Click **Administrative Tools**, and then click **Hyper-V Manager**.</span></span>  
  
2.  <span data-ttu-id="2c3bb-124">HYPER-V マネージャーの左側のウィンドウで右クリック **、HYPER-V マネージャー**、 をクリックし、**サーバーへの接続**します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-124">In the left-hand pane of the Hyper-V Manager, right-click **Hyper-V Manager**, and then click **Connect to Server**.</span></span>  
  
3.  <span data-ttu-id="2c3bb-125">**コンピューターの選択** ダイアログ ボックスで、HYPER-V ホスト コンピューターの名前を入力し、順にクリックします**OK**します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-125">In the **Select Computer** dialog box, enter the name of the Hyper-V host computer, and then click **OK**.</span></span>  
  
4.  <span data-ttu-id="2c3bb-126">仮想マシンを右クリックし、をクリックして、プライベート仮想ネットワークを追加するなど、実行中の仮想マシンをシャット ダウン**シャット ダウン**します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-126">Shut down any running virtual machines for which you would like to add the private virtual network by right-clicking on the virtual machine, and then clicking **Shut down**.</span></span>  
  
5.  <span data-ttu-id="2c3bb-127">仮想マシンをシャット ダウン後、仮想マシンを右クリックし、**設定**仮想マシンの設定を変更します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-127">After shutting down the virtual machines, right-click a virtual machine, and then click **Settings** to change the settings for a virtual machine.</span></span>  
  
6.  <span data-ttu-id="2c3bb-128">**< コンピューター名 > の設定**ダイアログ ボックスで、**ハードウェアの追加**をクリックして選択**ネットワーク アダプター**、 をクリックし、**追加**.</span><span class="sxs-lookup"><span data-stu-id="2c3bb-128">In the **Settings for <machine_name>** dialog box, under **Add Hardware**, click to select **Network Adapter**, and then click **Add**.</span></span>  
  
7.  <span data-ttu-id="2c3bb-129">**ネットワーク アダプター**構成ページの**ネットワーク:**、先ほど作成したプライベート仮想ネットワークを選択し、クリックして**OK**します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-129">On the **Network Adapter** configuration page, under **Network:**, select the private virtual network that you created earlier, and then click **OK**.</span></span> <span data-ttu-id="2c3bb-130">ここで行ったプライベート仮想ネットワークがアクセスできる、次回の仮想マシンを起動する HYPER-V 仮想マシンで使用可能。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-130">You have now made the private virtual network available to the Hyper-V virtual machine which will be accessible the next time that the virtual machine is started.</span></span>  
  
8.  <span data-ttu-id="2c3bb-131">各仮想マシンのプライベート仮想ネットワークを経由のネットワーク トラフィックをルーティングするには、上記の手順を繰り返します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-131">Repeat the steps above for each virtual machine for which you want to route network traffic through the private virtual network.</span></span>  
  
9. <span data-ttu-id="2c3bb-132">プライベート仮想ネットワークを追加した仮想マシンを起動します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-132">Start the virtual machines that you have added the private virtual network to.</span></span> <span data-ttu-id="2c3bb-133">各仮想マシンを右クリックし、をクリックして**開始**します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-133">Right click each virtual machine and click **Start**.</span></span>  
  
##### <a name="configure-each-virtual-machine-to-use-the-private-virtual-network"></a><span data-ttu-id="2c3bb-134">プライベート仮想ネットワークを使用するには、各仮想マシンの構成します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-134">Configure each Virtual Machine to use the Private Virtual Network</span></span>  
  
1.  <span data-ttu-id="2c3bb-135">各仮想マシンが開始されると、プライベート仮想ネットワークは仮想マシンにアクセスできるネットワーク接続として。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-135">Once each virtual machine has been started, the private virtual network is accessible to the virtual machine as a network connection.</span></span> <span data-ttu-id="2c3bb-136">Tcp/ipv4 を使用するには、各仮想マシンにネットワーク接続を構成し、TCP または IPv4 プロトコルの設定を指定します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-136">Configure the network connection on each virtual machine to use TCP/IPv4, and specify settings for the TCP/IPv4 protocol.</span></span>  
  
    1.  <span data-ttu-id="2c3bb-137">ネットワーク接続のプロパティ ページにアクセスを選択します**インターネット プロトコル バージョン 4(TCP/IPv4)**、 をクリックし、**プロパティ**します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-137">Access the network connection properties page, select **Internet Protocol Version 4(TCP/IPv4)**, and then click **Properties**.</span></span>  
  
    2.  <span data-ttu-id="2c3bb-138">横にあるラジオ ボタンをクリックして**次の IP アドレスを使用して、** します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-138">Click the radio button next to **Use the following IP address**.</span></span>  
  
2.  <span data-ttu-id="2c3bb-139">値を入力、 **IP アドレス**プライベート IP の範囲からのフィールドに内で識別された"RFC 1918 プライベート IP アドレスのアドレスの割り当て"のアドレス[ http://go.microsoft.com/fwlink/?LinkID=31904](http://go.microsoft.com/fwlink/?LinkID=31904)します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-139">Enter a value for the **IP address** field from the range of private IP addresses identified in “RFC 1918, Address Allocation for Private IP Addresses” at [http://go.microsoft.com/fwlink/?LinkID=31904](http://go.microsoft.com/fwlink/?LinkID=31904).</span></span>  
  
3.  <span data-ttu-id="2c3bb-140">指定した IP アドレスをメモしてをおきますこの値を後で、ホスト ファイル エントリには、このコンピューターの NetBIOS 名に関連付ける必要があります。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-140">Make a note of the IP address that you specified; you will need to associate this value with the NetBIOS name of this computer in a HOSTS file entry later.</span></span>  
  
4.  <span data-ttu-id="2c3bb-141">適切な値を入力して、**サブネット マスク**フィールド。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-141">Enter an appropriate value for the **Subnet mask** field.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="2c3bb-142">Windows を設定する必要があります、**サブネット マスク**に入力した値に基づいて、適切な値フィールド、 **IP アドレス**フィールド。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-142">Windows should populate the **Subnet mask** field with an appropriate value based upon the value that you entered into the **IP address** field.</span></span>  
  
5.  <span data-ttu-id="2c3bb-143">ままに、**デフォルト ゲートウェイ**フィールドの空白、 をクリック**OK**、順にクリックします**閉じる**します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-143">Leave the **Default gateway** field blank, click **OK**, and then click **Close**.</span></span>  
  
6.  <span data-ttu-id="2c3bb-144">一意のプライベート IP アドレスを各仮想マシンを構成した後、HYPER-V ホスト コンピューターで実行されている他の仮想マシンの NetBIOS 名と IP アドレスと各仮想マシン上の HOSTS ファイルを更新します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-144">After configuring each virtual machine with a unique private IP address, update the HOSTS file on each virtual machine with the IP address and NetBIOS name of the other virtual machines running on the Hyper-V host computer.</span></span> <span data-ttu-id="2c3bb-145">更新されたホスト ファイルは、各仮想マシンに %systemroot%\drivers\etc\ フォルダーに保存する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-145">The updated HOSTS file should be saved to the %systemroot%\drivers\etc\ folder on each virtual machine.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="2c3bb-146">既定では、Windows は、他の仮想マシンの一意のプライベート IP アドレスと各仮想マシン上の HOSTS ファイルを更新することで NetBIOS 名を解決するのには、ローカルの HOSTS ファイルを確認しますので、これらのマシン間のネットワーク トラフィックは経由でルーティングようになりましたプライベート仮想ネットワーク。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-146">Because by default Windows checks the local HOSTS file first to resolve NetBIOS names, by updating the HOSTS file on each virtual machine with the unique private IP addresses of the other virtual machines, network traffic between these machine will now be routed over the private virtual network.</span></span>  
  
### <a name="disable-tcp-offloading-for-the-virtual-machine-network-cards"></a><span data-ttu-id="2c3bb-147">TCP オフロード、仮想マシンのネットワーク カードを無効にします。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-147">Disable TCP Offloading for the Virtual Machine Network Cards</span></span>  
 <span data-ttu-id="2c3bb-148">「を使用してタスク オフロード (NDIS 5.1) を無効にするレジストリ値」MSDN のトピックの説明に従ってレジストリを編集[ http://go.microsoft.com/fwlink/?LinkId=147619 ](http://go.microsoft.com/fwlink/?LinkId=147619) TCP オフロード、各仮想マシンのネットワーク カードを無効にします。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-148">Edit the registry as described in the MSDN topic “Using Registry Values to Enable and Disable Task Offloading (NDIS 5.1)” at [http://go.microsoft.com/fwlink/?LinkId=147619](http://go.microsoft.com/fwlink/?LinkId=147619) to disable TCP offloading for the network cards on each virtual machine.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="2c3bb-149">レジストリ エディターの不適切な使用により問題が発生し、オペレーティング システムの再インストールが必要となることがあります。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-149">Incorrect use of Registry Editor may cause problems requiring you to reinstall your operating system.</span></span> <span data-ttu-id="2c3bb-150">レジストリ エディターは、ご自身の責任で使用してください。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-150">Use Registry Editor at your own risk.</span></span> <span data-ttu-id="2c3bb-151">バックアップ、復元、およびレジストリを変更する方法の詳細についてで、マイクロソフト サポート技術情報記事「Microsoft Windows レジストリの説明」を参照して[ http://go.microsoft.com/fwlink/?LinkId=62729](http://go.microsoft.com/fwlink/?LinkId=62729)します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-151">For more information about how to back up, restore, and modify the registry, see the Microsoft Knowledge Base article "Description of the Microsoft Windows registry" at [http://go.microsoft.com/fwlink/?LinkId=62729](http://go.microsoft.com/fwlink/?LinkId=62729).</span></span>  
  
## <a name="general-guidelines-for-improving-network-performance"></a><span data-ttu-id="2c3bb-152">ネットワーク パフォーマンスを向上させるための一般的なガイドライン</span><span class="sxs-lookup"><span data-stu-id="2c3bb-152">General guidelines for improving network performance</span></span>  
 <span data-ttu-id="2c3bb-153">ネットワーク パフォーマンスを向上させるのには、次の推奨事項を使用できます。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-153">The following recommendations can be used to increase network performance:</span></span>  
  
### <a name="add-additional-network-cards-to-computers-in-the-biztalk-server-environment"></a><span data-ttu-id="2c3bb-154">BizTalk Server 環境内のコンピューターに追加のネットワーク カードを追加します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-154">Add additional network cards to computers in the BizTalk Server environment</span></span>  
 <span data-ttu-id="2c3bb-155">だけに追加する追加のハード ドライブは、ディスクのパフォーマンスを向上させることができます、追加のネットワーク カードを追加するには、ネットワーク パフォーマンスが向上します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-155">Just as adding additional hard drives can improve disk performance, adding additional network cards can improve network performance.</span></span> <span data-ttu-id="2c3bb-156">BizTalk Server 環境内のコンピューター上のネットワーク カードが飽和状態し、カードは、ボトルネック、パフォーマンスを向上させるために 1 つまたは複数のネットワーク カードを追加することを検討してください。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-156">If the network cards on the computers in your BizTalk Server environment are saturated and the card is a bottleneck, consider adding one or more additional network cards to improve performance.</span></span>  
  
### <a name="implement-network-segmentation"></a><span data-ttu-id="2c3bb-157">ネットワークのセグメント化を実装します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-157">Implement network segmentation</span></span>  
 <span data-ttu-id="2c3bb-158">推奨事項に従い、**サブネット**「BizTalk Server データベースの最適化」ホワイト ペーパーの「 [ http://go.microsoft.com/fwlink/?LinkID=101578](http://go.microsoft.com/fwlink/?LinkID=101578)します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-158">Follow the recommendations in the **Subnets** section of the "BizTalk Server Database Optimization" whitepaper at [http://go.microsoft.com/fwlink/?LinkID=101578](http://go.microsoft.com/fwlink/?LinkID=101578).</span></span>  
  
### <a name="where-possible-replace-hubs-with-switches"></a><span data-ttu-id="2c3bb-159">可能であれば、スイッチを使用してハブを置き換えます</span><span class="sxs-lookup"><span data-stu-id="2c3bb-159">Where possible, replace hubs with switches</span></span>  
 <span data-ttu-id="2c3bb-160">スイッチには、直接ハブを使用して、トラフィックをルーティングするブロードキャスト モデルは、ソースと宛先の間のトラフィックをルーティングするためのロジックが含まれています。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-160">Switches contain logic to directly route traffic between the source and destination whereas hubs use a broadcast model to route traffic.</span></span> <span data-ttu-id="2c3bb-161">そのためスイッチは効率的で、パフォーマンスが向上します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-161">Therefore switches are more efficient and offer improved performance.</span></span>  
  
### <a name="remove-unnecessary-network-protocols"></a><span data-ttu-id="2c3bb-162">不要なネットワーク プロトコルを削除します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-162">Remove unnecessary network protocols</span></span>  
 <span data-ttu-id="2c3bb-163">Windows Server コンピューターでは、多くのネットワーク サービスと実際に必要とされる以上がインストールされているプロトコルがある場合があります。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-163">Windows Server computers sometimes have more network services and protocols installed than are actually required.</span></span> <span data-ttu-id="2c3bb-164">各追加ネットワーク クライアント、サービスまたはプロトコルを配置追加オーバーヘッドのシステム リソース。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-164">Each additional network client, service or protocol places additional overhead on system resources.</span></span>  
  
 <span data-ttu-id="2c3bb-165">さらに、インストールされている各プロトコルは、ネットワーク トラフィックを生成します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-165">In addition, each installed protocol generates network traffic.</span></span> <span data-ttu-id="2c3bb-166">不要なネットワーク クライアント、サービス、およびプロトコルを削除すると、他のプロセスの使用可能なシステム リソース、過剰なネットワーク トラフィックを避け、ネゴシエートする必要がありますネットワーク バインドの数が最小限に減らします。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-166">By removing unnecessary network clients, services and protocols, system resources are made available for other processes, excess network traffic is avoided and the number of network bindings that must be negotiated is reduced to a minimum.</span></span>  
  
 <span data-ttu-id="2c3bb-167">プロトコルとサービスを現在インストールされているネットワーク クライアントを表示するには、これらの手順に従います。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-167">To see the currently installed network clients, protocols and services, follow these steps:</span></span>  
  
1. <span data-ttu-id="2c3bb-168">をクリックして**開始**、] をポイント**設定**、順にクリックします**コントロール パネルの [** します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-168">Click **Start**, point to **Settings**, and then click **Control Panel**.</span></span>  
  
2. <span data-ttu-id="2c3bb-169">ダブルクリック**ネットワーク接続**コンピューターのネットワーク接続を表示します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-169">Double-click **Network Connections** to display the network connections on the computer.</span></span>  
  
3. <span data-ttu-id="2c3bb-170">右クリック**Local Area Connection** (または、ネットワーク接続のエントリ) をクリックして**プロパティ**ネットワーク接続のプロパティ ダイアログ ボックスを表示します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-170">Right-click **Local Area Connection** (or the entry for your network connection), and then click **Properties** to display the properties dialog box for the network connection.</span></span>  
  
4. <span data-ttu-id="2c3bb-171">不要な項目を削除するを選択し、クリックして**アンインストール**します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-171">To remove an unnecessary item, select it and click **Uninstall**.</span></span> <span data-ttu-id="2c3bb-172">項目を無効にするには、単に、アイテムに関連付けられているチェック ボックスをオフにします。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-172">To disable an item, simply clear the checkbox associated with the item.</span></span>  
  
   <span data-ttu-id="2c3bb-173">接続の項目のアンインストールの影響について確信できない場合はアンインストールするのではなく、項目を無効にします。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-173">If you are unsure about the effects of uninstalling an item for the connection, then disable the item rather than uninstalling it.</span></span> <span data-ttu-id="2c3bb-174">項目を無効にすると、どのサービス、プロトコル、およびクライアントがシステムで必要な実際に決定できます。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-174">Disabling items allows you to determine which services, protocols and clients are actually required on a system.</span></span> <span data-ttu-id="2c3bb-175">項目を無効にしていない影響を及ぼす場合、サーバー上と特定されて、ときに、項目をアンインストールし、できます。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-175">When it has been determined that disabling an item has no adverse affect on the server, the item can then be uninstalled.</span></span>  
  
   <span data-ttu-id="2c3bb-176">多くの場合は、次の 3 つのコンポーネントのみが、標準の TCP/IP ベース ネットワーク上の操作必要です。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-176">In many cases, only the following three components are required for operation on a standard TCP/IP based network:</span></span>  
  
-   <span data-ttu-id="2c3bb-177">Microsoft ネットワーク用クライアント</span><span class="sxs-lookup"><span data-stu-id="2c3bb-177">Client for Microsoft Networks</span></span>  
  
-   <span data-ttu-id="2c3bb-178">ファイル サービスおよび Microsoft ネットワーク用のプリンターの共有</span><span class="sxs-lookup"><span data-stu-id="2c3bb-178">File and Printer Sharing for Microsoft Networks</span></span>  
  
-   <span data-ttu-id="2c3bb-179">インターネット プロトコル (TCP/IP)</span><span class="sxs-lookup"><span data-stu-id="2c3bb-179">Internet Protocol (TCP/IP)</span></span>  
  
### <a name="network-adapter-drivers-on-all-computers-in-the-biztalk-server-environment-should-be-tuned-for-performance"></a><span data-ttu-id="2c3bb-180">BizTalk Server 環境のすべてのコンピューター上のネットワーク アダプター ドライバーがパフォーマンスに合わせて調整する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-180">Network adapter drivers on all computers in the BizTalk Server environment should be tuned for performance</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="2c3bb-181">ネットワーク アダプターのドライバーにチューニングを適用する前に常に、環境内のネットワーク カードの最新のネットワーク アダプター デバイス ドライバーをインストールします。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-181">Before applying tuning to network adapter drivers, always install the latest network adapter device drivers for the network cards in the environment.</span></span>  
  
 <span data-ttu-id="2c3bb-182">受信と送信の両方のパケットは、バッファリングの使用可能なメモリの量を最大化するには、ネットワーク アダプター デバイス ドライバーを調整します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-182">Adjust the network adapter device drivers to maximize the amount of memory available for packet buffering, both incoming and outgoing.</span></span> <span data-ttu-id="2c3bb-183">バッファー数を最大化、特に転送バッファーおよびバッファーを結合します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-183">Also maximize buffer counts, especially transmit buffers and coalesce buffers.</span></span> <span data-ttu-id="2c3bb-184">既定では、これらのパラメーターの値され、製造元とバージョンのドライバーの間、でも提供されるかどうかが変化します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-184">The default values for these parameters, and whether they are even provided, vary between manufacturers and driver versions.</span></span> <span data-ttu-id="2c3bb-185">目標は、ネットワーク アダプターのハードウェアによって実行された作業を最大化して、ネットワーク トラフィックの急激な増加と関連付けられている輻輳を軽減するためにネットワーク操作の最大の可能なバッファー領域を確保します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-185">The goal is to maximize the work done by the network adapter hardware, and to allow the greatest possible buffer space for network operations to mitigate network traffic bursts and associated congestion.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2c3bb-186">ネットワーク アダプターのドライバーをチューニングする手順は、製造元によって異なります。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-186">Steps to tune network adapter drivers vary by manufacturer.</span></span>  
  
 <span data-ttu-id="2c3bb-187">ネットワーク アダプターの設定にアクセスする次の手順に従って[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="2c3bb-187">Follow these steps to access settings for network adapters in[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]:</span></span>  
  
1. <span data-ttu-id="2c3bb-188">クリックして**開始**、および順にクリックします\*\*コントロール パネルの \*\*します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-188">Click **Start**, , and then click **Control Panel**.</span></span>  
  
2. <span data-ttu-id="2c3bb-189">クリックして**ネットワークとインターネット**、 をクリックし、**ネットワークと共有センター**します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-189">Click **Network and Internet**, and then click **Network and Sharing Center**.</span></span>  
  
3. <span data-ttu-id="2c3bb-190">をクリックして**アダプター設定を変更する**を右クリックして**ローカル エリア接続**(または、ネットワーク接続の名前)、順にクリックします**プロパティ**します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-190">Click **Change adapter settings**, Right-click **Local Area Connection** (or the name of your network connection), and then click **Properties**.</span></span>  
  
4. <span data-ttu-id="2c3bb-191">**全般**] タブで [**構成**します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-191">On the **General** tab, click **Configure**.</span></span>  
  
5. <span data-ttu-id="2c3bb-192">をクリックして、**詳細**ネットワーク アダプターに対して構成できるプロパティにアクセスするには、タブ。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-192">Click the **Advanced** tab to access properties that can be configured for the network adapter.</span></span>  
  
   <span data-ttu-id="2c3bb-193">次のプロパティは、BizTalk Server 環境でのネットワーク アダプターごとに構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-193">The following properties should be configured for each network adapter in the BizTalk Server environment:</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="2c3bb-194">集計、負荷分散、またはフォールト トレランス用に構成されたネットワーク アダプターのチーミングされたセット内の個々 のネットワーク アダプターを含む、物理ネットワーク アダプターごとにこれらの設定が適用されます。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-194">You apply these settings for each physical network adapter, including the individual network adapters within a teamed set of network adapters that are configured for aggregation, load balancing, or fault tolerance.</span></span> <span data-ttu-id="2c3bb-195">チーミング ソフトウェアをチームにもこれらの設定を適用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-195">With some teaming software, you might need to apply these settings to the team also.</span></span> <span data-ttu-id="2c3bb-196">一部のネットワーク アダプターが自動調整し、パラメーターを手動で構成するオプションがない可能性がありますに注意してください。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-196">Note that some network adapters are self-tuning and may not offer the option to configure parameters manually.</span></span>  
  
- <span data-ttu-id="2c3bb-197">**電源オプション**– 電源管理機能が電力を節約するネットワーク アダプターをオフにすることを防ぐためにネットワーク アダプター ドライバーを構成します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-197">**Power Option** – Configure the network adapter driver to prevent power management functionality from turning off the network adapter to save power.</span></span> <span data-ttu-id="2c3bb-198">この機能はクライアント コンピューターに役立つことはめったにありません必要がありますが、BizTalk Server または SQL Server コンピューターで使用します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-198">This functionality may be useful for client computers but should seldom, if ever, be used on a BizTalk Server or SQL Server computer.</span></span>  
  
- <span data-ttu-id="2c3bb-199">**速度、双方向の固定 (自動を使用しない)** -は非常に重要なは、スイッチの設定に対応する、ネットワーク速度、二重モード、およびフロー制御パラメーターが設定されている接続先にします。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-199">**Fixed Speed/Duplex (do not use AUTO)** - It is very important that the network speed, duplex, and flow control parameters are set to correspond to the settings on the switch to which they are connected.</span></span> <span data-ttu-id="2c3bb-200">これは、定期的な「自動同期」オフライン接続を一時的にかかる場合があります出現で軽減されます。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-200">This will mitigate the occurrence of periodic “auto-synchronization” which may temporarily take connections off-line.</span></span>  
  
- <span data-ttu-id="2c3bb-201">**Coalesce バッファーの最大**-マップのレジスタがシステム リソースの仮想アドレス バス マスターをサポートするネットワーク アダプターを物理アドレスに変換するために使用します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-201">**Max Coalesce Buffers** - Map registers are system resources used to convert physical addresses to virtual addresses for network adapters that support bus mastering.</span></span> <span data-ttu-id="2c3bb-202">Coalesce バッファーが既にドライバー マップ レジスタが不足した場合、ネットワーク ドライバーを使用します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-202">Coalesce buffers are available to the network driver if the driver runs out of map registers.</span></span> <span data-ttu-id="2c3bb-203">この値が最高のパフォーマンスをできるだけ高く設定します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-203">Set this value as high as possible for maximum performance.</span></span> <span data-ttu-id="2c3bb-204">物理メモリの制限付きのサーバーで、負の値があります coalesce バッファーと影響がシステム メモリを消費します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-204">On servers with limited physical memory, this may have a negative impact as coalesce buffers consume system memory.</span></span> <span data-ttu-id="2c3bb-205">ほとんどのシステムでただし、最大設定適用できますせず、使用可能なメモリが大幅に削減します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-205">On most systems however, the maximum setting can be applied without significantly reducing available memory.</span></span>  
  
- <span data-ttu-id="2c3bb-206">**最大送信/送信記述子および送信バッファー** -この設定を指定数の転送コントロール バッファーのネットワーク インターフェイスで使用するドライバーを割り当てます。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-206">**Max Transmit/Send Descriptors and Send Buffers** - This setting specifies how many transmit control buffers the driver allocates for use by the network interface.</span></span> <span data-ttu-id="2c3bb-207">これにより、「送信」キューに持つことができます、ドライバー、未処理のパケットの数が直接反映されます。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-207">This directly reflects the number of outstanding packets the driver can have in its “send” queue.</span></span> <span data-ttu-id="2c3bb-208">この値が最高のパフォーマンスをできるだけ高く設定します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-208">Set this value as high as possible for maximum performance.</span></span> <span data-ttu-id="2c3bb-209">物理メモリの制限付きのサーバーでは、システム メモリを消費する送信バッファーとして悪影響を及ぼすこの可能性があります。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-209">On servers with limited physical memory, this may have a negative impact as send buffers consume system memory.</span></span> <span data-ttu-id="2c3bb-210">ほとんどのシステムでただし、最大設定適用できますせず、使用可能なメモリが大幅に削減します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-210">On most systems however, the maximum setting can be applied without significantly reducing available memory.</span></span>  
  
- <span data-ttu-id="2c3bb-211">**受信バッファーの最大**-この設定は、プロトコルのメモリにデータをコピーするときに、ネットワーク インターフェイスのドライバーで使用されるメモリ バッファーの量を指定します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-211">**Max Receive Buffers** - This setting specifies the amount of memory buffer used by the network interface driver when copying data to the protocol memory.</span></span> <span data-ttu-id="2c3bb-212">通常、既定では、比較的低い値に設定されます。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-212">It is normally set by default to a relatively low value.</span></span> <span data-ttu-id="2c3bb-213">この値が最高のパフォーマンスをできるだけ高く設定します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-213">Set this value as high as possible for maximum performance.</span></span> <span data-ttu-id="2c3bb-214">物理メモリの制限付きのサーバーで、負の値がありますと受信バッファーへの影響は、システム メモリを消費します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-214">On servers with limited physical memory, this may have a negative impact as receive buffers consume system memory.</span></span> <span data-ttu-id="2c3bb-215">ほとんどのシステムでただし、最大設定適用できますせず、使用可能なメモリが大幅に削減します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-215">On most systems however, the maximum setting can be applied without significantly reducing available memory.</span></span>  
  
- <span data-ttu-id="2c3bb-216">**オプションをオフロードすべて**- ほとんどの場合のネットワーク インターフェイス オフロード機能を有効にする場合のパフォーマンスが向上します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-216">**All offload options ON** - In almost all cases performance is improved when enabling network interface offload features.</span></span> <span data-ttu-id="2c3bb-217">一部のネットワーク アダプターを有効にするまたは送信のオフロードを無効にして、トラフィックを受信する別のパラメーターを提供します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-217">Some network adapters provide separate parameters to enable or disable offloading for send and receive traffic.</span></span> <span data-ttu-id="2c3bb-218">ネットワーク アダプターに、CPU からタスクをオフロードすると、システム全体のパフォーマンスを改善するサーバーの CPU 使用量を削減できます。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-218">Offloading tasks from the CPU to the network adapter can help lower CPU usage on the server which will improve overall system performance.</span></span> <span data-ttu-id="2c3bb-219">Microsoft TCP/IP トランスポートは、適切な機能を備えたネットワーク アダプターに次のタスクの 1 つ以上オフロードできます。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-219">The Microsoft TCP/IP transport can offload one or more of the following tasks to a network adapter that has the appropriate capabilities:</span></span>  
  
  -   <span data-ttu-id="2c3bb-220">**チェックサム タスク**TCP/IP トランスポートは、計算をオフロードできます - との ip アドレスと TCP チェックサムの検証で送受信するネットワーク アダプターが、ネットワーク アダプター ドライバーがこの機能を提供する場合、このオプションを有効にします。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-220">**Checksum tasks** - The TCP/IP transport can offload the calculation and validation of IP and TCP checksums for sends and receives to the network adapter, enable this option if the network adapter driver provides this capability.</span></span>  
  
  -   <span data-ttu-id="2c3bb-221">**IP セキュリティ タスク**-TCP/IP トランスポートは、計算との認証ヘッダー (AH) およびネットワーク アダプターにセキュリティ ペイロード (ESP) をカプセル化する暗号化チェックサムの検証をオフロードできます。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-221">**IP security tasks** - The TCP/IP transport can offload the calculation and validation of encrypted checksums for authentication headers (AH) and encapsulating security payloads (ESP) to the network adapter.</span></span> <span data-ttu-id="2c3bb-222">TCP/IP トランスポートは、暗号化と復号化、ネットワーク アダプターに ESP ペイロードのもオフロードできます。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-222">The TCP/IP transport can also offload the encryption and decryption of ESP payloads to the network adapter.</span></span> <span data-ttu-id="2c3bb-223">ネットワーク アダプター ドライバーがこの機能を提供する場合は、これらのオプションを有効にします。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-223">Enable these options if the network adapter driver provides this capability.</span></span>  
  
  -   <span data-ttu-id="2c3bb-224">**大きな TCP パケットのセグメント化**-TCP/IP トランスポートは、大量送信オフロード (LSO) をサポートしています。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-224">**Segmentation of large TCP packets** - The TCP/IP transport supports large send offload (LSO).</span></span> <span data-ttu-id="2c3bb-225">Lso により、TCP/IP トランスポートは大きな TCP パケットのセグメント化をオフロードできます。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-225">With LSO, the TCP/IP transport can offload the segmentation of large TCP packets.</span></span>  
  
  -   <span data-ttu-id="2c3bb-226">**スタック オフロード**– ネットワーク スタック全体を適切な機能を備えたネットワーク アダプターにオフロードできます。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-226">**Stack Offload** – The entire network stack can be offloaded to a network adapter that has the appropriate capabilities.</span></span> <span data-ttu-id="2c3bb-227">ネットワーク アダプター ドライバーがこの機能を提供する場合は、このオプションを有効にします。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-227">Enable this option if the network adapter driver provides this capability.</span></span>  
  
- <span data-ttu-id="2c3bb-228">**Wake On LAN (使用されている) 場合を除き、無効になっている**– lan でウェイク アップの機能を無効にするネットワーク アダプター ドライバーを構成します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-228">**Wake On LAN disabled (unless being used)** – Configure the network adapter driver to disable wake-on lan functionality.</span></span> <span data-ttu-id="2c3bb-229">この機能がクライアント コンピューターの便利ですが、必要がありますほとんどもしコンピューターで使用する、BizTalk Server または SQL Server。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-229">This functionality may be useful for client computers but should seldom if ever be used on a BizTalk Server or SQL Server computer.</span></span>  
  
  <span data-ttu-id="2c3bb-230">ネットワーク アダプターのパフォーマンスのチューニングの詳細については、次を参照してください。、**ネットワーク デバイスの設定**"BizTalk Server データベースの最適化"ホワイト ペーパーの「 [ http://go.microsoft.com/fwlink/?LinkID=101578](http://go.microsoft.com/fwlink/?LinkID=101578)します。</span><span class="sxs-lookup"><span data-stu-id="2c3bb-230">For more information about tuning network adapters for performance, see the **Network Device Settings** section of the "BizTalk Server Database Optimization" whitepaper at [http://go.microsoft.com/fwlink/?LinkID=101578](http://go.microsoft.com/fwlink/?LinkID=101578).</span></span>