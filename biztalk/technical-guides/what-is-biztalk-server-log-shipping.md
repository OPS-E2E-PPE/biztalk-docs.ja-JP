---
title: BizTalk Server ログ配布とですか。 | Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 79a2088a-ff36-4590-97c9-51d5bb245486
caps.latest.revision: 2
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e3b20589229b1e3868f23c3823d2a26decc56081
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/01/2017
ms.locfileid: "26010499"
---
# <a name="what-is-biztalk-server-log-shipping"></a><span data-ttu-id="b7d5e-103">BizTalk Server ログ配布とですか。</span><span class="sxs-lookup"><span data-stu-id="b7d5e-103">What Is BizTalk Server Log Shipping?</span></span>
<span data-ttu-id="b7d5e-104">BizTalk Server の障害復旧手順が構築されています。 BizTalk ログ配布します。</span><span class="sxs-lookup"><span data-stu-id="b7d5e-104">BizTalk Server disaster recovery procedures are built around BizTalk log shipping.</span></span> <span data-ttu-id="b7d5e-105">BizTalk ログ配布は継続的に、障害復旧サイト データベースをトランザクション ログの更新プログラムを適用して、障害時におけるデータベースの復元を簡略化します。</span><span class="sxs-lookup"><span data-stu-id="b7d5e-105">BizTalk log shipping simplifies database restoration in the event of a disaster by continuously applying transaction log updates to the disaster recovery site databases.</span></span>  
  
 <span data-ttu-id="b7d5e-106">While BizTalk ログ配布として同じ原則に基づいて[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]ログ配布、[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]ログ配布はサポートされていません、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]のデータベースが、Backup BizTalk Server の SQL エージェント ジョブの一部としてバックアップします。</span><span class="sxs-lookup"><span data-stu-id="b7d5e-106">While BizTalk log shipping is based on similar principles as [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] log shipping, [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] log shipping is not supported for the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases backed up as part of the Backup BizTalk Server SQL Agent Job.</span></span>  
  
## <a name="how-does-biztalk-log-shipping-work"></a><span data-ttu-id="b7d5e-107">BizTalk ログ配布の作業がどのようにしますか。</span><span class="sxs-lookup"><span data-stu-id="b7d5e-107">How Does BizTalk Log Shipping Work?</span></span>  
 <span data-ttu-id="b7d5e-108">BizTalk でログ配布関数と同様の方法[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]ログ配布します。</span><span class="sxs-lookup"><span data-stu-id="b7d5e-108">BizTalk log shipping functions in a manner similar to [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] log shipping.</span></span> <span data-ttu-id="b7d5e-109">実稼働[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]をバックアップするグループが構成されている、 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] UNC の場所へのデータベースです。</span><span class="sxs-lookup"><span data-stu-id="b7d5e-109">The production [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] group is configured to back up the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases to a UNC location.</span></span> <span data-ttu-id="b7d5e-110">既定は、Backup BizTalk SQL エージェント ジョブは、1 時間ごとの完全バックアップおよび 15 分ごとのログ バックアップを実行します。</span><span class="sxs-lookup"><span data-stu-id="b7d5e-110">By default, the Backup BizTalk SQL Agent job performs a full backup every hour and a log backup every 15 minutes.</span></span> <span data-ttu-id="b7d5e-111">BizTalk Server のバックアップ ジョブでは、バックアップの失敗が検出された場合に、完全バックアップを自動的に開始するためのロジックを実装します。</span><span class="sxs-lookup"><span data-stu-id="b7d5e-111">The Backup BizTalk Server job implements logic to automatically start a full backup if a backup failure is detected.</span></span>  
  
 <span data-ttu-id="b7d5e-112">場合、災害復旧[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]インスタンスは BizTalk ログ配布、バックアップ ジョブは、障害復旧サイトで 15 分ごとで復元既定 BizTalk Server SQL エージェントによって作成されたバックアップ ファイルに構成します。</span><span class="sxs-lookup"><span data-stu-id="b7d5e-112">When the disaster recovery [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instances are configured for BizTalk log shipping, the backup files created by the Backup BizTalk Server SQL Agent job are restored at the disaster recovery site every 15 minutes by default.</span></span> <span data-ttu-id="b7d5e-113">バックアップ ファイルは、SQL の復元のコマンドによって、ネットワーク経由でコピーされます。</span><span class="sxs-lookup"><span data-stu-id="b7d5e-113">The backup files are copied over the network by a SQL RESTORE command.</span></span> <span data-ttu-id="b7d5e-114">次の状況でのみ完全バックアップ ファイルがコピーされます。</span><span class="sxs-lookup"><span data-stu-id="b7d5e-114">Full backup files are copied only in the following situations:</span></span>  
  
-   <span data-ttu-id="b7d5e-115">配布が最初に構成される BizTalk ログ</span><span class="sxs-lookup"><span data-stu-id="b7d5e-115">When BizTalk log shipping is first configured</span></span>  
  
-   <span data-ttu-id="b7d5e-116">ときに、新しいデータベースは、BizTalk Server のバックアップ ジョブに追加されます。</span><span class="sxs-lookup"><span data-stu-id="b7d5e-116">When a new database is added to the Backup BizTalk Server job.</span></span>  
  
-   <span data-ttu-id="b7d5e-117">復元に失敗した場合、災害復旧サイト</span><span class="sxs-lookup"><span data-stu-id="b7d5e-117">When a RESTORE failure occurs at the disaster recovery site</span></span>  
  
 <span data-ttu-id="b7d5e-118">各[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]インスタンスの災害復旧サイトには、実稼働環境でホストされているデータベースを復元する BizTalk ログ配布の一部として個別に構成[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]データベース インスタンスです。</span><span class="sxs-lookup"><span data-stu-id="b7d5e-118">Each [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instance at the disaster recovery site is configured individually as part of BizTalk log shipping to restore databases hosted on a production [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database instance.</span></span> <span data-ttu-id="b7d5e-119">ときに、 [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] BizTalk Server のインスタンスが構成されているログ配布と**BTS ログ配布データベースの復元**ジョブが有効になっている、 **BTS ログ配布データベースの復元**ジョブが接続する、運用環境で BizTalk 管理データベース[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]グループ。</span><span class="sxs-lookup"><span data-stu-id="b7d5e-119">When a [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instance is configured for BizTalk Server log shipping and the **BTS Log Shipping Restore Databases** job is enabled, the **BTS Log Shipping Restore Databases** job will connect to the BizTalk Management database on the production [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] group.</span></span>  
  
 <span data-ttu-id="b7d5e-120">前述のよう、移行先サーバーが最初に構成されている場合、移行先サーバーにデータベースの完全バックアップが復元されます。</span><span class="sxs-lookup"><span data-stu-id="b7d5e-120">As described above, when the destination server is first configured the full database backup is restored to the destination server.</span></span> <span data-ttu-id="b7d5e-121">ほとんどの場合のみのログが復元されたときに、 **BTS ログ配布データベースの復元**ジョブの実行。</span><span class="sxs-lookup"><span data-stu-id="b7d5e-121">Most of the time only the logs are restored when the **BTS Log Shipping Restore Databases** job runs.</span></span>  
  
 <span data-ttu-id="b7d5e-122">災害復旧を表示するときに[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]インスタンス[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]Management Studio でのデータベースが「読み込み」状態で表示されます。</span><span class="sxs-lookup"><span data-stu-id="b7d5e-122">When viewing the disaster recovery [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instances with [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] Management Studio, the databases will be displayed in a “Loading” state.</span></span> <span data-ttu-id="b7d5e-123">バックアップ セットの最後のログが自動的に復元しないためにです。</span><span class="sxs-lookup"><span data-stu-id="b7d5e-123">This is because the last log in a backup set is never restored automatically.</span></span> <span data-ttu-id="b7d5e-124">新しいログが使用可能、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ログ配布は、最後のログに、[次へ] を復元します。</span><span class="sxs-lookup"><span data-stu-id="b7d5e-124">Once a new log is available, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] log shipping restores the next to last log.</span></span> <span data-ttu-id="b7d5e-125">障害復旧イベントの発生し障害復旧サイトをオンラインにする必要があります、STOPATMARK コマンドを使用してデータベースを回復する最後のログを復元し、データベースが不要になった「読み込み中」状態にあるものとして表示されます。</span><span class="sxs-lookup"><span data-stu-id="b7d5e-125">When a disaster recovery event occurs and the disaster recovery site must be brought online, the last log is restored using the STOPATMARK command to recover the databases and the databases will no longer be displayed as being in a “Loading” state.</span></span>