---
title: ディスク Contention2 を回避する方法 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 37bdf6bd-cb34-4540-819e-908d83a22d40
caps.latest.revision: 9
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 867ea9be9d9e2cae0e167ec8c958d7d004730af8
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/27/2018
ms.locfileid: "37007543"
---
# <a name="how-to-avoid-disk-contention"></a><span data-ttu-id="dae53-102">ディスクの競合を防止する方法</span><span class="sxs-lookup"><span data-stu-id="dae53-102">How to Avoid Disk Contention</span></span>
<span data-ttu-id="dae53-103">BizTalk Server は、永続的なシステムとして設計されています。</span><span class="sxs-lookup"><span data-stu-id="dae53-103">BizTalk Server is designed as a persistent system.</span></span> <span data-ttu-id="dae53-104">高スループットのシナリオで、メッセージ ボックス データベースおよび BizTalk 追跡データベース深刻な競合が発生することができます。</span><span class="sxs-lookup"><span data-stu-id="dae53-104">For high throughput scenarios, the MessageBox and BizTalk Tracking databases can experience severe contention.</span></span> <span data-ttu-id="dae53-105">ディスクが遅い場合には事態がさらに悪化します。</span><span class="sxs-lookup"><span data-stu-id="dae53-105">This contention can be aggravated by slow disks.</span></span> <span data-ttu-id="dae53-106">ディスクの場合は (平均の平均値を使うよりも大きい低速します。Disk Sec/read や avgDisk Sec/write)、長い時間ロック (ロック待機時間と高のロック タイムアウト数) を保持する SQL Server をしまう可能性があります。</span><span class="sxs-lookup"><span data-stu-id="dae53-106">If the disks are slow (greater than 15ms on average for Avg. Disk sec/Read or Avg. Disk sec/Write), it may cause SQL Server to hold onto locks longer (high Lock Wait Time and high Lock Timeouts).</span></span> <span data-ttu-id="dae53-107">これは、さらに、可能性があります、メッセージ ボックス テーブル (スプールとアプリケーション キュー) に増加し、データベースの肥大と調整します。</span><span class="sxs-lookup"><span data-stu-id="dae53-107">This, in turn, can cause the MessageBox tables (Spool and Application Queues) to grow, causing database bloat and throttling.</span></span> <span data-ttu-id="dae53-108">このような状況は、最終的に、全体的な持続可能なスループットの低下に生じます。</span><span class="sxs-lookup"><span data-stu-id="dae53-108">This situation ultimately results in lower overall sustainable throughput.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="dae53-109">サーバーがディスクのボトルネックを特定する方法の詳細については、[Windows パフォーマンス モニター](http://go.microsoft.com/fwlink/?LinkID=204007) (http://go.microsoft.com/fwlink/?LinkID=204007)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="dae53-109">For information about identifying if a server has a disk bottleneck, see [Windows Performance Monitor](http://go.microsoft.com/fwlink/?LinkID=204007) (http://go.microsoft.com/fwlink/?LinkID=204007).</span></span> <span data-ttu-id="dae53-110">Windows パフォーマンス モニターは、システムのパフォーマンスを分析するためのツールを提供する Microsoft 管理コンソール (MMC) スナップインです。</span><span class="sxs-lookup"><span data-stu-id="dae53-110">Windows Performance Monitor is a Microsoft Management Console (MMC) snap-in that provides tools for analyzing system performance.</span></span>  
  
 <span data-ttu-id="dae53-111">ディスクの競合を回避するには、次の操作を行います。</span><span class="sxs-lookup"><span data-stu-id="dae53-111">To avoid disk contention, do the following:</span></span>  
  
|<span data-ttu-id="dae53-112">手順</span><span class="sxs-lookup"><span data-stu-id="dae53-112">Steps</span></span>|<span data-ttu-id="dae53-113">リファレンス</span><span class="sxs-lookup"><span data-stu-id="dae53-113">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="dae53-114">Raid10 を使用して/0 と 1 つのディスク構成します。</span><span class="sxs-lookup"><span data-stu-id="dae53-114">Use Raid10/0+1 disk configurations.</span></span>|[<span data-ttu-id="dae53-115">ボトルネックを回避するためのベスト プラクティス</span><span class="sxs-lookup"><span data-stu-id="dae53-115">Best Practices for Avoiding Bottlenecks</span></span>](../technical-guides/best-practices-for-avoiding-bottlenecks.md)|  
|<span data-ttu-id="dae53-116">可能であれば、高速な SAN 上のデータベースをデプロイします。</span><span class="sxs-lookup"><span data-stu-id="dae53-116">If possible, deploy the databases on a high-speed SAN.</span></span> <span data-ttu-id="dae53-117">別の構成をお勧めの複数のデータベースは、同じディスクで共有されている場合**専用**ディスク。</span><span class="sxs-lookup"><span data-stu-id="dae53-117">If multiple databases are sharing the same disks, we recommend configuring them on separate **dedicated** disks.</span></span> <span data-ttu-id="dae53-118">さらに、個別のディスク上にメッセージ ボックス データベースの MDF および LDF ファイルを分離することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="dae53-118">In addition, we recommend separating the MDF and LDF files for the MessageBox database onto separate disks.</span></span>|[<span data-ttu-id="dae53-119">Databases2 のファイルグループの最適化</span><span class="sxs-lookup"><span data-stu-id="dae53-119">Optimizing Filegroups for the Databases2</span></span>](../technical-guides/optimizing-filegroups-for-the-databases2.md)|  
|<span data-ttu-id="dae53-120">これは大幅にディスクの競合を減らす、複数のデータ ファイル間で負荷を分散させるので、TEMPDB データベース用の複数のファイルの割り当てを検討してください。</span><span class="sxs-lookup"><span data-stu-id="dae53-120">Consider allocating multiple files for the TEMPDB database, as this will significantly reduce disk contention and spread the load across multiple data files.</span></span>|[<span data-ttu-id="dae53-121">データベースの事前構成 Optimizations2</span><span class="sxs-lookup"><span data-stu-id="dae53-121">Pre-Configuration Database Optimizations2</span></span>](../technical-guides/pre-configuration-database-optimizations2.md)|  
|<span data-ttu-id="dae53-122">BizTalk 追跡データベースから分離された専用のサーバーにメッセージ ボックス データベースを分離することを検討してください。</span><span class="sxs-lookup"><span data-stu-id="dae53-122">Consider separating the MessageBox database onto a dedicated server that is separate from the BizTalk Tracking databases.</span></span>|[<span data-ttu-id="dae53-123">構成後のデータベース Optimizations2</span><span class="sxs-lookup"><span data-stu-id="dae53-123">Post-Configuration Database Optimizations2</span></span>](../technical-guides/post-configuration-database-optimizations2.md)|  
|<span data-ttu-id="dae53-124">MSDTC ログ ファイルのディレクトリを別の専用のドライブに割り当てます。</span><span class="sxs-lookup"><span data-stu-id="dae53-124">Assign the MSDTC log file directory to a separate dedicated drive.</span></span>|[<span data-ttu-id="dae53-125">オペレーティング システムのパフォーマンスの最適化</span><span class="sxs-lookup"><span data-stu-id="dae53-125">Optimizing Operating System Performance</span></span>](../technical-guides/optimizing-operating-system-performance.md)|  
|<span data-ttu-id="dae53-126">ページファイルや MSDTC のログによってローカル ドライブで競合が発生する場合は、ページファイルや MSDTC のログを別のドライブに移してみてください。</span><span class="sxs-lookup"><span data-stu-id="dae53-126">If there is contention on the local drive due to the PageFile or MSDTC log, try moving the PageFile and/or the MSDTC log to a separate drive.</span></span>|[<span data-ttu-id="dae53-127">ボトルネックを回避するためのベスト プラクティス</span><span class="sxs-lookup"><span data-stu-id="dae53-127">Best Practices for Avoiding Bottlenecks</span></span>](../technical-guides/best-practices-for-avoiding-bottlenecks.md)|  
|<span data-ttu-id="dae53-128">書き込み操作の追跡データベースを最適化します。</span><span class="sxs-lookup"><span data-stu-id="dae53-128">Optimize the Tracking database for write operations.</span></span>|[<span data-ttu-id="dae53-129">追跡データベースのボトルネックを特定する方法</span><span class="sxs-lookup"><span data-stu-id="dae53-129">How to Identify Bottlenecks in the Tracking Database</span></span>](../technical-guides/how-to-identify-bottlenecks-in-the-tracking-database.md)|  
|<span data-ttu-id="dae53-130">読み取り、メッセージ ボックス データベースを最適化し、書き込み操作です。</span><span class="sxs-lookup"><span data-stu-id="dae53-130">Optimize the MessageBox database for read and write operations.</span></span>|[<span data-ttu-id="dae53-131">メッセージ ボックス データベース 1 のボトルネックを特定する方法</span><span class="sxs-lookup"><span data-stu-id="dae53-131">How to Identify Bottlenecks in the MessageBox Database1</span></span>](../technical-guides/how-to-identify-bottlenecks-in-the-messagebox-database1.md)|  
|<span data-ttu-id="dae53-132">BizTalk ホスト インスタンスの CPU が飽和、送信、受信、処理、および複数のホストに追跡機能を分離することを検討してください。</span><span class="sxs-lookup"><span data-stu-id="dae53-132">If a BizTalk host instance is saturating the CPU, consider separating sending, receiving, processing, and tracking functionality into multiple hosts.</span></span> <span data-ttu-id="dae53-133">これにより、オーケストレーション機能は、システム全体のスループットを向上させるために別の専用サーバーで実行されるよう、システムを構成します。</span><span class="sxs-lookup"><span data-stu-id="dae53-133">This configures the system so that the orchestration functionality runs on a separate dedicated server to improve overall system throughput.</span></span>|[<span data-ttu-id="dae53-134">BizTalk Server パフォーマンスの最適化</span><span class="sxs-lookup"><span data-stu-id="dae53-134">Optimizing BizTalk Server Performance</span></span>](../technical-guides/optimizing-biztalk-server-performance.md)|  
|<span data-ttu-id="dae53-135">複数のオーケストレーションが展開されている場合は、異なる専用オーケストレーション ホストに参加することを検討してください。</span><span class="sxs-lookup"><span data-stu-id="dae53-135">If multiple orchestrations are deployed, consider enlisting them in different dedicated orchestration hosts.</span></span> <span data-ttu-id="dae53-136">これにより、別のオーケストレーションを分離され、同じ物理アドレス空間または同じサーバー上の共有リソースの競合を防ぎます。</span><span class="sxs-lookup"><span data-stu-id="dae53-136">This isolates the different orchestrations and prevents contention for shared resources either in the same physical address space or on the same server.</span></span>|[<span data-ttu-id="dae53-137">BizTalk Server パフォーマンスの最適化</span><span class="sxs-lookup"><span data-stu-id="dae53-137">Optimizing BizTalk Server Performance</span></span>](../technical-guides/optimizing-biztalk-server-performance.md)|  
|<span data-ttu-id="dae53-138">Windows パフォーマンス モニターを使用して、ディスクの競合の問題を診断することを検討してください.</span><span class="sxs-lookup"><span data-stu-id="dae53-138">Consider using Windows Performance Monitor to diagnose disk contention issues..</span></span>|[<span data-ttu-id="dae53-139">Windows パフォーマンス モニター</span><span class="sxs-lookup"><span data-stu-id="dae53-139">Windows Performance Monitor</span></span>](http://go.microsoft.com/fwlink/?LinkID=204007)|  
  
 <span data-ttu-id="dae53-140">ディスク パフォーマンス分析の詳細については、次のリソースを参照してください。</span><span class="sxs-lookup"><span data-stu-id="dae53-140">For more information about disk performance analysis, see the following resources:</span></span>  
  
- <span data-ttu-id="dae53-141">[ディスクの制限の問題は除きます](http://go.microsoft.com/fwlink/?LinkId=120947)(HYPERLINK"<http://go.microsoft.com/fwlink/?LinkId=120947>"\t"_blank"<http://go.microsoft.com/fwlink/?LinkId=120947>)。</span><span class="sxs-lookup"><span data-stu-id="dae53-141">[Ruling Out Disk-Bound Problems](http://go.microsoft.com/fwlink/?LinkId=120947) (HYPERLINK "<http://go.microsoft.com/fwlink/?LinkId=120947>" \t "_blank"<http://go.microsoft.com/fwlink/?LinkId=120947>).</span></span>  
  
- <span data-ttu-id="dae53-142">[SQL Server の展開前 I/O のベスト プラクティス](http://go.microsoft.com/fwlink/?LinkId=120948)(http://go.microsoft.com/fwlink/?LinkId=120948)します。</span><span class="sxs-lookup"><span data-stu-id="dae53-142">[SQL Server Predeployment I/O Best Practices](http://go.microsoft.com/fwlink/?LinkId=120948) (http://go.microsoft.com/fwlink/?LinkId=120948).</span></span>  
  
- <span data-ttu-id="dae53-143">「I/O ボトルネック」セクション[SQL Server 2008 でのパフォーマンスに関する問題のトラブルシューティング](http://go.microsoft.com/fwlink/?LinkID=153586)(http://go.microsoft.com/fwlink/?LinkID=153586)します。</span><span class="sxs-lookup"><span data-stu-id="dae53-143">“I/O Bottlenecks” section of [Troubleshooting Performance Problems in SQL Server 2008](http://go.microsoft.com/fwlink/?LinkID=153586) (http://go.microsoft.com/fwlink/?LinkID=153586).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="dae53-144">参照</span><span class="sxs-lookup"><span data-stu-id="dae53-144">See Also</span></span>  
 [<span data-ttu-id="dae53-145">データベース層のボトルネック</span><span class="sxs-lookup"><span data-stu-id="dae53-145">Bottlenecks in the Database Tier</span></span>](../technical-guides/bottlenecks-in-the-database-tier.md)