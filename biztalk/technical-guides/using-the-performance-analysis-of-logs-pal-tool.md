---
title: ログ (PAL) のツールのパフォーマンス分析の使用 |Microsoft ドキュメント
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: d563aa7d-102d-4fe6-a892-66794feaf83b
caps.latest.revision: ''
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 7f289cdf157100dc69feb468f789a9ebb76764a1
ms.sourcegitcommit: 8418b1a8f38b7f56979cd6e203f0b591e2f40fe1
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/28/2018
---
# <a name="using-the-performance-analysis-of-logs-pal-tool"></a>ログ (PAL) のツールのパフォーマンス分析の使用
PAL (パフォーマンス分析のログに記録) ツールは、パフォーマンス モニター カウンターのログ (任意既知の形式で読み込むし、(提供) が、複雑で、既知のしきい値を使用して分析します。 ツールをグラフィカルにグラフの重要なパフォーマンス カウンターし、しきい値を超えたときにアラートをスロー、HTML ベースのレポートを生成します。 しきい値はなど、Microsoft の製品チームによって定義されたしきい値に基づく最初[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]、し、Microsoft のメンバーをサポートします。 このツールは、従来のパフォーマンス分析の置換ではありませんが、パフォーマンス カウンター ログのに十分な時間を節約するための分析を自動化します。 PAL ツール:  
  
-   しきい値のパフォーマンス カウンター ログを分析します。  
  
-   Perfmon ログが大きくに役立ちます  
  
-   識別[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]とオペレーティング システムのパフォーマンス カウンターのボトルネックのしきい値を分析することで  
  
-   拡張をパフォーマンス カウンターの分析を行うには  
  
-   独自のカウンターを作成する方法を使用することができます。  
  
 PAL はから無償でダウンロードとして入手できます[ http://go.microsoft.com/fwlink/?linkid=98098](http://go.microsoft.com/fwlink/?linkid=98098)です。 これには、Microsoft の Log Parser が必要です。 ログ パーサーは、イベント ログ、レジストリ、ファイル システム、およびアクティブなど、Windows オペレーティング システムでキーのデータ ソースに加え、ログ ファイル、XML ファイル、および CSV ファイルなどのテキスト ベースのデータへのユニバーサル クエリ アクセスを提供する強力で多目的ツールDirectory® ディレクトリ サービスです。 このツールを使用して大量のログ情報のクエリを実行する可能性があります。 Log Parser ツールをダウンロードする[ http://go.microsoft.com/fwlink/?linkid=85574](http://go.microsoft.com/fwlink/?linkid=85574)です。  
  
## <a name="using-pal-with-performance-counter-logs-in-different-languages"></a>PAL を使用してパフォーマンス カウンターを異なる言語でログに記録します。  
 PAL ツールでは、英語でのみのパフォーマンス カウンターのログを分析します。 他の言語でのパフォーマンス カウンターのログで、PAL ツールを使用するには、最初英語をログを変換する必要があります。 使用することができます、 **Perfmon ログ トランスレーター**ツールで使用可能な[ http://go.microsoft.com/fwlink/?LinkId=158802 ](http://go.microsoft.com/fwlink/?LinkId=158802)に英語に元のパフォーマンス カウンター ログ ファイルを変換します。  
  
## <a name="understanding-the-pal-tool-report-for-microsoft-biztalk-server-2010"></a>Microsoft BizTalk Server 2010 の PAL ツールのレポートをについてください。  
 PAL ツールでは、Windows オペレーティング システム、Microsoft SQL Server のパフォーマンス モニターのしきい値のログの分析と[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]です。 このセクションでは、PAL ツールで、BizTalk Server のしきい値のレポートの分析のほとんどについて説明します。  
  
> [!NOTE]  
>  ここでは長い PAL ツールに関する包括的な情報を簡単に参照の 1 つの場所に格納できるようにします。  
  
 次の分析としきい値は、PAL ツールによって報告されます。  
  
|分析の種類と名前|解析の説明|  
|----------------------------|--------------------------|  
|ディスク: ディスクの空き領域のカーネル ダンプ|この分析は、ディスクへのすべてのメモリをダンプするオペレーティング システムのための十分な空きディスク領域があるかどうかを確認することを確認します。 十分なディスク空き領域がある場合、オペレーティング システムは memory.dmp、これは、カーネル ダンプの根本原因を分析するために必要なファイルの作成に失敗します。|  
|ディスク: 論理/物理ディスクのインターフェイスの分析|この分析の各物理ディスクのアイドル時間を見ます。 ほどアイドル状態のディスクが、ディスクの使用は低くします。 論理ディスクで 1 つのディスクを使用する場合、このカウンターは適しています。 "% のアイドル時間"にディスクがアイドル状態だったサンプリング間隔中に時間の比率を報告します。<br /><br /> ディスク バインドの問題は除きますリファレンス。 [http://go.microsoft.com/fwlink/?linkid=50669](http://go.microsoft.com/fwlink/?linkid=50669)|  
|ディスク: 論理/物理ディスク読み取り/書き込み待機時間分析|ディスク パフォーマンスのボトルネックを検出するために Windows の最も信頼性の高い方法は、その応答時間を測定することによってです。 応答時間が安全なしきい値である、.025 (25) (ミリ秒単位) を超える顕著な処理が遅く、パフォーマンスの問題をユーザーに影響を発生する可能性があります。 詳細については、このトピックの「論理/物理ディスク読み取り/書き込み待機時間分析を参照してください。|  
|ディスク: 論理ディスクの転送/秒|「ディスクの転送/秒」は読み取り率、ディスク上の操作を書き込むとします。 この分析を確認してくださいかどうかの論理ディスクのいずれかのしきい値が表示される応答時間が長い (I/O 操作の応答時間を 25 ミリ秒より大きい)。 これが true の場合は、80 以上にし、1 秒あたりのディスク転送はする必要があります。 それ以外の場合は、ディスクのアーキテクチャを調査する必要があります。 不適切なディスク I/O の最も一般的な原因は、LUN、SAN でオーバー ロードです。 詳細については、このトピックの内容の論理ディスクの転送/秒を参照してください。|  
|ディスク: LogicalDisk % Free Space|"% の空き領域"が、選択した論理ディスク ドライブに空きの合計の空き領域の割合を指定します。 パフォーマンスは、ディスク ドライブの空き領域が 30% 未満になるまでにない影響する必要があります。 ディスク ドライブの 70% を使用すると残りの空き領域ある近い下位のパフォーマンス レベルで機能します。 ディスク ドライブの中央にあるディスクのスピンドルにします。 ディスクの空き領域が不足しているには、重大なディスク パフォーマンスを可能性があります。<br /><br /> 参照: NT Server とのディスク サブシステムのパフォーマンス [http://go.microsoft.com/fwlink/?linkid=106783](http://go.microsoft.com/fwlink/?linkid=106783)|  
|ディスク: は IO Data operations/sec を処理し、プロセスの I/O その他の動作数/秒の分析|これらのカウンターは、ファイル、ネットワーク デバイスの I/o など、プロセスによって生成されるすべての I/O アクティビティをカウントします。 これらの解析では、プロセスが実行されては 1,000 を超える/O が 1 秒あたりのおよび警告としてフラグとを確認します。 これらの解析は、I/O アクティビティに関連するプロセスを決定する最適なディスクの分析などの他の分析との相関関係で使用されます。|  
|使用可能なメモリのメモリ:|この分析は、使用可能なメモリの合計が低 ~ 10% の使用可能な警告かどうかを確認します。 と 5% の使用可能な重要な。 警告は 1 時間あたり 10 MB の下降傾向が検出された場合、潜在的な予定されているメモリの状態を示していることにも警告します。 物理メモリの不足には、増加した特権モード CPU とシステム遅延可能性があります。 詳細については、このトピックで使用可能な MemoryAnalysis を参照してください。|  
|空きシステム ページ テーブル エントリのメモリ:|空きシステム ページ テーブル エントリ (PTE) は、システムによって使用されていないページ テーブル エントリの数です。 この分析では、10,000 未満の空き PTE がある場合よりも少ない 5,000 空き PTE の警告が認識されるかどうかをチェックして、PTE の外にシステムが実行されているかどうかを判断します。 ための十分な PTE の不足すると、システム全体がハングする可能性がありますが、 /3 GB スイッチは無料の PTE の量を大幅に下げるされます。 詳細については、このトピックの空きシステム ページ テーブル エントリの分析を参照してください。|  
|メモリ: メモリ リークの検出|この分析は、大量のシステムのメモリを消費、プロセスのいずれかどうかと、プロセスがメモリの消費量を時間の経過と共に増加しているかどうかを判断します。 プロセスがシステムにメモリを返す限り、メモリの大部分を使用しているプロセスは正常です。 グラフの傾向を増やすことを探します。 長期間にわたって上昇傾向は、メモリ リークである可能性があります。 「プライベート バイト」は、このプロセスによって割り当てられ、他のプロセスと共有できないメモリのバイト単位で、現在のサイズです。 この分析は、1 時間あたりの 10 の MB、5 MB の/時間の傾向を増やすことを確認します。 PAL の使用可能なメモリ分析との相関関係でこの分析を使用します。 詳細については、このトピックでメモリ リークの検出分析を参照してください。|  
|メモリ: ハンドルのリークの検出|この分析は、すべての各ハンドルの数を決定するプロセスが開いているハンドルのリークが発生するかどうかを決定する疑いがある場合を確認します。 大量のハンドルまたは積極的な上昇傾向を持つプロセスには、通常、メモリ リークが、ハンドルのリークことを示します。 このプロセスで現在開いているハンドルの合計数は、このプロセスでは、各スレッドが現在開いているハンドルの合計に等しいです。<br /><br /> 参照: デバッグでの診断ツール v1.1 [http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)|  
|メモリ: メモリ Pages input/sec|「ページの入力数/秒」ハード ページ フォールトを解決するのにはディスクから読み取らはページの率です。 プロセスのワーキング セットまたは物理メモリは、他の場所は、ディスクから取得する必要がある仮想メモリのページを参照する場合、ハード ページ フォールトが発生します。 この分析では、1 秒あたり 10 個より多くのページ ファイルの読み取りがあるかどうかを確認します。|  
|メモリ: メモリのページ/秒|この分析は、"pages/sec"が遠く (1,000) かどうかを確認します。 高である場合、システム可能性がありますメモリが不足するしようとしたため、ディスクへのメモリ ページです。 「1 秒あたりのページ数」は、ページの読み取りまたはハード ページ フォールトを解決するのにはディスクに書き込まれる位置です。 このカウンターは、システム全体の遅延を引き起こすフォールトのプライマリ インジケーターです。  使用可能なメモリや PAL 内のメモリ リークの検出分析との相関関係でこの分析を使用します。 場合は、同時にすべてこれらの分析の警告がスローされることは、し、この可能性があります、システムがメモリ不足していると、疑いのあるプロセスが関係しているし、PAL 内のメモリ リークの検出分析に記載されている analysis 手順に従います。<br /><br /> 詳細については、このトピックでのメモリ ページ数/秒の分析を参照してください。|  
|メモリ: メモリ システム キャッシュの常駐バイト数|「システム キャッシュの常駐バイト」は、ファイル システム キャッシュ内でオペレーティング システムのページング可能なコードのバイト単位のサイズです。 この値は、現在の物理的なページのみが含まれています、現在常駐していない仮想メモリ ページは含まれません。 この値は、コンポーネントの"メモリ\\\System コードの常駐バイト数"物理メモリに現在あるすべてのオペレーティング システムのページング可能なコードを表します。 このカウンターは、最後に計測された値のみを表示します。平均値ではありません。 この分析では、1 時間あたり 10 MB の上昇傾向を確認します。 負荷の下で、サーバーは、ディスクなどの I/O アクティビティをキャッシュするためにシステム キャッシュを使用する場合があります。 使用して相関関係でプロセス IO Data operations/sec とその他のプロセス IO 操作/秒 PAL に解析します。<br /><br /> 参照: ファイル キャッシュのパフォーマンスとチューニング [http://go.microsoft.com/fwlink/?linkid=106786](http://go.microsoft.com/fwlink/?linkid=106786)|  
|メモリ: 非プール (ページ バイト)|"Pool Nonpaged Bytes"は、サイズ、(バイト単位) を書き込むことができないオブジェクトのシステム メモリの領域、非ページ プールのディスクしますが、割り当てられる限り物理メモリ内に存在する必要があります。 この分析では、システム非プールの最大の近くに今後予定されているかどうかを表示するページ メモリのサイズを確認します。 これは、考慮に入れて、プール サイズの見積もりで/3 GB、物理メモリ サイズ、および 32 ビットまたは 64 ビット、しを決定する値は、推定プール サイズの 60% を超えるかどうか。 システムは、最大サイズに近いになると、システムの間でシステム ワイド ハングが発生でした。<br /><br /> Boot.ini ファイルで 3 GB スイッチ オプションでは、このメモリ プールのサイズが大幅に削減されます。<br /><br /> 詳細については、このトピックの「Pool Non-Paged バイト分析を参照してください。|  
|メモリ プール (ページ バイト)|この分析では、システムが最大プールに近いものかどうかを表示するページ メモリのサイズを確認します。 これは、考慮に入れて、プール サイズの見積もりで/3 GB、物理メモリ サイズ、および 32 ビットまたは 64 ビット、しを決定する値は、推定プール サイズの 60% を超えるかどうか。 システムは、最大サイズに近いになると、システムの間でシステム ワイド ハングが発生でした。<br /><br /> Boot.ini ファイルで 3 GB スイッチ オプションでは、このメモリ プールのサイズが大幅に削減されます。<br /><br /> 詳細については、このトピックの「プール Paged Bytes 分析を参照してください。|  
|メモリ: プロセスのスレッド数|この分析では、すべてのプロセスが 500 を超えるスレッドを持つかどうかと、1 時間あたり 50 のスレッドでスレッドの数を増やすかどうかを判断するプロセスを確認します。 大量のスレッドまたは積極的な上昇傾向を持つプロセスには、メモリ リークまたは高のコンテキストの切り替えのいずれかになるスレッド リークことを示します。 高コンテキストの切り替えは、高い特権モード CPU になります。|  
|メモリ: プロセスのワーキング セット|「ワーキング セット」は、このプロセスのワーキング セットのバイト単位で、現在のサイズ。 ワーキング セットは、プロセス内のスレッドが最近使用したメモリ ページのセットです。 コンピューターの空きメモリがしきい値を超えた場合は、ページは、使用されていない場合でも、プロセスのワーキング セットに残されます。 空きメモリ容量がしきい値を下回った場合は、ワーキング セットからページがトリミングします。 必要な場合、されますワーキング セットに戻るメイン メモリから出る前にします。 この分析は、10 MB の上昇傾向または各プロセスの詳細を確認します。 使用可能なメモリ分析が PAL 内の相関関係で使用します。<br /><br /> 参照: でのメモリのボトルネックの検出 [http://go.microsoft.com/fwlink/?linkid=106787](http://go.microsoft.com/fwlink/?linkid=106787)|  
|ネットワーク: ネットワークの出力キューの長さの分析|この分析は、ネットワーク アダプターを待機しているスレッドの数を確認します。 場合は、ネットワーク アダプターでは、多数のスレッドが待機している、し、システムはおそらく飽和状態になるネットワーク待機時間やネットワーク帯域幅のため、ネットワーク I/O。 「出力キューの長さ」は、パケット単位で、出力パケット キューの長さです。 遅延が示されます。 これは、2 より長い場合と、ボトルネックを調査してください、可能であれば除去します。 ネットワークの出力キューの一般的な原因には、多数小規模なネットワーク要求とネットワークの待機時間にはが含まれます。|  
|ネットワーク: ネットワーク使用率の分析|「バイト合計/秒」は、フレーム文字も含めて、各ネットワーク アダプタ上で送受信はバイトです。 "Network interface \bytes received/sec"は、"Network interface \bytes received/sec"および"Network interface \bytes sent/sec"の合計です。 このカウンターでは、ネットワーク アダプターでトラフィックが飽和状態かどうかと、別のネットワーク アダプターを追加する必要があるかどうかを把握するのに役立ちます。 問題を特定するどの程度の速度によって異なりますだけでなく他のアプリケーションと帯域幅を共有するかどうかのネットワークがある場合。 この分析では、ビットを「バイト合計/秒」に変換し、ネットワーク使用率を計算するネットワーク アダプターの現在の帯域幅を比較します。 次に、使用率が 50% を超えたことを確認します。<br /><br /> 参照: での .NET アプリケーション パフォーマンスの測定 [http://go.microsoft.com/fwlink/?linkid=106788](http://go.microsoft.com/fwlink/?linkid=106788)|  
|ページング ファイル: ページング ファイルの使用率 % と % 使用率のピーク|パーセント単位での使用中のページ ファイル インスタンスの量。 参照"プロセス\\\Page File Bytes"です。 この分析では、使用率が 70% を超えるかどうかを確認します。|  
|プロセッサ: プロセッサ使用率の分析やプロセスによって過度なプロセッサの使用|このカウンターはプロセッサの処理状況を示すプライマリ インジケータであり、サンプリング間隔中に測定されたビジー時間の割合の平均値を表示します。 サービスはアクティブでない時間を監視し、その値を 100% から引いて算出します。 この分析では、各プロセッサの 60% を超える使用率を確認します。 場合は、高度なユーザー モード CPU または高の特権モードであるかどうかを決定します。 高い特権モード CPU が疑われる場合、PAL 内の特権モード CPU の分析を参照してください。 ユーザー モードのプロセッサのボトルネックが疑いがある場合、プロセスのプロファイラーを使用して、CPU の消費が発生した関数を分析するを検討します。|  
|プロセッサ: プロセッサ キューの長さ|この分析では、平均プロセッサ キューの長さがプロセッサの数を超えるかどうかを判断します。 場合は、プロセッサのボトルネックをあるこの可能性があります。 PAL 内のプロセスの分析での特権モード CPU の分析とプロセッサ使用率が過剰な相関関係でこの分析を使用します。 詳細については、このトピックの「プロセッサ キュー長さ分析を参照してください。|  
|プロセッサ: 特権モードの CPU の分析|このカウンターは、スレッドが特権モードで実行時間の割合を示します。 アプリケーションが (たとえば、ファイルまたはネットワーク I/O を実行するか、メモリを割り当てるなど) のオペレーティング システム関数を呼び出すと、これらのオペレーティング システム関数が特権モードで実行されます。 この分析は、特権モード CPU が CPU の合計の 30% 以上を消費しているかどうかを確認します。 CPU 消費率が高いし、そのため場合、は、ネットワーク、メモリ、ディスク I/O など、プロセッサ以外の別のボトルネックによって発生します。 プロセッサとの相関関係で使用する: % Interrupt Time およびプロセッサ: PAL 内の高いコンテキストの切り替えの解析します。 詳細については、このトピックの特権モードの CPU の分析を参照してください。|  
|割り込み時間のプロセッサ。|"% の割り込み時間"は、サンプリング間隔中にハードウェアの割り込みの受信と、プロセッサが費やす時間。 この値は、システム クロック、マウス、ディスク ドライバ、データ通信ライン、ネットワーク インターフェイス カードおよび他の周辺機器など割り込みを生成するデバイスの処理状況を間接的に示します。 タスクが完了または注意を必要としたとき、これらのデバイスは通常、プロセッサを中断します。 標準スレッドの実行は、割り込み中は中断されます。 システム クロックのほとんどは、割り込み処理状況のバック グラウンドを作成しながら、10 ミリ秒ごとに、プロセッサを中断します。 このカウンターに、大幅に向上では、潜在的なハードウェアの問題を示します。 この分析は、「% Interrupt Time」のチェック 30% より大きい。 この場合、このアラートに関連しているハードウェアのデバイス ドライバーを更新し、検討してください。<br /><br /> 参照: での .NET アプリケーション パフォーマンスの測定 [http://go.microsoft.com/fwlink/?linkid=106788](http://go.microsoft.com/fwlink/?linkid=106788)|  
|プロセッサ: 高コンテキストの切り替え|コンテキスト スイッチには、優先順位が高いスレッド横取り優先順位の低いスレッドが現在実行されているとき、または優先度の高いスレッドがブロックが発生します。 高レベルのコンテキストの切り替えは、多くのスレッドが同じ優先順位を共有する場合に発生します。 これは、多くの場合、システムのプロセッサをスレッドが多すぎるが競合することを示します。 一般的な規則として、プロセッサごとの 1 秒あたりの 5,000 未満のコンテキスト切り替えのレートはに関して心配する価値があります。 コンテキスト切り替えレートは、プロセッサごとの 1 秒あたりの 15,000 を超えている場合、制約があります。 詳細については、このトピックの「高コンテキスト切り替え分析を参照してください。|  
|Microsof BizTalk サーバー: BizTalk オーケストレーションを退避|多くの実行時間の長いビジネス プロセスを同時に実行しているときに、メモリおよびパフォーマンスに関する問題が可能です。 オーケストレーション エンジンでは、オーケストレーション インスタンスを "退避" および "復元" することで、これらの問題に対処します。 退避とは、オーケストレーションの状態を SQL Server データベースにシリアル化するプロセスのことです。 復元ではこのプロセスの逆: データベースからオーケストレーションの前回の実行状態を逆シリアル化します。 退避は、メモリ内で一度にインスタンス化する必要があるオーケストレーションの数を減らすことによって、システム リソースの使用を最小限に抑えるために使用します。 そのため、dehyrations メモリの消費量を減らすが比較的高価な操作を実行します。 この分析では、10 個以上の dehydrations を確認します。 場合は、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]が実行されて (仮想または物理) は、メモリ、不足値が高く、メッセージを待機しているオーケストレーションの数または退避設定が正しく設定されていません。<br /><br /> 参照: オーケストレーションの退避と復元で  [http://go.microsoft.com/fwlink/?LinkId=155284](http://go.microsoft.com/fwlink/?LinkId=155284)|  
|Microsoft BizTalk Server: BizTalk 高データベース セッション|このカウンターは、2 つの値を持つ: 標準 (0) または値を超えました (1)。 この分析では、1 の値を確認します。 場合は、BizTalk は許可されているデータベース セッション数のしきい値を超えています。 この値は、BizTalk ホストの制限の設定で「CPU ごとのデータベース接続」の値によって制御されます。 許可される制限が適用されます (CPU ごとの) 同時実行データベース セッションの最大数は、「データベースの CPU ごとの接続」です。 BizTalk:Message Agent パフォーマンス オブジェクト カテゴリの下のデータベース セッションのパフォーマンス カウンターを使用して、アクティブなデータベース接続の数を監視できます。 このパラメーターは、送信メッセージの制限だけに影響します。 詳細については、このトピックの「BizTalk 高データベース セッション分析を参照してください。|  
|Microsoft BizTalk Server: BizTalk High Database Size|このカウンターは、データベースのしきい値のメッセージ カウント に登録されている条件のいずれかが発生した場合、値を 1 に設定されます。 既定ホスト メッセージでは、データベースの制限のしきい値のカウントは、値は、次の状況で制限の条件をトリガーする 50,000 に設定します。<br /><br /> -作業、状態、およびサブスクライブを行うホストの保留キューにホスト インスタンスによって公開されたメッセージの合計数が 50,000 を超えた。<br />-、スプール テーブルまたは追跡テーブル内のメッセージの数は、500,000 メッセージを超えています。<br /><br /> このような場合、一連の措置をデータベース内のメッセージの数を削減を検討します。 たとえば、内の SQL Server ジョブを確認[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]エラーなしで実行しているし、[グループ ハブ] ページを使用、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]によって大量の保留メッセージをメッセージのビルドが原因かどうかを判定する管理コンソールです。 詳細については、このトピックの「BizTalk 高データベース サイズ分析を参照してください。|  
|Microsoft BizTalk Server: BizTalk 高のインプロセス メッセージ カウント|この分析では、このような調整が行われているかどうかを決定する、高のインプロセス メッセージ数カウンタを確認します。 場合は、「CPU あたりのインプロセス ・ メッセージ」設定を調整することを検討してください。 このパラメーターは、送信メッセージの制限だけに影響します。 CPU あたりのインプロセス メッセージの数に基づいた制限を無効にする「プロセスでは、CPU あたりメッセージ」設定に値 0 を入力します。 「CPU あたりのインプロセス ・ メッセージ」設定の既定値は、1,000 です。 この値を変更することもできます影響を与えるメッセージの低待機時間および BizTalk リソースの効率性に注意してください。 詳細については、このトピックの「BizTalk 高のインプロセス メッセージ数分析を参照してください。|  
|Microsoft BizTalk Server: BizTalk 高いメッセージ配信レート|この分析では、1、メッセージ配信率が高いカウンターの値を確認します。 高いメッセージ配信率は、処理の多い複雑さ、低速の送信アダプター、またはシステム リソースの一時的な不足によって可能性があります。 詳細については、このトピックの「BizTalk の高いメッセージ配信レート分析を参照してください。|  
|Microsoft BizTalk Server: BizTalk 高いメッセージの公開のレート|受信ホスト制限は、またメッセージ公開の制限と呼ばれる[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]に適用されるアダプターまたはメッセージ ボックス データベースにメッセージを公開するオーケストレーションを含むホスト インスタンスが受信します。 この分析では、1、メッセージ公開の割合が高いカウンターの値を確認します。 この場合、し、データベースに対応できないメッセージの公開の割合を BizTalk メッセージ ボックス データベースにします。<br /><br /> 参照:<br /><br /> -ホストでの制限のパフォーマンス カウンター [http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)<br />-どの[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ホストに制限の実装 [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)<br />メッセージ公開の制限の設定 ダイアログ ボックスで [http://go.microsoft.com/fwlink/?LinkId=155287](http://go.microsoft.com/fwlink/?LinkId=155287)<br />-ホスト制限とはで [http://go.microsoft.com/fwlink/?LinkID=154694](http://go.microsoft.com/fwlink/?LinkID=154694)|  
|Microsoft BizTalk Server: BizTalk 高プロセス メモリ|BizTalk プロセス メモリ使用量のしきい値の設定の調整は、プロセスの使用可能な仮想メモリの合計と作業セット サイズの合計と比較した場合は 1 ~ 100 の値を入力使用されるメモリの割合です。 比率が指定されている場合、プロセス メモリのしきい値は、定期的に再計算されます。 この分析では、高のプロセス メモリ カウンターの 1 の値を確認します。 詳細については、このトピックの「BizTalk 高プロセス メモリ分析を参照してください。|  
|Microsoft BizTalk Server: BizTalk 高システム メモリ|BizTalk 物理メモリ使用量の制限しきい値の設定では、1 ~ 100 で指定する場合の使用可能な物理メモリの総量と比較してメモリ使用量の割合が入力されます。 この設定では、100 より大きい値を入力する場合、メガバイト単位で使用可能な物理メモリの総量こともできます。 物理メモリ使用量に基づいた制限を無効にするには、値 0 を入力してください。 既定値は 0 です。 詳細については、このトピックの「BizTalk 高システム メモリ分析を参照してください。|  
|Microsoft BizTalk Server: BizTalk 高スレッド数|「CPU あたりのスレッド」は、アダプターで使用されるスレッドを含むホスト プロセス内のスレッドの合計数です。 このしきい値を超えた場合、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]を EPM スレッド プールとメッセージ エージェント スレッド プールのサイズを減らすために試行されます。 高負荷によって多くのスレッドを作成するシナリオでは、スレッド ベースの制限を有効にする必要があります。 このパラメーターは、受信制限と送信制限の両方に影響します。 既定では、スレッド ベースの制限を無効になっています。 詳細については、このトピックの「BizTalk 高スレッド カウント分析を参照してください。|  
|Microsoft BizTalk Server: BizTalk ホストのキューの長さ|BizTalk ホストのキューの長さは、特定のホスト キュー内のメッセージの合計数を追跡します。 長さのサイズ (つまり、' BizTalk:MessageBox:HostCounters:Host キュー – 長さ ') を使用すると、キューに登録される内部的に個々 のホストのキューの深さを表示することによってメッセージの数の詳細なビューを提供します。 このカウンターは、特定のホストがボトルネックになっていた場合の判断に役立ちます。 各トランスポートは一意のホストに使用されると仮定した場合、このできます潜在的なトランスポートのボトルネックを特定するのに役立ちます。 この分析では、キューの平均の長さが 1 より大きい値を確認します。 ホスト キューの長さは、ターゲット ホストのすべてのキュー (作業 Q」状態 Q 中断 Q) のレコードの数を集計することによって重み付けされたキューの長さです。<br /><br /> 参照: BizTalk Server 2006: に正常に実行パフォーマンス ラボを管理する[ http://go.microsoft.com/fwlink/?linkid=104152 ](http://go.microsoft.com/fwlink/?linkid=104152) **注:**このホワイト ペーパーも BizTalk Server に適用できます。|  
|Microsoft BizTalk Server: BizTalk ホストが中断されたメッセージ キューの長さ|このカウンターは、特定のホストの保留メッセージの合計数を追跡します。 中断されたメッセージは、メッセージまたはオーケストレーションのインスタンスを[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]エラーのため、システムまたはメッセージの処理を停止します。 通常、システム エラーによって中断されたインスタンスは、システムの問題が解決された時点で再開可能になります。 多くの場合、メッセージの問題によって中断されたインスタンスは再開できないと、メッセージ自体を固定およびに再送信する必要があります、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]システムです。<br /><br /> 保留中のメッセージ キューは、対象のエラーや障害が発生しました処理中に作業項目を含むキューです。 保留キューのメッセージは最終的に、修正されて再処理されるか、削除されます。 この分析では、出現するすべての保留メッセージを確認します。 上昇傾向は、重大な処理エラーである可能性があります。<br /><br /> 参照: BizTalk Server 2004: 監視とトラブルシューティング [http://go.microsoft.com/fwlink/?linkid=108771](http://go.microsoft.com/fwlink/?linkid=108771)|  
|BizTalk のアイドル状態のオーケストレーションを BizTalk サーバー:|ホスト インスタンスが現在ホストしている、アイドル状態のオーケストレーション インスタンスの数。 このカウンターは、進行状況を行わない、待避可能なオーケストレーションを指します。 このような状況は、オーケストレーションがブロックされたときに発生する可能性が受信を待機している待ち受け、またはアトミックのトランザクションに遅延します。 非待避可能なオーケストレーションの数が多いがたまっている場合、BizTalk はメモリ不足です。<br /><br /> 退避とは、オーケストレーションの状態を SQL Server データベースにシリアル化するプロセスのことです。 復元ではこのプロセスの逆: データベースからオーケストレーションの前回の実行状態を逆シリアル化します。 退避は、メモリ内で一度にインスタンス化する必要があるオーケストレーションの数を減らすことによって、システム リソースの使用を最小限に抑えるために使用します。 エンジンは、状態を保存することでインスタンスを退避し、インスタンスに必要なメモリを解放します。 休止しているオーケストレーション インスタンスを退避することにより、多数の長時間実行されるビジネス プロセスを単一のコンピューターで同時に実行できるようになります。 この分析では、1 時間あたり 1 つのアイドル状態のオーケストレーションの上昇傾向を確認します。<br /><br /> 参照: オーケストレーションの退避と復元で  [http://go.microsoft.com/fwlink/?LinkId=155284](http://go.microsoft.com/fwlink/?LinkId=155284)|  
|BizTalk Server: BizTalk の受信待機時間|ときに、メッセージング エンジンからドキュメントを受信アダプター、メッセージ ボックス データベースにパブリッシュされるまでのミリ秒単位の平均待機時間。 待機時間を短縮することが重要、BizTalk の一部のユーザーしたがって作業がどの程度受信アダプタで費やしている時間ドキュメントの追跡が重要です。 詳細については、このトピックの「BizTalk の受信待機時間分析を参照してください。|  
|BizTalk Server: BizTalk メッセージの配信の遅延|これは、各メッセージ配信バッチ (メッセージの配信が制限されている場合) に適用されるミリ秒 (ms) で現在の遅延です。 調整においては、遅延が公開またはメッセージの受信および送信するかどうかに応じて、メッセージの処理に適用されます。 遅延期間は、制限の条件の重大度に比例します。 制限の条件の重大度が高い制限の条件下の重大度よりなった帯域幅調整期間が開始されます。 この遅延期間は、条件が変わるたびに制限のメカニズムによって特定の範囲内で期間が調整されます。 現在の遅延期間は、メッセージ配信の遅延 (ミリ秒) とメッセージ公開の遅延 (ミリ秒) のパフォーマンス カウンター BizTalk:Message Agent パフォーマンス オブジェクト カテゴリに関連付けられているを通じて公開されます。 この分析では、5 秒以上のメッセージ配信の遅延を確認します。 長いメッセージ配信の遅延は、重負荷が高いに起因する制限可能性があります。<br /><br /> 参照: どの[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ホストに制限の実装 [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)|  
|BizTalk Server: BizTalk メッセージの配信制限の状態|BizTalk メッセージの配信制限の状態は調整のプライマリ インジケーターです。 これは、システムで (XLANG メッセージ処理および送信トランスポートに影響する) メッセージ配信を制限するかどうかを示すフラグです。 制限の条件は、カウンターの数値で示されます。 詳細については、このトピックの「BizTalk メッセージの配信制限の状態の分析を参照してください。|  
|BizTalk Server: BizTalk メッセージの公開の遅延|メッセージの公開を制限するために該当する各バッチに挿入される遅延です。 調整においては、遅延が公開またはメッセージの受信および送信するかどうかに応じて、メッセージの処理に適用されます。 遅延期間は、制限の条件の重大度に比例します。 制限の条件の重大度が高い制限の条件下の重大度よりなった帯域幅調整期間が開始されます。 この遅延期間は、条件が変わるたびに制限のメカニズムによって特定の範囲内で期間が調整されます。 現在の遅延期間は、メッセージ配信の遅延 (ミリ秒) とメッセージ公開の遅延 (ミリ秒) のパフォーマンス カウンター BizTalk:Message Agent パフォーマンス オブジェクト カテゴリに関連付けられているを通じて公開されます。 この分析では、5 秒を超えるの遅延を公開するメッセージを確認します。 長いメッセージ配信の遅延は、重負荷が高いに起因する制限可能性があります。<br /><br /> 参照: どの[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ホストに制限の実装 [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)|  
|BizTalk Server: BizTalk メッセージ ボックス データベース接続エラー|このパフォーマンス カウンターは、ホスト インスタンスが起動されてから実行しようとしたデータベース接続の数です。 BizTalk データベースをホストする SQL Server サービスは、何らかの理由で利用不可になると、データベース クラスターによって、リソースが active コンピューターからパッシブ側コンピューターに転送します。 このフェールオーバー処理中に、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]サービス インスタンスがデータベース接続エラーが発生し、データベースへの再接続を自動的に再起動します。 正常に動作しているデータベース コンピューター (先ほどまでパッシブ側であったコンピューター) が、フェールオーバーでリソースを引き継いだ後、データベース接続の処理を開始します。 詳細については、このトピックの「BizTalk メッセージ ボックス データベース接続の失敗の分析を参照してください。|  
|BizTalk Server: BizTalk メッセージング遅延: 応答の待機時間の要求|アダプターからメッセージング エンジンへと渡された要求が、応答ドキュメントとしてアダプターに返されるまでの平均待機時間 (ミリ秒)。 BizTalk の受信待機時間分析でこのトピックの待機時間を測定する方法を示すグラフを参照してください。 低待機時間の環境を想定すると、この分析は、5 秒を超える要求-応答待機時間を確認します。 受信アダプタと送信アダプターの間の処理の遅延がある可能性があります。<br /><br /> 参照:<br /><br /> -要求/応答メッセージングに [http://go.microsoft.com/fwlink/?LinkId=155288](http://go.microsoft.com/fwlink/?LinkId=155288)<br />BizTalk Server 2006: での BizTalk Server 2006 では、SOAP アダプターを使用して拡張性のケース スタディ [http://go.microsoft.com/fwlink/?linkid=108774](http://go.microsoft.com/fwlink/?linkid=108774)|  
|BizTalk Server: BizTalk メッセージ公開の制限の状態|BizTalk メッセージの公開の制限の状態は調整のプライマリ インジケーターです。 これは、システムで (XLANG メッセージ処理および受信トランスポートに影響する) メッセージの公開を制限するかどうかを示すフラグです。 詳細については、このトピックの「BizTalk メッセージング公開の制限の状態の分析を参照してください。|  
|BizTalk オーケストレーションの BizTalk サーバー: 保留/秒|中断されたメッセージは、メッセージまたはオーケストレーションのインスタンスを[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]エラーのため、システムまたはメッセージの処理を停止します。 通常、システム エラーによって中断されたインスタンスは、システムの問題が解決された時点で再開可能になります。 多くの場合、メッセージの問題によって中断されたインスタンスは再開できないと、メッセージ自体を固定およびに再送信する必要があります、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]システムです。 この分析は、中断されたメッセージ/オーケストレーションをチェックします。<br /><br /> 参照: BizTalk Server 2004: 監視とトラブルシューティング [http://go.microsoft.com/fwlink/?linkid=108771](http://go.microsoft.com/fwlink/?linkid=108771)|  
|BizTalk オーケストレーションを BizTalk サーバー: 完了/秒|これが完了した BizTalk オーケストレーションの数は、1 秒間です。 これは、BizTalk の処理はどれくらいのスループットかを示す優れた指標です。 この分析では、統計のみを提供します。<br /><br /> 参照: BizTalk Server 2006: BizTalk Server 2006 では、SOAP アダプターを使用して拡張性のケース スタディ <br />[http://go.microsoft.com/fwlink/?linkid=108774](http://go.microsoft.com/fwlink/?linkid=108774)|  
|BizTalk Server: BizTalk オーケストレーションの破棄|ホスト インスタンスの起動以降にメモリから破棄されたオーケストレーション インスタンスの数。 エンジンがオーケストレーション状態の永続化に失敗した場合、そのオーケストレーションは破棄可能と見なされます。 この分析では、破棄されたメッセージを確認します。<br /><br /> BizTalk のコア エンジンのブログを参照します。<br />[http://go.microsoft.com/fwlink/?linkid=108775](http://go.microsoft.com/fwlink/?linkid=108775)|  
|メモリ内に BizTalk オーケストレーション常駐。 BizTalk サーバー:|ホスト インスタンスによって現在ホストされているオーケストレーション インスタンスの数。 この分析では、メモリおよびかどうか、オーケストレーションをメモリ内の 50% 以上ない待避可能なに常駐しているオーケストレーションに上昇傾向を確認します。 詳細については、メモリ分析で BizTalk オーケストレーションの常駐を参照してください。|  
|BizTalk Server: BizTalk 送信アダプターの待機時間|これは、ときに、アダプターを取得、ドキュメント、メッセージング エンジンからアダプターによって送信されるまでの秒単位での平均待機時間です。 BizTalk の受信待機時間分析でこのトピックの待機時間を測定する方法を示すグラフを参照してください。 低待機時間の環境を想定すると、この分析チェック待機時間が 5 秒以上の送信アダプターでの平均です。 このホスト インスタンスでの送信アダプターを経由してメッセージの転送の処理の遅延がある可能性があります。 複数の送信アダプターは、このホスト インスタンスに存在する場合、どの送信アダプターが高待機時間を決定する、独自のホストに分割することを検討します。<br /><br /> 参照:<br /><br /> -要求/応答メッセージングに [http://go.microsoft.com/fwlink/?LinkId=155288](http://go.microsoft.com/fwlink/?LinkId=155288)<br />BizTalk Server 2006: での BizTalk Server 2006 では、SOAP アダプターを使用して拡張性のケース スタディ [http://go.microsoft.com/fwlink/?linkid=108774](http://go.microsoft.com/fwlink/?linkid=108774)<br />-で BizTalk 層のボトルネックの特定 [http://go.microsoft.com/fwlink/?LinkId=155289](http://go.microsoft.com/fwlink/?LinkId=155289)<br />BizTalk Server 2004: で低待機時間がメッセージングのパフォーマンスの調整 [http://go.microsoft.com/fwlink/?linkid=108777](http://go.microsoft.com/fwlink/?linkid=108777)|  
|BizTalk サーバー: BizTalk メッセージの保留中|メッセージ ボックスに受信確認されていない受信メッセージの数。 保留中のメッセージをメモリに取得されて、XLANG オーケストレーションに配信がまだとしていないメッセージされて処理されます。 このような状況では、データの損失を行うには関係ありません。  オーケストレーションにメッセージを配信するプロセスの複数のステップ、単にデータベースのスプール テーブルに存在するメッセージのインスタンス。 処理中にメッセージ; のカウントこれらのメッセージを保留中これにより、メモリ内でそれらの多くでしたとメモリ システムで制限します。 内部メッセージ キュー サイズの設定を調整で保留中のメッセージの数を制御できる場合があります。 CPU あたりのインプロセス メッセージの設定は、調整が起動と多数の保留中のメッセージが発生した場合の影響を及ぼします。 これらの設定は、BizTalk 管理コンソールでホストのプロパティ内にあります。 この分析では、このカウンターの表示の統計情報のみを確認します。<br /><br /> 参照: オーケストレーション エンジンのパフォーマンス カウンター [http://go.microsoft.com/fwlink/?LinkId=155290](http://go.microsoft.com/fwlink/?LinkId=155290)|  
|BizTalk Server: BizTalk 永続化ポイント/秒|永続化されたオーケストレーション インスタンスの 1 秒あたりの平均数。 オーケストレーション エンジンは、さまざまな場所で実行しているオーケストレーション インスタンスの状態を保存します。 オーケストレーション インスタンスの復元、制御されたシャット ダウンからの開始、または予期しないシャット ダウンから回復する必要がある場合は、オーケストレーション インスタンスを最後の永続性ポイントから実行します。 オーケストレーション インスタンスを保持するためにすべてのオブジェクト インスタンス直接的または間接的にオーケストレーションが参照するなどその他のオブジェクトをシリアル化可能である必要があります。 メッセージ永続化 (データが永続化する必要がある時間の数) の頻度増加、全体的なパフォーマンスが低下します。 各永続化ポイントのデータベースへのラウンド トリップが実際には、ので可能な限り、この永続化ポイントの頻度を回避または永続化ポイントを統合することによって減らします。 永続化ポイントが発生したときの詳細については、下の参照を参照してください。 この分析は、平均で 1 秒あたり 10 個より多くの永続化ポイントを確認します。 これは、一般的な開始点です。<br /><br /> 参照:<br /><br /> 永続化にオーケストレーションで [http://go.microsoft.com/fwlink/?LinkId=155291](http://go.microsoft.com/fwlink/?LinkId=155291)<br />永続化し、オーケストレーション エンジンで [http://go.microsoft.com/fwlink/?LinkId=155292](http://go.microsoft.com/fwlink/?LinkId=155292)|  
|BizTalk Server: BizTalk Private Bytes|これは、"\Process (*) \Private バイト数"パフォーマンス カウンターを比較し、ホスト インスタンスの割り当て済みのプライベート メモリのメガバイト数です。 この分析は、かどうか、システムのメモリのサイズが大きくを使用して、任意のホスト インスタンスは、ホスト インスタンスがメモリの消費量を時間の経過と共に増加しているかどうかを判断します。 詳細については、このトピックでは、BizTalk のプライベート バイトの分析を参照してください。|  
|BizTalk Server: BizTalk スプール テーブル サイズ|メッセージ ボックス スプール テーブルには、システム内の各メッセージのレコードが含まれています (アクティブまたは「ガベージ コレクション」を待機している)。 このテーブル内の行の数およびシステムの負荷が増加には、最大のスループットを検索する簡単な方法が用意されています。 1 秒あたりに受信したメッセージの数を監視します。 いずれか 1)、スプール テーブルが無制限に拡大が開始されるまで入力負荷または 2) あたり 2 つ目の安定した状態、どちらか早い方、つまり最大スループットに受信したメッセージの数を増やすだけです。 要約すると、その他のインジケーターに関係なくこのメジャーはな、迅速かつ簡単な方法をシステムはされているクリップが発生するかどうかを評価します。 上昇傾向に BizTalk スプール テーブル サイズがある場合に起因する制限不均衡メッセージ配信レート (入力率が出力率を超える場合) またはデータベースのサイズに起因する制限が発生する可能性があります。 この分析では、BizTalk スプール テーブル サイズの上昇傾向を確認します。<br /><br /> 参照:<br /><br /> BizTalk Server 2004 SP1 スループットとでの容量を把握します。 [http://go.microsoft.com/fwlink/?linkid=108781](http://go.microsoft.com/fwlink/?linkid=108781)<br />維持可能なロード テスト [http://go.microsoft.com/fwlink/?LinkId=155293](http://go.microsoft.com/fwlink/?LinkId=155293)<br />推奨事項にエンジンのパフォーマンスをテストする場合 [http://go.microsoft.com/fwlink/?LinkID=155294](http://go.microsoft.com/fwlink/?LinkID=155294)|  
|BizTalk Server: BizTalk の追跡データのサイズ|BizTalk Server では、システムの詳細と詳細データを処理するサイズを大きく、BizTalk 追跡データベース (BizTalkDTADb) は続行されます。 サイズが増加してもチェックされないので、システム パフォーマンスが低下し、TDDS (Tracking Data Delivery Service) でエラーが発生することがあります。 一般的な追跡データに加えて、追跡メッセージもメッセージ ボックス データベースに累積されます。これにより、ディスクのパフォーマンスが低下します。 この分析は 5 MB 以上の追跡に 1 時間あたりの上昇傾向のチェックのデータのサイズ。<br /><br /> リファレンス:<br /><br /> アーカイブおよび BizTalk 追跡データベースの削除  [http://go.microsoft.com/fwlink/?LinkID=153816](http://go.microsoft.com/fwlink/?LinkID=153816)|  
|BizTalk Server: BizTalk トランザクション スコープが中止されました|これは、ホスト インスタンスの起動以降に中止された長時間またはアトミックのスコープの数です。 トランザクション スコープ中止は、オーケストレーション内でトランザクション スコープ内に発生するエラーです。 スコープ完了しましたが、前後のスコープになりました (ため、プロセスの後半で発生した障害) を中止するためには実行されませんし、必要なは場合にのみ、スコープの補正ハンドラーが呼び出されることを理解しておく必要があります。 また、トランザクションが中断された場合、状態の「自動」ロールバックは行われません。 例外処理および補正ハンドラーをプログラムで使用には、この結果を得ることができます。 トランザクション スコープの中止は、通常、運用環境以外では実行されません。そのため、この分析は中止されたトランザクション スコープに出現する位置を確認します。<br /><br /> リファレンス:<br /><br /> BizTalk Server 2004 で全体のトランザクション [http://go.microsoft.com/fwlink/?linkid=108784](http://go.microsoft.com/fwlink/?linkid=108784)|  
|BizTalk Server: BizTalk のトランザクション スコープが補正|補正は何らかのエラー状態への応答が正常にコミットされている作業の論理元に戻すと考えることができます。 スコープ完了しましたが、前後のスコープになりました (ため、プロセスの後半で発生した障害) を中止するためには実行されませんし、必要なは場合にのみ、スコープの補正ハンドラーが呼び出されることを理解しておく必要があります。 また、トランザクションが中断された場合、状態の「自動」ロールバックは行われません。 これは、例外処理および補正処理を使ったプログラムによって実現できます。 トランザクション スコープの補正は、通常、運用環境以外では実行されません。そのため、この分析は中止されたトランザクション スコープに出現する位置を確認します。<br /><br /> BizTalk Server 2004 で全体のトランザクションのリファレンス: [http://go.microsoft.com/fwlink/?linkid=108784](http://go.microsoft.com/fwlink/?linkid=108784)|  
|BizTalk Server: BizTalk 仮想バイト数|これは、ホスト インスタンスの仮想メモリの予約済みのメガバイト数です。 この分析は、大量のシステムのメモリを消費、任意のホスト インスタンスかどうかと、ホスト インスタンスがメモリの消費量を時間の経過と共に増加しているかどうかを判断します。 詳細については、このトピックの「BizTalk 仮想バイト分析を参照してください。|  
|BizTalk Server: BizTalk メッセージ エージェントのデータベース セッションの制限|これは、調整設定の各 BizTalk と比較して、メッセージ ボックスを開いているデータベース接続の数です。 許可される制限が適用されます (CPU ごとの) 同時実行データベース セッションの最大数は、「データベースの CPU ごとの接続」です。 詳細については、このトピックの「BizTalk メッセージ エージェント データベース セッションの制限の分析を参照してください。|  
|BizTalk Server: BizTalk メッセージ エージェント データベース セッションの制限のしきい値|これは、メッセージ ボックス データベースへの開いているデータベース接続の数の現在のしきい値です。 許可される制限が適用されます (CPU ごとの) 同時実行データベース セッションの最大数は、「データベースの CPU ごとの接続」です。 詳細については、このトピックの「BizTalk メッセージ エージェント データベース セッションの制限のしきい値の分析を参照してください。|  
|BizTalk Server: BizTalk メッセージ エージェント インプロセス メッセージ数の調整|これは、サービス クラスが処理されている同時実行のメッセージの数です。 ホスト制限の設定で「プロセスでは、CPU あたりメッセージ」設定は、処理されていない、エンド ポイント マネージャー (EPM) または XLANG に配信されたメッセージの最大数です。 詳細については、このトピックの「BizTalk メッセージ エージェント インプロセス メッセージ数のスロットル分析を参照してください。|  
|BizTalk サーバー: BizTalk メッセージ エージェント インプロセス メッセージ カウントのしきい値を調整|これは、サービス クラスが処理されている同時実行のメッセージの数の現在のしきい値です。 ホスト制限の設定で「プロセスでは、CPU あたりメッセージ」設定は、処理されていない、エンド ポイント マネージャー (EPM) または XLANG に配信されたメッセージの最大数です。 詳細については、BizTalk メッセージ エージェント インプロセス メッセージ カウント調整しきい値 Analysis このトピックの内容を参照してください。|  
|BizTalk Server: BizTalk メッセージ エージェント プロセス メモリ使用量 (MB) の調整|これは、現在のプロセス (MB) のメモリ使用量です。 BizTalk プロセス メモリの制限は公開するバッチの急なメモリ要件がある場合、またはメッセージを処理しているスレッドが多すぎる場合に発生します。 詳細については、このトピックの「BizTalk メッセージ エージェント プロセス メモリ使用量 (MB) の調整分析を参照してください。|  
|BizTalk Server: BizTalk メッセージ エージェント プロセス メモリ使用量 (MB) しきい値の調整|これは、現在のプロセス (MB) のメモリ使用量の現在のしきい値です。 このプロセスとのメモリ消費のパターンに使用可能なメモリの実際の容量に応じて、しきい値を動的に調整する可能性があります。 BizTalk プロセス メモリの制限は公開するバッチの急なメモリ要件がある場合、またはメッセージを処理しているスレッドが多すぎる場合に発生します。 詳細についてを参照して BizTalk メッセージ エージェント プロセスのメモリ使用量 (MB) はこのトピックの内容に分析しきい値の調整。|  
|BizTalk Server: BizTalk メッセージ エージェント スレッド数の調整|BizTalk プロセス内のスレッドの合計数。 「CPU あたりのスレッド」は、アダプターで使用されるスレッドを含むホスト プロセス内のスレッドの合計数です。 このしきい値を超えると、BizTalk Server は、EPM スレッド プールのサイズとメッセージ エージェント スレッド プールを減らそうとします。 高負荷によって多くのスレッドを作成するシナリオでは、スレッド ベースの制限を有効にする必要があります。 このパラメーターは、受信制限と送信制限の両方に影響します。 既定では、スレッド ベースの制限を無効になっています。 この分析では、BizTalk のスレッド数が制限の条件が可能性を示す調整のしきい値の 80% を超えるかどうかを確認します。<br /><br /> 参照:<br /><br /> -ホストでの制限のパフォーマンス カウンター [http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)<br />-どの[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ホストに制限の実装 [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)<br />-既定のホスト制限の設定を変更する方法 [http://go.microsoft.com/fwlink/?LinkId=155296](http://go.microsoft.com/fwlink/?LinkId=155296)<br />アダプターのパフォーマンスに影響する構成パラメーター [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)<br />スレッド数、DB のセッションとの調整 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)|  
|BizTalk Server: BizTalk メッセージ エージェント スレッド数の制限のしきい値|これは、プロセス内のスレッドの合計数の現在のしきい値です。 「CPU あたりのスレッド」は、アダプターで使用されるスレッドを含むホスト プロセス内のスレッドの合計数です。 このしきい値を超えると、BizTalk Server は、EPM スレッド プールのサイズとメッセージ エージェント スレッド プールを減らそうとします。 高負荷が多数のスレッドを作成する可能性がシナリオでのスレッドに基づく制限を有効にする必要があります。 このパラメーターは、受信制限と送信制限の両方に影響します。<br /><br /> この分析では、この制限の設定が既定以外の値に設定されているかどうかを確認します。 既定では、スレッド ベースの制限を無効になっています。<br /><br /> 参照:<br /><br /> -ホストでの制限のパフォーマンス カウンター [http://go.microsoft.com/fwlink/?LinkId=155285](http://go.microsoft.com/fwlink/?LinkId=155285)<br />-どの[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ホストに制限の実装 [http://go.microsoft.com/fwlink/?LinkId=155286](http://go.microsoft.com/fwlink/?LinkId=155286)<br />-既定のホスト制限の設定を変更する方法 [http://go.microsoft.com/fwlink/?LinkId=155296](http://go.microsoft.com/fwlink/?LinkId=155296)<br />アダプターのパフォーマンスに影響する構成パラメーター [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)<br />スレッド数、DB のセッションとの調整 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)|  
  
## <a name="logicalphysical-disk-readwrite-latency-analysis"></a>論理/物理ディスク読み取り/書き込み待機時間の分析  
 ディスク パフォーマンスのボトルネックを検出するために Windows の最も信頼性の高い方法は、その応答時間を測定することによってです。 応答時間が安全なしきい値である、.025 (25) (ミリ秒単位) を超える顕著な処理が遅く、パフォーマンスの問題をユーザーに影響を発生する可能性があります。  
  
 不適切なディスクの待機時間の一般的な原因は、ディスクの断片化、パフォーマンスのキャッシュ、率飽和状態になり、SAN とディスクの過剰な負荷します。 SPA ツールを使用して、最上位ファイルとディスクを使用してプロセスの特定に役立ちます。 "プロセス IO Data operations/sec"と「プロセス IO 他の操作/秒」を確認して、どのプロセスが最もディスクを消費している I/O の パフォーマンス モニター カウンターが関係しているファイルを指定することができないことに注意してください。  
  
### <a name="references"></a>References  
  
-   ディスク バインドの問題は除きます [http://go.microsoft.com/fwlink/?linkid=50669](http://go.microsoft.com/fwlink/?linkid=50669)  
  
-   ツールを使用して、Microsoft サーバー パフォーマンス アドバイザー (SPA) でディスク パフォーマンスのボトルネックを特定する方法 [http://go.microsoft.com/fwlink/?linkid=98096](http://go.microsoft.com/fwlink/?linkid=98096)  
  
-   Microsoft サービス パフォーマンス アドバイザー (SPA) の詳細情報をダウンロードします。 [http://go.microsoft.com/fwlink/?linkid=57769](http://go.microsoft.com/fwlink/?linkid=57769)  
  
## <a name="logical-disk-transferssec"></a>論理ディスクの転送数/秒  
 「ディスクの転送/秒」は読み取り率、ディスク上の操作を書き込むとします。 ディスクの転送がディスクに直接的な相関関係ではないときに/O の実現何かありましたら数のディスク操作が実行されます。 シーケンシャル平均する場合 I/O のでランダムな I/O のして最終的に、約 80 I/O あたり 2 番目の一般的な経験則として。 そのため、実行 80 以上に SAN ドライブが予想される/O の下にある 2 番目の when あたりをロードします。 この分析を確認してくださいかどうかの論理ディスクのいずれかのしきい値が表示される応答時間が長い (I/O 操作の応答時間を 25 ミリ秒より大きい)。 これが true の場合は、80 以上にする 1 秒あたりのディスク転送を期待お必要があります。 それ以外の場合は、ディスクのアーキテクチャを調査する必要があります。 不適切なディスク I/O の最も一般的な原因は、論理ユニット番号 (LUN) が複数の LUN が少数の物理ディスク アレイを使用して、条件の意味、SAN のオーバー ロードです。  
  
### <a name="reference"></a>リファレンス  
 NT Server とのディスク サブシステムのパフォーマンス [http://go.microsoft.com/fwlink/?linkid=106783](http://go.microsoft.com/fwlink/?linkid=106783)  
  
## <a name="available-memory-analysis"></a>使用可能なメモリ分析  
 「利用可能なメガバイト数」は、コンピューターで、メガバイト単位で実行されているプロセスに使用できる物理メモリの量です。 仮想メモリ マネージャーは、オペレーティング システムおよびプロセスの使用可能なバイト数の最小数を維持するために物理メモリ内とディスクを使用する領域を継続的に調整します。 使用可能なバイト数が十分にある場合、仮想メモリ マネージャー プロセスのワーキング セットは、次の拡張、または追加された新しいページのそれぞれの以前のページを削除することによって、安定して保持します。 利用可能なバイトがいくつかの場合は、仮想メモリ マネージャーの最小要件を維持するためにプロセスのワーキング セットをトリミングする必要があります。  
  
 この分析が使用可能なメモリの合計が低 ~ 10% の使用可能な警告かどうかを確認および使用可能な 5% に重大です。 潜在的な予定されているメモリの状態を示す、1 時間あたり 10 MB の下降傾向が検出されたときに、警告も警告が発生します。 物理メモリの不足には、増加した特権モード CPU とシステム遅延可能性があります。  
  
### <a name="references"></a>References  
  
-   メモリのボトルネックの検出 [http://go.microsoft.com/fwlink/?linkid=106787](http://go.microsoft.com/fwlink/?linkid=106787)  
  
-   メモリ バインドの問題は除きます [http://go.microsoft.com/fwlink/?linkid=62575](http://go.microsoft.com/fwlink/?linkid=62575)  
  
## <a name="memory-leak-detection-analysis"></a>メモリ リークの検出の分析  
 この分析は、大量のシステムのメモリを消費、プロセスのいずれかどうかと、プロセスがメモリの消費量を時間の経過と共に増加しているかどうかを判断します。 メモリの大部分を使用しているプロセスは、プロセスがシステムにメモリを返す限り問題ありません。 グラフの傾向を増やすことを探します。 長期間にわたって上昇傾向は、メモリ リークである可能性があります。 Private Bytes は、このプロセスによって割り当てられ、他のプロセスと共有できないメモリのバイト単位で、現在のサイズです。 この分析は、1 時間あたりの 10 の MB、5 MB の/時間の傾向を増やすことを確認します。 使用可能なメモリ分析との相関関係でこの分析を使用します。  
  
 また、単に通常の起動動作になる場合に、新しく開始されたプロセスがメモリ リークとして表示最初に注意してください。 プロセスがメモリを消費し続けるし、長い期間にわたってメモリを解放しないと、メモリ リークが発生します。  
  
 メモリ リークが発生条件が疑われる場合は、インストールし、デバッグ診断ツールを使用します。 デバッグ診断ツールの詳細については、参照設定 セクションを参照してください。  
  
### <a name="reference"></a>リファレンス  
 診断ツール v1.1 をデバッグします。 [http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)  
  
## <a name="memory-pagessec-analysis"></a>メモリ ページ数/秒の分析  
 この分析は、"pages/sec"が高いかどうかを確認します。 高である場合、システム可能性がありますメモリが不足するしようとしたため、ディスクへのメモリ ページです。 「1 秒あたりのページ数」は、ページの読み取りまたはハード ページ フォールトを解決するのにはディスクに書き込まれる位置です。 このカウンターは、システム全体の遅延を引き起こすフォールトのプライマリ インジケーターです。  これは、"memory \pages input/sec"と"memory \pages output/sec"の合計です。 他の"memory \page faults/sec"などのページ カウントを比較できるように、ページの数でカウントされます。  
  
 このカウンターは、1,000 未満常にする必要があります。 この分析では、1,000 を超える値を確認します。 使用可能なメモリの分析とメモリ リークの検出の分析との相関関係でこの分析を使用します。 すべての解析には、同時に警告がスローされず、し、この可能性があります、システム メモリが不足しています。 このトピックの「追加情報に関するメモリ リークの検出分析に記載されている analysis 手順に従います。  
  
### <a name="reference"></a>リファレンス  
 メモリ バインドの問題は除きます [http://go.microsoft.com/fwlink/?linkid=62575](http://go.microsoft.com/fwlink/?linkid=62575)  
  
## <a name="memory-system-cache-resident-bytes-analysis"></a>メモリ システム キャッシュの常駐バイト数の分析  
 「システム キャッシュの常駐バイト」は、ファイル システム キャッシュ内でオペレーティング システムのページング可能なコードのバイト単位のサイズです。 この値は、現在の物理的なページのみが含まれています、現在常駐していない仮想メモリ ページは含まれません。 タスク マネージャーでのシステム キャッシュ値と同じです。 その結果、この値は、ファイル システム キャッシュで使用中の仮想メモリの実際の容量よりも小さくする可能性があります。 この値は、コンポーネントの"メモリ\\\System コードの常駐バイト数"、物理メモリに現在あるすべてのオペレーティング システムのページング可能なコードを表します。 このカウンターは、最後に計測された値のみを表示します。平均値ではありません。  
  
 この分析では、1 時間あたり 10 MB の上昇傾向を確認します。 負荷の下で、サーバーは、ディスクなどの I/O アクティビティをキャッシュするためにシステム キャッシュを使用する場合があります。 使用して相関関係でプロセス IO Data operations/sec とその他のプロセス IO operations/sec 解析します。  
  
## <a name="processor-utilization-analysis-and-excessive-processor-use-by-processes"></a>プロセッサ使用率の分析とのプロセスで過度なプロセッサの使用  
 「% Processor Time」は、プロセッサが非アイドルのスレッドを実行するために使用した経過時間の割合です。 サンプリング間隔でアイドル状態のスレッドがアクティブな期間を計測し、その時間間隔の期間からを引いて計算されます。 (各プロセッサには、他のスレッドがない場合に実行する準備がサイクルを消費するアイドル スレッドです。)このカウンターはプロセッサの処理状況を示すプライマリ インジケータであり、サンプリング間隔中に測定されたビジー時間の割合の平均値を表示します。 サービスがアクティブでない時間を監視し、その値を 100% から引いて計算されます。  
  
 この分析では、それぞれ個々 のプロセッサ上の 60% を超える使用率を確認します。 場合は、高度なユーザー モード CPU または高の特権モードであるかどうかを決定します。 高い特権モード CPU が疑いがある場合、特権モード CPU 分析」を参照してください。 ユーザー モードのプロセッサのボトルネックが疑いがある場合、プロセスのプロファイラーを使用して、CPU の消費が発生した関数を分析するを検討します。 参照してください"方法に: 運用環境でのサーバー アプリケーションの高いユーザー モード CPU のボトルネックの発生した関数を識別"詳細については、参照セクション内のアーティクルです。  
  
## <a name="processor-queue-length-analysis"></a>プロセッサ キューの長さの分析  
 "Processor Queue Length"は、プロセッサ キュー内のスレッドの数です。 ディスク カウンターとは異なりは、このカウンターは、準備のスレッドのみを実行しているスレッドを示します。  1 つのキューのプロセッサ時間の複数のプロセッサを搭載したコンピューター上でもです。 そのため、コンピューターに複数のプロセッサがある場合は、ワークロードを処理するプロセッサの数でこの値を除算する必要があります。 プロセッサあたりのスレッド数が 10 未満の持続的なプロセッサのキューが通常有効ワークロードによって決まります。  
  
 この分析では、平均プロセッサ キューの長さがプロセッサの数を超えるかどうかを判断します。 場合は、プロセッサのボトルネックをあるこの可能性があります。 特権モード CPU の分析とプロセスが過剰なプロセッサの使用との相関関係でこの分析を使用します。 プロセッサのキューは、準備が別のアクティブ スレッドが現在実行中のために、プロセッサによって実行されることができない、あるスレッドのコレクションです。 プロセッサの数が、プロセッサのボトルネックを示す優れた指標以上のスレッドの持続的なまたは定期的なキュー。  
  
 と共にこのカウンターを使用する、"プロセッサ\\% Processor Time"カウンターを Cpu から得できるかどうかを確認します。 1 つのキュー プロセッサ時間をマルチプロセッサ コンピューター上であってもします。 したがって、マルチプロセッサ コンピューターで、"Processor Queue Length"(PQL) 値で除算ワークロードを処理するプロセッサの数  
  
 非常には、CPU がビジー状態の (90% および使用率の向上) PQL 平均は、プロセッサ数よりも高い一貫して場合利点がもたらされる追加の Cpu プロセッサのボトルネックがある可能性があります。 または、スレッドと、アプリケーション レベルでのキューの数を減らすことができます。 これにより、コンテキスト切り替えが少なくなり、CPU の負荷を削減するのに適切です。 CPU 使用率が低い高 PQL の一般的な理由は、プロセッサ時間の要求がランダムに到着し、スレッド、プロセッサからの時間の不規則な金額を要求することです。 これは、プロセッサがボトルネックではないことを意味します。 代わりに、スレッドのロジックが必要な改善します。  
  
 ユーザー モードのプロセッサのボトルネックが疑いがある場合、プロセスのプロファイラーを使用して、CPU の消費が発生した関数を分析するを検討します。 参照してください、"方法に: 運用環境でのサーバー アプリケーションの高いユーザー モード CPU のボトルネックの発生した関数を識別"詳細については、参照セクション内のアーティクルです。  
  
## <a name="privileged-mode-cpu-analysis"></a>特権モードの CPU の分析  
 このカウンターは、スレッドが特権モードで実行時間の割合を示します。 アプリケーションが (たとえば、ファイルまたはネットワーク I/O を実行するか、メモリを割り当てるなど) のオペレーティング システム関数を呼び出すと、これらのオペレーティング システム関数が特権モードで実行されます。  
  
 CPU 高特権モードでは、コンピューターがシステム I/O real (ユーザー モード) と作業の多くの時間を消費していることを示します。 "% 特権モード時間の"プロセスのスレッドが特権モードでコードを実行するために使用した経過時間の割合を指定します。  Windows のシステム サービスが呼び出されると、サービス多くの場合、システム専用データにアクセスするために特権モードで実行されます。 このようなデータは、ユーザー モードで実行するスレッドによるアクセスから保護されます。 システムへの呼び出しには、明示的または暗黙的なページ フォールトや割り込みなどができます。 初期のいくつかのオペレーティング システムとは異なり、Windows はユーザーおよび特権モードの従来の保護に加えて、サブシステム保護のプロセス境界を使用します。 プロセスの特権モード時間に加えその他のサブシステム プロセスでアプリケーションに代わって Windows が行う処理があります。  
  
 この分析は、特権モード CPU が CPU の合計の 30% 以上を消費しているかどうかを確認します。 CPU 消費率が高いし、そのため場合、は、ネットワーク、メモリ、ディスク I/O など、プロセッサ以外の別のボトルネックによって発生します。 使用して相関関係で % Interrupt Time 高コンテキストの切り替えと解析します。  
  
## <a name="high-context-switching-analysis"></a>高コンテキストの切り替えの分析  
 コンテキスト スイッチには、優先順位が高いスレッド横取り優先順位の低いスレッドが現在実行されているとき、または優先度の高いスレッドがブロックが発生します。 高レベルのコンテキストの切り替えは、多くのスレッドが同じ優先順位を共有する場合に発生します。 これは、多くの場合、システムのプロセッサをスレッドが多すぎるが競合することを示します。 多くのプロセッサ使用率が表示されないと、非常に低レベルのコンテキストの切り替えを参照してください、こと、スレッドがブロックされていることを示します。  
  
 CPU と全体的な CPU の特権モードが高いとき、高のコンテキストの切り替えを調査のみ必要があります。 一般的な規則として、プロセッサごとの 1 秒あたりの 5,000 未満のコンテキスト切り替えのレートはに関して心配する価値があります。 コンテキスト切り替えレートは、プロセッサごとの 1 秒あたりの 15,000 を超えている場合、制約があります。  
  
 この分析は、高の CPU、高い特権モード CPU、および高のチェック (1 プロセッサあたり 5,000 を超える)、同時に発生する、すべて 1 秒あたりのシステム コンテキストの切り替え。 高コンテキストの切り替えが発生する場合は、スレッドとシステムで実行されているプロセスの数を減らします。  
  
## <a name="biztalk-high-database-sessions-analysis"></a>BizTalk の高いデータベース セッションの分析  
 このカウンターの 2 つの値が通常つまり (0) か、(1) を超えています。 この分析では、1 の値を確認します。 場合は、BizTalk は許可されているデータベース セッション数のしきい値を超えています。 この値は、BizTalk ホストの制限の設定で「CPU ごとのデータベース接続」の値によって制御されます。  
  
 許可される制限が適用されます (CPU ごとの) 同時実行データベース セッションの最大数は、「データベースの CPU ごとの接続」です。 ホストごとの一般的なセッション プールのアイドル状態のデータベース セッションは、この数に含まれません。また、この確認処理は、ホスト インスタンスによって実際に使用されるセッションの数に厳密に基づいて実行されます。 このオプションは既定で無効です。通常、この設定する必要がありますのみ有効にするデータベース サーバーがボトルネックになっている場合、または下位データベース サーバーを BizTalk Server システム。 BizTalk:Message Agent パフォーマンス オブジェクト カテゴリの下のデータベース セッションのパフォーマンス カウンターを使用して、アクティブなデータベース接続の数を監視できます。 このパラメーターは、送信メッセージの制限だけに影響します。 データベース セッションの数に基づいた制限を無効にするには、値 0 を入力してください。 既定値は 0 です。  
  
> [!NOTE]  
>  "MaxWorkerThreads"レジストリ キーは、BizTalk に使用できるスレッドの数に影響し、BizTalk スレッドのほとんどは、データベース接続でビジー状態である場合に役立つ場合があります。  
  
### <a name="references"></a>References  
  
-   ホスト制限でパフォーマンス カウンター [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)  
  
-   スレッド、DB セッションとの調整 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)  
  
-   アダプターのパフォーマンスに影響する構成パラメーター [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)  
  
-   既定のホスト制限の設定を変更する方法 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)  
  
## <a name="biztalk-high-database-size-analysis"></a>BizTalk の高いデータベース サイズの分析  
 このカウンターは、このプロセスが公開する、データベース キュー内のメッセージの数を示します。 この値は、すべてのホストのキュー テーブル内の項目数およびスプールと追跡テーブル内の項目数によって測定されます。 キューには、ワーク キュー、状態キューおよび保留キューが含まれています。 プロセスが複数のキューに公開している場合、このカウンターには、すべてのキューの加重平均が反映されます。  
  
 ホストが再起動すると、メモリに格納されていた統計は失われます。 一部のオーバーヘッドが含まれているため BizTalk Server は合計が再開したホスト プロセス内で公開が 100 以上に発行すると、5% の場合のみ、統計の収集を再開します。  
  
 このカウンターは、データベースのしきい値のメッセージ カウント に登録されている条件のいずれかが発生した場合、値を 1 に設定されます。 このしきい値は、トピックに記載されている既定のホスト制限設定以下で参照を変更する方法です。 既定ホスト メッセージでは、データベースの制限のしきい値のカウントは、値は、次の状況で制限の条件をトリガーする 50,000 に設定します。  
  
-   サブスクライブを行うホストの作業キュー、状態キュー、および保留キューに対しこのホスト インスタンスによって公開されるメッセージの総数が、50,000 を超えた場合  
  
-   スプール テーブルまたは追跡テーブル内のメッセージの数が 50,000 を超えた場合  
  
 データベースの計算のメッセージ カウントに含まれる保留メッセージは後の発生する可能性が低または負荷がまったくない、BizTalk server が発生している場合でもメッセージ公開の制限します。  
  
 この分析では、1 の値を確認します。 このような場合、一連の措置をデータベース内のメッセージの数を削減を検討します。 たとえば、エラーが発生せず、BizTalk SQL Server ジョブが実行されていることを確認し、によって大量の保留メッセージをメッセージのビルドが原因かどうかを判定する BizTalk 管理コンソールで グループ ハブを使用します。  
  
### <a name="references"></a>References  
  
-   [メッセージ カウント] データベースでのしきい値の調整に含まれる保留メッセージ [http://go.microsoft.com/fwlink/?LinkId=155304](http://go.microsoft.com/fwlink/?LinkId=155304)  
  
-   既定のホスト制限の設定を変更する方法 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)  
  
-   ホスト制限でパフォーマンス カウンター [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)  
  
## <a name="biztalk-high-in-process-message-count-analysis"></a>BizTalk 高インプロセス メッセージ カウントの分析  
 ホスト制限の設定で「プロセスでは、CPU あたりメッセージ」設定は、処理されていない、エンド ポイント マネージャー (EPM) または XLANG に配信されたメッセージの最大数です。 この数には、インメモリ キューに配信のまだ待機していますが、データベースから取得したメッセージは含まれません。 BizTalk:Message Agent パフォーマンス オブジェクト カテゴリの下でインプロセス メッセージ数パフォーマンス カウンターを使用して、インプロセス メッセージの数を監視できます。 このパラメーターは、制限の条件を検討するときに、制限メカニズムへのヒントを提供します。 実際のしきい値は、自律的に調整されます。 インプロセス メッセージ数パフォーマンス カウンタを監視することによって、実際のしきい値を確認できます。  
  
 このパラメーターは、サイズの大きいメッセージ シナリオで、メッセージの平均サイズが大きいか、メッセージの処理に大量のメッセージが必要な可能性がありますより小さい値に設定できます。 メモリ ベースの制限が多すぎるため、シナリオが発生した場合と、メモリのしきい値は、非常に小さい値に自動調整を取得する場合は明らかになります。 このような結果は、過度のメモリ消費を避けるため、送信トランスポートで同時に処理するメッセージを少なくする必要があることを示しています。 また、一度にいくつかのメッセージを処理すると効率性が向上するアダプター (同時接続を制限しているサーバーに送信する場合など) を使用しているシナリオでは、このパラメーターは、既定値よりも小さい値に設定できることがあります。  
  
 この分析では、このような調整が行われているかどうかを決定する、高のインプロセス メッセージ数カウンタを確認します。 場合は、「CPU あたりのインプロセス ・ メッセージ」設定を調整することを検討してください。 このパラメーターは、送信メッセージの制限だけに影響します。 CPU あたりのインプロセス メッセージの数に基づいた制限を無効にする「プロセスでは、CPU あたりメッセージ」設定に値 0 を入力します。 「CPU あたりのインプロセス ・ メッセージ」設定の既定値は、1,000 です。 この値を変更することもできます影響を与えるメッセージの低待機時間および BizTalk リソースの効率性に注意してください。  
  
### <a name="references"></a>References  
  
-   既定のホスト制限の設定を変更する方法 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)  
  
-   ホスト制限でパフォーマンス カウンター [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)  
  
## <a name="biztalk-high-message-delivery-rate-analysis"></a>BizTalk の高いメッセージ配信率の分析  
 ホスト インスタンスのメッセージ配信の受信速度が、メッセージ配信の送信比率を超えると送信 (配信) メッセージを BizTalk Server がメッセージの配信を制限 * 指定した割合オーバー ドライブ率 (%) の値。 レート オーバー ドライブ率 (%) のパラメーターは、メッセージ処理の制限の設定 ダイアログ ボックスで構成できます。 送信メッセージの割合に基づく制限は、インメモリ キューからメッセージを削除して、メッセージを処理するため、エンド ポイント マネージャー (EPM) またはオーケストレーション エンジンに配信する前に遅延を発生させることで、主に行われます。 送信メッセージの割合に基づく制限を行うには、その他の処理は行われません。  
  
 送信制限ではメッセージの配信が遅れる場合があるため、メッセージがインメモリ キューに蓄積され、制限の条件が緩和されるまでキューから取り出すスレッドがブロックされる可能性があります。 ときにキューから取り出すスレッドがブロックされて、送信の配信のため、インメモリ キューにメッセージ ボックス データベースから追加のメッセージが引き出されますありません。  
  
 この分析では、1、メッセージ配信率が高いカウンターの値を確認します。 高いメッセージ配信率は、処理の多い複雑さ、低速の送信アダプター、またはシステム リソースの一時的な不足によって可能性があります。  
  
### <a name="references"></a>References  
  
-   ホスト制限でパフォーマンス カウンター [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)  
  
-   BizTalk Server がホストに制限を実装する方法 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)  
  
-   既定のホスト制限の設定を変更する方法 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)  
  
## <a name="biztalk-high-process-memory-analysis"></a>BizTalk の高いプロセス メモリ分析  
 BizTalk プロセス メモリ使用量のしきい値の設定の調整は、プロセスの使用可能な仮想メモリの合計と作業セット サイズの合計と比較した場合は 1 ~ 100 の値を入力使用されるメモリの割合です。 既定では、調整設定、BizTalk プロセス メモリ使用量は 25 です。 比率が指定されている場合、プロセス メモリのしきい値は、定期的に再計算されます。 ユーザーは、割合の値を指定する場合は、使用可能なメモリをコミットし、現在のプロセス メモリ使用量に基づいて計算されます。  
  
 この分析では、高のプロセス メモリ カウンターの 1 の値を確認します。 この場合、デバッグ診断を使用して、メモリの増加の原因の特定を試みます (メモリ リークの検出分析参照を参照してください)。 通常の起動とこの中にメモリの大部分を消費するプロセスのことが最初に見えて、メモリ リークとして、必要がなくなりました、それによって量を減らすと、使用可能なの me メモリを解放するプロセスが失敗したときに、真のメモリ リークが発生します。時間の経過と共に mory です。 一般的に BizTalk のプロセスのメモリ リークを分析する方法については、下の「方法をキャプチャ、メモリ ダンプがプロセスがリークしているメモリの」参照や詳細については、PAL の「メモリ リークの検出」分析を参照してください。  
  
 公開するバッチの急なメモリ要件がある場合発生する可能性が高いプロセス メモリの制限またはメッセージを処理するスレッドが多すぎます。  過剰に制限する、システムが表示されたら、ホストのプロセス メモリ使用率のしきい値に関連付けられている値を増やすことを検討し、ホスト インスタンスで、「メモリ不足」エラーが発生しないことを確認してください。 プロセス メモリ使用率のしきい値を増やすことで、「メモリ不足」エラーが発生する場合し、内部メッセージ キュー サイズの値を減らすことを検討し、プロセス内の CPU しきい値あたりのメッセージ。 この方法は、サイズの大きいメッセージを処理するシナリオに特に関連します。 さらに、この値は、1 つのメッセージの大量のメモリ要件を持つシナリオの低い値に設定する必要があります。 小さい値に設定すると、早い段階での制限の作動され、プロセス内でメモリの急増が回避されます。  
  
 BizTalk server は、仮想メモリが不足して定期的に実行する場合は、BizTalk Server の 64年ビットを検討します。 64 ビット サーバー上の各プロセスによる対処に最大 4 TB の仮想メモリ 2 GB の 32 ビットのです。 一般に、BizTalk を 64 ビットおよび 64 ビット SQL Server は強くお勧めします。 詳細については「BizTalk Server の 64 ビットのサポート」リファレンスを参照してください。  
  
### <a name="references"></a>References  
  
-   BizTalk Server がホストに制限を実装する方法 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)  
  
-   既定のホスト制限の設定を変更する方法 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)  
  
-   メモリをリークしているは、プロセスのメモリ ダンプをキャプチャする方法 [http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)  
  
-   BizTalk Server の 64 ビット サポート [http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)  
  
## <a name="biztalk-high-system-memory-analysis"></a>BizTalk の高いシステム メモリ分析  
 BizTalk 物理メモリ使用量の制限しきい値の設定では、1 ~ 100 で指定する場合の使用可能な物理メモリの総量と比較してメモリ使用量の割合が入力されます。 この設定では、100 より大きい値を入力する場合、メガバイト単位で使用可能な物理メモリの総量こともできます。 物理メモリ使用量に基づいた制限を無効にするには、値 0 を入力してください。 既定値は 0 です。  
  
 この分析では、高のシステム メモリ カウンターの 1 の値を確認します。 すべてのシステム メモリが測定されるので、BizTalk Server 以外のプロセスが多くのシステム メモリを使用している場合に制限の条件が発生する可能性があります。 したがってこれが発生した場合、最良の手法は、識別するプロセスの大半の物理メモリを消費しているや、サーバーに物理メモリを追加するは。 また、EPM スレッド プールの既定のサイズやアダプター バッチのサイズを減らすことで負荷を減らすことを検討してください。 詳細については、PAL 内のメモリ リークの検出分析を参照してください。  
  
### <a name="references"></a>References  
  
-   ホスト制限でパフォーマンス カウンター [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)  
  
-   既定のホスト制限の設定を変更する方法 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)  
  
-   BizTalk Server がホストに制限を実装する方法 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)  
  
## <a name="biztalk-high-thread-count-analysis"></a>BizTalk の高いスレッド数の分析  
 「CPU あたりのスレッド」は、アダプターで使用されるスレッドを含むホスト プロセス内のスレッドの合計数です。 このしきい値を超えた場合、BizTalk Server は、EPM スレッド プールとメッセージ エージェント スレッド プールのサイズを縮小しようとします。 高負荷によって多くのスレッドを作成するシナリオでは、スレッド ベースの制限を有効にする必要があります。 このパラメーターは、受信制限と送信制限の両方に影響します。 既定では、スレッド ベースの制限を無効になっています。  
  
> [!NOTE]  
>  指針としては、ユーザー指定の値が使用され、ホストがメモリの使用パターンと、プロセスのスレッド要件に基づいてこのしきい値を自己チューニング動的に可能性があります。  
  
 この分析では、高の Thread Count カウンターでは 1 の値を確認します。 多くのスレッドが作成されないように、異なるスレッド プール サイズを設定することを検討します。 この分析は、スレッドが多すぎるとでは、オペレーティング システムが飽和状態かどうかほとんど場合、高いスレッド カウント原因よりも、BizTalk server 上のバックエンド データベースでの複数の競合を決定する 2 番目の分析あたりコンテキストの切り替えと相関することができます。 スレッド プール サイズを変更する方法については、参照で既定のホスト制限設定を変更する方法を参照してください。  
  
### <a name="references"></a>References  
  
-   ホスト制限でパフォーマンス カウンター [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)  
  
-   BizTalk Server がホストに制限を実装する方法 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)  
  
-   既定のホスト制限の設定を変更する方法 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)  
  
-   アダプターのパフォーマンスに影響する構成パラメーター [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)  
  
-   スレッド、DB セッションとの調整 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)  
  
 BizTalk の受信待機時間 AnalysisAverage 待機すると、メッセージング エンジンからドキュメントを受信アダプター、メッセージ ボックスにパブリッシュされるまで (ミリ秒)。 待機時間を短縮することが重要、BizTalk の一部のユーザーしたがって作業がどの程度受信アダプタで費やしている時間ドキュメントの追跡が重要です。  
  
 待機時間を測定する方法を示すグラフを次に示します。  
  
|1|2|3|4|5|6|  
|-------|-------|-------|-------|-------|-------|  
|アダプターがメッセージを受信し、これらのパフォーマンス カウンターでキャプチャされること、エンジンでは、メッセージがないエンジンに渡さ前に、アダプターで実行された作業を送信します。|エンジンがアダプターからメッセージを受信、実行される受信パイプライン、マップ、サブスクリプションの評価] の [DB 内のメッセージを保持します。|オーケストレーションまたは送信請求-応答ポートを実行し、応答メッセージを生成します。|メッセージング エンジンで応答メッセージがデキューされた、実行、送信パイプライン、マップします。|メッセージング エンジンは、アダプターへの応答メッセージを提供します。|アダプターでは、エンジンのメッセージはすべて行われますが通知されます。|  
||I|||||  
||RR|RR|RR|||  
||||O|O|O|  
|||||OA|OA|  
  
 I = 受信待機時間  
  
 RR 要求応答の待機時間を =  
  
 O = 待機時間の送信  
  
 OA 送信アダプターの待機時間を =  
  
 低待機時間の環境を想定すると、この分析は、ドキュメントが 5 秒以上、受信アダプターで費やされたかどうかを確認します。 このホスト インスタンスで受信アダプターを経由してメッセージの転送の処理の遅延がある可能性があります。 複数の受信アダプターは、このホスト インスタンスに存在する場合、どの受信アダプターが高待機時間を決定する、独自のホストに分割することを検討します。  
  
### <a name="references"></a>References  
  
-   BizTalk Server データベースの最適化  
    [http://go.microsoft.com/fwlink/?linkid=104427](http://go.microsoft.com/fwlink/?linkid=104427)  
  
-   要求/応答メッセージ  
    [http://go.microsoft.com/fwlink/?LinkID=155288](http://go.microsoft.com/fwlink/?LinkID=155288)  
  
-   BizTalk 層のボトルネックの特定  
    [http://go.microsoft.com/fwlink/?LinkID=155289](http://go.microsoft.com/fwlink/?LinkID=155289)  
  
## <a name="biztalk-message-delivery-throttling-state-analysis"></a>BizTalk メッセージの配信状態の分析の調整  
 BizTalk メッセージの配信制限の状態は調整のプライマリ インジケーターです。 これは、システムで (XLANG メッセージ処理および送信トランスポートに影響する) メッセージ配信を制限するかどうかを示すフラグです。 制限の条件は、カウンターの数値で示されます。 値と、それぞれの意味の一覧を次に示します。  
  
|||  
|-|-|  
|0|制限なし。|  
|1|メッセージ配信レートが不安定なことに起因する制限。入力率が出力率を超えています。|  
|3|インプロセス メッセージ カウントが大きいことに起因する制限。|  
|4|プロセス メモリ不足に起因する制限。|  
|5|システム メモリ不足に起因する制限。|  
|9|スレッド カウントが大きいことに起因する制限。|  
|10|配信におけるユーザー指定に起因する制限。|  
  
 この分析では、これらの各値をチェックし、それぞれの特定の警告があります。  
  
### <a name="references"></a>References  
  
-   ホスト制限でパフォーマンス カウンター [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)  
  
-   BizTalk Server がホストに制限を実装する方法 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)  
  
## <a name="biztalk-messagebox-database-connection-failures-analysis"></a>BizTalk メッセージ ボックス データベースの接続の失敗の分析  
 このパフォーマンス カウンターは、ホスト インスタンスが起動されてから実行しようとしたデータベース接続の数です。 BizTalk データベースをホストする SQL Server サービスは、何らかの理由で利用不可になると、データベース クラスターによって、リソースが active コンピューターからパッシブ側コンピューターに転送します。 このフェールオーバー処理中に BizTalk Server サービスのインスタンスがデータベース接続の障害を検出すると、自動的にデータベースの再接続が実行されます。 正常に動作しているデータベース コンピューター (先ほどまでパッシブ側であったコンピューター) が、フェールオーバーでリソースを引き継いだ後、データベース接続の処理を開始します。  
  
 DBNetLib (データベース ネットワーク ライブラリ) エラーは、BizTalk Server ランタイムがメッセージ ボックス データベースまたは管理のいずれかのデータベースと通信できない場合に発生します。 この場合、例外をキャッチする BizTalk Server ランタイム インスタンスがシャット ダウンされ、毎分をサイクル データベースが使用できるかどうかを確認してください。 このトピックでは、詳細については、参照セクションを参照してください。  
  
 クライアントがサーバーとの TCP/IP ソケット接続を開始した場合、通常、そのクライアントはサーバー上の特定ポートに接続し、一時的な (短期) TCP ポートまたは UDP ポートを経由してクライアントに応答するようサーバーに要求します。 Windows Server 2003 および Windows XP の場合は、既定のクライアント アプリケーションによって使用される一時的なポートの範囲は 1025 ~ 5000 です。 特定の条件には既定値の範囲内で使用可能なポートが不足することが可能です。 このトピックでは、詳細については、参照セクションを参照してください。  
  
 この分析は、データベース接続エラーの発生に対してチェックします。 データベース接続エラーは、BizTalk データベースが存在しない機能ため重要です。 データベース接続エラーの原因が不明な場合は、以下の参照を検討してください。 や、接続エラーの原因を特定の Microsoft サポートに問い合わせてください。  
  
### <a name="references"></a>References  
  
-   スケールアウト データベース  
    [http://go.microsoft.com/fwlink/?LinkId=155307](http://go.microsoft.com/fwlink/?LinkId=155307)  
  
-   DBNETLIB 例外の回避  
    [http://go.microsoft.com/fwlink/?LinkId=155308](http://go.microsoft.com/fwlink/?LinkId=155308)  
  
-   使用可能な TCP/IP ポートが存在しないことの回避  
    [http://go.microsoft.com/fwlink/?LinkId=155309](http://go.microsoft.com/fwlink/?LinkId=155309)  
  
## <a name="biztalk-messaging-publishing-throttling-state-analysis"></a>BizTalk メッセージ公開の制限の状態の分析  
 BizTalk メッセージの公開の制限の状態は調整のプライマリ インジケーターです。 これは、システムで (XLANG メッセージ処理および受信トランスポートに影響する) メッセージの公開を制限するかどうかを示すフラグです。制限の条件は、カウンターの数値で示されます。 値と、それぞれの意味の一覧を次に示します。  
  
|||  
|-|-|  
|0|制限なし。|  
|2|メッセージ公開レートが不安定なことに起因する制限。入力率が出力率を超えています。|  
|4|プロセス メモリ不足に起因する制限。|  
|5|システム メモリ不足に起因する制限。|  
|6|データベース サイズの増加に起因する制限。|  
|8|セッション カウントが大きいこと起因する制限。|  
|9|スレッド カウントが大きいことに起因する制限。|  
|11|公開におけるユーザー指定に起因する制限。|  
  
 この分析では、これらの各値をチェックし、それぞれの特定の警告があります。  
  
### <a name="references"></a>References  
  
-   ホスト制限でパフォーマンス カウンター [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)  
  
-   BizTalk Server がホストに制限を実装する方法 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)  
  
## <a name="biztalk-orchestrations-resident-in-memory"></a>メモリ内の BizTalk オーケストレーションの常駐  
 ホスト インスタンスによって現在ホストされているオーケストレーション インスタンスの数。 スパイクの発生またはメモリに常駐しているオーケストレーションのバーストと思われる通常、中に上昇傾向は、"の積み上がりを"メモリ内のオーケストレーションである可能性があります。 時間の経過と共に上昇傾向は、BizTalk がメッセージとオーケストレーション インスタンスを退避できない場合に発生する可能性があります。 このカウンターを関連付ける"xlang/s Orchestrations(?) しようとしてください。このカウンターとインスタンスのカウンター \Dehydratable オーケストレーション"、疑問符 (?)、同じであります。  
  
 オーケストレーションの数が多いがメモリ内に常駐して、オーケストレーションの数が少ないが、待避可能なかどうかは、オーケストレーションが高いをメモリ内でアイドル状態と、メモリ リークが発生条件が発生する可能性があります。 存在する場合は、「\XLANG/s オーケストレーション (*) \Idle オーケストレーション」との相関関係でこの分析を使用します。 BizTalk オーケストレーションをアイドル状態の上昇傾向は、オーケストレーション インスタンスを退避することができないのため、メモリ リークのより優れたインジケーターです。  
  
 この分析では、メモリとメモリ内のオーケストレーションの 50% 以上が待避可能なはかどうかに常駐しているオーケストレーションに上昇傾向を確認します。  
  
### <a name="references"></a>References  
  
-   オーケストレーション エンジンのパフォーマンス カウンター  
    [http://go.microsoft.com/fwlink/?LinkID=155290](http://go.microsoft.com/fwlink/?LinkID=155290)  
  
-   オーケストレーションの退避と復元  
    [http://go.microsoft.com/fwlink/?LinkID=155284](http://go.microsoft.com/fwlink/?LinkID=155284)  
  
## <a name="biztalk-private-bytes-analysis"></a>BizTalk のプライベート バイトの分析  
 これは、"\Process (*) \Private バイト数"パフォーマンス カウンターを比較し、ホスト インスタンスの割り当て済みのプライベート メモリのメガバイト数です。 Private Bytes は、(バイト単位)、プロセスによって割り当てられ、他のプロセスと共有できないメモリの現在のサイズです。 この分析は、かどうか、システムのメモリのサイズが大きくを使用して、任意のホスト インスタンスは、ホスト インスタンスがメモリの消費量を時間の経過と共に増加しているかどうかを判断します。 メモリの大部分を消費してホスト インスタンスとは、it がシステムにメモリを返す限り問題ありません。 グラフの傾向を増やすことを探します。 長期間にわたって上昇傾向は、メモリ リークである可能性があります。  
  
 この分析では、10 MB に時間の上昇傾向を確認します。 使用可能なメモリ分析およびメモリ リークの分析との相関関係でこの分析を使用します。 また、単に通常起動時の動作があるときに、メモリ リークとしてインスタンスが表示される最初にホストを新しく開始されることに注意してください。 メモリ リークは、プロセスを継続するにメモリを消費し、長期間にわたってメモリを解放していません。 メモリ リークが発生条件が疑われる場合は、以下で参照「メモリの増加に BizTalk メッセージング」記事を参照します。 それ以外の場合、インストールし、デバッグ診断ツールを使用します。 デバッグ診断ツールの詳細については、参照設定 セクションを参照してください。  
  
### <a name="references"></a>References  
  
-   デバッグ診断ツール v1.1  
    [http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)  
  
-   BizTalk メッセージのメモリの増加  
    [http://go.microsoft.com/fwlink/?linkid=108788](http://go.microsoft.com/fwlink/?linkid=108788)  
  
## <a name="biztalk-virtual-bytes-analysis"></a>BizTalk 仮想バイト数の分析  
 これは、ホスト インスタンスの仮想メモリの予約済みのメガバイト数です。 この分析は、大量のシステムのメモリを消費、任意のホスト インスタンスかどうかと、ホスト インスタンスがメモリの消費量を時間の経過と共に増加しているかどうかを判断します。 メモリの大部分を消費してホスト インスタンスとは、システムにメモリを返す限り問題ありません。 グラフの傾向を増やすことを探します。 長期間にわたって上昇傾向は、メモリ リークである可能性があります。  
  
 この分析では、仮想バイト単位時間あたりの MB 数が 10 の上昇傾向を確認します。 使用可能なメモリ分析およびメモリ リークの分析との相関関係でこの分析を使用します。 また、単に通常起動時の動作があるときに、メモリ リークとしてインスタンスが表示される最初にホストを新しく開始されることに注意してください。 メモリ リークは、プロセスを継続するにメモリを消費し、長期間にわたってメモリを解放していません。 メモリ リークが発生条件が疑われる場合は、以下の「「メモリ増加に BizTalk メッセージング」」の記事を参照します。 それ以外の場合、インストールし、デバッグ診断ツールを使用します。 デバッグ診断ツールの詳細については、参照設定 セクションを参照してください。  
  
### <a name="references"></a>References  
  
-   デバッグ診断ツール v1.1  
    [http://go.microsoft.com/fwlink/?linkid=106784](http://go.microsoft.com/fwlink/?linkid=106784)  
  
-   BizTalk メッセージのメモリの増加  
    [http://go.microsoft.com/fwlink/?linkid=108788](http://go.microsoft.com/fwlink/?linkid=108788)  
  
## <a name="biztalk-message-agent-database-session-throttling-analysis"></a>BizTalk メッセージ エージェント データベース セッションの分析を調整  
 これは、調整設定の各 BizTalk と比較して、メッセージ ボックスを開いているデータベース接続の数です。 許可される制限が適用されます (CPU ごとの) 同時実行データベース セッションの最大数は、「データベースの CPU ごとの接続」です。 ホストごとの一般的なセッション プールのアイドル状態のデータベース セッションは、この数に含まれません。また、この確認処理は、ホスト インスタンスによって実際に使用されるセッションの数に厳密に基づいて実行されます。 このオプションは、既定で無効です。通常、BizTalk Server システムでデータベース サーバーがボトルネックになる場合のみ、この設定を有効にする必要があります。 BizTalk:Message Agent パフォーマンス オブジェクト カテゴリの下のデータベース セッションのパフォーマンス カウンターを使用して、アクティブなデータベース接続の数を監視できます。 このパラメーターは、送信メッセージの制限だけに影響します。 データベース セッションの数に基づいた制限を無効にするには、値 0 を入力してください。 既定値は 0 です。  
  
 MaxWorkerThreads レジストリ キーは、BizTalk に使用できるスレッドの数の影響し、BizTalk のスレッドのほとんどがデータベース接続でビジー状態である場合に役立つ場合があります。 この分析では、メッセージ ボックス データベースへの開いているデータベース接続の数が、データベース セッションの制限の設定は、制限の条件が可能性を示す、80% を超えるかどうかを確認します。  
  
### <a name="references"></a>References  
  
-   ホスト制限でパフォーマンス カウンター [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)  
  
-   アダプターのパフォーマンスに影響する構成パラメーター [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)  
  
-   スレッド、DB セッションとの調整 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)  
  
## <a name="biztalk-message-agent-database-session-throttling-threshold-analysis"></a>BizTalk メッセージ エージェントのデータベース セッションが調整のしきい値の分析  
 これは、メッセージ ボックス データベースへの開いているデータベース接続の数の現在のしきい値です。 許可される制限が適用されます (CPU ごとの) 同時実行データベース セッションの最大数は、「データベースの CPU ごとの接続」です。 ホストごとの一般的なセッション プールのアイドル状態のデータベース セッションは、この数に含まれません。また、この確認処理は、ホスト インスタンスによって実際に使用されるセッションの数に厳密に基づいて実行されます。 このオプションは、既定で無効です。通常、BizTalk Server システムでデータベース サーバーがボトルネックになる場合のみ、この設定を有効にする必要があります。 BizTalk:Message Agent パフォーマンス オブジェクト カテゴリの下のデータベース セッションのパフォーマンス カウンターを使用して、アクティブなデータベース接続の数を監視できます。 このパラメーターは、送信メッセージの制限だけに影響します。 データベース セッションの数に基づいた制限を無効にするには、値 0 を入力してください。 既定値は 0 です。  
  
 MaxWorkerThreads レジストリ キーは、BizTalk に使用できるスレッドの数の影響し、BizTalk のスレッドのほとんどがデータベース接続でビジー状態である場合に役立つ場合があります。 この分析では、既定の設定から変更されているかどうかを確認するには、この値を確認します。 既定では、この設定は 0 で、データベース セッションの調整が無効になっていることを意味です。  
  
### <a name="references"></a>References  
  
-   ホスト制限でパフォーマンス カウンター [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)  
  
-   アダプターのパフォーマンスに影響する構成パラメーター [http://go.microsoft.com/fwlink/?LinkID=154200](http://go.microsoft.com/fwlink/?LinkID=154200)  
  
-   スレッド、DB セッションとの調整 [http://go.microsoft.com/fwlink/?linkid=106793](http://go.microsoft.com/fwlink/?linkid=106793)  
  
## <a name="biztalk-message-agent-in-process-message-count-throttling-analysis"></a>BizTalk メッセージ エージェント インプロセス メッセージ数の分析の調整  
 これは、サービス クラスが処理されている同時実行のメッセージの数です。 ホスト制限の設定で「プロセスでは、CPU あたりメッセージ」設定は、処理されていない、エンド ポイント マネージャー (EPM) または XLANG に配信されたメッセージの最大数です。 これは、データベースから取得されましたが、インメモリ キューに配信の待機中のメッセージには含まれません。 BizTalk:Message Agent パフォーマンス オブジェクト カテゴリの下でインプロセス メッセージ数パフォーマンス カウンターを使用して、インプロセス メッセージの数を監視できます。 制限の条件を確認する制限メカニズムは、このパラメーターの値を参考にします。 実際のしきい値は、自律的に調整されます。 インプロセス メッセージ数パフォーマンス カウンタを監視することによって、実際のしきい値を確認できます。  
  
 サイズの大きいメッセージ シナリオ (ここでメッセージの平均サイズが大きい、またはメッセージの処理に大量のメッセージのことがありますが必要)、このパラメーターは、小さい値に設定することができます。 メモリ ベースの制限が多すぎるためが発生した場合と、メモリのしきい値は、非常に小さい値に自動調整を取得する場合は、サイズの大きいメッセージ シナリオが示されます。 このような結果は、過度のメモリ消費を避けるため、送信トランスポートで同時に処理するメッセージを少なくする必要があることを示しています。 また、一度にいくつかのメッセージを処理すると効率性が向上するアダプター (同時接続を制限しているサーバーに送信する場合など) を使用しているシナリオでは、このパラメーターは、既定値よりも小さい値に設定できることがあります。 この分析では、かどうかを同じ名前で制限の設定の 80% 以上が、制限の条件を示す可能性の高い、高のインプロセス メッセージ数カウンタを確認します。  
  
### <a name="references"></a>References  
  
-   ホスト制限でパフォーマンス カウンター [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)  
  
-   既定のホスト制限の設定を変更する方法 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)  
  
## <a name="biztalkmessage-agent-in-process-message-count-throttling-threshold-analysis"></a>BizTalk:Message エージェント プロセスでメッセージの数が調整のしきい値の分析  
 これは、サービス クラスが処理されている同時実行のメッセージの数の現在のしきい値です。 ホスト制限の設定で「プロセスでは、CPU あたりメッセージ」設定は、処理されていない、エンド ポイント マネージャー (EPM) または XLANG に配信されたメッセージの最大数です。 これは、データベースから取得されましたが、インメモリ キューに配信の待機中のメッセージには含まれません。 BizTalk:Message Agent パフォーマンス オブジェクト カテゴリの下でインプロセス メッセージ数パフォーマンス カウンターを使用して、インプロセス メッセージの数を監視できます。 制限の条件を確認する制限メカニズムは、このパラメーターの値を参考にします。 実際のしきい値は、自律的に調整されます。 インプロセス メッセージ数パフォーマンス カウンタを監視することによって、実際のしきい値を確認できます。  
  
 サイズの大きいメッセージ シナリオ (ここでメッセージの平均サイズが大きい、またはメッセージの処理に大量のメッセージのことがありますが必要)、このパラメーターは、小さい値に設定することができます。 メモリ ベースの制限が多すぎるためが発生した場合と、メモリのしきい値は、非常に小さい値に自動調整を取得する場合は、サイズの大きいメッセージ シナリオが示されます。 このような結果は、過度のメモリ消費を避けるため、送信トランスポートで同時に処理するメッセージを少なくする必要があることを示しています。 また、一度にいくつかのメッセージを処理すると効率性が向上するアダプター (同時接続を制限しているサーバーに送信する場合など) を使用しているシナリオでは、このパラメーターは、既定値よりも小さい値に設定できることがあります。 この分析では、既定以外の値のしきい値を調整する高インプロセス メッセージの数を確認します。  
  
### <a name="references"></a>References  
  
-   ホスト制限でパフォーマンス カウンター [http://go.microsoft.com/fwlink/?LinkID=155285](http://go.microsoft.com/fwlink/?LinkID=155285)  
  
-   既定のホスト制限の設定を変更する方法 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)  
  
## <a name="biztalk-message-agent-process-memory-usage-mb-throttling-analysis"></a>BizTalk メッセージ エージェント プロセス メモリ使用量 (MB) の分析の調整  
 これは、現在のプロセス (MB) のメモリ使用量です。 BizTalk プロセス メモリの制限は公開するバッチの急なメモリ要件がある場合、またはメッセージを処理しているスレッドが多すぎる場合に発生します。  過剰に制限する、システムが表示されたら、ホストのプロセス メモリ使用率のしきい値に関連付けられている値を増やすことを検討し、ホスト インスタンスで、「メモリ不足」エラーが発生しないことを確認してください。 プロセス メモリ使用率のしきい値を増やすことで、「メモリ不足」エラーが発生する場合し、内部メッセージ キュー サイズの値を減らすことを検討し、プロセス内の CPU しきい値あたりのメッセージ。 この方法は、サイズの大きいメッセージを処理するシナリオに特に関連します。  
  
 BizTalk server は、仮想メモリが不足して定期的に実行する場合は、BizTalk Server の 64年ビットを検討します。 64 ビット サーバー上の各プロセスによる対処に最大 4 TB の仮想メモリ 2 GB の 32 ビットのです。 一般に、BizTalk を 64 ビットおよび 64 ビット SQL Server は強くお勧めします。 詳細については「BizTalk Server の 64 ビットのサポート」リファレンスを参照してください。 この分析では、プロセス メモリ使用量が、同じ名前の対応調整しきい値の 80% を超えるかどうかを確認します。 既定では、調整設定、BizTalk プロセス メモリ使用量は、プロセスで使用できる仮想メモリの 25% です。 3 GB スイッチは、この設定に影響を与えません。  
  
### <a name="references"></a>References  
  
-   BizTalk Server がホストに制限を実装する方法 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)  
  
-   既定のホスト制限の設定を変更する方法 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)  
  
-   メモリをリークしているは、プロセスのメモリ ダンプをキャプチャする方法 [http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)  
  
-   BizTalk Server の 64 ビット サポート [http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)  
  
## <a name="biztalkmessage-agent-process-memory-usage-mb-throttling-threshold-analysis"></a>BizTalk:Message Agent プロセス メモリ使用量 (MB) しきい値分析の調整  
 これは、現在のプロセス (MB) のメモリ使用量の現在のしきい値です。 このプロセスとのメモリ消費のパターンに使用可能なメモリの実際の容量に応じて、しきい値を動的に調整する可能性があります。 BizTalk プロセス メモリの制限は公開するバッチの急なメモリ要件がある場合、またはメッセージを処理しているスレッドが多すぎる場合に発生します。 過剰に制限する、システムが表示されたら、ホストのプロセス メモリ使用率のしきい値に関連付けられている値を増やすことを検討し、ホスト インスタンスで、「メモリ不足」エラーが発生しないことを確認してください。 プロセス メモリ使用率のしきい値を増やすことで、「メモリ不足」エラーが発生する場合し、内部メッセージ キュー サイズの値を減らすことを検討し、プロセス内の CPU しきい値あたりのメッセージ。 この方法は、サイズの大きいメッセージを処理するシナリオに特に関連します。  
  
 BizTalk server は、仮想メモリが不足して定期的に実行する場合は、BizTalk Server の 64年ビットを検討します。 64 ビット サーバー上の各プロセスによる対処に最大 4 TB の仮想メモリ 2 GB の 32 ビットのです。 一般に、BizTalk を 64 ビットおよび 64 ビット SQL Server は強くお勧めします。 詳細については「BizTalk Server の 64 ビットのサポート」リファレンスを参照してください。 この分析では、プロセス メモリの制限が既定以外の値に設定するかどうかを確認します。  
  
### <a name="references"></a>References  
  
-   BizTalk Server がホストに制限を実装する方法 [http://go.microsoft.com/fwlink/?LinkID=155286](http://go.microsoft.com/fwlink/?LinkID=155286)  
  
-   既定のホスト制限の設定を変更する方法 [http://go.microsoft.com/fwlink/?LinkID=155296](http://go.microsoft.com/fwlink/?LinkID=155296)  
  
-   メモリをリークしているは、プロセスのメモリ ダンプをキャプチャする方法 [http://go.microsoft.com/fwlink/?LinkId=155305](http://go.microsoft.com/fwlink/?LinkId=155305)  
  
-   BizTalk Server の 64 ビット サポート [http://go.microsoft.com/fwlink/?LinkId=155306](http://go.microsoft.com/fwlink/?LinkId=155306)