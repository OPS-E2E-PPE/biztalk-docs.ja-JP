---
title: テスト シナリオの概要 |Microsoft ドキュメント
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: cde553ad-2540-40d9-a74b-928fee873c31
caps.latest.revision: 32
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 86fd882f89caee27211c03a4e13e617fe12faef1
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/01/2017
ms.locfileid: "26010691"
---
# <a name="test-scenario-overview"></a><span data-ttu-id="a3ffc-102">テスト シナリオの概要</span><span class="sxs-lookup"><span data-stu-id="a3ffc-102">Test Scenario Overview</span></span>
<span data-ttu-id="a3ffc-103">このトピックでは、テスト アプリケーションの概要テスト手法の使用、およびリストの説明、主要業績評価指標 (Kpi) は、ロード テスト中にキャプチャされます。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-103">This topic provides an overview of the test application; a description of the testing methodology used, and lists the key performance indicators (KPIs) captured during load testing.</span></span>  
  
## <a name="test-application"></a><span data-ttu-id="a3ffc-104">アプリケーションをテストします。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-104">Test Application</span></span>  
 <span data-ttu-id="a3ffc-105">要求-応答の同期アプリケーションは、物理ハードウェア上で実行されている BizTalk Server に HYPER-V で実行されている BizTalk Server のパフォーマンスの比較に使用されました。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-105">A synchronous request-response application was used to compare performance of BizTalk Server running on Hyper-V to BizTalk Server running on physical hardware.</span></span> <span data-ttu-id="a3ffc-106">このアプリケーションは、のパフォーマンスを説明するために使用された、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]低待機時間の調整されているソリューションです。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-106">This application was used to illustrate performance of a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] solution that has been tuned for low latency.</span></span> <span data-ttu-id="a3ffc-107">低待機時間のメッセージングは、クライアントが要求を送信し、非常に短い間隔 (たとえば < 3 秒) に含まれる応答メッセージが必要ですが、オンライン バンキングなどの特定のシナリオにとって重要です。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-107">Low latency messaging is critical for certain scenarios such as online banking where a client sends a request and expects a response message within a very short interval (for example < 3 seconds).</span></span>  
  
 <span data-ttu-id="a3ffc-108">次の図は、使用する高レベルなアーキテクチャを示しています。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-108">The figure below illustrates the high-level architecture used.</span></span> <span data-ttu-id="a3ffc-109">Visual Studio Team System (VSTS) 2008 のテストをロード エージェントに負荷を生成する、WCF トランスポートを使用するカスタムのテスト クラスが呼び出される[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]です。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-109">Visual Studio Team System (VSTS) 2008 Test Load Agent invoked a custom test class, which used the WCF transport to generate load against [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="a3ffc-110">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]このシナリオでのアプリケーションが公開される要求-応答受信場所が Wcf-basichttp を使用しています。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-110">The [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application in this scenario was exposed via a WCF-BasicHttp request-response receive location.</span></span> <span data-ttu-id="a3ffc-111">VSTS 2008 Test Load Agent は、柔軟で提供されるため、テスト用クライアントとして使用された、メッセージの数を構成する機能を含めの総数に対する同時スレッドは、送受信要求間スリープ状態の間隔の送信です。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-111">VSTS 2008 Test Load Agent was used as the test client because of the great flexibility that it provides, including the capability to configure the number of messages sent in total, number of simultaneous threads, and the sleep interval between requests sent.</span></span>  
  
 <span data-ttu-id="a3ffc-112">いくつかの VSTS 2008 Test Load Agent コンピューターは、現実世界のロード パターンをシミュレートするために並行して実行できます。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-112">Several VSTS 2008 Test Load Agent computers can be run in tandem to simulate real world load patterns.</span></span> <span data-ttu-id="a3ffc-113">これらのテストでは、VSTS 2008 Test Load Agent コンピューターに起因 BizUnit 3.0 にも実行されていた 1 台の VSTS 2008 テスト ロード エージェント コント ローラー コンピューター。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-113">For these tests, the VSTS 2008 Test Load Agent computers were driven by a single VSTS 2008 Test Load Agent Controller computer that was also running BizUnit 3.0.</span></span> <span data-ttu-id="a3ffc-114">その結果、一貫した負荷が物理と仮想の両方に送信されました[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]コンピューター。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-114">As a result, a consistent load was sent to both the physical and virtual [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computers.</span></span> <span data-ttu-id="a3ffc-115">VSTS 2008 Test Edition を使用して、テスト用にシミュレートされた負荷を生成する方法の詳細については、次を参照してください。 [http://go.microsoft.com/fwlink/?LinkID=132311](http://go.microsoft.com/fwlink/?LinkID=132311)です。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-115">For more information about using VSTS 2008 Test Edition to generate simulated load for testing, see [http://go.microsoft.com/fwlink/?LinkID=132311](http://go.microsoft.com/fwlink/?LinkID=132311).</span></span>  
  
 <span data-ttu-id="a3ffc-116">![アプリケーション アーキテクチャ](../technical-guides/media/testapplicationarchitecture.gif "TestApplicationArchitecture")</span><span class="sxs-lookup"><span data-stu-id="a3ffc-116">![Application Architecture](../technical-guides/media/testapplicationarchitecture.gif "TestApplicationArchitecture")</span></span>  
<span data-ttu-id="a3ffc-117">アプリケーション アーキテクチャをテストします。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-117">Test Application Architecture</span></span>  
  
1.  <span data-ttu-id="a3ffc-118">Wcf-basichttp または Wcf-custom 受信場所の要求-応答は、Test Load Agent コンピューターから新しい CalculatorRequest を受信します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-118">A WCF-BasicHttp or WCF-Custom Request-Response Receive Location receives a new CalculatorRequest from a Test Load Agent computer.</span></span>  
  
2.  <span data-ttu-id="a3ffc-119">XML 逆アセンブラー コンポーネントは、CalculatorRequest xml ドキュメント内のメソッドの要素を昇格させます。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-119">The XML disassembler component promotes the Method element inside the CalculatorRequest xml document.</span></span> <span data-ttu-id="a3ffc-120">メッセージ エージェントは、メッセージ ボックス データベース (BizTalkMsgBoxDb) に着信メッセージを送信します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-120">The Message Agent submits the incoming message to the MessageBox database (BizTalkMsgBoxDb).</span></span>  
  
3.  <span data-ttu-id="a3ffc-121">受信要求は、LogicalPortsOrchestration の新しいインスタンスを開始します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-121">The inbound request starts a new instance of the LogicalPortsOrchestration.</span></span> <span data-ttu-id="a3ffc-122">このオーケストレーションは、メソッドの昇格させたプロパティを持つ CalculatorRequest メッセージを受信する、直接バインド ポートを使用して"LogicalPortsOrchestration"を = です。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-122">This orchestration uses a direct bound port to receive the CalculatorRequest messages with the Method promoted property = “LogicalPortsOrchestration”.</span></span>  
  
4.  <span data-ttu-id="a3ffc-123">LogicalPortsOrchestration では、ループを使用して、操作を取得して、各項目の論理送信請求-応答ポートを使用して、ダウン ストリーム電卓 WCF web サービスを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-123">The LogicalPortsOrchestration uses a loop to retrieve operations and for each item it invokes the downstream Calculator WCF web service using a Logical Solicit-Response Port.</span></span> <span data-ttu-id="a3ffc-124">電卓 WCF web サービスの要求メッセージはヘルパー コンポーネントを使用して作成し、MessageBox に公開します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-124">The request message for the Calculator WCF web service is created using a helper component and published to the MessageBox.</span></span>  
  
5.  <span data-ttu-id="a3ffc-125">Wcf-basichttp 送信ポートで要求メッセージが消費されます。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-125">The request message is consumed by a WCF-BasicHttp Send Port.</span></span>  
  
6.  <span data-ttu-id="a3ffc-126">Wcf-basichttp 送信ポートを呼び出すのいずれか (加算、減算、乗算、除算)、電卓 WCF web サービスによって公開されています。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-126">The WCF-BasicHttp Send Port invokes one of the methods (Add, Subtract, Multiply, Divide) exposed by the Calculator WCF web service.</span></span>  
  
7.  <span data-ttu-id="a3ffc-127">電卓 WCF web サービスでは、応答メッセージを返します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-127">The Calculator WCF web service returns a response message.</span></span>  
  
8.  <span data-ttu-id="a3ffc-128">応答メッセージは、メッセージ ボックス データベースに発行されます。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-128">The response message is published to the MessageBox.</span></span>  
  
9. <span data-ttu-id="a3ffc-129">LogicalPortsOrchestration 呼び出し元には、応答メッセージが返されます。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-129">The response message is returned to the caller LogicalPortsOrchestration.</span></span> <span data-ttu-id="a3ffc-130">オーケストレーションでは、受信 CalculatorRequest xml ドキュメント内の各操作にこのパターンが繰り返されます。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-130">The orchestration repeats this pattern for each operation within the inbound CalculatorRequest xml document.</span></span>  
  
10. <span data-ttu-id="a3ffc-131">LogicalPortsOrchestration CalculatorResponse メッセージをメッセージ ボックス データベースに発行します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-131">The LogicalPortsOrchestration publishes the CalculatorResponse message to the MessageBox.</span></span>  
  
11. <span data-ttu-id="a3ffc-132">応答メッセージは、要求-応答、Wcf-basichttp 受信場所で取得されます。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-132">The response message is retrieved by the Request-Response WCF-BasicHttp Receive Location.</span></span>  
  
12. <span data-ttu-id="a3ffc-133">応答メッセージには、ロード テスト エージェント コンピューターが返されます。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-133">The response message is returned to the Load Test Agent computer.</span></span>  
  
 <span data-ttu-id="a3ffc-134">ロード テスト中に使用するオーケストレーションのスクリーン ショットを次に示します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-134">A screenshot of the orchestration used during the load test is shown below:</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="a3ffc-135">わかりやすくするため、ロード テスト中に使用された実際には、オーケストレーションの簡素化されたバージョンは次に示すオーケストレーションです。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-135">For purposes of illustration, the orchestration depicted below is a simplified version of the orchestration that was actually used during load testing.</span></span> <span data-ttu-id="a3ffc-136">ロード テスト中に使用するオーケストレーションには、複数のスコープ、エラー処理ロジック、およびその他のポートの種類が含まれています。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-136">The orchestration used during load testing included multiple scopes, error handling logic, and additional port types.</span></span>  
  
 <span data-ttu-id="a3ffc-137">![テスト アプリケーション オーケストレーション](../technical-guides/media/logicalportsorchestration.gif "LogicalPortsOrchestration")</span><span class="sxs-lookup"><span data-stu-id="a3ffc-137">![Test Application Orchestration](../technical-guides/media/logicalportsorchestration.gif "LogicalPortsOrchestration")</span></span>  
<span data-ttu-id="a3ffc-138">テスト アプリケーション オーケストレーション</span><span class="sxs-lookup"><span data-stu-id="a3ffc-138">Test Application Orchestration</span></span>  
  
## <a name="testing-methodology"></a><span data-ttu-id="a3ffc-139">テスト方法</span><span class="sxs-lookup"><span data-stu-id="a3ffc-139">Testing Methodology</span></span>  
 <span data-ttu-id="a3ffc-140">パフォーマンス テストするには、多くのタスクで、手動で実行する場合は、反復的な単調、およびエラーが発生する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-140">Performance testing involves many tasks, which if performed manually are repetitive, monotonous, and error prone.</span></span> <span data-ttu-id="a3ffc-141">テストの効率を向上し、テストの実行の間の一貫性を確保するために[!INCLUDE[btsVStudio2008](../includes/btsvstudio2008-md.md)]テスト プロセス中に必要なタスクを自動化する BizUnit 3.0 では Team System (VSTS) テスト Edition が使用されました。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-141">In order to improve test efficiency and provide consistency between test runs, [!INCLUDE[btsVStudio2008](../includes/btsvstudio2008-md.md)] Team System (VSTS) Test Edition with BizUnit 3.0 was used to automate the tasks required during the testing process.</span></span> <span data-ttu-id="a3ffc-142">システムに対するメッセージ負荷を生成する VSTS 2008 Test Load Agent コンピューター、テスト用クライアントとして使用され、各テストの一貫性を向上させるために実行で、同じメッセージ型が使用されました。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-142">VSTS 2008 Test Load Agent computers were used as the test client to generate the message load against the system and the same message types were used on each test run to improve consistency.</span></span> <span data-ttu-id="a3ffc-143">このプロセスに従うすべてのテスト実行の一貫性のある一連のデータを提供します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-143">Following this process provides a consistent set of data for every test run.</span></span> <span data-ttu-id="a3ffc-144">BizUnit 3.0 の詳細については、次を参照してください。 [http://go.microsoft.com/fwlink/?LinkID=85168](http://go.microsoft.com/fwlink/?LinkID=85168)です。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-144">For more information about BizUnit 3.0, see [http://go.microsoft.com/fwlink/?LinkID=85168](http://go.microsoft.com/fwlink/?LinkID=85168).</span></span> <span data-ttu-id="a3ffc-145">詳細については[!INCLUDE[btsVStudio2008](../includes/btsvstudio2008-md.md)]Team System テスト Edition を参照してください[http://go.microsoft.com/fwlink/?LinkID=141387](http://go.microsoft.com/fwlink/?LinkID=141387)です。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-145">For more information about [!INCLUDE[btsVStudio2008](../includes/btsvstudio2008-md.md)] Team System Test Edition, see [http://go.microsoft.com/fwlink/?LinkID=141387](http://go.microsoft.com/fwlink/?LinkID=141387).</span></span>  
  
 <span data-ttu-id="a3ffc-146">次の手順が自動化されました。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-146">The following steps were automated:</span></span>  
  
-   <span data-ttu-id="a3ffc-147">BizTalk ホストを停止します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-147">Stop BizTalk hosts.</span></span>  
  
-   <span data-ttu-id="a3ffc-148">テスト ディレクトリをクリーンアップします。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-148">Clean up test directories.</span></span>  
  
-   <span data-ttu-id="a3ffc-149">IIS を再起動します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-149">Restart IIS.</span></span>  
  
-   <span data-ttu-id="a3ffc-150">クリーンアップ、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]メッセージ ボックス データベースです。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-150">Clean up the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Messagebox database.</span></span>  
  
-   <span data-ttu-id="a3ffc-151">[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]を再起動します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-151">Restart [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="a3ffc-152">イベント ログのクリアします。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-152">Clear event logs.</span></span>  
  
-   <span data-ttu-id="a3ffc-153">関連するパフォーマンス メトリックを保存し、ログ ファイルを実行するたびにテスト結果フォルダーを作成します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-153">Create a test results folder for each run to store associated performance metrics and log files.</span></span>  
  
-   <span data-ttu-id="a3ffc-154">BizTalk ホストを起動します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-154">Start BizTalk Hosts.</span></span>  
  
-   <span data-ttu-id="a3ffc-155">パフォーマンス モニター カウンターを読み込みます。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-155">Load Performance Monitor counters.</span></span>  
  
-   <span data-ttu-id="a3ffc-156">ウォーム アップの負荷が小規模の BizTalk 環境。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-156">Warm up BizTalk environment with a small load.</span></span>  
  
-   <span data-ttu-id="a3ffc-157">実行担当者によって送信されます。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-157">Send through representative run.</span></span>  
  
-   <span data-ttu-id="a3ffc-158">結果のフォルダーには、パフォーマンス ログを書き込みます。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-158">Write performance logs to a results folder.</span></span>  
  
-   <span data-ttu-id="a3ffc-159">アプリケーション ログを収集し、結果フォルダーで .csv ファイルに書き込みます。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-159">Collect application logs and write to a .csv file in the results folder.</span></span>  
  
-   <span data-ttu-id="a3ffc-160">統計情報、グラフ、およびレポートを生成するために収集されたパフォーマンス ログに対してパフォーマンス分析のログ (PAL) のツール、Relog とログ パーサーのツールを実行します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-160">Run the Performance Analysis of Logs (PAL) tool, Relog and Log Parser tools against the collected performance logs to produce statistics, charts and reports.</span></span> <span data-ttu-id="a3ffc-161">PAL、Relog、およびログ パーサーの詳細については、次を参照してください。[付録 d: ツールのパフォーマンスの測定](../technical-guides/appendix-d-tools-for-measuring-performance.md)です。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-161">For more information about PAL, Relog, and Log Parser, see [Appendix D: Tools for Measuring Performance](../technical-guides/appendix-d-tools-for-measuring-performance.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="a3ffc-162">すべての追跡が無効になり、テスト中に、BizTalk Server SQL Server エージェント ジョブが無効になっています。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-162">All tracking was disabled and the BizTalk Server SQL Server Agent job was disabled during testing.</span></span>  
  
 <span data-ttu-id="a3ffc-163">この演習の結果がのパフォーマンスの比較を提供できることを確認する[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]が物理的な HYPER-V 環境で、パフォーマンス メトリック、ログがテストの実行ごとに 1 か所に収集されました。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-163">To ensure that the results of this lab were able to provide a comparison of the performance of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] in a physical and Hyper-V environment, performance metrics and logs were collected in a centralized location for each test run.</span></span>  
  
 <span data-ttu-id="a3ffc-164">各テストの実行の一意の結果ディレクトリを作成、テスト用クライアントが使用されました。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-164">The test client was used to create a unique results directory for each test run.</span></span> <span data-ttu-id="a3ffc-165">このディレクトリは、すべてのパフォーマンス ログとイベント ログが含まれているし、テストに必要なデータが関連付けられています。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-165">This directory contained all the performance logs, event logs and associated data required for the test.</span></span> <span data-ttu-id="a3ffc-166">このアプローチには、以前のテストの振り返り分析の実行時に必要な情報が必要でしたが用意されています。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-166">This approach provided information needed when retrospective analysis of prior test runs was required.</span></span> <span data-ttu-id="a3ffc-167">各テストの最後に、生データが一貫性のある結果と主要業績評価指標 (Kpi) のセットにコンパイルされました。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-167">At the end of each test, the raw data was compiled into a set of consistent results and key performance indicators (KPIs).</span></span> <span data-ttu-id="a3ffc-168">別のテストの実行や異なる環境間で必要な比較のポイントを指定された物理および仮想のマシンの設定一貫性のある結果を収集します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-168">Collecting consistent results set for physical and virtualized machines provided the points of comparison needed between the different test runs and different environments.</span></span> <span data-ttu-id="a3ffc-169">含まれるデータが収集されます。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-169">The data collected included:</span></span>  
  
-   <span data-ttu-id="a3ffc-170">**環境 –** 、物理ハードウェア上の BizTalk Server または HYPER-V での BizTalk Server のいずれかに対して、テストの実行されている環境を記録します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-170">**Environment –** To record which environment the test was being run against, either BizTalk Server on physical hardware or BizTalk Server on Hyper-V.</span></span>  
  
-   <span data-ttu-id="a3ffc-171">**テスト実行の数:** 各テストの実行を一意に識別するには</span><span class="sxs-lookup"><span data-stu-id="a3ffc-171">**Test Run Number –** To uniquely identify each test run</span></span>  
  
-   <span data-ttu-id="a3ffc-172">**テスト ケース –** テスト中に使用される BizTalk Server ソリューションのアーキテクチャを記録します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-172">**Test Case –** To record the architecture of the BizTalk Server solution used during testing.</span></span> <span data-ttu-id="a3ffc-173">(たとえばインラインを使用するオーケストレーションと論理ポートをオーケストレーションに送信する)</span><span class="sxs-lookup"><span data-stu-id="a3ffc-173">(For example Orchestration with Logical Ports versus Orchestration using inline Sends)</span></span>  
  
-   <span data-ttu-id="a3ffc-174">**日付-** 記録された日付と時刻のテストを実行</span><span class="sxs-lookup"><span data-stu-id="a3ffc-174">**Date –** To record the date and time the test was run</span></span>  
  
-   <span data-ttu-id="a3ffc-175">**時刻 – 開始**開始される最初の VSTS ロード テスト エージェントによって報告されました。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-175">**Time Started –** As reported by the first VSTS load test agent initiated</span></span>  
  
-   <span data-ttu-id="a3ffc-176">**時刻の停止 –** を完了する最後の VSTS ロード テスト エージェントによって報告されました。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-176">**Time Stopped –** As reported by the last VSTS load test agent to complete</span></span>  
  
-   <span data-ttu-id="a3ffc-177">**テスト期間 (分) –** テストの期間を記録します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-177">**Test Duration in Minutes –** To record the duration of the test.</span></span>  
  
-   <span data-ttu-id="a3ffc-178">**合計-で送信されたメッセージ**テスト中に、BizTalk Server コンピューターにロード エージェント コンピューターから送信されたメッセージの合計数を記録します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-178">**Messages Sent in Total –** To record the total number of messages sent from the Load Agent computers to the BizTalk Server computers during the test.</span></span>  
  
-   <span data-ttu-id="a3ffc-179">**– 1 秒あたりに送信されたメッセージ**から送信された 1 秒あたりロード エージェント コンピューターを BizTalk Server コンピューターにテスト中にメッセージを記録します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-179">**Messages Sent per Second –** To record the messages sent per second from the Load Agent computers to the BizTalk Server computers during the test.</span></span>  
  
-   <span data-ttu-id="a3ffc-180">**クライアントの待機時間: 平均**ロード エージェントのテスト クライアントに要求を開始したし、ロード テスト中に、BizTalk Server コンピューターからの応答を受け取りました間の時間の平均値を記録します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-180">**Average Client Latency –** To record the average amount of time between when Test Load Agent clients initiated a request to and received a response from the BizTalk Server computers during the load test.</span></span>  
  
-   <span data-ttu-id="a3ffc-181">**要求-応答の期間平均 (ms) –** によって報告された、 **BizTalk: メッセージング Latency\Request-応答の待機時間 (秒)** BizTalkServerIsolatedHost のパフォーマンス モニター カウンター</span><span class="sxs-lookup"><span data-stu-id="a3ffc-181">**Request-Response Duration Average (ms) –** As reported by the **BizTalk:Messaging Latency\Request-Response Latency (sec)** Performance Monitor counter for the BizTalkServerIsolatedHost</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="a3ffc-182">複数の仮想化された BizTalk ホストが実行されているこれらのカウンターの平均として計算されるログからが使用されました。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-182">Where multiple virtualized BizTalk hosts were running an average of these counters as calculated from the logs was used.</span></span>  
  
-   <span data-ttu-id="a3ffc-183">**1 秒間 – オーケストレーション完了**によって報告された、 **xlang/s Orchestrations (BizTalkServerApplication) \Orchestrations が 1 秒あたりに完了した**パフォーマンス モニター カウンターです。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-183">**Orchestrations Completed per Second –** As reported by the **XLANG/s Orchestrations(BizTalkServerApplication)\Orchestrations completed/sec** Performance Monitor counter.</span></span> <span data-ttu-id="a3ffc-184">このカウンターは、のスループットのよい尺度、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ソリューションです。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-184">This counter provides a good measure of the throughput of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] solution.</span></span>  
  
-   <span data-ttu-id="a3ffc-185">**< 3 秒 – メッセージ処理の %** テスト中に 3 秒以内に処理されるメッセージの合計数を記録します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-185">**% of Messages Processed < 3 seconds –** To record the total number of messages processed within 3 seconds during the test.</span></span>  
  
 <span data-ttu-id="a3ffc-186">VSTS 2008 ロード テストは、すべてのテスト全体で一貫した負荷の生成に使用されました。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-186">VSTS 2008 Load Test was used to generate a consistent load throughout all the tests.</span></span> <span data-ttu-id="a3ffc-187">次のテストの実行設定と、ロード パターンは、各テストのロード プロファイルを調整するテスト中に変更されました。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-187">The following test run settings and load pattern were modified during testing to adjust the load profile of each test:</span></span>  
  
-   <span data-ttu-id="a3ffc-188">**テストの実行設定**</span><span class="sxs-lookup"><span data-stu-id="a3ffc-188">**Test Run Settings**</span></span>  
  
     <span data-ttu-id="a3ffc-189">次のテストの実行設定は、実行されているテストによって変更されました。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-189">The following test run setting was modified depending on the test being performed:</span></span>  
  
    -   <span data-ttu-id="a3ffc-190">**実行の継続時間:** テストの実行時間を指定します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-190">**Run Duration –** Specifies how long the test is run.</span></span>  
  
     <span data-ttu-id="a3ffc-191">![テストの実行設定](../technical-guides/media/wcfloadtestrunsettings.gif "WCFLoadTestRunSettings")</span><span class="sxs-lookup"><span data-stu-id="a3ffc-191">![Test Run Settings](../technical-guides/media/wcfloadtestrunsettings.gif "WCFLoadTestRunSettings")</span></span>  
<span data-ttu-id="a3ffc-192">テスト実行設定</span><span class="sxs-lookup"><span data-stu-id="a3ffc-192">Test Run Settings</span></span>  
  
-   <span data-ttu-id="a3ffc-193">**テスト パターン設定**</span><span class="sxs-lookup"><span data-stu-id="a3ffc-193">**Test Pattern Settings**</span></span>  
  
     <span data-ttu-id="a3ffc-194">次のテスト パターン設定は、実行されているテストによって変更されました。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-194">The following test pattern settings were modified depending on the test being performed:</span></span>  
  
    1.  <span data-ttu-id="a3ffc-195">**パターン:** ロード テスト中に、シミュレートされたユーザー ロードを調整する方法を指定します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-195">**Pattern –** Specifies how the simulated user load is adjusted during a load test.</span></span> <span data-ttu-id="a3ffc-196">ロード パターンは、いずれかの**定数**、**ステップ**、または**目標**ベースです。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-196">Load patterns are either **Constant**, **Step**, or **Goal** based.</span></span> <span data-ttu-id="a3ffc-197">すべてのロード テスト、定数または手順のいずれかが実行されます。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-197">All load testing performed was either Constant or Step.</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="a3ffc-198">このガイドの目的で使用されるいずれかのすべてのテストの実行、**定数**ロード パターン、または**ステップ**ロード パターンです。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-198">All testing performed for purposes of this guide used either a **Constant** load pattern or a **Step** load pattern.</span></span> <span data-ttu-id="a3ffc-199">持続ロード パターン、およびステップ ロード パターンは、次の機能を提供します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-199">Constant load patterns and Step load patterns provide the following functionality:</span></span>  
        >   
        >  -   <span data-ttu-id="a3ffc-200">**持続ロード パターン –** ロード パターンが、同じテストの実行中には、シミュレートされたユーザーの数は、定義済みのレベルで開始しては変わりません。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-200">**Constant load pattern –** The load pattern is the same for the duration of the test, the number of simulated users starts at a predefined level and does not change.</span></span>  
        > -   <span data-ttu-id="a3ffc-201">**ステップ ロード パターン –** ロード パターンがテストの実行中に増加しました。 シミュレートされたユーザーの数が定義済みのレベルで開始するとはずつ事前定義された事前定義された間隔で、テストの実行中です。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-201">**Step load pattern –** The load pattern is increased during the test run; the number of simulated users starts at a predefined level and is incremented by a predefined amount at predefined intervals for the duration of the test.</span></span>  
  
    2.  <span data-ttu-id="a3ffc-202">**ユーザー数の定数 (定数ロード パターン) –** Visual Studio ロード テスト プロジェクトの app.config ファイルで指定されたエンドポイントのアドレスに対する負荷を生成している仮想ユーザーの数。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-202">**Constant User Count (Constant Load Pattern) –** Number of virtual users that are generating load against the endpoint address specified in the app.config file of the Visual Studio Load Test project.</span></span> <span data-ttu-id="a3ffc-203">この値は、ロード テストに使用されるロード パターン設定で指定されます。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-203">This value is specified in the Load Pattern settings used for the load test.</span></span>  
  
    3.  <span data-ttu-id="a3ffc-204">**初期のユーザー カウント (ステップ ロード パターン) –** テストのステップ ロード パターンの先頭に指定したエンドポイント アドレスに対する負荷を生成している仮想ユーザーの数。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-204">**Initial User Count (Step Load Pattern) –** Number of virtual users that are generating load against the specified endpoint address at the beginning of a Step Load Pattern test.</span></span> <span data-ttu-id="a3ffc-205">この値は、ロード テストに使用されるロード パターン設定で指定されます。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-205">This value is specified in the Load Pattern settings used for the load test.</span></span>  
  
    4.  <span data-ttu-id="a3ffc-206">**最大ユーザー カウント (ステップ ロード パターン) –** テストのステップ ロード パターンの末尾に指定したエンドポイント アドレスに対する負荷を生成している仮想ユーザーの数。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-206">**Maximum User Count (Step Load Pattern) –** Number of virtual users that are generating load against the specified endpoint address at the end of a Step Load Pattern test.</span></span> <span data-ttu-id="a3ffc-207">この値は、ロード テストに使用されるロード パターン設定で指定されます。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-207">This value is specified in the Load Pattern settings used for the load test.</span></span>  
  
    5.  <span data-ttu-id="a3ffc-208">**ステップ実行間隔 (ステップ ロード パターン) –** 仮想ユーザーがロード テストのステップの指定したエンドポイント アドレスに対する負荷を生成する秒数。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-208">**Step Duration (Step Load Pattern) –** Number of seconds that virtual users are generating load against the specified endpoint address for a load test step.</span></span>  
  
    6.  <span data-ttu-id="a3ffc-209">**ユーザー カウントのステップ (ステップ ロード パターン) –** ステップ ロード パターンを使用する場合は、各ステップで増加する仮想ユーザーの数。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-209">**Step User Count (Step Load Pattern) –** Number of virtual users to increase at each step when using a step load pattern.</span></span>  
  
     <span data-ttu-id="a3ffc-210">![テスト パターン設定](../technical-guides/media/wcfloadtestpatternsettings.gif "WCFLoadTestPatternSettings")</span><span class="sxs-lookup"><span data-stu-id="a3ffc-210">![Test Pattern Settings](../technical-guides/media/wcfloadtestpatternsettings.gif "WCFLoadTestPatternSettings")</span></span>  
<span data-ttu-id="a3ffc-211">テスト パターン設定</span><span class="sxs-lookup"><span data-stu-id="a3ffc-211">Test Pattern Settings</span></span>  
  
 <span data-ttu-id="a3ffc-212">ロード テストでの操作の詳細については[!INCLUDE[btsVStudio2008](../includes/btsvstudio2008-md.md)]、トピックを参照して**ロード テストの操作**で、 [!INCLUDE[btsVStudio2008](../includes/btsvstudio2008-md.md)] Team System のマニュアル[http://go.microsoft.com/fwlink/?LinkId=141486](http://go.microsoft.com/fwlink/?LinkId=141486)です。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-212">For more information about working with load tests in [!INCLUDE[btsVStudio2008](../includes/btsvstudio2008-md.md)], see the topic **Working with Load Tests** in the [!INCLUDE[btsVStudio2008](../includes/btsvstudio2008-md.md)] Team System documentation at [http://go.microsoft.com/fwlink/?LinkId=141486](http://go.microsoft.com/fwlink/?LinkId=141486).</span></span>  
  
## <a name="key-performance-indicators-measured-during-testing"></a><span data-ttu-id="a3ffc-213">テスト中に測定する主要業績評価指標</span><span class="sxs-lookup"><span data-stu-id="a3ffc-213">Key Performance Indicators Measured During Testing</span></span>  
 <span data-ttu-id="a3ffc-214">次のパフォーマンス モニター カウンターは、すべてのテスト実行の主要業績評価指標 (KPI) としてキャプチャされました。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-214">The following Performance Monitor counters were captured as key performance indicators (KPI) for all test runs:</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="a3ffc-215">パフォーマンス モニター カウンターでのパフォーマンスの評価の詳細については、次を参照してください。[チェックリスト: Hyper-v でのパフォーマンスの測定](../technical-guides/checklist-measuring-performance-on-hyper-v.md)です。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-215">For more information about evaluating performance with Performance monitor counters, see [Checklist: Measuring Performance on Hyper-V](../technical-guides/checklist-measuring-performance-on-hyper-v.md).</span></span>  
  
 <span data-ttu-id="a3ffc-216">**BizTalk Server KPI**</span><span class="sxs-lookup"><span data-stu-id="a3ffc-216">**BizTalk Server KPI**</span></span>  
  
-   <span data-ttu-id="a3ffc-217">**– 1 秒あたりに処理されたドキュメント**によって測定される、 **BizTalk: メッセージング ドキュメント処理数/秒**カウンターです。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-217">**Documents processed per second –** As measured by the **BizTalk:Messaging/Documents processed/Sec** counter.</span></span>  
  
-   <span data-ttu-id="a3ffc-218">**待機時間:** VSTS 2008 ロード テスト コント ローラーによって返されるを測定します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-218">**Latency –** As measured as returned by the VSTS 2008 Load Test Controller.</span></span>  
  
 <span data-ttu-id="a3ffc-219">**SQL Server KPI**</span><span class="sxs-lookup"><span data-stu-id="a3ffc-219">**SQL Server KPI**</span></span>  
  
-   <span data-ttu-id="a3ffc-220">**SQL Server のプロセッサ使用率 –** によって測定される、 **SQL\Processor(Total)\\% Processor Time**カウンターです。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-220">**SQL Server processor utilization –** As measured by the **SQL\Processor(Total)\\%Processor Time** counter.</span></span> <span data-ttu-id="a3ffc-221">このカウンターの CPU 使用率を測定する[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]に処理を[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]コンピューター。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-221">This counter measures CPU utilization of [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] processing on the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] computer.</span></span>  
  
-   <span data-ttu-id="a3ffc-222">**Transact SQL コマンドの処理パフォーマンス –** によって測定される、 **\SQL Server:SQL Statistics\Batch 要求数/秒**カウンターです。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-222">**Transact SQL command processing performance –** As measured by the **\SQL Server:SQL Statistics\Batch Requests/sec** counter.</span></span> <span data-ttu-id="a3ffc-223">このカウンターは、1 秒あたりに受信した TRANSACT-SQL コマンド バッチの数を計測します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-223">This counter measures the number of Transact-SQL command batches received per second.</span></span> <span data-ttu-id="a3ffc-224">このカウンターを使用してのスループットを測定する、[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]コンピューター。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-224">This counter is used to measure throughput on the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] computer.</span></span>  
  
 <span data-ttu-id="a3ffc-225">**KPI のネットワーク**</span><span class="sxs-lookup"><span data-stu-id="a3ffc-225">**Networking KPI**</span></span>  
  
-   <span data-ttu-id="a3ffc-226">**BizTalk Server ネットワークのスループット:** によって測定される、 **\Network インターフェイス (\*) \Bytes total/sec**でパフォーマンス モニター カウンター、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]コンピューター。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-226">**BizTalk Server network throughput –** As measured by the **\Network Interface(\*)\Bytes Total/sec** performance monitor counter on the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computers.</span></span>  
  
-   <span data-ttu-id="a3ffc-227">**SQL Server ネットワークのスループット:** によって測定される、 **SQL Network interface \bytes total/sec (Avg)** VSTS 2008 ロード テスト コント ローラーによって返されます。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-227">**SQL Server network throughput –** As measured by the **SQL Network Interface\Bytes Total/sec (Avg)** returned by the VSTS 2008 Load Test Controller.</span></span>  
  
 <span data-ttu-id="a3ffc-228">**KPI のメモリ**</span><span class="sxs-lookup"><span data-stu-id="a3ffc-228">**Memory KPI**</span></span>  
  
-   <span data-ttu-id="a3ffc-229">**使用可能なメモリ –** によって測定される、 **\Memory\Available Mbytes**カウンター、さまざまなシナリオをします。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-229">**Available memory –** As measured by the **\Memory\Available Mbytes** counter for the various scenarios.</span></span>  
  
## <a name="physical-infrastructure-specifics"></a><span data-ttu-id="a3ffc-230">物理インフラストラクチャの詳細</span><span class="sxs-lookup"><span data-stu-id="a3ffc-230">Physical Infrastructure Specifics</span></span>  
 <span data-ttu-id="a3ffc-231">各インストールされたサーバーに対して、次の設定が調整されます。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-231">For each of the servers that were installed the following settings were adjusted.</span></span>  
  
 <span data-ttu-id="a3ffc-232">**すべてのサーバー。**</span><span class="sxs-lookup"><span data-stu-id="a3ffc-232">**For all servers:**</span></span>  
  
-   <span data-ttu-id="a3ffc-233">ページング ファイルは、割り当てられた物理メモリのサイズの 1.5 倍に設定されました。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-233">The paging file was set to 1.5 times the amount of physical memory allocated.</span></span> <span data-ttu-id="a3ffc-234">ページング ファイルは、初期サイズと最大値は mb 単位で同一ことにより、固定サイズに設定されました。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-234">The paging file was set to a fixed size by ensuring that the initial size and maximum values were identical in MB.</span></span>  
  
-   <span data-ttu-id="a3ffc-235">高度なシステムのプロパティ 画面から「最適なパフォーマンスを調整する」のパフォーマンス オプションが選択されました。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-235">The “Adjust for best performance” performance option was selected from the advanced System Properties screen.</span></span>  
  
-   <span data-ttu-id="a3ffc-236">システムが最適なパフォーマンスをシステムのプロパティの [パフォーマンス オプション] セクションでバック グラウンド サービスの調整されたことが確認されました。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-236">It was verified that the system had been adjusted for best performance of Background services in the Performance Options section of System Properties.</span></span>  
  
-   [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)]<span data-ttu-id="a3ffc-237">各仮想マシンのゲスト オペレーティング システムにインストールされました。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-237"> was installed as the guest operating system on each of the virtual machines.</span></span>  
  
-   <span data-ttu-id="a3ffc-238">Windows Update は、最新のセキュリティ更新プログラムをインストールするためのすべてのサーバーで正常に実行されました。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-238">Windows Update was successfully run on all servers to install the latest security updates.</span></span>  
  
 <span data-ttu-id="a3ffc-239">**SQL server:**</span><span class="sxs-lookup"><span data-stu-id="a3ffc-239">**For SQL Server:**</span></span>  
  
-   <span data-ttu-id="a3ffc-240">SQL Server のインストールで使用可能なインストール ガイドに従って[http://go.microsoft.com/fwlink/?LinkId=141021](http://go.microsoft.com/fwlink/?LinkId=141021)です。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-240">SQL Server was installed as per the installation guide available at [http://go.microsoft.com/fwlink/?LinkId=141021](http://go.microsoft.com/fwlink/?LinkId=141021).</span></span>  
  
-   [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]<span data-ttu-id="a3ffc-241">使用の SAN Lun 構成いた次の表に従ってします。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-241"> used had the SAN LUNs configured as per the table below.</span></span> <span data-ttu-id="a3ffc-242">Lun を可能なディスク I/O の競合を減らすために次のようにわたってを区切った、データベースとログ ファイル。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-242">The database and log files were separated to across the LUNs as follows to reduce possible disk I/O contention:</span></span>  
  
    -   <span data-ttu-id="a3ffc-243">Data_Sys ボリュームは、メッセージ ボックス データベースと TempDb データベースを除くすべてのデータベース ファイル (システムと BizTalk データベースを含む) を格納する使用されました。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-243">The Data_Sys volume was used to store all database files (including system and BizTalk databases) except the MessageBox and TempDb databases.</span></span>  
  
    -   <span data-ttu-id="a3ffc-244">Log_Sys ボリュームは、すべてのログ ファイルの保存に使用された (システムを含むと[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]データベース)、メッセージ ボックス データベースと TempDb データベースを除きます。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-244">The Log_Sys volume was used to store all log files (including system and [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases) except the MessageBox and TempDb databases.</span></span>  
  
    -   <span data-ttu-id="a3ffc-245">Data_TempDb ボリュームは、TempDb データベース ファイルの格納に使用されました。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-245">The Data_TempDb volume was used to store the TempDb database file.</span></span>  
  
    -   <span data-ttu-id="a3ffc-246">TempDb ログ ファイルを格納する Logs_TempDb ボリュームが使用されました。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-246">The Logs_TempDb volume was used to store the TempDb log file.</span></span>  
  
    -   <span data-ttu-id="a3ffc-247">Data_BtsMsgBox ボリュームで、メッセージ ボックス データベース ファイルが格納されているし、ログ ファイルが Log_BtsMsgBox ボリュームに格納されています。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-247">The MessageBox database file was stored on the Data_BtsMsgBox volume and the log file was stored on the Log_BtsMsgBox volume.</span></span>  
  
-   <span data-ttu-id="a3ffc-248">さらに、個別の LUN が指定されて、MSDTC ログ ファイルの。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-248">In addition to this, a separate LUN was provided for the MSDTC log file.</span></span> <span data-ttu-id="a3ffc-249">高スループット BizTalk システムで、MSDTC ログ ファイルのアクティビティが表示する I/O のボトルネックが発生する場合は、オペレーティング システムと同じ物理ドライブにはそのままにします。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-249">On high throughput BizTalk systems, the MSDTC log file activity has been shown to cause an I/O bottleneck if it is left on the same physical drive as the operating system.</span></span>  
  
    |<span data-ttu-id="a3ffc-250">ボリューム名</span><span class="sxs-lookup"><span data-stu-id="a3ffc-250">Volume Name</span></span>|<span data-ttu-id="a3ffc-251">[ファイル]</span><span class="sxs-lookup"><span data-stu-id="a3ffc-251">Files</span></span>|<span data-ttu-id="a3ffc-252">LUN サイズ (GB)</span><span class="sxs-lookup"><span data-stu-id="a3ffc-252">LUN Size GB</span></span>|<span data-ttu-id="a3ffc-253">ホスト パーティション サイズ (GB)</span><span class="sxs-lookup"><span data-stu-id="a3ffc-253">Host Partition Size GB</span></span>|<span data-ttu-id="a3ffc-254">クラスターのサイズ</span><span class="sxs-lookup"><span data-stu-id="a3ffc-254">Cluster Size</span></span>|  
    |-----------------|-----------|-----------------|----------------------------|------------------|  
    |<span data-ttu-id="a3ffc-255">Data_Sys</span><span class="sxs-lookup"><span data-stu-id="a3ffc-255">Data_Sys</span></span>|<span data-ttu-id="a3ffc-256">マスターおよび MSDB のデータ ファイル</span><span class="sxs-lookup"><span data-stu-id="a3ffc-256">MASTER, and MSDB data files</span></span>|<span data-ttu-id="a3ffc-257">10</span><span class="sxs-lookup"><span data-stu-id="a3ffc-257">10</span></span>|<span data-ttu-id="a3ffc-258">10</span><span class="sxs-lookup"><span data-stu-id="a3ffc-258">10</span></span>|<span data-ttu-id="a3ffc-259">64 KB</span><span class="sxs-lookup"><span data-stu-id="a3ffc-259">64KB</span></span>|  
    |<span data-ttu-id="a3ffc-260">Logs_Sys</span><span class="sxs-lookup"><span data-stu-id="a3ffc-260">Logs_Sys</span></span>|<span data-ttu-id="a3ffc-261">MASTER および MSDB のログ ファイル</span><span class="sxs-lookup"><span data-stu-id="a3ffc-261">MASTER and MSDB log files</span></span>|<span data-ttu-id="a3ffc-262">10</span><span class="sxs-lookup"><span data-stu-id="a3ffc-262">10</span></span>|<span data-ttu-id="a3ffc-263">10</span><span class="sxs-lookup"><span data-stu-id="a3ffc-263">10</span></span>|<span data-ttu-id="a3ffc-264">64 KB</span><span class="sxs-lookup"><span data-stu-id="a3ffc-264">64KB</span></span>|  
    |<span data-ttu-id="a3ffc-265">Data_TempDb</span><span class="sxs-lookup"><span data-stu-id="a3ffc-265">Data_TempDb</span></span>|<span data-ttu-id="a3ffc-266">TempDB データ ファイル</span><span class="sxs-lookup"><span data-stu-id="a3ffc-266">TempDB data file</span></span>|<span data-ttu-id="a3ffc-267">50</span><span class="sxs-lookup"><span data-stu-id="a3ffc-267">50</span></span>|<span data-ttu-id="a3ffc-268">50</span><span class="sxs-lookup"><span data-stu-id="a3ffc-268">50</span></span>|<span data-ttu-id="a3ffc-269">64 KB</span><span class="sxs-lookup"><span data-stu-id="a3ffc-269">64KB</span></span>|  
    |<span data-ttu-id="a3ffc-270">Logs_TempDb</span><span class="sxs-lookup"><span data-stu-id="a3ffc-270">Logs_TempDb</span></span>|<span data-ttu-id="a3ffc-271">TempDB ログ ファイル</span><span class="sxs-lookup"><span data-stu-id="a3ffc-271">TempDB log file</span></span>|<span data-ttu-id="a3ffc-272">50</span><span class="sxs-lookup"><span data-stu-id="a3ffc-272">50</span></span>|<span data-ttu-id="a3ffc-273">50</span><span class="sxs-lookup"><span data-stu-id="a3ffc-273">50</span></span>|<span data-ttu-id="a3ffc-274">64 KB</span><span class="sxs-lookup"><span data-stu-id="a3ffc-274">64KB</span></span>|  
    |<span data-ttu-id="a3ffc-275">Data_BtsMsgBox</span><span class="sxs-lookup"><span data-stu-id="a3ffc-275">Data_BtsMsgBox</span></span>|<span data-ttu-id="a3ffc-276">BizTalkMsgBoxDb データ ファイル</span><span class="sxs-lookup"><span data-stu-id="a3ffc-276">BizTalkMsgBoxDb data file</span></span>|<span data-ttu-id="a3ffc-277">300</span><span class="sxs-lookup"><span data-stu-id="a3ffc-277">300</span></span>|<span data-ttu-id="a3ffc-278">100</span><span class="sxs-lookup"><span data-stu-id="a3ffc-278">100</span></span>|<span data-ttu-id="a3ffc-279">64 KB</span><span class="sxs-lookup"><span data-stu-id="a3ffc-279">64KB</span></span>|  
    |<span data-ttu-id="a3ffc-280">Logs_BtsMsgBox</span><span class="sxs-lookup"><span data-stu-id="a3ffc-280">Logs_BtsMsgBox</span></span>|<span data-ttu-id="a3ffc-281">BizTalkMsgBoxDb ログファイル</span><span class="sxs-lookup"><span data-stu-id="a3ffc-281">BizTalkMsgBoxDb log file</span></span>|<span data-ttu-id="a3ffc-282">100</span><span class="sxs-lookup"><span data-stu-id="a3ffc-282">100</span></span>|<span data-ttu-id="a3ffc-283">100</span><span class="sxs-lookup"><span data-stu-id="a3ffc-283">100</span></span>|<span data-ttu-id="a3ffc-284">64 KB</span><span class="sxs-lookup"><span data-stu-id="a3ffc-284">64KB</span></span>|  
    |<span data-ttu-id="a3ffc-285">Data_BAMPrimaryImport</span><span class="sxs-lookup"><span data-stu-id="a3ffc-285">Data_BAMPrimaryImport</span></span>|<span data-ttu-id="a3ffc-286">BAMPrimaryImport のデータ ファイル</span><span class="sxs-lookup"><span data-stu-id="a3ffc-286">BAMPrimaryImport data file</span></span>|<span data-ttu-id="a3ffc-287">10</span><span class="sxs-lookup"><span data-stu-id="a3ffc-287">10</span></span>|<span data-ttu-id="a3ffc-288">10</span><span class="sxs-lookup"><span data-stu-id="a3ffc-288">10</span></span>|<span data-ttu-id="a3ffc-289">64 KB</span><span class="sxs-lookup"><span data-stu-id="a3ffc-289">64KB</span></span>|  
    |<span data-ttu-id="a3ffc-290">Logs_BAMPrimaryImport</span><span class="sxs-lookup"><span data-stu-id="a3ffc-290">Logs_BAMPrimaryImport</span></span>|<span data-ttu-id="a3ffc-291">BAMPrimaryImport のログ ファイル</span><span class="sxs-lookup"><span data-stu-id="a3ffc-291">BAMPrimaryImport log file</span></span>|<span data-ttu-id="a3ffc-292">10</span><span class="sxs-lookup"><span data-stu-id="a3ffc-292">10</span></span>|<span data-ttu-id="a3ffc-293">10</span><span class="sxs-lookup"><span data-stu-id="a3ffc-293">10</span></span>|<span data-ttu-id="a3ffc-294">64 KB</span><span class="sxs-lookup"><span data-stu-id="a3ffc-294">64KB</span></span>|  
    |<span data-ttu-id="a3ffc-295">Data_BizTalkDatabases</span><span class="sxs-lookup"><span data-stu-id="a3ffc-295">Data_BizTalkDatabases</span></span>|<span data-ttu-id="a3ffc-296">他の BizTalk データベース データ ファイル</span><span class="sxs-lookup"><span data-stu-id="a3ffc-296">Other BizTalk database data files</span></span>|<span data-ttu-id="a3ffc-297">20</span><span class="sxs-lookup"><span data-stu-id="a3ffc-297">20</span></span>|<span data-ttu-id="a3ffc-298">20</span><span class="sxs-lookup"><span data-stu-id="a3ffc-298">20</span></span>|<span data-ttu-id="a3ffc-299">64 KB</span><span class="sxs-lookup"><span data-stu-id="a3ffc-299">64KB</span></span>|  
    |<span data-ttu-id="a3ffc-300">Logs_BizTalkDatabases</span><span class="sxs-lookup"><span data-stu-id="a3ffc-300">Logs_BizTalkDatabases</span></span>|<span data-ttu-id="a3ffc-301">その他の BizTalk データベースのログ ファイル</span><span class="sxs-lookup"><span data-stu-id="a3ffc-301">Other BizTalk database log files</span></span>|<span data-ttu-id="a3ffc-302">20</span><span class="sxs-lookup"><span data-stu-id="a3ffc-302">20</span></span>|<span data-ttu-id="a3ffc-303">20</span><span class="sxs-lookup"><span data-stu-id="a3ffc-303">20</span></span>|<span data-ttu-id="a3ffc-304">64 KB</span><span class="sxs-lookup"><span data-stu-id="a3ffc-304">64KB</span></span>|  
    |<span data-ttu-id="a3ffc-305">なし</span><span class="sxs-lookup"><span data-stu-id="a3ffc-305">N/A</span></span>|<span data-ttu-id="a3ffc-306">MSDTC ログ ファイル</span><span class="sxs-lookup"><span data-stu-id="a3ffc-306">MSDTC log file</span></span>|<span data-ttu-id="a3ffc-307">5</span><span class="sxs-lookup"><span data-stu-id="a3ffc-307">5</span></span>|<span data-ttu-id="a3ffc-308">5</span><span class="sxs-lookup"><span data-stu-id="a3ffc-308">5</span></span>|<span data-ttu-id="a3ffc-309">なし</span><span class="sxs-lookup"><span data-stu-id="a3ffc-309">N/A</span></span>|  
  
-   <span data-ttu-id="a3ffc-310">BizTalk Server のインストールで使用可能なインストール ガイドに従って[http://go.microsoft.com/fwlink/?LinkId=128383](http://go.microsoft.com/fwlink/?LinkId=128383)です。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-310">BizTalk Server was installed as per the installation guides available at [http://go.microsoft.com/fwlink/?LinkId=128383](http://go.microsoft.com/fwlink/?LinkId=128383).</span></span>  
  
-   <span data-ttu-id="a3ffc-311">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ベスト プラクティス アナライザー (BPA) ツールを使用して、システムが構成されていたとプラットフォームの検証を実行します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-311">The [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Best Practices Analyzer (BPA) tool was used to perform platform validation once the system had been configured.</span></span> <span data-ttu-id="a3ffc-312">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] BPA は、「 [http://go.microsoft.com/fwlink/?LinkId=67150](http://go.microsoft.com/fwlink/?LinkId=67150)です。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-312">The [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] BPA is available at [http://go.microsoft.com/fwlink/?LinkId=67150](http://go.microsoft.com/fwlink/?LinkId=67150).</span></span>  
  
## <a name="virtualization-specifics"></a><span data-ttu-id="a3ffc-313">仮想化の詳細</span><span class="sxs-lookup"><span data-stu-id="a3ffc-313">Virtualization Specifics</span></span>  
 <span data-ttu-id="a3ffc-314">各 HYPER-V 仮想マシンのオペレーティング システムをホストする 1 つ 50 GB の固定 VHD が使用されました。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-314">A single 50 GB fixed VHD was used to host the operating system for each Hyper-V virtual machine.</span></span>  
  
 <span data-ttu-id="a3ffc-315">これらにすぐがホストされているドライブ上のファイルを VHD の最大記憶域を割り当てるために、サイズが動的に設定された Vhd ではなく容量固定の Vhd が使用されました。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-315">Fixed VHDs were used instead of dynamically sized VHDs because they immediately allocate the maximum storage for the VHD to the file on the drive where it is hosted.</span></span> <span data-ttu-id="a3ffc-316">これにより、ディスク I/O パフォーマンスを向上させる、ホストされている、物理ドライブで発生している VHD ファイルの断片化が減少します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-316">This reduces fragmentation of the VHD file occurring on the physical drive where it is hosted, which improves disk I/O performance.</span></span>  
  
 <span data-ttu-id="a3ffc-317">セットアップに仮想マシンのインストール[!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)]1 つの VHD で 64 ビット版が実行されました。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-317">To set-up the virtual machines, an installation of [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] 64-bit edition was performed on a single VHD.</span></span> <span data-ttu-id="a3ffc-318">すべての適切な更新プログラムがインストールされたら、基本の仮想マシン イメージを作成したと共にインストールされている sysprep ユーティリティを使用して[!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)]、%WINDIR%\system32\sysprep ディレクトリにします。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-318">Once all appropriate updates had been installed the base virtual machine was imaged using sysprep utility that is installed with [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)], in the %WINDIR%\system32\sysprep directory.</span></span>  
  
 <span data-ttu-id="a3ffc-319">このベース VHD がコピーし、環境全体で展開されているすべての HYPER-V 仮想マシンの基礎として使用します。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-319">This base VHD was then copied and used as the basis for all Hyper-V virtual machines that were deployed across the environment.</span></span> <span data-ttu-id="a3ffc-320">開始する前にシステムのセキュリティ識別子をリセットするベース VHD イメージで Sysprep が実行された[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]または[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]バイナリは、システムに配置されました。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-320">Sysprep was run on the base VHD image to reset system security identifiers before any [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] or [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] binaries were deployed to the system.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="a3ffc-321">BizTalk Server をインストールし、サーバー上で構成した後、Sysprep を実行しているが、Sysprep 応答ファイルおよび BizTalk Server で提供するスクリプトを使用して実現できます。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-321">Running Sysprep after BizTalk Server has been installed and configured on the server can be accomplished through the use of a Sysprep answer file and scripts provided with BizTalk Server.</span></span> <span data-ttu-id="a3ffc-322">これらのサンプル スクリプトがの 32 ビットおよび 64 ビット バージョンにインストールされている BizTalk Server で使用できるように設計[!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)]のみです。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-322">These sample scripts are designed for use with BizTalk Server installed on 32-bit and 64-bit versions of [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] only.</span></span> <span data-ttu-id="a3ffc-323">詳細については、BizTalk Server のオンライン マニュアルを参照してください。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-323">For more information see the BizTalk Server online documentation.</span></span>  
  
 <span data-ttu-id="a3ffc-324">Windows の無人セットアップ リファレンスについては、「 [http://go.microsoft.com/fwlink/?LinkId=142364](http://go.microsoft.com/fwlink/?LinkId=142364)です。</span><span class="sxs-lookup"><span data-stu-id="a3ffc-324">The Unattended Windows Setup Reference is available at [http://go.microsoft.com/fwlink/?LinkId=142364](http://go.microsoft.com/fwlink/?LinkId=142364).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a3ffc-325">参照</span><span class="sxs-lookup"><span data-stu-id="a3ffc-325">See Also</span></span>  
 [<span data-ttu-id="a3ffc-326">付録 C: BizTalk Server と SQL Server の Hyper-V のサポート性</span><span class="sxs-lookup"><span data-stu-id="a3ffc-326">Appendix C: BizTalk Server and SQL Server Hyper-V Supportability</span></span>](../technical-guides/appendix-c-biztalk-server-and-sql-server-hyper-v-supportability.md)