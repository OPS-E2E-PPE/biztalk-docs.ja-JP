---
title: チェックリスト:SQL Server の構成 |Microsoft Docs
ms.custom: ''
ms.date: 06/29/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: edd20f24-8a72-40b7-abee-81fbd3ceefda
caps.latest.revision: 6
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 11ddb15c9086d8aeadf65da399a99598ae91a895
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65291460"
---
# <a name="checklist-configuring-sql-server"></a><span data-ttu-id="2afdc-102">チェックリスト:SQL Server の構成</span><span class="sxs-lookup"><span data-stu-id="2afdc-102">Checklist: Configuring SQL Server</span></span>
<span data-ttu-id="2afdc-103">用の SQL Server を準備するときに実行する手順は、BizTalk Server の運用環境で使用します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-103">Steps to follow when preparing SQL Server for use in a BizTalk Server production environment.</span></span>    
 
<a name="BKMK_Config"></a>   
## <a name="configuring-sql-server"></a><span data-ttu-id="2afdc-104">SQL Server の構成</span><span class="sxs-lookup"><span data-stu-id="2afdc-104">Configuring SQL Server</span></span>  
  
|<span data-ttu-id="2afdc-105">手順</span><span class="sxs-lookup"><span data-stu-id="2afdc-105">Steps</span></span>|<span data-ttu-id="2afdc-106">リファレンス</span><span class="sxs-lookup"><span data-stu-id="2afdc-106">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="2afdc-107">監視し、BizTalk Server データベース ファイル ディスク I/O の競合を削減します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-107">Monitor and reduce BizTalk Server database files disk I/O contention.</span></span>|<span data-ttu-id="2afdc-108">-は、事前にデータとトランザクション ログ ファイルを格納するディスクのディスク I/O の使用状況を監視することお勧めします。</span><span class="sxs-lookup"><span data-stu-id="2afdc-108">-   We recommend that you proactively monitor the disk I/O usage for the disks that house the data and transaction log files.</span></span><br /><span data-ttu-id="2afdc-109">-推奨されるデータ ファイルとトランザクション ログ ファイルの問題になるディスク I/O の競合の可能性を低減する専用のドライブに配置するこれらの各します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-109">-   We recommend that the data files and transaction log files for each of these be placed on dedicated drives to reduce the likelihood of disk I/O contention becoming a problem.</span></span><br /><span data-ttu-id="2afdc-110">データベース ファイルとトランザクション ログ ファイルの異なる物理ディスクを分離することと、メッセージ ボックスおよび追跡 (DTA) データベースを分離することによって、ディスク I/O の競合を削減-できます。</span><span class="sxs-lookup"><span data-stu-id="2afdc-110">-   You can reduce disk I/O contention by separating the MessageBox and Tracking (DTA) databases, and by separating the database files and transaction log files on different physical disks.</span></span><br /><br /> <span data-ttu-id="2afdc-111">詳細については、次を参照してください[監視とデータベースの IO 競合の削減。](monitoring-and-reducing-database-i-o-contention.md)</span><span class="sxs-lookup"><span data-stu-id="2afdc-111">For more information, see [Monitoring and Reducing Database IO Contention](monitoring-and-reducing-database-i-o-contention.md)</span></span>|  
|<span data-ttu-id="2afdc-112">SQL Server が正しく調整のディスク パーティション上に構成されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-112">Ensure SQL Server is configured on properly-aligned disk partitions</span></span>|<span data-ttu-id="2afdc-113">ディスク パーティションがさらに、BizTalk Server のパフォーマンスが向上する SQL Server のパフォーマンスが向上する待機時間の大幅な削減になる可能性がありますが正しく調整します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-113">Properly aligned disk partitions could result in significant decrease in latency thereby improving the SQL Server performance, which in turn enhances BizTalk Server performance.</span></span> <span data-ttu-id="2afdc-114">反対に、固定されていないディスク パーティションには、I/O パフォーマンス、SQL Server と BizTalk Server のパフォーマンスが低下できます低下します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-114">On the contrary, nonaligned disk partitions can negatively affect I/O performance, thereby degrading the SQL Server and BizTalk Server performance.</span></span><br /><br /> <span data-ttu-id="2afdc-115">どのように適切に配置されたディスク パーティションの詳細については、パフォーマンスに大きな影響を与えることができます、参照してください[SQL Server のディスク パーティションの配置のベスト プラクティス](http://go.microsoft.com/fwlink/?LinkId=154073)します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-115">For more information about how properly aligned disk partitions can positively affect performance, see [Disk Partition Alignment Best Practices for SQL Server](http://go.microsoft.com/fwlink/?LinkId=154073).</span></span>|  
|<span data-ttu-id="2afdc-116">SQL Server Profiler を使用して監視するイベントを保持します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-116">Keep the events you monitor with the SQL Server Profiler</span></span>|<span data-ttu-id="2afdc-117">これで必要なイベントのみを監視するのにには、SQL Server Profiler を使用します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-117">Use SQL Server Profiler to monitor only the events in which you are interested.</span></span> <span data-ttu-id="2afdc-118">トレースが大きくなりすぎた、イベント データのサブセットのみが収集されるように表示情報に基づいたがフィルター処理できます。</span><span class="sxs-lookup"><span data-stu-id="2afdc-118">If traces become too large, you can filter them based on the information you want, so that only a subset of the event data is collected.</span></span> <span data-ttu-id="2afdc-119">監視するイベントが多すぎると、サーバーと監視プロセスのオーバーヘッドが増え、トレース ファイルやトレース テーブルが非常に大きくなる可能性があります。特に、監視プロセスを長期にわたって実行する場合はこの可能性が高くなります。</span><span class="sxs-lookup"><span data-stu-id="2afdc-119">Monitoring too many events adds overhead to the server and the monitoring process, and can cause the trace file or trace table to grow very large, especially when the monitoring process takes place over a long period of time.</span></span>|  
|<span data-ttu-id="2afdc-120">監視し、DTC ログ ファイルのディスク I/O の競合を削減します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-120">Monitor and reduce DTC log file disk I/O contention.</span></span>|[<span data-ttu-id="2afdc-121">監視と DTC ログ ファイルのディスク IO の競合を軽減</span><span class="sxs-lookup"><span data-stu-id="2afdc-121">Monitoring and Reducing DTC Log File Disk IO Contention</span></span>](monitoring-and-reducing-dtc-log-file-disk-i-o-contention.md)|  
|<span data-ttu-id="2afdc-122">SQL Server データベースの高可用性を提供します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-122">Provide high availability for the SQL Server databases.</span></span>|[<span data-ttu-id="2afdc-123">データベース可用性の計画</span><span class="sxs-lookup"><span data-stu-id="2afdc-123">Planning for Database Availability</span></span>](planning-for-database-availability.md)|  
|<span data-ttu-id="2afdc-124">フェールオーバーのシナリオにアクティブ/アクティブ SQL Server クラスターの構成を確認します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-124">Review active/active SQL Server cluster configuration for failover scenarios.</span></span>|[<span data-ttu-id="2afdc-125">フェールオーバー シナリオに備えた SQL Server クラスター構成のレビューとテスト</span><span class="sxs-lookup"><span data-stu-id="2afdc-125">Reviewing and Testing SQL Server Cluster Configuration for Failover Scenarios</span></span>](reviewing-and-testing-sql-server-cluster-configuration-for-failover-scenarios.md)|  
|<span data-ttu-id="2afdc-126">既定の構成設定を使用します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-126">Use default configuration settings for:</span></span><br /><br /> <span data-ttu-id="2afdc-127">並列処理 (MDOP) の最大次数。</span><span class="sxs-lookup"><span data-stu-id="2afdc-127">-   Max Degree of Parallelism (MDOP).</span></span><br /><span data-ttu-id="2afdc-128">、BizTalk Server メッセージ ボックス データベースで SQL Server の統計。</span><span class="sxs-lookup"><span data-stu-id="2afdc-128">-   SQL Server statistics on the BizTalk Server MessageBox database.</span></span><br /><span data-ttu-id="2afdc-129">-SQL Server データベースのインデックス再構築し、最適化します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-129">-   SQL Server database index rebuilds and defragmentation.</span></span>|[<span data-ttu-id="2afdc-130">変更しない SQL Server の設定</span><span class="sxs-lookup"><span data-stu-id="2afdc-130">SQL Server Settings That Should Not Be Changed</span></span>](sql-server-settings-that-should-not-be-changed.md)|  
|<span data-ttu-id="2afdc-131">SQL Server のすべてのインスタンスの起動時のパラメーターとしてトレース フラグ 1118 (TF1118) を有効にします。</span><span class="sxs-lookup"><span data-stu-id="2afdc-131">Enable trace flag 1118 (TF1118) as a startup parameter for all instances of SQL Server.</span></span>|<span data-ttu-id="2afdc-132">TF1118 を実装する、ほぼすべての単一ページの割り当てを削除することで、SQL Server インスタンス間で競合を軽減できます。</span><span class="sxs-lookup"><span data-stu-id="2afdc-132">Implementing TF1118 helps reduce contention across the SQL Server instances by removing almost all single page allocations.</span></span> <span data-ttu-id="2afdc-133">詳細については「マイクロソフト サポート技術情報の記事[tempdb データベースの同時実行制御の強化](https://support.microsoft.com/en-us/help/328551/concurrency-enhancements-for-the-tempdb-database)します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-133">For more information see Microsoft Knowledge Base article [Concurrency enhancements for the tempdb database](https://support.microsoft.com/en-us/help/328551/concurrency-enhancements-for-the-tempdb-database).</span></span> <br/><br/><span data-ttu-id="2afdc-134">**注:** TF1118 の詳細については、次を参照してください。 [TF1118 誤解](https://www.sqlskills.com/blogs/paul/misconceptions-around-tf-1118/)します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-134">**Note:**  For more information about TF1118 see [Misconceptions around TF1118](https://www.sqlskills.com/blogs/paul/misconceptions-around-tf-1118/).</span></span> <span data-ttu-id="2afdc-135">このリンクにあるコンテンツが Microsoft によって所有されていないと、Microsoft は、コンテンツの精度を保証しないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="2afdc-135">Note that the content at this link is not owned by Microsoft and Microsoft does not guarantee the accuracy of the content.</span></span>|  
|<span data-ttu-id="2afdc-136">Tempdb データベースを BizTalk Server で使用される各 SQL Server インスタンスに等しいサイズの複数のデータ ファイルに分割します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-136">Split the tempdb database into multiple data files of equal size on each SQL Server instance used by BizTalk Server.</span></span>|<span data-ttu-id="2afdc-137">Tempdb に使用されるデータ ファイルと同じサイズのことを確認します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-137">Ensure that the data files used for the tempdb are of equal size.</span></span> <span data-ttu-id="2afdc-138">SQL Server で使用される、比例書き込みアルゴリズムは、データ ファイルのサイズに基づいているために、このことが重要です。</span><span class="sxs-lookup"><span data-stu-id="2afdc-138">This is critical because the proportional fill algorithm used by SQL Server is based on the size of the data files.</span></span> <span data-ttu-id="2afdc-139">比例書き込みアルゴリズムは、最も大きなファイルを複数作成する目的にそぐわなくなりますそれによって、すべてのファイルに割り当てのではなく、グローバル アロケーション マップ (GAM) の割り当ての詳細についてを使用して、サイズの異なるデータ ファイルを作成する場合データ ファイル。</span><span class="sxs-lookup"><span data-stu-id="2afdc-139">If data files are created with unequal sizes, the proportional fill algorithm will use the largest file more for Global Allocation Map (GAM) allocations rather than spreading the allocations between all the files, thereby defeating the purpose of creating multiple data files.</span></span> <span data-ttu-id="2afdc-140">一般的なガイドラインとして、サーバー上の各 CPU の 1 つのデータ ファイルを作成し、必要に応じてアップまたはスケール ダウンのファイルの数を調整します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-140">As a general guideline, create one data file for each CPU on the server and then adjust the number of files up or down as necessary.</span></span> <span data-ttu-id="2afdc-141">デュアル コア CPU が 2 つの Cpu があると見なされることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="2afdc-141">Note that a dual-core CPU is considered to be two CPUs.</span></span> <span data-ttu-id="2afdc-142">いずれの場合も、データ ファイルの数を追加のコア数は、コンピューターに関係なく 8 より大きい必要がありますできません。</span><span class="sxs-lookup"><span data-stu-id="2afdc-142">In any event, the number of data files must not be greater than 8 no matter how many additional cores are available on the computer.</span></span> <span data-ttu-id="2afdc-143">Tempdb ファイルの詳細については、次を参照してください。 [tempdb のパフォーマンスを最適化する](https://docs.microsoft.com/sql/relational-databases/databases/tempdb-database)します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-143">For more information about tempdb files, see [Optimizing tempdb Performance](https://docs.microsoft.com/sql/relational-databases/databases/tempdb-database).</span></span>|  
|<span data-ttu-id="2afdc-144">最小値を設定し、インスタンスをホストする BizTalk Server データベースの最大サーバー メモリ、SQL Server の同じ値にします。</span><span class="sxs-lookup"><span data-stu-id="2afdc-144">Set the Minimum and Maximum Server memory to the same values on the SQL Server instance(s) that host the BizTalk Server databases.</span></span>|<span data-ttu-id="2afdc-145">ホストする SQL Server を実行するコンピューター、BizTalk Server データベースを SQL Server を実行する専用必要があります。</span><span class="sxs-lookup"><span data-stu-id="2afdc-145">The computers running SQL Server that host the BizTalk Server databases should be dedicated to running SQL Server.</span></span> <span data-ttu-id="2afdc-146">ときにコンピューターをホストする SQL Server を実行して、BizTalk Server データベース**は**専用の SQL Server を実行していることをお勧め 'min server memory' と 'max server memory' を指定する各 SQL Server インスタンス上のオプションを設定します。SQL Server に割り当てるメモリの固定量。</span><span class="sxs-lookup"><span data-stu-id="2afdc-146">When the computers running SQL Server that host the BizTalk Server databases **are** dedicated to running SQL Server, we recommend that the 'min server memory' and 'max server memory' options on each SQL Server instance be set to specify the fixed amount of memory to allocate to SQL Server.</span></span> <span data-ttu-id="2afdc-147">この場合、する必要があります設定する 'min server memory' と 'max server memory' に同じ値 (SQL Server を使用する物理メモリの最大量に等しい)。</span><span class="sxs-lookup"><span data-stu-id="2afdc-147">In this case, you should set the 'min server memory' and 'max server memory' to the same value (equal to the maximum amount of physical memory that SQL Server will use).</span></span> <span data-ttu-id="2afdc-148">これが減少オーバーヘッドはそれ以外の場合これらの値を動的に管理する SQL Server によって使用されます。</span><span class="sxs-lookup"><span data-stu-id="2afdc-148">This will reduce overhead that would otherwise be used by SQL Server dynamically managing these values.</span></span> <span data-ttu-id="2afdc-149">SQL Server に割り当てるメモリの固定量を指定する SQL Server を実行している各コンピューターで、次の T-SQL コマンドを実行します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-149">Execute the following T-SQL commands on each computer running SQL Server to specify the fixed amount of memory to allocate to SQL Server:</span></span><br /><br /> <span data-ttu-id="2afdc-150">sp_configure 'Max Server memory (MB)'、(最大サイズ (mb)) sp_configure 'Min Server memory (MB)' (最小サイズ (mb))</span><span class="sxs-lookup"><span data-stu-id="2afdc-150">sp_configure ‘Max Server memory (MB)’,(max size in MB)sp_configure ‘Min Server memory (MB)’,(min size in MB)</span></span><br /><br /> <span data-ttu-id="2afdc-151">SQL Server のメモリの量を設定する前に、Windows Server に必要な合計物理メモリからメモリを差し引くことで、適切なメモリ設定を決定します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-151">Before you set the amount of memory for SQL Server, determine the appropriate memory setting by subtracting the memory required for Windows Server from the total physical memory.</span></span> <span data-ttu-id="2afdc-152">これは、SQL Server に割り当てるメモリの最大量です。</span><span class="sxs-lookup"><span data-stu-id="2afdc-152">This is the maximum amount of memory you can assign to SQL Server.</span></span> <span data-ttu-id="2afdc-153">**注:** 場合は、トピックの説明に従って、BizTalk Server データベースもホストする SQL Server を実行するコンピューターが、エンタープライズ シングル サインオン マスター シークレットをホスト[マスター シークレット サーバーをクラスタ リング](clustering-the-master-secret-server.md)し、この値を調整する必要がありますエンタープライズ シングル サインオン サービスの実行可能にするための十分なメモリがあることを確認します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-153">**Note:**  If the computer(s) running SQL Server that host the BizTalk Server databases also host the Enterprise Single Sign-On master secret as described in the topic [Clustering the Master Secret Server](clustering-the-master-secret-server.md) then you may need to adjust this value to ensure that there is sufficient memory available to run the Enterprise Single Sign-On Service.</span></span>|  
|<span data-ttu-id="2afdc-154">BizTalk 追跡データベースのサイズをアカウントします。</span><span class="sxs-lookup"><span data-stu-id="2afdc-154">Account for the size of BizTalk Tracking database</span></span>|<span data-ttu-id="2afdc-155">-メッセージを BizTalk 追跡 (DTA) データベースのサイズを決定するには、ときにメッセージ コンテキストの平均サイズに追加メッセージのサイズが大幅にある場合メッセージ サイズと比較します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-155">-   When determining the size of messages in the BizTalk Tracking (DTA) database, add the average size of the message context to the message size if it is significant compared to the message size.</span></span><br /><span data-ttu-id="2afdc-156">、BizTalk 追跡データベース内のメッセージのサイズを制限するには昇格したプロパティの数を制限します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-156">-   To limit the size of messages in the BizTalk Tracking database, limit the number of properties that you promote.</span></span><br /><span data-ttu-id="2afdc-157">-オーケストレーション デバッガーのオプションが有効になっている場合は、オーケストレーション内の各図形の状態は、BizTalk 追跡データベースに保存されているアカウントを考慮します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-157">-   If the orchestration debugger option is enabled, take into account that the status of each shape in the orchestration is saved in the BizTalk Tracking database.</span></span>|  
  
<a name="BKMK_Maintain"></a>   
## <a name="performing-sql-server-maintenance-procedures"></a><span data-ttu-id="2afdc-158">SQL Server のメンテナンスの手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-158">Performing SQL Server Maintenance Procedures</span></span>  
  
|<span data-ttu-id="2afdc-159">手順</span><span class="sxs-lookup"><span data-stu-id="2afdc-159">Steps</span></span>|<span data-ttu-id="2afdc-160">リファレンス</span><span class="sxs-lookup"><span data-stu-id="2afdc-160">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="2afdc-161">BizTalk Server データベースの自動拡張設定を定義します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-161">Define auto-growth settings for the BizTalk Server databases.</span></span>|<span data-ttu-id="2afdc-162">データベース自動拡張は、特にメッセージ ボックス データベースおよび追跡データベースの固定数のパーセンテージではなく、メガバイト単位に設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2afdc-162">-   Database auto-growth should be set to a fixed number of megabytes instead of a percentage, especially for the MessageBox and Tracking databases.</span></span> <span data-ttu-id="2afdc-163">BizTalk Server アプリケーションとスループットに応じて、メッセージ ボックス データベースと追跡データベースを非常に大きく取得できます。</span><span class="sxs-lookup"><span data-stu-id="2afdc-163">Depending on your BizTalk Server application and throughput, the MessageBox and Tracking databases can get quite large.</span></span> <span data-ttu-id="2afdc-164">自動拡張がパーセンテージに設定されている場合、自動拡張できます大幅もあります。</span><span class="sxs-lookup"><span data-stu-id="2afdc-164">If auto-growth is set to a percentage, then the auto-growth can be substantial as well.</span></span><br /><span data-ttu-id="2afdc-165">のファイル瞬時初期化は、ファイルの拡張操作のパフォーマンスに与える影響を大幅に削減できます。</span><span class="sxs-lookup"><span data-stu-id="2afdc-165">-   Instant file initialization can greatly reduce the performance impact of a file growth operation.</span></span><br /><span data-ttu-id="2afdc-166">-理想的には、ファイル グループをサポートしているファイルのサイズを事前に割り当てられるし、可能な場合は、静的なサイズに設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2afdc-166">-   Ideally, the size of files supporting the file groups should be pre-allocated, and if possible, set to a static size.</span></span><br /><br /> <span data-ttu-id="2afdc-167">詳細については、次を参照してください。[データベースの自動拡張設定を定義する](defining-auto-growth-settings-for-databases.md)します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-167">For more information, see [Defining Auto-Growth Settings for Databases](defining-auto-growth-settings-for-databases.md).</span></span>|  
|<span data-ttu-id="2afdc-168">BizTalk Server データベースをバックアップします。</span><span class="sxs-lookup"><span data-stu-id="2afdc-168">Back up the BizTalk Server databases</span></span>|<span data-ttu-id="2afdc-169">-は、BizTalk Server データベースのトランザクション ログが無制限で拡大するを防ぐために BizTalk Server のバックアップ ジョブを実行しているお勧めします。</span><span class="sxs-lookup"><span data-stu-id="2afdc-169">-   We recommend running the BizTalk Server backup job to prevent the BizTalk Server database transaction logs from growing in an unbounded fashion.</span></span><br /><span data-ttu-id="2afdc-170">-慎重にプロセスを文書化する必要があり、を定期的に、BizTalk Server 環境全体を復元する必要があります。</span><span class="sxs-lookup"><span data-stu-id="2afdc-170">-   You should restore the entire BizTalk Server environment on a regular basis, and you should carefully document the process.</span></span><br /><span data-ttu-id="2afdc-171">-は、古いバックアップ ファイルをアーカイブすることお勧めします。</span><span class="sxs-lookup"><span data-stu-id="2afdc-171">-   We recommend that you archive old backup files.</span></span><br /><br /> <span data-ttu-id="2afdc-172">詳細については、次を参照してください。[データベースのバックアップ](backing-up-databases.md)します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-172">For more information, see [Backing Up Databases](backing-up-databases.md).</span></span>|  
|<span data-ttu-id="2afdc-173">BizTalk Server は SQL エージェント ジョブを監視します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-173">Monitor the BizTalk Server SQL Agent jobs.</span></span>|<span data-ttu-id="2afdc-174">これらのジョブの状態を監視し、エラーなく実行されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-174">Monitor the health of these jobs, and ensure that they are running without errors.</span></span> <span data-ttu-id="2afdc-175">詳細については、次を参照してください。 [SQL Server エージェント ジョブの監視](monitoring-sql-server-agent-jobs.md)します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-175">For more information, see [Monitoring SQL Server Agent Jobs](monitoring-sql-server-agent-jobs.md).</span></span>|  
|<span data-ttu-id="2afdc-176">BizTalk Server 追跡およびアーカイブを有効にします。</span><span class="sxs-lookup"><span data-stu-id="2afdc-176">Enable BizTalk Server tracking and archiving</span></span>|<span data-ttu-id="2afdc-177">「DTA の消去およびアーカイブ」の SQL エージェント ジョブをアーカイブしてからほど大きく抑える、BizTalk 追跡データベースから古いデータを削除します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-177">The “DTA Purge and Archive” SQL Agent job archives and purges old data from the BizTalk Tracking database, thus keeping it from growing out of control.</span></span> <span data-ttu-id="2afdc-178">これは、正常な BizTalk Server システムに不可欠です。</span><span class="sxs-lookup"><span data-stu-id="2afdc-178">This is essential for a healthy BizTalk Server system.</span></span> <span data-ttu-id="2afdc-179">詳細については、次を参照してください。[消去および追跡データのアーカイブ](purging-and-archiving-tracking-data.md)します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-179">For more information, see [Purging and Archiving Tracking Data](purging-and-archiving-tracking-data.md).</span></span>|  
  
<a name="BKMK_Backup"></a>   
## <a name="backing-up-the-biztalk-server-databases"></a><span data-ttu-id="2afdc-180">BizTalk Server データベースをバックアップします。</span><span class="sxs-lookup"><span data-stu-id="2afdc-180">Backing Up the BizTalk Server Databases</span></span>  
  
|<span data-ttu-id="2afdc-181">手順</span><span class="sxs-lookup"><span data-stu-id="2afdc-181">Steps</span></span>|<span data-ttu-id="2afdc-182">リファレンス</span><span class="sxs-lookup"><span data-stu-id="2afdc-182">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="2afdc-183">バックアップ BizTalk Server は SQL エージェント ジョブが構成されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-183">Verify that the Backup BizTalk Server SQL Agent job is configured.</span></span>|<span data-ttu-id="2afdc-184">参照してください[バックアップ BizTalk Server ジョブを構成します。](../core/how-to-configure-the-backup-biztalk-server-job.md)</span><span class="sxs-lookup"><span data-stu-id="2afdc-184">See [Configure the Backup BizTalk Server Job](../core/how-to-configure-the-backup-biztalk-server-job.md)</span></span>|  
|<span data-ttu-id="2afdc-185">指定された日数より古いバックアップ ファイルを削除するバックアップ BizTalk Server は SQL エージェント ジョブを構成、@DaysToKeep変数。</span><span class="sxs-lookup"><span data-stu-id="2afdc-185">Configure the Backup BizTalk Server SQL Agent job to delete backup files that are older than the number of days specified by the @DaysToKeep variable.</span></span> <span data-ttu-id="2afdc-186">バックアップ ファイルが削除されない場合ディスク容量が制限に関連する問題になり、バックアップ ファイルが含まれているディスクがいっぱいにする時間の経過と共に unbounded できます拡張します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-186">If the backup files are not deleted they can grow unbounded over time which can fill up the disk(s) that contain the backup files and cause problems that relate to limited disk space.</span></span>|<span data-ttu-id="2afdc-187">参照してください[バックアップ BizTalk Server ジョブを構成します。](../core/how-to-configure-the-backup-biztalk-server-job.md)</span><span class="sxs-lookup"><span data-stu-id="2afdc-187">See [Configure the Backup BizTalk Server Job](../core/how-to-configure-the-backup-biztalk-server-job.md)</span></span>|  
|<span data-ttu-id="2afdc-188">バックアップ BizTalk Server は SQL エージェント ジョブが有効で実行されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-188">Verify that the Backup BizTalk Server SQL Agent job is enabled and running.</span></span>|[<span data-ttu-id="2afdc-189">SQL Server エージェント ジョブの監視</span><span class="sxs-lookup"><span data-stu-id="2afdc-189">Monitoring SQL Server Agent Jobs</span></span>](monitoring-sql-server-agent-jobs.md)|  
  
<a name="BKMK_Disaster"></a>   
## <a name="using-sql-server-log-shipping-for-disaster-recovery"></a><span data-ttu-id="2afdc-190">SQL Server ログ配布のディザスター リカバリーを使用します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-190">Using SQL Server Log Shipping For Disaster Recovery</span></span>  
  
|<span data-ttu-id="2afdc-191">手順</span><span class="sxs-lookup"><span data-stu-id="2afdc-191">Steps</span></span>|<span data-ttu-id="2afdc-192">リファレンス</span><span class="sxs-lookup"><span data-stu-id="2afdc-192">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="2afdc-193">ディザスター リカバリー server に運用環境の負荷を処理する能力があることを確認します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-193">Verify that the disaster recovery servers have the capacity to handle production load.</span></span>|<span data-ttu-id="2afdc-194">参照してください[BizTalk Server ログ配布のディザスター リカバリーを使用します。](using-biztalk-server-log-shipping-for-disaster-recovery.md)</span><span class="sxs-lookup"><span data-stu-id="2afdc-194">See [Using BizTalk Server Log Shipping for Disaster Recovery](using-biztalk-server-log-shipping-for-disaster-recovery.md)</span></span>|  
|<span data-ttu-id="2afdc-195">ディザスター リカバリ ルーチンの詳細がも記載されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-195">Ensure that the specifics of your disaster recovery routine are well documented.</span></span>|<span data-ttu-id="2afdc-196">参照してください[BizTalk Server ログ配布のディザスター リカバリーを使用します。](using-biztalk-server-log-shipping-for-disaster-recovery.md)</span><span class="sxs-lookup"><span data-stu-id="2afdc-196">See [Using BizTalk Server Log Shipping for Disaster Recovery](using-biztalk-server-log-shipping-for-disaster-recovery.md)</span></span>|  
|<span data-ttu-id="2afdc-197">ディザスター リカバリー サイトに通常のテスト、実際にフェールオーバーの一環として、新しい BizTalk として特にアプリケーションが配置実稼働環境でします。</span><span class="sxs-lookup"><span data-stu-id="2afdc-197">As part of regular testing, practice failover to the disaster recovery site, especially as new BizTalk applications are put in production.</span></span>|<span data-ttu-id="2afdc-198">参照してください[BizTalk Server ログ配布のディザスター リカバリーを使用します。](using-biztalk-server-log-shipping-for-disaster-recovery.md)</span><span class="sxs-lookup"><span data-stu-id="2afdc-198">See [Using BizTalk Server Log Shipping for Disaster Recovery](using-biztalk-server-log-shipping-for-disaster-recovery.md)</span></span>|  
  
<a name="BKMK_Jobs"></a>   
## <a name="monitoring-biztalk-server-sql-agent-jobs"></a><span data-ttu-id="2afdc-199">BizTalk Server SQL エージェント ジョブの監視</span><span class="sxs-lookup"><span data-stu-id="2afdc-199">Monitoring BizTalk Server SQL Agent Jobs</span></span>  
  
|<span data-ttu-id="2afdc-200">手順</span><span class="sxs-lookup"><span data-stu-id="2afdc-200">Steps</span></span>|<span data-ttu-id="2afdc-201">リファレンス</span><span class="sxs-lookup"><span data-stu-id="2afdc-201">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="2afdc-202">SQL Server エージェント サービスが実行されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-202">Verify that the SQL Server Agent service is running.</span></span>|<span data-ttu-id="2afdc-203">参照してください[SQL Server エージェント ジョブの監視](monitoring-sql-server-agent-jobs.md)</span><span class="sxs-lookup"><span data-stu-id="2afdc-203">See [Monitoring SQL Server Agent Jobs](monitoring-sql-server-agent-jobs.md)</span></span>|  
|<span data-ttu-id="2afdc-204">BizTalk Server によってインストールされる SQL Server エージェント ジョブが実行されていて正常に確認します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-204">Verify that the SQL Server Agent jobs installed by BizTalk Server are enabled and running successfully.</span></span>|<span data-ttu-id="2afdc-205">参照してください[SQL Server エージェント ジョブの監視](monitoring-sql-server-agent-jobs.md)</span><span class="sxs-lookup"><span data-stu-id="2afdc-205">See [Monitoring SQL Server Agent Jobs](monitoring-sql-server-agent-jobs.md)</span></span>|  
|<span data-ttu-id="2afdc-206">適切なタイミングで、BizTalk Server の SQL エージェント ジョブが完了することを確認します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-206">Verify that the BizTalk Server SQL Agent jobs are completing in a timely manner.</span></span>|<span data-ttu-id="2afdc-207">参照してください[SQL Server エージェント ジョブの監視](monitoring-sql-server-agent-jobs.md)</span><span class="sxs-lookup"><span data-stu-id="2afdc-207">See [Monitoring SQL Server Agent Jobs](monitoring-sql-server-agent-jobs.md)</span></span>|  
  
<a name="BKMK_Purge"></a>   
## <a name="purging-and-archiving-tracking-data"></a><span data-ttu-id="2afdc-208">削除とアーカイブ データの追跡</span><span class="sxs-lookup"><span data-stu-id="2afdc-208">Purging and Archiving Tracking Data</span></span>  
  
|<span data-ttu-id="2afdc-209">手順</span><span class="sxs-lookup"><span data-stu-id="2afdc-209">Steps</span></span>|<span data-ttu-id="2afdc-210">リファレンス</span><span class="sxs-lookup"><span data-stu-id="2afdc-210">Reference</span></span>|  
|-----------|---------------|  
|<span data-ttu-id="2afdc-211">SQL エージェント ジョブ「DTA の消去およびアーカイブ」が適切に構成された、有効化、および正常に完了することを確認します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-211">Ensure that the SQL Agent job "DTA Purge and Archive" is properly configured, enabled, and successfully completing.</span></span>|<span data-ttu-id="2afdc-212">参照してください[構成 DTA Purge and Archive ジョブ](../core/how-to-configure-the-dta-purge-and-archive-job.md)します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-212">See [Configure the DTA Purge and Archive Job](../core/how-to-configure-the-dta-purge-and-archive-job.md).</span></span>|  
|<span data-ttu-id="2afdc-213">ジョブが追跡データを受信した追跡データが生成された高速消去できることを確認します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-213">Ensure that the job is able to purge the tracking data as fast as the incoming tracking data is generated.</span></span>|<span data-ttu-id="2afdc-214">参照してください[維持可能な最大の追跡スループットの測定](../core/measuring-maximum-sustainable-tracking-throughput.md)</span><span class="sxs-lookup"><span data-stu-id="2afdc-214">See [Measuring Maximum Sustainable Tracking Throughput](../core/measuring-maximum-sustainable-tracking-throughput.md)</span></span>|  
|<span data-ttu-id="2afdc-215">論理削除と時間の最適な長さのデータを保持することを確認する物理削除パラメーターを確認します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-215">Review the soft purge and hard purge parameters to ensure you are keeping data for the optimal length of time.</span></span>|<span data-ttu-id="2afdc-216">参照してください[アーカイブおよび BizTalk 追跡データベースの削除](../core/archiving-and-purging-the-biztalk-tracking-database.md)します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-216">See [Archiving and Purging the BizTalk Tracking Database](../core/archiving-and-purging-the-biztalk-tracking-database.md).</span></span>|  
|<span data-ttu-id="2afdc-217">古いデータを消去しないだけの場合必要があります、最初の変更を保存する SQL エージェント ジョブ"dtasp_PurgeTrackingDatabase"ストアド プロシージャを呼び出す</span><span class="sxs-lookup"><span data-stu-id="2afdc-217">If you only need to purge the old data and do not need to archive it first, change the SQL Agent job to call the stored procedure "dtasp_PurgeTrackingDatabase."</span></span>|<span data-ttu-id="2afdc-218">参照してください[BizTalk 追跡データベースからデータを削除](../core/how-to-purge-data-from-the-biztalk-tracking-database.md)します。</span><span class="sxs-lookup"><span data-stu-id="2afdc-218">See [Purge Data from the BizTalk Tracking Database](../core/how-to-purge-data-from-the-biztalk-tracking-database.md).</span></span>|  
  
## <a name="next"></a><span data-ttu-id="2afdc-219">Next</span><span class="sxs-lookup"><span data-stu-id="2afdc-219">Next</span></span>
  
-   [<span data-ttu-id="2afdc-220">変更しない SQL Server の設定</span><span class="sxs-lookup"><span data-stu-id="2afdc-220">SQL Server Settings That Should Not Be Changed</span></span>](sql-server-settings-that-should-not-be-changed.md)  
  
-   [<span data-ttu-id="2afdc-221">監視とデータベースの IO の競合を軽減</span><span class="sxs-lookup"><span data-stu-id="2afdc-221">Monitoring and Reducing Database IO Contention</span></span>](monitoring-and-reducing-database-i-o-contention.md)  
  
-   [<span data-ttu-id="2afdc-222">フェールオーバー シナリオに備えた SQL Server クラスター構成のレビューとテスト</span><span class="sxs-lookup"><span data-stu-id="2afdc-222">Reviewing and Testing SQL Server Cluster Configuration for Failover Scenarios</span></span>](reviewing-and-testing-sql-server-cluster-configuration-for-failover-scenarios.md)  
  
-   [<span data-ttu-id="2afdc-223">データベースの自動拡張設定の定義</span><span class="sxs-lookup"><span data-stu-id="2afdc-223">Defining Auto-Growth Settings for Databases</span></span>](defining-auto-growth-settings-for-databases.md)  
  
-   [<span data-ttu-id="2afdc-224">データベースのバックアップ</span><span class="sxs-lookup"><span data-stu-id="2afdc-224">Backing Up Databases</span></span>](backing-up-databases.md)  
  
-   [<span data-ttu-id="2afdc-225">ディザスター リカバリーのための BizTalk Server ログ配布の使用</span><span class="sxs-lookup"><span data-stu-id="2afdc-225">Using BizTalk Server Log Shipping for Disaster Recovery</span></span>](using-biztalk-server-log-shipping-for-disaster-recovery.md)  
  
-   [<span data-ttu-id="2afdc-226">SQL Server エージェント ジョブの監視</span><span class="sxs-lookup"><span data-stu-id="2afdc-226">Monitoring SQL Server Agent Jobs</span></span>](monitoring-sql-server-agent-jobs.md)  
  
-   [<span data-ttu-id="2afdc-227">追跡データの削除とアーカイブ</span><span class="sxs-lookup"><span data-stu-id="2afdc-227">Purging and Archiving Tracking Data</span></span>](purging-and-archiving-tracking-data.md)