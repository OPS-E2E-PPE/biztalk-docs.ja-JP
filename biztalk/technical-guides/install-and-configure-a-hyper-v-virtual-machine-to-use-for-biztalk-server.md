---
title: インストールして、BizTalk Server で使用するため、HYPER-V 仮想マシンの構成 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 86add392-3cde-432d-95d6-c81d68716537
caps.latest.revision: 18
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 2c961b30fab2787426fe2f944b8721e5ddd23896
ms.sourcegitcommit: c3070a7a3f332857357f056dc632829b43869c17
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/14/2018
ms.locfileid: "51630415"
---
# <a name="installing-and-configuring-a-hyper-v-virtual-machine-for-use-with-biztalk-server"></a><span data-ttu-id="df7ce-102">インストールして、BizTalk Server で使用するため、HYPER-V 仮想マシンの構成</span><span class="sxs-lookup"><span data-stu-id="df7ce-102">Installing and Configuring a Hyper-V Virtual Machine for use with BizTalk Server</span></span>
<span data-ttu-id="df7ce-103">このトピックをインストールして、BizTalk Server と HYPER-V 仮想マシンのインストールと構成について推奨事項を BizTalk Server をインストールするための推奨事項を含む、HYPER-V 環境の構成の推奨事項を提供します。HYPER-V 仮想マシン。</span><span class="sxs-lookup"><span data-stu-id="df7ce-103">This topic provides recommendations for installing and configuring BizTalk Server in a Hyper-V environment, including recommendations for installation and configuration of the Hyper-V virtual machine and recommendations for installing BizTalk Server on a Hyper-V virtual machine.</span></span>  

## <a name="installing-and-configuring-hyper-v"></a><span data-ttu-id="df7ce-104">インストールと HYPER-V の構成</span><span class="sxs-lookup"><span data-stu-id="df7ce-104">Installing and Configuring Hyper-V</span></span>  
 <span data-ttu-id="df7ce-105">HYPER-V をインストールする前に、次を参照してください。 [Windows Server 2008 R2 で Hyper-v の新](http://go.microsoft.com/fwlink/?LinkID=202427)します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-105">Before installing Hyper-V, see [What's New in Hyper-V in Windows Server 2008 R2](http://go.microsoft.com/fwlink/?LinkID=202427).</span></span> <span data-ttu-id="df7ce-106">「Microsoft HYPER-V Server 2008 R2 入門」ガイド インストールして構成する方法の詳細については、 [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] HYPER-V。</span><span class="sxs-lookup"><span data-stu-id="df7ce-106">The “Microsoft Hyper-V Server 2008 R2 Getting Started” guide provides details about how to install and configure [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] Hyper-V.</span></span> <span data-ttu-id="df7ce-107">このガイドは[ http://go.microsoft.com/fwlink/?LinkID=202431](http://go.microsoft.com/fwlink/?LinkID=202431)します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-107">The guide is available at [http://go.microsoft.com/fwlink/?LinkID=202431](http://go.microsoft.com/fwlink/?LinkID=202431).</span></span>  

 <span data-ttu-id="df7ce-108">「Windows Server 2008 R2 のパフォーマンス チューニング ガイドライン」のドキュメントの調整に関する詳細を提供する[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]具体的 Hyper-v 重点を置いてセクションにはが含まれています。</span><span class="sxs-lookup"><span data-stu-id="df7ce-108">“The Performance Tuning Guidelines for Windows Server 2008 R2” document provides details on tuning [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] and includes a section specifically focused on Hyper-V.</span></span> <span data-ttu-id="df7ce-109">ドキュメントについては、「 [ http://go.microsoft.com/fwlink/?LinkID=202087](http://go.microsoft.com/fwlink/?LinkID=202087)します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-109">The document is available at [http://go.microsoft.com/fwlink/?LinkID=202087](http://go.microsoft.com/fwlink/?LinkID=202087).</span></span>  

### <a name="hyper-v-platform-prerequisites"></a><span data-ttu-id="df7ce-110">HYPER-V プラットフォームの前提条件</span><span class="sxs-lookup"><span data-stu-id="df7ce-110">Hyper-V Platform Prerequisites</span></span>  
 <span data-ttu-id="df7ce-111">HYPER-V は 64 ビット版とのすべてのエディションの使用可能なサーバーの役割[!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)]は 64 ビットのみです。</span><span class="sxs-lookup"><span data-stu-id="df7ce-111">Hyper-V is a server role available for 64-bit and all editions of  [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] are 64-bit only.</span></span> <span data-ttu-id="df7ce-112">また、物理ハードウェアでは、ハードウェア支援による仮想化をサポートする必要があります。</span><span class="sxs-lookup"><span data-stu-id="df7ce-112">Additionally, the physical hardware must support hardware assisted virtualization.</span></span> <span data-ttu-id="df7ce-113">つまり、プロセッサは Intel Virtualization Technology (Intel VT) または AMD Virtualization (AMD-V) テクノロジと互換性がある、システム BIOS でデータ実行防止 (DEP) をサポートする必要があります、DEP を有効にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="df7ce-113">This means the processor must be compatible with Intel Virtualization Technology (Intel VT) or AMD Virtualization (AMD-V) technology, the system BIOS must support Data Execution Prevention (DEP), and DEP must be enabled.</span></span> <span data-ttu-id="df7ce-114">具体的には、Intel XD ビットが有効にする必要があります (execute disable bit) または AMD NX ビット (no execute bit)。</span><span class="sxs-lookup"><span data-stu-id="df7ce-114">Specifically, you must enable the Intel XD bit (execute disable bit) or AMD NX bit (no execute bit).</span></span>  

> [!NOTE]  
>  <span data-ttu-id="df7ce-115">システム BIOS でこれらのオプションを有効にした後、コンピューターの電源を完全に有効にして、これらの設定が適用されるようにするコンピューターを再起動します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-115">After enabling these options in the system BIOS, turn off the computer completely and then restart the computer to ensure that these settings are applied.</span></span>  

#### <a name="determining-hardware-requirements"></a><span data-ttu-id="df7ce-116">ハードウェア要件の決定</span><span class="sxs-lookup"><span data-stu-id="df7ce-116">Determining Hardware Requirements</span></span>  
 <span data-ttu-id="df7ce-117">サーバーの統合の確認要求のため、HYPER-V サーバーは、CPU とメモリを消費する傾向し、比較可能なコンピューティングの読み込みを伴う物理サーバーよりも大きい値のディスク I/O 帯域幅が必要です。</span><span class="sxs-lookup"><span data-stu-id="df7ce-117">Due to the demands of server consolidation, Hyper-V servers tend to consume more CPU and memory, and require greater disk I/O bandwidth than physical servers with comparable computing loads.</span></span> <span data-ttu-id="df7ce-118">期待を満たす環境をデプロイするには、サーバーの正確なハードウェア要件を決定するのには、次の要因を検討してください。</span><span class="sxs-lookup"><span data-stu-id="df7ce-118">In order to deploy an environment that will meet expectations, consider the factors below to determine the exact hardware requirements of your server.</span></span>  

##### <a name="storage-configuration-options"></a><span data-ttu-id="df7ce-119">記憶域構成オプション</span><span class="sxs-lookup"><span data-stu-id="df7ce-119">Storage Configuration Options</span></span>  
 <span data-ttu-id="df7ce-120">記憶域ハードウェアは、十分な I/O 帯域幅、ストレージ容量を開催を予定している仮想マシンの現在および将来のニーズを満たすためを提供する必要があります。</span><span class="sxs-lookup"><span data-stu-id="df7ce-120">The storage hardware should provide sufficient I/O bandwidth and storage capacity to meet the current and future needs of the virtual machines that you plan to host.</span></span> <span data-ttu-id="df7ce-121">容量の使用状況と、パフォーマンスの間、HYPER-V の記憶域構成の選択はトレードオフが行われます。</span><span class="sxs-lookup"><span data-stu-id="df7ce-121">There is a trade-off when choosing the storage configuration for Hyper-V between capacity usage and the performance it can provide.</span></span>  

 <span data-ttu-id="df7ce-122">記憶域の構成を計画するときは、プロビジョニングする環境の要件を検討してください。</span><span class="sxs-lookup"><span data-stu-id="df7ce-122">When planning storage configuration, consider the requirements of the environment you are provisioning.</span></span> <span data-ttu-id="df7ce-123">運用環境、運用前、および開発環境の要件が大幅に異なる場合があります。</span><span class="sxs-lookup"><span data-stu-id="df7ce-123">The requirements for production, pre-production, and development environments may differ considerably.</span></span>  

 <span data-ttu-id="df7ce-124">運用環境の HYPER-V での BizTalk Server 環境を展開する場合は、パフォーマンスが、重要な要件になります。</span><span class="sxs-lookup"><span data-stu-id="df7ce-124">If you are deploying a production BizTalk Server environment on Hyper-V, performance will be a key requirement.</span></span> <span data-ttu-id="df7ce-125">ディスクがビジー状態の実稼働システムで I/O の競合を避けるためには、ホストとゲストの両方のオペレーティング システム上の integration services のインストールし、代理の SCSI コント ローラーとデータ ボリュームのディスクを構成します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-125">To avoid disk I/O contention on busy production systems, install integration services on both the host and guest operating system and configure disks for data volumes with the synthetic SCSI controller.</span></span> <span data-ttu-id="df7ce-126">複数のデータ ドライブにまたがる高負荷の高いストレージ I/O ワークロードでは、全体的なパフォーマンスを向上させる統合独立した SCSI コント ローラーに各 VHD をアタッチする必要があります。</span><span class="sxs-lookup"><span data-stu-id="df7ce-126">For highly intensive storage I/O workloads that span multiple data drives, each VHD should be attached to a separate synthetic SCSI controller for better overall performance.</span></span> <span data-ttu-id="df7ce-127">さらに、各 VHD は、個別の物理ディスクに格納する必要があります。</span><span class="sxs-lookup"><span data-stu-id="df7ce-127">In addition, each VHD should be stored on separate physical disks.</span></span> <span data-ttu-id="df7ce-128">合成の SCSI コント ローラーでボリュームをデータ ディスクの構成の詳細については、トピックの「ディスクのパフォーマンスを最適化する」セクションを参照してください[チェックリスト: hyper-v のパフォーマンスの最適化](~/technical-guides/checklist-optimizing-performance-on-hyper-v.md)します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-128">For more information about configuring disks for data volumes with the synthetic SCSI controller see the “Optimize Disk Performance” section of the topic [Checklist: Optimizing Performance on Hyper-V](~/technical-guides/checklist-optimizing-performance-on-hyper-v.md).</span></span>  

 <span data-ttu-id="df7ce-129">通常、メインの優先順位にする傾向があるリソース使用率を最大化するため、開発環境には厳しいパフォーマンス要件はありません。</span><span class="sxs-lookup"><span data-stu-id="df7ce-129">Typically, development environments do not have stringent performance requirements since maximizing resource utilization tends to be the main priority.</span></span> <span data-ttu-id="df7ce-130">開発環境は 1 つの物理ドライブ上の複数の VHD ファイルをホストするときに指定のパフォーマンスが通常は許容します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-130">For development environments the performance provided when hosting multiple VHD files on a single physical drive is generally acceptable.</span></span>  

 <span data-ttu-id="df7ce-131">HYPER-V には、さまざまな種類のストレージ ディスクのオプションがサポートしています。</span><span class="sxs-lookup"><span data-stu-id="df7ce-131">Hyper-V supports several different types of storage disk options.</span></span> <span data-ttu-id="df7ce-132">マシンの各ストレージ オプション、IDE または SCSI コント ローラー経由で接続することができます。</span><span class="sxs-lookup"><span data-stu-id="df7ce-132">Each of the storage options can be attached via an IDE or SCSI controller to the machine.</span></span> <span data-ttu-id="df7ce-133">SCSI コント ローラーを使用して、IDE コント ローラー上の潜在的な利点は、ことのみで正しく動作するオペレーティング システムの統合コンポーネントの正しいバージョンがゲスト仮想マシンにインストールされている場合です。</span><span class="sxs-lookup"><span data-stu-id="df7ce-133">A potential benefit of using the SCSI controller over the IDE controller is that it will only work correctly if the correct versions of the operating system integration components have been installed on the guest virtual machine.</span></span> <span data-ttu-id="df7ce-134">これは、ゲスト オペレーティング システムに正しいオペレーティング システムの統合コンポーネントがインストールされていることを確認する簡単な方法です。</span><span class="sxs-lookup"><span data-stu-id="df7ce-134">This is a straightforward method for ensuring that correct operating system integration components are installed on the guest operating system.</span></span>  

> [!NOTE]  
>  <span data-ttu-id="df7ce-135">Microsoft 仮想化テクノロジの以前のバージョンとは異なり、仮想 IDE コント ローラーまたは仮想 SCSI コント ローラーを使用して仮想ハード_ディスクにアクセスするときのパフォーマンスの違いはありません。</span><span class="sxs-lookup"><span data-stu-id="df7ce-135">Unlike previous versions of Microsoft virtualization technology, there is no performance difference between using a virtual IDE controller or a virtual SCSI controller when accessing virtual hard disks.</span></span>  

 <span data-ttu-id="df7ce-136">集中型の読み取り/書き込みアクティビティのホストなど[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]固定仮想ハード ドライブ (VHD) のディスクのパフォーマンスの利点のデータベース、パススルー ディスクのオプションを提供します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-136">For intensive read-write activities, such as hosting [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] databases, the passthrough disk option provides incremental performance advantages over fixed virtual hard drive (VHD) disks.</span></span> <span data-ttu-id="df7ce-137">パススルー オプションにより、物理ディスクに直接アクセスする仮想マシンと、ルート パーティションで NTFS ファイル システムをバイパスするが、仮想ディスクを仮想マシンのスナップショットとクラスタ リングなどの特定の機能をサポートしていませんサポート。</span><span class="sxs-lookup"><span data-stu-id="df7ce-137">The passthrough option permits the virtual machine to have direct access to the physical disk and bypasses the NTFS file system in the root partition but does not support certain functionality of virtual disks, such as Virtual machine snapshots and clustering support.</span></span> <span data-ttu-id="df7ce-138">したがってマージナル パフォーマンス上の利点が相殺機能不足しているために、BizTalk または SQL Server 環境でパススルー ディスクの機能の使用は推奨されません。</span><span class="sxs-lookup"><span data-stu-id="df7ce-138">Therefore use of the passthrough disk feature is not recommended in a BizTalk or SQL Server environment because the marginal performance benefits are more than offset by the missing functionality.</span></span>  

 <span data-ttu-id="df7ce-139">次の表は、長所と短所の使用可能な HYPER-V ストレージのオプションをまとめたものです。 します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-139">The following table summarizes the advantages and disadvantages of available Hyper-V storage options:.</span></span>  


|    <span data-ttu-id="df7ce-140">**HYPER-V の記憶域の種類**</span><span class="sxs-lookup"><span data-stu-id="df7ce-140">**Hyper-V Storage Type**</span></span>     |  <span data-ttu-id="df7ce-141">**プロフェッショナル**</span><span class="sxs-lookup"><span data-stu-id="df7ce-141">**Pros**</span></span>  |  <span data-ttu-id="df7ce-142">**短所**</span><span class="sxs-lookup"><span data-stu-id="df7ce-142">**Cons**</span></span>  |  <span data-ttu-id="df7ce-143">**BizTalk Server に関する考慮事項**</span><span class="sxs-lookup"><span data-stu-id="df7ce-143">**Considerations for BizTalk Server**</span></span>  |
|---|---|----|---|
|      <span data-ttu-id="df7ce-144">**容量固定のディスク**</span><span class="sxs-lookup"><span data-stu-id="df7ce-144">**Fixed size disks**</span></span>       | <span data-ttu-id="df7ce-145">物理ハード ドライブに作成されたとき、VHD ファイルがその最大サイズで初期化されるため、容量可変の VHD より良い成績を実行します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-145">Performs better than a dynamic VHD because the VHD file is initialized at its maximum possible size when it is created on the physical hard drive.</span></span><br /><br /> <span data-ttu-id="df7ce-146">これにより断片化小さい可能性があり、そのためが 1 つの I/O が複数の I/o に分割するシナリオを軽減できます。</span><span class="sxs-lookup"><span data-stu-id="df7ce-146">This makes fragmentation less likely and, therefore, mitigates scenarios where a single I/O is split into multiple I/Os.</span></span> <span data-ttu-id="df7ce-147">読み取りと書き込みブロックのマッピングを検索する必要はないため、VHD の種類の最も低い CPU オーバーヘッドがあります。</span><span class="sxs-lookup"><span data-stu-id="df7ce-147">This has the lowest CPU overhead of the VHD types because reads and writes do not need to look up the mapping of the block.</span></span> |  <span data-ttu-id="df7ce-148">完全なディスク領域の初期量の割り当てが必要です。</span><span class="sxs-lookup"><span data-stu-id="df7ce-148">Requires allocation of the full amount of disk space up-front.</span></span>  |  <span data-ttu-id="df7ce-149">オペレーティング システム ボリュームをで使用する[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]と[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-149">Use for operating system volumes on [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)].</span></span> <span data-ttu-id="df7ce-150">**重要:** HYPER-V ゲスト パーティションの起動ディスクは、IDE コント ローラーに接続する必要があります。</span><span class="sxs-lookup"><span data-stu-id="df7ce-150">**Important:**  The startup disk of a Hyper-V guest partition must be attached to an IDE controller.</span></span>  |
| <span data-ttu-id="df7ce-151">**可変のディスク**</span><span class="sxs-lookup"><span data-stu-id="df7ce-151">**Dynamically expanding disks**</span></span> |  <span data-ttu-id="df7ce-152">VHD ファイルのサイズは、仮想マシン自体に多くのデータが格納されている、ディスクを作成するときに指定されたサイズに増加します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-152">The size of the VHD file increases to the size specified when creating the disk, as more data is stored on the virtual machine itself.</span></span> <span data-ttu-id="df7ce-153">これには、使用可能記憶域の最も効率的な使用が対応しています。</span><span class="sxs-lookup"><span data-stu-id="df7ce-153">This accommodates the most efficient use of available storage.</span></span> | <span data-ttu-id="df7ce-154">固定サイズの VHD とは実行されません。</span><span class="sxs-lookup"><span data-stu-id="df7ce-154">Does not perform as well as a fixed size VHD.</span></span> <span data-ttu-id="df7ce-155">これは、ディスク内のブロックがゼロのブロックとして起動、VHD ファイルにある実際の領域に基づいていないためです。</span><span class="sxs-lookup"><span data-stu-id="df7ce-155">This is because the blocks in the disk start as zeroed blocks but are not backed by any actual space in the VHD file.</span></span> <span data-ttu-id="df7ce-156">このようなブロックの戻り値からゼロのブロックを読み取ります。</span><span class="sxs-lookup"><span data-stu-id="df7ce-156">Reads from such blocks return a block of zeros.</span></span> <span data-ttu-id="df7ce-157">ブロックが最初に書き込まれ、仮想化スタックする必要がありますブロックに VHD ファイル内の領域を割り当てるし、対応するメタデータを更新します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-157">When a block is first written to, the virtualization stack must allocate space within the VHD file for the block and then update the corresponding metadata.</span></span> <span data-ttu-id="df7ce-158">これだけでなく既存のブロックが参照されるたび、ブロックのマッピングする必要がありますで検索メタデータ。</span><span class="sxs-lookup"><span data-stu-id="df7ce-158">In addition to this every time an existing block is referenced the block mapping must be looked up in the metadata.</span></span> <span data-ttu-id="df7ce-159">読み取りの数が向上し、結果、書き込みアクティビティは、CPU 使用率を増加します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-159">This increases the number of read and write activities which in turn causes increased CPU utilization.</span></span><br /><br /> <span data-ttu-id="df7ce-160">動的な増加では、サーバーの管理者が記憶域の要件が増加のための十分なディスク記憶域があることを確認するディスク容量を監視することも必要です。</span><span class="sxs-lookup"><span data-stu-id="df7ce-160">The dynamic growth also requires that the server administrator monitor disk capacity to ensure that there is sufficient disk storage as the storage requirements increase.</span></span> |  <span data-ttu-id="df7ce-161">固定サイズの VHD とは実行されません。</span><span class="sxs-lookup"><span data-stu-id="df7ce-161">Does not perform as well as a fixed size VHD.</span></span><br /><br /> <span data-ttu-id="df7ce-162">パフォーマンスが重要でない場合は、たとえば、開発環境でことが考えられますオペレーティング システムのハード ドライブの最適なオプションです。</span><span class="sxs-lookup"><span data-stu-id="df7ce-162">If performance is not a concern, for instance in a development environment, this may be a suitable option for the operating system hard drives.</span></span><br /><br /> <span data-ttu-id="df7ce-163">ブロックのマッピングの参照のための追加の CPU オーバーヘッドを発生します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-163">Causes additional CPU overhead due to block mapping lookup.</span></span>   |
|     <span data-ttu-id="df7ce-164">**差分ディスク**</span><span class="sxs-lookup"><span data-stu-id="df7ce-164">**Differencing disks**</span></span>      | <span data-ttu-id="df7ce-165">これは、差分ディスクが、ベース VHD とベース VHD の基準としたすべての変更を格納する場所、親子構成は変わりません。</span><span class="sxs-lookup"><span data-stu-id="df7ce-165">This a parent-child configuration where the differencing disk stores all changes relative to a base VHD and the base VHD remains static.</span></span> <span data-ttu-id="df7ce-166">したがって、親から異なるブロックだけは差分 VHD の子に格納される必要があります。</span><span class="sxs-lookup"><span data-stu-id="df7ce-166">Therefore only the blocks which are different from the parent need to be stored in the child differencing VHD.</span></span>  |  <span data-ttu-id="df7ce-167">読み取り/書き込みは、固定/動的な親 VHD と差分ディスクにアクセスする必要があるために、パフォーマンスが低下することができます。</span><span class="sxs-lookup"><span data-stu-id="df7ce-167">Performance can degrade because read/writes need to access the fixed/dynamic parent VHD as well as the differencing disk.</span></span> <span data-ttu-id="df7ce-168">これは、CPU 使用率とディスク I/O のオーバーヘッドが増加します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-168">This increases CPU utilization and disk I/O overhead.</span></span>  |  <span data-ttu-id="df7ce-169">大量のマシン固有の設定は BizTalk Server のインストールに必要なと子 VHD ファイルはこのディスク構成を使用する利点を最小限に抑えるは大幅になることがあります。</span><span class="sxs-lookup"><span data-stu-id="df7ce-169">A large amount of machine specific configuration is required for BizTalk Server installations and child VHD files may grow substantially which would minimize the benefits of using this disk configuration.</span></span> <span data-ttu-id="df7ce-170">このシナリオでの複数の VHD からの読み取りは、追加の CPU とディスク I/O オーバーヘッドが発生します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-170">Reading from multiple VHD’s in this scenario incurs additional CPU and disk I/O overhead.</span></span>  |
|      <span data-ttu-id="df7ce-171">**パススルー ディスク**</span><span class="sxs-lookup"><span data-stu-id="df7ce-171">**Passthrough disks**</span></span>      | <span data-ttu-id="df7ce-172">これらは、物理ディスクに設定されている*オフライン*ルート パーティションと物理ディスクに排他読み取り/書き込みアクセスがある、HYPER-V を有効にします。</span><span class="sxs-lookup"><span data-stu-id="df7ce-172">These are physical disks which are set to *offline* in the root partition and enable Hyper-V to have exclusive read-write access to the physical disk.</span></span>  |  <span data-ttu-id="df7ce-173">仮想マシンに割り当てるために、完全に専用のディスクまたは LUN が必要です。</span><span class="sxs-lookup"><span data-stu-id="df7ce-173">Requires a fully dedicated disk or LUN in order for it to be allocated to a virtual machine.</span></span><br /><br /> <span data-ttu-id="df7ce-174">物理ディスクでは、VHD ファイルとマシン間を移動することは困難です。</span><span class="sxs-lookup"><span data-stu-id="df7ce-174">A physical disk is more difficult to move between machines than VHD files.</span></span>  | <span data-ttu-id="df7ce-175">場合、[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]インスタンスが、HYPER-V で実行されている、パススルー ディスクを使用して、BizTalk Server のデータ ボリュームの固定のバーチャル ハード_ディスク (VHD) を使用する場合より、増分のパフォーマンスの向上を取得することがあります。</span><span class="sxs-lookup"><span data-stu-id="df7ce-175">If your [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instance is running on a Hyper-V, you may obtain incremental performance improvements by using passthrough disks over using fixed virtual hard disks (VHD) for the BizTalk Server data volumes.</span></span><br /><br /> <span data-ttu-id="df7ce-176">ローカル ファイルをホストしている場合は、BizTalk Server 上の場所を受信または処理中にディスクにサイズの大きいメッセージをストリーミングするには、固定容量仮想ハード_ディスク (VHD) を使用するパススルー ディスクを使用して増分のパフォーマンスの向上を入手できます。</span><span class="sxs-lookup"><span data-stu-id="df7ce-176">If you are hosting local file receive locations on BizTalk Server or streaming large messages to disk during processing, you may obtain incremental performance improvements using passthrough disks over using fixed virtual hard disks (VHD).</span></span> |

 <span data-ttu-id="df7ce-177">ディスクと、HYPER-V と記憶域の実装の詳細については、次を参照してください。[を実装するディスクとストレージ](http://go.microsoft.com/fwlink/?LinkID=142362)(http://go.microsoft.com/fwlink/?LinkID=142362)します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-177">For more information about implementing disks and storage with Hyper-V see [Implementing Disks and Storage](http://go.microsoft.com/fwlink/?LinkID=142362) (http://go.microsoft.com/fwlink/?LinkID=142362).</span></span>  

##### <a name="networking"></a><span data-ttu-id="df7ce-178">ネットワーク</span><span class="sxs-lookup"><span data-stu-id="df7ce-178">Networking</span></span>  
 <span data-ttu-id="df7ce-179">BizTalk Server では、高いネットワーク使用率が発生する傾向があります。</span><span class="sxs-lookup"><span data-stu-id="df7ce-179">BizTalk Server tends to exhibit high network utilization.</span></span> <span data-ttu-id="df7ce-180">そのため、ネットワークのパフォーマンスに問題がある場合は、仮想マシンごとに別個の物理ネットワーク カードを割り当てることを検討します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-180">Therefore, when network performance is an issue, consider allocating a separate physical network card for each virtual machine.</span></span>  

 <span data-ttu-id="df7ce-181">仮想マシンを構成する場合は、レガシ ネットワーク アダプターではなく、ネットワーク アダプターを使用することを確認します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-181">When configuring a virtual machine, ensure that you use the Network Adapter instead of the Legacy Network Adapter.</span></span> <span data-ttu-id="df7ce-182">レガシ ネットワーク アダプターは、統合コンポーネントをサポートしないオペレーティング システムを対象としています。</span><span class="sxs-lookup"><span data-stu-id="df7ce-182">The legacy network adapter is intended for operating systems that do not support integration components.</span></span>  

 <span data-ttu-id="df7ce-183">ネットワーク パフォーマンスの使用状況を測定する、 **"\Network インターフェイス \Bytes total/sec"** と**\Network Interface (\*) \Output Queue Length**運用ホストにパフォーマンス モニター カウンターネットワーク カードの全体的なパフォーマンスを測定するシステムです。</span><span class="sxs-lookup"><span data-stu-id="df7ce-183">To measure network performance use the **“\Network Interface \Bytes Total/sec”** and the **\Network Interface(\*)\Output Queue Length** performance monitor counters on the host operating system to measure overall performance of the network card.</span></span> <span data-ttu-id="df7ce-184">物理ネットワークがビジー状態として識別されているが場合に、使用して、 **"\Hyper-V 仮想ネットワーク アダプター (\*) \Bytes/sec"** どのバーチャル マシン ネットワーク アダプターを識別するために、ホスト オペレーティング システムのカウンターは、高負荷を生成しています。</span><span class="sxs-lookup"><span data-stu-id="df7ce-184">If a physical network has been identified as being busy, use the **“\Hyper-V Virtual Network Adapter (\*)\Bytes/sec”** counter on the host operating system to identify which virtual machine network adapter(s) is/are generating high load.</span></span>  

 <span data-ttu-id="df7ce-185">HYPER-V 環境でネットワーク パフォーマンスの評価の詳細については、次を参照してください。、**ネットワーク パフォーマンスを測定する**のセクション[チェックリスト: Hyper-v のパフォーマンスを測定する](../technical-guides/checklist-measuring-performance-on-hyper-v.md)します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-185">For more information about evaluating network performance on a Hyper-V environment see the **Measuring Network Performance** section of [Checklist: Measuring Performance on Hyper-V](../technical-guides/checklist-measuring-performance-on-hyper-v.md).</span></span>  

##### <a name="cpu"></a><span data-ttu-id="df7ce-186">CPU</span><span class="sxs-lookup"><span data-stu-id="df7ce-186">CPU</span></span>  
 <span data-ttu-id="df7ce-187">HYPER-V は、さまざまなゲスト オペレーティング システムの仮想プロセッサの数が異なるをサポートしています次の表にまとめたようです。</span><span class="sxs-lookup"><span data-stu-id="df7ce-187">Hyper-V supports different numbers of virtual processors for different guest operating systems; as summarized in the table below.</span></span> <span data-ttu-id="df7ce-188">BizTalk Server の CPU リソースの最大値を割り当てることでインストール、[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]ゲスト オペレーティング システムは、仮想マシンあたり 4 つの仮想プロセッサをサポートしています。</span><span class="sxs-lookup"><span data-stu-id="df7ce-188">To allocate the maximum CPU resources for BizTalk Server, install it on a [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] guest operating system,  which supports four virtual processors per virtual machine.</span></span>  

 <span data-ttu-id="df7ce-189">論理プロセッサが過剰なコンテキストの切り替えを防ぐために、ホスト オペレーティング システムを使用できるゲスト オペレーティング システムでは、仮想プロセッサの 1 対 1 の割り当てを構成します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-189">Configure a 1-1 allocation of virtual processors in the guest operating system(s) to logical processors available to the host operating system to prevent excessive context switching.</span></span> <span data-ttu-id="df7ce-190">コンテキスト切り替えのプロセッサ間でパフォーマンスの低下が発生します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-190">Excessive context switching between processors will result in performance degradation.</span></span> <span data-ttu-id="df7ce-191">仮想プロセッサと論理プロセッサの割り当てに関する詳細については、トピックの「プロセッサのパフォーマンスを最適化する」セクションを参照してください。[チェックリスト: hyper-v のパフォーマンスの最適化](~/technical-guides/checklist-optimizing-performance-on-hyper-v.md)します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-191">For more information about allocating virtual processors to logical processors, see the “Optimize Processor Performance” section of the topic [Checklist: Optimizing Performance on Hyper-V](~/technical-guides/checklist-optimizing-performance-on-hyper-v.md).</span></span>  

 <span data-ttu-id="df7ce-192">"\Hyper-V ハイパーバイザー論理 processor (_total)\\% の合計実行時間"パフォーマンス モニター カウンターは、すべてのゲスト マシンと HYPER-V ホスト上のハイパーバイザーの全体的なリソース使用率を測定します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-192">The “\Hyper-V Hypervisor Logical Processor(_Total)\\% Total Run Time” Performance Monitor counter measures the overall resource utilization of all guest machines and the hypervisor on the Hyper-V host.</span></span> <span data-ttu-id="df7ce-193">最大容量は; で、サーバーが実行されているこの値が 90% を超える場合は、このシナリオで仮想マシンに割り当ての追加仮想プロセッサは、システム全体のパフォーマンスが低下することができ、避ける必要があります。</span><span class="sxs-lookup"><span data-stu-id="df7ce-193">If this value is above 90%, the server is running at maximum capacity; allocating additional virtual processors to virtual machines in this scenario can degrade overall system performance and should be avoided.</span></span> <span data-ttu-id="df7ce-194">HyperV のパフォーマンス カウンターの使用の詳細については、次を参照してください。、[を評価する BizTalk Server のパフォーマンス、Hyper-v を](../technical-guides/evaluating-biztalk-server-performance-on-hyper-v.md)このガイドの「します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-194">For further details on using the HyperV performance counters, see the [Evaluating BizTalk Server Performance on Hyper-V](../technical-guides/evaluating-biztalk-server-performance-on-hyper-v.md) section of this guide.</span></span>  


|  <span data-ttu-id="df7ce-195">オペレーティング システム</span><span class="sxs-lookup"><span data-stu-id="df7ce-195">Operating system</span></span> | <span data-ttu-id="df7ce-196">仮想プロセッサ数の上限</span><span class="sxs-lookup"><span data-stu-id="df7ce-196">Virtual processor limit</span></span> |
|---|---|
| [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] <span data-ttu-id="df7ce-197">。</span><span class="sxs-lookup"><span data-stu-id="df7ce-197">.</span></span> <span data-ttu-id="df7ce-198">すべてのエディション[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]は 64 ビットのみです。</span><span class="sxs-lookup"><span data-stu-id="df7ce-198">All editions of [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] are 64-bit only.</span></span> |            <span data-ttu-id="df7ce-199">4</span><span class="sxs-lookup"><span data-stu-id="df7ce-199">4</span></span>            |
|  [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] <span data-ttu-id="df7ce-200">64 ビット</span><span class="sxs-lookup"><span data-stu-id="df7ce-200">64-bit</span></span>  |            <span data-ttu-id="df7ce-201">4</span><span class="sxs-lookup"><span data-stu-id="df7ce-201">4</span></span>            |
|  [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] <span data-ttu-id="df7ce-202">32 ビット</span><span class="sxs-lookup"><span data-stu-id="df7ce-202">32-bit</span></span>  |            <span data-ttu-id="df7ce-203">4</span><span class="sxs-lookup"><span data-stu-id="df7ce-203">4</span></span>            |
|  <span data-ttu-id="df7ce-204">Windows 7 64 ビット</span><span class="sxs-lookup"><span data-stu-id="df7ce-204">Windows 7 64-bit</span></span>  |            <span data-ttu-id="df7ce-205">4</span><span class="sxs-lookup"><span data-stu-id="df7ce-205">4</span></span>            |
|  <span data-ttu-id="df7ce-206">Windows 7 32 ビット</span><span class="sxs-lookup"><span data-stu-id="df7ce-206">Windows 7 32-bit</span></span>  |            <span data-ttu-id="df7ce-207">4</span><span class="sxs-lookup"><span data-stu-id="df7ce-207">4</span></span>            |
|  <span data-ttu-id="df7ce-208">Windows Vista 64 ビット</span><span class="sxs-lookup"><span data-stu-id="df7ce-208">Windows Vista 64-bit</span></span>  |            <span data-ttu-id="df7ce-209">2</span><span class="sxs-lookup"><span data-stu-id="df7ce-209">2</span></span>            |
|  <span data-ttu-id="df7ce-210">Windows Vista 32 ビット</span><span class="sxs-lookup"><span data-stu-id="df7ce-210">Windows Vista  32-bit</span></span>  |            <span data-ttu-id="df7ce-211">2</span><span class="sxs-lookup"><span data-stu-id="df7ce-211">2</span></span>            |

> [!NOTE]  
>  <span data-ttu-id="df7ce-212">HYPER-V でサポートされているゲスト オペレーティング システムの詳細については、次を参照してください。 [ http://go.microsoft.com/fwlink/?LinkID=118347](http://go.microsoft.com/fwlink/?LinkID=118347)します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-212">For more information about the guest operating systems that are supported on Hyper-V, see [http://go.microsoft.com/fwlink/?LinkID=118347](http://go.microsoft.com/fwlink/?LinkID=118347).</span></span>  

##### <a name="memory"></a><span data-ttu-id="df7ce-213">Memory</span><span class="sxs-lookup"><span data-stu-id="df7ce-213">Memory</span></span>  
 <span data-ttu-id="df7ce-214">物理サーバーでは、ルート パーティションと、サーバーで実行されているすべてのバーチャル マシンのための十分なメモリが必要です。</span><span class="sxs-lookup"><span data-stu-id="df7ce-214">The physical server requires enough memory for the root partition and any virtual machines running on the server.</span></span> <span data-ttu-id="df7ce-215">テスト中に、2 GB のメモリの最小値は、ルート パーティションに割り当てられた、 **Mbytes**パフォーマンス モニター カウンターが監視され、メモリ不足が発生しないことを確認します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-215">During testing, a minimum of 2GB of memory was allocated to the root partition and the **Memory/Available Mbytes** performance monitor counter was monitored to ensure no memory pressure was experienced.</span></span>  

 <span data-ttu-id="df7ce-216">BizTalk Server 環境では、各仮想マシンに割り当てる必要があるメモリの量が、ワークロードに依存し、処理の種類が行われます。</span><span class="sxs-lookup"><span data-stu-id="df7ce-216">The amount of memory that should be allocated to each virtual machine in a BizTalk Server environment depends on the workload and type of processing that will be performed.</span></span> <span data-ttu-id="df7ce-217">BizTalk Server などのメモリ要件に影響を与える多くの要素があります。</span><span class="sxs-lookup"><span data-stu-id="df7ce-217">There are many factors that affect memory requirements of  BizTalk Server including:</span></span>  

- <span data-ttu-id="df7ce-218">処理されたメッセージのサイズ</span><span class="sxs-lookup"><span data-stu-id="df7ce-218">Size of messages processed</span></span>  

- <span data-ttu-id="df7ce-219">メッセージのスループット</span><span class="sxs-lookup"><span data-stu-id="df7ce-219">Throughput of messages</span></span>  

- <span data-ttu-id="df7ce-220">オーケストレーション デザイン</span><span class="sxs-lookup"><span data-stu-id="df7ce-220">Orchestration design</span></span>  

- <span data-ttu-id="df7ce-221">パイプライン処理</span><span class="sxs-lookup"><span data-stu-id="df7ce-221">Pipeline processing</span></span>  

- <span data-ttu-id="df7ce-222">仮想マシン内で実行する BizTalk ホストの数</span><span class="sxs-lookup"><span data-stu-id="df7ce-222">Number of BizTalk hosts that you plan to run within the virtual machine</span></span>  

  <span data-ttu-id="df7ce-223">メモリに影響する要因の包括的な一覧で BizTalk Server パフォーマンス最適化ガイドの「パフォーマンスの要因」セクションを参照してください。 [ http://go.microsoft.com/fwlink/?LinkId=122587](http://go.microsoft.com/fwlink/?LinkId=122587)します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-223">For a comprehensive list of factors that affect memory, see “The Performance Factors” section of the BizTalk Server Performance Optimizations Guide at [http://go.microsoft.com/fwlink/?LinkId=122587](http://go.microsoft.com/fwlink/?LinkId=122587).</span></span>  

  <span data-ttu-id="df7ce-224">積極的に監視して、 **Mbytes**から各仮想マシンと、ルート パーティション自体内でカウンター。</span><span class="sxs-lookup"><span data-stu-id="df7ce-224">Proactively monitor the **Memory/Available Mbytes** counter from within each virtual machine and the root partition itself.</span></span> <span data-ttu-id="df7ce-225">次のガイドライン[チェックリスト: HYPER-V のパフォーマンスを測定する](../technical-guides/checklist-measuring-performance-on-hyper-v.md)十分なの物理メモリ、仮想マシンをルート パーティションがあるかどうかを判断するために使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="df7ce-225">The following guidelines from [Checklist: Measuring Performance on Hyper-V](../technical-guides/checklist-measuring-performance-on-hyper-v.md) should be used to determine whether there is enough available physical memory for the virtual machine and for the root partition:</span></span>  

- <span data-ttu-id="df7ce-226">使用可能な空きメモリの 50% 以上 = 正常</span><span class="sxs-lookup"><span data-stu-id="df7ce-226">50% of free memory available or more = Healthy</span></span>  

- <span data-ttu-id="df7ce-227">使用可能な空きメモリの 25% = 監視</span><span class="sxs-lookup"><span data-stu-id="df7ce-227">25% of free memory available = Monitor</span></span>  

- <span data-ttu-id="df7ce-228">空きメモリ 10% = 警告</span><span class="sxs-lookup"><span data-stu-id="df7ce-228">10% of free memory available = Warning</span></span>  

- <span data-ttu-id="df7ce-229">使用可能な空きメモリの 5% 未満 = 重大、パフォーマンスが悪影響を受ける</span><span class="sxs-lookup"><span data-stu-id="df7ce-229">Less than 5% of free memory available = Critical, performance will be adversely affected</span></span>  

#### <a name="choosing-root-operating-system-version"></a><span data-ttu-id="df7ce-230">ルート オペレーティング システムのバージョンを選択します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-230">Choosing Root Operating System Version</span></span>  
 <span data-ttu-id="df7ce-231">HYPER-V が Server Core とフル インストールでサポートされている[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-231">Hyper-V is supported on a Server Core as well as a full installation of [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)].</span></span> <span data-ttu-id="df7ce-232">ルート パーティションのオーバーヘッドを最小限に抑えるには、Server Core インストールに HYPER-V をインストール[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-232">To minimize the overhead of the root partition, install Hyper-V on a Server Core installation of [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)].</span></span> <span data-ttu-id="df7ce-233">HYPER-V の役割は、別のシステムで HYPER-V マネージャーからリモートで管理できます。</span><span class="sxs-lookup"><span data-stu-id="df7ce-233">The Hyper-V role can be managed remotely from the Hyper-V Manager on a different system.</span></span> <span data-ttu-id="df7ce-234">仮想マシンで使用できるその他のリソースを離れることより小さいディスクとメモリ プロファイルをそのための server Core に提供します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-234">Server Core provides a smaller disk and memory profile, therefore, leaving more resources available for virtual machines.</span></span> <span data-ttu-id="df7ce-235">詳細については、Server Core インストール オプションの使用可能な[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]を参照してください[ http://go.microsoft.com/fwlink/?LinkID=202439](http://go.microsoft.com/fwlink/?LinkID=202439)します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-235">For more information about the Server Core installation option available for [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)], see [http://go.microsoft.com/fwlink/?LinkID=202439](http://go.microsoft.com/fwlink/?LinkID=202439).</span></span>  

 <span data-ttu-id="df7ce-236">フル インストールを使用する場合[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]、ルート パーティションが、HYPER-V サーバーの役割のみを行う、ことを確認します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-236">If you choose to use a full installation of [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)], ensure that the root partition is dedicated only to the Hyper-V server role.</span></span> <span data-ttu-id="df7ce-237">追加のサーバーの役割を実行しているメモリ、ディスク、プロセッサ、およびネットワーク リソースを消費し、パフォーマンスが低下します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-237">Running additional server roles will consume memory, disk, processor, and network resources and will degrade performance.</span></span>  

#### <a name="creating-your-virtual-machines"></a><span data-ttu-id="df7ce-238">仮想マシンを作成します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-238">Creating Your Virtual Machines</span></span>  
 <span data-ttu-id="df7ce-239">インストールされているが、HYPER-V サーバーの役割を構成して後、は、仮想マシンを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="df7ce-239">After you have installed and configured the Hyper-V server role, you need to create the virtual machines.</span></span> <span data-ttu-id="df7ce-240">これを行う前に、次の質問に回答すると便利です。</span><span class="sxs-lookup"><span data-stu-id="df7ce-240">Before doing this, it is useful to answer the following questions:</span></span>  

- <span data-ttu-id="df7ce-241">どのような記憶域の構成が使用されますか。</span><span class="sxs-lookup"><span data-stu-id="df7ce-241">What storage configuration will I use?</span></span>  

- <span data-ttu-id="df7ce-242">ゲスト オペレーティング システムは仮想プロセッサの数をサポートしますか。</span><span class="sxs-lookup"><span data-stu-id="df7ce-242">How many virtual processors does the guest operating system support?</span></span>  

- <span data-ttu-id="df7ce-243">メモリの量は、仮想マシンに割り当てられるでしょうか。</span><span class="sxs-lookup"><span data-stu-id="df7ce-243">How much memory will be allocated to the virtual machine?</span></span>  

- <span data-ttu-id="df7ce-244">仮想マシンの数、HYPER-V サーバーで実行できますか。</span><span class="sxs-lookup"><span data-stu-id="df7ce-244">How many virtual machines can I run on my Hyper-V Server?</span></span>  

- <span data-ttu-id="df7ce-245">コンピューターにオペレーティング システムをインストールする方法は?</span><span class="sxs-lookup"><span data-stu-id="df7ce-245">How will I install the operating system onto the machine?</span></span>  

  <span data-ttu-id="df7ce-246">作成して、仮想マシンを構成する方法の詳細については、次を参照してください。[仮想マシンの作成](http://go.microsoft.com/fwlink/?LinkID=202440)です。</span><span class="sxs-lookup"><span data-stu-id="df7ce-246">For more information about how to create and configure virtual machines, see [Create Virtual Machines](http://go.microsoft.com/fwlink/?LinkID=202440).</span></span>  

##### <a name="installing-the-base-operating-system"></a><span data-ttu-id="df7ce-247">基本のオペレーティング システムをインストールします。</span><span class="sxs-lookup"><span data-stu-id="df7ce-247">Installing the Base Operating System</span></span>  
 <span data-ttu-id="df7ce-248">物理サーバーのインストールに使用できるすべてのオプションは、HYPER-V で使用できます。</span><span class="sxs-lookup"><span data-stu-id="df7ce-248">All the options available for a physical server installation are available in Hyper-V.</span></span> <span data-ttu-id="df7ce-249">起動可能な CD または DVD-ROM メディアまたは ISO イメージは手動インストールを実行するために使用できます。</span><span class="sxs-lookup"><span data-stu-id="df7ce-249">A bootable CD/DVD-ROM media or an ISO image can be used to perform a manual installation.</span></span> <span data-ttu-id="df7ce-250">仮想マシンが ISO イメージをホストするサーバーと同じネットワークに接続されているネットワーク アダプターに構成されている場合、ネットワーク インストールを実行できます。</span><span class="sxs-lookup"><span data-stu-id="df7ce-250">A network installation can be performed if the virtual machine has been configured with a network adapter connected to the same network as a server that hosts the ISO images.</span></span>  

> [!IMPORTANT]  
>  <span data-ttu-id="df7ce-251">HYPER-V で実行されている各仮想マシンのオペレーティング システムの統合コンポーネントをインストールする重要なパフォーマンス上の理由から、いずれのインストール方法が選択されます。</span><span class="sxs-lookup"><span data-stu-id="df7ce-251">Whichever installation method is chosen, for performance reasons it is critical the operating system integration components be installed for each virtual machine running under Hyper-V.</span></span> <span data-ttu-id="df7ce-252">統合コンポーネントは、ドライバーとサービスを統合デバイスを使用して実行するゲスト マシンのセットを提供します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-252">The integration components provide a set of drivers and services that enable the guest machine to perform by using synthetic devices.</span></span> <span data-ttu-id="df7ce-253">統合デバイスは、統合コンポーネントをサポートしないオペレーティング システムで使用される、エミュレートされたデバイスの必要性を回避します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-253">Synthetic devices avoid the need for emulated devices, which are used on operating systems that do not support integration components.</span></span> <span data-ttu-id="df7ce-254">エミュレートされたデバイスでは、統合デバイスと比較して大きいシステムのオーバーヘッドが発生します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-254">Emulated devices incur greater system overhead compared to synthetic devices.</span></span>  

 <span data-ttu-id="df7ce-255">インストールし、このラボで使用するコンピューターの構成は、初期の基本イメージが固定サイズの VHD に作成されました。</span><span class="sxs-lookup"><span data-stu-id="df7ce-255">To install and configure the machines used in this lab, an initial base image was created on a fixed size VHD.</span></span> <span data-ttu-id="df7ce-256">手動でインストールする必要[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-256">This involved a manual installation of [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)].</span></span> <span data-ttu-id="df7ce-257">すべての適切な更新プログラムをインストールすると、ベースの仮想マシン %WINDIR%\system32\sysprep ディレクトリに、Windows Server 2008 と共にインストールされている sysprep ユーティリティを使用してイメージを作成されました。</span><span class="sxs-lookup"><span data-stu-id="df7ce-257">Once all appropriate updates had been installed the base virtual machine was imaged using sysprep utility that is installed with Windows Server 2008, in the %WINDIR%\system32\sysprep directory.</span></span>  

> [!NOTE]
>  <span data-ttu-id="df7ce-258">Sysprep を実行している BizTalk Server にインストールされ、サーバーで構成した後は、Sysprep 応答ファイルおよび BizTalk Server に付属のスクリプトを使用して実現できます。</span><span class="sxs-lookup"><span data-stu-id="df7ce-258">Running Sysprep after BizTalk Server has been installed and configured on the server can be accomplished through the use of a Sysprep answer file and scripts provided with BizTalk Server.</span></span> <span data-ttu-id="df7ce-259">これらのサンプル スクリプトにインストールされている BizTalk Server で使用するために設計された[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-259">These sample scripts are designed for use with BizTalk Server installed on [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)].</span></span> <span data-ttu-id="df7ce-260">詳細については、BizTalk Server のオンライン ドキュメントを参照してください。</span><span class="sxs-lookup"><span data-stu-id="df7ce-260">For more information see the BizTalk Server online documentation.</span></span>  

## <a name="installing-and-configuring-biztalk-server"></a><span data-ttu-id="df7ce-261">BizTalk Server のインストールと構成</span><span class="sxs-lookup"><span data-stu-id="df7ce-261">Installing and Configuring BizTalk Server</span></span>  

- <span data-ttu-id="df7ce-262">仮想マシンをインストールに必要な時間を最小限に抑えるには、ゲスト オペレーティング システムとソフトウェアの前提条件のみで構成される基本イメージを作成します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-262">To minimize the time required to install virtual machines, create a base image consisting only of the guest operating system and software prerequisites.</span></span> <span data-ttu-id="df7ce-263">SysPrep を使用して、再利用するため、VHD イメージを準備し、基にしてこの VHD に、すべての仮想マシン (Vm)。</span><span class="sxs-lookup"><span data-stu-id="df7ce-263">Use SysPrep to prepare the VHD image for reuse, and then base all your virtual machines (VMs) on this VHD.</span></span>  

  > [!NOTE]
  >  <span data-ttu-id="df7ce-264">BizTalk Server で、基本イメージに対して Sysprep を実行することが*後*BizTalk Server がインストールされ、サーバーで構成されています。</span><span class="sxs-lookup"><span data-stu-id="df7ce-264">With BizTalk Server, it is possible to run Sysprep against a base image *after*BizTalk Server has been installed and configured on the server.</span></span> <span data-ttu-id="df7ce-265">これは、Sysprep 応答ファイルおよび BizTalk Server に付属のスクリプトを使用して実現できます。</span><span class="sxs-lookup"><span data-stu-id="df7ce-265">This can be accomplished through the use of a Sysprep answer file and scripts provided with BizTalk Server.</span></span> <span data-ttu-id="df7ce-266">これらのサンプル スクリプトにインストールされている BizTalk Server で使用するために設計された[!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-266">These sample scripts are designed for use with BizTalk Server installed on   [!INCLUDE[btsWinSvr2k8R2](../includes/btswinsvr2k8r2-md.md)] .</span></span> <span data-ttu-id="df7ce-267">詳細については、BizTalk Server のオンライン ドキュメントを参照してください。</span><span class="sxs-lookup"><span data-stu-id="df7ce-267">For more information see the BizTalk Server online documentation.</span></span>  
  > 
  >  <span data-ttu-id="df7ce-268">無人 Windows セットアップのリファレンスについては、「 [ http://go.microsoft.com/fwlink/?LinkId=142364](http://go.microsoft.com/fwlink/?LinkId=142364)します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-268">The Unattended Windows Setup Reference is available at [http://go.microsoft.com/fwlink/?LinkId=142364](http://go.microsoft.com/fwlink/?LinkId=142364).</span></span>  

- <span data-ttu-id="df7ce-269">次の推奨事項、「ときにインストールおよび構成する BizTalk Server…」</span><span class="sxs-lookup"><span data-stu-id="df7ce-269">Follow the recommendations in the “When Installing and Configuring BizTalk Server…”</span></span> <span data-ttu-id="df7ce-270">」の「[チェックリスト: インストールすると、Hyper-v 上の BizTalk Server 構成のベスト プラクティス](../technical-guides/checklist-best-practices-to-install-and-configure-biztalk-server-on-hyper-v.md)します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-270">section of the topic [Checklist: Best Practices for Installing and Configuring BizTalk Server on Hyper-V](../technical-guides/checklist-best-practices-to-install-and-configure-biztalk-server-on-hyper-v.md).</span></span>  

- <span data-ttu-id="df7ce-271">サポート状況について[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]と[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]HYPER-V 環境で、次を参照してください。[付録 c: BizTalk Server と SQL Server、Hyper-v のサポート性](../technical-guides/appendix-c-biztalk-server-and-sql-server-hyper-v-supportability.md)します。</span><span class="sxs-lookup"><span data-stu-id="df7ce-271">For information on the supportability of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] in a Hyper-V environment, see [Appendix C: BizTalk Server and SQL Server Hyper-V Supportability](../technical-guides/appendix-c-biztalk-server-and-sql-server-hyper-v-supportability.md).</span></span>
