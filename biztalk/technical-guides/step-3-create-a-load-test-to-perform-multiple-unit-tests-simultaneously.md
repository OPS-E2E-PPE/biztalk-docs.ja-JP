---
title: "手順 3: 複数の単体テストを同時に実行するロード テストの作成 |Microsoft ドキュメント"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: b5dd7e31-7188-4edf-9513-ea2725950b47
caps.latest.revision: "19"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 76b3d26e9f1dd14463d153c89316b3cf3da0338d
ms.sourcegitcommit: 5abd0ed3f9e4858ffaaec5481bfa8878595e95f7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/28/2017
---
# <a name="step-3-create-a-load-test-to-perform-multiple-unit-tests-simultaneously"></a><span data-ttu-id="a2cd2-102">手順 3: 複数の単体テストを同時に実行するロード テストを作成します。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-102">Step 3: Create a Load Test to Perform Multiple Unit Tests Simultaneously</span></span>
<span data-ttu-id="a2cd2-103">ロード テストの実行のいずれかの複数のインスタンスまたは複数の単体テストをアプリケーションのパフォーマンスと負荷を処理する能力を測定するようにします。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-103">Load tests run multiple instances of one or more unit tests so that you can measure your application's performance and ability to handle load.</span></span> <span data-ttu-id="a2cd2-104">Visual Studio 2010 のロード テストの主要なコンポーネントは次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-104">The primary components of a Visual Studio 2010 load test include:</span></span>  
  
-   <span data-ttu-id="a2cd2-105">**シナリオ**– セクションで、ロード テストのテストのロード パターン、テスト ミックス モデル、テスト ミックス、ネットワーク ミックス、および Web ブラウザー ミックスを構成します。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-105">**Scenarios** – The section of a load test where you configure the test load pattern, test mix model, test mix, network mix and Web browser mix.</span></span> <span data-ttu-id="a2cd2-106">シナリオでは、複雑な実世界の作業負荷のプロファイルのシミュレーションの複雑さに対応します。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-106">Scenarios accommodate the complexity of simulating complex real world work load profiles.</span></span> <span data-ttu-id="a2cd2-107">すべての包括的な一覧についてはロード テスト シナリオのプロパティを参照してください[ロード テスト シナリオ プロパティ](http://go.microsoft.com/fwlink/?LinkId=208327)(http://go.microsoft.com/fwlink/?LinkId=208327)。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-107">For a comprehensive listing of all load test scenario properties see [Load Test Scenario Properties](http://go.microsoft.com/fwlink/?LinkId=208327) (http://go.microsoft.com/fwlink/?LinkId=208327).</span></span>  
  
-   <span data-ttu-id="a2cd2-108">**カウンター セット**– セクションで、ロード テストの特定グループまたはロード テストの実行中に収集するパフォーマンス カウンターの「設定」を作成します。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-108">**Counter Sets** – The section of a load test where you create particular groupings or “Sets” of performance counters to be collected while the load test is running.</span></span> <span data-ttu-id="a2cd2-109">既定ではいくつかの定義済みのカウンター セットが提供され、カスタム カウンター セットを追加することができます。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-109">Several predefined counter sets are provided by default and custom counter sets can be added.</span></span> <span data-ttu-id="a2cd2-110">たとえばネットワークを評価するためにパフォーマンス カスタム カウンターを作成することができますを設定、関連するネットワークのパフォーマンス カウンターを追加および使用可能なカウンター セットの一覧に保存します。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-110">For example to evaluate Network performance you can create a custom counter set, add the relevant Network performance counters and save it to the list of available counter sets.</span></span> <span data-ttu-id="a2cd2-111">作成して、ロード テストのカウンター セットの保存の詳細については、次を参照してください。[ロード テストでのコンピューターのカウンター セットを指定する](http://go.microsoft.com/fwlink/?LinkId=208328)(http://go.microsoft.com/fwlink/?LinkId=208328)。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-111">For more information about creating and saving counter sets for load tests see [Specifying the Counter Sets for Computers in a Load Test](http://go.microsoft.com/fwlink/?LinkId=208328) (http://go.microsoft.com/fwlink/?LinkId=208328).</span></span>  
  
-   <span data-ttu-id="a2cd2-112">**実行設定**– 実行設定は、ロード テストのさまざまな側面を定義、テスト期間、ロード テスト中にさまざまなコンピューターに関連付けられているカウンター セットを含むさまざまなテストの検証オプション、およびテスト結果のストレージ オプションです。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-112">**Run Settings** – Run settings define multiple aspects of a load test, including the test duration, the counter sets that are associated with various computers during the load test, various test validation options, and test results storage options.</span></span> <span data-ttu-id="a2cd2-113">作成、それぞれのロード テストに複数の実行設定を保存し、およびテストを実行するときに使用する特定の設定を選択できます。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-113">You can create and store multiple run settings for each load test, and then select a particular setting to use when you run the test.</span></span> <span data-ttu-id="a2cd2-114">初期の実行設定は、新しいロード テスト ウィザードでロード テストを作成するときに、ロード テストに追加されます。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-114">An initial run setting is added to your load test when you create your load test with the New Load Test Wizard.</span></span> <span data-ttu-id="a2cd2-115">実行設定プロパティをすべてのロード テストの包括的な一覧については、次を参照してください。[ロード テスト実行設定プロパティ](http://go.microsoft.com/fwlink/?LinkId=208329)(http://go.microsoft.com/fwlink/?LinkId=208329)。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-115">For a comprehensive listing of all load test run setting properties see [Load Test Run Setting Properties](http://go.microsoft.com/fwlink/?LinkId=208329) (http://go.microsoft.com/fwlink/?LinkId=208329).</span></span>  
  
 <span data-ttu-id="a2cd2-116">ロード テストを作成するには、ウィザードを使用して、新しいロード テスト、ロード テスト エディターで編集してロード テスト アナライザーで分析されます。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-116">Load tests are created using the New Load Test Wizard, edited with the Load Test Editor, and analyzed in the Load Test Analyzer.</span></span> <span data-ttu-id="a2cd2-117">Microsoft Visual Studio Ultimate edition では、これらすべてのツールが含まれています。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-117">All these tools are included in Microsoft Visual Studio Ultimate edition.</span></span> <span data-ttu-id="a2cd2-118">作成して、Visual Studio 2010 Ultimate エディションでのロード テストの編集の詳細については、次を参照してください。[ロード テストの編集と作成](http://go.microsoft.com/fwlink/?LinkId=208308)(http://go.microsoft.com/fwlink/?LinkId=208308)。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-118">For more information about creating and editing load tests in Visual Studio 2010 Ultimate edition see [Creating and Editing Load Tests](http://go.microsoft.com/fwlink/?LinkId=208308) (http://go.microsoft.com/fwlink/?LinkId=208308).</span></span>  
  
 <span data-ttu-id="a2cd2-119">」に記載のテスト プロジェクトにテストにロードを追加するのには、以下のセクションで手順に従って[手順 1: BizTalk Server に送信ドキュメントに単体テストを作成](../technical-guides/step-1-create-a-unit-test-to-submit-documents-to-biztalk-server.md)です。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-119">Follow the steps in the sections below to add a load test to the test project described in [Step 1: Create a Unit Test to Submit Documents to BizTalk Server](../technical-guides/step-1-create-a-unit-test-to-submit-documents-to-biztalk-server.md).</span></span> <span data-ttu-id="a2cd2-120">次の手順では、構成する方法についても説明、**シナリオ**、**カウンター セット**、および**実行設定**ロード テスト用です。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-120">These steps also describe how to configure the **Scenarios**, **Counter Sets**, and **Run Settings** for a load test.</span></span>  
  
##  <a name="BKMK_StepLoadTest"></a><span data-ttu-id="a2cd2-121">ロード テストを追加し、ロード テスト シナリオを構成する、カウンター セット、および実行設定</span><span class="sxs-lookup"><span data-stu-id="a2cd2-121">Add a Load Test and Configure the Load Test Scenario, Counter Sets, and Run Settings</span></span>  
 <span data-ttu-id="a2cd2-122">このトピックを使用する方法について説明、**新しいロード テスト ウィザード**テスト プロジェクトにテストし、負荷を構成する方法で特定のニーズに合わせてテストをロードを追加します。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-122">This topic describes how to use the **New Load Test Wizard** to add a load test to a test project and how to configure the load test to meet specific needs.</span></span>  
  
### <a name="use-the-new-load-test-wizard-to-add-a-load-test-to-the-test-project"></a><span data-ttu-id="a2cd2-123">新しいロード テスト ウィザードを使用して、テスト プロジェクトにロード テストを追加するには</span><span class="sxs-lookup"><span data-stu-id="a2cd2-123">Use the New Load Test Wizard to Add a Load Test to the Test Project</span></span>  
 <span data-ttu-id="a2cd2-124">新しいロード テスト ウィザードを使用して、テスト プロジェクトにロード テストを追加する手順に従います。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-124">Follow these steps to add a load test to a test project using the New Load Test Wizard.</span></span>  
  
1.  <span data-ttu-id="a2cd2-125">開く、**ロード テスト**がまだ開いていない場合、Visual Studio 2010 のソリューションです。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-125">Open the **Load Test** solution in Visual Studio 2010 if it is not already open.</span></span>  
  
2.  <span data-ttu-id="a2cd2-126">BTSLoad プロジェクトにフォルダーを追加します。このフォルダーは、このプロジェクトの一部として作成されるすべてのロード テストに格納されます。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-126">Add a folder to the BTSLoad project; this folder will contain any load tests that are created as part of this project.</span></span> <span data-ttu-id="a2cd2-127">ソリューション エクスプ ローラーでプロジェクトを右クリックして、BTSLoad をポイントし、**追加**、 をクリック**新しいフォルダー**です。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-127">In Solution Explorer, right-click the BTSLoad project, point to **Add**, and click **New Folder**.</span></span> <span data-ttu-id="a2cd2-128">フォルダー アイコンを強調表示されたテキストを**NewFolder1** BTSLoad プロジェクトの種類の下に表示されます**LoadTests**を強調表示されたテキストを変更して C:\ フォルダーの作成の完了に Enter キーを押しますProjects\LoadTest\BTSLoad\LoadTests です。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-128">A folder icon with the highlighted text **NewFolder1** will appear under the BTSLoad project, type **LoadTests** to change the highlighted text and press the Enter key to complete creation of the folder C:\Projects\LoadTest\BTSLoad\LoadTests.</span></span>  
  
3.  <span data-ttu-id="a2cd2-129">ソリューション エクスプ ローラーを右クリックし、 **BTSLoad**プロジェクトをポイントし、**追加**、クリックして**ロード テスト**を開始する、**新しいロード テスト ウィザード**.</span><span class="sxs-lookup"><span data-stu-id="a2cd2-129">In Solution Explorer, right-click on the **BTSLoad** project, point to **Add**, and then click **Load Test** to start the **New Load Test Wizard**.</span></span>  
  
4.  <span data-ttu-id="a2cd2-130">**[次へ]**をクリックします。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-130">Click **Next**.</span></span>  
  
5.  <span data-ttu-id="a2cd2-131">**ロード テスト シナリオの設定の編集**ページで、**ロード テスト シナリオの名前を入力:**型**BTS_Messaging_Step**です。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-131">On the **Edit Settings for a Load Test Scenario** page under **Enter a name for the load test scenario:** type **BTS_Messaging_Step**.</span></span> <span data-ttu-id="a2cd2-132">[**待ち時間のプロファイル**選択**待ち時間を使用しないでください**] をクリックし、 **[次へ]**です。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-132">Under **Think time profile** select **Do not use think times** and then click **Next**.</span></span>  
  
6.  <span data-ttu-id="a2cd2-133">**ロード パターン設定の編集、負荷テスト シナリオ**選択のページ**ステップ ロード**、以下の値を入力し、をクリックして**[次へ]**です。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-133">On the **Edit load pattern settings for a load test scenario** page select **Step load**, enter the values below and then click **Next**.</span></span>  
  
    -   <span data-ttu-id="a2cd2-134">**ユーザー カウントの開始:** 30 ユーザー</span><span class="sxs-lookup"><span data-stu-id="a2cd2-134">**Start user count:** 30 users</span></span>  
  
    -   <span data-ttu-id="a2cd2-135">**ステップ実行間隔:** 60 秒</span><span class="sxs-lookup"><span data-stu-id="a2cd2-135">**Step duration:** 60 seconds</span></span>  
  
    -   <span data-ttu-id="a2cd2-136">**ユーザー カウントのステップ:** 10 人のユーザー</span><span class="sxs-lookup"><span data-stu-id="a2cd2-136">**Step user count:** 10 users</span></span>  
  
    -   <span data-ttu-id="a2cd2-137">**最大ユーザー カウント**の 80 人</span><span class="sxs-lookup"><span data-stu-id="a2cd2-137">**Maximum user count** 80 users</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="a2cd2-138">ステップ ロード パターンの設定を適用するときに、すべてのステップ インクリメントを完了するのに必要な時間を計算する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-138">When applying settings for a step load pattern you should calculate the amount of time required for all step increments to complete.</span></span> <span data-ttu-id="a2cd2-139">たとえば、ロード テストの上に指定されたロード パターン設定を使用しては必要がありますすべて 60 秒間の完了まで 5 分ずつ場合ステップの 80 人に 30 を増やしします。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-139">For example, using the load pattern settings specified above the load test will need 5 minutes to complete all of the 60 second step increments when ramping up from 30 to 80 users.</span></span> <span data-ttu-id="a2cd2-140">うちの 1 つは、最後のページで、新しいロード テスト ウィザードでロード テストの長さを指定するオプションが表示されます、**ロード テストの継続時間**です。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-140">On the last page of the New Load Test Wizard you will be presented with options for specifying the length of the load test, one of which will be **Load Test Duration**.</span></span> <span data-ttu-id="a2cd2-141">すべてのステップ単位があります (ここでは 5 分) の値を入力する簡単なタスクを完了するのに必要な時間を計算が既に場合**ロード テストの継続**です。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-141">If you have already calculated the time required for all step increments to complete then it is a straightforward task to enter the value (5 minutes in this case) for **Load Test Duration**.</span></span>  
  
7.  <span data-ttu-id="a2cd2-142">**、ロード テストのテスト ミックス モデルを選択**ページの選択**仮想ユーザー数に基づく** をクリックし、 **次へ**です。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-142">On the **Select a test mix model for the load test** page select **Based on the number of virtual users** and then click **Next**.</span></span>  
  
8.  <span data-ttu-id="a2cd2-143">**ロード テスト シナリオにテストを追加し、テスト ミックスを編集**ページをクリックして、**追加**ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-143">On the **Add tests to the load test scenario and edit the test mix** page click the **Add** button.</span></span>  
  
9. <span data-ttu-id="a2cd2-144">**使用可能なテスト**ダブルクリック**BTSMessaging**と**BTSMessaging2**のリストにこれらの単体テストを追加する**選択したテストの**します。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-144">Under **Available tests** double-click **BTSMessaging** and **BTSMessaging2** to add these unit tests to the list of **Selected tests**.</span></span> <span data-ttu-id="a2cd2-145">をクリックして**OK**  をクリックし、 **次へ**です。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-145">Click **OK** and then click **Next**.</span></span>  
  
10. <span data-ttu-id="a2cd2-146">**ロード テスト シナリオにネットワークの種類を追加し、ネットワーク ミックスを編集**ページを確認する**ネットワークの種類**に設定されている**LAN**で、**配布**の**100%**  をクリックし、**次**です。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-146">On the **Add network types to a load test scenario and edit the network mix** page verify that **Network Type** is set to **LAN** with a **Distribution** of **100%** and then click **Next**.</span></span>  
  
11. <span data-ttu-id="a2cd2-147">**ロード テストの実行中にカウンター セットで監視するコンピューターを指定する**ページをクリック**次**です。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-147">On the **Specify computers to monitor with counter sets during load test run** page click **Next**.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="a2cd2-148">この時点で、ロード テストには、コンピューターを追加しないでください。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-148">Do not add computers to the load test at this time.</span></span> <span data-ttu-id="a2cd2-149">新しいロード テスト ウィザードはできるだけにコンピューターを定義済みのカウンター セットに関連付けるし、このロード テストの定義済みの両方を必要とし、*カスタム*カウンター セット。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-149">The New Load Test Wizard will only allow you to associate computers with predefined counter sets, and this load test requires the use of both predefined and *custom* counter sets.</span></span> <span data-ttu-id="a2cd2-150">カスタム カウンター セットを追加し、定義済みの両方を使用してコンピューターを監視するロード テストを構成するには、ロード テストを編集するには、ウィザードが完了して、ロード テストを保存した後*と*カスタム カウンター セット。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-150">After the wizard is complete and the load test is saved you can edit the load test to add custom counter sets and configure the load test to monitor computers using both predefined *and* custom counter sets.</span></span>  
  
     <span data-ttu-id="a2cd2-151">**実行ロード テストの設定の確認と編集**ページには、次の値を入力してください。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-151">On the **Review and edit run settings for a load test** page enter the following values:</span></span>  
  
    1.  <span data-ttu-id="a2cd2-152">選択**ロード テストの継続**です。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-152">Select **Load test duration**.</span></span>  
  
    2.  <span data-ttu-id="a2cd2-153">**ウォーム アップ継続時間 (hh mm ss)** 30 秒</span><span class="sxs-lookup"><span data-stu-id="a2cd2-153">**Warm-up duration (hh mm ss)** 30 seconds</span></span>  
  
    3.  <span data-ttu-id="a2cd2-154">**実行の継続時間 (hh mm ss)** 5 分</span><span class="sxs-lookup"><span data-stu-id="a2cd2-154">**Run duration (hh mm ss)** 5 minutes</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="a2cd2-155">割り当てられた時間**実行の継続時間**すべてのステップに、上記の手順 5. またはこの例の 5 分間での説明に従って完了インクリメントに必要な時間を等しく必要があります。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-155">The time allocated for **Run duration** should equal the amount of time required for all step increments to complete as described in step 5 above, or 5 minutes for this example.</span></span>  
  
    4.  <span data-ttu-id="a2cd2-156">**サンプリング レート**5 秒</span><span class="sxs-lookup"><span data-stu-id="a2cd2-156">**Sampling rate** 5 seconds</span></span>  
  
    5.  <span data-ttu-id="a2cd2-157">**説明**(省略可能)、ここで、ロード テストの説明を入力します。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-157">**Description** (optional), Enter a description for the load test here.</span></span>  
  
    6.  <span data-ttu-id="a2cd2-158">**テスト失敗時にログを保存**は True。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-158">**Save Log on Test Failure** True</span></span>  
  
    7.  <span data-ttu-id="a2cd2-159">**検証レベル**低 – は、低に指定された検証規則を実行します。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-159">**Validation level** Low – invoke validation rules marked low</span></span>  
  
12. <span data-ttu-id="a2cd2-160">をクリックして**完了**を新しいロード テスト ウィザードを閉じます。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-160">Click **Finish** to close the New Load Test Wizard.</span></span>  
  
13. <span data-ttu-id="a2cd2-161">をクリックして、**ファイル**メニュー**保存\<ロード テストの名前\>として .loadtest**です。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-161">Click the **File** menu and select **Save \<Load Test Name\>.loadtest As**.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="a2cd2-162">この例では<Load Test Name>ファイルの名前が既に手動で変更されていない限り、Visual Studio 2010、通常の loadtestx.loadtest により、ロード テストのファイルに割り当てられた名前になります。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-162">In this example, <Load Test Name> will be the name assigned to the load test file by Visual Studio 2010, typically loadtestx.loadtest, unless the name of the file has already been manually changed.</span></span>  
  
14. <span data-ttu-id="a2cd2-163">先ほど作成した C:\Projects\LoadTest\BTSLoad\LoadTests ディレクトリにファイルを保存します。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-163">Save the file to the C:\Projects\LoadTest\BTSLoad\LoadTests directory created earlier.</span></span> <span data-ttu-id="a2cd2-164">シナリオで使用する名前を持つファイルを保存することができますこの例では、シナリオの名前は BTS_Messaging_Step C:\Projects\LoadTest\BTSLoad\LoadTests\BTS_Messaging_Step.loadtest として loadtest ファイルが保存されます。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-164">It may be useful to save the file with the name used for the scenario; in this example the scenario name is BTS_Messaging_Step so the loadtest file would be saved as C:\Projects\LoadTest\BTSLoad\LoadTests\BTS_Messaging_Step.loadtest.</span></span>  
  
###  <a name="BKMK_BTSCounters"></a><span data-ttu-id="a2cd2-165">BizTalk Server 主要業績評価指標 (KPI) を測定する設定、カスタムのカウンターを追加します。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-165">Add a Custom Counter Set to Measure BizTalk Server Key Performance Indicators (KPI)</span></span>  
 <span data-ttu-id="a2cd2-166">カウンター セットを決定する最大持続可能なスループット (MST)、BizTalk Server アプリケーションのために必要な BizTalk Server KPI を測定するパフォーマンス カウンターを追加する手順に従います。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-166">Follow these steps to add a counter set with performance counters that measure BizTalk Server KPI required for determining Maximum Sustainable Throughput (MST) of the BizTalk Server application:</span></span>  
  
1.  <span data-ttu-id="a2cd2-167">ソリューション エクスプ ローラー をダブルクリックでは、負荷は、ロード テスト エディターでロード テストを表示するのには、前のセクションで作成したことをテストします。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-167">In Solution Explorer double-click the load test that you created in the previous section to view the load test in Load Test editor.</span></span>  
  
2.  <span data-ttu-id="a2cd2-168">ロード テスト エディターをクリックして展開**カウンター セット**です。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-168">In Load Test editor, click to expand **Counter Sets**.</span></span> <span data-ttu-id="a2cd2-169">BizTalk Server の定義済みのカウンターが設定されていない、したがって"BizTalk Server"カウンター セットは、カウンターの一覧に追加する必要があります、カスタム設定のことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-169">Notice that there is no predefined counter set for BizTalk Server, therefore a custom “BizTalk Server” counter set must be added to the list of counter sets.</span></span>  
  
3.  <span data-ttu-id="a2cd2-170">右クリック**カウンター セット**選択**カスタム カウンター セットの追加**です。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-170">Right-click **Counter Sets** and select **Add Custom Counter Set**.</span></span> <span data-ttu-id="a2cd2-171">既定でこの操作は、カスタム カウンター セットの名前を持つを作成**Custom1**です。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-171">By default this action will create a custom counter set with the name **Custom1**.</span></span>  
  
4.  <span data-ttu-id="a2cd2-172">右クリックし、 **Custom1**カウンターに設定し、**プロパティ**にフォーカスを設定、**プロパティ**Custom1 カウンター セットのダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-172">Right-click the **Custom1** counter set and select **Properties** to set focus to the **Properties** dialog for the Custom1 counter set.</span></span>  
  
5.  <span data-ttu-id="a2cd2-173">名前をダブルクリックして**Custom1**で、**プロパティ**ダイアログで、「 **BizTalk**し、ENTER キーを押しますカスタムのカウンター セットの名前を変更する**BizTalk**.</span><span class="sxs-lookup"><span data-stu-id="a2cd2-173">Double-click the name **Custom1** in the **Properties** dialog, type **BizTalk** and then press the ENTER key to rename the custom counter set to **BizTalk**.</span></span>  
  
6.  <span data-ttu-id="a2cd2-174">ロード テスト エディターを右クリックし、 **BizTalk**カウンターに設定し、**カウンターの追加**です。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-174">In Load Test Editor, right-click the **BizTalk** counter set and select **Add Counters**.</span></span>  
  
7.  <span data-ttu-id="a2cd2-175">**コンピューター**、BizTalk Server パフォーマンス カウンターが含まれているパフォーマンス モニター カテゴリを表示する BizTalk Server グループに BizTalk Server コンピューターの 1 つの名前を入力します。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-175">Under **Computer**, type the name of one of the BizTalk Server computers in the BizTalk Server group to display performance monitor categories that include BizTalk Server performance counters.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="a2cd2-176">すべての BizTalk Server パフォーマンス カテゴリとパフォーマンス カウンターを表示しをグループ内の BizTalk Server の完全修飾ドメイン名 (または IP アドレス) を入力する必要がありますで、次のホストのインスタンスを開始する必要がありますも、BizTalk Server コンピューター。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-176">To ensure that all BizTalk Server performance categories and performance counters are listed, you may need to type in the fully qualified domain name (or IP Address) of a BizTalk Server in the group and you may also need to start the instances of the following hosts on the BizTalk Server computer.</span></span>  
    >   
    >  -   <span data-ttu-id="a2cd2-177">ロード テスト中に実行するオーケストレーションにバインドされている BizTalk ホストのインスタンス。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-177">Instances of BizTalk hosts which are bound to orchestrations that will run during the load test.</span></span>  
    > -   <span data-ttu-id="a2cd2-178">送信または受信するロード テスト中に実行されるアダプターのハンドラーとして構成されている BizTalk ホストのインスタンス。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-178">Instances of BizTalk hosts configured as send or receive handlers for adapters that will run during the load test.</span></span>  
  
8.  <span data-ttu-id="a2cd2-179">BizTalk Server では、非常に広範囲にわたるパフォーマンス カウンターを提供します。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-179">BizTalk Server provides quite an extensive set of performance counters.</span></span> <span data-ttu-id="a2cd2-180">のみを次の BizTalk Server のパフォーマンスを追加する必要があるアプリケーションがカウンターを BizTalk Server の最大持続可能なパフォーマンス (MST) を確認する目的で、 **BizTalk**カスタム カウンター セット。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-180">For purposes of determining the Maximum Sustainable Performance (MST) of a BizTalk Server application you only need to add the following BizTalk Server performance counters to the **BizTalk** custom counter set:</span></span>  
  
    |<span data-ttu-id="a2cd2-181">パフォーマンス カテゴリ</span><span class="sxs-lookup"><span data-stu-id="a2cd2-181">Performance Category</span></span>|<span data-ttu-id="a2cd2-182">パフォーマンス カウンター</span><span class="sxs-lookup"><span data-stu-id="a2cd2-182">Performance Counter</span></span>|  
    |--------------------------|-------------------------|  
    |<span data-ttu-id="a2cd2-183">プロセッサ</span><span class="sxs-lookup"><span data-stu-id="a2cd2-183">Processor</span></span>|<span data-ttu-id="a2cd2-184">_Total カウンター インスタンスのプロセッサ時間 (%)</span><span class="sxs-lookup"><span data-stu-id="a2cd2-184">% Processor Time for the _Total counter instance.</span></span>|  
    |<span data-ttu-id="a2cd2-185">Biztalk: メッセージ ボックス: 一般的なカウンター</span><span class="sxs-lookup"><span data-stu-id="a2cd2-185">BizTalk:Message Box: General Counters</span></span>|<span data-ttu-id="a2cd2-186">スプールのサイズ、  *\<BizTalk メッセージ ボックス データベース名\>*:*\<SQL Server インスタンス名\>*カウンター インスタンス。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-186">Spool Size for the *\<BizTalk MessageBox database name\>*:*\<SQL Server instance name\>* counter instance.</span></span> <span data-ttu-id="a2cd2-187">**注:***\<BizTalk メッセージ ボックス データベース名\>*と *\<SQL Server インスタンス名\>*だけのプレース ホルダー、BizTalk メッセージ ボックス データベースおよび BizTalk メッセージ ボックス データベースを格納する SQL Server インスタンスの実際の名前。  </span><span class="sxs-lookup"><span data-stu-id="a2cd2-187">**Note:**  *\<BizTalk MessageBox database name\>* and *\<SQL Server instance name\>* are just placeholders for the actual names of the BizTalk MessageBox database and the SQL Server instance that houses the BizTalk MessageBox database.</span></span> <span data-ttu-id="a2cd2-188">これらのプレース ホルダーは、BizTalk メッセージ ボックス データベースと関連付けられている SQL Server インスタンスの実際の名前に置き換える必要があります。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-188">These placeholders should be replaced with the actual names of the BizTalk MessageBox database and associated SQL Server instance.</span></span>|  
    |<span data-ttu-id="a2cd2-189">BizTalk:メッセージング</span><span class="sxs-lookup"><span data-stu-id="a2cd2-189">BizTalk:Messaging</span></span>|<span data-ttu-id="a2cd2-190">受信ホスト カウンター インスタンスの受信/秒を説明します。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-190">Documents received/Sec for the receive host counter instance.</span></span><br /><br /> <span data-ttu-id="a2cd2-191">ドキュメント処理数/秒の送信ホスト カウンター インスタンス。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-191">Documents processed/Sec for the transmit host counter instance.</span></span>|  
    |<span data-ttu-id="a2cd2-192">BizTalk:Message Agent</span><span class="sxs-lookup"><span data-stu-id="a2cd2-192">BizTalk:Message Agent</span></span>|<span data-ttu-id="a2cd2-193">ドキュメントのメッセージ配信の受信速度では、ホストが表示されます。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-193">Message delivery incoming rate for the document receive host.</span></span>|  
    |<span data-ttu-id="a2cd2-194">BizTalk:Message Agent</span><span class="sxs-lookup"><span data-stu-id="a2cd2-194">BizTalk:Message Agent</span></span>|<span data-ttu-id="a2cd2-195">メッセージは、ドキュメントの送信ホストの送信速度を公開します。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-195">Message publishing outgoing rate for the document transmit host.</span></span>|  
    |<span data-ttu-id="a2cd2-196">XLANG/s Orchestrations</span><span class="sxs-lookup"><span data-stu-id="a2cd2-196">XLANG/s Orchestrations</span></span>|<span data-ttu-id="a2cd2-197">オーケストレーション完了した 1 秒あたりのオーケストレーションの処理ホスト。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-197">Orchestrations completed/sec for the Orchestration processing host.</span></span>|  
  
### <a name="modify-run-settings-to-map-counter-sets-to-appropriate-computers"></a><span data-ttu-id="a2cd2-198">カウンター セットを適切なコンピューターにマップする実行設定を変更します。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-198">Modify Run Settings to Map Counter Sets to Appropriate Computers</span></span>  
 <span data-ttu-id="a2cd2-199">ロード テストの適切なコンピューターに適切なカウンター セットをマップするこれらの手順に従います。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-199">Follow these steps to map the appropriate counter sets with the appropriate computers for the load test:</span></span>  
  
1.  <span data-ttu-id="a2cd2-200">**ロード テスト エディター**を右クリックして**実行設定**選択**カウンター セットの管理**です。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-200">In **Load Test Editor**, right-click **Run Settings** and select **Manage Counter Sets**.</span></span>  
  
2.  <span data-ttu-id="a2cd2-201">をクリックして**コンピューターの追加**一覧に新しいコンピューターを追加します。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-201">Click **Add Computer** to add a new computer to the list.</span></span> <span data-ttu-id="a2cd2-202">強調表示されたテキストとアイコン**新しいコンピューター**下に表示されます**を監視するコンピューターおよびカウンター セット**です。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-202">An icon with the highlighted text **New Computer** will appear under **Computers and counter sets to monitor**.</span></span> <span data-ttu-id="a2cd2-203">一覧に追加するには、コンピューターの名前を入力して、強調表示されたテキストを置き換えます。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-203">Replace the highlighted text by typing the name of the computer you would like to add to the list.</span></span>  
  
3.  <span data-ttu-id="a2cd2-204">コンピューターを一覧に追加すると、使用可能なカウンター セットの一覧を展開し、利用可能なカウンターの 1 つ以上選択する をクリックをカウンター セットを関連付けるコンピューターを設定します。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-204">After adding the computer to the list, click to expand the list of available counter sets and then click to select one or more of the available counter sets to associate the counter set(s) with the computer.</span></span>  
  
4.  <span data-ttu-id="a2cd2-205">カウンター セットをするにはパフォーマンス データを収集するすべてのコンピューターに関連付けるまで、手順 2. および 3. を繰り返します。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-205">Repeat steps 2 and 3 until you have associated counter sets with all computers for which you would like to collect performance data.</span></span>  
  
###  <a name="BKMK_TestSettings"></a><span data-ttu-id="a2cd2-206">テストを実行し、リモート データを収集するソリューションにテスト設定ファイルを追加します。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-206">Add a Test Settings File to the Solution to Run Tests and Collect Data Remotely</span></span>  
 <span data-ttu-id="a2cd2-207">作成したテスト コント ローラーおよびテスト エージェント コンピューターを使用してロード テストを構成する[手順 2: ロード テスト コント ローラーの構成とエージェント コンピュータ](../technical-guides/step-2-configure-load-test-controller-and-agent-computers.md)、手順に従います[リモート実行のテストの設定を追加または、ソリューションにデータ コレクション](http://go.microsoft.com/fwlink/?LinkId=209182)(http://go.microsoft.com/fwlink/?LinkId=209182) 次のようにします。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-207">To configure the Load test to use the Test Controller and Test Agent computers that you created in [Step 2: Configure Load Test Controller and Agent Computers](../technical-guides/step-2-configure-load-test-controller-and-agent-computers.md), follow the steps in [Add a test settings for remote execution or data collection to your solution](http://go.microsoft.com/fwlink/?LinkId=209182)(http://go.microsoft.com/fwlink/?LinkId=209182) as noted below:</span></span>  
  
1.  <span data-ttu-id="a2cd2-208">手順 3 の名前を入力してください**BizTalkLoadTest。**</span><span class="sxs-lookup"><span data-stu-id="a2cd2-208">For Step 3, enter the name **BizTalkLoadTest**</span></span>  
  
2.  <span data-ttu-id="a2cd2-209">既に手順 3 で名前を入力したため、手順 6. を無視します。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-209">Ignore Step 6 because you have already entered a name in Step 3.</span></span>  
  
3.  <span data-ttu-id="a2cd2-210">手順 7 では、入力「これらリモート テストの実行のテスト設定を既定値は、」**説明**です。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-210">For Step 7, enter “These are default test settings for a remote test run” under **Description**.</span></span>  
  
4.  <span data-ttu-id="a2cd2-211">手順 8 では、既定の名前付けスキームを選択します。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-211">For Step 8, select the default naming scheme.</span></span>  
  
5.  <span data-ttu-id="a2cd2-212">手順 9、下の**テストの実行メソッド**選択**リモート実行**[**コント ローラー**テスト コント ローラーのコンピューターを選択し、その他のプロパティのままにします**ロール**を既定の設定] ページ。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-212">For Step 9, under **Test execution method** select **Remote execution**, under **Controller** select the test controller computer and leave the remaining properties on the **Roles** page at their default settings.</span></span>  
  
6.  <span data-ttu-id="a2cd2-213">手順 24、オプションを選択します**既定のホストで実行する**、select、**型ホスト**の**既定**、し、 **32 ビットまたは 64 ビット プロセスでテストを実行**、。オプションを選択して**64 ビット コンピューターで 64 ビット プロセスでテストを実行**です。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-213">For Step 24, select the option **to Run in default host**, select a **Host type** of **Default**, and under **Run tests in 32 or 64 bit process**, select the option to **Run tests in 64 bit process on 64 bit machine**.</span></span>  
  
7.  <span data-ttu-id="a2cd2-214">ステップ 25 選択**、個々 のテストを実行時間を超えた場合の失敗としてマーク**し選択 30 分の既定値のままにします。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-214">For Step 25, select **Mark an individual test as failed if its execution time exceeds** and leave the default value of 30 minutes selected.</span></span>  
  
8.  <span data-ttu-id="a2cd2-215">27b、ステップのチェック ボックスをオンに**テスト ディレクトリ内のアセンブリに対して読み込みコンテキストを使用して**、クリックして**名前を付けて保存**です。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-215">For Step 27b, select the check box for **Use the Load Context for assemblies in the test directory**, and then click **Save As**.</span></span>  
  
9. <span data-ttu-id="a2cd2-216">**名前を付けて保存** ダイアログ ボックスであることを確認名前**BizTalkLoadTest**が横に入力された**ファイル名**、 をクリック**保存**です。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-216">In the **Save As** dialog box, verify that the name **BizTalkLoadTest** is entered next to **File name**, and click **Save**.</span></span> <span data-ttu-id="a2cd2-217">ソリューションにテスト設定ファイルが追加されました。</span><span class="sxs-lookup"><span data-stu-id="a2cd2-217">You have now added a test settings file to your solution.</span></span>