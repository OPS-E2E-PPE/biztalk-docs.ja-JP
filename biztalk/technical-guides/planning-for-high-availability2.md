---
title: 高 Availability2 の計画 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 65271fd5-5294-406f-87f8-3aa394c235a2
caps.latest.revision: 4
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 4e804960e71990d5e179a8720a827f1081546c14
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65242575"
---
# <a name="planning-for-high-availability"></a><span data-ttu-id="3729f-102">高可用性の計画</span><span class="sxs-lookup"><span data-stu-id="3729f-102">Planning for High Availability</span></span>
<span data-ttu-id="3729f-103">BizTalk Server の高可用性は、BizTalk Server の展開での可用性を低下させている機能のコンポーネントの復旧について説明します。</span><span class="sxs-lookup"><span data-stu-id="3729f-103">High availability for BizTalk Server focuses on recovering functional components that might disrupt availability in a BizTalk Server deployment.</span></span>  
  
 <span data-ttu-id="3729f-104">BizTalk Server での高可用性を示すためには、エラーが発生して、復旧で、製品の効果を測定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3729f-104">To demonstrate high availability in BizTalk Server, you have to cause a failure and measure the product's effectiveness in recovery.</span></span> <span data-ttu-id="3729f-105">BizTalk Server の高可用性展開は、外部アプリケーションとシステムに、エラーや障害を透明とによりすべてのサービスは引き続き正常に機能の中断を最小限に。</span><span class="sxs-lookup"><span data-stu-id="3729f-105">A highly available BizTalk Server deployment makes errors and failures transparent to external applications and systems, and ensures that all services continue functioning correctly with minimal disruption.</span></span>  
  
 <span data-ttu-id="3729f-106">高可用性を提供する BizTalk Server 展開の設計には、アプリケーションの統合またはビジネス プロセス統合シナリオに関連する各機能コンポーネントの冗長性を実装する必要があります。</span><span class="sxs-lookup"><span data-stu-id="3729f-106">Designing a BizTalk Server deployment that provides high availability involves implementing redundancy for each functional component involved in an application integration or business process integration scenario.</span></span> <span data-ttu-id="3729f-107">BizTalk Server は、概念的には、データから分離することでこれらのシナリオの実装を簡略化、*ホスト*データを処理します。</span><span class="sxs-lookup"><span data-stu-id="3729f-107">BizTalk Server simplifies the implementation of these scenarios by conceptually separating the data from the *hosts* that process the data.</span></span> <span data-ttu-id="3729f-108">A*ホスト*BizTalk の論理コンテナーには、オーケストレーションなどの項目の送信ハンドラー、および受信ハンドラー。</span><span class="sxs-lookup"><span data-stu-id="3729f-108">A *host* is a logical container of BizTalk items, such as orchestrations, send handlers, and receive handlers.</span></span> <span data-ttu-id="3729f-109">作成する*インスタンスをホスト*しホストに割り当てます。</span><span class="sxs-lookup"><span data-stu-id="3729f-109">You create *host instances* and assign them to the host.</span></span> <span data-ttu-id="3729f-110">ホスト インスタンスは、特定のサーバー上のホストの物理表現です。</span><span class="sxs-lookup"><span data-stu-id="3729f-110">A host instance is the physical representation of a host on a specific server.</span></span> <span data-ttu-id="3729f-111">BizTalk Server サービス プロセス BTSNTSvc.exe と呼ばれるまたは別のプロセス、たとえば、IIS プロセスのいずれかになります。</span><span class="sxs-lookup"><span data-stu-id="3729f-111">It is either the BizTalk Server service process called BTSNTSvc.exe or another process, for example, the IIS process.</span></span> <span data-ttu-id="3729f-112">BizTalk Server が実行中の複数含まれる場合、高可用性を実現する*インスタンスをホスト*と次のように、BizTalk Server データベースをクラスタ リングします。</span><span class="sxs-lookup"><span data-stu-id="3729f-112">So providing high availability for BizTalk Server involves running multiple *host instances* and clustering the BizTalk Server databases, as follows:</span></span>  
  
- <span data-ttu-id="3729f-113">**BizTalk ホストのアーキテクチャ**します。</span><span class="sxs-lookup"><span data-stu-id="3729f-113">**Architecture for BizTalk Hosts**.</span></span> <span data-ttu-id="3729f-114">BizTalk Server では、ホストを分離し、メッセージの受信、処理オーケストレーション、メッセージを送信するなどの主要機能の高可用性を実現する複数のホスト インスタンスを実行することができます。</span><span class="sxs-lookup"><span data-stu-id="3729f-114">BizTalk Server lets you separate hosts and run multiple host instances to provide high availability for key functions such as receiving messages, processing orchestrations, and sending messages.</span></span> <span data-ttu-id="3729f-115">これらのホストは不要クラスタ リングを追加または負荷分散メカニズムは、BizTalk Server は自動的にホスト インスタンスを通じて複数のコンピューター間でワークロードを分散するためです。</span><span class="sxs-lookup"><span data-stu-id="3729f-115">These hosts do not require any additional clustering or load-balancing mechanism because BizTalk Server automatically distributes workload across multiple computers through host instances.</span></span> <span data-ttu-id="3729f-116">ただし、HTTP および SOAP アダプターの負荷分散などネットワーク負荷分散 (NLB) 高可用性を提供するメカニズムが必要し、FTP の受信ハンドラーを実行しているホスト、MSMQ、POP3、SQL、および SAP が必要に、受信ハンドラーを実行しているをホストします。高可用性を実現するためのメカニズムをクラスタ リングします。</span><span class="sxs-lookup"><span data-stu-id="3729f-116">However, hosts running the receive handlers for the HTTP and SOAP adapters require a load-balancing mechanism such as Network Load Balancing (NLB) to provide high availability, and hosts running the receive handlers for FTP, MSMQ, POP3, SQL, and SAP require a clustering mechanism to provide high availability.</span></span>  
  
  > [!NOTE]  
  >  <span data-ttu-id="3729f-117">常に、SAP がクラスター化する必要があります受信アダプタは、2 フェーズ コミットのシナリオに対応します。</span><span class="sxs-lookup"><span data-stu-id="3729f-117">You must always cluster the SAP receive adapter to accommodate a two-phase commit scenario.</span></span>  
  
- <span data-ttu-id="3729f-118">**BizTalk Server データベースのアーキテクチャ**します。</span><span class="sxs-lookup"><span data-stu-id="3729f-118">**Architecture for BizTalk Server databases**.</span></span> <span data-ttu-id="3729f-119">通常、BizTalk Server データベースの高可用性構成は、アクティブ/パッシブのサーバー クラスター構成で構成されている 2 つ以上の SQL Server データベース コンピュータで構成されます。</span><span class="sxs-lookup"><span data-stu-id="3729f-119">High-availability configuration for the BizTalk Server databases typically consists of two or more SQL Server database computers configured in an active/passive server cluster configuration.</span></span> <span data-ttu-id="3729f-120">これらのコンピューターが共通のディスク リソースを共有 (など、RAID 1 + 0 SCSI ディスク アレイやストレージ エリア ネットワーク) Windows フェールオーバー クラスタ リングを使用してバックアップの冗長性とフォールト トレランスを提供します。</span><span class="sxs-lookup"><span data-stu-id="3729f-120">These computers share a common disk resource (such as a RAID 1+0 SCSI disk array or a storage area network) and use Windows Failover Clustering to provide backup redundancy and fault tolerance.</span></span>  
  
  <span data-ttu-id="3729f-121">高可用性のために重要なもう 1 つの BizTalk の機能コンポーネントは、マスター シークレット サーバーです。</span><span class="sxs-lookup"><span data-stu-id="3729f-121">Another BizTalk functional component that is critical for high availability is the master secret server.</span></span> <span data-ttu-id="3729f-122">BizTalk Server は、暗号化キーを取得するには、このサービスに依存します。</span><span class="sxs-lookup"><span data-stu-id="3729f-122">BizTalk Server relies on this service to obtain the encryption key.</span></span>  
  
  <span data-ttu-id="3729f-123">このセクションでは、これらの各カテゴリでの高可用性に対処する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="3729f-123">This section provides information about how to address high availability in each of these categories.</span></span> <span data-ttu-id="3729f-124">Windows と SQL Server では、BizTalk Server の高可用性ソリューションがビルドするため、BizTalk Server のホストを構成する前に、高可用性を備えた、これらの製品をデプロイすることを確認します。</span><span class="sxs-lookup"><span data-stu-id="3729f-124">Because a BizTalk Server high availability solution is built on Windows and SQL Server, make sure that you deploy these products with high availability before configuring hosts for BizTalk Server.</span></span> <span data-ttu-id="3729f-125">次のリンクには、これらの基になる製品用の高可用性を実現するに関する情報が含まれます。</span><span class="sxs-lookup"><span data-stu-id="3729f-125">The following links include information about providing high availability for these underlying products:</span></span>  
  
- <span data-ttu-id="3729f-126">**高可用性ソリューション (SQL Server)] (https://docs.microsoft.com/sql/sql-server/failover-clusters/high-availability-solutions-sql-server)**</span><span class="sxs-lookup"><span data-stu-id="3729f-126">**High Availability Solutions (SQL Server)](https://docs.microsoft.com/sql/sql-server/failover-clusters/high-availability-solutions-sql-server)**</span></span>  
  
- <span data-ttu-id="3729f-127">**[Windows Server フェールオーバー クラスタ リング](https://docs.microsoft.com/windows-server/failover-clustering/failover-clustering-overview)**</span><span class="sxs-lookup"><span data-stu-id="3729f-127">**[Failover Clustering in Windows Server](https://docs.microsoft.com/windows-server/failover-clustering/failover-clustering-overview)**</span></span>
  
## <a name="understanding-the-impact-of-a-component-failure"></a><span data-ttu-id="3729f-128">コンポーネントの障害の影響を理解します。</span><span class="sxs-lookup"><span data-stu-id="3729f-128">Understanding the Impact of a Component Failure</span></span>  
 <span data-ttu-id="3729f-129">次の表では、コンポーネントまたは依存関係が失敗した場合、コンポーネントと BizTalk Server 環境と、BizTalk Server 環境への影響の依存関係を一覧表示します。</span><span class="sxs-lookup"><span data-stu-id="3729f-129">The following table lists the components and dependencies of a BizTalk Server environment and the impact on the BizTalk Server environment if the component or dependency fails.</span></span> <span data-ttu-id="3729f-130">コンポーネントまたは依存関係をクラスター化するかどうかを決定する際に、潜在的な障害の範囲を検討してください。</span><span class="sxs-lookup"><span data-stu-id="3729f-130">You should consider the scope of a potential failure when deciding whether to cluster a component or dependency.</span></span>  
  
|<span data-ttu-id="3729f-131">コンポーネントまたは依存関係</span><span class="sxs-lookup"><span data-stu-id="3729f-131">Component or dependency</span></span>|<span data-ttu-id="3729f-132">障害の範囲</span><span class="sxs-lookup"><span data-stu-id="3729f-132">Scope of failure</span></span>|  
|-----------------------------|----------------------|  
|<span data-ttu-id="3729f-133">SQL Server</span><span class="sxs-lookup"><span data-stu-id="3729f-133">SQL Server</span></span>|<span data-ttu-id="3729f-134">システム全体。</span><span class="sxs-lookup"><span data-stu-id="3729f-134">Systemwide.</span></span> <span data-ttu-id="3729f-135">SQL Server が失敗した場合は、BizTalk Server がドキュメントを処理できませんするされます。</span><span class="sxs-lookup"><span data-stu-id="3729f-135">If SQL Server fails then BizTalk Server will be unable to process documents.</span></span>|  
|<span data-ttu-id="3729f-136">[マスター シークレット サーバー]</span><span class="sxs-lookup"><span data-stu-id="3729f-136">Master secret server</span></span>|<span data-ttu-id="3729f-137">システム全体。</span><span class="sxs-lookup"><span data-stu-id="3729f-137">Systemwide.</span></span> <span data-ttu-id="3729f-138">マスター シークレット サーバーが失敗した場合、BizTalk Server はできませんドキュメントを処理できません。</span><span class="sxs-lookup"><span data-stu-id="3729f-138">If the master secret server fails then BizTalk Server will be unable to process documents.</span></span> <br/><span data-ttu-id="3729f-139">**注:** マスター シークレット サーバーが失敗した場合、BizTalk server のエンタープライズ SSO サービスが再起動されるまでに、マスター シークレットのキャッシュされたメモリ内コピーを使用する BizTalk グループ内の各 BizTalk サーバーは引き続きします。</span><span class="sxs-lookup"><span data-stu-id="3729f-139">**Note:**  If the master secret server fails, each BizTalk server in the BizTalk group will continue to use a cached in-memory copy of the master secret until the Enterprise SSO service on that BizTalk server is restarted.</span></span> <span data-ttu-id="3729f-140">BizTalk サーバーで、エンタープライズ SSO サービスが再起動された場合は、キャッシュされたマスター シークレットのコピーがメモリから解放し、BizTalk server は、マスター シークレットの別のコピーを取得するマスター シークレット サーバーに接続できる必要があります。</span><span class="sxs-lookup"><span data-stu-id="3729f-140">If the Enterprise SSO service is restarted on the BizTalk servers, then the cached copy of the master secret is released from memory and the BizTalk servers must be able to contact the master secret server to obtain another copy of the master secret.</span></span> <span data-ttu-id="3729f-141">マスター シークレット サーバーは失敗し、BizTalk サーバー ドキュメントの処理を続行する場合、グループの BizTalk サーバーでエンタープライズ SSO サービスを再開しない操作を行います。</span><span class="sxs-lookup"><span data-stu-id="3729f-141">Do not restart the Enterprise SSO service on the BizTalk server(s) in a group if the master secret server fails and you want the BizTalk server to continue processing documents.</span></span>|  
|<span data-ttu-id="3729f-142">MSDTC</span><span class="sxs-lookup"><span data-stu-id="3729f-142">MSDTC</span></span>|<span data-ttu-id="3729f-143">サーバー。</span><span class="sxs-lookup"><span data-stu-id="3729f-143">Server.</span></span> <span data-ttu-id="3729f-144">MSDTC がトランザクションのサポートを必要なサーバー上の任意のコンポーネントは失敗します。</span><span class="sxs-lookup"><span data-stu-id="3729f-144">If MSDTC fails then any component on the server that requires transaction support will fail.</span></span> <br/><span data-ttu-id="3729f-145">**注:** SQL Server とマスター シークレット サーバーがトランザクションのサポートに MSDTC に依存するために SQL server またはマスター シークレット サーバーで MSDTC が失敗した場合障害の範囲はシステム全体をなります。</span><span class="sxs-lookup"><span data-stu-id="3729f-145">**Note:**  Because SQL Server and the master secret server are dependent on MSDTC for transaction support, the scope of the failure will become system wide if the MSDTC on the SQL server or master secret server fails.</span></span> <span data-ttu-id="3729f-146">BizTalk Server では、実行時の操作中に SQL Server とマスター シークレット サーバーと通信するときにトランザクションのサポートが必要です。</span><span class="sxs-lookup"><span data-stu-id="3729f-146">BizTalk Server requires transaction support when communicating with SQL Server and the master secret server during run-time operations.</span></span>|  
|<span data-ttu-id="3729f-147">BizTalk ホスト インスタンス</span><span class="sxs-lookup"><span data-stu-id="3729f-147">BizTalk Host instance</span></span>|<span data-ttu-id="3729f-148">サーバー。</span><span class="sxs-lookup"><span data-stu-id="3729f-148">Server.</span></span> <span data-ttu-id="3729f-149">BizTalk ホスト インスタンスに格納されているすべてのコンポーネントは、ホスト インスタンスが失敗した場合は、ドキュメントの処理に参加できません。</span><span class="sxs-lookup"><span data-stu-id="3729f-149">Any components housed in a BizTalk Host instance will be unable to participate in document processing if the host instance fails.</span></span>|  
|<span data-ttu-id="3729f-150">Microsoft メッセージ キュー (MSMQ)</span><span class="sxs-lookup"><span data-stu-id="3729f-150">Microsoft Message Queuing (MSMQ)</span></span>|<span data-ttu-id="3729f-151">サーバー。</span><span class="sxs-lookup"><span data-stu-id="3729f-151">Server.</span></span> <span data-ttu-id="3729f-152">MSMQ は失敗し、ドキュメントの処理など、MSMQ アダプター、MSMQ サービスに依存する場合は、サーバーに中止されます。</span><span class="sxs-lookup"><span data-stu-id="3729f-152">If MSMQ fails then any document processing that is dependent on the MSMQ service, such as the MSMQ adapter, will be halted on the server.</span></span>|  
|<span data-ttu-id="3729f-153">ファイル システム</span><span class="sxs-lookup"><span data-stu-id="3729f-153">File system</span></span>|<span data-ttu-id="3729f-154">サーバー。</span><span class="sxs-lookup"><span data-stu-id="3729f-154">Server.</span></span> <span data-ttu-id="3729f-155">ファイル システムには、ドキュメント処理し、ファイル アダプターなど、ファイル システムに依存しているが失敗した場合は、サーバーに中止されます。</span><span class="sxs-lookup"><span data-stu-id="3729f-155">If the file system fails then any document processing that is dependent on the file system, such as the File adapter, will be halted on the server.</span></span>|  
  
 <span data-ttu-id="3729f-156">高可用性 BizTalk Server システムを効率的に管理できるようにするには、BizTalk スタックの適切な理解が必要です。Windows Server、DC (DNS、DHCP)、BizTalk Server、SQL Server、IIS サーバー、ファイル サーバー、MSMQ サーバー、外部のアプリケーション。</span><span class="sxs-lookup"><span data-stu-id="3729f-156">To be able to better manage a highly available BizTalk Server system, you must have a good understanding of the BizTalk stack: Windows Server, DC (DNS, DHCP), BizTalk Server, SQL Server, IIS server, File server, MSMQ server, external applications.</span></span> <span data-ttu-id="3729f-157">このセクションでは、BizTalk Server と依存の SQL Server コンピューターの高可用性について説明します。</span><span class="sxs-lookup"><span data-stu-id="3729f-157">This section focuses on the high availability of BizTalk Server and the dependent SQL Server computer.</span></span>  
  
## <a name="biztalk-server-high-availability-examples"></a><span data-ttu-id="3729f-158">BizTalk Server の高可用性の例</span><span class="sxs-lookup"><span data-stu-id="3729f-158">BizTalk Server High-Availability Examples</span></span>  
 <span data-ttu-id="3729f-159">ホストのスケール アウト層による高可用性を提供する Microsoft BizTalk Server のサンプル シナリオを参照してください。[サンプル BizTalk Server 高可用性シナリオ](../core/sample-biztalk-server-high-availability-scenarios.md)します。</span><span class="sxs-lookup"><span data-stu-id="3729f-159">For sample scenarios in Microsoft BizTalk Server that provide high availability through scaled-out tiers of hosts, see [Sample BizTalk Server High Availability Scenarios](../core/sample-biztalk-server-high-availability-scenarios.md).</span></span>
  
## <a name="see-also"></a><span data-ttu-id="3729f-160">参照</span><span class="sxs-lookup"><span data-stu-id="3729f-160">See Also</span></span>  
 <span data-ttu-id="3729f-161">[BizTalk ホストの高可用性](../technical-guides/high-availability-for-biztalk-hosts.md) </span><span class="sxs-lookup"><span data-stu-id="3729f-161">[High Availability for BizTalk Hosts](../technical-guides/high-availability-for-biztalk-hosts.md) </span></span>  
 <span data-ttu-id="3729f-162">[データベースの高可用性](../technical-guides/high-availability-for-databases.md) </span><span class="sxs-lookup"><span data-stu-id="3729f-162">[High Availability for Databases](../technical-guides/high-availability-for-databases.md) </span></span>  
 <span data-ttu-id="3729f-163">[マスター シークレット サーバーの高可用性](../technical-guides/high-availability-for-the-master-secret-server.md) </span><span class="sxs-lookup"><span data-stu-id="3729f-163">[High Availability for the Master Secret Server](../technical-guides/high-availability-for-the-master-secret-server.md) </span></span>  
 [<span data-ttu-id="3729f-164">チェックリスト:ディザスター リカバリーによる可用性の向上</span><span class="sxs-lookup"><span data-stu-id="3729f-164">Checklist: Increasing Availability with Disaster Recovery</span></span>](../technical-guides/checklist-increasing-availability-with-disaster-recovery.md)