---
title: 障害復旧 SQL サーバーを準備する |Microsoft ドキュメント
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 44b77fe8-393d-4781-b0b0-5b7f6e50a67b
caps.latest.revision: 2
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 47bd787fe5fa33a30f01bc37fd4988ab26db99d1
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/01/2017
ms.locfileid: "26008075"
---
# <a name="preparing-the-disaster-recovery-sql-servers"></a><span data-ttu-id="6b65f-102">障害復旧 SQL サーバーを準備します。</span><span class="sxs-lookup"><span data-stu-id="6b65f-102">Preparing the Disaster Recovery SQL Servers</span></span>
<span data-ttu-id="6b65f-103">セットを作成します.[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]データベース障害復旧サイトのインスタンス。</span><span class="sxs-lookup"><span data-stu-id="6b65f-103">Createa set of [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database instances in the disaster recovery site.</span></span> <span data-ttu-id="6b65f-104">災害復旧を確実に[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]データベース インスタンスが同じレベルの運用環境のパフォーマンスを提供できます[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]データベース インスタンス、災害復旧[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]類似したデータベースのインスタンスを構成する必要がありますハードウェアとを実行している物理コンピューターの台数[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]です。</span><span class="sxs-lookup"><span data-stu-id="6b65f-104">To ensure that the disaster recovery [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database instances can provide the same level of performance as the production [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database instances, the disaster recovery [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database instances should be configured with similar hardware and number of physical computers running [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)].</span></span> <span data-ttu-id="6b65f-105">このシナリオでは、BizTalk Server の各実稼働用に構成されるログ配布で[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]、対応するのには適用先のデータベース インスタンス[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]データベース インスタンスの災害復旧サイトにします。</span><span class="sxs-lookup"><span data-stu-id="6b65f-105">In this scenario, BizTalk Server log shipping will be configured for each production [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database instance to apply to a corresponding [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database instance at the disaster recovery site.</span></span>  
  
 <span data-ttu-id="6b65f-106">キーの BizTalk Server のログ配布の要件は、実稼働サイト データベース ファイルの格納場所にドライブ文字が、障害復旧サイトのデータベース ファイルの復元先でドライブ文字と一致しています。</span><span class="sxs-lookup"><span data-stu-id="6b65f-106">A key BizTalk Server log shipping requirement is that the drive letter(s) on the production site where the database files are stored match the drive letter(s) at the disaster recovery site where the database files are restored.</span></span> <span data-ttu-id="6b65f-107">その場合、[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]データベース ファイル グループにある G:\data 実稼働環境で、必要がある G:\data ディレクトリ (DR) を移行先サーバーで、または、復元は失敗します。</span><span class="sxs-lookup"><span data-stu-id="6b65f-107">So if the [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] database file group is located on G:\data in production, there must be a G:\data directory on the destination (DR) server, or the restore will fail.</span></span>  
  
 <span data-ttu-id="6b65f-108">BizTalk Server のログ配布はサポートしていません、 **RESTORE WITH MOVE** [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]コマンド。</span><span class="sxs-lookup"><span data-stu-id="6b65f-108">BizTalk Server log shipping does not support the **RESTORE WITH MOVE** [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] command.</span></span> <span data-ttu-id="6b65f-109">このため、ことをお勧め、災害復旧サイトのデータベース インスタンス名が実稼働環境でデータベース インスタンスの名前に一致する (既定では、インスタンス名は、ファイル パスの一部)。</span><span class="sxs-lookup"><span data-stu-id="6b65f-109">Because of this, we recommend that database instance names at the disaster recovery site match the database instance names in production (by default, the instance name is part of the file path).</span></span> <span data-ttu-id="6b65f-110">実行している災害復旧のコンピューターに対応するドライブ文字には、単にディレクトリを作成することもできます[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]できるように、**復元**操作で使用されるように、同じディレクトリ構造内のファイルを作成できます実稼働します。</span><span class="sxs-lookup"><span data-stu-id="6b65f-110">Another option is to simply create a directory on the corresponding drive letter in the disaster recovery computer running [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] so that the **RESTORE** operation can create the file in the same directory structure as is used in production.</span></span>  
  
 <span data-ttu-id="6b65f-111">作成[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]障害復旧サイトの障害復旧サイトへのフェールオーバーが必要なことすべてために必要なセキュリティ ログインできるように、実稼働サイトに対応するセキュリティ ログインが送信先システムに存在します。</span><span class="sxs-lookup"><span data-stu-id="6b65f-111">Create [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] security logins for the disaster recovery site that correspond to the production site so that in the event that a failover to the disaster recovery site is required, all required security logins are present on the destination system.</span></span>  
  
 <span data-ttu-id="6b65f-112">災害復旧の 1 回インストール[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]インスタンスが完了すると、master および msdb データベースの完全バックアップを実行して、障害復旧サイトへの切り替えが失敗した場合に、システムのクリーンを復元できるようにします。</span><span class="sxs-lookup"><span data-stu-id="6b65f-112">Once installation of the disaster recovery [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] instances is completed, perform a full backup of master and msdb databases so that a clean system can be restored in the event that a switch to the disaster recovery site fails.</span></span>