---
title: Extending Mapper (BizTalk Server サンプル) |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- BizTalk Mapper, examples
- XML tools
- BizTalk Mapper, extending
- examples, BizTalk Mapper
- examples, XML tools
ms.assetid: 6010a13f-b715-4766-ad91-5aa9b98589e3
caps.latest.revision: 17
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 08a926a0adffe20a8c3b5da14dd9dbd042101558
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65345896"
---
# <a name="extending-mapper-biztalk-server-sample"></a><span data-ttu-id="04f8f-102">Extending Mapper (BizTalk Server サンプル)</span><span class="sxs-lookup"><span data-stu-id="04f8f-102">Extending Mapper (BizTalk Server Sample)</span></span>
<span data-ttu-id="04f8f-103">Extending Mapper サンプルを使用して、BizTalk マッパーを拡張する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-103">The Extending Mapper sample demonstrates how to use and extend BizTalk Mapper.</span></span> <span data-ttu-id="04f8f-104">サンプルが含まれる[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]マップ ファイル (.btm) がそれぞれが BizTalk マッパーのさまざまな機能を示しています。</span><span class="sxs-lookup"><span data-stu-id="04f8f-104">The sample includes several [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] map files (.btm), each of which illustrates different features of BizTalk Mapper.</span></span>  

## <a name="what-this-sample-does"></a><span data-ttu-id="04f8f-105">このサンプルの処理</span><span class="sxs-lookup"><span data-stu-id="04f8f-105">What This Sample Does</span></span>  
 <span data-ttu-id="04f8f-106">Extending Mapper サンプルは、コンテンツ ベース ルーティング (CBR) を使用し、オーケストレーションを使用しません。</span><span class="sxs-lookup"><span data-stu-id="04f8f-106">The Extending Mapper sample uses content-based routing (CBR) and does not use an orchestration.</span></span> <span data-ttu-id="04f8f-107">フィルターのサンプルの送信ポートに直接接続されていることを指定することで、サンプル受信ポートを使用します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-107">By specifying a filter on the sample send port, it is connected directly to the sample receive port.</span></span> <span data-ttu-id="04f8f-108">マップは、処理済みのドキュメントに適用する送信ポートで指定されます。</span><span class="sxs-lookup"><span data-stu-id="04f8f-108">A map is specified on the send port to be applied to the processed document.</span></span>  

## <a name="where-to-find-this-sample"></a><span data-ttu-id="04f8f-109">このサンプルの場所</span><span class="sxs-lookup"><span data-stu-id="04f8f-109">Where to Find This Sample</span></span>  
 <span data-ttu-id="04f8f-110">*\<パスのサンプル\>* \XmlTools\ExtendingMapper</span><span class="sxs-lookup"><span data-stu-id="04f8f-110">*\<Samples Path\>* \XmlTools\ExtendingMapper</span></span>  

 <span data-ttu-id="04f8f-111">次の表は、このサンプルのファイルとその目的を示しています。</span><span class="sxs-lookup"><span data-stu-id="04f8f-111">The following table shows the files in this sample and describes their purpose.</span></span>  


|                                                                             <span data-ttu-id="04f8f-112">ファイル</span><span class="sxs-lookup"><span data-stu-id="04f8f-112">File(s)</span></span>                                                                             |                                                         <span data-ttu-id="04f8f-113">説明</span><span class="sxs-lookup"><span data-stu-id="04f8f-113">Description</span></span>                                                          |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="04f8f-114">MapperClassLibrary\AssemblyInfo.cs, MapperClassLibrary\MapperClassLibrary.csproj, MapperClassLibrary\MapperHelper.cs, MapperClassLibrary\MapperClassLibrary.sln</span><span class="sxs-lookup"><span data-stu-id="04f8f-114">MapperClassLibrary\AssemblyInfo.cs, MapperClassLibrary\MapperClassLibrary.csproj, MapperClassLibrary\MapperHelper.cs, MapperClassLibrary\MapperClassLibrary.sln</span></span> | <span data-ttu-id="04f8f-115">Microsoft® [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]® プロジェクト ファイルと Visual C#® ソース ファイル。</span><span class="sxs-lookup"><span data-stu-id="04f8f-115">Microsoft® [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]® project file and Visual C#® source files.</span></span> |
|                                                                           <span data-ttu-id="04f8f-116">Cleanup.bat</span><span class="sxs-lookup"><span data-stu-id="04f8f-116">Cleanup.bat</span></span>                                                                           |                      <span data-ttu-id="04f8f-117">アセンブリを展開解除し、グローバル アセンブリ キャッシュ (GAC) から削除するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="04f8f-117">Used to undeploy assemblies and remove them from the global assembly cache (GAC).</span></span>                       |
|                                                                         <span data-ttu-id="04f8f-118">Destination.xsd</span><span class="sxs-lookup"><span data-stu-id="04f8f-118">Destination.xsd</span></span>                                                                         |                                                         <span data-ttu-id="04f8f-119">スキーマ ファイルです。</span><span class="sxs-lookup"><span data-stu-id="04f8f-119">Schema file.</span></span>                                                         |
|                                                           <span data-ttu-id="04f8f-120">ExtendingMapper.btproj, ExtendingMapper.sln</span><span class="sxs-lookup"><span data-stu-id="04f8f-120">ExtendingMapper.btproj, ExtendingMapper.sln</span></span>                                                           |                                     <span data-ttu-id="04f8f-121">このサンプルの BizTalk プロジェクトおよびソリューション ファイル。</span><span class="sxs-lookup"><span data-stu-id="04f8f-121">BizTalk project and solution files for this sample.</span></span>                                      |
|                                                                       <span data-ttu-id="04f8f-122">ExtendingMapper.xml</span><span class="sxs-lookup"><span data-stu-id="04f8f-122">ExtendingMapper.xml</span></span>                                                                       |                                                         <span data-ttu-id="04f8f-123">ソース XML です。</span><span class="sxs-lookup"><span data-stu-id="04f8f-123">Source XML.</span></span>                                                          |
|                                                                   <span data-ttu-id="04f8f-124">ExtendingMapperBinding.xml</span><span class="sxs-lookup"><span data-stu-id="04f8f-124">ExtendingMapperBinding.xml</span></span>                                                                    |                                                         <span data-ttu-id="04f8f-125">バインド XML です。</span><span class="sxs-lookup"><span data-stu-id="04f8f-125">Binding XML.</span></span>                                                         |
|                                                                      <span data-ttu-id="04f8f-126">ExternalAssembly.xml</span><span class="sxs-lookup"><span data-stu-id="04f8f-126">ExternalAssembly.xml</span></span>                                                                       |                                                    <span data-ttu-id="04f8f-127">外部アセンブリ XML です。</span><span class="sxs-lookup"><span data-stu-id="04f8f-127">External assembly XML.</span></span>                                                    |
|                                                                      <span data-ttu-id="04f8f-128">OverridingMapXslt.btm</span><span class="sxs-lookup"><span data-stu-id="04f8f-128">OverridingMapXslt.btm</span></span>                                                                      |                                                          <span data-ttu-id="04f8f-129">マップ ファイルです。</span><span class="sxs-lookup"><span data-stu-id="04f8f-129">Map file.</span></span>                                                           |
|                                                                      <span data-ttu-id="04f8f-130">OverridingMapXslt.xml</span><span class="sxs-lookup"><span data-stu-id="04f8f-130">OverridingMapXslt.xml</span></span>                                                                      |                                                     <span data-ttu-id="04f8f-131">マップ XML を上書きします。</span><span class="sxs-lookup"><span data-stu-id="04f8f-131">Overriding Map XML.</span></span>                                                      |
|                                                                     <span data-ttu-id="04f8f-132">OverridingMapXslt.xslt</span><span class="sxs-lookup"><span data-stu-id="04f8f-132">OverridingMapXslt.xslt</span></span>                                                                      |                                                 <span data-ttu-id="04f8f-133">マップ スタイル シートを上書きします。</span><span class="sxs-lookup"><span data-stu-id="04f8f-133">Overriding Map style sheet.</span></span>                                                  |
|                                                                <span data-ttu-id="04f8f-134">Scriptor_CallExternalAssembly.btm</span><span class="sxs-lookup"><span data-stu-id="04f8f-134">Scriptor_CallExternalAssembly.btm</span></span>                                                                |                                                       <span data-ttu-id="04f8f-135">サンプル マップ ファイルです。</span><span class="sxs-lookup"><span data-stu-id="04f8f-135">Sample map file.</span></span>                                                       |
|                                                            <span data-ttu-id="04f8f-136">Scriptor_GlobalVariableInInlineScript.btm</span><span class="sxs-lookup"><span data-stu-id="04f8f-136">Scriptor_GlobalVariableInInlineScript.btm</span></span>                                                            |                                                       <span data-ttu-id="04f8f-137">サンプル マップ ファイルです。</span><span class="sxs-lookup"><span data-stu-id="04f8f-137">Sample map file.</span></span>                                                       |
|                                                                   <span data-ttu-id="04f8f-138">Scriptor_InlineScripts.btm</span><span class="sxs-lookup"><span data-stu-id="04f8f-138">Scriptor_InlineScripts.btm</span></span>                                                                    |                                                       <span data-ttu-id="04f8f-139">サンプル マップ ファイルです。</span><span class="sxs-lookup"><span data-stu-id="04f8f-139">Sample map file.</span></span>                                                       |
|                                                                     <span data-ttu-id="04f8f-140">Scriptor_InlineXslt.btm</span><span class="sxs-lookup"><span data-stu-id="04f8f-140">Scriptor_InlineXslt.btm</span></span>                                                                     |                                                       <span data-ttu-id="04f8f-141">サンプル マップ ファイルです。</span><span class="sxs-lookup"><span data-stu-id="04f8f-141">Sample map file.</span></span>                                                       |
|                                                         <span data-ttu-id="04f8f-142">Scriptor_InlineXsltCallingExternalAssembly.btm</span><span class="sxs-lookup"><span data-stu-id="04f8f-142">Scriptor_InlineXsltCallingExternalAssembly.btm</span></span>                                                          |                                                       <span data-ttu-id="04f8f-143">サンプル マップ ファイルです。</span><span class="sxs-lookup"><span data-stu-id="04f8f-143">Sample map file.</span></span>                                                       |
|                                                                  <span data-ttu-id="04f8f-144">Scriptor_XsltCalltemplate.btm</span><span class="sxs-lookup"><span data-stu-id="04f8f-144">Scriptor_XsltCalltemplate.btm</span></span>                                                                  |                                                       <span data-ttu-id="04f8f-145">サンプル マップ ファイルです。</span><span class="sxs-lookup"><span data-stu-id="04f8f-145">Sample map file.</span></span>                                                       |
|                                                                            <span data-ttu-id="04f8f-146">Setup.bat</span><span class="sxs-lookup"><span data-stu-id="04f8f-146">Setup.bat</span></span>                                                                            |                                           <span data-ttu-id="04f8f-147">使用される、サンプルをビルドして初期化します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-147">Used to build and initialize the sample.</span></span>                                           |
|                                                                           <span data-ttu-id="04f8f-148">Source.xsd</span><span class="sxs-lookup"><span data-stu-id="04f8f-148">Source.xsd</span></span>                                                                            |                                                         <span data-ttu-id="04f8f-149">スキーマ ファイルです。</span><span class="sxs-lookup"><span data-stu-id="04f8f-149">Schema file.</span></span>                                                         |

## <a name="building-and-initializing-this-sample"></a><span data-ttu-id="04f8f-150">このサンプルのビルドと初期化</span><span class="sxs-lookup"><span data-stu-id="04f8f-150">Building and Initializing This Sample</span></span>  
 <span data-ttu-id="04f8f-151">次の手順を使用して、ビルドして、Extending Mapper サンプルを初期化します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-151">Use the following procedure to build and initialize the Extending Mapper sample.</span></span>  

#### <a name="to-build-and-initialize-this-sample"></a><span data-ttu-id="04f8f-152">このサンプルを作成および初期化するには</span><span class="sxs-lookup"><span data-stu-id="04f8f-152">To build and initialize this sample</span></span>  

1. <span data-ttu-id="04f8f-153">コマンド ウィンドウでディレクトリ変更 (**cd**) 次のフォルダーに。</span><span class="sxs-lookup"><span data-stu-id="04f8f-153">In a command window, change directory (**cd**) to the following folder:</span></span>  

    <span data-ttu-id="04f8f-154">*\<パスのサンプル\>* \XmlTools\ExtendingMapper</span><span class="sxs-lookup"><span data-stu-id="04f8f-154">*\<Samples Path\>* \XmlTools\ExtendingMapper</span></span>  

2. <span data-ttu-id="04f8f-155">ファイルは、次の操作を実行します。 Setup.bat を実行します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-155">Run the file Setup.bat, which performs the following actions:</span></span>  

   - <span data-ttu-id="04f8f-156">入力 (\In)、このサンプルの出力 (\Out) フォルダーを作成します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-156">Creates the input (\In) and output (\Out) folders for this sample.</span></span>  

   - <span data-ttu-id="04f8f-157">コンパイルし、展開、[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]このサンプルのプロジェクト。</span><span class="sxs-lookup"><span data-stu-id="04f8f-157">Compiles and deploys the [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] project for this sample.</span></span>  

   - <span data-ttu-id="04f8f-158">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] の受信場所、送信ポート、および受信ポートを作成しバインドします。</span><span class="sxs-lookup"><span data-stu-id="04f8f-158">Creates and binds the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] receive location, and the send and receive ports.</span></span>  

     <span data-ttu-id="04f8f-159">Scriptor_callexternalassembly.btm マップまたは Scriptor_InlineXsltCallingExternalAssembly.btm マップを使用する場合は、Visual Studio で ExtendingMapper.sln を開き、次の変更 (手順 3 に移動をそれ以外の場合)。</span><span class="sxs-lookup"><span data-stu-id="04f8f-159">If you want to use the Scriptor_CallExternalAssembly.btm or Scriptor_InlineXsltCallingExternalAssembly.btm maps, open ExtendingMapper.sln in Visual Studio and make the following modifications (otherwise go to step 3):</span></span>  

   1. <span data-ttu-id="04f8f-160">ソリューション エクスプ ローラーで、scriptor_callexternalassembly.btm マップを開きます。</span><span class="sxs-lookup"><span data-stu-id="04f8f-160">In Solution Explorer, open Scriptor_CallExternalAssembly.btm.</span></span>  

   2. <span data-ttu-id="04f8f-161">マッパー グリッドでは、スクリプト functoid を選択します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-161">On the mapper grid, select the Scripting functoid.</span></span>  

   3. <span data-ttu-id="04f8f-162">プロパティ グリッドで、選択、**スクリプト**プロパティ functoid スクリプトを構成する場合、省略記号 (...) ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="04f8f-162">In the property grid, select the **Script** property, and click the ellipsis (...) button to configure the functoid script.</span></span>  

   4. <span data-ttu-id="04f8f-163">**スクリプト Functoid の構成**ダイアログ ボックスで、**スクリプト Functoid の構成**、して、次を指定します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-163">In the **Configure Scripting Functoid** dialog box, select the **Script Functoid Configuration**, and specify the following:</span></span>  


      |      <span data-ttu-id="04f8f-164">これを設定します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-164">Set this</span></span>       |                           <span data-ttu-id="04f8f-165">これを</span><span class="sxs-lookup"><span data-stu-id="04f8f-165">To this</span></span>                            |
      |---------------------|--------------------------------------------------------------|
      |   <span data-ttu-id="04f8f-166">**スクリプトの種類**</span><span class="sxs-lookup"><span data-stu-id="04f8f-166">**Script Type**</span></span>   |                      <span data-ttu-id="04f8f-167">外部アセンブリ</span><span class="sxs-lookup"><span data-stu-id="04f8f-167">External assembly</span></span>                       |
      | <span data-ttu-id="04f8f-168">**スクリプト アセンブリ**</span><span class="sxs-lookup"><span data-stu-id="04f8f-168">**Script Assembly**</span></span> | <span data-ttu-id="04f8f-169">Microsoft.Samples.BizTalk.ExtendingMapper.MapperClassLibrary</span><span class="sxs-lookup"><span data-stu-id="04f8f-169">Microsoft.Samples.BizTalk.ExtendingMapper.MapperClassLibrary</span></span> |
      |  <span data-ttu-id="04f8f-170">**スクリプト クラス**</span><span class="sxs-lookup"><span data-stu-id="04f8f-170">**Script Class**</span></span>   |    <span data-ttu-id="04f8f-171">Microsoft.Samples.BizTalk.ExtendingMapper.MapperHelper</span><span class="sxs-lookup"><span data-stu-id="04f8f-171">Microsoft.Samples.BizTalk.ExtendingMapper.MapperHelper</span></span>    |
      |  <span data-ttu-id="04f8f-172">**スクリプト メソッド**</span><span class="sxs-lookup"><span data-stu-id="04f8f-172">**Script Method**</span></span>  |                           <span data-ttu-id="04f8f-173">MyConcat</span><span class="sxs-lookup"><span data-stu-id="04f8f-173">MyConcat</span></span>                           |


   5. <span data-ttu-id="04f8f-174">[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]**ファイル**] メニューの [選択**保存**をマップ ファイルへの変更を保存し、ソリューションを閉じます。</span><span class="sxs-lookup"><span data-stu-id="04f8f-174">From the [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]**File** menu, choose **Save** to save changes to the map file, and close the solution.</span></span>  

3. <span data-ttu-id="04f8f-175">Setup.bat を続行するには、そのキーを押します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-175">Press any key to continue with Setup.bat.</span></span>  

   > [!IMPORTANT]
   >  <span data-ttu-id="04f8f-176">Scriptor_InlineXsltCallingExternalAssembly.btm を使用する場合、ExternalAssembly.xml ファイルを編集する必要があります。</span><span class="sxs-lookup"><span data-stu-id="04f8f-176">If you want to use Scriptor_InlineXsltCallingExternalAssembly.btm, you must edit the ExternalAssembly.xml file.</span></span> <span data-ttu-id="04f8f-177">ExternalAssembly.xml は、マッパー拡張オブジェクトが登録されている名前空間を .NET アセンブリにマップする、BizTalk によって使用されます。</span><span class="sxs-lookup"><span data-stu-id="04f8f-177">ExternalAssembly.xml is used by BizTalk to map a mapper extension object registered namespace to a .NET assembly.</span></span> <span data-ttu-id="04f8f-178">依存アセンブリは、(公開キー トークンを自動的に生成されるを含む) 完全修飾名で参照されるため、この値を更新する必要があります。</span><span class="sxs-lookup"><span data-stu-id="04f8f-178">Because the dependent assembly is referenced by its fully qualified name (including its public key token, which is automatically generated), you must update this value.</span></span> <span data-ttu-id="04f8f-179">Scriptor_InlineXsltCallingExternalAssembly.btm を使用しない場合は完了する必要はありません e までの手順します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-179">If you do not want to use Scriptor_InlineXsltCallingExternalAssembly.btm, you do not need to complete steps a through e.</span></span>  

4. <span data-ttu-id="04f8f-180">Windows エクスプ ローラーに移動します。 \<Windows フォルダー\>\assembly\\します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-180">In Windows Explorer, navigate to \<Windows folder\>\assembly\\.</span></span>  

   1. <span data-ttu-id="04f8f-181">右クリック**Microsoft.Samples.BizTalk.ExtendingMapper.MapperClassLibrary**選択**プロパティ**します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-181">Right-click **Microsoft.Samples.BizTalk.ExtendingMapper.MapperClassLibrary** and select **Properties**.</span></span>  

   2. <span data-ttu-id="04f8f-182">公開キー トークンの値をコピーします。</span><span class="sxs-lookup"><span data-stu-id="04f8f-182">Copy the public key token value.</span></span>  

   3. <span data-ttu-id="04f8f-183">テキスト エディターで開きます *\<サンプル パス\>* \XML Tools\ExtendingMapper\ExternalAssembly.xml します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-183">In a text editor, open *\<Samples Path\>* \XML Tools\ExtendingMapper\ExternalAssembly.xml.</span></span>  

   4. <span data-ttu-id="04f8f-184">選択、 <strong>assemblyname 1.0.0.0、カルチャを = = neutral, PublicKeyToken = 68496d20c737d84b"</strong>属性、および置換、 **PublicKeyToken**パブリック キー トークンの値を値でコピーした手順 c。</span><span class="sxs-lookup"><span data-stu-id="04f8f-184">Select the <strong>AssemblyName="Microsoft.Samples.BizTalk.ExtendingMapper.MapperClassLibrary, Version=1.0.0.0, Culture=neutral, PublicKeyToken=68496d20c737d84b"</strong>attribute, and replace the **PublicKeyToken** value with the public key token value you copied in step c.</span></span>  

   5. <span data-ttu-id="04f8f-185">保存して ExternalAssembly.xml を閉じます。</span><span class="sxs-lookup"><span data-stu-id="04f8f-185">Save and close ExternalAssembly.xml.</span></span>  

   > [!NOTE]
   >  <span data-ttu-id="04f8f-186">エラーが報告されていないこと、ビルドおよび初期化プロセス中にこのサンプルを実行する前に確認してください。</span><span class="sxs-lookup"><span data-stu-id="04f8f-186">You should confirm that no errors were reported during the build and initialization process before attempting to run this sample.</span></span>  

#### <a name="to-configure-enlist-and-start-the-send-port"></a><span data-ttu-id="04f8f-187">構成、参加、および送信ポートを開始するには</span><span class="sxs-lookup"><span data-stu-id="04f8f-187">To configure, enlist, and start the send port</span></span>  

1. <span data-ttu-id="04f8f-188">をクリックして**開始**を選択します**すべてのプログラム**を選択します**Microsoft BizTalk Server**、し、 **BizTalk Server 管理**します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-188">Click **Start**, select **All Programs**, select **Microsoft BizTalk Server**, and then select **BizTalk Server Administration**.</span></span>  

2. <span data-ttu-id="04f8f-189">BizTalk Server 管理コンソールで、クリックして展開**BizTalk Server 管理**をクリックして展開**BizTalk グループ [\<servername\>:\<管理データベース\>]** をクリックして展開**アプリケーション**します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-189">In the BizTalk Server Administration console, click to expand **BizTalk Server Administration**, click to expand **BizTalk Group [\<servername\>:\<management database\>]**, and click to expand **Applications**.</span></span>  

3. <span data-ttu-id="04f8f-190">クリックして展開**ExtendingMapperApplication**、 をクリックし、**送信ポート**します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-190">Click to expand **ExtendingMapperApplication**, and then click **Send Ports**.</span></span>  

4. <span data-ttu-id="04f8f-191">右側のウィンドウで右クリック**送信ポート**、 をクリックし、**プロパティ**します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-191">In the right pane, right-click **Send Ports**, and then click **Properties**.</span></span>  

5. <span data-ttu-id="04f8f-192">**ExtendingMapperSP – 送信ポートのプロパティ**ダイアログ ボックスで、をクリックして、**送信マップ**ページ。</span><span class="sxs-lookup"><span data-stu-id="04f8f-192">In the **ExtendingMapperSP – Send Port Properties** dialog box, click the **Outbound Maps** page.</span></span>  

    <span data-ttu-id="04f8f-193">**マップ**列で、ドロップダウン リストから必要なマップを選択します。 をクリック**OK**します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-193">In the **Map** column, select the required map from the drop-down list, and then click **OK**.</span></span> <span data-ttu-id="04f8f-194">マップは、次の表で説明します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-194">The maps are described in the following table.</span></span>  


   |                                 <span data-ttu-id="04f8f-195">プロパティに適用するマップ</span><span class="sxs-lookup"><span data-stu-id="04f8f-195">Map to apply Property</span></span>                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <span data-ttu-id="04f8f-196">説明</span><span class="sxs-lookup"><span data-stu-id="04f8f-196">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |---------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   |       <span data-ttu-id="04f8f-197">Microsoft.Samples.BizTalk.ExtendingMapper します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-197">Microsoft.Samples.BizTalk.ExtendingMapper.</span></span> <span data-ttu-id="04f8f-198">Scriptor_CallExternalAssembly</span><span class="sxs-lookup"><span data-stu-id="04f8f-198">Scriptor_CallExternalAssembly</span></span>        |                                                                                                                                                                                                                                                                                                                                       <span data-ttu-id="04f8f-199">外部 .NET アセンブリの関数を呼び出す方法を示します、 **Scripting**マップでは、functoid は、この functoid への入力パラメーターに基づいています。</span><span class="sxs-lookup"><span data-stu-id="04f8f-199">Demonstrates how to call into a function in an external .NET assembly from a **Scripting** functoid in a map, based on the input parameters to this functoid.</span></span> <span data-ttu-id="04f8f-200">これにより、マップ ファイルから処理ロジックを明確に分離できます。</span><span class="sxs-lookup"><span data-stu-id="04f8f-200">This helps cleanly separate any processing logic from the map file.</span></span> <span data-ttu-id="04f8f-201">このマップ ファイルは、このサンプルでアセンブリに付属している MapperClassLibrary.dll を使用します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-201">This map file uses the assembly MapperClassLibrary.dll that ships with this sample.</span></span>                                                                                                                                                                                                                                                                                                                                       |
   |           <span data-ttu-id="04f8f-202">Microsoft.Samples.BizTalk.ExtendingMapper します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-202">Microsoft.Samples.BizTalk.ExtendingMapper.</span></span> <span data-ttu-id="04f8f-203">Scriptor_InlineScripts</span><span class="sxs-lookup"><span data-stu-id="04f8f-203">Scriptor_InlineScripts</span></span>           |                                                                                                                                                                                                                                                                                                                                                                                                                 <span data-ttu-id="04f8f-204">内でインラインの単純なスクリプトを記述する方法を示します**Scripting** functoid の c#、Visual basic.net、および JScript.NET などの .NET 言語を使用してマップ ファイル。</span><span class="sxs-lookup"><span data-stu-id="04f8f-204">Demonstrates how to write simple inline scripts inside **Scripting** functoids in a map file using .NET languages such as C#, Visual Basic.NET, and JScript.NET.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                  |
   |   <span data-ttu-id="04f8f-205">Microsoft.Samples.BizTalk.ExtendingMapper します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-205">Microsoft.Samples.BizTalk.ExtendingMapper.</span></span> <span data-ttu-id="04f8f-206">Scriptor_GlobalVariableInInlineScript</span><span class="sxs-lookup"><span data-stu-id="04f8f-206">Scriptor_GlobalVariableInInlineScript</span></span>    |                                                                                                                                                                                                                                                                                                                                                                                        <span data-ttu-id="04f8f-207">インライン スクリプトでグローバル変数を使用する方法を示します**Scripting** functoid。</span><span class="sxs-lookup"><span data-stu-id="04f8f-207">Demonstrates how to use global variables in the inline scripts of **Scripting** functoids.</span></span> <span data-ttu-id="04f8f-208">グローバル変数を別の間でマップ ファイルの状態の情報を維持するために通常使用**Scripting** functoid。</span><span class="sxs-lookup"><span data-stu-id="04f8f-208">Global variables are usually used to maintain state information in a map file across different **Scripting** functoids.</span></span>                                                                                                                                                                                                                                                                                                                                                                                         |
   |            <span data-ttu-id="04f8f-209">Microsoft.Samples.BizTalk.ExtendingMapper します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-209">Microsoft.Samples.BizTalk.ExtendingMapper.</span></span> <span data-ttu-id="04f8f-210">Scriptor_InlineXslt</span><span class="sxs-lookup"><span data-stu-id="04f8f-210">Scriptor_InlineXslt</span></span>             |                                                                                                                                                                                                                                                                                                                                   <span data-ttu-id="04f8f-211">未処理のインライン XSLT を使用して、対象ドキュメントに構造を構築する方法について説明内で、 **Scripting** functoid マップにします。</span><span class="sxs-lookup"><span data-stu-id="04f8f-211">Demonstrates how to construct structure in the destination document using raw inline XSLT inside a **Scripting** functoid in the map.</span></span> <span data-ttu-id="04f8f-212">使用して、移行先ドキュメントの一部を構築する**Scripting** functoid とインライン XSLT たびはその他の functoid を使用して、BizTalk マッパーで作成することはできません。</span><span class="sxs-lookup"><span data-stu-id="04f8f-212">You can construct some parts of the destination document using **Scripting** functoids with inline XSLT whenever it is not possible to do that in BizTalk Mapper using other functoids.</span></span>                                                                                                                                                                                                                                                                                                                                   |
   |         <span data-ttu-id="04f8f-213">Microsoft.Samples.BizTalk.ExtendingMapper します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-213">Microsoft.Samples.BizTalk.ExtendingMapper.</span></span> <span data-ttu-id="04f8f-214">Scriptor_XsltCalltemplate</span><span class="sxs-lookup"><span data-stu-id="04f8f-214">Scriptor_XsltCalltemplate</span></span>          |                                                                                                                                                                                                                                <span data-ttu-id="04f8f-215">内で XSLT 呼び出しテンプレートを使用して、対象ドキュメントに構造を作成する方法を示します、 **Scripting** functoid マップにします。</span><span class="sxs-lookup"><span data-stu-id="04f8f-215">Demonstrates how to create structure in the destination document using an XSLT Call template inside a **Scripting** functoid in the map.</span></span> <span data-ttu-id="04f8f-216">XSLT 呼び出しテンプレートのインライン XSLT 呼び出しテンプレートにパラメーターを受け入れることができます構造を作成できるようにするにはより有利な点がへの入力パラメーターに基づく、 **Scripting** functoid。</span><span class="sxs-lookup"><span data-stu-id="04f8f-216">The advantage of an XSLT Call template over inline XSLT is that the call template can accept parameters, so you can create the structure based on input parameters to the **Scripting** functoid.</span></span> <span data-ttu-id="04f8f-217">使用して、移行先ドキュメントの一部を構築する**Scripting** functoid とインライン XSLT たびはその他の functoid を使用して、BizTalk マッパーで作成することはできません。</span><span class="sxs-lookup"><span data-stu-id="04f8f-217">You can construct some parts of the destination document using **Scripting** functoids with inline XSLT whenever it is not possible to do that in BizTalk Mapper using other functoids.</span></span>                                                                                                                                                                                                                                 |
   | <span data-ttu-id="04f8f-218">Microsoft.Samples.BizTalk.ExtendingMapper します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-218">Microsoft.Samples.BizTalk.ExtendingMapper.</span></span> <span data-ttu-id="04f8f-219">Scriptor_InlineXsltCallingExternalAssembly</span><span class="sxs-lookup"><span data-stu-id="04f8f-219">Scriptor_InlineXsltCallingExternalAssembly</span></span> |                                                                                                                                                                                                                           <span data-ttu-id="04f8f-220">インライン XSLT 内から外部 .NET アセンブリを呼び出す方法を示しますの**Scripting** functoid をマップします。</span><span class="sxs-lookup"><span data-stu-id="04f8f-220">Demonstrates how to call into an external .NET assembly from inside The inline XSLT of a **Scripting** functoid in a map.</span></span> <span data-ttu-id="04f8f-221">オーバーライドする方法について説明します、**カスタム拡張 XML**カスタム拡張ファイル ExternalAssembly_extxml.xml を呼び出す外部 .NET アセンブリの詳細が含まれる BizTalk マッパー グリッドのプロパティ。</span><span class="sxs-lookup"><span data-stu-id="04f8f-221">Explains how you can override the **Custom Extension XML** property of the BizTalk Mapper grid with the custom extension file ExternalAssembly_extxml.xml that contains the details of the external .NET assembly to invoke.</span></span> <span data-ttu-id="04f8f-222">使用して、移行先ドキュメントの一部を構築する**Scripting** functoid とインライン XSLT たびに、他の functoid を使用してマッパー UI で実行することはできません。</span><span class="sxs-lookup"><span data-stu-id="04f8f-222">You can construct some parts of the destination document using **Scripting** functoids with inline XSLT whenever it is not possible to do that in the Mapper UI using other functoids.</span></span>                                                                                                                                                                                                                           |
   |             <span data-ttu-id="04f8f-223">Microsoft.Samples.BizTalk.ExtendingMapper します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-223">Microsoft.Samples.BizTalk.ExtendingMapper.</span></span> <span data-ttu-id="04f8f-224">OverridingMapXslt</span><span class="sxs-lookup"><span data-stu-id="04f8f-224">OverridingMapXslt</span></span>              | <span data-ttu-id="04f8f-225">カスタム XSLT ファイルを使用して、BizTalk マッパー ファイルのコンパイル済み XSLT を完全に上書きする方法を示します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-225">Demonstrates how to completely override the compiled XSLT of the BizTalk Mapper file with a custom XSLT file.</span></span> <span data-ttu-id="04f8f-226">オーバーライドすることでこれを行う、**カスタム XSL パス**プロパティと、必要に応じて、**カスタム拡張 XML** BizTalk マッパー グリッドのプロパティ。</span><span class="sxs-lookup"><span data-stu-id="04f8f-226">You can do this by overriding the **Custom XSL Path**property and optionally the **Custom Extension XML** property of the BizTalk Mapper grid.</span></span> <span data-ttu-id="04f8f-227">指定したカスタム XSLT ファイルが含まれるコンパイル[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]実行時に使用するプロジェクトのアセンブリ。</span><span class="sxs-lookup"><span data-stu-id="04f8f-227">The custom XSLT file that you provide is included in the compiled [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] assembly of the project you want to use at run time.</span></span> <span data-ttu-id="04f8f-228">この場合は、マップ ファイル (.btm) の内容は無視されます。</span><span class="sxs-lookup"><span data-stu-id="04f8f-228">In this case, the contents of the map file (.btm) are ignored.</span></span> <span data-ttu-id="04f8f-229">このマップ ファイルに対しておよびの OverridingMapXslt.xml を使用して、**カスタム XSL パス**と**カスタム拡張 XML**プロパティでは、それぞれします。</span><span class="sxs-lookup"><span data-stu-id="04f8f-229">This map file uses OverridingMapXslt.xslt and OverridingMapXslt.xml for the **Custom XSL Path** and **Custom Extension XML** properties, respectively.</span></span><br /><br /> <span data-ttu-id="04f8f-230">ソリューション エクスプ ローラーでマップ ファイルを検証することができます。</span><span class="sxs-lookup"><span data-stu-id="04f8f-230">You can validate a map file in Solution Explorer.</span></span> <span data-ttu-id="04f8f-231">テンプレート ファイルを編集して使用として使用することができますし、**カスタム XSL パス**BizTalk マッパー グリッドのプロパティ。</span><span class="sxs-lookup"><span data-stu-id="04f8f-231">You can then use it as a template file that you can edit and use for the **Custom XSL Path** property of the BizTalk Mapper grid.</span></span> <span data-ttu-id="04f8f-232">BizTalk マッパーを使用してこの XSLT を生成することはできませんたびに、このオプションを使用できます。</span><span class="sxs-lookup"><span data-stu-id="04f8f-232">You can resort to this option whenever it is not possible to produce this XSLT using BizTalk Mapper.</span></span> |

## <a name="running-this-sample"></a><span data-ttu-id="04f8f-233">このサンプルの実行</span><span class="sxs-lookup"><span data-stu-id="04f8f-233">Running This Sample</span></span>  
 <span data-ttu-id="04f8f-234">Extending Mapper サンプルを実行するのにには、次の手順を使用します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-234">Use the following procedure to run the Extending Mapper sample.</span></span>  

#### <a name="to-run-this-sample"></a><span data-ttu-id="04f8f-235">このサンプルを実行するには</span><span class="sxs-lookup"><span data-stu-id="04f8f-235">To run this sample</span></span>  

1.  <span data-ttu-id="04f8f-236">入力ファイル ExtendingMapper.xml の入力フォルダーにコピー *\<サンプル パス\>* \XmlTools\ExtendingMapper\In します。</span><span class="sxs-lookup"><span data-stu-id="04f8f-236">Copy the input file ExtendingMapper.xml into the input folder at *\<Samples Path\>* \XmlTools\ExtendingMapper\In.</span></span>  

2.  <span data-ttu-id="04f8f-237">ファイルの変換およびルーティングする方法に注意してください、 *\<サンプル パス\>* \XmlTools\ExtendingMapper\Out フォルダ。</span><span class="sxs-lookup"><span data-stu-id="04f8f-237">Notice how the file is transformed and routed to the *\<Samples Path\>* \XmlTools\ExtendingMapper\Out folder.</span></span> <span data-ttu-id="04f8f-238">実行される変換は、適用したマップに基づいています。</span><span class="sxs-lookup"><span data-stu-id="04f8f-238">The transformation that occurs is based on the map you applied.</span></span>  

## <a name="see-also"></a><span data-ttu-id="04f8f-239">参照</span><span class="sxs-lookup"><span data-stu-id="04f8f-239">See Also</span></span>  
 [<span data-ttu-id="04f8f-240">XML ツール (BizTalk Server Samples フォルダー)</span><span class="sxs-lookup"><span data-stu-id="04f8f-240">XML Tools (BizTalk Server Samples Folder)</span></span>](../core/xml-tools-biztalk-server-samples-folder.md)