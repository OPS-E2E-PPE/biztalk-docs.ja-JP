---
title: "DTA 追跡の MST を測定するためのシナリオをテスト |Microsoft ドキュメント"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 303dc1d8-baac-4b54-92c8-95c0ce640a76
caps.latest.revision: "12"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 28a1cee9de5a97ac7430cebbee8b5e2a253a1ceb
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/20/2017
---
# <a name="test-scenarios-for-measuring-mst-of-dta-tracking"></a><span data-ttu-id="e2c97-102">DTA 追跡の MST を測定するためのテスト シナリオ</span><span class="sxs-lookup"><span data-stu-id="e2c97-102">Test Scenarios for Measuring MST of DTA Tracking</span></span>
<span data-ttu-id="e2c97-103">これらが実際にはどのように機能するのかを示すために、および追跡における維持可能な最大スループット (MST) を測定する簡単な手法を紹介するために、ここでは、追跡の MST が測定されているテスト シナリオを提供します。</span><span class="sxs-lookup"><span data-stu-id="e2c97-103">To show how all of this works in practice and to introduce a simple technique for measuring maximum sustainable throughput (MST) for tracking, we will now present a test scenario for which the tracking MST has been measured.</span></span> <span data-ttu-id="e2c97-104">関連する手法が提供されるだけでなく、示されるデータを基に他のシステムの追跡パフォーマンスを測定することもできます。</span><span class="sxs-lookup"><span data-stu-id="e2c97-104">Not only will we provide the techniques involved, but you can use the data presented as a starting point to estimate tracking performance for other systems.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="e2c97-105">読者は、このトピックに含まれる情報が発行日の時点で扱われた問題に関するマイクロソフトの現在の見解を示していることに注意する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e2c97-105">Readers should be aware that the information contained in this topic represents the current view of Microsoft on the issues discussed as of the date of publication.</span></span> <span data-ttu-id="e2c97-106">市場の状況とテクノロジの変化に対応する必要があるため、マイクロソフトでは、発行日以降に示された情報の正確性は保証できません。</span><span class="sxs-lookup"><span data-stu-id="e2c97-106">Because we must respond to changing market conditions and technologies, Microsoft cannot guarantee the accuracy of any information presented after the date of publication.</span></span>  
  
## <a name="test-scenario-topology-and-configuration"></a><span data-ttu-id="e2c97-107">テスト シナリオのトポロジと構成</span><span class="sxs-lookup"><span data-stu-id="e2c97-107">Test Scenario Topology and Configuration</span></span>  
 <span data-ttu-id="e2c97-108">テスト シナリオのトポロジと構成を次の図に示します。</span><span class="sxs-lookup"><span data-stu-id="e2c97-108">The following figure shows the topology and configuration for the test scenario.</span></span>  <span data-ttu-id="e2c97-109">ここでは、4 つのメッセージ ボックス データベース サーバー、1 つの専用 BizTalkDTADb データベース サーバー、および [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] を実行する合計 7 つのサーバーでビルドアウトされており、サイズ変更が可能です。</span><span class="sxs-lookup"><span data-stu-id="e2c97-109">It is a sizable build-out with four MessageBox database servers, a dedicated BizTalkDTADb database server, and a total of seven servers running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="e2c97-110">図に描かれている BAM サーバーは、このテスト シナリオでは使用されなかったことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="e2c97-110">Note that the BAM server pictured in the figure was not in use for this test scenario.</span></span>  
  
 <span data-ttu-id="e2c97-111">**BizTalkDTADb の維持可能なスループット**</span><span class="sxs-lookup"><span data-stu-id="e2c97-111">**BizTalkDTADb Sustainable Throughput**</span></span>  
  
 <span data-ttu-id="e2c97-112">![追跡パフォーマンス トポロジ](../core/media/trackingperformancetopology.gif "TrackingPerformanceTopology")</span><span class="sxs-lookup"><span data-stu-id="e2c97-112">![Tracking performance topology](../core/media/trackingperformancetopology.gif "TrackingPerformanceTopology")</span></span>  
  
 <span data-ttu-id="e2c97-113">**ハードウェア仕様 (BizTalk Server)**</span><span class="sxs-lookup"><span data-stu-id="e2c97-113">**Hardware specification (BizTalk Server)**</span></span>  
  
-   <span data-ttu-id="e2c97-114">CPU: デュアル 3 GHz (キャッシュ: L2: 512 KB/L3: 1 MB)</span><span class="sxs-lookup"><span data-stu-id="e2c97-114">CPU: Dual 3 GHz (Cache: L2: 512 KB/L3: 1 MB)</span></span>  
  
-   <span data-ttu-id="e2c97-115">メモリ: 2 GB の RAM</span><span class="sxs-lookup"><span data-stu-id="e2c97-115">Memory: 2 GB of RAM</span></span>  
  
-   <span data-ttu-id="e2c97-116">HDD: 2 X 32 GB/15 K 台</span><span class="sxs-lookup"><span data-stu-id="e2c97-116">HDD: 2 X 32 GB/15 K</span></span>  
  
 <span data-ttu-id="e2c97-117">**ハードウェア仕様 (SQL Server)**</span><span class="sxs-lookup"><span data-stu-id="e2c97-117">**Hardware specification (SQL Server)**</span></span>  
  
-   <span data-ttu-id="e2c97-118">CPU: クアッド 2 GHz (L2: 512 KB/L3: 1 MB)</span><span class="sxs-lookup"><span data-stu-id="e2c97-118">CPU: Quad 2 GHz (L2: 512 KB/L3: 1 MB)</span></span>  
  
-   <span data-ttu-id="e2c97-119">メモリ: 4 GB の RAM</span><span class="sxs-lookup"><span data-stu-id="e2c97-119">Memory: 4 GB of RAM</span></span>  
  
-   <span data-ttu-id="e2c97-120">HDD: 2 X 32 GB/15 K 台 + SAN</span><span class="sxs-lookup"><span data-stu-id="e2c97-120">HDD: 2 X 32 GB/15 K + SAN</span></span>  
  
 <span data-ttu-id="e2c97-121">次の図は、テスト シナリオ アーキテクチャの概要を示しており、その要素を以下に示します。</span><span class="sxs-lookup"><span data-stu-id="e2c97-121">The next figure provides an overview of the test scenario architecture, where</span></span>  
  
-   <span data-ttu-id="e2c97-122">**TP**追跡ポイントは、いくつかの要素をなどのイベントが追跡されますまたはメッセージ プロパティを = です。</span><span class="sxs-lookup"><span data-stu-id="e2c97-122">**TP** = Track Point, a point at which some elements are tracked such as events or message properties.</span></span>  
  
-   <span data-ttu-id="e2c97-123">**MB** = メッセージ本文、メッセージ本文を追跡するポイント。</span><span class="sxs-lookup"><span data-stu-id="e2c97-123">**MB** = Message Body, a point at which a message body is tracked.</span></span>  
  
 <span data-ttu-id="e2c97-124">次のソリューション アーキテクチャは、以下の 3 つの主な構成コンポーネントでの追跡構成を示しています。</span><span class="sxs-lookup"><span data-stu-id="e2c97-124">The following solution architecture shows a tracking configuration with three main configuration components:</span></span>  
  
-   <span data-ttu-id="e2c97-125">**既定の DTA 追跡**です。</span><span class="sxs-lookup"><span data-stu-id="e2c97-125">**Default DTA Tracking**.</span></span> <span data-ttu-id="e2c97-126">図中のイベント追跡ポイントは、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] のインストール時に、既定ですべて有効になっています。</span><span class="sxs-lookup"><span data-stu-id="e2c97-126">All of the event track points in the figure are on by default when [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] is installed.</span></span>  
  
-   <span data-ttu-id="e2c97-127">**メッセージ プロパティ**です。</span><span class="sxs-lookup"><span data-stu-id="e2c97-127">**Message Properties**.</span></span> <span data-ttu-id="e2c97-128">受信パイプラインの逆アセンブラー (DA) コンポーネントに関連付けられている追跡ポイントは、受信メッセージの 10 プロパティの追跡を表しています。</span><span class="sxs-lookup"><span data-stu-id="e2c97-128">The track point associated with the dis-assembler (DA) component in the inbound pipeline represents the tracking of 10 properties from the inbound message.</span></span> <span data-ttu-id="e2c97-129">追跡のためのプロパティを昇格する方法の詳細については、次を参照してください。[プロパティの昇格](../core/promoting-properties.md)です。</span><span class="sxs-lookup"><span data-stu-id="e2c97-129">For more information about how to promote properties for tracking, see [Promoting Properties](../core/promoting-properties.md).</span></span>  
  
-   <span data-ttu-id="e2c97-130">**メッセージ本文**です。</span><span class="sxs-lookup"><span data-stu-id="e2c97-130">**Message Body**.</span></span> <span data-ttu-id="e2c97-131">図中の 2 つのメッセージ本文 (MB) ポイントは、メッセージ本文を追跡するポイントを表しています。</span><span class="sxs-lookup"><span data-stu-id="e2c97-131">The two message body (MB) points from the figure represent the points at which message bodies are tracked.</span></span> <span data-ttu-id="e2c97-132">メッセージ本文の追跡を設定する方法の詳細については、次を参照してください。 [、BizTalk Server 管理コンソールを使用した追跡構成](http://msdn.microsoft.com/en-us/49b7f9d3-60b5-41bd-ba8b-029253926bef)です。</span><span class="sxs-lookup"><span data-stu-id="e2c97-132">For more information on how to set up message body tracking, see [Configuring Tracking Using the BizTalk Server Administration Console](http://msdn.microsoft.com/en-us/49b7f9d3-60b5-41bd-ba8b-029253926bef).</span></span>  
  
 <span data-ttu-id="e2c97-133">**テスト シナリオ アーキテクチャ**</span><span class="sxs-lookup"><span data-stu-id="e2c97-133">**Test Scenario Architecture**</span></span>  
  
 <span data-ttu-id="e2c97-134">![パフォーマンス シナリオ](../core/media/performancescenarios.gif "PerformanceScenarios")</span><span class="sxs-lookup"><span data-stu-id="e2c97-134">![Performance scenarios](../core/media/performancescenarios.gif "PerformanceScenarios")</span></span>  
  
## <a name="test-techniques"></a><span data-ttu-id="e2c97-135">テスト手法</span><span class="sxs-lookup"><span data-stu-id="e2c97-135">Test Techniques</span></span>  
 <span data-ttu-id="e2c97-136">ファイル アダプターは送受信の両方で使用しました。</span><span class="sxs-lookup"><span data-stu-id="e2c97-136">The file adapter was used for both receiving and sending.</span></span> <span data-ttu-id="e2c97-137">負荷生成ツール LoadGen 2007 を使用して、メッセージを受信ファイル共有に配信しました。</span><span class="sxs-lookup"><span data-stu-id="e2c97-137">We used the Load Generation tool, LoadGen 2007, to deliver messages to the inbound file share.</span></span> <span data-ttu-id="e2c97-138">特定のレートでファイルを配信するように LoadGen ツールを構成することで、追跡 MST レベルの調査中に負荷を変更できるようにしました。</span><span class="sxs-lookup"><span data-stu-id="e2c97-138">The LoadGen tool was configured to deliver files at a specific rate so that we could vary the load while searching for our tracking MST level.</span></span> <span data-ttu-id="e2c97-139">LoadGen ツールの詳細については、次を参照してください。 [Microsoft BizTalk LoadGen 2007 ツールを使用して](../core/using-the-microsoft-biztalk-loadgen-2007-tool.md)です。</span><span class="sxs-lookup"><span data-stu-id="e2c97-139">For more information about the LoadGen tool, see [Using the Microsoft BizTalk LoadGen 2007 Tool](../core/using-the-microsoft-biztalk-loadgen-2007-tool.md).</span></span>  
  
 <span data-ttu-id="e2c97-140">このテストでは、BizTalkDTADb データベースでの 24 時間保持の要件を前提としました。</span><span class="sxs-lookup"><span data-stu-id="e2c97-140">For our tests, we assumed a requirement of 24 hrs retention in the BizTalkDTADb database.</span></span> <span data-ttu-id="e2c97-141">したがって、24 時間を経過したデータはすべてデータベースから削除されました。</span><span class="sxs-lookup"><span data-stu-id="e2c97-141">That is, anything older than 24 hrs was purged from the database.</span></span> <span data-ttu-id="e2c97-142">アーカイブと削除を行う SQL ジョブは、アーカイブしたデータのみを削除するように設計されているので、このプロセスの間に失われるデータは一切ありません。</span><span class="sxs-lookup"><span data-stu-id="e2c97-142">The archive and purge SQL job is designed so that only the data that has been archived is purged so that no data is lost during the process.</span></span>  
  
 <span data-ttu-id="e2c97-143">この要件でシステムについて十分なテストを行うには、最低でも 25 時間の負荷を実行して、アーカイブと削除のサイクルが少なくとも 1 回は含まれるようにする必要がありました。</span><span class="sxs-lookup"><span data-stu-id="e2c97-143">To fully test the system with this requirement, it was necessary to run the load for at least 25 hours so that at least one archive and purge cycle was included.</span></span> <span data-ttu-id="e2c97-144">システムが維持可能であることを確かめるために、48 時間継続で負荷を実行して最初のアーカイブ後にシステムを 24 時間監視することを選択しました。</span><span class="sxs-lookup"><span data-stu-id="e2c97-144">We elected to run for a full 48 hours to monitor the system for 24 hours after the first archive to be sure it was sustainable.</span></span> <span data-ttu-id="e2c97-145">最初の 24 時間は、定常状態のシミュレートを目的とするアーカイブ (24 時間ごと) の対象になる経過時間のデータを形成するために使われました。</span><span class="sxs-lookup"><span data-stu-id="e2c97-145">The first 24 hours was required in order to build up data that was old enough to be archived (every 24 hours) to simulate steady state.</span></span> <span data-ttu-id="e2c97-146">次の 24 時間では、システムを監視してすべてのプロセス (たとえば、TDDS、アーカイブ、および削除) でスループットが維持できているかどうかを判断しました。</span><span class="sxs-lookup"><span data-stu-id="e2c97-146">The system was monitored during the second 24 hours to determine that all processes (for example, TDDS, archiving and purging) were able to keep up with the throughput.</span></span>  
  
 <span data-ttu-id="e2c97-147">追跡動作についての理解から、持続性を判断するために監視する必要がある主要業績評価指標 (KPI) は、通常、次のごくわずかであることがわかります。</span><span class="sxs-lookup"><span data-stu-id="e2c97-147">Drawing from our understanding of the tracking behavior, there are just a few key performance indicators (KPI) that typically need to be monitored to determine sustainability:</span></span>  
  
-   <span data-ttu-id="e2c97-148">**BizTalkDTADb データベース データ ファイルのアイドル時間の物理的なディスク**です。</span><span class="sxs-lookup"><span data-stu-id="e2c97-148">**The physical disk idle time for BizTalkDTADb database data file**.</span></span> <span data-ttu-id="e2c97-149">物理的なディスク アイドル時間が 0 に近ければ、BizTalkDTADb データベースに追跡データの流入、アーカイブ アクティビティ、削除アクティビティのいずれかまたはすべてが浸透していることを示す望ましい状態です。</span><span class="sxs-lookup"><span data-stu-id="e2c97-149">If the physical disk idle time approaches 0, this is a good sign that the BizTalkDTADb database is saturated with either the influx of tracked data, archiving activity, and/or purging activity.</span></span>  
  
-   <span data-ttu-id="e2c97-150">**Trackingdata テーブルの深さ**です。</span><span class="sxs-lookup"><span data-stu-id="e2c97-150">**The trackingdata table depth**.</span></span> <span data-ttu-id="e2c97-151">trackingdata テーブルが単調拡大を始めた場合、つまり、無制限に大きくなり続ける場合は、現在のスループット レートでは、TDDS で BizTalkDTADb データベースにデータを持続可能な速さで挿入できないことを明示しています。</span><span class="sxs-lookup"><span data-stu-id="e2c97-151">If the trackingdata table starts to grow monotonically, that is, continues to grow unbounded, then it is a clear sign that, at the current throughput rate, TDDS is not able to insert data into the BizTalkDTADb database fast enough to keep up.</span></span>  
  
-   <span data-ttu-id="e2c97-152">**スプールの深さ**です。</span><span class="sxs-lookup"><span data-stu-id="e2c97-152">**The spool depth**.</span></span> <span data-ttu-id="e2c97-153">スプールの増大につながる可能性のある要因はいくつかあります。</span><span class="sxs-lookup"><span data-stu-id="e2c97-153">There are a number of things that can cause the spool to grow.</span></span> <span data-ttu-id="e2c97-154">スプールの増大を招く可能性のある状況の 1 つは、追跡メッセージの本文をメッセージ ボックス データベースから BizTalkDTADb データベースにコピーする SQL ジョブが遅延している場合です。</span><span class="sxs-lookup"><span data-stu-id="e2c97-154">One of the situations that can cause spool growth is if the SQL job that copies tracked message bodies from the MessageBox database to the BizTalkDTADb database gets behind.</span></span> <span data-ttu-id="e2c97-155">追跡する必要があるメッセージは、BizTalkDTADb データベースに正常にコピーされるまでメッセージ ボックス データベースから削除する (メッセージ ボックスのクリーンアップ ジョブによる) ことができないので、コピー ジョブが遅延すると、スプールの増大を招くことになります。</span><span class="sxs-lookup"><span data-stu-id="e2c97-155">Because the messages that need to be tracked cannot be removed from the MessageBox database (by the MessageBox cleanup jobs) until they have been successfully copied to the BizTalkDTADb database, if the copy job gets behind, it results in spool build up.</span></span>  
  
 <span data-ttu-id="e2c97-156">ほとんどのシステムでは、負荷状況下でこの 3 つの業績評価指標のみを監視すれば、負荷が維持可能かどうかを判断する十分な情報を得られます。</span><span class="sxs-lookup"><span data-stu-id="e2c97-156">For the majority of systems, monitoring just these three performance indicators under load provides enough information to determine if the load is sustainable or not.</span></span>  
  
 <span data-ttu-id="e2c97-157">**維持可能な負荷の下で主要業績評価指標**</span><span class="sxs-lookup"><span data-stu-id="e2c97-157">**Key Performance Indicators Under Sustainable Load**</span></span>  
  
 <span data-ttu-id="e2c97-158">![追跡データベースのパフォーマンスを監視](../core/media/perf-monitor-tracking-db.gif "Perf_Monitor_Tracking_db")</span><span class="sxs-lookup"><span data-stu-id="e2c97-158">![Performance monitoring for the Tracking database](../core/media/perf-monitor-tracking-db.gif "Perf_Monitor_Tracking_db")</span></span>  
  
 <span data-ttu-id="e2c97-159">サンプル シナリオを使用して毎秒 20 メッセージが受信される負荷の下で、生成されたパフォーマンス グラフに示されているように、48 時間分の主要業績評価指標を得ました。</span><span class="sxs-lookup"><span data-stu-id="e2c97-159">Using the sample scenario, with a load of 20 messages received per second, we acquired 48 hours worth of key performance indicators as shown in the generated Perfmon graph.</span></span> <span data-ttu-id="e2c97-160">このグラフから、持続性を示す以下の傾向がわかります。</span><span class="sxs-lookup"><span data-stu-id="e2c97-160">Note from the graph, the following trends that indicate sustainability:</span></span>  
  
-   <span data-ttu-id="e2c97-161">**Biztalkdtadb データの深さ (黒い線)**です。</span><span class="sxs-lookup"><span data-stu-id="e2c97-161">**BizTalkDTADbdata depth (black lines)**.</span></span> <span data-ttu-id="e2c97-162">3 つの公開メッセージ ボックス データベースでは、24 時間の時点での最初のアーカイブの後も、trackingdata テーブルの深さは安定し、上昇傾向が続いていないことがわかります。</span><span class="sxs-lookup"><span data-stu-id="e2c97-162">With our three publishing MessageBox databases, we can see that, even after the first archive at 24 hours, the depth of the trackingdata table stabilizes and does not continue to trend up.</span></span>  
  
-   <span data-ttu-id="e2c97-163">**スプールの深さ (青い線)**です。</span><span class="sxs-lookup"><span data-stu-id="e2c97-163">**Spool depth (blue lines)**.</span></span> <span data-ttu-id="e2c97-164">スプールの深さはこの実行をとおしてとても安定しており、アーカイブと削除によりリソースが使用されていても、追跡メッセージ (各メッセージのサイズは 10 KB) が BizTalkDTADb データベースに遅延することなくコピーされていることが示されています。</span><span class="sxs-lookup"><span data-stu-id="e2c97-164">The spool depth is very stable throughout the run indicating that, even with archiving and purging taking resources, the tracked messages, which are each 10 kilobytes in size, are copied to the BizTalkDTADb database without falling behind.</span></span>  
  
-   <span data-ttu-id="e2c97-165">**BizTalkDTADb データベース データ ファイルの物理のディスク アイドル時間 (赤い線)**です。</span><span class="sxs-lookup"><span data-stu-id="e2c97-165">**BizTalkDTADb database data file Physical Disk Idle Time (red line)**.</span></span> <span data-ttu-id="e2c97-166">最初の 24 時間は、アーカイブと削除が実行されることはなく、BizTalkDTADb データベースにデータが蓄積されるにつれて TDDS によるデータの挿入などディスク I/O が増加します。</span><span class="sxs-lookup"><span data-stu-id="e2c97-166">For the first 24 hours before archive and purge have any work to do, the BizTalkDTADb database is accumulating more and more data which results in more and more disk I/O as data is inserted by TDDS.</span></span> <span data-ttu-id="e2c97-167">これは、物理的なディスク アイドル時間の安定した低下としてはっきりと示されています。</span><span class="sxs-lookup"><span data-stu-id="e2c97-167">This is clearly seen as a steady decline in the physical disk idle time.</span></span>  
  
     <span data-ttu-id="e2c97-168">実行に 24 時間に、I/O アイドル時間の明確な低下が確認されて、アーカイブと削除を行うには作業が最初の時刻と一致します。</span><span class="sxs-lookup"><span data-stu-id="e2c97-168">At 24 hours into the run, a clear drop in I/O idle time is observed, which coincides with the first time that archive and purge have work to do.</span></span> <span data-ttu-id="e2c97-169">最初のアーカイブ後パージがほぼゼロになる (ただし、まだ、システム上の負荷がある)、24 時間よりも古いデータを削除する 1 分ごとに行う作業のアイドル時間。</span><span class="sxs-lookup"><span data-stu-id="e2c97-169">After the first archive, purge has work to do every minute to purge data older than 24 hours (remember, there is still load on the system), which results in a near zero idle time.</span></span>  
  
     <span data-ttu-id="e2c97-170">ここで重要な点は、行われた後の最初のアーカイブは、最初「有効」BizTalkDTADb データベース データの保持期間ウィンドウに合格しましたが、ディスクのアイドル時間は非常に近くなります 0 システムの MST に近いときです。</span><span class="sxs-lookup"><span data-stu-id="e2c97-170">A key point here is that, after the first archive has taken place, that is, the system has passed the first "live BizTalkDTADb database data retention" window, the disk idle time will be very near zero when the system is at or near MST.</span></span> <span data-ttu-id="e2c97-171">これは、BizTalkDTADb データベースのボトルネックが、ほとんどの場合ディスク I/O サブシステムの速度であるためです。</span><span class="sxs-lookup"><span data-stu-id="e2c97-171">This is because the bottleneck for the BizTalkDTADb database is almost always the speed of the disk I/O subsystem.</span></span>  
  
 <span data-ttu-id="e2c97-172">システムのベースラインとして追跡を無効にして MST を測定することは、多くの場合で有益です。</span><span class="sxs-lookup"><span data-stu-id="e2c97-172">In many cases, it can be beneficial to measure MST with tracking off as a baseline for the system.</span></span> <span data-ttu-id="e2c97-173">このテストでの例として、追跡をすべて無効にした状態での MST は毎秒 290 メッセージで、これは上記の機能や DTA データ保有期間で追跡を有効にしたシステムの MST の何倍にもなります。</span><span class="sxs-lookup"><span data-stu-id="e2c97-173">In our case, for example, the MST with all tracking turned off was 290 messages per second, which is many times the MST of the system with tracking turned on with the features and DTA data retention window stated above.</span></span> <span data-ttu-id="e2c97-174">このことから、追跡を有効にしたシステムは、あまり活用されていないことがわかります。</span><span class="sxs-lookup"><span data-stu-id="e2c97-174">This tells us that the system with tracking turned on is significantly under utilized.</span></span> <span data-ttu-id="e2c97-175">つまり、毎秒 20 メッセージの MST の追跡のサポートだけが必要な場合は、毎秒 290 メッセージの処理が可能なシステムを構築する必要はありません。言い換えれば、BizTalkDTADb データベースのハードウェアを変更しない場合は、毎秒 20 メッセージのスループットを実現するのに必要とされる BizTalk データベース サーバーとメッセージ ボックス データベース サーバーの数は、このシナリオのものよりはるかに少ないと考えられます。</span><span class="sxs-lookup"><span data-stu-id="e2c97-175">That is, we do not need to build a system capable of 290 messages/sec when tracking the things we need to track will only support an MST of 20 messages/sec. Stated another way, assuming the BizTalkDTADb database hardware doesn’t change, many fewer BizTalk and MessageBox database servers would be required to achieve a throughput of 20 messages per second than what we have in our scenario.</span></span>  
  
## <a name="searching-for-maximum-sustainable-throughput"></a><span data-ttu-id="e2c97-176">維持可能な最大スループットの調査</span><span class="sxs-lookup"><span data-stu-id="e2c97-176">Searching for Maximum Sustainable Throughput</span></span>  
 <span data-ttu-id="e2c97-177">これで、MST で実行されているシステムの KPI がどのようなものであるかがわかったので、サンプル シナリオの毎秒 20 メッセージ の MST に至った過程を確認して検討しましょう。</span><span class="sxs-lookup"><span data-stu-id="e2c97-177">Now that we have seen what the KPI look like for a system running at MST, let’s back up and discuss how we arrived at our 20 messages/sec MST for the sample scenario.</span></span> <span data-ttu-id="e2c97-178">その過程は単純な繰り返しで、以下に示すような "バイナリ サーチ" アプローチです。</span><span class="sxs-lookup"><span data-stu-id="e2c97-178">It is a simple iterative, "binary search" approach as follows:</span></span>  
  
-   <span data-ttu-id="e2c97-179">**開始ポイントを選択**です。</span><span class="sxs-lookup"><span data-stu-id="e2c97-179">**Pick a starting point**.</span></span> <span data-ttu-id="e2c97-180">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] でのパフォーマンス テストの経験がまだなければ、他のシステムで得られていることに関する利用可能な情報を活用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="e2c97-180">Unless you already have experience with performance testing on [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], you will need to avail yourself of the information available on what has been achieved on other systems.</span></span>  
  
     <span data-ttu-id="e2c97-181">たとえば、このトピックのサンプル シナリオのハードウェア、構成、ソリューションについてのアーキテクチャはすべて提供してきました。</span><span class="sxs-lookup"><span data-stu-id="e2c97-181">For example, we have provided all of the hardware, configuration, and solution architecture for the sample scenario in this topic.</span></span> <span data-ttu-id="e2c97-182">そのアーキテクチャと有効にした追跡の種類 (既定 + 10 プロパティ + 10 KB のメッセージ本文) や 24 時間の DTA データ保有期間で得られた MST (毎秒20 メッセージ) を使用して、アーキテクチャとセットアップや要件を比較します。</span><span class="sxs-lookup"><span data-stu-id="e2c97-182">Using that, and the type of tracking we had turned on (default + 10 properties + 10KB message bodies) and the MST we achieved (20 msgs/sec) with a 24 hour DTA data retention window, compare that to your setup and requirements.</span></span>  
  
     <span data-ttu-id="e2c97-183">少なくとも、ソリューションの MST が、このテストで得られた値より高くなるか低くなるかを見積もる必要があります。</span><span class="sxs-lookup"><span data-stu-id="e2c97-183">You should at least be able to estimate if the MST for your solution will be higher or lower than what we achieved.</span></span> <span data-ttu-id="e2c97-184">使用するシステムとの比較に、さまざまなテクニカル ケース スタディを利用できる場合もあります。</span><span class="sxs-lookup"><span data-stu-id="e2c97-184">Various technical case studies may also be available to which you can compare your system.</span></span> <span data-ttu-id="e2c97-185">例については、BizTalk Server デベロッパー センターで利用できるケース スタディを参照してください。 で[http://go.microsoft.com/fwlink/?LinkId=49339](http://go.microsoft.com/fwlink/?LinkId=49339)です。</span><span class="sxs-lookup"><span data-stu-id="e2c97-185">For examples, see the case studies available on the BizTalk Server Developer Center, at [http://go.microsoft.com/fwlink/?LinkId=49339](http://go.microsoft.com/fwlink/?LinkId=49339).</span></span>  
  
-   <span data-ttu-id="e2c97-186">**推定 MST の負荷の下でシステムを実行して、KPI の監視**です。</span><span class="sxs-lookup"><span data-stu-id="e2c97-186">**Run the system under the estimated MST load and monitor the KPI**.</span></span> <span data-ttu-id="e2c97-187">通常、推定 MST の高い側から開始することで、MST を見つけるためにかかる時間を短縮できます。</span><span class="sxs-lookup"><span data-stu-id="e2c97-187">Typically, starting out on the high side of your expected MST can shorten the time it takes to find MST.</span></span> <span data-ttu-id="e2c97-188">高い値からの開始により、MST を下回っていることがわかるのにかかる時間 (つまり、少なくとも 1 つのデータ保有期間の満了) よりも早く KPI が飽和状態 (特に ディスク I/O) に達します。</span><span class="sxs-lookup"><span data-stu-id="e2c97-188">By starting high, you will drive the KPI to saturation (especially disk I/O) in less time than it will take to discover that you are below MST (that is, at least one full data retention window).</span></span>  
  
-   <span data-ttu-id="e2c97-189">**MST の推定値と繰り返しを絞り込む**です。</span><span class="sxs-lookup"><span data-stu-id="e2c97-189">**Refine the MST Estimate and Repeat**.</span></span> <span data-ttu-id="e2c97-190">テストの実行結果を見て、MST の推定値を調整し、新しい推定値で再度テストします。</span><span class="sxs-lookup"><span data-stu-id="e2c97-190">Looking at your results for the test run, refine your estimate of MST and repeat the test using the new estimate.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e2c97-191">参照</span><span class="sxs-lookup"><span data-stu-id="e2c97-191">See Also</span></span>  
 <span data-ttu-id="e2c97-192">[維持可能な最大の追跡スループットの測定](../core/measuring-maximum-sustainable-tracking-throughput.md) </span><span class="sxs-lookup"><span data-stu-id="e2c97-192">[Measuring Maximum Sustainable Tracking Throughput](../core/measuring-maximum-sustainable-tracking-throughput.md) </span></span>  
 <span data-ttu-id="e2c97-193">[DTA 追跡のパフォーマンス特性を理解します。](../core/understanding-dta-tracking-performance-behavior.md) </span><span class="sxs-lookup"><span data-stu-id="e2c97-193">[Understanding DTA Tracking Performance Behavior](../core/understanding-dta-tracking-performance-behavior.md) </span></span>  
 <span data-ttu-id="e2c97-194">[DTA 追跡の MST の検索のヒントし、テクニック](../core/tips-and-tricks-for-finding-mst-of-dta-tracking.md) </span><span class="sxs-lookup"><span data-stu-id="e2c97-194">[Tips and Tricks for Finding MST of DTA Tracking](../core/tips-and-tricks-for-finding-mst-of-dta-tracking.md) </span></span>  
 [<span data-ttu-id="e2c97-195">追跡データベースのサイズに関するガイドライン</span><span class="sxs-lookup"><span data-stu-id="e2c97-195">Tracking Database Sizing Guidelines</span></span>](../core/tracking-database-sizing-guidelines.md)