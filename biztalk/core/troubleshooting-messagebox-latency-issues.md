---
title: メッセージ ボックスの待機時間に関する問題のトラブルシューティング |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: e9eb5789-80bd-40d4-8c27-7ae117fd9232
caps.latest.revision: 5
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 1d62bbe76a618b03c4cd57d764152e250ecbc3ab
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65295705"
---
# <a name="troubleshooting-messagebox-latency-issues"></a>メッセージ ボックスの遅延に関する問題のトラブルシューティング
理想の世界には、すべてのメッセージを処理およびメッセージ ボックス データベースに公開されたときと、メッセージ ボックス データベースは、過剰なサイズには拡張しないと、すぐに配信して。 メッセージ ボックス データベースのテーブルを定期的にクリーンアップする SQL エージェント ジョブによって参照されなくなったすべてのメッセージ、メッセージ ボックス データベースにすぐに削除されます。  
  
 ただし、実際のシナリオ メッセージは通常、予測可能な線形的に受信されないと、SQL エージェント ジョブがメッセージ ボックス データベースのテーブルをクリーンアップする必要があります。  
  
 そのため、一部のシナリオで非常に短時間で、メッセージ ボックス データベースが非常に大きなに拡張できます。  
  
 次の項目には、メッセージ ボックスに、過度に大規模で妨げの全体的なパフォーマンスの拡張が発生します。  
  
-   **「ホストの追跡を許可する」オプションが設定されている Biztalk ホスト インスタンスが停止している**します。 これは、Biztalk 追跡 database(BizTalkDTADb) をメッセージ ボックス データベースから追跡データの移動を担当するホストです。  
  
-   **SQL Server エージェントが実行されていない**これは、[その後、メッセージ ボックスに移動したデータを消去する]、BizTalkDTADb データベースにメッセージ ボックス データベースからデータを移動を行う SQL ジョブが実行されていない場合に発生することができます。 SQL エージェント サービスは、この問題を回避するために、すべての時間を実行する必要があります。  
  
-   **SQL Server ジョブが無効になっている**命令型の既定の SQL Server ジョブのいずれも無効にすることは、SQL Server エージェントが実行されている場合でもです。  
  
-   **BizTalkDTADb データベースのサイズが過剰**これは、BizTalkDTADb データベースが非常に大きなに長い時間がかかる BizTalkDTADb データベースに挿入の原因が増加した場合に発生することができます。 このような場合、データの移動 Tracking Data Delivery Service (TDDS) が低下し、メッセージ ボックス データベースで、バックログが蓄積の原因します。 この問題を回避するには、SQL server のアーカイブを実行し、ジョブ、BizTalkDTADb データベースを定期的に削除の操作に必要があります。  
  
-   **過剰なディスク I/O の待機時間**かどうか、メッセージ ボックス データベースにデータの着信レートが、システムが処理できるよりも高速と BizTalkDTADb データベースにデータを移動バックログが蓄積されるメッセージ ボックス データベースにします。 バックログがに伴って増加し続ける場合は、これは非常に深刻な問題と時間の経過と共にシステム パフォーマンスが低下します。 この問題を軽減する方法の 1 つは、高速なディスクをインストールまたはアップグレード、ハードウェア、システムが時間の経過と共に発生するメッセージ バックログから回復できるようにするには。  
  
## <a name="plan-for-the-future"></a>将来を計画します。  
 上記ベスト プラクティスに従っている場合でも追跡データの量が BizTalkDTADb に移動する時間の経過と共にデータベースは非常に大ききます。 システムを最適に実行を続行するために、追跡データを定期的にアーカイブするデータベース メンテナンス プランを実装するために重要です。  
  
 BizTalkDTADb データベースに保持できる履歴データの量は、システムにプッシュされたメッセージの量によって異なります。 システムを対象にしない高負荷やスループットがこのデータベースの増加率が低速と BizTalkDTADb データベースでの複数の履歴データを保持することができます。  
  
 実行時のパフォーマンスが犠牲にならないように、BizTalkDTADb データベースに最小限のデータを保持することをお勧めします。