---
title: "自己関連付けを行う直接バインド ポートを使用する方法 |Microsoft ドキュメント"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: feb651fa-3e35-4598-b229-335448f6919c
caps.latest.revision: "10"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: b866d1042aed8abbb6441822e6bc7eda62254881
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/20/2017
---
# <a name="how-to-use-self-correlating-direct-bound-ports"></a><span data-ttu-id="0a416-102">自己関連付けを行う直接バインド ポートの使用方法</span><span class="sxs-lookup"><span data-stu-id="0a416-102">How to Use Self-Correlating Direct Bound Ports</span></span>
<span data-ttu-id="0a416-103">自己関連付けを行う直接バインド ポートは、自己参照のポートです。</span><span class="sxs-lookup"><span data-stu-id="0a416-103">Self-correlating direct bound ports are self referential.</span></span> <span data-ttu-id="0a416-104">つまり、自己関連付けを行う直接バインド ポートが提供する情報を使用することで、オーケストレーションは、そのオーケストレーションを囲んでいるオーケストレーションにメッセージを返すことができます。</span><span class="sxs-lookup"><span data-stu-id="0a416-104">This means that a self-correlating direct bound port supplies the information that an orchestration can use to send messages back to its enclosing orchestration.</span></span> <span data-ttu-id="0a416-105">自己関連付けを行う直接バインドを使用すると、オーケストレーション エンジンによって、オーケストレーション インスタンス固有の関連付けトークンがメッセージに対して生成されます。</span><span class="sxs-lookup"><span data-stu-id="0a416-105">When using the self-correlating direct binding, the orchestration engine generates a correlation token on a message that is particular to the orchestration instance.</span></span> <span data-ttu-id="0a416-106">これにより、関連付けセットを使用しなくても、特定のオーケストレーション インスタンスにメッセージを返すことができます。</span><span class="sxs-lookup"><span data-stu-id="0a416-106">This provides the capability of getting messages back to a particular orchestration instance without using a correlation set.</span></span>  
  
 <span data-ttu-id="0a416-107">たとえば、受信側のオーケストレーション A での直接バインド ポートを指定することで自己関連付けを作成できます**直接**の**ポートのバインド**を選択して**自己関連付け**ポート構成ウィザードでします。</span><span class="sxs-lookup"><span data-stu-id="0a416-107">For example, you can create a receiving self-correlating direct bound port in Orchestration A by specifying **Direct** for **Port binding** and selecting **Self Correlating** in the Port Configuration Wizard.</span></span> <span data-ttu-id="0a416-108">次に、オーケストレーション B で、オーケストレーション A で定義したポートと同じ種類の送信ポートのオーケストレーション パラメーターとしてポートを宣言します。これを行うには、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="0a416-108">Then, in Orchestration B, you declare a port as a Send Port Orchestration Parameter of the same port type as defined in Orchestration A. To do so, do the following:</span></span>  
  
1.  <span data-ttu-id="0a416-109">オーケストレーションの種類 ウィンドウで、右クリック**オーケストレーション パラメーター**、クリックして**新しいポート パラメーター**です。</span><span class="sxs-lookup"><span data-stu-id="0a416-109">In the Orchestration View window, right-click **Orchestration Parameters**, and then click **New Port Parameter**.</span></span>  
  
2.  <span data-ttu-id="0a416-110">[プロパティ] ウィンドウでの**通信方向**を選択**送信**、および**ポートの種類**A. のオーケストレーションで定義されているポートと同じ種類の選択</span><span class="sxs-lookup"><span data-stu-id="0a416-110">In the Properties window, for **Communication Direction**, select **Send**, and for **Port Type**, select the same port type as defined in Orchestration A.</span></span>  
  
 <span data-ttu-id="0a416-111">この宣言により、オーケストレーション デザイナーのポート画面に論理送信ポートが作成されます。</span><span class="sxs-lookup"><span data-stu-id="0a416-111">This declaration creates a logical send port on the Port Surface in Orchestration Designer.</span></span> <span data-ttu-id="0a416-112">オーケストレーション A を呼び出すオーケストレーション B を使用して、**オーケストレーションの開始**図形、新しいポートは、パラメーターとして渡し、その他のオーケストレーション パラメーターと共にオーケストレーション オーケストレーション B にし、そのビジネス ロジックを実行それに渡された新しいポート上でメッセージが送信されます。</span><span class="sxs-lookup"><span data-stu-id="0a416-112">Orchestration A calls Orchestration B using the **Start Orchestration** shape and passes the new port as a parameter, along with the other orchestration parameters, to Orchestration B. Orchestration B then performs its business logic and sends a message on the new port that was passed to it.</span></span> <span data-ttu-id="0a416-113">そのメッセージは、オーケストレーション B を開始したオーケストレーション A のインスタンスの受信側の自己関連付けを行う直接バインド ポートに送信されます。</span><span class="sxs-lookup"><span data-stu-id="0a416-113">The message is sent to the receiving self-correlating direct bound port of the instance of Orchestration A that started Orchestration B.</span></span>  
  
 <span data-ttu-id="0a416-114">上記の一連のイベントが使用することもできますが、**オーケストレーションの呼び出し**図形のみ理にかなってを使用する場合、**オーケストレーションの開始**図形です。</span><span class="sxs-lookup"><span data-stu-id="0a416-114">Although the preceding sequence of events can also be done with a **Call Orchestration** shape, it only makes sense when using a **Start Orchestration** shape.</span></span> <span data-ttu-id="0a416-115">これを使用する場合、**オーケストレーションの呼び出し**図形、ポートは、参照によって渡されます。</span><span class="sxs-lookup"><span data-stu-id="0a416-115">This is because when using a **Call Orchestration** shape, ports are passed by reference.</span></span> <span data-ttu-id="0a416-116">そのポートの極性は、両方のオーケストレーションで同じである必要があります。</span><span class="sxs-lookup"><span data-stu-id="0a416-116">The polarity of the port must be same in both of the orchestrations.</span></span> <span data-ttu-id="0a416-117">したがって、オーケストレーションの一方から渡すポートの通信方向は、呼び出し先オーケストレーションのポート参照の方向と同じである必要があります。</span><span class="sxs-lookup"><span data-stu-id="0a416-117">Therefore, the communication direction of the port you pass in from one orchestration must be the same as the direction of the port reference in the called orchestration.</span></span> <span data-ttu-id="0a416-118">ただしを使用する場合、**オーケストレーションの開始**図形がオーケストレーションのインスタンス化の非同期が生成され、そのことはできません**アウト**または**Ref**パラメーターです。そのため、自己関連付けを行う直接バインド ポートは、オーケストレーションをインスタンス化したオーケストレーション インスタンスに応答するための手段を提供します。</span><span class="sxs-lookup"><span data-stu-id="0a416-118">However, when using the **Start Orchestration** shape, an asynchronous instantiation of an orchestration is generated and it cannot have **Out** or **Ref** parameters; therefore, the self-correlating direct bound port provides a way for an orchestration to respond back to the orchestration instance that instantiated it.</span></span>  
  
 <span data-ttu-id="0a416-119">自己関連付け直接バインド ポートを使用する方法の例を参照してください"を実装する Scatter and Gather Pattern"の SDK サンプル[http://go.microsoft.com/fwlink/?LinkId=73703](http://go.microsoft.com/fwlink/?LinkId=73703)です。</span><span class="sxs-lookup"><span data-stu-id="0a416-119">For an example of how to use self-correlating direct bound ports, see the SDK sample "Implementing Scatter and Gather Pattern" at [http://go.microsoft.com/fwlink/?LinkId=73703](http://go.microsoft.com/fwlink/?LinkId=73703).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0a416-120">参照</span><span class="sxs-lookup"><span data-stu-id="0a416-120">See Also</span></span>  
 <span data-ttu-id="0a416-121">[メッセージ ボックスの直接バインド ポートを使用する方法](../core/how-to-use-messagebox-direct-bound-ports.md) </span><span class="sxs-lookup"><span data-stu-id="0a416-121">[How to Use MessageBox Direct Bound Ports](../core/how-to-use-messagebox-direct-bound-ports.md) </span></span>  
 [<span data-ttu-id="0a416-122">パートナー オーケストレーション直接バインド ポートを使用する方法</span><span class="sxs-lookup"><span data-stu-id="0a416-122">How to Use Partner Orchestration Direct Bound Ports</span></span>](../core/how-to-use-partner-orchestration-direct-bound-ports.md)