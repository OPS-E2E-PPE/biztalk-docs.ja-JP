---
title: "EDI ヘッダーとトレーラー |Microsoft ドキュメント"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 5cf1dae3-9570-413d-a85d-94dcbb561906
caps.latest.revision: "20"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 655a7261da5dc66687fdf0cd623802854c0fa4ef
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/20/2017
---
# <a name="edi-headers-and-trailers"></a><span data-ttu-id="5b550-102">EDI ヘッダーとトレーラー</span><span class="sxs-lookup"><span data-stu-id="5b550-102">EDI Headers and Trailers</span></span>
<span data-ttu-id="5b550-103">EDI インターチェンジの各部分は、ヘッダーとトレーラーで区切られます。これらのヘッダーとトレーラーは、X12 または EDIFACT 標準に準拠している必要があります。</span><span class="sxs-lookup"><span data-stu-id="5b550-103">The parts of an EDI interchange are delimited by headers and trailers that must conform to the X12 or EDIFACT standards.</span></span> <span data-ttu-id="5b550-104">インターチェンジ制御ヘッダーとトレーラーは 1 回のみ出現します。トランザクション セットとグループがインターチェンジ内でバッチ化される場合は、機能グループおよびトランザクション セットのヘッダーとトレーラーが繰り返されます。</span><span class="sxs-lookup"><span data-stu-id="5b550-104">The interchange control header and trailer occur just once; the functional group and transaction set headers and trailers are repeated if the transaction sets and groups are batched within the interchange.</span></span> <span data-ttu-id="5b550-105">各ヘッダーとトレーラーは、ヘッダーとトレーラーの内容に関する情報を含む一連のデータ要素で構成されます。</span><span class="sxs-lookup"><span data-stu-id="5b550-105">Each of the headers and trailers consists of a series of data elements that contain information about the content that the header and trailer contain.</span></span>  
  
 <span data-ttu-id="5b550-106">X12 と EDIFACT のヘッダーとトレーラーは似ています。</span><span class="sxs-lookup"><span data-stu-id="5b550-106">The headers and trailers for both X12 and EDIFACT are similar.</span></span> <span data-ttu-id="5b550-107">主な違いは、EDIFACT には UNA サービス文字列通知ヘッダーがあり、このヘッダーで、インターチェンジで使用される区切り記号が定義されることです。</span><span class="sxs-lookup"><span data-stu-id="5b550-107">The major difference is the UNA Service String Advice header for EDIFACT, which defines the separators used in the interchange.</span></span> <span data-ttu-id="5b550-108">X12 エンコードでは、区切り文字が ISA インターチェンジ制御ヘッダーで定義されます。</span><span class="sxs-lookup"><span data-stu-id="5b550-108">In X12 encoding, the separators are defined in the ISA Interchange Control Header.</span></span>  
  
 <span data-ttu-id="5b550-109">インターチェンジ制御ヘッダーとトレーラー、および機能グループ ヘッダーとトレーラーは、エンベロープ セグメントで表されます。</span><span class="sxs-lookup"><span data-stu-id="5b550-109">The interchange control and functional group headers and trailers are denoted as envelope segments.</span></span> <span data-ttu-id="5b550-110">受信したインターチェンジをトランザクション セットとして分割するときに、BizTalk Server はエンベロープ セグメントをコンテキスト プロパティとして保存します。</span><span class="sxs-lookup"><span data-stu-id="5b550-110">When BizTalk Server splits an incoming interchange as transaction sets, it saves these envelope segments as context properties.</span></span> <span data-ttu-id="5b550-111">ルーティングに役立つ主なエンベロープ プロパティは、個別のプロパティとして使用できます。</span><span class="sxs-lookup"><span data-stu-id="5b550-111">Key envelope properties that are useful for routing are available as individual properties.</span></span> <span data-ttu-id="5b550-112">これは、インターチェンジを保存するときには行われません。その場合、エンベロープ データはメッセージ自体の一部になります。</span><span class="sxs-lookup"><span data-stu-id="5b550-112">This does not occur when the interchange is preserved, in which case the envelope data is part of the message itself.</span></span>  
  
 <span data-ttu-id="5b550-113">送信メッセージの生成時、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] は取引先アグリーメント (パーティが特定されていない場合はグローバル アグリーメント) に基づいてヘッダーとトレーラーを作成します。</span><span class="sxs-lookup"><span data-stu-id="5b550-113">When [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] generates an outgoing message, it bases the headers and trailers on trading partner agreements (or global agreements if no party has been determined).</span></span>  
  
 <span data-ttu-id="5b550-114">ヘッダー フィールドおよびトレーラー フィールドと、インターチェンジでこれらを分離するために使用する区切り文字は、どちらも 2 つのパーティ間のアグリーメントで定義されます。</span><span class="sxs-lookup"><span data-stu-id="5b550-114">The header and trailer fields, and the separator characters used to separate them in interchanges, are both defined in the agreement between the two parties.</span></span> <span data-ttu-id="5b550-115">区切り文字は、アグリーメント用に定義されているため、インターチェンジ、グループ、またはトランザクション セットのヘッダー フィールドやトレーラー フィールドの定義で使用することはできません。</span><span class="sxs-lookup"><span data-stu-id="5b550-115">A separator character must not be used in the definition of any of the interchange, group, or transaction set header or trailer fields, as defined for the agreement.</span></span> <span data-ttu-id="5b550-116">区切り文字をこれらの定義で使用すると、インターチェンジは、送信側 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] の EDI アセンブラーまたは受信側パーティの逆アセンブラーで処理に失敗します。</span><span class="sxs-lookup"><span data-stu-id="5b550-116">If they are, the interchange will fail processing either in the EDI Assembler of the sending [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] or in the disassembler of the receiving party.</span></span> <span data-ttu-id="5b550-117">アセンブラーはヘッダー制御 (サービス) スキーマに対してエンベロープを検証するので、送信バッチの場合、インターチェンジは EDI アセンブラーの処理に失敗します。</span><span class="sxs-lookup"><span data-stu-id="5b550-117">The interchange will fail in the EDI Assembler if it is an outbound batch, because the Assembler will validate the envelope against the header control (service) schema.</span></span> <span data-ttu-id="5b550-118">バッチ化されていないインターチェンジは、EDI アセンブラーではシリアル化されますが、受信側アグリーメントの逆アセンブラーでは処理に失敗します。</span><span class="sxs-lookup"><span data-stu-id="5b550-118">If the interchange is unbatched, the EDI Assembler will serialize it, but it will fail processing in the disassembler at the receiving agreement.</span></span>  
  
## <a name="x12-headers-and-trailers"></a><span data-ttu-id="5b550-119">X12 ヘッダーとトレーラー</span><span class="sxs-lookup"><span data-stu-id="5b550-119">X12 Headers and Trailers</span></span>  
 <span data-ttu-id="5b550-120">X12 エンコード メッセージのヘッダーとトレーラーは次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="5b550-120">The headers and trailers for an X12-encoded message are as follows:</span></span>  
  
```  
ISA Interchange Control Header  
  GS Functional Group Header  
    ST Transaction Set Header  
    SE Transaction Set Trailer  
  GE Functional Group Trailer  
IEA Interchange Control Trailer  
```  
  
 <span data-ttu-id="5b550-121">ISA ヘッダーの直後に IEA トレーラーがある場合が、インターチェンジが空です。</span><span class="sxs-lookup"><span data-stu-id="5b550-121">If an ISA header is followed immediately by an IEA trailer, the interchange is empty.</span></span> <span data-ttu-id="5b550-122">トランザクション セットが存在する場合、GS ヘッダーおよび GE トレーラーが存在する必要があります。それ以外の場合、GS ヘッダーおよび GE トレーラーは条件付きです。</span><span class="sxs-lookup"><span data-stu-id="5b550-122">If a transaction set exists, the GS header and GE trailer must be present; otherwise, they are conditional.</span></span>  
  
 <span data-ttu-id="5b550-123">X12 エンコード メッセージの ISA インターチェンジ制御ヘッダーは固定長です。</span><span class="sxs-lookup"><span data-stu-id="5b550-123">The ISA interchange control header fields in an X12-encoded message are of fixed length.</span></span> <span data-ttu-id="5b550-124">一部のフィールドでは、フィールドの固定長未満の値を入力できます。</span><span class="sxs-lookup"><span data-stu-id="5b550-124">For some of the fields, you can enter a value less than the fixed length of the field.</span></span> <span data-ttu-id="5b550-125">その場合、各フィールドが必要な長さになるように、インターチェンジには末尾のスペース (文字列フィールドの場合) または先頭の 0 (数値フィールドの場合) を含める必要があります。</span><span class="sxs-lookup"><span data-stu-id="5b550-125">If you do so, the interchange must contain trailing spaces (for a string field) or leading zeroes (for a numerical field) so that each field is of the required length.</span></span> <span data-ttu-id="5b550-126">送信インターチェンジの作成時に、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] は、適切な長さのインターチェンジ制御ヘッダーを作成するために、末尾のスペースまたは先頭の 0 を入力します。</span><span class="sxs-lookup"><span data-stu-id="5b550-126">When creating an outbound interchange, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will enter trailing spaces or leading zeroes to create an interchange control header of the right length.</span></span> <span data-ttu-id="5b550-127">GS グループのヘッダー フィールドと ST トランザクション セットのヘッダー フィールドは固定長ではありません。</span><span class="sxs-lookup"><span data-stu-id="5b550-127">The GS group header fields and the ST transaction set header fields are not of fixed length.</span></span>  
  
 <span data-ttu-id="5b550-128">X12 エンコードでは、機能セキュリティ ヘッダー、機能保証ヘッダー、機能セキュリティ値セグメント、および機能セキュリティ トレーラー セグメントは、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] EDI および AS2 の対象外です。</span><span class="sxs-lookup"><span data-stu-id="5b550-128">In X12 encoding, the functional security header, functional assurance header, functional security value segment, and functional security trailer segments are beyond the scope of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] EDI and AS2.</span></span> <span data-ttu-id="5b550-129">このようなセグメントを含むインターチェンジを受信した場合、これらが認識不可能なセグメントであることを示すエラー ログが生成され、インターチェンジが中断されます。</span><span class="sxs-lookup"><span data-stu-id="5b550-129">If an interchange with these segments is received, it will be suspended with an error log indicating that these are unidentified segments.</span></span>  
  
 <span data-ttu-id="5b550-130">ST01 フィールドはトランザクション セット ID コードであり、ST02 フィールドはトランザクション セット制御番号です。</span><span class="sxs-lookup"><span data-stu-id="5b550-130">The ST01 field is the transaction set ID Code; the ST02 field is the transaction set control number.</span></span> <span data-ttu-id="5b550-131">ST03 フィールドはスキーマ バージョン識別子です。</span><span class="sxs-lookup"><span data-stu-id="5b550-131">The ST03 field is the schema version identifier.</span></span> <span data-ttu-id="5b550-132">SE01 フィールドはトランザクション セットに含まれるセグメント数を示しており、SE02 フィールドは ST02 フィールド (トランザクション セット制御番号) と同じです。</span><span class="sxs-lookup"><span data-stu-id="5b550-132">The SE01 field indicates the number of segments included in the transaction set; the SE02 field is the same as the ST02 field (the transaction set control number).</span></span> <span data-ttu-id="5b550-133">受信メッセージを解析するときに、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] は、トランザクション セットのセグメント数が SE01 フィールドの値に対応していることを確認します。</span><span class="sxs-lookup"><span data-stu-id="5b550-133">When parsing an incoming message, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will verify that the number of segments in the transaction set corresponds to the value of the SE01 field.</span></span> <span data-ttu-id="5b550-134">送信メッセージを生成するときに、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] は、SE01 フィールドをトランザクション セットの正しいセグメント数に設定します。</span><span class="sxs-lookup"><span data-stu-id="5b550-134">When generating an outgoing message, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will set the SE01 field to the correct number of segments in the transaction set.</span></span>  
  
 <span data-ttu-id="5b550-135">送信 EDI インターチェンジにシリアル化される XML トランザクション セットには、トランザクション セット ヘッダーとトレーラーが必要です。</span><span class="sxs-lookup"><span data-stu-id="5b550-135">An XML transaction set being serialized into an outgoing EDI interchange should have a transaction set header and trailer.</span></span> <span data-ttu-id="5b550-136">ただし、EDI アセンブラーは、トランザクション セット ヘッダーまたはトレーラーがなくても、メッセージを処理します。</span><span class="sxs-lookup"><span data-stu-id="5b550-136">However, the EDI Assembler will process the message if it does not have a transaction set header or trailer.</span></span> <span data-ttu-id="5b550-137">XML トランザクション セットでは、X12 および EDIFACT スキーマのトランザクション セット ヘッダーおよびトレーラー セグメントはオプションです。</span><span class="sxs-lookup"><span data-stu-id="5b550-137">Transaction set header and trailer segments in X12 and EDIFACT schemas are optional for XML transaction sets.</span></span> <span data-ttu-id="5b550-138">トランザクションにヘッダーまたはトレーラーがない場合、EDISend または AS2EDISend 送信パイプラインの EDI アセンブラーは、トランザクションにトランザクション セット ヘッダー値およびトレーラー値を追加します。</span><span class="sxs-lookup"><span data-stu-id="5b550-138">If a transaction does not have a header or trailer, the EDI Assembler in the EDISend or AS2EDISend send pipeline will add transaction set header and trailer values to it.</span></span> <span data-ttu-id="5b550-139">これらの値は、マッピングまたは計算に基づきます。</span><span class="sxs-lookup"><span data-stu-id="5b550-139">These values will be based on mappings or calculations.</span></span> <span data-ttu-id="5b550-140">EDI アセンブラーは、この処理をインターチェンジ XML (保護されたバッチ)、バッチ トランザクション セット XML、およびトランザクション セット XML に対して行います。</span><span class="sxs-lookup"><span data-stu-id="5b550-140">The EDI Assembler will do this for interchange XML (a preserved batch), batched transaction set XML, and transaction set XML.</span></span> <span data-ttu-id="5b550-141">詳細については、次を参照してください。 [X12 トランザクション セット ヘッダーおよびトレーラ セグメント](../core/how-the-edi-assembler-works.md#BKMK_X12)または[EDIFACT トランザクション セット ヘッダーおよびトレーラ セグメント](../core/how-the-edi-assembler-works.md#BKMK_EDIFACT)です。</span><span class="sxs-lookup"><span data-stu-id="5b550-141">For more information, see [X12 Transaction Set Header and Trailer Segments](../core/how-the-edi-assembler-works.md#BKMK_X12) or [EDIFACT Transaction Set Header and Trailer Segments](../core/how-the-edi-assembler-works.md#BKMK_EDIFACT).</span></span>  
  
## <a name="edifact-headers-and-trailers"></a><span data-ttu-id="5b550-142">EDIFACT ヘッダーとトレーラー</span><span class="sxs-lookup"><span data-stu-id="5b550-142">EDIFACT Headers and Trailers</span></span>  
 <span data-ttu-id="5b550-143">EDIFACT エンコード メッセージのヘッダーとトレーラーは次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="5b550-143">The headers and trailers for an EDIFACT-encoded message are as follows:</span></span>  
  
```  
UNA Service String Advice  
UNB Interchange Control Header  
  UNG Functional Group Header  
    UNH Message Header  
    UNT Message Trailer  
  UNE Functional Group Trailer  
UNZ Interchange Control Trailer  
```  
  
 <span data-ttu-id="5b550-144">UNA ヘッダーは必要ありません。</span><span class="sxs-lookup"><span data-stu-id="5b550-144">The UNA header is not required.</span></span> <span data-ttu-id="5b550-145">UNB ヘッダーは必須です。</span><span class="sxs-lookup"><span data-stu-id="5b550-145">The UNB header is required.</span></span> <span data-ttu-id="5b550-146">UNA ヘッダーが存在する場合は、受信メッセージを処理するときに使用する区切り記号がこのヘッダーに含まれます。それ以外の場合は、EfactDelimiters パイプライン プロパティに定義された区切り文字が使用されます。</span><span class="sxs-lookup"><span data-stu-id="5b550-146">If the UNA header is present, it contains the delimiters to use when processing the incoming message; otherwise the separators defined for the EfactDelimiters pipeline property will be used.</span></span>  
  
 <span data-ttu-id="5b550-147">UNB ヘッダーの直後に UNZ トレーラーがある場合は、インターチェンジが空です。</span><span class="sxs-lookup"><span data-stu-id="5b550-147">If a UNB header is followed immediately by a UNZ trailer, the interchange is empty.</span></span> <span data-ttu-id="5b550-148">UNG ヘッダーの直後に UNE トレーラーがある場合は、グループが空です。</span><span class="sxs-lookup"><span data-stu-id="5b550-148">If a UNG header is followed immediately by a UNE trailer, the group is empty.</span></span> <span data-ttu-id="5b550-149">UNG ヘッダーと UNE トレーラーの組み合わせは条件付きのため、メッセージに存在していなくてもかまいません。</span><span class="sxs-lookup"><span data-stu-id="5b550-149">The UNG header and UNE trailer pair are conditional and do not have to be present in a message.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5b550-150">参照</span><span class="sxs-lookup"><span data-stu-id="5b550-150">See Also</span></span>  
 [<span data-ttu-id="5b550-151">EDI メッセージの構造</span><span class="sxs-lookup"><span data-stu-id="5b550-151">EDI Message Structure</span></span>](../core/edi-message-structure.md)