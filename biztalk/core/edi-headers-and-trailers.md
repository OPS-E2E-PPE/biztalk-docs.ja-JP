---
title: EDI ヘッダーとトレーラー |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 5cf1dae3-9570-413d-a85d-94dcbb561906
caps.latest.revision: 20
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 77f30def9b680c04fd0078e253dcb4f1049f9d56
ms.sourcegitcommit: d27732e569b0897361dfaebca8352aa97bb7efe1
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/10/2019
ms.locfileid: "65530837"
---
# <a name="edi-headers-and-trailers"></a><span data-ttu-id="66014-102">EDI ヘッダーとトレーラー</span><span class="sxs-lookup"><span data-stu-id="66014-102">EDI Headers and Trailers</span></span>
<span data-ttu-id="66014-103">EDI インターチェンジの部分は、ヘッダーとトレーラー、X12 または EDIFACT 標準に準拠する必要があるによって区切られます。</span><span class="sxs-lookup"><span data-stu-id="66014-103">The parts of an EDI interchange are delimited by headers and trailers that must conform to the X12 or EDIFACT standards.</span></span> <span data-ttu-id="66014-104">インターチェンジ制御ヘッダーとトレーラーは 1 回だけ発生します。機能グループおよびトランザクション セットのヘッダーとトレーラーが繰り返されるは、トランザクション セットとグループは、インターチェンジ内でバッチ処理される場合。</span><span class="sxs-lookup"><span data-stu-id="66014-104">The interchange control header and trailer occur just once; the functional group and transaction set headers and trailers are repeated if the transaction sets and groups are batched within the interchange.</span></span> <span data-ttu-id="66014-105">一連のヘッダーとトレーラーが含まれているコンテンツに関する情報を含むデータ要素の各ヘッダーとトレーラーで構成されます。</span><span class="sxs-lookup"><span data-stu-id="66014-105">Each of the headers and trailers consists of a series of data elements that contain information about the content that the header and trailer contain.</span></span>  
  
 <span data-ttu-id="66014-106">ヘッダーとトレーラーは X12 と EDIFACT の両方に似ています。</span><span class="sxs-lookup"><span data-stu-id="66014-106">The headers and trailers for both X12 and EDIFACT are similar.</span></span> <span data-ttu-id="66014-107">主な違いは、edifact の場合、インターチェンジで使用される区切り記号を定義する UNA サービス文字列通知ヘッダーです。</span><span class="sxs-lookup"><span data-stu-id="66014-107">The major difference is the UNA Service String Advice header for EDIFACT, which defines the separators used in the interchange.</span></span> <span data-ttu-id="66014-108">X12 エンコードでは、区切り記号が ISA インターチェンジ制御ヘッダーで定義されます。</span><span class="sxs-lookup"><span data-stu-id="66014-108">In X12 encoding, the separators are defined in the ISA Interchange Control Header.</span></span>  
  
 <span data-ttu-id="66014-109">インターチェンジの制御および機能グループ ヘッダーとトレーラーはエンベロープ セグメントとして示されます。</span><span class="sxs-lookup"><span data-stu-id="66014-109">The interchange control and functional group headers and trailers are denoted as envelope segments.</span></span> <span data-ttu-id="66014-110">BizTalk Server では、トランザクション セットとして受信したインターチェンジを分割、コンテキスト プロパティとしてこれらのエンベロープ セグメントが保存されます。</span><span class="sxs-lookup"><span data-stu-id="66014-110">When BizTalk Server splits an incoming interchange as transaction sets, it saves these envelope segments as context properties.</span></span> <span data-ttu-id="66014-111">ルーティングのために役立つ主なエンベロープ プロパティは、個々 のプロパティとして使用できます。</span><span class="sxs-lookup"><span data-stu-id="66014-111">Key envelope properties that are useful for routing are available as individual properties.</span></span> <span data-ttu-id="66014-112">これは、メッセージ自体の一部をエンベロープ データがこの場合は、インターチェンジが保存されるときに発生しません。</span><span class="sxs-lookup"><span data-stu-id="66014-112">This does not occur when the interchange is preserved, in which case the envelope data is part of the message itself.</span></span>  
  
 <span data-ttu-id="66014-113">ときに[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]送信メッセージを生成しますに基づいてヘッダーとトレーラー取引先アグリーメント (パーティが特定されていない場合はグローバル アグリーメント) を作成します。</span><span class="sxs-lookup"><span data-stu-id="66014-113">When [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] generates an outgoing message, it bases the headers and trailers on trading partner agreements (or global agreements if no party has been determined).</span></span>  
  
 <span data-ttu-id="66014-114">ヘッダーおよびトレーラのフィールドと、インターチェンジでこれらを分離するために使用する区切り文字、2 つのパーティ間のアグリーメントで定義します。</span><span class="sxs-lookup"><span data-stu-id="66014-114">The header and trailer fields, and the separator characters used to separate them in interchanges, are both defined in the agreement between the two parties.</span></span> <span data-ttu-id="66014-115">アグリーメントに対して定義されている、区切り文字は、インターチェンジ、グループ、またはトランザクション セット ヘッダーやトレーラ フィールドのいずれかの定義では使用されませんする必要があります。</span><span class="sxs-lookup"><span data-stu-id="66014-115">A separator character must not be used in the definition of any of the interchange, group, or transaction set header or trailer fields, as defined for the agreement.</span></span> <span data-ttu-id="66014-116">送信側の EDI アセンブラーで処理インターチェンジが失敗する場合は、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]または受信側パーティの逆アセンブラーにします。</span><span class="sxs-lookup"><span data-stu-id="66014-116">If they are, the interchange will fail processing either in the EDI Assembler of the sending [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] or in the disassembler of the receiving party.</span></span> <span data-ttu-id="66014-117">インターチェンジ失敗 EDI アセンブラーで、送信バッチの場合、アセンブラーはヘッダー制御 (サービス) スキーマと照らし合わせたエンベロープを検証します。</span><span class="sxs-lookup"><span data-stu-id="66014-117">The interchange will fail in the EDI Assembler if it is an outbound batch, because the Assembler will validate the envelope against the header control (service) schema.</span></span> <span data-ttu-id="66014-118">インターチェンジがバッチでない場合、EDI アセンブラーがシリアル化できますが、受信側アグリーメントで、逆アセンブラーで処理は失敗します。</span><span class="sxs-lookup"><span data-stu-id="66014-118">If the interchange is unbatched, the EDI Assembler will serialize it, but it will fail processing in the disassembler at the receiving agreement.</span></span>  
  
## <a name="x12-headers-and-trailers"></a><span data-ttu-id="66014-119">X12 ヘッダーとトレーラー</span><span class="sxs-lookup"><span data-stu-id="66014-119">X12 Headers and Trailers</span></span>  
 <span data-ttu-id="66014-120">ヘッダーと X12 エンコード メッセージのトレーラーは次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="66014-120">The headers and trailers for an X12-encoded message are as follows:</span></span>  
  
```  
ISA Interchange Control Header  
  GS Functional Group Header  
    ST Transaction Set Header  
    SE Transaction Set Trailer  
  GE Functional Group Trailer  
IEA Interchange Control Trailer  
```  
  
 <span data-ttu-id="66014-121">ISA ヘッダーが IEA トレーラー直後がある場合、インターチェンジが空です。</span><span class="sxs-lookup"><span data-stu-id="66014-121">If an ISA header is followed immediately by an IEA trailer, the interchange is empty.</span></span> <span data-ttu-id="66014-122">トランザクション セットが存在する場合、GS ヘッダーおよび GE トレーラー必要があります。それ以外の場合、条件付きです。</span><span class="sxs-lookup"><span data-stu-id="66014-122">If a transaction set exists, the GS header and GE trailer must be present; otherwise, they are conditional.</span></span>  
  
 <span data-ttu-id="66014-123">X12 でエンコードされたメッセージの ISA インターチェンジ制御ヘッダー フィールドでは、固定長です。</span><span class="sxs-lookup"><span data-stu-id="66014-123">The ISA interchange control header fields in an X12-encoded message are of fixed length.</span></span> <span data-ttu-id="66014-124">一部のフィールドには、フィールドの固定長未満の値を入力できます。</span><span class="sxs-lookup"><span data-stu-id="66014-124">For some of the fields, you can enter a value less than the fixed length of the field.</span></span> <span data-ttu-id="66014-125">これを行う場合、インターチェンジする必要がありますよう含まれます (文字列フィールド) の末尾のスペースまたは先頭に 0 (数値フィールド) の各フィールドが必要な長さ。</span><span class="sxs-lookup"><span data-stu-id="66014-125">If you do so, the interchange must contain trailing spaces (for a string field) or leading zeroes (for a numerical field) so that each field is of the required length.</span></span> <span data-ttu-id="66014-126">送信インターチェンジを作成するときに[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]は末尾のスペースまたは先頭に 0、適切な長さのインターチェンジ制御ヘッダーを作成することを入力します。</span><span class="sxs-lookup"><span data-stu-id="66014-126">When creating an outbound interchange, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will enter trailing spaces or leading zeroes to create an interchange control header of the right length.</span></span> <span data-ttu-id="66014-127">GS グループのヘッダー フィールドと ST トランザクションは、フィールドにはない固定長のヘッダーを設定します。</span><span class="sxs-lookup"><span data-stu-id="66014-127">The GS group header fields and the ST transaction set header fields are not of fixed length.</span></span>  
  
 <span data-ttu-id="66014-128">X12 でエンコード、機能セキュリティ ヘッダー、機能保証ヘッダー、機能セキュリティ値セグメント、および機能セキュリティ トレーラー セグメントは説明しませんの[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]EDI および AS2 します。</span><span class="sxs-lookup"><span data-stu-id="66014-128">In X12 encoding, the functional security header, functional assurance header, functional security value segment, and functional security trailer segments are beyond the scope of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] EDI and AS2.</span></span> <span data-ttu-id="66014-129">これらのセグメントを持つインターチェンジを受信すると、これらが認識されないセグメントであることを示すエラー ログで中断されます。</span><span class="sxs-lookup"><span data-stu-id="66014-129">If an interchange with these segments is received, it will be suspended with an error log indicating that these are unidentified segments.</span></span>  
  
 <span data-ttu-id="66014-130">ST01 フィールドは、トランザクション セット ID コードです。ST02 フィールドは、トランザクション セット制御番号です。</span><span class="sxs-lookup"><span data-stu-id="66014-130">The ST01 field is the transaction set ID Code; the ST02 field is the transaction set control number.</span></span> <span data-ttu-id="66014-131">ST03 フィールドは、スキーマ バージョン識別子です。</span><span class="sxs-lookup"><span data-stu-id="66014-131">The ST03 field is the schema version identifier.</span></span> <span data-ttu-id="66014-132">SE01 フィールドは、トランザクション セットに含まれるセグメントの数を示しますSE02 フィールドは、(トランザクション セット制御番号)、ST02 フィールドと同じです。</span><span class="sxs-lookup"><span data-stu-id="66014-132">The SE01 field indicates the number of segments included in the transaction set; the SE02 field is the same as the ST02 field (the transaction set control number).</span></span> <span data-ttu-id="66014-133">受信メッセージを解析するときに[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]はトランザクション セットのセグメントの数が SE01 フィールドの値に対応していることを確認します。</span><span class="sxs-lookup"><span data-stu-id="66014-133">When parsing an incoming message, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will verify that the number of segments in the transaction set corresponds to the value of the SE01 field.</span></span> <span data-ttu-id="66014-134">送信メッセージを生成するときに[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]をトランザクション セットのセグメントの正しい数が SE01 フィールドを設定します。</span><span class="sxs-lookup"><span data-stu-id="66014-134">When generating an outgoing message, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will set the SE01 field to the correct number of segments in the transaction set.</span></span>  
  
 <span data-ttu-id="66014-135">送信 EDI インターチェンジにシリアル化される XML トランザクション セットには、トランザクション セット ヘッダーとトレーラーが必要です。</span><span class="sxs-lookup"><span data-stu-id="66014-135">An XML transaction set being serialized into an outgoing EDI interchange should have a transaction set header and trailer.</span></span> <span data-ttu-id="66014-136">ただし、EDI アセンブラーは、トランザクション セット ヘッダーまたはトレーラーがなくても、メッセージを処理します。</span><span class="sxs-lookup"><span data-stu-id="66014-136">However, the EDI Assembler will process the message if it does not have a transaction set header or trailer.</span></span> <span data-ttu-id="66014-137">XML トランザクション セットでは、X12 および EDIFACT スキーマのトランザクション セット ヘッダーおよびトレーラー セグメントはオプションです。</span><span class="sxs-lookup"><span data-stu-id="66014-137">Transaction set header and trailer segments in X12 and EDIFACT schemas are optional for XML transaction sets.</span></span> <span data-ttu-id="66014-138">トランザクションにヘッダーまたはトレーラーがない場合、EDISend または AS2EDISend 送信パイプラインの EDI アセンブラーは、トランザクションにトランザクション セット ヘッダー値およびトレーラー値を追加します。</span><span class="sxs-lookup"><span data-stu-id="66014-138">If a transaction does not have a header or trailer, the EDI Assembler in the EDISend or AS2EDISend send pipeline will add transaction set header and trailer values to it.</span></span> <span data-ttu-id="66014-139">これらの値は、マッピングまたは計算に基づきます。</span><span class="sxs-lookup"><span data-stu-id="66014-139">These values will be based on mappings or calculations.</span></span> <span data-ttu-id="66014-140">EDI アセンブラーは、この処理をインターチェンジ XML (保護されたバッチ)、バッチ トランザクション セット XML、およびトランザクション セット XML に対して行います。</span><span class="sxs-lookup"><span data-stu-id="66014-140">The EDI Assembler will do this for interchange XML (a preserved batch), batched transaction set XML, and transaction set XML.</span></span> <span data-ttu-id="66014-141">詳細については、次を参照してください。 [X12 トランザクション セット ヘッダーおよびトレーラ セグメント](../core/how-the-edi-assembler-works.md#BKMK_X12)または[EDIFACT トランザクション セット ヘッダーおよびトレーラ セグメント](../core/how-the-edi-assembler-works.md#BKMK_EDIFACT)します。</span><span class="sxs-lookup"><span data-stu-id="66014-141">For more information, see [X12 Transaction Set Header and Trailer Segments](../core/how-the-edi-assembler-works.md#BKMK_X12) or [EDIFACT Transaction Set Header and Trailer Segments](../core/how-the-edi-assembler-works.md#BKMK_EDIFACT).</span></span>  
  
## <a name="edifact-headers-and-trailers"></a><span data-ttu-id="66014-142">EDIFACT ヘッダーとトレーラー</span><span class="sxs-lookup"><span data-stu-id="66014-142">EDIFACT Headers and Trailers</span></span>  
 <span data-ttu-id="66014-143">ヘッダーと EDIFACT でエンコードされたメッセージのトレーラーは次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="66014-143">The headers and trailers for an EDIFACT-encoded message are as follows:</span></span>  
  
```  
UNA Service String Advice  
UNB Interchange Control Header  
  UNG Functional Group Header  
    UNH Message Header  
    UNT Message Trailer  
  UNE Functional Group Trailer  
UNZ Interchange Control Trailer  
```  
  
 <span data-ttu-id="66014-144">UNA ヘッダーは必要ありません。</span><span class="sxs-lookup"><span data-stu-id="66014-144">The UNA header is not required.</span></span> <span data-ttu-id="66014-145">UNB ヘッダーが必要です。</span><span class="sxs-lookup"><span data-stu-id="66014-145">The UNB header is required.</span></span> <span data-ttu-id="66014-146">UNA ヘッダーが存在する場合は、受信メッセージの処理時に使用する区切り記号が含まれていますそれ以外の場合は、EfactDelimiters パイプライン プロパティに対して定義されている区切り記号が使用されます。</span><span class="sxs-lookup"><span data-stu-id="66014-146">If the UNA header is present, it contains the delimiters to use when processing the incoming message; otherwise the separators defined for the EfactDelimiters pipeline property will be used.</span></span>  
  
 <span data-ttu-id="66014-147">UNB ヘッダーは UNZ トレーラーですぐに従うと、インターチェンジが空です。</span><span class="sxs-lookup"><span data-stu-id="66014-147">If a UNB header is followed immediately by a UNZ trailer, the interchange is empty.</span></span> <span data-ttu-id="66014-148">UNG ヘッダーは UNE トレーラーですぐに従うと、グループが空です。</span><span class="sxs-lookup"><span data-stu-id="66014-148">If a UNG header is followed immediately by a UNE trailer, the group is empty.</span></span> <span data-ttu-id="66014-149">UNG ヘッダーおよび UNE トレーラーの組み合わせは条件付きと、メッセージに存在する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="66014-149">The UNG header and UNE trailer pair are conditional and do not have to be present in a message.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="66014-150">参照</span><span class="sxs-lookup"><span data-stu-id="66014-150">See Also</span></span>  
 [<span data-ttu-id="66014-151">EDI メッセージの構造</span><span class="sxs-lookup"><span data-stu-id="66014-151">EDI Message Structure</span></span>](../core/edi-message-structure.md)