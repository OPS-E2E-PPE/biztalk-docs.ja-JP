---
title: 手順 10:X12 および AS2 取引先アグリーメントの構成 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 8fcdb3af-727a-4d20-9dcf-cf162e7d3398
caps.latest.revision: 46
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 582c3ebcbbfe5878d3cffbda187c3f8fcab2d46a
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65392789"
---
# <a name="step-10-configure-the-x12-and-as2-trading-partner-agreement"></a>手順 10:X12 および AS2 取引先アグリーメントを構成します。
![手順 10 の 11](../core/media/tut-step10-of-11.gif "Tut_Step10_of_11")  

 このステップでは、EDIINT/AS2 でエンコードされたメッセージを HTTP 経由で送信するように X12 および AS2 の取引先アグリーメントを設定します。 この Fabrikam パーティは、EDI インターチェンジを Contoso に送信します。これにより、997 受信確認と非同期 MDN が Fabrikam に返されます。  

## <a name="prerequisites"></a>必須コンポーネント  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理者グループのメンバーとしてログオンしている必要があります。  

### <a name="to-create-an-as2-agreement"></a>AS2 アグリーメントを作成するには  

1. クリックして**開始**、 をクリックして**すべてのプログラム**、 をクリックして**Microsoft BizTalk Server**、順にクリックします**BizTalk Server 管理**します。  

2. [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、をクリックして**パーティ**し、コンソール ツリーで、**パーティとビジネス プロファイル** ページで、右クリックして**Fabrikam_Profile**、 をポイント**新規**、 をクリックし、**契約**します。  

3. **全般プロパティ** ページの**名前**テキスト ボックスに、アグリーメントの名前を入力します。  

4. **プロトコル**ドロップダウン リストで、 **AS2**します。  

5. **2 番目のパートナー**セクションから、**名前**ドロップダウン リストで、 **Contoso**します。  

6. **2 番目のパートナー**セクションから、**プロファイル**ドロップダウン リストで、 **Contoso_Profile**します。  

    2 つの新しいタブが横に追加の取得と表示されます、**全般**タブ。各タブは、一方向の AS2 アグリーメントの構成用です。  

7. **全般** タブで、**全般プロパティ**ページで、**共通のホスト設定**セクションで、**レポートをオン**します。  

8. 次のタスクを実行、 **Fabrikam が Contoso を ->** タブ。  

   1.  **識別子** ページで、値を入力します**AS2-から**と**AS2-に**します。 **AS2-から**、入力`Fabrikam`します。 **AS2-To**、入力`Contoso`します。  

   2.  **検証** ページで、、**検証および MDN に対してメッセージ ヘッダーの代わりにアグリーメントの設定を使用して** チェック ボックス  

       > [!NOTE]
       >  このプロパティを設定すると、MDN を生成するときに受信 AS2 メッセージの AS2 ヘッダーではなくパーティのプロパティが使用されます。  

   3.  **受信確認 (Mdn)** ページで、次の操作を行います。  

       1.  選択、 **mdn を要求する**チェック ボックスをオンします。  

       2.  必ず、**署名付き MDN を要求**チェック ボックスをオフします。  

       3.  選択、**非同期 MDN を要求する**チェック ボックスをオンします。  

       4.  **- Receipt-delivery-option (URL)** テキスト ボックスに、入力`http://localhost/Fabrikam/Default.aspx?Destination=_MDNToFabrikam`します。  

9. 次のタスクを実行、 **Contoso が Fabrikam]-> [** タブ。  

   1. **識別子** ページで、値を入力します**AS2-から**と**AS2-に**します。 **AS2-から**、入力`Contoso`します。 **AS2-To**、入力`Fabrikam`します。  

   2. **送信ポート**ページで、**インターチェンジの設定**セクションで、**送信ポート** ボックスの一覧の**名前**選択**Send_Async_997**します。  

      > [!NOTE]
      >  入力される必要があります、Send_Async_997 送信ポート、**送信ポート**一覧ように[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]送信 997 メッセージのパーティを解決することができます。 送信パイプラインは、送信ポートの名前をアグリーメント プロパティの送信ポートと照合します。 これは、送信パイプラインがパーティの解決を試みる際に最初に照合する AS2-To プロパティがメッセージのコンテキストで昇格されないために必要になります。 詳細については、次を参照してください。[送信 AS2 メッセージのアグリーメントの解決](../core/agreement-resolution-for-outgoing-as2-messages.md)します。  

10. **[適用]** をクリックします。  

11. **[OK]** をクリックします。 新しく追加したアグリーメントが一覧表示、**契約**のセクション、**パーティとビジネス プロファイル**ウィンドウ。 新しく追加したアグリーメントは既定で有効になります。  

### <a name="to-create-an-x12-agreement"></a>X12 アグリーメントを作成するには  

1. 右クリック**fabrikam_profile**、 をポイント**新規**、 をクリックし、**契約**します。  

2. **全般プロパティ** ページの**名前**テキスト ボックスに、アグリーメントの名前を入力します。  

3. **プロトコル**ドロップダウン リストで、 **X12**します。  

4. **2 番目のパートナー**セクションから、**名前**ドロップダウン リストで、 **Contoso**します。  

5. **2 番目のパートナー**セクションから、**プロファイル**ドロップダウン リストで、 **Contoso_Profile**します。  

    2 つの新しいタブが横に追加の取得と表示されます、**全般**タブ。各タブは一方向 X12 アグリーメントを構成するためのものです。  

6. **全般** タブで、**全般プロパティ**ページで、**共通のホスト設定**セクションで、**レポートをオン**、し、選択**メッセージ ペイロードを格納するレポートの**します。  

7. 次のタスクを実行、 **Fabrikam が Contoso を ->** タブ。  

   1. **識別子**ページで、**インターチェンジの設定**セクションで、修飾子と識別子のフィールドの値を入力 (**ISA5**、 **ISA6**、 **ISA7**、および**ISA8**) テスト メッセージのヘッダー フィールドの値に対応しています。 このチュートリアルでは、次のように設定します**ISA5**に**ZZ**、 **ISA6**に**7654321**、 **ISA7**に**ZZ。**、および**ISA8**に**1234567**します。  

      > [!NOTE]
      >  [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] では、アグリーメントの解決を実行するために、送信者と受信者の修飾子フィールドおよび ID フィールドを必ず指定する必要があります。 値と一致します**ISA5**、 **ISA6**、 **ISA7**、および**ISA8**をアグリーメントのプロパティと、インターチェンジ ヘッダー。 また、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] は、送信者の修飾子および識別子を照合して (受信者の修飾子および識別子は不要)、アグリーメントを解決します。 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] では、アグリーメントを解決できない場合、フォールバック アグリーメントのプロパティが使用されます。  

   2. **受信確認**ページで、**インターチェンジの設定**セクションで、 **997 が必要**チェック ボックスをオンします。  

   3. **検証**ページで、**インターチェンジの設定**セクションをご確認ください**重複している isa13 を確認**オプションが選択されていません。  

      > [!NOTE]
      >  オフにすると、**重複している isa13 を確認**プロパティでは、同じメッセージの複数のインスタンスを受信することができます。  

   4. **ローカル ホスト設定**ページで、**インターチェンジの設定**セクションの**受信者の設定**, clear**で送信パイプラインに確認をルーティング要求-応答の受信ポート**します。  

      > [!NOTE]
      >  このプロパティをオフにすると、双方向受信ポートに関連付けられた送信ポートではなく、別の送信ポート経由で 997 受信確認を送信することができます。  

8. 次のタスクを実行、 **Contoso が Fabrikam]-> [** タブ。  

   1. **識別子**ページで、**インターチェンジの設定**セクションで、修飾子と識別子のフィールドの値を入力 (**ISA5**、 **ISA6**、 **ISA7**、および**ISA8**) テスト メッセージのヘッダー フィールドの値に対応しています。  このチュートリアルでは、次のように設定します**ISA5**に**ZZ**、 **ISA6**に**1234567**、 **ISA7**に**ZZ。**、および**ISA8**に**7654321**します。  

   2. **文字セットと区切り記号**ページで、**インターチェンジの設定**セクションの**サフィックス**を選択します**CR LF**します。  

   3. **エンベロープ**ページで、**トランザクション セットの設定**セクションで、次の操作を行います。  


      |       プロパティ       |                                                                                                                                              目的                                                                                                                                               |
      |----------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
      |     **[Default]**      |              選択**既定**します。 **注:** 既定の値としてこの行を選択すると**GS1**、 **GS2**、 **GS3**、 **GS7**、および**GS8**は使用されている場合であってもの値は、**トランザクションの種類**、**バージョン/リリース**と**ターゲットの名前空間**と一致するメッセージではありません。              |
      | **トランザクションの種類** |                                                                                                          たとえば、テスト メッセージのメッセージの種類を選択**864 – テキスト メッセージ**します。                                                                                                           |
      | **バージョン/リリース**  |                                                                                                                                           入力**00401**します。                                                                                                                                            |
      | **ターゲットの名前空間** |                                                                                                                    選択 **<http://schemas.microsoft.com/BizTalk/EDI/X12/2006>** します。                                                                                                                    |
      |       **[GS1]**        |                                                                                                テスト メッセージのメッセージの種類が選択されているなどを確認します。 **TX - テキスト メッセージ (864)** します。                                                                                                |
      |       **[GS2]**        |                                                                                                                                             入力**01**します。                                                                                                                                             |
      |       **[GS3]**        |                                                                                                                                          入力**7654321**します。                                                                                                                                           |
      |       **GS4**        | 日付の形式を選択します。 選択**CCYYMMDD**します。 **注:** ドロップダウン リストで、値を選択し、だけでなく、既定値を表示するフィールドをクリックする必要があります。 ドロップダウン リストから値を選択せずにフィールドをクリックしても、値は実際に選択されません。 |
      |       **GS5**        |                                                                                                                      時刻の形式を選択します。 選択**HHMMSSdd**します。                                                                                                                       |
      |       **GS7**        |                                                                                                                   選択**T - 運輸データ調整委員会 (Tdcc)** します。                                                                                                                   |
      |       **GS8**        |                                                                                                                      EDI のバージョンとして入力されたことを確認します。 **00401**します。                                                                                                                       |


9. **[適用]** をクリックします。  

10. **[OK]** をクリックします。 新しく追加したアグリーメントが一覧表示、**契約**のセクション、**パーティとビジネス プロファイル**ウィンドウ。 新しく追加したアグリーメントは既定で有効になります。  

11. BizTalk サービスを再起動します。 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、[**プラットフォームの設定**、] をクリックして**ホスト インスタンス**、右クリックして**BizTalkServerApplication**順にクリックします**再起動**します。  

## <a name="next-steps"></a>次の手順  
 」の説明に従って、AS2 ソリューションをテストする[手順 11。AS2 ソリューションのテスト](../core/step-11-test-the-as2-solution.md)します。  

## <a name="see-also"></a>参照  
 [AS2 のプロパティを構成します。](../core/configuring-as2-properties.md)   
 [EDI のプロパティの構成](../core/configuring-edi-properties.md)