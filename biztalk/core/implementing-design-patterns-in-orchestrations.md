---
title: オーケストレーションでの設計パターンの実装 |Microsoft Docs
description: アグリゲーター、コンテンツ ベース ルーティング、動的ルーター、エラー処理、メッセージ ブローカー、および BizTalk Server でより多くの設計パターン
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: f62ba955-018a-40e7-b303-497acc906019
caps.latest.revision: 14
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 932a9563c338be0e5e29a2968ea4da52e1b65045
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65332429"
---
# <a name="implement-design-patterns-in-orchestrations"></a><span data-ttu-id="609a7-103">オーケストレーションでの設計パターンを実装します。</span><span class="sxs-lookup"><span data-stu-id="609a7-103">Implement Design Patterns in Orchestrations</span></span>
<span data-ttu-id="609a7-104">このセクションでは、BizTalk Server のエンタープライズ統合パターンとプログラミングの一般的なパターンについて説明します。</span><span class="sxs-lookup"><span data-stu-id="609a7-104">This section discusses the common patterns of BizTalk Server programming as well as enterprise integration patterns.</span></span> <span data-ttu-id="609a7-105">1 つのパターンを活用したり、ビジネス プロセスを設計し、BizTalk オーケストレーション デザイナーで図形を使用して、デザインを実装する複数のパターンを結合できます。</span><span class="sxs-lookup"><span data-stu-id="609a7-105">You can leverage a single pattern or combine multiple patterns to design your business process and then implement the design by using shapes in BizTalk Orchestration Designer.</span></span>  
  
## <a name="design-patterns"></a><span data-ttu-id="609a7-106">設計パターン</span><span class="sxs-lookup"><span data-stu-id="609a7-106">Design Patterns</span></span>  
 <span data-ttu-id="609a7-107">次のエントリの簡単な各パターンについて説明し、トピックまたは BizTalk オーケストレーション デザイナーを使用してパターンを実装する方法を示すサンプル をポイントします。</span><span class="sxs-lookup"><span data-stu-id="609a7-107">The following entries briefly describe each pattern and point to the topics or samples that show how to implement the patterns using BizTalk Orchestration Designer.</span></span>  
  
### <a name="aggregator"></a><span data-ttu-id="609a7-108">アグリゲーター</span><span class="sxs-lookup"><span data-stu-id="609a7-108">Aggregator</span></span>  
 <span data-ttu-id="609a7-109">アグリゲーターは、複数のソースから情報を受け取って、1 つのメッセージに統合するパターンです。</span><span class="sxs-lookup"><span data-stu-id="609a7-109">Aggregator is the pattern of receiving information from multiple sources and consolidating it into a single message.</span></span> <span data-ttu-id="609a7-110">このパターンの例は、」の Aggregate.odx を参照してください。[アグリゲーター (BizTalk Server サンプル)](../core/aggregator-biztalk-server-sample.md)します。</span><span class="sxs-lookup"><span data-stu-id="609a7-110">For an example of this pattern, see Aggregate.odx in [Aggregator (BizTalk Server Sample)](../core/aggregator-biztalk-server-sample.md).</span></span>  
  
### <a name="calling-pipelines-from-an-orchestration"></a><span data-ttu-id="609a7-111">オーケストレーションからパイプラインを呼び出す</span><span class="sxs-lookup"><span data-stu-id="609a7-111">Calling Pipelines from an Orchestration</span></span>  
 <span data-ttu-id="609a7-112">送信を呼び出すし、オーケストレーションから受信パイプラインことができます。</span><span class="sxs-lookup"><span data-stu-id="609a7-112">You can call send and receive pipelines from your orchestrations.</span></span> <span data-ttu-id="609a7-113">パイプラインの再利用は、このパイプライン ステージからオーケストレーションの分離の維持にも役立ちます。</span><span class="sxs-lookup"><span data-stu-id="609a7-113">This allows the reuse of pipelines and helps maintain the decoupling of an orchestration from the pipeline stages.</span></span> <span data-ttu-id="609a7-114">このパターンの例は、」の Aggregate.odx を参照してください。[アグリゲーター (BizTalk Server サンプル)](../core/aggregator-biztalk-server-sample.md)します。</span><span class="sxs-lookup"><span data-stu-id="609a7-114">For an example of this pattern, see Aggregate.odx in [Aggregator (BizTalk Server Sample)](../core/aggregator-biztalk-server-sample.md).</span></span> <span data-ttu-id="609a7-115">別の例は」の CMP.odx[で構成されるメッセージ プロセッサ (BizTalk Server サンプル)](../core/composed-message-processor-biztalk-server-sample.md)します。</span><span class="sxs-lookup"><span data-stu-id="609a7-115">Another example is CMP.odx in [Composed Message Processor (BizTalk Server Sample)](../core/composed-message-processor-biztalk-server-sample.md).</span></span> <span data-ttu-id="609a7-116">参照してください[パイプラインを実行する式を使用する方法](../core/how-to-use-expressions-to-execute-pipelines.md)します。</span><span class="sxs-lookup"><span data-stu-id="609a7-116">See also [How to Use Expressions to Execute Pipelines](../core/how-to-use-expressions-to-execute-pipelines.md).</span></span>  
  
### <a name="composed-message-processor"></a><span data-ttu-id="609a7-117">構成済みメッセージ プロセッサ</span><span class="sxs-lookup"><span data-stu-id="609a7-117">Composed Message Processor</span></span>  
 <span data-ttu-id="609a7-118">構成済みメッセージ プロセッサは、処理、集計またはバッチ化されたインターチェンジ メッセージから個々 の項目のパターンです。</span><span class="sxs-lookup"><span data-stu-id="609a7-118">Composed Message Processor is the pattern of processing individual items from an aggregated or batched interchange message.</span></span> <span data-ttu-id="609a7-119">このパターンの例は、」の CMP.odx を参照してください。[で構成されるメッセージ プロセッサ (BizTalk Server サンプル)](../core/composed-message-processor-biztalk-server-sample.md)します。</span><span class="sxs-lookup"><span data-stu-id="609a7-119">For an example of this pattern, see CMP.odx in [Composed Message Processor (BizTalk Server Sample)](../core/composed-message-processor-biztalk-server-sample.md).</span></span>  
  
### <a name="content-based-router"></a><span data-ttu-id="609a7-120">コンテンツ ベースのルーター</span><span class="sxs-lookup"><span data-stu-id="609a7-120">Content-Based Router</span></span>  
 <span data-ttu-id="609a7-121">コンテンツ ベースのルーターは、メッセージの内容の一部に基づいてメッセージの受信者を決定するパターンです。</span><span class="sxs-lookup"><span data-stu-id="609a7-121">Content-Based Router is the pattern of determining the recipient of a message based on some part of the message content.</span></span> <span data-ttu-id="609a7-122">このパターンの例は、次を参照してください。 [CBRSample (BizTalk Server サンプル)](../core/cbrsample-biztalk-server-sample.md)します。</span><span class="sxs-lookup"><span data-stu-id="609a7-122">For an example of this pattern, see [CBRSample (BizTalk Server Sample)](../core/cbrsample-biztalk-server-sample.md).</span></span>  
  
### <a name="dynamic-router"></a><span data-ttu-id="609a7-123">動的ルーター</span><span class="sxs-lookup"><span data-stu-id="609a7-123">Dynamic Router</span></span>  
 <span data-ttu-id="609a7-124">動的ルーターは、送信先アドレスとメッセージの処理の結果に基づいて、トランスポート プロトコルを決定するパターンです。</span><span class="sxs-lookup"><span data-stu-id="609a7-124">Dynamic Router is the pattern of determining the destination address as well as the transport protocol based on the result of message processing.</span></span> <span data-ttu-id="609a7-125">動的送信ポートを使用する、または**ロール リンク**図形をこのパターンを実装します。</span><span class="sxs-lookup"><span data-stu-id="609a7-125">You can use a dynamic send port or a **Role Link** shape to implement this pattern.</span></span> <span data-ttu-id="609a7-126">このパターンの例は、」の ReceiveSend.odx を参照してください。 [SendMail](../core/sendmail.md)します。</span><span class="sxs-lookup"><span data-stu-id="609a7-126">For an example of this pattern, see ReceiveSend.odx in [SendMail](../core/sendmail.md).</span></span> <span data-ttu-id="609a7-127">別の例は、SupplierProcess.odx [PartyResolution (BizTalk Server サンプル)](../core/partyresolution-biztalk-server-sample.md)します。</span><span class="sxs-lookup"><span data-stu-id="609a7-127">Another example is SupplierProcess.odx in [PartyResolution (BizTalk Server Sample)](../core/partyresolution-biztalk-server-sample.md).</span></span>  
  
### <a name="error-handling"></a><span data-ttu-id="609a7-128">エラー処理</span><span class="sxs-lookup"><span data-stu-id="609a7-128">Error Handling</span></span>  
 <span data-ttu-id="609a7-129">BizTalk Server では、保留キューに配置の失敗したメッセージの既定の動作の代替としてのエラーのメッセージの自動処理を指定できます。</span><span class="sxs-lookup"><span data-stu-id="609a7-129">BizTalk Server allows you to designate automated handling of messaging failures as an alternative to the default behavior of placing failed messages in the Suspended queue.</span></span> <span data-ttu-id="609a7-130">失敗したメッセージは、レポートまたは処理のためにサブスクライブしているポートにルーティングできます。</span><span class="sxs-lookup"><span data-stu-id="609a7-130">You can route failed messages to a subscribing port for reporting or processing.</span></span> <span data-ttu-id="609a7-131">このパターンの例は、」の ResubmitLogic.odx を参照してください。[エラー処理 (BizTalk Server Samples フォルダー)](../core/error-handling-biztalk-server-samples-folder.md)します。</span><span class="sxs-lookup"><span data-stu-id="609a7-131">For an example of this pattern, see ResubmitLogic.odx in [Error Handling (BizTalk Server Samples Folder)](../core/error-handling-biztalk-server-samples-folder.md).</span></span>  
  
### <a name="exception-handling-and-compensation"></a><span data-ttu-id="609a7-132">例外処理と補正</span><span class="sxs-lookup"><span data-stu-id="609a7-132">Exception Handling and Compensation</span></span>  
 <span data-ttu-id="609a7-133">例外ハンドラーを使用して、**例外のスロー**図形または**式**例外処理の形状。</span><span class="sxs-lookup"><span data-stu-id="609a7-133">You can use an exception handler and a **Throw Exception** shape or an **Expression** shape for exception handling.</span></span> <span data-ttu-id="609a7-134">次のコードを配置するなど、**式**例外をスローする図形:</span><span class="sxs-lookup"><span data-stu-id="609a7-134">For example, you can place the following code in the **Expression** shape to throw the exception:,</span></span>  
  
```  
excp = new System.Exception();  
throw(excp);  
```  
  
 <span data-ttu-id="609a7-135">補正ブロックを使用して、**補正**図形でコミットされたトランザクション、補正を実行します。</span><span class="sxs-lookup"><span data-stu-id="609a7-135">You can use a compensation block and a **Compensate** shape to perform the compensation on the transactions that have been committed.</span></span> <span data-ttu-id="609a7-136">このパターンの例は、」の UpdateContact.odx を参照してください。[補正 (BizTalk Server サンプル)](../core/compensation-biztalk-server-sample.md)します。</span><span class="sxs-lookup"><span data-stu-id="609a7-136">For an example of this pattern, see UpdateContact.odx in [Compensation (BizTalk Server Sample)](../core/compensation-biztalk-server-sample.md).</span></span> <span data-ttu-id="609a7-137">別の例は[カスタム例外](../core/custom-exceptions.md)します。</span><span class="sxs-lookup"><span data-stu-id="609a7-137">Another example is in [Custom Exceptions](../core/custom-exceptions.md).</span></span>  
  
### <a name="message-broker"></a><span data-ttu-id="609a7-138">メッセージ ブローカー</span><span class="sxs-lookup"><span data-stu-id="609a7-138">Message Broker</span></span>  
 <span data-ttu-id="609a7-139">メッセージ ブローカーは、メッセージの送信先を判断して、メッセージ フローの制御を維持しのパターンです。</span><span class="sxs-lookup"><span data-stu-id="609a7-139">Message Broker is the pattern of determining the destination of a message and still maintaining control over the message flow.</span></span> <span data-ttu-id="609a7-140">詳細については、次を参照してください。 [OrderBroker オーケストレーションで処理](../core/processing-in-the-orderbroker-orchestration.md)します。</span><span class="sxs-lookup"><span data-stu-id="609a7-140">For more, see  [Processing in the OrderBroker Orchestration](../core/processing-in-the-orderbroker-orchestration.md).</span></span>  
  
### <a name="message-filter"></a><span data-ttu-id="609a7-141">メッセージ フィルター</span><span class="sxs-lookup"><span data-stu-id="609a7-141">Message Filter</span></span>  
 <span data-ttu-id="609a7-142">メッセージ フィルター パターンは、処理のための特定の条件を満たすメッセージを選択します。</span><span class="sxs-lookup"><span data-stu-id="609a7-142">The Message Filter pattern selects messages meeting particular criteria for processing.</span></span> <span data-ttu-id="609a7-143">このパターンを実装するには、アクティブなにフィルター式を追加して**受信**図形。</span><span class="sxs-lookup"><span data-stu-id="609a7-143">You can implement this pattern by adding the filter expression to an activated **Receive** shape.</span></span> <span data-ttu-id="609a7-144">詳細については、次を参照してください。[を使用してフィルターと、受信メッセージ図形](../core/using-filters-with-the-receive-message-shape.md)します。</span><span class="sxs-lookup"><span data-stu-id="609a7-144">For more information, see [Using Filters With the Receive Message Shape](../core/using-filters-with-the-receive-message-shape.md).</span></span>  
  
### <a name="message-translator"></a><span data-ttu-id="609a7-145">メッセージ トランスレーター</span><span class="sxs-lookup"><span data-stu-id="609a7-145">Message Translator</span></span>  
 <span data-ttu-id="609a7-146">メッセージ トランスレーター パターンは、メッセージを 1 つの形式から別の形式に変換します。</span><span class="sxs-lookup"><span data-stu-id="609a7-146">The Message Translator pattern converts a message from one form to another form.</span></span> <span data-ttu-id="609a7-147">使用して BizTalk マップを使用してこのパターンを実装することができます、**変換**のオーケストレーションの図形。</span><span class="sxs-lookup"><span data-stu-id="609a7-147">You can implement this pattern by using a BizTalk map with a **Transform** shape in an orchestration.</span></span> <span data-ttu-id="609a7-148">このパターンの例は、」の HelloOrchestration.odx を参照してください。 [HelloWorld (BizTalk Server サンプル)](../core/helloworld-biztalk-server-sample.md)します。</span><span class="sxs-lookup"><span data-stu-id="609a7-148">For an example of this pattern, see HelloOrchestration.odx in [HelloWorld (BizTalk Server Sample)](../core/helloworld-biztalk-server-sample.md).</span></span>  
  
### <a name="parallel-convoy"></a><span data-ttu-id="609a7-149">パラレルなコンボイ</span><span class="sxs-lookup"><span data-stu-id="609a7-149">Parallel Convoy</span></span>  
 <span data-ttu-id="609a7-150">パラレルなコンボイ パターンでは複数の単一項目を結合して、個々 の項目が単独で実現できないことを実現します。</span><span class="sxs-lookup"><span data-stu-id="609a7-150">The Parallel Convoy pattern enables multiple single items to join together to achieve something that an individual item cannot accomplish by itself.</span></span> <span data-ttu-id="609a7-151">関連項目のセットは、任意の順序で受信されることは、プロセスを開始する前にすべての BizTalk Server で受信する必要があります。</span><span class="sxs-lookup"><span data-stu-id="609a7-151">The set of related items can arrive in any order, but BizTalk Server must receive all of them before starting the process.</span></span> 
  
### <a name="scatter-and-gather"></a><span data-ttu-id="609a7-152">スキャッター/ギャザー</span><span class="sxs-lookup"><span data-stu-id="609a7-152">Scatter and Gather</span></span>  
 <span data-ttu-id="609a7-153">スキャッター/ギャザー パターンは、複数の受信者に送信されるメッセージと各受信者から受信されるメッセージを使用できます。</span><span class="sxs-lookup"><span data-stu-id="609a7-153">The Scatter and Gather pattern enables messages to be sent to multiple recipients and messages to be received back from each recipient.</span></span> <span data-ttu-id="609a7-154">分割パターンおよびアグリゲーター パターンを使用して、このパターンを実装することができます。</span><span class="sxs-lookup"><span data-stu-id="609a7-154">You can implement this pattern by using the Splitter pattern and the Aggregator pattern.</span></span> <span data-ttu-id="609a7-155">アグリゲーター パターンを使用して、分割パターンの使用から結果をアセンブルし、下に配置する、**並列アクション**図形。</span><span class="sxs-lookup"><span data-stu-id="609a7-155">You use the Aggregator pattern to assemble the results from using the Splitter pattern and put them under a **Parallel Actions** shape.</span></span> 
  
### <a name="sequential-convoy"></a><span data-ttu-id="609a7-156">シーケンシャルなコンボイ</span><span class="sxs-lookup"><span data-stu-id="609a7-156">Sequential Convoy</span></span>  
 <span data-ttu-id="609a7-157">シーケンシャルなコンボイ パターンにより、複数の単一項目を結合して、個々 の項目が単独で実現できないことを実現します。</span><span class="sxs-lookup"><span data-stu-id="609a7-157">The Sequential Convoy pattern enables multiple single items to join together to achieve something that an individual item cannot accomplish by itself.</span></span> <span data-ttu-id="609a7-158">シーケンシャルなコンボイには、定義済み順序を持つ関連する項目のセットです。</span><span class="sxs-lookup"><span data-stu-id="609a7-158">A sequential convoy is a set of related items that have a predefined order.</span></span> <span data-ttu-id="609a7-159">項目が正確に同じである必要はありませんが、BizTalk Server は、順番に項目を受け取る必要があります。</span><span class="sxs-lookup"><span data-stu-id="609a7-159">Although the items do not have to be exactly the same, BizTalk Server must receive the items in a sequential order.</span></span> 
  
### <a name="splitter"></a><span data-ttu-id="609a7-160">分割線</span><span class="sxs-lookup"><span data-stu-id="609a7-160">Splitter</span></span>  
 <span data-ttu-id="609a7-161">分割パターンは、1 つのメッセージを受け取り、複数のメッセージに分割されます。</span><span class="sxs-lookup"><span data-stu-id="609a7-161">The Splitter pattern takes a single message and splits it into multiple messages.</span></span>  
  
### <a name="suspend-with-retry"></a><span data-ttu-id="609a7-162">中断後再試行</span><span class="sxs-lookup"><span data-stu-id="609a7-162">Suspend with Retry</span></span>  
 <span data-ttu-id="609a7-163">中断後再試行パターンは、エラーがある場合にメッセージを中断するオーケストレーションを使用できます。</span><span class="sxs-lookup"><span data-stu-id="609a7-163">The Suspend with Retry pattern enables the orchestration to suspend a message when there is an error.</span></span> <span data-ttu-id="609a7-164">オーケストレーションを中断します、オペレーターの介入を要求し、固定回数だけ操作を再試行できるように、ループ内で中断が発生します。</span><span class="sxs-lookup"><span data-stu-id="609a7-164">The suspension occurs within a loop so that the orchestration suspends, asks for intervention, and then retries the operation a fixed number of times.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="609a7-165">参照</span><span class="sxs-lookup"><span data-stu-id="609a7-165">See Also</span></span>  
 [<span data-ttu-id="609a7-166">オーケストレーション フローの設計</span><span class="sxs-lookup"><span data-stu-id="609a7-166">Designing Orchestration Flow</span></span>](../core/designing-orchestration-flow.md)