---
title: アダプタの変数 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: aeda96bc-5141-4c42-8a29-b0a28bc47aa4
caps.latest.revision: 25
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 6ddf23e80c999619950ea6ab92782fe28be7e59e
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/27/2018
ms.locfileid: "37021547"
---
# <a name="adapter-variables"></a>アダプター変数
すべてのカスタム アダプターで処理する必要のある変数がいくつか存在します。 これらの変数に代入される値は、アダプターに実装されるカスタム ロジックに影響します。 トランスポート固有またはアプリケーション固有の構成プロパティも、ソリューションのサポートに役立ちます。 このような共通の変数を次の表に示します。 それぞれの変数をカスタム アダプターでサポートするかどうかは個々に決定する必要があります。  

 作成するアダプターには、オプションごとに異なるインターフェイスを実装する必要があります。 次の表の後には、変数オプションの一覧と共に、デザインに関する意思決定をサポートするアダプター コードの記述方法を示す詳細情報へのリンクを記載しています。  


|                           アダプター変数                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               説明                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|----------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                       通信方向                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     **表示されます。** 受信アダプターは、プロトコル固有のアドレスで受信メッセージを待ち受けます。 受信アダプターが受信したメッセージはメッセージング エンジンに渡され、そこから受信パイプラインを経由して、最終的にはメッセージ ボックス データベースに保存されます。<br /><br /> **送信。** メッセージング エンジンから特定のエンドポイントにメッセージを送信する必要がある場合、そのメッセージは送信パイプラインに渡されます。 送信アダプターは送信パイプラインからメッセージを受け入れ、送信ポートに送信します。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|                           アダプターのホスト                            | **インプロセスです。** インプロセス アダプターが作成され、BizTalk サービス プロセス BTSNTSvc.exe 内でホストされています。 ホストが 64 ビットの場合、プロセスは BTSNTSvc64.exe をという名前です。 説明を簡単にするため、ここではこれ以上 64 ビット プロセスには触れません。<br /><br /> この場合、アダプターの作成と有効期間の管理、トランスポート プロキシでの初期化、アダプターの要求の処理、およびサービス停止時のアダプターの終了処理は [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] によって行われます。<br /><br /> インプロセス アダプターの場合、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] は実行時に構成情報をアダプターに送信する役割も担います。これには、ハンドラー、送信ポート、および受信場所の構成が含まれます。 さらに、構成のうちサービス時間帯などの側面はメッセージング エンジンによって処理されるため、受信場所や送信ポートがサービス時間外かどうかをアダプター側で確認する必要はありません。<br /><br /> 送信アダプターはすべてインプロセス アダプターであり、BTSNTSvc.exe プロセスで実行する必要があります。<br /><br /> **分離します。** 分離ホストで、アダプタを作成の一部、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ランタイム。 分離アダプターの例として、HTTP 受信アダプターがあります。このアダプターは、インターネット インフォメーション サービス (IIS) のプロセス領域で実行されます。<br /><br /> IIS のプロセス モデルでは、ASP.NET アプリケーションと ISAPI 拡張の有効期間は IIS で管理されるようになっています。 アダプターの有効期間を [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] で管理できない場合、そのアダプターは分離アダプターと呼ばれます。<br /><br /> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]をインスタンス化を管理していない分離アダプターのアダプターする必要がありますトランスポート プロキシを作成し、そのトランスポート プロキシの登録にします。<br /><br /> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] のアーキテクチャでは、不必要なプロセス間通信は排除されます。 分離アダプターと BizTalk スタックは同じプロセスにあるため、アダプターでメッセージング エンジンが呼び出されているときはプロセス間通信は発生しません。 唯一のプロセス間通信は、メッセージング エンジンとデータベースの間で行われます。これは回避できません。<br /><br /> COM+ アプリケーションでは、非マネージ コードで記述された送信アダプターはホストできません。 |
|                       メッセージ交換パターン                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           **一方向です。** メッセージは受信または送信のいずれかになります。<br /><br /> **要求-応答**(双方向)**します。** 要求 - 応答アダプターは、常に受信アダプターです。 要求 - 応答の受信アダプターは、クライアントから要求メッセージを受け取り、そのメッセージを [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] に送信します。 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] で要求メッセージの処理が完了すると、アダプターに応答メッセージが返されます。  アダプターはその応答メッセージをクライアントに返します。<br /><br /> **送信請求-応答**(双方向)**します。** 送信請求 - 応答アダプターは、常に送信アダプターです。 送信請求 - 応答送信アダプターは、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] からの要求メッセージを相手に送信し、応答メッセージを待機して、その応答メッセージを [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] に返します。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|                          送信ポートのバインド                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           **動的送信ポートし、受信場所。** 動的バインドで使用する送信ポートや受信場所の URI 変数は、実行時に決定されます。<br /><br /> **静的送信ポートし、受信場所。** 送信ポートや受信場所の URI 変数は静的であり、実行時前に構成されます。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|          同期送信アダプターと非同期送信アダプター          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      **同期送信アダプター。** 送信操作の実行中、メッセージング エンジンは、メッセージのバッチの送信が完了して制御が戻るまでトランスポート プロキシ スレッドをブロックします。 メッセージの送信、再試行、保留、または次の操作への移行の完了に伴うメッセージの削除は、トランスポート プロキシで処理されます。<br /><br /> **非同期送信アダプター。** 非同期送信アダプターは、トランスポート プロキシ スレッドをブロックせずに、個別のスレッドを使用して送信操作を実行します。 同期アダプターの場合とは異なり、削除と再試行のロジックはトランスポート プロキシでは処理されないため、すべてアダプター自体に実装する必要があります。<br /><br /> 非同期メッセージを送信するアダプターを使用すると、同期メッセージを送信するアダプターを使用した場合に比べて [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] のパフォーマンスが高くなります。 これは、スレッドが受信操作や送信操作の完了を待機する時間が長いためです。 メッセージング エンジンは高、CPU にバインドするためには、アダプターのパフォーマンスを低下メッセージング エンジンのスレッドをブロックします。<br /><br /> 非同期送信を使用することを強くお勧めします。非同期送信の使用はパフォーマンスの向上をもたらします。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|                    非同期受信アダプター                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      すべての受信アダプターは非同期です。 したがって、アダプターが BizTalk メッセージング エンジンに新しいメッセージを送信する際、それらのメッセージが完全に処理されるまで待機することなく制御が戻ります。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|                        トランザクション サポート                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    **トランザクション アダプター。** メッセージのトランザクション送信とトランザクション受信をサポートします。 送信側でトランザクションをサポートするのはバッチ化された非同期送信アダプターのみです。<br /><br /> **非トランザクション アダプター。** 明示的なトランザクションのスコープ内でメッセージの送受信を行わないアダプターです。 アダプターの多くは、トランザクションをサポートしない Windows ファイル システムなどのシステムから送受信を行うため、トランザクション以外のアダプターになります。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| バッチ処理に対応した送信アダプターとバッチ処理非対応の送信アダプター |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              **アダプターのバッチ処理に対応します。** 送信アダプターでは、複数の操作をまとめてメッセージをバッチ処理することができます。<br /><br /> どのアダプターも送信可能なメッセージをすべて収集してから一度にメッセージ ボックス データベースに送信できるので、データベースの更新回数が少なくて済みます。 場合によっては、バッチの長さが 1 になることもあります。 同様に、送信アダプターは送信可能なメッセージをすべて収集し、抽出して、それぞれの宛先に一度に送信します。<br /><br /> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] では通常、バッチはデータベース更新の 1 つの作業単位として扱われます。 アダプターは、一方向、要求 - 応答、および送信請求 - 応答のメッセージの送信、メッセージの保留、メッセージの削除、メッセージの再送信要求、またはバックアップ トランスポートへのメッセージの移動要求を同じバッチ内で行うことができます。 可能な限り、バッチ転送を使用するようにしてください。<br /><br /> 送信アダプターと受信アダプターはいずれもバッチ化できますが、トランザクションをサポートするのはバッチ化された非同期送信アダプターのみです。<br /><br /> **バッチ処理非対応のアダプターです。** メッセージごとに個別にサーバーを呼び出す必要があります。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|                   Batch でサポートされている受信アダプター                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  すべての受信アダプターでバッチ処理がサポートされます。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|       動的デザイン時アダプター構成と静的デザイン時アダプター構成        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        **動的デザイン時アダプター構成。** アダプターで動的デザイン時構成をサポートするには、アダプター メタデータの追加ウィザードで使用するカスタム ユーザー インターフェイス (UI) を開発する必要があります。 このインターフェイスは、ユーザーが BizTalk プロジェクトに追加するスキーマを選択できるようにするもので、Web Services Description Language (WSDL) ファイルを通じてサービス説明を返します。 スキーマを取得するためのカスタム UI はアダプターによって提供されます。 アダプター メタデータの追加ウィザードでサービスをインポートすると、スキーマに加え、ポートの種類、メッセージの種類、およびオーケストレーションが BizTalk プロジェクトに追加されます。<br /><br /> 詳細については、[静的デザイン時アダプター構成](../core/static-design-time-adapter-configuration.md)を参照してください。<br /><br /> **静的デザイン時アダプター構成。** アダプターで静的デザイン時構成をサポートするには、標準インターフェイスを実装して、BizTalk プロジェクトに追加するスキーマをアダプター メタデータの追加ウィザードで選択できるようにします。 アダプター用の UI は BizTalk アダプター フレームワークによって提供されます。<br /><br /> サンプル ファイル アダプターの変更方法の詳細については、[動的デザイン時アダプター構成](../core/dynamic-design-time-adapter-configuration.md)を参照してください。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|            トランスポート アダプターとアプリケーション アダプター            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  **トランスポート アダプター。** トランスポート アダプターは特定のプロトコルをサポートし、スキーマは使用しません。 12 個のネイティブ アダプターのトランスポート アダプターを 9: MSMQ、MQ Series、ファイル、FTP、HTTP、SMTP、POP3、および SOAP します。<br /><br /> **アプリケーション アダプター。** アプリケーション アダプターは、データ スキーマを使用して、指定されたアプリケーションにデータを送信します。 ネイティブ アダプターの 2 つはアプリケーション アダプター:[!INCLUDE[btsWinSharePointSvcsNoVersion](../includes/btswinsharepointsvcsnoversion-md.md)]と SQL です。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |

 カスタム アダプター コードに実装するインターフェイスについては、次の表のリンクをクリックして、作成するアダプターの種類に応じた情報を参照してください。 場合によっては、あるページに要件として記載されているインターフェイスを、別のページに別の要件として記載されているインターフェイスと組み合わせる必要があります。  

|変数|詳細情報|  
|--------------|--------------------------|  
|**送信アダプター**|[送信アダプターのインスタンス化と初期化](../core/instantiating-and-initializing-a-send-adapter.md)|  
|同期|[同期送信アダプター用のインターフェイス](../core/interfaces-for-a-synchronous-send-adapter.md)|  
|非同期|[非同期送信アダプター用のインターフェイス](../core/interfaces-for-an-asynchronous-send-adapter.md)|  
|バッチ処理に対応した同期送信アダプター|[バッチ処理に対応した同期送信アダプター用のインターフェイス](../core/interfaces-for-a-synchronous-batch-supported-send-adapter.md)|  
|バッチ処理に対応した非同期送信アダプター|[バッチ処理に対応した非同期送信アダプター用のインターフェイス](../core/interfaces-for-an-asynchronous-batch-supported-send-adapter.md)|  
|バッチ処理に対応したトランザクションとしての非同期送信アダプター|[バッチ処理に対応したトランザクションとしての非同期送信アダプター用のインターフェイス](../core/interfaces-for-a-transactional-asynchronous-batch-supported-send-adapter.md)|  
|送信請求 - 応答送信アダプター|[送信請求 - 応答送信アダプター用のインターフェイス](../core/interfaces-for-a-solicit-response-send-adapter.md)|  
|**受信アダプター**|[受信アダプターのインスタンス化と初期化](../core/instantiating-and-initializing-a-receive-adapter.md)|  
|Regular|[インプロセス受信アダプター用のインターフェイス](../core/interfaces-for-an-in-process-receive-adapter.md)|  
|分離されます。|[分離受信アダプター用のインターフェイス](../core/interfaces-for-an-isolated-receive-adapter.md)|  
|バッチ処理に対応した受信アダプター|[バッチ処理に対応した受信アダプター用のインターフェイス](../core/interfaces-for-a-batch-supported-receive-adapter.md)|  
|バッチ処理に対応したトランザクション受信アダプター|[バッチ処理に対応したトランザクション受信アダプター用のインターフェイス](../core/interfaces-for-a-transactional-batch-supported-receive-adapter.md)|  
|要求 - 応答の同期受信アダプター|[要求 - 応答の同期受信アダプター用のインターフェイス](../core/interfaces-for-a-synchronous-request-response-receive-adapter.md)|  

## <a name="see-also"></a>参照  
 [カスタム アダプターの開発](../core/developing-custom-adapters.md)   
 [アダプターを使用します。](../core/using-adapters.md)   
 [アダプタ サンプル - 開発](../core/adapter-samples-development.md)