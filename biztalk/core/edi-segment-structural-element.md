---
title: EDI セグメントの構造体要素 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 1f474a3d-004a-4981-b155-b0a5775918ba
caps.latest.revision: 6
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e1afe63e8830166c388a8d1ffc65782b6a473aa9
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65389181"
---
# <a name="edi-segment-structural-element"></a>EDI セグメントの構造要素
セグメントは 1 つまたは複数のデータ要素を含む、メッセージ内の情報の中間の単位です。 各セグメントが、3 文字のデータ セグメント識別子で始まり (既定ではアポストロフィ ('))、セグメント終端記号で終了します。 セグメント内のデータ要素は、データ要素区切り記号で区切られます。 既定でプラス記号 (+) のデータ要素区切り記号です。 セグメントは、必須または省略可能として分類されます。 送信インターチェンジの区切り記号は、アグリーメントまたはフォールバック取引先アグリーメントの一部として 2 つの取引先パートナーとの間で設定できます。  
  
## <a name="nesting"></a>入れ子  
 セグメントと呼ばれる階層関係でグループ化する**入れ子**します。 入れ子の 2 つの別個の型がある: 明示的および暗黙的な。 任意の 1 つのインターチェンジ内の入れ子の 1 つだけの型を使用していることができます。  
  
-   明示的な入れ子では、ループが入れ子になったことを明示的に示すを使用します。 明示的な入れ子を使用する場合、セグメント タグ内の最初のコンポーネント データ要素は、セグメント コードになります。 条件コンポーネント データ要素のレベルと、セグメントの繰り返しの頻度を示す続けてされます。 この目的に使用されるコンポーネント データ要素の数は、メッセージ構造にセグメントが表示される階層のレベルによって異なります。 セグメントは、いずれかのレベルに表示されますが、セグメント コードの直後のコンポーネント データ要素が使用されます。 セグメントがレベル 2 に表示する場合、セグメント コードと次のコンポーネント データ要素の直後のコンポーネント データ要素が使用されます。 セグメントがレベル 3 に表示する場合、セグメント コードの次の 3 つのコンポーネント データ要素が使用されます。 パイプラインは、階層にデータを比較する構造的な検証を実行できません。  
  
-   暗黙的な入れ子では、メッセージの構造体で指定されたセグメントの順序に厳密に従います。 セグメントの入れ子関係は明らかに暗黙的にして、さらに示す処理の必要はありません。  
  
## <a name="loops"></a>ループ  
 1 つまたは複数のセグメントとして繰り返すことができます、**ループ**トランザクション内で設定します。 2 つの異なる種類のループがある: 制限および制限します。  
  
### <a name="unbounded-loops"></a>境界のないループ  
 境界のないループの先頭とループの終了をマークする一意の識別セグメントではありません。 境界のないループは、カウントに従って繰り返されます。 かどうか、カウントには、値はありません、ループは 2 回繰り返されます。 ループ内の各セグメントは、指定した順序で 1 回だけ発生します。  
  
 境界のないループの開始は、一意である最初のデータ要素で確立されます。 最初の要素では、出現するたびに 1 回だけを表示できます。 境界のないループは、ループ内で入れ子にできます。場合は、内部の境界のないループは外側のループと同じ序数位置で開始できませんし、外側のループと同じセグメント ID を始めることはできません。 入れ子になったループは、同じ入れ子構造で外側のループの開始セグメントでもあるセグメントを含めることはできません。  
  
### <a name="bounded-loops"></a>境界のあるループ  
 境界のあるループは、定義済みセグメントの LS (ループ開始) で始まるし、定義済みセグメントの LE (ループ終了) で終了します。 LS セグメントの選択肢は、ループの最初のセグメントの一致する必要があります。 境界のあるループは、別の境界のあるループを含めることができます。  
  
> [!NOTE]
>  X12 での境界のあるループと EDIFACT における明示的なループは等価です。  
  
 バインディングは、あいまいさを解決するのには、ループで使用されます。 LS/LE セグメントの要件指定子では、ループの最初のセグメントの要件指定子と一致します。 バインドは loosens 特定よく繰り返さセグメントの使用量に構造的な制限です。 境界付けられたセグメント開始セグメント ID についての制約があるないです。 これにより、境界のあるループを開始し、次の例のように、ループの外で使用する同じセグメント。  
  
```  
AA  
LS  
BB  
CC  
LE  
BB  
```  
  
 下位のループ (ループ内のループ) が許可されます。 境界のあるループがループ内でネストされている場合、内側のループは外側のループと同じ序数位置で開始できません。 内部の境界のあるループは、すぐ外側のループする前に終了する必要があります。  
  
 各境界のあるループをトランザクション セット内で一意に定義されている < loop_id > 値の 1 ~ 4 文字の大文字または数字が必要です。 推奨されます、対応する LS および LE セグメントが同じ一意の < loop_id > 値を含めることができます。 < Loop_id > データ要素は「通常」のデータ要素として処理し、データ型、最小/最大長、optionality などを検証します。(LS および LE) 間でのセグメントを越えた検証は実施されません。BizTalk Server では、あいまいさの解決は LS および LE の存在を確認します。 セグメント、およびその他に何もします。 データ要素のルール違反の場合、トランザクション セットは、エラーで受理し、BizTalk Server 返します AK501 = E および該当する、確認で AK2/AK3 評価  
  
 また LS/LE セグメントのペアリングを強制するために必要な。 本質的なあいまいさ解決の問題、および AK501 により一致しない場合、トランザクション セットが拒否された場合に = E と AK502 = 5 が返されます、イベント ビューアーおよび 997 確認 LS/LE セグメントのいずれかまたは両方が、トランザクション セットがあいまいではなく、トランザクション セットがありで受理エラー、および AK501 = E と AK502 = 5 が返されます。  
  
 LS/LE の組み合わせは、省略可能または必須にできます。 ただしのペアが、反復可能である親ループに含まれている、しない限り、可能ではありません反復可能です。 いずれの場合も、LS/LE の組み合わせの MaxOccurs は両方ともが 1 を指定できますが、これは、スキーマの検証で強制より大きくありません。  
  
 EDI 逆アセンブラーと EDI アセンブラー ハンドル LS および LE セグメント。 、解析時に、逆アセンブラーは LS および LE の XML ノードを作成、セグメントし、セグメントを検証します。 をシリアル化中に、アセンブラーは LS を作成および LE セグメントから XML ノード、およびそれらを検証します。 必要な ls または LE セグメントが不足している、トランザクション セットは AK501 で中断/拒否 = E と AK502 = 5。 トランザクション セットがエラーと AK501 を伴って承諾済み LS/LE セグメントは、対応するデータ要素を含めず、EDI の検証が有効になっている場合は、= E と AK502 = 5 は、イベント ビューアーおよび 997 で報告される確認