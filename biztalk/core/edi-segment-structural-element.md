---
title: EDI セグメントの構造体要素 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 1f474a3d-004a-4981-b155-b0a5775918ba
caps.latest.revision: 6
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e1afe63e8830166c388a8d1ffc65782b6a473aa9
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65389181"
---
# <a name="edi-segment-structural-element"></a><span data-ttu-id="95141-102">EDI セグメントの構造要素</span><span class="sxs-lookup"><span data-stu-id="95141-102">EDI Segment Structural Element</span></span>
<span data-ttu-id="95141-103">セグメントは 1 つまたは複数のデータ要素を含む、メッセージ内の情報の中間の単位です。</span><span class="sxs-lookup"><span data-stu-id="95141-103">The segment contains one or more data elements, and is an intermediate unit of information in the message.</span></span> <span data-ttu-id="95141-104">各セグメントが、3 文字のデータ セグメント識別子で始まり (既定ではアポストロフィ ('))、セグメント終端記号で終了します。</span><span class="sxs-lookup"><span data-stu-id="95141-104">Each segment starts with a three-character data segment identifier, and ends with a segment terminator (by default the apostrophe (')).</span></span> <span data-ttu-id="95141-105">セグメント内のデータ要素は、データ要素区切り記号で区切られます。</span><span class="sxs-lookup"><span data-stu-id="95141-105">The data elements within the segment are separated by data element separators.</span></span> <span data-ttu-id="95141-106">既定でプラス記号 (+) のデータ要素区切り記号です。</span><span class="sxs-lookup"><span data-stu-id="95141-106">The data element separator is by default the plus sign (+).</span></span> <span data-ttu-id="95141-107">セグメントは、必須または省略可能として分類されます。</span><span class="sxs-lookup"><span data-stu-id="95141-107">A segment is classified as Mandatory or Optional.</span></span> <span data-ttu-id="95141-108">送信インターチェンジの区切り記号は、アグリーメントまたはフォールバック取引先アグリーメントの一部として 2 つの取引先パートナーとの間で設定できます。</span><span class="sxs-lookup"><span data-stu-id="95141-108">Separators for outgoing interchanges can be set in the agreements between two trading partners or as part of fallback trading partner agreement.</span></span>  
  
## <a name="nesting"></a><span data-ttu-id="95141-109">入れ子</span><span class="sxs-lookup"><span data-stu-id="95141-109">Nesting</span></span>  
 <span data-ttu-id="95141-110">セグメントと呼ばれる階層関係でグループ化する**入れ子**します。</span><span class="sxs-lookup"><span data-stu-id="95141-110">Segments may be grouped in a hierarchical relationship called **nesting**.</span></span> <span data-ttu-id="95141-111">入れ子の 2 つの別個の型がある: 明示的および暗黙的な。</span><span class="sxs-lookup"><span data-stu-id="95141-111">There are two distinct type of nesting: explicit and implicit.</span></span> <span data-ttu-id="95141-112">任意の 1 つのインターチェンジ内の入れ子の 1 つだけの型を使用していることができます。</span><span class="sxs-lookup"><span data-stu-id="95141-112">Within any one interchange only one type of nesting can be used.</span></span>  
  
-   <span data-ttu-id="95141-113">明示的な入れ子では、ループが入れ子になったことを明示的に示すを使用します。</span><span class="sxs-lookup"><span data-stu-id="95141-113">Explicit nesting uses an explicit indication that the loop is nested.</span></span> <span data-ttu-id="95141-114">明示的な入れ子を使用する場合、セグメント タグ内の最初のコンポーネント データ要素は、セグメント コードになります。</span><span class="sxs-lookup"><span data-stu-id="95141-114">When explicit nesting is used, the first component data element in the segment tag will be the segment code.</span></span> <span data-ttu-id="95141-115">条件コンポーネント データ要素のレベルと、セグメントの繰り返しの頻度を示す続けてされます。</span><span class="sxs-lookup"><span data-stu-id="95141-115">It will be followed by conditional component data elements indicating both the level and the incidence of repetition of the segment.</span></span> <span data-ttu-id="95141-116">この目的に使用されるコンポーネント データ要素の数は、メッセージ構造にセグメントが表示される階層のレベルによって異なります。</span><span class="sxs-lookup"><span data-stu-id="95141-116">The number of component data elements used for this purpose depends upon the hierarchical level in which the segment appears in the message structure.</span></span> <span data-ttu-id="95141-117">セグメントは、いずれかのレベルに表示されますが、セグメント コードの直後のコンポーネント データ要素が使用されます。</span><span class="sxs-lookup"><span data-stu-id="95141-117">If the segment is to appear at level one, the component data element immediately following the segment code will be used.</span></span> <span data-ttu-id="95141-118">セグメントがレベル 2 に表示する場合、セグメント コードと次のコンポーネント データ要素の直後のコンポーネント データ要素が使用されます。</span><span class="sxs-lookup"><span data-stu-id="95141-118">If the segment is to appear at level two, the component data element immediately following the segment code and the next component data element will both be used.</span></span> <span data-ttu-id="95141-119">セグメントがレベル 3 に表示する場合、セグメント コードの次の 3 つのコンポーネント データ要素が使用されます。</span><span class="sxs-lookup"><span data-stu-id="95141-119">If the segment is to appear at level three, the three component data elements following the segment code will be used.</span></span> <span data-ttu-id="95141-120">パイプラインは、階層にデータを比較する構造的な検証を実行できません。</span><span class="sxs-lookup"><span data-stu-id="95141-120">Pipelines cannot perform structural verification comparing data to hierarchy.</span></span>  
  
-   <span data-ttu-id="95141-121">暗黙的な入れ子では、メッセージの構造体で指定されたセグメントの順序に厳密に従います。</span><span class="sxs-lookup"><span data-stu-id="95141-121">In Implicit nesting, the order of the segments specified in the message structure is strictly followed.</span></span> <span data-ttu-id="95141-122">セグメントの入れ子関係は明らかに暗黙的にして、さらに示す処理の必要はありません。</span><span class="sxs-lookup"><span data-stu-id="95141-122">The nesting relationship between the segments is implicitly evident and no further indication is required for processing.</span></span>  
  
## <a name="loops"></a><span data-ttu-id="95141-123">ループ</span><span class="sxs-lookup"><span data-stu-id="95141-123">Loops</span></span>  
 <span data-ttu-id="95141-124">1 つまたは複数のセグメントとして繰り返すことができます、**ループ**トランザクション内で設定します。</span><span class="sxs-lookup"><span data-stu-id="95141-124">One or more segment can repeat as a **loop** inside a transaction set.</span></span> <span data-ttu-id="95141-125">2 つの異なる種類のループがある: 制限および制限します。</span><span class="sxs-lookup"><span data-stu-id="95141-125">There are two distinct types of loops: unbounded and bounded.</span></span>  
  
### <a name="unbounded-loops"></a><span data-ttu-id="95141-126">境界のないループ</span><span class="sxs-lookup"><span data-stu-id="95141-126">Unbounded Loops</span></span>  
 <span data-ttu-id="95141-127">境界のないループの先頭とループの終了をマークする一意の識別セグメントではありません。</span><span class="sxs-lookup"><span data-stu-id="95141-127">An unbounded loop does not have a unique identifying segment to mark the beginning and end of the loop.</span></span> <span data-ttu-id="95141-128">境界のないループは、カウントに従って繰り返されます。</span><span class="sxs-lookup"><span data-stu-id="95141-128">An unbounded loop repeats according to a count.</span></span> <span data-ttu-id="95141-129">かどうか、カウントには、値はありません、ループは 2 回繰り返されます。</span><span class="sxs-lookup"><span data-stu-id="95141-129">If the count does not have a value, the loop will repeat twice.</span></span> <span data-ttu-id="95141-130">ループ内の各セグメントは、指定した順序で 1 回だけ発生します。</span><span class="sxs-lookup"><span data-stu-id="95141-130">Each segment in the loop can occur only once in a specified order.</span></span>  
  
 <span data-ttu-id="95141-131">境界のないループの開始は、一意である最初のデータ要素で確立されます。</span><span class="sxs-lookup"><span data-stu-id="95141-131">The start of an unbounded loop is established by a first data element that is unique.</span></span> <span data-ttu-id="95141-132">最初の要素では、出現するたびに 1 回だけを表示できます。</span><span class="sxs-lookup"><span data-stu-id="95141-132">The first element can appear once and only once in each occurrence.</span></span> <span data-ttu-id="95141-133">境界のないループは、ループ内で入れ子にできます。場合は、内部の境界のないループは外側のループと同じ序数位置で開始できませんし、外側のループと同じセグメント ID を始めることはできません。</span><span class="sxs-lookup"><span data-stu-id="95141-133">Unbounded loops can be nested within loops; if so, the inner unbounded loop cannot start at the same ordinal position as any outer loop and cannot start with the same segment ID as any outer loop.</span></span> <span data-ttu-id="95141-134">入れ子になったループは、同じ入れ子構造で外側のループの開始セグメントでもあるセグメントを含めることはできません。</span><span class="sxs-lookup"><span data-stu-id="95141-134">The nested loop cannot contain a segment that is also the beginning segment of any outer loop in the same nesting structure.</span></span>  
  
### <a name="bounded-loops"></a><span data-ttu-id="95141-135">境界のあるループ</span><span class="sxs-lookup"><span data-stu-id="95141-135">Bounded Loops</span></span>  
 <span data-ttu-id="95141-136">境界のあるループは、定義済みセグメントの LS (ループ開始) で始まるし、定義済みセグメントの LE (ループ終了) で終了します。</span><span class="sxs-lookup"><span data-stu-id="95141-136">A bounded loop starts with the predefined segment LS (Loop Start) and ends with the predefined segment LE (Loop End).</span></span> <span data-ttu-id="95141-137">LS セグメントの選択肢は、ループの最初のセグメントの一致する必要があります。</span><span class="sxs-lookup"><span data-stu-id="95141-137">The optionality of the LS segment must match that of the first segment in the loop.</span></span> <span data-ttu-id="95141-138">境界のあるループは、別の境界のあるループを含めることができます。</span><span class="sxs-lookup"><span data-stu-id="95141-138">A bounded loop can contain another bounded loop.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="95141-139">X12 での境界のあるループと EDIFACT における明示的なループは等価です。</span><span class="sxs-lookup"><span data-stu-id="95141-139">A bounded loop in X12 and an explicit loop in EDIFACT are equivalent.</span></span>  
  
 <span data-ttu-id="95141-140">バインディングは、あいまいさを解決するのには、ループで使用されます。</span><span class="sxs-lookup"><span data-stu-id="95141-140">Binding is used in a loop to resolve ambiguity.</span></span> <span data-ttu-id="95141-141">LS/LE セグメントの要件指定子では、ループの最初のセグメントの要件指定子と一致します。</span><span class="sxs-lookup"><span data-stu-id="95141-141">The requirement designator on the LS/LE segments matches the requirement designator of the first segment of the loop.</span></span> <span data-ttu-id="95141-142">バインドは loosens 特定よく繰り返さセグメントの使用量に構造的な制限です。</span><span class="sxs-lookup"><span data-stu-id="95141-142">Binding loosens structural restrictions imposed on the usage of certain commonly repeating segments.</span></span> <span data-ttu-id="95141-143">境界付けられたセグメント開始セグメント ID についての制約があるないです。</span><span class="sxs-lookup"><span data-stu-id="95141-143">Bounded segments have no restrictions with respect to the beginning segment ID.</span></span> <span data-ttu-id="95141-144">これにより、境界のあるループを開始し、次の例のように、ループの外で使用する同じセグメント。</span><span class="sxs-lookup"><span data-stu-id="95141-144">This enables the same segment to start a bounded loop and be used outside of the loop, as in the following example:</span></span>  
  
```  
AA  
LS  
BB  
CC  
LE  
BB  
```  
  
 <span data-ttu-id="95141-145">下位のループ (ループ内のループ) が許可されます。</span><span class="sxs-lookup"><span data-stu-id="95141-145">Subordinate loops (loops within loops) are allowed.</span></span> <span data-ttu-id="95141-146">境界のあるループがループ内でネストされている場合、内側のループは外側のループと同じ序数位置で開始できません。</span><span class="sxs-lookup"><span data-stu-id="95141-146">If bounded loops are nested within loops, the inner loop cannot start at the same ordinal position as any outer loop.</span></span> <span data-ttu-id="95141-147">内部の境界のあるループは、すぐ外側のループする前に終了する必要があります。</span><span class="sxs-lookup"><span data-stu-id="95141-147">The inner bounded loop must end before the immediate outer loop.</span></span>  
  
 <span data-ttu-id="95141-148">各境界のあるループをトランザクション セット内で一意に定義されている < loop_id > 値の 1 ~ 4 文字の大文字または数字が必要です。</span><span class="sxs-lookup"><span data-stu-id="95141-148">Each bounded loop within a transaction set must have a uniquely defined <loop_id> value of one to four uppercase letters or numeric digits.</span></span> <span data-ttu-id="95141-149">推奨されます、対応する LS および LE セグメントが同じ一意の < loop_id > 値を含めることができます。</span><span class="sxs-lookup"><span data-stu-id="95141-149">It is recommended that the corresponding LS and LE segments contain the same unique <loop_id> value.</span></span> <span data-ttu-id="95141-150">< Loop_id > データ要素は「通常」のデータ要素として処理し、データ型、最小/最大長、optionality などを検証します。(LS および LE) 間でのセグメントを越えた検証は実施されません。BizTalk Server では、あいまいさの解決は LS および LE の存在を確認します。 セグメント、およびその他に何もします。</span><span class="sxs-lookup"><span data-stu-id="95141-150">The <loop_id> data element will be processed as a “regular” data element and validated for data type, min/max length, optionality, etc. Cross-segment validation (across LS and LE) will not be carried out. BizTalk Server will verify ambiguity resolution via the presence of the LS and LE segment and nothing else.</span></span> <span data-ttu-id="95141-151">データ要素のルール違反の場合、トランザクション セットは、エラーで受理し、BizTalk Server 返します AK501 = E および該当する、確認で AK2/AK3 評価</span><span class="sxs-lookup"><span data-stu-id="95141-151">In the case of data-element rule violation, the transaction set is accepted with errors, and BizTalk Server returns AK501=E and the appropriate valuation in AK2/AK3 in the ACK.</span></span>  
  
 <span data-ttu-id="95141-152">また LS/LE セグメントのペアリングを強制するために必要な。</span><span class="sxs-lookup"><span data-stu-id="95141-152">It is also required that pairing of LS/LE segments is enforced.</span></span> <span data-ttu-id="95141-153">本質的なあいまいさ解決の問題、および AK501 により一致しない場合、トランザクション セットが拒否された場合に = E と AK502 = 5 が返されます、イベント ビューアーおよび 997 確認</span><span class="sxs-lookup"><span data-stu-id="95141-153">In case of a mismatch, the transaction set is rejected due to an inherent ambiguity resolution issue, and AK501 = E and AK502 = 5 are returned in the Event Viewer and the 997 ACK.</span></span> <span data-ttu-id="95141-154">LS/LE セグメントのいずれかまたは両方が、トランザクション セットがあいまいではなく、トランザクション セットがありで受理エラー、および AK501 = E と AK502 = 5 が返されます。</span><span class="sxs-lookup"><span data-stu-id="95141-154">When  either or both LS/LE segments are missing, but the transaction set is not ambiguous, the transaction set will be accepted with errors, and AK501=E and AK502 = 5 returned.</span></span>  
  
 <span data-ttu-id="95141-155">LS/LE の組み合わせは、省略可能または必須にできます。</span><span class="sxs-lookup"><span data-stu-id="95141-155">An LS/LE pair can be optional or mandatory.</span></span> <span data-ttu-id="95141-156">ただしのペアが、反復可能である親ループに含まれている、しない限り、可能ではありません反復可能です。</span><span class="sxs-lookup"><span data-stu-id="95141-156">However, unless the pair is contained in a parent loop that is repeatable, the pair can never be repeatable.</span></span> <span data-ttu-id="95141-157">いずれの場合も、LS/LE の組み合わせの MaxOccurs は両方ともが 1 を指定できますが、これは、スキーマの検証で強制より大きくありません。</span><span class="sxs-lookup"><span data-stu-id="95141-157">In either case, both MaxOccurs for an LS/LE pair can be 1, but not greater than 1.This is enforced in schema validation.</span></span>  
  
 <span data-ttu-id="95141-158">EDI 逆アセンブラーと EDI アセンブラー ハンドル LS および LE セグメント。</span><span class="sxs-lookup"><span data-stu-id="95141-158">The EDI Disassembler and EDI Assembler handle LS and LE segments.</span></span> <span data-ttu-id="95141-159">、解析時に、逆アセンブラーは LS および LE の XML ノードを作成、セグメントし、セグメントを検証します。</span><span class="sxs-lookup"><span data-stu-id="95141-159">During parsing, the Disassembler created XML nodes for the LS and LE segments, and validates the segments.</span></span> <span data-ttu-id="95141-160">をシリアル化中に、アセンブラーは LS を作成および LE セグメントから XML ノード、およびそれらを検証します。</span><span class="sxs-lookup"><span data-stu-id="95141-160">During serializing, the Assembler creates the LS and LE segments from XML nodes, and validates them.</span></span> <span data-ttu-id="95141-161">必要な ls または LE セグメントが不足している、トランザクション セットは AK501 で中断/拒否 = E と AK502 = 5。</span><span class="sxs-lookup"><span data-stu-id="95141-161">If an expected LS or LE segment is missing, the transaction set is suspended/rejected with an AK501 = E and AK502 = 5.</span></span> <span data-ttu-id="95141-162">トランザクション セットがエラーと AK501 を伴って承諾済み LS/LE セグメントは、対応するデータ要素を含めず、EDI の検証が有効になっている場合は、= E と AK502 = 5 は、イベント ビューアーおよび 997 で報告される確認</span><span class="sxs-lookup"><span data-stu-id="95141-162">If LS/LE segments are present without corresponding data element, and EDI validation is enabled, the transaction set is accepted with errors and AK501 = E and AK502 = 5 are reported in the Event Viewer and the 997 ACK.</span></span>