---
title: FTP アダプタの構成 |Microsoft ドキュメント
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- FTP adapters, configuring
- configuring [FTP adapters]
ms.assetid: 7e7d2e2d-142e-4459-be25-efd501b396d2
caps.latest.revision: 17
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 203f6b7ce49dfba26c4883d5b26afee6bcc82f49
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/20/2017
ms.locfileid: "22235474"
---
# <a name="configuring-the-ftp-adapter"></a>FTP アダプタの構成


## <a name="before-you-begin"></a>アンインストールの準備
- FTP アダプターは、セキュリティで保護された FTP サーバーからのデータの読み取りおよび書き込みをサポートします。 アダプターは、Secure Sockets Layer (SSL)/Transport Level Security (TLS) を経由した FTP サーバーからのファイル転送をサポートします。 
- FTP アダプターは、読み取り専用ファイルの場所からファイルのダウンロードをサポートします。 
- FTP アダプターも ASCII モードでアトミック ファイル転送をサポートします。

参照してください[ベスト プラクティスと、FTP アダプターの推奨事項](../core/best-practices-and-recommendations-for-the-ftp-adapter.md)です。


## <a name="configure-the-receive-location"></a>受信場所を構成します。

FTP を設定することができます、BizTalk Server 管理コンソールでの受信場所のアダプター プロパティです。 プロパティが設定されていない場合、受信場所で、BizTalk Server 管理コンソールで、受信ハンドラーの既定値が使用されます。  
  
> [!NOTE]
>  次の手順を完了する前にする必要がありますが既に追加受信ポート。 参照してください[を作成する方法、受信ポート](../core/how-to-create-a-receive-port.md)です。  
1.  BizTalk Server 管理コンソールで、次のように展開します**BizTalk Server 管理コンソール**、展開**BizTalk グループ**、展開**アプリケーション**、の順に展開し、。受信場所を作成するアプリケーション。  
  
2.  左側のウィンドウでをクリックして、**受信ポート**ノード。 右側のウィンドウで、既存の受信場所に関連付けられている受信ポートを右クリックし、または、新しい受信場所に関連付けるし、をクリックする**プロパティ**です。  
  
3.  **受信ポートのプロパティ**ダイアログ ボックスで、左ペインで、select、**受信場所**です。 右ペインで、ダブルクリックする受信場所またはをクリックして、既存**新規**新しい受信場所を作成します。  
  
4.  **受信場所のプロパティ**] ダイアログ ボックスで、**トランスポート**横**型**[ **FTP**ドロップダウン リストからとをクリックして**構成**です。  
  
5.  **FTP トランスポートのプロパティ**次の操作を行います。  

    **バッチ**
    
    |プロパティ|目的|  
    |--------------|----------------|  
    |**ファイルの最大数**|BizTalk Server のバッチごとの最大ファイル数を指定します。<br /><br /> ゼロ (0) は制限がないことを示します。<br /><br /> **既定値:** 0|  
    |**最大サイズ**|BizTalk Server のバッチごとの最大バイト数を指定します。<br /><br /> ゼロ (0) は制限がないことを示します。<br /><br /> **既定値:** 0|  
    
    **ファイアウォール**
    
    |プロパティ|目的|  
    |--------------|----------------|     
    |**Address**|ファイアウォールのアドレスとして、DNS 名または IP アドレスを指定します。|  
    |**モード**|アダプタから FTP サーバーへの接続モードを指定します。<br /><br /> **有効な値:** パッシブおよびアクティブ<br /><br /> アクティブ モードでは、FTP アダプターによって開かれたポートに FTP サーバーが接続します。 パッシブ モードでは、FTP サーバーによって開かれたポートに FTP アダプターが接続します。<br /><br /> **既定値:** Active|  
    |**Password**|ファイアウォールのパスワードを指定します。|  
    |**[ポート]**|ファイアウォールのポートを指定します。<br /><br /> **有効な値:** 1 ~ 65535<br /><br /> **既定値:** 21|  
    |**型**|展開するファイアウォールの種類を指定します。<br /><br /> **有効な値:** なし、Socks 4]、[Socks 5<br /><br /> **既定値:** なし|  
    |**ユーザー**|ファイアウォールのユーザー名を指定します。|  
    
    **FTP**
    
    |プロパティ|目的|  
    |--------------|----------------|      
    |**アカウント**|FTP サーバーのアカウント名を指定します。 このオプションは廃止されており、このプロパティの使用はお勧めします。|  
    |**Get コマンドの後**|ファイル GET の後に実行する FTP コマンドを指定します。 コマンドの区切りにはセミコロン (;) を使用します。|  
    |**取得する前に**|ファイル GET 前に実行する FTP コマンドを指定します。 コマンドの区切りにはセミコロン (;) を使用します。 **注:** QUIT コマンドは、ファイルを取得する前にサポートされていません。|  
    |**エラーのしきい値**|BizTalk Server が発生する可能性があるエラーの数を指定する場所が無効になります。<br /><br /> **既定値:** 10|  
    |**ファイル マスク**|ファイルの送信時に使用するファイル マスクのフィルタを指定します。|  
    |**フォルダー**|FTP サーバーのポーリング場所を指定します。|      
    |**FTP サーバーの種類** | 始まる新しい[!INCLUDE[bts2016_md](../includes/bts2016-md.md)]です。 <br/><br/>このプロパティを使用して、FTP SYST コマンドを必要としないサーバーを選択します。 オプションは、None、AIX、検出、GXS、MVS、OS400、およびその他です。 <br/><br/>場合設定**None**、SYST コマンドを使用します。 **その他の**は OS の種類が指定したカテゴリのいずれかに収まらない場合に使用します。 <br /><br /> **既定値:** なし|    
    |**Log**|ログ ファイルのコピーを保存する場所を指定します。 FTP 経由でファイルを送受信する際のエラー状況を診断するのにには、このファイルを使用します。|  
    |**最大ファイル サイズ**|ダウンロード可能なファイル サイズの最大値を、MB (メガバイト) 単位で指定します。<br /><br /> ゼロ (0) はファイル サイズに制限がないことを示します。<br /><br /> **既定値:** 100|  
    |**Password**|FTP サーバーにログオンするユーザー パスワードを指定します。|  
    |**[ポート]**|この FTP サーバーのポート アドレスを指定します。<br /><br /> **既定値:** 21|  
    |**表現**|FTP でのデータの受信形式を選択します。<br /><br /> **有効な値:** バイナリまたは ASCII<br /><br /> **既定値:** バイナリ|  
    |**[サーバー]**|FTP サーバーの名前または IP アドレスを指定します。 **注:** の URI を送信ポートまたは受信場所は、256 文字を超えることはできません。|  
    |**SSO 関連**|エンタープライズ シングル サインオンの関連アプリケーションを指定します。|  
    |**名前リスト (NLST) の使用します。**|アダプターがファイルの一覧を作成する方法を指定します。 システムによって定義されたファイルの一覧の代わりにファイル名を表示するには、この値を Yes に設定します。<br /><br /> **既定値:** なし|  
    |**[ユーザー名]**|FTP サーバーにログオンするユーザー名を指定します。|  
    
    **ポーリング**
    
    |プロパティ|目的|  
    |--------------|----------------|         
    |**ダウンロード後に削除します。**|ファイルのダウンロード後に、アダプターが FTP サーバーからファイルを削除するかどうかを指定します。<br /><br /> **既定値:** はい**注意してください。**|  
    |**タイムスタンプの比較を有効にします。**|修正後のタイムスタンプを基にアダプターがファイルをもう一度ダウンロードするかどうかを指定します。 アダプターが FTP サーバーでの削除アクセス許可を持っていない場合、MDTM (更新時刻) コマンドにより、アダプターは、最後のダウンロード以降にファイルが変更されたかどうかを判断できます。  このプロパティの値に基づいて、ファイルは再度ダウンロードされます。<br /><br /> **既定値:** いいえ**注**: FTP サーバーが MDTM をサポートしていない場合に、設定、**再ダウンロード間隔**プロパティです。 **注:** 該当する場合にのみ、このプロパティは**ダウンロード後に削除**[いいえ] に設定されています。|  
    |**間隔**|この場所のポーリングを行う間隔を示す数値を指定します。 継続してポーリングを行うには、この値をゼロ (0) に設定します。<br /><br /> **既定値:** 60|  
    |**再ダウンロード間隔**|アダプターがファイルを再度ダウンロードするまでの間隔を指定します。 該当する場合にのみ、このプロパティは両方とも**ダウンロード後に削除**と**タイムスタンプ比較の**いいえ に設定されます<br /><br /> **既定値:** -1<br /><br /> -1 は、アダプターがファイルを再度ダウンロードしないことを示します。<br /><br /> 0 は、ポーリング周期ごとにアダプターがファイルをダウンロードします。|  
    |**単位**|単位の種類の指定、**間隔**と**再ダウンロード間隔**プロパティです。<br /><br /> **有効な値:** 秒、分、時間、および日<br /><br /> **既定値:** (秒)|  
    
    **SSL**
    
    |プロパティ|目的|  
    |--------------|----------------|
    |**クライアント証明書のハッシュ**|Secure Sockets Layer (SSL) のネゴシエーションでの使用を要求するクライアント証明書の SHA1 ハッシュを指定します。<br /><br /> このハッシュに基づいて、BizTalk ホスト インスタンスを実行しているユーザー アカウントの個人ストアからクライアント証明書が取得されます。|  
    |**FTPS 接続モード**|FTPS サーバーに対して行う SSL 接続のモードを指定します。<br /><br /> **有効な値:** 暗黙的または明示的な<br /><br /> **既定値:** 明示的な|  
    |**データ保護を使用します。**|アダプターが FTPS サーバーとの間でデータ ファイルを送受信するときに、SSL 暗号化を使用する必要がある場合は、[はい] を指定します。 アダプターがデータ ファイルをテキスト形式で送受信する場合は、[いいえ] を指定します。 **注:** このプロパティは、該当する場合にのみ、 **SSL を使用する**プロパティが [はい] に設定します。 <br /><br /> **有効な値:** はいまたは No<br /><br /> **既定値:** [はい]|  
    |**SSL を使用します。**|FTP アダプターが FTPS サーバーとの通信に SSL を使用する必要があるかどうかを指定します。<br /><br /> **有効な値:** はいまたは No<br /><br /> **既定値:** なし|  
    
    **チューニング パラメータ**
    
    |プロパティ|目的|  
    |--------------|----------------|     
    |**受信データ タイムアウト**|受信呼び出しを中止するまでの時間をミリ秒単位で指定します。 このプロパティを使用すると、低速のサーバーによって受信場所が応答を停止するのを防ぐことができます。<br /><br /> **既定値:** 90000|  
    |**一時フォルダー**|一時フォルダの場所を指定します。 この場所は、転送エラーの修復に使用されます。|  
  
6.  をクリックして**OK**設定を保存します。  
  
7.  **受信場所のプロパティ** ダイアログ ボックスで、受信場所の構成を完了し、をクリックするには、適切な値を入力して**OK**設定を保存します。 については、**受信場所のプロパティ**ダイアログ ボックスを参照してください[受信場所を作成する方法](../core/how-to-create-a-receive-location.md)です。  
  
> [!NOTE]
>  同一の FTP URL をポーリングする FTP 受信場所を複数構成しないでください。 複数の FTP 受信場所から同時に同一の URL をポーリングすると、各受信場所にファイルのコピーが送信され、データが重複する原因になる場合があります。 FTP プロトコルには対象の URL からファイルを読み取るときのロック機能がないため、このような動作が発生します。  
>   
>  FTP を受信アダプター、FTP の高可用性、構成する必要がありますを実現するには、クラスター化された BizTalk ホスト インスタンスで実行するアダプターを受信します。 参照してください[クラスター化されたホストでアダプター ハンドラーの実行に関する考慮事項](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)です。  

## <a name="configure-the-send-port"></a>送信ポートを構成します。

BizTalk Server 管理コンソールでは、FTP 送信ポート アダプタのプロパティを設定できます。 プロパティが送信ポートに設定されていない場合、既定の送信ハンドラの BizTalk Server 管理コンソール内の値が使用されます。  
  
1.  BizTalk Server 管理コンソールで、新しい送信ポートを作成または変更する既存の送信ポートをダブルクリックします。 参照してください[送信ポートを作成する方法](../core/how-to-create-a-send-port2.md)です。 すべての送信ポートのオプションを構成し、[、**トランスポート**のセクションで、**全般**] ページで、指定**FTP**の**型**オプション。  
  
2.  **全般**] ページの [、**トランスポート**セクションで、をクリックして、**構成**横に**型**です。  
  
3.  **FTP トランスポートのプロパティ**次の操作を行います。  
  
    **ファイアウォール**
    
    |プロパティ|目的|  
    |--------------|----------------|    
    |**Address**|ファイアウォールのアドレスとして、DNS 名または IP アドレスを指定します。|  
    |**モード**|アダプタから FTP サーバーへの接続モードを選択します。<br /><br /> **有効な値:** パッシブおよびアクティブ<br /><br /> アクティブ モードでは、FTP アダプターによって開かれたポートに FTP サーバーが接続します。 パッシブ モードでは、FTP サーバーによって開かれたポートに FTP アダプターが接続します。<br /><br /> **既定値:** Active|  
    |**Password**|ファイアウォールのパスワードを指定します。|  
    |**[ポート]**|ファイアウォールのポートを指定します。<br /><br /> **有効な値:** 1 ~ 65535 以内<br /><br /> **既定値:** 21|  
    |**型**|展開するファイアウォールの種類を選択します。<br /><br /> **有効な値:** Socks 4、Socks 5、なし<br /><br /> **既定値:** なし|  
    |**ユーザー**|ファイアウォールのユーザー名を指定します。|  
    
    **FTP**
    
    |プロパティ|目的|  
    |--------------|----------------| 
    |**アカウント**|省略可。 FTP サーバーのアカウント名を指定します。 このオプションは推奨されていません。このプロパティは使用しないでください。|  
    |**Put コマンドの後**|ファイル PUT コマンドの後に実行する FTP コマンドを指定します。 コマンドの区切りにはセミコロン (;) を使用します。|  
    |**記憶域を割り当てください。**|レガシ ホスト システムに記憶域スペースを割り当てるかどうかを指定します。 このオプションは下位互換用に使用します。<br /><br /> **有効な値:** いいえ、はい<br /><br /> **既定値:** なし|  
    |**Put コマンドの前**|ファイル PUT コマンド (FTP サーバーの既定値を変更するコマンドなど) の前に実行する FTP コマンドを指定します。 コマンドの区切りにはセミコロン (;) を使用します。 ファイルを開くコマンドは必要ありません。 **注:** QUIT コマンドは、ファイルを配置する前にサポートされていません。|  
    |**フォルダー**|FTP サーバー上のファイルの移動先を指定します。|      
    |**FTP サーバーの種類** | 始まる新しい[!INCLUDE[bts2016_md](../includes/bts2016-md.md)]です。 <br/><br/>このプロパティを使用して、FTP SYST コマンドを必要としないサーバーを選択します。 オプションは、None、AIX、検出、GXS、MVS、OS400、およびその他です。 <br/><br/>場合設定**None**、SYST コマンドを使用します。 **その他の**は OS の種類が指定したカテゴリのいずれかに収まらない場合に使用します。 <br /><br /> **既定値:** なし|  
    |**Log**|ログ ファイルのコピーの保存先を指定します。 このファイルは、FTP アダプター経由でファイルを送受信する際のエラー状況を診断するために使用できます。|  
    |**Password**|FTP サーバーにログオンするためのパスワードを指定します。|  
    |**[ポート]**|FTP サーバーのポート アドレスを指定します。<br /><br /> **既定値:** 21|  
    |**表現**|FTP アダプターから送信するデータの形式を、バイナリまたは ASCII から選択します。<br /><br /> **有効な値:** バイナリまたは ASCII<br /><br /> **既定値:** バイナリ|  
    |**[サーバー]**|FTP サーバーの名前または IP アドレスを指定します。|  
    |**SSO 関連**|エンタープライズ シングル サインオンの関連アプリケーションを指定します。|  
    |**ターゲット ファイル名**|ファイルの代替名を指定します。 既定の名前を保持すると、送信されたメッセージごとの一意のメッセージ名が保証されます。<br /><br /> **既定値:** %MessageID%.xml|  
    |**[ユーザー名]**|FTP サーバーにログオンするユーザー名を指定します。|  
    
    **SSL**
    
    |プロパティ|目的|  
    |--------------|----------------|
    |**クライアント証明書のハッシュ**|Secure Sockets Layer (SSL) のネゴシエーションでの使用を要求するクライアント証明書の SHA1 ハッシュを指定します。<br /><br /> このハッシュに基づいて、BizTalk ホスト インスタンスを実行しているユーザー アカウントの個人ストアからクライアント証明書が取得されます。|  
    |**FTPS 接続モード**|FTPS サーバーに対して行う SSL 接続のモードを指定します。<br /><br /> **有効な値:** 暗黙的または明示的な<br /><br /> **既定値:** Explicit|  
    |**データ保護を使用します。**|アダプターが FTPS サーバーとの間でデータ ファイルを送受信するときに、SSL 暗号化を使用する必要がある場合は、[はい] を指定します。 アダプターがデータ ファイルをテキスト形式で送受信する場合は、[いいえ] を指定します。 **注:** このプロパティは、該当する場合にのみ、 **SSL を使用する**プロパティが [はい] に設定します。 <br /><br /> **有効な値:** はいまたは No<br /><br /> **既定値:** [はい]|  
    |**SSL を使用します。**|FTP アダプターが FTPS サーバーとの通信に SSL を使用する必要があるかどうかを指定します。<br /><br /> **有効な値:** はいまたは No<br /><br /> **既定値:** なし|  
    
    **チューニング パラメータ**
    
    |プロパティ|目的|  
    |--------------|----------------| 
    |**接続の制限**|サーバーに対して開くことができる FTP の同時接続の最大数を指定します。 値 0 を指定した場合、接続は制限されません。<br /><br /> **既定値:** 0**注:** このプロパティには、接続の制限を制御するために BizTalk Server の以前のバージョンで使用されたレジストリ エントリが置き換えられます。 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]接続の制限を制御するために使用するレジストリ エントリを無視します。|  
    |**一時フォルダー**|FTP サーバー上の一時フォルダの場所を指定します。 ファイルは最初にここにアップロードされてから、送信先の FTP フォルダーに移動されます。 転送エラーが発生した場合、アダプターは ASCII 転送モードでファイルのアップロードを再度開始し、バイナリ転送モードで再開します。 **注:** ファイルの転送は一時的な場所と FTP サーバー上の関連する場所の間で分割不可能なかどうかは、ファイルのアップロードもアトミックです。|  
  
4.  をクリックして **[ok]** と**OK**もう一度設定を保存します。   


## <a name="ftp-commands-required-by-the-ftp-adapter"></a>FTP アダプタで必要な FTP コマンド  
FTP アダプタは、FTP プロトコルによる制限を受けます。送信元または送信先 FTP サーバーでは、特定の FTP コマンドを使用できる必要があります。  

FTP アダプターは、FTP クライアントとして動作して、次のコマンドが正常に機能する FTP サーバーで利用できることがあります。 
 
|Command  |必要なによって受信  |送信に必要な  |
|---------|---------|---------|
|SYST | ✔ <br/><br/>以降で省略可能です[!INCLUDE[bts2016_md](../includes/bts2016-md.md)] | ✔<br/><br/>以降で省略可能です[!INCLUDE[bts2016_md](../includes/bts2016-md.md)] |
| ストア | |✔|
| RETR | ✔ | |
| User |✔ | ✔ |
| PASS | ✔ | ✔ |
| CWD |✔ | ✔ |
| QUIT |✔ | ✔ |
| PORT | ✔ | ✔ |
| PASV | ✔ | ✔ |
| ABOR | ✔ | ✔ |
| TYPE | ✔ | ✔ |
| RNFR | ✔ | ✔ |
| RNTO | ✔ | ✔ |
| DELE | ✔ | ✔ | 
| PWD | ✔ | ✔ |
| LIST | ✔ | ✔ |
| NLST | ✔ | ✔ |
| NOOP | ✔ | ✔ |
| APPE |  | ✔ |
| ALLO | ✔ | ✔ |
| MDTM | ✔ | |
| AUTH TLS | ✔ | ✔ | 
| PBSZ | ✔ | ✔ | 
| PROT | ✔ | ✔ |

 これらの FTP コマンドの詳細についてを参照してください。  
  
-   [RFC 959 - ファイル転送プロトコル](http://go.microsoft.com/fwlink/p/?LinkId=119603)(http://go.microsoft.com/fwlink/p/?LinkId=119603)  
  
-   [RFC 4217 - TLS で保護する FTP](http://go.microsoft.com/fwlink/p/?LinkId=183154) (http://go.microsoft.com/fwlink/p/?LinkId=183154)  
  
-   [RFC 3659 - FTP 拡張](http://go.microsoft.com/fwlink/p/?LinkId=183155)(http://go.microsoft.com/fwlink/p/?LinkId=183155)  
  
## <a name="configuring-an-ftp-adapter-to-work-with-legacy-hosts"></a>レガシ ホストと連携する FTP アダプタを構成します。

このセクションでは、FTP アダプタとメインフレーム コンピュータ間の通信を容易にするために知っておく必要がありますを説明します。   
> [!NOTE]
>  MVS または AS400 のホストにファイルを送信するときは、一時フォルダーの機能を使用できません。 このフィールドへの入力はサポートされず、エラーが発生します。  
  
> [!IMPORTANT]
>  次の情報は参考用です。AS400 または IBM のドキュメントに記載されている情報に代わるものではありません。  
  
## <a name="mvs"></a>MVS  
 メインフレームの FTP サーバーにファイルを送信するには、メインフレームが IBM Generation Data Group (GDG) をサポートしている必要があります。 名前フィールドの各ファイル名は、送信先のファイル名 (引用符で囲まれた完全なパス) に (+1) が付加されます。  
  
## <a name="as400"></a>AS400  
 AS400 システムとの間でファイルをやり取りするとき、ファイル名の指定とパスの定義の方法は 3 つあります。  
  
-   **Filename フィールド**: FTP サーバーにファイルを送信するときにファイル名を入力、 **Filename**フィールドです。 ファイルは Library File System に保存されるので、AS400 システムのファイル名の名前付け規則に従ってファイル名を付ける必要があります。  
  
-   **Quote コマンド**: Quote コマンドを使用して、リモート コンピューターでスクリプトを実行します。 Quote コマンドを入力、 **Before GET**、 **Before PUT**、 **After GET**、および**After PUT**エンドポイントのいずれかのフィールドです。 Quote コマンドは、次の形式で入力します。  
  
    ```  
    QUOTE RCMD <command to be run on the remote system>.  
    ```  
  
-   **ファイル システム (IFS) を統合**: IFS は AS400 システムにより、PC ベースのファイルとそのため、PC として同じ名前付け規則の記憶域を上の領域。 既定の Library File System ではなく IFS を使用するには、まず `quote site namefmt 1` コマンドを入力します。 このコマンドで、AS400 システムに IFS 名前付け規則を使用するよう命令します。    

   
## <a name="more-good-stuff"></a>便利な機能
  
[FTP アダプター プロパティ スキーマおよびプロパティ](../core/ftp-adapter-property-schema-and-properties.md)  

[ベスト プラクティスと、FTP アダプターの推奨事項](../core/best-practices-and-recommendations-for-the-ftp-adapter.md)  

[FTP アダプター](../core/ftp-adapter.md)