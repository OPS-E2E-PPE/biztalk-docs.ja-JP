---
title: SMTP 送信ポートを構成する方法 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- configuring [SMTP adapters], send ports
- send ports, SMTP adapters
- SMTP adapters, send ports
ms.assetid: b2291378-718d-4d1a-9d54-cd34c1b2e000
caps.latest.revision: 25
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 02345d2036b24fde6cf2063419c24e65e530080a
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/27/2018
ms.locfileid: "37007635"
---
# <a name="how-to-configure-an-smtp-send-port"></a>SMTP 送信ポートを構成する方法
SMTP 送信ポートは、プログラムから、または BizTalk Server 管理コンソールを使用して構成できます。  
  
 **プログラムから SMTP 送信ポートを構成する方法**  
  
 SMTP アダプタの構成情報は BizTalk 管理データベース (構成データベース) に書き込まれます。 構成情報はカスタム XML プロパティ バッグに保存されます。 SMTP アダプタの初期化中、および実行中、次のようにしてサーバーからアダプタに構成が渡されます。  
  
- SMTP 送信ハンドラの構成情報が渡されますアダプターを呼び出すことによって、**ロード**のメソッド、 **IPersistPropertyBag**インターフェイス。  
  
- SMTP 送信アダプタの場合、構成情報はメッセージ コンテキストのプロパティとしてアダプタに渡されます。 プロパティは、SMTP 名前空間によりグループ化されます。  
  
  BizTalk エクスプローラ オブジェクト モデルは、TransportTypeData という読み取り/書き込みプロパティを含んでいる ITransportInfo アダプタ構成インターフェイスを送信ポート用に公開します。 このプロパティでは、名前と値の組の XML 文字列の形式で SMTP 送信ポートの構成プロパティ バッグを指定できます。 アドレス プロパティを設定することを BizTalk エクスプローラ オブジェクト モデルでこのプロパティを設定する必要があります最初に注意してください、 **ITransportInfo**インターフェイス。  
  
  設定、 **TransportTypeData**のプロパティ、 **ITransportInfo**インターフェイスは必要ありません。 このプロパティを設定しない場合、SMTP 送信ポートでは SMTP 送信ハンドラの既定値が使用されます。 SMTP 送信ポート固有のプロパティは、SMTP 送信アダプタのプロパティ スキーマ bts_smtp_properties.xsd で定義されています。  
  
  送信ハンドラの構成プロパティを複製したプロパティを定義していない場合、ハンドラの構成プロパティが使用されます。 必須プロパティを定義しない場合は、既定値が使用されます。 既定値を定義していない場合、SMTP 送信ハンドラによってエラーがイベント ログに記録され、メッセージがバックアップ アダプタに渡されます。  
  
  これらのプロパティは、メッセージ コンテキストでプログラムによって設定できます。 また、これらのプロパティは BizTalk オーケストレーション スケジュールまたはカスタム パイプライン コンポーネントに設定できます。 プロパティを使用するときは、次の規則が適用されます。  
  
- プロパティがオーケストレーション、または受信パイプラインのカスタム パイプライン コンポーネントに設定されているとき  
  
  -   静的な送信ポートにメッセージを送信した場合、その送信ポートに構成されている値でプロパティ値が上書きされます。  
  
  -   動的な送信ポートにメッセージを送信した場合、プロパティ値は上書きされません。  
  
- プロパティが送信パイプラインのカスタム パイプライン コンポーネントに設定されているとき  
  
  -   メッセージを送信する送信ポートが静的か動的かにかかわらず、プロパティ値は上書きされません。  
  
  次の表に、BizTalk エクスプローラのオブジェクト モデルで SMTP 送信場所用に設定できる構成プロパティを示します。  
  
|プロパティ名|型|説明|制限|コメント|  
|-------------------|----------|-----------------|------------------|--------------|  
|**SMTPHost**|xs:string|メッセージの送信に使用する SMTP サーバー。|最大長: 256|既定値: 空です。<br /><br /> 既定値を指定すると、ハンドラの構成値が SMTP 送信ポートで使用されます。|  
|**From**|xs:string|電子メール アドレス、SMTP 送信ポートを配置して、SMTP**から**ヘッダー。|最大長: 256|既定値: 空です。<br /><br /> 既定値を指定すると、ハンドラの構成値が SMTP 送信ポートで使用されます。|  
|**Cc**|xs:string|メッセージのコピーを送信する電子メール アドレス。|最大長: 1024|既定値: 空<br /><br /> 複数の電子メール アドレスを指定できます。|  
|**[Subject]**|xs:string|メッセージの件名ヘッダー。|最小長: 0<br /><br /> 最大長: 256|既定値: %messageid% します。|  
|**SMTPAuthenticate**|xs:int|使用する認証の種類。|なし|有効な値:<br /><br /> -0 - 認証なし<br />-1 - 基本認証<br />-2 - プロセス アカウント (NTLM)<br /><br /> 既定値を指定すると、ハンドラの構成値が SMTP 送信ポートで使用されます。 既定値を適用するには、TransportTypeData プロパティを設定するときに、このプロパティをプロパティ バッグから削除します。|  
|**UserName**|xs:string|SMTP サーバーで認証に使用するユーザー名。|最小長: 0<br /><br /> 最大長: 256|既定値: 空<br /><br /> 場合、値が必要**SMTPAuthenticate**が 1 (基本認証)。|  
|**Password**|xs:string|SMTP サーバーでの認証に使用するユーザーのパスワード。|最小長: 0<br /><br /> 最大長: 256|既定値: 空<br /><br /> 場合、値が必要**SMTPAuthenticate**が 1 (基本認証)。|  
|**ReadReceipt**|xs:boolean|この送信ポートからのメッセージに対して開封確認メッセージを要求します。|なし|既定値: False|  
|**DeliveryReceipt**|xs:boolean|この送信ポートからのメッセージに対して配信確認メッセージを要求します。|なし|既定値: False|  
|**EmailBodyText**|xs:string|送信する電子メールの本文に使用するテキストを指定します。|最大長: 64 kb|既定値: 空|  
|**EmailBodyTextCharset**|xs:string|ときに送信する電子メールの本文のエンコードを使用する文字セットの指定、 **EmailBodyText**オプションを使用します。 SMTP アダプタは、変換、 **EmailBodyText**文字で指定されたセットに**EmailBodyTextCharset**します。|なし|既定値: なし。 明示的に値を設定する必要があります (UTF-8 など)。<br /><br /> 値を設定しなかった場合、エラー (後述) が発生します。|  
|**EmailBodyFile**|xs:string|ファイルの内容が送信される電子メールやファイルへの完全パスの本文に使用されることを指定します。 このパスは、実行時に SMTP アダプターのホストからアクセスできる必要があります。|パスの最大長: 256 文字|既定値: 空|  
|**EmailBodyFileCharset**|xs:string|場合に送信する電子メールの本文のエンコードを使用する文字セットの指定、 **EmailBodyFile**プロパティを設定します。 SMTP アダプターではファイルの変換は行われません。ファイルはこの文字セットであらかじめエンコードされている必要があります。 ファイルにバイト オーダー マーク (BOM) が含まれている場合は、SMTP アダプターで削除されます。|なし|既定値: utf-8 (65001)|  
|**[Attachments]**|xs:string|電子メール メッセージにファイルを添付することと、添付するファイルへの完全パスを指定します。 指定されたパスは、実行時に SMTP アダプターのホストからアクセスできる必要があります。|パスの最大長: 256 文字|既定値: 空|  
|**MessagePartsAttachments**|xs:int|BizTalk メッセージ部分を電子メールのメッセージに添付する方法を指定します。|なし|有効な値:<br /><br /> -0 - いいえ BizTalk メッセージ部分は、添付ファイルとして使用されます。<br />-1 - BizTalk メッセージのボディ部が電子メールの添付ファイルとして送信されます。 ここで、 **EmailBodyFile**または**EmailBodyText**プロパティを指定する必要があります。 どちらのプロパティも指定しない場合、BizTalk メッセージのボディ部が電子メールの添付ファイルではなく本文として送信されます。<br />-2 - すべての部分は、添付ファイルとして送信されます。 ただし場合、 **EmailBodyText**または**EmailBodyFile**が指定されていない BizTalk メッセージのボディ部が電子メールの本文として送信され、他の部分が添付ファイルとして送信されます。<br /><br /> 既定値: 0|  
|**ReplyBy**|xs:dateTime|設定、 **Reply-by**ヘッダー フィールドで指定の値を持つメッセージを送信します。|このプロパティは、送信ポートのプロパティ ページでは設定できません。 パイプラインまたはオーケストレーションから設定できます。|既定値: 空|  
  
 次のコード例は、上記のプロパティの設定に使用する XML 文字列の形式を示しています。  
  
```  
<CustomProps>  
   <DeliveryReceipt vt="11">-1</DeliveryReceipt  
   <SMTPHost vt="8">sfdsadf</SMTPHost>  
   <Subject vt="8">Some subject</Subject>  
   <From vt="8">username@domain.com</From>  
   <SMTPAuthenticate vt="19">2</SMTPAuthenticate>  
   <ReadReceipt vt="11">-1</ReadReceipt>  
</CustomProps>  
```  
  
 **BizTalk Server 管理コンソールで、SMTP 送信ポートを構成する方法**  
  
 BizTalk Server 管理コンソールで、SMTP 送信ポート アダプタの変数を設定できます。 プロパティが送信ポートに設定されていない場合は、BizTalk Server 管理コンソールで設定した既定の送信ハンドラの値が使用されます。  
  
 BizTalk Server 管理コンソールを使用して SMTP 送信ポートを構成するには、次の操作を行います。  
  
### <a name="to-configure-variables-for-an-smtp-send-port"></a>SMTP 送信ポートの変数を構成するには  
  
1.  BizTalk Server 管理コンソールで、新しい送信ポートを作成するか、既存の送信ポートをダブルクリックして変更します。 詳細については、次を参照してください。[送信ポートを作成する方法](../core/how-to-create-a-send-port2.md)します。 すべての送信ポートのオプションを構成し、指定**SMTP**の**型**オプション、**トランスポート**のセクション、**全般**タブ。  
  
2.  **全般** タブで、**トランスポート**セクションで、横に**型**、 をクリックして**構成**します。  
  
3.  **SMTP トランスポートのプロパティ** ダイアログ ボックスの 、**全般** タブで、次の操作を行います。  
  
    |プロパティ|目的|  
    |--------------|----------------|  
    |**変換先**|必須。 メッセージ送信先の電子メール アドレスを指定します。<br /><br /> 複数のアドレスを指定できます。<br /><br /> 最大長: 256<br /><br /> このプロパティの詳細については、次を参照してください。 [SMTP の To プロパティに関する制限事項](../core/restrictions-on-the-smtp-to-property.md)します。|  
    |**Cc**|メッセージのカーボン コピーを送信する電子メール アドレスを指定します。<br /><br /> 複数のアドレスを指定できます。<br /><br /> 最大長: 1024|  
    |**[Subject]**|メッセージの件名ヘッダーを指定します。<br /><br /> 最小長: 0<br /><br /> 最大長: 256|  
    |**通知**|受信通知の種類を指定します。 次のいずれかの種類または両方の種類の確認メッセージを選択できます。 選択できる確認メッセージの種類を以下に示します。<br /><br /> -   **開封**します。 メッセージが開封されたときに送信される、確認電子メール メッセージ。<br />-   **配信確認メッセージ**します。 メッセージが配信されるときに、確認の電子メール メッセージが送信されます。|  
  
4.  **SMTP トランスポートのプロパティ** ダイアログ ボックスの 、 **Compose**  タブで、次の操作を行います。  
  
    |プロパティ|目的|  
    |--------------|----------------|  
    |**BizTalk メッセージのボディ部**|送信する電子メールの本文に、BizTalk メッセージのボディ部分を使用するように指定します。|  
    |**テキスト**|送信する電子メールの本文に使用するテキストを指定します。 後に、**テキスト**オプションが選択されているテキスト ボックスに、電子メールの本文のテキストを入力することができます。<br /><br /> **最大長:** 64 Kb|  
    |**テキストの文字セット**|-送信される電子メールの本文のエンコードを使用する文字セットを指定します。 このオプションは使用可能な場合、**テキスト**オプションを選択します。<br />-   **既定値:** utf-8 (65001)|  
    |**[最近使ったファイル]**|送信する電子メールの本文にファイルの内容を使用することを指定すると共に、ファイルへのパスを指定します。 後に、**ファイル**オプションを選択する、省略記号ボタンをクリックすることができます (**.**) ファイルを参照するボタンをクリックします。<br /><br /> パスの最大長: 256 文字**注:** は運用環境で使用する BizTalk Server グループ内のすべての BizTalk サーバーからアクセスできるファイル共有のパスを指定する場合は、推奨されるベスト プラクティスです。|  
    |**ファイルの文字セット**|送信するファイルの文字セットのエンコードを指定します。 **注:** SMTP アダプターがファイルに指定したエンコーディングを適用していません。 このオプションは、送信するファイルのエンコード形式を指定するためだけに使用します。 <br /><br /> このオプションは使用可能な場合、**ファイル**オプションを選択します。<br /><br /> 既定値: utf-8 (65001)|  
  
5.  **SMTP トランスポートのプロパティ** ダイアログ ボックスの 、**添付ファイル** タブで、次の操作を行います。  
  
    |プロパティ|目的|  
    |--------------|----------------|  
    |**BizTalk メッセージの残りの部分**|BizTalk メッセージ部分を電子メール メッセージに添付する方法を指定します。<br /><br /> オプション：<br /><br /> -   **部分を添付しません。**<br />-   **ボディ部のみを添付します。**<br />-   **すべての部分を添付します。**<br /><br /> 既定値: 部分を添付しません。|  
    |**[追加]**|電子メール メッセージに添付するファイルを指定します。 クリックすると**追加**参照ファイルを選択し、添付するファイルの一覧に追加することができます。<br /><br /> パスの最大長: 256 文字**注:** は運用環境で使用する BizTalk Server グループ内のすべての BizTalk サーバーからアクセスできるファイル共有のパスを指定する場合は、推奨されるベスト プラクティスです。|  
    |**[削除]**|電子メール メッセージに添付するファイルの一覧から、選択したファイルを削除します。|  
  
6.  **SMTP トランスポートのプロパティ** ダイアログ ボックスの 、**ハンドラー上書き** タブで、次の操作を行います。  
  
    |プロパティ|目的|  
    |--------------|----------------|  
    |**SMTP サーバー名**|メッセージの送信時に使用する SMTP サーバーの名前を指定します。<br /><br /> 最大長: 256**注:** URI を送信ポートまたは受信場所が 256 文字を超えることはできません。|  
    |**差出人 (電子メール アドレス)**|SMTP に配置する電子メール アドレスを指定**から**ヘッダー。<br /><br /> 最大長: 256|  
    |**認証の種類**|SMTP サーバーで使用する認証の種類を指定します。<br /><br /> オプション：<br /><br /> -   **(既定値)**<br />-   **認証なし**<br />-   **基本認証**<br />-   **プロセス アカウント (NTLM)**<br /><br /> 既定値を指定すると、送信ハンドラに指定された構成値が SMTP 送信ポートで使用されます。|  
    |**ユーザー名**|SMTP サーバーでの認証に使用するユーザー名を指定します。<br /><br /> このプロパティには、値がある場合は**認証の種類**は**基本認証**します。<br /><br /> 最小長: 0<br /><br /> 最大長: 256|  
    |**Password**|SMTP サーバーでの認証に使用するパスワードを指定します。<br /><br /> このプロパティには、値がある場合は**認証の種類**は**基本認証**します。<br /><br /> 最小長: 0<br /><br /> 最大長: 256|  
  
7.  をクリックして **[ok]** と**OK**設定を保存するには、もう一度です。  
  
## <a name="see-also"></a>参照  
 [SMTP アダプターの構成](../core/configuring-the-smtp-adapter.md)