---
title: 'チュートリアル (AS2): AS2 経由での非 EDI メッセージの送信 |Microsoft Docs'
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 6120b81e-bdd5-44ad-9040-26be88c71258
caps.latest.revision: 33
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 78da76298e4443acfafa1893e6e4c5bb946bfd2f
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/27/2018
ms.locfileid: "37002467"
---
# <a name="walkthrough-as2-sending-a-non-edi-message-over-as2"></a>チュートリアル (AS2): AS2 経由での 非 EDI メッセージの送信
このチュートリアルでは、AS2 経由で非 EDI メッセージを送信するためのソリューションを作成する一連の手順について説明します。 このチュートリアルでは、PIDX メッセージを AS2 経由で送信します。 このソリューションでは、AS2Send 送信パイプラインと AS2Receive 受信パイプラインを持つ双方向の送信ポートが使用されます。 作成し、1 台のコンピューターには、このチュートリアルでは、完全なソリューションをテストできます。  
  
## <a name="prerequisites"></a>必須コンポーネント  
 次に、このトピックの手順を実行するための前提条件を示します。  
  
- [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理者グループまたは [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] B2B Operators グループのメンバーとしてログオンしている必要があります。  
  
- チュートリアルを実行するコンピューターには、インターネット インフォメーション サービス (IIS) 7 がインストールされている必要があります。  
  
- チュートリアルを実行するコンピューターに 64 ビット版の Windows がインストールされている場合は、BizTalk ホストが 32 ビットのみとマークされていることを確認する必要があります。 IIS の [アプリケーション プールの 32 ビット アプリケーション設定を有効にする] を True に設定する必要があります。 詳細については、[チュートリアル 3: AS2 チュートリアル](../core/tutorial-3-as2-tutorial.md)を参照してください。  
  
## <a name="how-the-solution-sends-a-non-edias2-message-and-returns-a-synchronous-mdn"></a>ソリューションが非 EDI/AS2 メッセージを送信して同期 MDN を返す方法  
 このソリューションは次の処理を実行します。  
  
1. 一方向のファイル受信ポートは、Contoso から XML メッセージを受信します。  
  
   > [!NOTE]
   >  この一覧のイベントは、示されている順序で発生するとは限りません。  
  
2. 受信ポートは、XML 受信パイプラインを使用してメッセージをチェックします。 次に、受信ポートは、テスト メッセージをそのままメッセージ ボックスにドロップします。  
  
3. 静的な双方向送信ポートは XML メッセージを取得し、受信ポートが受信するすべてのメッセージをサブスクライブします。  
  
4. Fabrikam の双方向受信ポートは、Fabrikam の仮想ディレクトリを使用して AS2 メッセージを受信します。 受信パイプラインは、AS2 のメッセージをデコードし、そのメッセージをメッセージ ボックスにドロップします。  
  
5. パススルー送信パイプラインを持つ静的な一方向の送信ポートは、XML メッセージを取得します。  
  
6. 一方向の送信ポートは、XML メッセージをローカル フォルダーに送信します。  
  
7. 双方向受信ポートに関連付けられている送信ポートは、同期 MDN を返します。  
  
8. 双方向送信ポートに関連付けられている受信ポートは、MDN を受信し、それをメッセージ ボックスにドロップします。  
  
9. パススルー送信パイプラインを持つ静的な一方向の送信ポートは、MDN を取得します。  
  
10. 一方向の送信ポートは、MDN をローカル フォルダーに送信します。  
  
    次の図は、ソリューションのアーキテクチャを示しています。  
  
    ![非送信&#45;AS2 経由で EDI メッセージ](../core/media/57b7dc54-b8e8-462e-98d1-9cddedd14107.gif "57b7dc54-b8e8-462e-98d1-9cddedd14107")  
  
## <a name="the-functionality-in-this-solution"></a>このソリューションの機能  
 このチュートリアルの機能には、以下の条件が適用されます。  
  
-   このチュートリアルでは、AS2 機能について説明します。 このため、AS2 処理に関連するすべてのポートは、AS2Receive パイプラインまたは AS2Send パイプラインを使用します。 AS2 処理に関連しないポートは、XMLReceive パイプラインまたは PassThruTransmit パイプラインを使用します。  
  
-   このチュートリアルでは、XML テスト メッセージを使用します。  
  
    > [!NOTE]
    >  XML テスト メッセージおよびテスト メッセージ用のスキーマを用意する必要があります。  
  
-   状態レポートが有効になっていません。  
  
-   このソリューションは、否認不可データベースに署名、圧縮、暗号化、およびメッセージ ストレージを構成しません。 これらのプロパティを構成する手順については、[AS2 プロパティを設定する](../core/configuring-as2-properties.md)を参照してください。  
  
## <a name="configuring-and-testing-the-walkthrough"></a>チュートリアルの構成とテスト  
 このソリューションに必要な手順は以下のとおりです。  
  
- 必要なメッセージ スキーマを使用して BizTalk プロジェクトをビルドおよび展開し、受信したメッセージを [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] で処理するときにそのスキーマを利用できるようにします。  
  
- AS2 メッセージの受信に使用する BTS ISAPI フィルターを有効にします。  
  
- Contoso からの AS2 メッセージを受信する Fabrikam 仮想ディレクトリを、受信場所で構成したとおりに作成します。  
  
- Fabrikam 仮想ディレクトリが Windows SharePoint Services の管理対象から除外されるように指定します。  
  
- AS2 トランスポート経由で送信される XML テスト メッセージを受信する、一方向 FILE 受信ポートを作成します。 テスト メッセージを受信するローカル フォルダーを作成します。  
  
- 静的な送信請求 - 応答 HTTP 送信ポートを作成し、送信パイプラインとして AS2Send パイプラインを、および受信パイプラインとして AS2Receive パイプラインを構成します。 ポートは、AS2 メッセージを Fabrikam に送信し、MDN 応答を Fabrikam から受信してメッセージ ボックスにドロップします。  
  
- AS2 メッセージを受信し、MDN 応答を送信する [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 用の双方向 HTTP 受信ポートを作成します。 受信パイプラインとして AS2Receive パイプラインを構成し、送信パイプラインとして AS2Send パイプラインを構成します。 Fabrikam 仮想ディレクトリ経由で AS2 メッセージを受信する受信場所を構成します。  
  
  > [!NOTE]
  >  テスト ソリューションは 1 台のコンピューター上にあります。よって、AS2 メッセージ (Contoso から) を送信する双方向送信ポート、および AS2 メッセージ (Fabrikam から) を受信する双方向受信ポートは、同一コンピューター上にあります。  
  
- メッセージ XML ペイロードをローカル フォルダーにルーティングする静的な一方向の FILE 送信ポート (パススルー送信パイプラインを持つ) を作成します。 ローカル フォルダーを作成します。  
  
  > [!NOTE]
  >  メッセージ ペイロードをサブスクライブする送信ポートがない場合、メッセージ ボックスで中断されます。  
  
- MDN をローカル フォルダーにルーティングする静的な一方向の FILE 送信ポート (パススルー送信パイプラインを持つ) を作成します。 ローカル フォルダーを作成します。  
  
- Fabrikam および Contoso の両方にパーティ (取引先) を作成します。  
  
- 両方の取引先に対して、それぞれビジネス プロファイルを作成します。  
  
- Fabrikam および Contoso のビジネス プロファイル間に AS2 アグリーメントを作成します。 AS2 アグリーメントには、AS2 メッセージを送信し、その応答として同期 MDN を受信するプロパティが含まれます。  
  
- XML テスト メッセージを使用してチュートリアルをテストします。  
  
### <a name="configuring-the-walkthrough"></a>チュートリアルの構成  
 ここでは、チュートリアルを構成する手順について説明します。  
  
##### <a name="to-deploy-the-test-message-schema"></a>テスト メッセージ スキーマを展開するには  
  
1. [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] で、BizTalk プロジェクトを作成するか、開きます。  
  
   > [!NOTE]
   >  このトピックは、EDI スキーマ、パイプライン、およびオーケストレーションを含む BizTalk EDI アプリケーションに別のアプリケーションから参照を既に追加していることを前提としています。 そうでない場合は、[、BizTalk Server EDI アプリケーションへの参照を追加する方法](http://msdn.microsoft.com/library/7af066fb-372f-4709-b566-c8d6b4a9d782)を参照してください。  
  
2. プロジェクトを右クリックし、[**追加**、] をクリックし、**既存項目の**します。 XML ファイルを使用してソリューションをテストするには、XML テスト メッセージ用の XSD スキーマを含むローカル フォルダーに移動し、XSD ファイルを選択します。 **[追加]** をクリックします。  
  
3. アセンブリ キー ファイルを設定し、アセンブリをビルドおよび展開します。  
  
##### <a name="to-enable-the-bts-isapi-filter"></a>BTS ISAPI フィルターを有効にするには  
  
1. クリックして**開始**、 をポイント**すべてのプログラム**、 をポイント**管理ツール**、順にクリックします**インターネット インフォメーション サービス (IIS) マネージャー**.  
  
   > [!TIP]
   >  オペレーティング システムによっては、管理ツールの [スタート] メニュー オプションを利用できない場合があります。 このような場合は、次のようにクリックします。**開始**、 をクリック**実行**、入力と`inetmgr`をインターネット インフォメーション サービス (IIS) マネージャーを開きます。  
  
2. ルート Web サーバーのエントリを選択し、**機能ビュー**をダブルクリックします**ハンドラー マッピング**しをクリックして、[操作] ウィンドウで、**スクリプト マップの追加**します。  
  
   > [!NOTE]
   >  Web サーバー レベルでスクリプトのマッピングを構成すると、すべての子の Web サイトに適用するには、このマッピングが発生します。 特定の Web サイトまたは仮想フォルダーへのマッピングを制限する場合は、ターゲット サイトまたは Web サーバーではなくフォルダーを選択します。  
  
3. **スクリプト マップの追加** ダイアログ ボックスに、入力`BtsHttpReceive.dll`で、**要求パス**フィールド。  
  
4. **実行可能ファイル**フィールドに、をクリックして、**省略記号 (...)** ボタンをクリックしを参照する[!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]HttpReceive します。 BtsHttpReceive.dll を選択し、クリックして**OK**します。  
  
5. 入力`BizTalk HTTP Receive`で、`Name`フィールドをクリックして**要求の制限**します。  
  
6. **要求の制限**ダイアログ ボックスで、**動詞**タブを選び**次の動詞のいずれか**します。 入力`POST`動詞として。  
  
7. **アクセス**] タブで [**スクリプト**順にクリックします**OK**します。  
  
8. をクリックして **[ok]** ISAPI 拡張を許可するメッセージが表示されたら、クリックと**はい**。  
  
##### <a name="to-configure-the-fabrikam-web-page"></a>Fabrikam Web ページを構成するには  
  
1. IIS マネージャーで、右クリックして**アプリケーション プール**選択**アプリケーション プールの追加**します。  
  
2. **アプリケーション プールの追加** ダイアログ ボックスに、入力**BizTalkAppPool**で**名前**、し、 **.NET Framework v4.0.30210**で、**.NET framework のバージョン**ドロップダウン リスト。 **[OK]** をクリックします。  
  
   > [!NOTE]
   >  コンピューターにインストール済みの [!INCLUDE[netfx40_short](../includes/netfx40-short-md.md)] のバージョンによって、バージョン番号が異なる場合があります。  
  
3. 選択**アプリケーション プール**の**機能ビュー**選択**BizTalkAppPool**、順にクリックします**詳細設定**で**アクション**ウィンドウ。  
  
4. **詳細設定**ダイアログ ボックスで、 **Identity**し、省略記号 (...) ボタンをクリックします。  
  
5. **アプリケーション プール Id**ダイアログ ボックスで、**カスタム アカウント** をクリックし、**設定**します。  
  
6. 入力、**ユーザー名**と**パスワード**administrators グループのメンバーであるユーザー アカウントのパスワードを入力します**パスワードの確認入力**をクリックして **。OK** 3 回の IIS マネージャーに戻ります。  
  
7. IIS マネージャーで、開く、**サイト**フォルダー。 右クリックし、**既定の Web サイト**ノードをクリックして**アプリケーションの追加**します。  
  
8. **アプリケーションの追加** ダイアログ ボックスに、入力**Fabrikam**で**エイリアス**、順にクリックします**選択**します。  
  
9. **アプリケーション プールの選択**ダイアログ ボックスで、 **BizTalkAppPool**  をクリック**OK**します。  
  
10. 省略記号 (...) ボタンをクリックしを参照する[!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]HttpReceive、**物理パス**します。  
  
11. をクリックして**テストの設定**に表示されるエラーがないことを確認し、 **Test-connection**  ダイアログ ボックス。 **[閉じる]** をクリックし、 **[OK]** をクリックします。  
  
12. IIS マネージャーでは、Fabrikam 仮想ディレクトリを選択し、**機能ビュー**、 をダブルクリックします**認証**します。  
  
13. **認証**] ページで、[**匿名認証**いることを確認し、**状態**は**有効**。 場合、**状態**は**無効**、 をクリックして**を有効にする**で、**アクション**ウィンドウ。  
  
##### <a name="to-specify-that-your-virtual-directory-is-not-managed-by-windows-sharepoint-services"></a>仮想ディレクトリが Windows SharePoint Services の管理対象から除外されるように指定するには  
  
1.  コンピューターに Windows SharePoint Services がインストールされて場合、 をクリックして**開始**、 をポイント**すべてのプログラム**、 をポイント**管理ツール**をクリックして**SharePoint 3.0 サーバーの全体管理**します。  
  
    > [!NOTE]
    >  この手順は、チュートリアルを設定するコンピューター上に Windows SharePoint Server がインストールされている場合に実行する必要があります。 実行する場合は、IIS 仮想ディレクトリが Windows SharePoint Server の管理対象から除外されるように指定する必要があります。  
  
2.  **サーバーの全体管理** ページ **サーバーの全体管理**、 をクリックして**アプリケーション管理**します。  
  
3.  **アプリケーション管理**] ページで [**管理パスの定義**します。  
  
4.  **管理パスの定義**] ページ [**新しいパスを追加**の**パス**テキスト ボックスに、入力`Fabrikam`します。 [**型**、] をクリックして**エクスクルード パス**、順にクリックします**OK**します。  
  
##### <a name="to-create-a-receive-port-to-receive-the-test-message"></a>テスト メッセージを受信する受信ポートを作成するには  
  
1. Windows エクスプローラーを使用して、Contoso から EDI インターチェンジを受信するローカル フォルダーを作成します。  
  
2. [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールを右クリックし、**受信ポート**ノードの下、 **BizTalk アプリケーション 1**に**新規**をクリックして**一方向受信ポート**します。  
  
3. **受信ポートのプロパティ**ダイアログ ボックスで、受信ポートの名前として**RecvXMLFromCont**します。  
  
4. をクリックして**受信場所**コンソール ツリーをクリックで**新規**します。  
  
5. [受信場所の名前**ファイル**の**型**、] をクリックし、**構成**。  
  
6. **受信フォルダー**、手順 1. で作成したフォルダーの名前を入力します。  
  
7. **ファイル マスク**、入力 **\*.xml**、順にクリックします**OK**します。  
  
8. 受信パイプラインで選択**XMLReceive**します。  
  
   > [!NOTE]
   >  XML 以外の別の非 EDI ファイル タイプを使用している場合は、入力**PassThruTranmit**します。  
  
9. をクリックして**OK**、順にクリックします**OK**もう一度です。  
  
10. をクリックして、**受信場所**ノードを右クリックし、受信場所をクリックして**を有効にする**。  
  
##### <a name="to-create-a-send-port-to-send-the-as2-message-to-fabrikam"></a>AS2 メッセージを Fabrikam に送信するための送信ポートを作成するには  
  
1. [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールを右クリックし、**送信ポート**ノードの下、 **BizTalk アプリケーション 1**に**新規**をクリックして**静的な送信請求-応答送信ポート**します。  
  
   > [!NOTE]
   >  BizTalk アプリケーション 1 を使用する場合は、BizTalk EDI アプリケーションのアイテムを使用できるようにするために、BizTalk EDI アプリケーションへの参照を BizTalk アプリケーション 1 に追加する必要があります。 詳細については、[、BizTalk Server EDI アプリケーションへの参照を追加する方法](http://msdn.microsoft.com/library/7af066fb-372f-4709-b566-c8d6b4a9d782)を参照してください。  
  
2. **送信ポートのプロパティ**ダイアログ ボックスで、送信ポートの名前として**SendToFab_RecvMDN**します。  
  
3. **トランスポート**セクションで、 **HTTP**の**型**、 をクリックし、**構成**します。  
  
4. **HTTP トランスポートのプロパティ** ダイアログ ボックスの**送信先 URL**、入力 **http://localhost/Fabrikam/BTSHttpReceive.dll**します。  
  
5. クリア**チャンク エンコードを有効にする**します。 **[OK]** をクリックします。  
  
6. **送信パイプライン**、 **AS2Send**します。  
  
7. **受信パイプライン**、 **AS2Receive**します。  
  
8. コンソール ツリーで、選択**フィルター**します。 **プロパティ**、入力**BTS します。ReceivePortName**; の**演算子**、入力**==**; と**値**EDI を受信する受信ポートの名前を入力します。インターチェンジ (`RecvXMLFromCont`)。  
  
   > [!NOTE]
   >  PIDX メッセージを送信する場合は、メッセージの種類をフィルター処理するフィルター式を作成できます (**PIDX**)。  
  
9. XML ドキュメントを変換するマップを適用する**送信マップ**コンソール ツリーでします。 入力、**ソース ドキュメント**送信マップの選択、**マップ**、し、入力、**ターゲット ドキュメント**。 **[OK]** をクリックします。  
  
10. **[OK]** をクリックします。  
  
11. をクリックして、**送信ポート**内のノード、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールでは、送信ポートを右クリックし、順にクリックします**開始**します。  
  
##### <a name="to-create-a-receive-port-to-receive-the-as2-message-and-return-an-acknowledgment"></a>AS2 メッセージを受信して確認を返す受信ポートを作成するには  
  
1. [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、[、 **BizTalk アプリケーション 1**ノードを右クリックして**受信ポート**、] をポイント**新規**をクリックして**要求応答の受信ポート**します。  
  
2. 受信ポートに名前を付けます**RecvAS2Msg**、 をクリックし、**受信場所**コンソール ツリーで。  
  
3. **[新規]** をクリックします。  
  
4. **受信場所のプロパティ**ダイアログ ボックスで、名前、受信場所の選択、 **HTTP**の**型**、順にクリックします**構成**します。  
  
5. **HTTP トランスポートのプロパティ** ダイアログ ボックスに、入力 **/Fabrikam/BTSHttpReceive.dll**の**仮想ディレクトリと ISAPI 拡張**します。 クリア**成功した場合の戻り値の関連付けハンドル**選択**失敗した要求を中断**します。 **[OK]** をクリックします。  
  
6. 選択**AS2Receive**の**受信パイプライン**、および**AS2Send**の**送信パイプライン**します。 をクリックして**OK**、順にクリックします**OK**もう一度です。  
  
7. をクリックして、**受信場所**ノードを右クリックし、受信場所をクリックして**を有効にする**。  
  
##### <a name="to-create-a-send-port-to-send-the-test-xml-payload-to-a-local-folder"></a>テスト XML ペイロードをローカル フォルダーに送信する送信ポートを作成するには  
  
1. Windows エクスプローラーで、EDI インターチェンジを送信する先のローカル フォルダーを作成します。  
  
2. [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、右クリックして**送信ポート**、] をポイント**新規**、順にクリックします**静的な一方向送信ポート**します。  
  
3. **送信ポートのプロパティ**ダイアログ ボックスで、送信ポートに名前**SendXMLPayload**します。 選択**ファイル**の**型**、 をクリックし、**構成**します。  
  
4. **FILE トランスポートのプロパティ** ダイアログ ボックスの**先フォルダー**、EDI ペイロード用に作成したローカル フォルダーを入力します。  
  
5. **ファイル名**ファイル名を入力します。 テスト メッセージとして XML ファイルを使用する場合は、入力 **%MessageID%.xml**します。 **[OK]** をクリックします。  
  
6. 既定の**PassThruTransmit**の**送信パイプライン**します。  
  
7. をクリックして**フィルター**コンソールで、ツリーし、EDI ペイロードの集荷に対してフィルターのプロパティを追加します。 最初の行での**プロパティ**、入力**BTS します。ReceivePortName**は**演算子**、入力 **==** は**値**AS2 を受信する受信ポートの名前を入力メッセージ (`RecvAS2Msg`); と**でグループ化**、受け入れる**と**します。 2 行目の**プロパティ**、入力**EdiIntAS.IsAS2PayloadMessage**は**演算子**、入力**==**; と**値**、入力**True**します。  
  
8. **[OK]** をクリックします。  
  
9. をクリックして、**送信ポート**ノードは、送信ポートを右クリックし、順にクリックします**開始**します。  
  
##### <a name="to-create-a-send-port-to-send-the-mdn-to-a-local-folder"></a>MDN をローカル フォルダーに送信する送信ポートを作成するには  
  
1. Windows エクスプローラーを使用して、MDN を送信するローカル フォルダーを作成します。  
  
2. [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、右クリックして**送信ポート**、] をポイント**新規**、順にクリックします**静的な一方向送信ポート**します。  
  
3. **送信ポートのプロパティ**ダイアログ ボックスで、送信ポートに名前**SendMDNToContoso**します。 選択**ファイル**の**型**、 をクリックし、**構成**します。  
  
4. **FILE トランスポートのプロパティ** ダイアログ ボックスの**先フォルダー**MDN を送信するために作成したローカル フォルダーを入力します。  
  
5. **ファイル名**、入力 **%MessageID%.msg**します。クリックして**OK**します。  
  
6. 既定の**PassThruTransmit**の**送信パイプライン**します。  
  
7. クリックして**フィルター**コンソール ツリーでします。 **プロパティ**、入力**BTS します。SPName**は**演算子**、入力 **==** は**値**、AS2 メッセージを送信する送信ポートの名前を入力します (`SendToFab_RecvMDN`);および**でグループ化**、受け入れる**と**します。 2 番目の行の**プロパティ**、入力**EdiIntAS.IsAS2MdnResponseMessage**します。 **演算子**、入力 **==** します。 **値**、入力**True**します。  
  
8. **[OK]** をクリックします。  
  
9. をクリックして、**送信ポート**ノードは、送信ポートを右クリックし、順にクリックします**開始**します。  
  
##### <a name="to-create-a-party-and-a-business-profile-for-fabrikam"></a>Fabrikam のパーティとビジネス プロファイルを作成するには  
  
1. 右クリックし、**パーティ**内のノード、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、 をポイント**新規**、 をクリックし、**パーティ**します。  
  
2. パーティの名前を入力、**名前**テキスト ボックス、およびクリック **[ok]** します。  
  
   > [!NOTE]
   >  選択して、**ローカル BizTalk 受信パーティまたはサポートがこのパーティからメッセージを送信したメッセージを処理**チェック ボックスをオンをホストしている同じ組織のパーティの作成中であること指定できる[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]. その指定に基づいて、アグリーメントを作成するときに一部のプロパティが有効または無効になります。 ただし、このチュートリアルでは、このチェック ボックスはオンのままでかまいません。  
  
3. パーティ名を右クリックし、[**新規**、] をクリックし、**ビジネス プロファイル**します。  
  
4. **プロファイル プロパティ**] ダイアログ ボックスの [、**全般**ページで、入力 **[fabrikam_profile]** で、**名前**テキスト ボックス。  
  
   > [!NOTE]
   >  パーティを作成すると、プロファイルも作成されます。 新しいプロファイルを作成する代わりに、そのプロファイルの名前を変更して使用できます。 プロファイルの名前を変更するには、プロファイルを右クリックして**プロパティ**します。 **全般** ページで、プロファイルの名前を指定します。  
  
##### <a name="to-create-a-party-and-a-business-profile-for-contoso"></a>Contoso のパーティとビジネス プロファイルを作成するには  
  
1. 右クリックし、**パーティ**内のノード、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、 をポイント**新規**、 をクリックし、**パーティ**します。  
  
2. パーティの名前を入力、**名前**テキスト ボックス、およびクリック **[ok]** します。  
  
   > [!NOTE]
   >  選択して、**ローカル BizTalk 受信パーティまたはサポートがこのパーティからメッセージを送信したメッセージを処理**チェック ボックスをオンをホストしている同じ組織のパーティの作成中であること指定できる[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]. その指定に基づいて、アグリーメントを作成するときに一部のプロパティが有効または無効になります。 ただし、このチュートリアルでは、このチェック ボックスはオンのままでかまいません。  
  
3. パーティ名を右クリックし、[**新規**、] をクリックし、**ビジネス プロファイル**します。  
  
4. **プロファイル プロパティ**] ダイアログ ボックスの [、**全般**ページで、入力**Contoso_Profile**で、**名前**テキスト ボックス。  
  
   > [!NOTE]
   >  パーティを作成すると、プロファイルも作成されます。 新しいプロファイルを作成する代わりに、そのプロファイルの名前を変更して使用できます。 プロファイルの名前を変更するには、プロファイルを右クリックして**プロパティ**します。 **全般** ページで、プロファイルの名前を指定します。  
  
##### <a name="to-create-an-as2-agreement-between-the-two-business-profiles"></a>2 つのビジネス プロファイル間で AS2 アグリーメントを作成するには  
  
1.  右クリック**Contoso_Profile**、 をポイント**新規**、 をクリックし、**契約**します。  
  
2.  **全般プロパティ** ページの**名前**テキスト ボックスに、アグリーメントの名前を入力します。  
  
3.  **プロトコル**ドロップダウン リストで、 **AS2**します。  
  
4.  **2 番目のパートナー**セクションから、**名前**ドロップダウン リストで、 **Fabrikam**します。  
  
5.  **2 番目のパートナー**セクションから、**プロファイル**ドロップダウン リストで、 **[fabrikam_profile]** します。  
  
     2 つの新しいタブが横に追加の取得と表示されます、**全般**タブ。各タブは、一方向の AS2 アグリーメントの構成用です。  
  
6.  次のタスクを実行、 **Contoso が Fabrikam]-> [** タブ。  
  
    1.  **識別子** ページで、値を入力します**AS2-から**と**AS2-に**します。 **AS2-から**、入力`Contoso`します。 **AS2-To**、入力`Fabrikam`します。  
  
    2.  **受信確認 (Mdn)** ページで、次の操作を行います。  
  
        1.  選択、 **MessageBox にルーティング/配信の受信 MDN を処理する**チェック ボックスをオンします。  
  
            > [!NOTE]
            >  チェック、 **MessageBox にルーティング/配信の受信 MDN を処理する**のみが返された MDN の削除を MessageBox にために、このチュートリアルをテストするため必要です。 これにより、MDN をサブスクライブする送信ポートを作成し、MDN をローカル ディレクトリに送信して、AS2 トランスミッションを確認できます。  
  
        2.  選択、 **mdn を要求する**チェック ボックスをオンします。  
  
        3.  必ず、**署名付き MDN を要求**チェック ボックスをオフします。  
  
        4.  まま**非同期 MDN を要求する**オフにします。  
  
        5.  **ディス ポジション-通知-に**、任意の値を入力します。 このフィールドの値は AS2 処理中には使用されませんが、このフィールドに値を入力する必要があります。  
  
    3.  **送信ポート** ページで、EDI インターチェンジを Fabrikam に送信する双方向送信ポートを関連付けます。 **送信ポート**グリッドで、**名前**列で空のセルしボックスの一覧から、送信ポートを選択します。 **SendToFab_RecvMDN**します。  
  
7.  次のタスクを実行、 **Fabrikam が Contoso を ->** タブ。  
  
    > [!NOTE]
    >  このチュートリアルでは、必要な値をタブに指定し、アグリーメントを正常に作成できるようにします。 アグリーメントを正常に作成する両方の一方向アグリーメント タブの値に対して定義されている必要があります **[as2_from]** と**AS2-に**します。  
  
    1.  **識別子** ページで、値を入力します**AS2-から**と**AS2-に**します。 **AS2-から**、入力`Fabrikam`します。 **AS2-To**、入力`Contoso`します。  
  
8.  **[適用]** をクリックします。  
  
9. **[OK]** をクリックします。 新しく追加したアグリーメントが一覧表示、**契約**のセクション、**パーティとビジネス プロファイル**ウィンドウ。 新しく追加したアグリーメントは既定で有効になります。  
  
### <a name="testing-the-walkthrough"></a>チュートリアルのテスト  
 ここでは、チュートリアルをテストする方法について説明します。  
  
##### <a name="to-test-the-solution"></a>ソリューションをテストするには、次の操作を行います。  
  
1.  Windows エクスプローラーで、XML テスト ファイルを、Contoso からテスト メッセージを受信するために作成したローカル フォルダーに貼り付けます。  
  
2.  XML ペイロードを送信するために作成したローカル フォルダーに移動します。 フォルダーに XML ファイルが含まれていることを確認します。 ファイルおよび元のテスト メッセージを開き、コンテンツが同じであることを確認します。  
  
3.  結果の MDN を送信するために作成したローカル フォルダーに移動します。 フォルダーにファイルが含まれていることを確認し、ファイルを開いてこれが MDN ファイルであることを確認します。  
  
## <a name="see-also"></a>参照  
 [開発と BizTalk Server AS2 ソリューションの構成](../core/developing-and-configuring-biztalk-server-as2-solutions.md)   
 [AS2 経由での送信非 EDI メッセージの送信側の処理](../core/send-side-processing-of-an-outgoing-non-edi-message-over-as2.md)