---
title: 'チュートリアル (AS2): AS2 経由で非 EDI メッセージを送信する |Microsoft ドキュメント'
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 6120b81e-bdd5-44ad-9040-26be88c71258
caps.latest.revision: 33
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: a37daa53e5c8d78efdb22fd6f37b15365cde73a2
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/20/2017
ms.locfileid: "22292114"
---
# <a name="walkthrough-as2-sending-a-non-edi-message-over-as2"></a>チュートリアル (AS2): AS2 経由での 非 EDI メッセージの送信
このチュートリアルでは、AS2 経由で非 EDI メッセージを送信するためのソリューションを作成する一連の手順について説明します。 このチュートリアルでは、PIDX メッセージを AS2 経由で送信します。 このソリューションでは、AS2Send 送信パイプラインと AS2Receive 受信パイプラインを持つ双方向の送信ポートが使用されます。 作成し、1 台のコンピューターには、このチュートリアルで、完全なソリューションをテストできます。  
  
## <a name="prerequisites"></a>前提条件  
 このトピックの手順を実行するための前提条件を次に示します。  
  
-   [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理者グループまたは [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] B2B Operators グループのメンバーとしてログオンしている必要があります。  
  
-   チュートリアルを実行するコンピューターには、インターネット インフォメーション サービス (IIS) 7 がインストールされている必要があります。  
  
-   チュートリアルを実行するコンピューターに 64 ビット版の Windows がインストールされている場合は、BizTalk ホストが 32 ビットのみとマークされていることを確認する必要があります。 IIS の [アプリケーション プールの 32 ビット アプリケーション設定を有効にする] を True に設定する必要があります。 詳細については、次を参照してください。[チュートリアル 3: AS2 チュートリアル](../core/tutorial-3-as2-tutorial.md)です。  
  
## <a name="how-the-solution-sends-a-non-edias2-message-and-returns-a-synchronous-mdn"></a>ソリューションが非 EDI/AS2 メッセージを送信して同期 MDN を返す方法  
 このソリューションは次の処理を実行します。  
  
1.  一方向のファイル受信ポートは、Contoso から XML メッセージを受信します。  
  
    > [!NOTE]
    >  この一覧のイベントは、示されている順序で発生するとは限りません。  
  
2.  受信ポートは、XML 受信パイプラインを使用してメッセージをチェックします。 次に、受信ポートは、テスト メッセージをそのままメッセージ ボックスにドロップします。  
  
3.  静的な双方向送信ポートは XML メッセージを取得し、受信ポートが受信するすべてのメッセージをサブスクライブします。  
  
4.  Fabrikam の双方向受信ポートは、Fabrikam の仮想ディレクトリを使用して AS2 メッセージを受信します。 受信パイプラインは、AS2 のメッセージをデコードし、そのメッセージをメッセージ ボックスにドロップします。  
  
5.  パススルー送信パイプラインを持つ静的な一方向の送信ポートは、XML メッセージを取得します。  
  
6.  一方向の送信ポートは、XML メッセージをローカル フォルダーに送信します。  
  
7.  双方向受信ポートに関連付けられている送信ポートは、同期 MDN を返します。  
  
8.  双方向送信ポートに関連付けられている受信ポートは、MDN を受信し、それをメッセージ ボックスにドロップします。  
  
9. パススルー送信パイプラインを持つ静的な一方向の送信ポートは、MDN を取得します。  
  
10. 一方向の送信ポートは、MDN をローカル フォルダーに送信します。  
  
 次の図は、ソリューションのアーキテクチャを示しています。  
  
 ![非 &#45; を送信します。AS2 経由で EDI メッセージ](../core/media/57b7dc54-b8e8-462e-98d1-9cddedd14107.gif "57b7dc54-b8e8-462e-98d1-9cddedd14107")  
  
## <a name="the-functionality-in-this-solution"></a>このソリューションの機能  
 このチュートリアルの機能には、以下の条件が適用されます。  
  
-   このチュートリアルでは、AS2 機能について説明します。 このため、AS2 処理に関連するすべてのポートは、AS2Receive パイプラインまたは AS2Send パイプラインを使用します。 AS2 処理に関連しないポートは、XMLReceive パイプラインまたは PassThruTransmit パイプラインを使用します。  
  
-   このチュートリアルでは、XML テスト メッセージを使用します。  
  
    > [!NOTE]
    >  XML テスト メッセージおよびテスト メッセージ用のスキーマを用意する必要があります。  
  
-   状態レポートが有効になっていません。  
  
-   このソリューションは、否認不可データベースに署名、圧縮、暗号化、およびメッセージ ストレージを構成しません。 これらのプロパティを構成する手順については、次を参照してください。 [AS2 プロパティを設定する](../core/configuring-as2-properties.md)です。  
  
## <a name="configuring-and-testing-the-walkthrough"></a>チュートリアルの構成とテスト  
 このソリューションに必要な手順は以下のとおりです。  
  
-   必要なメッセージ スキーマを使用して BizTalk プロジェクトをビルドおよび展開し、受信したメッセージを [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] で処理するときにそのスキーマを利用できるようにします。  
  
-   AS2 メッセージの受信に使用する BTS ISAPI フィルターを有効にします。  
  
-   Contoso からの AS2 メッセージを受信する Fabrikam 仮想ディレクトリを、受信場所で構成したとおりに作成します。  
  
-   Fabrikam 仮想ディレクトリが Windows SharePoint Services の管理対象から除外されるように指定します。  
  
-   AS2 トランスポート経由で送信される XML テスト メッセージを受信する、一方向 FILE 受信ポートを作成します。 テスト メッセージを受信するローカル フォルダーを作成します。  
  
-   静的な送信請求 - 応答 HTTP 送信ポートを作成し、送信パイプラインとして AS2Send パイプラインを、および受信パイプラインとして AS2Receive パイプラインを構成します。 ポートは、AS2 メッセージを Fabrikam に送信し、MDN 応答を Fabrikam から受信してメッセージ ボックスにドロップします。  
  
-   AS2 メッセージを受信し、MDN 応答を送信する [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 用の双方向 HTTP 受信ポートを作成します。 受信パイプラインとして AS2Receive パイプラインを構成し、送信パイプラインとして AS2Send パイプラインを構成します。 Fabrikam 仮想ディレクトリ経由で AS2 メッセージを受信する受信場所を構成します。  
  
    > [!NOTE]
    >  テスト ソリューションは 1 台のコンピューター上にあります。よって、AS2 メッセージ (Contoso から) を送信する双方向送信ポート、および AS2 メッセージ (Fabrikam から) を受信する双方向受信ポートは、同一コンピューター上にあります。  
  
-   メッセージ XML ペイロードをローカル フォルダーにルーティングする静的な一方向の FILE 送信ポート (パススルー送信パイプラインを持つ) を作成します。 ローカル フォルダーを作成します。  
  
    > [!NOTE]
    >  メッセージ ペイロードをサブスクライブする送信ポートがない場合、メッセージ ボックスで中断されます。  
  
-   MDN をローカル フォルダーにルーティングする静的な一方向の FILE 送信ポート (パススルー送信パイプラインを持つ) を作成します。 ローカル フォルダーを作成します。  
  
-   Fabrikam および Contoso の両方にパーティ (取引先) を作成します。  
  
-   両方の取引先に対して、それぞれビジネス プロファイルを作成します。  
  
-   Fabrikam および Contoso のビジネス プロファイル間に AS2 アグリーメントを作成します。 AS2 アグリーメントには、AS2 メッセージを送信し、その応答として同期 MDN を受信するプロパティが含まれます。  
  
-   XML テスト メッセージを使用してチュートリアルをテストします。  
  
### <a name="configuring-the-walkthrough"></a>チュートリアルの構成  
 ここでは、チュートリアルを構成する手順について説明します。  
  
##### <a name="to-deploy-the-test-message-schema"></a>テスト メッセージ スキーマを展開するには  
  
1.  [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] で、BizTalk プロジェクトを作成するか、開きます。  
  
    > [!NOTE]
    >  このトピックは、EDI スキーマ、パイプライン、およびオーケストレーションを含む BizTalk EDI アプリケーションに別のアプリケーションから参照を既に追加していることを前提としています。 いない場合を参照してください。[を BizTalk Server EDI アプリケーションへの参照を追加する方法](http://msdn.microsoft.com/library/7af066fb-372f-4709-b566-c8d6b4a9d782)です。  
  
2.  プロジェクトを右クリックし、順にポイント**追加**、クリックして**既存項目の**します。 XML ファイルを使用してソリューションをテストするには、XML テスト メッセージ用の XSD スキーマを含むローカル フォルダーに移動し、XSD ファイルを選択します。 **[追加]** をクリックします。  
  
3.  アセンブリ キー ファイルを設定し、アセンブリをビルドおよび展開します。  
  
##### <a name="to-enable-the-bts-isapi-filter"></a>BTS ISAPI フィルターを有効にするには  
  
1.  をクリックして**開始**、をポイント**すべてのプログラム**、をポイント**管理ツール**、クリックして**インターネット インフォメーション サービス (IIS) マネージャー**.  
  
    > [!TIP]
    >  オペレーティング システムによっては、管理ツールの [スタート] メニュー オプションを利用できない場合があります。 このような場合、をクリックして**開始**、 をクリックして**実行**、入力と`inetmgr`インターネット インフォメーション サービス (IIS) マネージャを開きます。  
  
2.  ルート Web サーバーのエントリを選択し、、**機能ビュー**、ダブルクリックして**ハンドラー マッピング**し、操作 ウィンドウでをクリックして**スクリプト マップの追加**です。  
  
    > [!NOTE]
    >  Web サーバー レベルでスクリプト マッピングを構成すると、すべての子 Web サイトに適用するには、このマッピングが発生します。 特定の Web サイトまたは仮想フォルダーへのマッピングを制限する場合は、ターゲット サイトまたは Web サーバーではなくフォルダーを選択します。  
  
3.  **スクリプト マップの追加** ダイアログ ボックスで、入力`BtsHttpReceive.dll`で、**要求パス**フィールドです。  
  
4.  **実行可能ファイル**フィールドで、をクリックして、**省略記号 (...)** ボタンをクリックしを参照[!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]HttpReceive です。 BtsHttpReceive.dll を選択し、をクリックして**OK**です。  
  
5.  入力`BizTalk HTTP Receive`で、`Name`フィールドをクリックして**要求の制限**です。  
  
6.  **要求の制限**ダイアログ ボックスで、**動詞**タブをクリックし**次の動詞のいずれかの**します。 入力`POST`動詞として。  
  
7.  **アクセス** タブで **スクリプト** をクリックし、 **ok**です。  
  
8.  をクリックして**OK** ISAPI 拡張を許可するメッセージが表示されたらをクリックし、**はい**です。  
  
##### <a name="to-configure-the-fabrikam-web-page"></a>Fabrikam Web ページを構成するには  
  
1.  IIS マネージャーを右クリックして**アプリケーション プール**選択**アプリケーション プールの追加**です。  
  
2.  **アプリケーション プールの追加**] ダイアログ ボックスで、入力**BizTalkAppPool**で**名前**、し、[ **.NET Framework V4.0.30210**で、**.NET framework のバージョン**ドロップダウン リスト。 **[OK]** をクリックします。  
  
    > [!NOTE]
    >  コンピューターにインストール済みの [!INCLUDE[netfx40_short](../includes/netfx40-short-md.md)] のバージョンによって、バージョン番号が異なる場合があります。  
  
3.  選択**アプリケーション プール**の**機能ビュー**選択**BizTalkAppPool**、順にクリック**詳細設定**で**アクション**ウィンドウです。  
  
4.  **詳細設定**ダイアログ ボックスで、 **Identity**省略記号 (...) ボタンをクリックします。  
  
5.  **アプリケーション プール Id**ダイアログ ボックスで、**カスタム アカウント** をクリックし、**設定**です。  
  
6.  入力、**ユーザー名**と**パスワード**administrators グループのメンバーであるユーザー アカウントのパスワードを入力で**パスワードの確認入力**をクリックして**OK** IIS マネージャーに戻りますを 3 回です。  
  
7.  IIS マネージャーで、開く、**サイト**フォルダーです。 右クリックし、 **Default Web Site**ノードをクリックして**アプリケーションの追加**です。  
  
8.  **アプリケーションの追加** ダイアログ ボックスで、入力**Fabrikam**で**エイリアス**、順にクリック**選択**です。  
  
9. **アプリケーション プールの選択**ダイアログ ボックスで、 **BizTalkAppPool**  をクリック**OK**です。  
  
10. 省略記号 (...) ボタンをクリックしを参照[!INCLUDE[btsBiztalkServerPath](../includes/btsbiztalkserverpath-md.md)]HttpReceive、**物理パス**です。  
  
11. をクリックして**テストの設定**に表示されるエラーがないことを確認し、**接続のテスト** ダイアログ ボックス。 **[閉じる]** をクリックし、 **[OK]** をクリックします。  
  
12. IIS マネージャーで、Fabrikam 仮想ディレクトリを選択し、、**機能ビュー**をダブルクリックして**認証**です。  
  
13. **認証**] ページで、[**匿名認証**ことを確認し、**ステータス**は**有効**です。 場合、**ステータス**は**無効になっている**、 をクリックして**を有効にする**で、**アクション**ウィンドウです。  
  
##### <a name="to-specify-that-your-virtual-directory-is-not-managed-by-windows-sharepoint-services"></a>仮想ディレクトリが Windows SharePoint Services の管理対象から除外されるように指定するには  
  
1.  Windows SharePoint Services がコンピューターにインストールされている場合にをクリックして**開始**、をポイント**すべてのプログラム**、指す**管理ツール**をクリックして**SharePoint 3.0 サーバーの全体管理**です。  
  
    > [!NOTE]
    >  この手順は、チュートリアルを設定するコンピューター上に Windows SharePoint Server がインストールされている場合に実行する必要があります。 実行する場合は、IIS 仮想ディレクトリが Windows SharePoint Server の管理対象から除外されるように指定する必要があります。  
  
2.  **サーバーの全体管理**] ページの [**サーバーの全体管理**をクリックして**アプリケーション管理**です。  
  
3.  **アプリケーション管理**] ページで [**管理パスの定義**です。  
  
4.  **管理パスの定義**] ページの [**新しいパスを追加**で、**パス**テキスト ボックスに、入力`Fabrikam`です。 [**型**、] をクリックして**エクスクルード パス**、順にクリック**OK**です。  
  
##### <a name="to-create-a-receive-port-to-receive-the-test-message"></a>テスト メッセージを受信する受信ポートを作成するには  
  
1.  Windows エクスプローラーを使用して、Contoso から EDI インターチェンジを受信するローカル フォルダーを作成します。  
  
2.  [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、右クリックし、**受信ポート**ノードの下、 **BizTalk アプリケーション 1**に**新規**をクリックして**一方向受信ポート**です。  
  
3.  **受信ポートのプロパティ**ダイアログ ボックスで、受信ポートの名前として**RecvXMLFromCont**です。  
  
4.  をクリックして**受信場所**をクリックしてコンソール ツリーで、**新規**です。  
  
5.  名前、受信場所は、select**ファイル**の**型**、順にクリック**構成**です。  
  
6.  **受信フォルダー**、手順 1. で作成したフォルダーの名前を入力します。  
  
7.  **ファイル マスク**、入力 **\*.xml**、クリックして **[ok]** です。  
  
8.  受信パイプラインで選択**XMLReceive**です。  
  
    > [!NOTE]
    >  XML 以外の別の非 EDI ファイル タイプを使用している場合は、入力**PassThruTranmit**です。  
  
9. をクリックして **[ok]**、順にクリック**OK**もう一度です。  
  
10. をクリックして、**受信場所** ノードを右クリックし、受信場所、およびをクリックして**を有効にする**です。  
  
##### <a name="to-create-a-send-port-to-send-the-as2-message-to-fabrikam"></a>AS2 メッセージを Fabrikam に送信するための送信ポートを作成するには  
  
1.  [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、右クリックし、**送信ポート**ノードの下、 **BizTalk アプリケーション 1**に**新規**をクリックして**静的な送信請求-応答送信ポート**です。  
  
    > [!NOTE]
    >  BizTalk アプリケーション 1 を使用する場合は、BizTalk EDI アプリケーションのアイテムを使用できるようにするために、BizTalk EDI アプリケーションへの参照を BizTalk アプリケーション 1 に追加する必要があります。 詳細については、次を参照してください。[を BizTalk Server EDI アプリケーションへの参照を追加する方法](http://msdn.microsoft.com/library/7af066fb-372f-4709-b566-c8d6b4a9d782)です。  
  
2.  **送信ポートのプロパティ**ダイアログ ボックスで、送信ポートの名前として**SendToFab_RecvMDN**です。  
  
3.  **トランスポート**セクションで、 **HTTP**の**型**、クリックして**構成**です。  
  
4.  **HTTP トランスポートのプロパティ** ダイアログ ボックスの**送信先 URL**、入力**http://localhost/Fabrikam/BTSHttpReceive.dll**です。  
  
5.  クリア**有効チャンク エンコード**です。 **[OK]** をクリックします。  
  
6.  **送信パイプライン** **AS2Send**です。  
  
7.  **受信パイプライン** **AS2Receive**です。  
  
8.  コンソール ツリーで、次のように選択します。**フィルター**です。 **プロパティ**、入力**BTS です。ReceivePortName**;**演算子**、入力 **==** ; および**値**EDI を受信する受信ポートの名前を入力インターチェンジ (`RecvXMLFromCont`)。  
  
    > [!NOTE]
    >  メッセージの種類をフィルター処理するフィルター式を作成するには、PIDX メッセージを送信する場合 (**PIDX**)。  
  
9. XML ドキュメントを変換するマップを適用する**送信マップ**コンソール ツリーでします。 入力、**ソース ドキュメント**、送信マップの選択、**マップ**、し、入力、**ターゲット ドキュメント**です。 **[OK]** をクリックします。  
  
10. **[OK]** をクリックします。  
  
11. クリックして、**送信ポート**内のノード、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールでは、送信ポートを右クリックし、をクリックして**開始**です。  
  
##### <a name="to-create-a-receive-port-to-receive-the-as2-message-and-return-an-acknowledgment"></a>AS2 メッセージを受信して確認を返す受信ポートを作成するには  
  
1.  [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、 **BizTalk アプリケーション 1**  ノードを右クリックして**受信ポート**、をポイント**新規**をクリックして**要求応答の受信ポート**です。  
  
2.  受信ポートに名前を付けます**RecvAS2Msg**、順にクリック**受信場所**コンソール ツリーでします。  
  
3.  **[新規作成]** をクリックします。  
  
4.  **受信場所のプロパティ**ダイアログ ボックスで、名前、受信場所で、選択**HTTP**の**型**、クリックして**構成**です。  
  
5.  **HTTP トランスポートのプロパティ** ダイアログ ボックスで、入力 **/Fabrikam/BTSHttpReceive.dll**の**仮想ディレクトリと ISAPI 拡張**です。 クリア**成功した場合の戻り値の関連付けハンドル**選択**失敗した要求を中断**です。 **[OK]** をクリックします。  
  
6.  選択**AS2Receive**の**受信パイプライン**、および**AS2Send**の**送信パイプライン**です。 をクリックして **[ok]**、順にクリック**OK**もう一度です。  
  
7.  をクリックして、**受信場所** ノードを右クリックし、受信場所、およびをクリックして**を有効にする**です。  
  
##### <a name="to-create-a-send-port-to-send-the-test-xml-payload-to-a-local-folder"></a>テスト XML ペイロードをローカル フォルダーに送信する送信ポートを作成するには  
  
1.  Windows エクスプローラーで、EDI インターチェンジを送信する先のローカル フォルダーを作成します。  
  
2.  [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールを右クリックして**送信ポート**、をポイント**新規**、クリックして**静的な一方向送信ポート**です。  
  
3.  **送信ポートのプロパティ** ダイアログ ボックスで、送信ポート名**SendXMLPayload**です。 選択**ファイル**の**型**、クリックして**構成**です。  
  
4.  **FILE トランスポートのプロパティ** ダイアログ ボックスの**コピー先フォルダー**、EDI ペイロード用に作成したローカル フォルダーを入力します。  
  
5.  **ファイル名**ファイル名を入力します。 テスト メッセージとしてを XML ファイルを使用している場合は、入力 **%MessageID%.xml**です。 **[OK]** をクリックします。  
  
6.  既定の**PassThruTransmit**の**送信パイプライン**です。  
  
7.  をクリックして**フィルター**コンソールのツリー、および EDI ペイロードを取得するフィルターのプロパティを追加します。 最初の行での**プロパティ**、入力**BTS です。ReceivePortName**; の**演算子**、入力 **==** ;**値**AS2 を受信する受信ポートの名前を入力してくださいメッセージ (`RecvAS2Msg`); および**Group by**、受け入れる**と**です。 2 番目の行の**プロパティ**、入力**EdiIntAS.IsAS2PayloadMessage**; の**演算子**、入力 **==** ; との**値**、入力**True**です。  
  
8.  **[OK]** をクリックします。  
  
9. クリックして、**送信ポート**ノードは、送信ポートを右クリックし、をクリックして**開始**です。  
  
##### <a name="to-create-a-send-port-to-send-the-mdn-to-a-local-folder"></a>MDN をローカル フォルダーに送信する送信ポートを作成するには  
  
1.  Windows エクスプローラーを使用して、MDN を送信するローカル フォルダーを作成します。  
  
2.  [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールを右クリックして**送信ポート**、をポイント**新規**、クリックして**静的な一方向送信ポート**です。  
  
3.  **送信ポートのプロパティ** ダイアログ ボックスで、送信ポート名**SendMDNToContoso**です。 選択**ファイル**の**型**、クリックして**構成**です。  
  
4.  **FILE トランスポートのプロパティ** ダイアログ ボックスの**コピー先フォルダー**MDN を送信するために作成したローカル フォルダーを入力します。  
  
5.  **ファイル名**、入力 **%MessageID%.msg**です。をクリックして**OK**です。  
  
6.  既定の**PassThruTransmit**の**送信パイプライン**です。  
  
7.  をクリックして**フィルター**コンソール ツリーでします。 **プロパティ**、入力**BTS です。SPName**; の**演算子**、入力 **==** ;**値**、AS2 メッセージを送信する送信ポートの名前を入力 (`SendToFab_RecvMDN`);および**Group by**、受け入れる**と**です。 2 番目の行の**プロパティ**、入力**EdiIntAS.IsAS2MdnResponseMessage**です。 **演算子**、入力 **==** です。 **値**、入力**True**です。  
  
8.  **[OK]** をクリックします。  
  
9. クリックして、**送信ポート**ノードは、送信ポートを右クリックし、をクリックして**開始**です。  
  
##### <a name="to-create-a-party-and-a-business-profile-for-fabrikam"></a>Fabrikam のパーティとビジネス プロファイルを作成するには  
  
1.  右クリックし、**パーティ**内のノード、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールをポイント**新規**、クリックして**パーティ**です。  
  
2.  パーティの名前を入力、**名前**テキスト ボックスに入力し**OK**です。  
  
    > [!NOTE]
    >  選択して、**ローカルの BizTalk は、このパーティからメッセージを送信するパーティまたはサポートが受信したメッセージを処理** チェック ボックスを指定できますをホストしている同じ組織のパーティの作成中であること[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]. その指定に基づいて、アグリーメントを作成するときに一部のプロパティが有効または無効になります。 ただし、このチュートリアルでは、このチェック ボックスはオンのままでかまいません。  
  
3.  パーティ名を右クリックし、**新規**、クリックして**ビジネス プロファイル**です。  
  
4.  **プロファイル プロパティ**ダイアログ ボックスの**全般** ページで、入力**fabrikam_profile**で、**名前**テキスト ボックス。  
  
    > [!NOTE]
    >  パーティを作成すると、プロファイルも作成されます。 新しいプロファイルを作成する代わりに、そのプロファイルの名前を変更して使用できます。 プロファイルの名前を変更するプロファイルを右クリックし **プロパティ**です。 **全般** ページで、プロファイルの名前を指定します。  
  
##### <a name="to-create-a-party-and-a-business-profile-for-contoso"></a>Contoso のパーティとビジネス プロファイルを作成するには  
  
1.  右クリックし、**パーティ**内のノード、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールをポイント**新規**、クリックして**パーティ**です。  
  
2.  パーティの名前を入力、**名前**テキスト ボックスに入力し**OK**です。  
  
    > [!NOTE]
    >  選択して、**ローカルの BizTalk は、このパーティからメッセージを送信するパーティまたはサポートが受信したメッセージを処理** チェック ボックスを指定できますをホストしている同じ組織のパーティの作成中であること[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]. その指定に基づいて、アグリーメントを作成するときに一部のプロパティが有効または無効になります。 ただし、このチュートリアルでは、このチェック ボックスはオンのままでかまいません。  
  
3.  パーティ名を右クリックし、**新規**、クリックして**ビジネス プロファイル**です。  
  
4.  **プロファイル プロパティ**ダイアログ ボックスの**全般** ページで、入力**Contoso_Profile**で、**名前**テキスト ボックス。  
  
    > [!NOTE]
    >  パーティを作成すると、プロファイルも作成されます。 新しいプロファイルを作成する代わりに、そのプロファイルの名前を変更して使用できます。 プロファイルの名前を変更するプロファイルを右クリックし **プロパティ**です。 **全般** ページで、プロファイルの名前を指定します。  
  
##### <a name="to-create-an-as2-agreement-between-the-two-business-profiles"></a>2 つのビジネス プロファイル間で AS2 アグリーメントを作成するには  
  
1.  右クリック**Contoso_Profile**、をポイント**新規**、クリックして**アグリーメント**です。  
  
2.  **全般プロパティ** ページの**名前**テキスト ボックスに、アグリーメントの名前を入力します。  
  
3.  **プロトコル**ドロップダウン リストで、 **AS2**です。  
  
4.  **2 番目のパートナー**  セクションから、**名前**ドロップダウン リストで、 **Fabrikam**です。  
  
5.  **2 番目のパートナー**  セクションから、**プロファイル**ドロップダウン リストで、 **Fabrikam_Profile**です。  
  
     2 つの新しいタブの追加を取得 の横に表示されます、**全般**タブです。各タブは、一方向の AS2 アグリーメントの構成用です。  
  
6.  次のタスクを実行、 **Contoso が Fabrikam ->** タブです。  
  
    1.  **識別子** ページで、値を入力**AS2-から**と**AS2-に**です。 **AS2-から**、入力`Contoso`です。 **AS2-To**、入力`Fabrikam`です。  
  
    2.  **受信確認 (Mdn)**  ページで、次の操作します。  
  
        1.  選択、**メッセージ ボックスに受信 MDN をルーティング/配信用処理**チェック ボックスをオンします。  
  
            > [!NOTE]
            >  チェック、**メッセージ ボックスに受信 MDN をルーティング/配信用処理**のみが返された MDN 削除されるため、メッセージ ボックスには、このチュートリアルのテストに必要です。 これにより、MDN をサブスクライブする送信ポートを作成し、MDN をローカル ディレクトリに送信して、AS2 トランスミッションを確認できます。  
  
        2.  選択、 **mdn を要求する**チェック ボックスをオンします。  
  
        3.  確認してください、**署名付き mdn を要求してもする**チェック ボックスはオフです。  
  
        4.  ままにして**非同期 MDN を要求する**オフにします。  
  
        5.  **廃棄する**、任意の値を入力します。 このフィールドの値は AS2 処理中には使用されませんが、このフィールドに値を入力する必要があります。  
  
    3.  **送信ポート** ページで、EDI インターチェンジを Fabrikam に送信する双方向の送信ポートを関連付けます。 **送信ポート**グリッド 、**名前**列は、空のセルをクリックし、ドロップダウン リストから送信ポートを選択**SendToFab_RecvMDN**です。  
  
7.  次のタスクを実行、 **Fabrikam が Contoso ->** タブです。  
  
    > [!NOTE]
    >  このチュートリアルでは、必要な値をタブに指定し、アグリーメントを正常に作成できるようにします。 アグリーメントを正常に作成する両方の一方向アグリーメント タブの値に対して定義されている必要があります **[as2_from]** と**AS2-に**です。  
  
    1.  **識別子** ページで、値を入力**AS2-から**と**AS2-に**です。 **AS2-から**、入力`Fabrikam`です。 **AS2-To**、入力`Contoso`です。  
  
8.  **[適用]** をクリックします。  
  
9. **[OK]** をクリックします。 新しく追加したアグリーメントが一覧表示、**契約**のセクションで、**パーティとビジネス プロファイル**ウィンドウです。 新しく追加したアグリーメントは既定で有効になります。  
  
### <a name="testing-the-walkthrough"></a>チュートリアルのテスト  
 ここでは、チュートリアルをテストする方法について説明します。  
  
##### <a name="to-test-the-solution"></a>ソリューションをテストするには、次の操作を行います。  
  
1.  Windows エクスプローラーで、XML テスト ファイルを、Contoso からテスト メッセージを受信するために作成したローカル フォルダーに貼り付けます。  
  
2.  XML ペイロードを送信するために作成したローカル フォルダーに移動します。 フォルダーに XML ファイルが含まれていることを確認します。 ファイルおよび元のテスト メッセージを開き、コンテンツが同じであることを確認します。  
  
3.  結果の MDN を送信するために作成したローカル フォルダーに移動します。 フォルダーにファイルが含まれていることを確認し、ファイルを開いてこれが MDN ファイルであることを確認します。  
  
## <a name="see-also"></a>参照  
 [開発と BizTalk Server AS2 ソリューションの構成](../core/developing-and-configuring-biztalk-server-as2-solutions.md)   
 [AS2 経由で送信非 EDI メッセージの送信側の処理](../core/send-side-processing-of-an-outgoing-non-edi-message-over-as2.md)