---
title: AS2 の証明書の構成 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: c160f294-7529-4e0a-876c-5827feaed067
caps.latest.revision: 20
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: fafa91e99ef58cbb083b6815924f78ffb1715574
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65356180"
---
# <a name="configuring-certificates-for-as2"></a>AS2 の証明書の構成
暗号化とデジタル署名を使用して安全な AS2 データ転送のため、適切な証明書をインストール、だけでなく、適切な AS2 構成が必要[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]します。 このトピックでは、必要に応じて、証明書をについて説明しますと、および一般的な問題を構成する方法。  

## <a name="prerequisites"></a>前提条件  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理者グループのメンバーとしてログオンしている必要があります。  

## <a name="certificates-required-for-as2-transport"></a>AS2 トランスポートに必要な証明書  
 安全な AS2 データ転送のためするには、適切な証明書ストアに適切な証明書を追加し、証明書を適切な BizTalk アイテムに関連付けます。 次の証明書は、セキュリティで保護された AS2 メッセージのために使用されます。  


|        証明書の使用         |          証明書の種類           | パイプライン コンポーネント |                              ユーザー コンテキスト                              |                                                                                           証明書ストア                                                                                           |                                                                                                                                                                                                                                                                                                                                                            定義されている場所                                                                                                                                                                                                                                                                                                                                                             |
|----------------------------------|-------------------------------------|--------------------|------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|       署名 (送信)       |       固有の秘密キー (.pfx)        |    AS2 エンコーダー     |  送信ハンドラーに関連付けられているホスト インスタンスによって使用されるアカウント。   |    それぞれの現在の user \personal ストア[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]各ホスト インスタンス サービス アカウントとして AS2 エンコーダー パイプラインをホストします。    | -   **証明書**のページ、**グループ プロパティ** ダイアログ ボックス。 これは、既定の署名証明書の署名付きのドキュメントを送信するときに使用します。<br />-既定の証明書設定をオーバーライドして代わりに別のパーティの異なる証明書を使用できます。 選択して行うことができます**グループ署名証明書を上書き**で、**署名証明書**の一方向アグリーメント タブのページ、**アグリーメントのプロパティ**ダイアログボックスの し、署名証明書を指定します。 このプロパティが設定されている場合、アグリーメントに解決される AS2 メッセージが署名で指定された証明書を使用して、**署名証明書**ページし、証明書ではなく、BizTalk グループのプロパティの一部として提供します。 |
| 署名の検証 (受信) | 取引先パートナーの公開キー (.cer) |    AS2 デコーダー     | 受信ハンドラーに関連付けられているホスト インスタンスによって使用されるアカウント。 | それぞれの local computer \other People ストア[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]各ホスト インスタンス サービス アカウントとして AS2 デコーダー パイプラインをホストします。 |                                                                                                                                                                                                                                                           **証明書**のページ、**パーティ プロパティ** ダイアログ ボックス**に注意してください。** パーティの署名確認に使用する証明書は、他のパーティの署名確認に使用する証明書と重複しない、一意のものでなければなりません。                                                                                                                                                                                                                                                            |
|      暗号化 (送信)       | 取引先パートナーの公開キー (.cer) |    AS2 エンコーダー     |  送信ハンドラーに関連付けられているホスト インスタンスによって使用されるアカウント。   |                    それぞれの local computer \other People ストア[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]AS2 エンコーダー パイプラインをホストします。                    |                                                                                                                                                                                                                                                                                                                                   **証明書**のページ、**送信ポートのプロパティ** ダイアログ ボックス                                                                                                                                                                                                                                                                                                                                    |
|       復号化 (受信)       |       固有の秘密キー (.pfx)        |    AS2 デコーダー     | 受信ハンドラーに関連付けられているホスト インスタンスによって使用されるアカウント。 |    それぞれの現在の user \personal ストア[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]各ホスト インスタンス サービス アカウントとして AS2 デコーダー パイプラインをホストします。    |                                                                                                                                                                                                                        AS2 デコーダーでは、メッセージ内の証明書情報に基づいて証明書を決定します。<br /><br /> BizTalk MIME デコーダーは、証明書である必要があります、**証明書**メッセージを受信するために使用するホストのページ。 これには、AS2 デコーダーの必要はありません。                                                                                                                                                                                                                        |

## <a name="certificate-signing-for-outgoing-messages"></a>証明書の送信メッセージの署名  
 送信 AS2 メッセージは、BizTalk グループのプロパティの一部として定義されている既定の証明書を使用して署名されます。 ただし、メッセージの受信パーティがメッセージを提供またはそれらの送信メッセージの署名に使用する別の証明書を期待するプライベート証明書で署名する必要があるシナリオがあります。 選択した場合、このシナリオの他の証明書を使用して送信メッセージの署名が有効になっている、**グループ署名証明書を上書き**で、**署名証明書**一方向アグリーメント タブのページ**アグリーメントのプロパティ** ダイアログ ボックス、および署名証明書を指定します。 パーティの AS2 アグリーメントの一部として、証明書を指定すると場合、は、その証明書が送信メッセージの署名に使用されます。 パーティの証明書が定義されていない場合は、BizTalk グループのプロパティの一部として指定された既定の証明書が使用されます。  

## <a name="adding-certificates-to-the-certificate-stores"></a>証明書ストアに証明書を追加します。  
 詳細については、の「証明書管理コンソールの表示」セクションを参照してください。 [WCF アダプター用の証明書をインストールする](../core/installing-certificates-for-the-wcf-adapters.md)、だけでなく[証明書ウィザード ユーティリティ](../core/certificate-wizard-utility.md)トピック。  

> [!IMPORTANT]
>  個人証明書ストアは、メッセージ ログオン資格情報を持つが、ホスト インスタンスに関連付けられたユーザーのユーザー プロファイルが読み込まれている場合にのみを処理できるようにします。 署名と暗号化解除証明書 (ユーザーの秘密キー) の個人用ストアが使用されます。 既定では、インプロセス ホスト インスタンスのユーザー プロファイルが読み込まれるただし、ユーザー プロファイルは、分離ホスト インスタンスの既定では読み込まれません。 分離ホストのユーザー プロファイル、アプリケーションで読み込むことができます。 または、インプロセス ホスト インスタンスと分離ホスト インスタンスを同じログオンを使用してこの問題を回避することができます。  

## <a name="generating-certificates"></a>証明書を生成します。  
 証明書を取得できる、証明書機関 (CA) からです。ただし、証明書を要求する手順は、Ca 間異なることができます。 証明書の要求を送信する前に、証明書機関の Web サイトで提供される情報を確認します。  

> [!IMPORTANT]
>  AS2 トランスポートに使用される証明書には、その使用目的に必要な属性が必要です。 署名および署名の検証を行う、**キー使用法**証明書の属性である必要があります**デジタル署名**します。 暗号化と復号化、**キー使用法**証明書の属性である必要があります**データの暗号化**または**キーの暗号化**します。 確認することができます、**キー使用法**属性をクリックすると、証明書をダブルクリックして、**詳細** タブで、**証明書** ダイアログ ボックスとチェック、 **キー使用法**フィールド。  

 証明書サービスを使用して、Windows Server 2008 の証明書を生成することも、パートナーを受け入れることがありますのみがテスト目的でこれらの証明書の代わりに自己署名されていると、CA によって署名公開。 証明書を要求する証明書サービスの使用に関する詳細については、ダウンロード**Windows Server 2008 Active Directory 証明書サービス ステップ バイ ステップ ガイド**から[Windows Server 2008 ステップ バイ ステップ ガイド](http://go.microsoft.com/fwlink/?LinkId=187916) ([http://go.microsoft.com/fwlink/?LinkId=187916](http://go.microsoft.com/fwlink/?LinkId=187916)).  

### <a name="to-configure-a-certificate-for-signing-outgoing-as2-messages"></a>送信 AS2 メッセージの署名証明書を構成するには  

1. [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールを右クリックし、 **BizTalk グループ**ノード、およびクリック**プロパティ**します。  

2. コンソール ツリーで、**グループ プロパティ**ダイアログ ボックスで、をクリックして**証明書**します。  

3. **証明書**ウィンドウで、をクリックして**参照**では、署名を使用する証明書を検索し、クリックして**ok**します。  

   > [!NOTE]
   >  証明書の共通名を入力する代わりに、拇印だけを入力できます。 MMC でまたはをクリックすると、ファイル システム内の証明書ストアに証明書をダブルクリックして、拇印を取得する、**詳細** タブをクリックすると、**拇印**フィールド、および拇印をコピー.  

4. **[OK]** をクリックします。  

### <a name="to-configure-a-certificate-for-signing-outgoing-as2-messages-for-a-specific-party"></a>特定のパーティに対する送信 AS2 メッセージに署名するための証明書を構成するには  

1. [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、をクリックして、**パーティ**ノード。 **パーティとビジネス プロファイル**ウィンドウから、**契約**セクションで特定のパーティとメッセージの交換用に作成したアグリーメントを右クリックし、をクリックして**プロパティ**します。  

2. 一方向アグリーメント タブで、次のようにクリックします。**署名証明書**します。  

3. 選択、**上書きグループ署名証明書**送信 AS2 メッセージおよび MDN に署名するため、このページで指定された証明書を使用する チェック ボックス。  

4. クリックして**参照**を表示する、**証明書の選択** ダイアログ ボックスで、このパーティに送信されるメッセージに適用する署名証明書を選択します。  

5. **共通名**テキスト ボックスには、選択した証明書の説明が表示されます。  

6. **拇印**テキスト ボックスは、証明書の拇印を表示します。 証明書の拇印には、形式 HHHH HHHH HHHH HHHH HHHH HHHH HHHH HHHH HHHH HHHH、H は 16 進数の数字 (0 ~ 9 の数) または a ~ F の文字があります。  

7. クリックして**証明書の削除**を選択した証明書を削除します。  

8. クリックして**OK**変更を検証し、ダイアログ ボックスを閉じます。  

### <a name="to-configure-a-certificate-for-verifying-the-digital-signature-of-an-incoming-as2-messages"></a>受信 AS2 メッセージのデジタル署名を検証するための証明書を構成するには  

1. [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールを開き、 **BizTalk グループ**ノードをクリックして、**パーティ**ノード。  

2. **パーティとビジネス プロファイル** ウィンドウで、右クリックを受信するパーティ間でメッセージの署名し、クリックして**プロパティ**します。  

3. コンソール ツリーで、クリックして**証明書**します。  

4. **証明書**ウィンドウで、をクリックして**参照**、デジタル署名の検証に使用する証明書を検索し、クリックして**ok**します。  

   > [!NOTE]
   >  証明書の共通名を入力する代わりに、拇印だけを入力できます。 MMC でまたはをクリックすると、ファイル システム内の証明書ストアに証明書をダブルクリックして、拇印を取得する、**詳細** タブをクリックすると、**拇印**フィールド、および拇印をコピー.  

5. **[OK]** をクリックします。  

### <a name="to-configure-a-certificate-for-encrypting-an-outgoing-as2-messages"></a>送信 AS2 メッセージを暗号化するための証明書を構成するには  

1. [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールを開き、 **BizTalk グループ**ノード、**アプリケーション**ノードのノードを展開し、**アプリケーション**を格納している、暗号化されたメッセージで送信するポートを送信します。  

2. 開く、**送信ポート**ノードは、送信ポートを右クリックし、順にクリックします**プロパティ**します。  

3. コンソール ツリーで、クリックして**証明書**します。  

4. **証明書**ウィンドウで、をクリックして**参照**の暗号化に使用したい証明書を検索 **[ok]** します。  

   > [!NOTE]
   >  証明書の共通名を入力する代わりに、拇印だけを入力できます。 MMC でまたはをクリックすると、ファイル システム内の証明書ストアに証明書をダブルクリックして、拇印を取得する、**詳細** タブをクリックすると、**拇印**フィールド、および拇印をコピー.  

5. **[OK]** をクリックします。  

## <a name="see-also"></a>参照  
 [AS2 セキュリティ](../core/as2-security.md)   
 [署名、圧縮、および AS2 トランスポートでの暗号化の構成](../core/configuring-signing-compression-and-encryption-in-as2-transport.md)   
 [AS2 ソリューションのアーキテクチャ](../core/as2-solution-architecture.md)   
 [WCF アダプターの証明書のインストール](../core/installing-certificates-for-the-wcf-adapters.md)