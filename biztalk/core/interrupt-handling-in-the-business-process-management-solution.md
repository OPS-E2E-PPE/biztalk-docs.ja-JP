---
title: "ビジネス プロセス管理ソリューションでの処理を中断 |Microsoft ドキュメント"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- processing, pausing
- process management solution tutorial, pausing processing
ms.assetid: 23ce7617-f705-4b7d-8447-221dec9fb196
caps.latest.revision: "13"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 78b98eae8ee9cbb43354c1cfc48710c70969a929
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/20/2017
---
# <a name="interrupt-handling-in-the-business-process-management-solution"></a><span data-ttu-id="679b4-102">ビジネス プロセス管理ソリューションでの処理を中断します。</span><span class="sxs-lookup"><span data-stu-id="679b4-102">Interrupt Handling in the Business Process Management Solution</span></span>
<span data-ttu-id="679b4-103">このセクションでは、ビジネス プロセス管理ソリューションで使用される割り込み処理のメカニズムについて説明します。</span><span class="sxs-lookup"><span data-stu-id="679b4-103">This section describes the interrupt handling mechanism used in the Business Process Management Solution.</span></span> <span data-ttu-id="679b4-104">割り込みメカニズムを使用すると、注文の更新時または取り消し時に注文処理を停止できます。</span><span class="sxs-lookup"><span data-stu-id="679b4-104">Using the interrupt mechanism enables you to halt order processing when an order is updated or canceled.</span></span>  
  
## <a name="interrupt-handling"></a><span data-ttu-id="679b4-105">割り込み処理</span><span class="sxs-lookup"><span data-stu-id="679b4-105">Interrupt Handling</span></span>  
 <span data-ttu-id="679b4-106">処理ステージを実装しているオーケストレーションは、オーケストレーションを呼び出す**CheckInterrupt**プロセスの他の部分から割り込み要求をテストします。</span><span class="sxs-lookup"><span data-stu-id="679b4-106">The orchestrations that implement the processing stages call an orchestration, **CheckInterrupt**, that tests for an interrupt request from some other part of the process.</span></span> <span data-ttu-id="679b4-107">**CheckInterrupt**オーケストレーションから成る、**リッスン**図形です。</span><span class="sxs-lookup"><span data-stu-id="679b4-107">The **CheckInterrupt** orchestration consists of a **Listen** shape.</span></span> <span data-ttu-id="679b4-108">1 つの分岐、**リッスン**図形では、現在の順序と同じ関連付け ID を持つメッセージを確認します。</span><span class="sxs-lookup"><span data-stu-id="679b4-108">One branch of the **Listen** shape checks for a message with the same correlation ID as the current order.</span></span> <span data-ttu-id="679b4-109">このようなメッセージがある場合、 **CheckInterrupt**オーケストレーションが受信確認メッセージを送信し、実行、**スロー**図形です。</span><span class="sxs-lookup"><span data-stu-id="679b4-109">If there is such a message, the **CheckInterrupt** orchestration sends an acknowledgement message and executes a **Throw** shape.</span></span> <span data-ttu-id="679b4-110">のブランチを**リッスン**図形に実行されます左から右、右の分岐に遅延が表示されます。</span><span class="sxs-lookup"><span data-stu-id="679b4-110">Because the branches in a **Listen** shape are executed from left to right, the delay appears in the right branch.</span></span> <span data-ttu-id="679b4-111">遅延時間がゼロ (0) であることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="679b4-111">Notice that the delay is zero (0).</span></span>  
  
 <span data-ttu-id="679b4-112">組み合わせ、**リッスン**図形、受信分岐、および遅延分岐により、オーケストレーションにメッセージを確認します。</span><span class="sxs-lookup"><span data-stu-id="679b4-112">The combination of the **Listen** shape, a receive branch, and a delay branch allows the orchestration to check for messages.</span></span> <span data-ttu-id="679b4-113">割り込みメッセージがある場合、左の分岐が実行されます。</span><span class="sxs-lookup"><span data-stu-id="679b4-113">If there is an interrupt message, the left branch executes.</span></span> <span data-ttu-id="679b4-114">メッセージがない場合は、右側の分岐が実行し、呼び出し元のオーケストレーションに返します。</span><span class="sxs-lookup"><span data-stu-id="679b4-114">If there is no message, the right branch executes and returns to the calling orchestration.</span></span> <span data-ttu-id="679b4-115">割り込みメッセージは、いつでも送信できます。</span><span class="sxs-lookup"><span data-stu-id="679b4-115">An interrupt message can be sent at any time.</span></span> <span data-ttu-id="679b4-116">**CheckInterrupt**オーケストレーションは、場合によっては、ある可能性があります待つ割り込みメッセージのみを実行します。</span><span class="sxs-lookup"><span data-stu-id="679b4-116">Because the **CheckInterrupt** orchestration is run only occasionally, there may be an interrupt message waiting for it.</span></span>  
  
 <span data-ttu-id="679b4-117">**OrderManager**を呼び出して、割り込みを設定、 **Interrupter**オーケストレーションです。</span><span class="sxs-lookup"><span data-stu-id="679b4-117">The **OrderManager** sets interrupts by calling the **Interrupter** orchestration.</span></span> <span data-ttu-id="679b4-118">**Interrupter**割り込みメッセージを送信するオーケストレーション、 **InterruptPort**し、応答を待機します。</span><span class="sxs-lookup"><span data-stu-id="679b4-118">The **Interrupter** orchestration sends an interrupt message to the **InterruptPort** and waits for a reply.</span></span> <span data-ttu-id="679b4-119">オーケストレーションを使用して、**タイムアウト**囲んでいるプロパティ**スコープ**図形を応答が受信されない場合、ループを再開します。</span><span class="sxs-lookup"><span data-stu-id="679b4-119">The orchestration uses the **Timeout** property of the enclosing **Scope** shape to restart the loop if a reply isn't received.</span></span> <span data-ttu-id="679b4-120">このオーケストレーションは、応答を受信する前にスコープがタイムアウトする限り、割り込みメッセージの送信を続けます。</span><span class="sxs-lookup"><span data-stu-id="679b4-120">The orchestration continues to send the interrupt message as long as the scope times out before receiving a reply.</span></span> <span data-ttu-id="679b4-121">タイムアウトは、要求がサブスクリプションと合致したが、応答する時間がないことを示します。</span><span class="sxs-lookup"><span data-stu-id="679b4-121">A timeout indicates that the request matched a subscription, but there hasn't been time for a reply.</span></span> <span data-ttu-id="679b4-122">ループ終了、応答がある場合、またはへのサブスクリプションが存在しない場合、 **InterruptPort**です。</span><span class="sxs-lookup"><span data-stu-id="679b4-122">The loop ends if there is a reply, or if there is no subscription to the **InterruptPort**.</span></span>  
  
 <span data-ttu-id="679b4-123">要求-応答-完了パターン、 **OrderManager**処理ステージでの使用は、割り込み処理の重要な部分です。</span><span class="sxs-lookup"><span data-stu-id="679b4-123">The request-response-completion pattern the **OrderManager** uses with the process stages is a critical part of the interrupt handling.</span></span> <span data-ttu-id="679b4-124">**OrderManager**の応答を待機: 受信確認 — はステージからは、ステージの操作を続行する前に実行が開始されたことを認識します。</span><span class="sxs-lookup"><span data-stu-id="679b4-124">Because the **OrderManager** waits for a response—an acknowledgement—from the stage, it knows that the stage has started running before continuing.</span></span> <span data-ttu-id="679b4-125">これにより、ステージを開始する前に割り込みを受信することを防止します。</span><span class="sxs-lookup"><span data-stu-id="679b4-125">This guarantees that a stage cannot receive an interrupt before it starts.</span></span> <span data-ttu-id="679b4-126">これにより、また、 **OrderManager**割り込みに対するサブスクリプションがない場合、ステージが完了したことを確認します。</span><span class="sxs-lookup"><span data-stu-id="679b4-126">This also lets the **OrderManager** know that, if there is no subscription to an interrupt, the stage has completed.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="679b4-127">参照</span><span class="sxs-lookup"><span data-stu-id="679b4-127">See Also</span></span>  
 <span data-ttu-id="679b4-128">[ビジネス プロセス管理ソリューションでの処理](../core/processing-in-the-business-process-management-solution.md) </span><span class="sxs-lookup"><span data-stu-id="679b4-128">[Processing in the Business Process Management Solution](../core/processing-in-the-business-process-management-solution.md) </span></span>  
 <span data-ttu-id="679b4-129">[プロセス マネージャのロジック](../core/process-manager-logic.md) </span><span class="sxs-lookup"><span data-stu-id="679b4-129">[Process Manager Logic](../core/process-manager-logic.md) </span></span>  
 [<span data-ttu-id="679b4-130">ExceptionHandler オーケストレーション</span><span class="sxs-lookup"><span data-stu-id="679b4-130">The ExceptionHandler Orchestration</span></span>](../core/the-exceptionhandler-orchestration.md)