---
title: ボトルネックを調査する方法 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 7ca22d07-d5fe-4dfb-8b52-3be3a95b0d6f
caps.latest.revision: 4
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 643c64401cc5d8f68d407efc37020391b9467a6b
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65384890"
---
# <a name="how-to-investigate-bottlenecks"></a>ボトルネックを調査する方法
このトピックでは、ボトルネックを調査する方法の推奨プロセスについて説明します。  
  
## <a name="what-is-the-source-of-the-problem"></a>問題の原因は何ですか。  
 問題の原因は、ハードウェアまたは関連するソフトウェアです。 リソースは過小使用されたときにこれは通常のボトルネックを示す値どこかで、システムです。 ボトルネックは、ハードウェアの制限、または非効率的なソフトウェアの構成またはその両方のために発生することができます。  
  
 という 1 つのボトルネックを軽減する可能性が次の 1 つの探索段階的なプロセスは、ボトルネックを特定します。 識別して、これらのボトルネックを緩和の技術は、このトピックの目的です。 短時間のピーク時に実行するシステムのことができます。 ただし、維持可能なスループットのシステムのみを処理できます速度の遅いコンポーネント。  
  
## <a name="using-a-serial-approach"></a>連続的アプローチを使用します。  
 エンドポイント (入り口/出口)、システムのまたは中央 (オーケストレーション/データベース) のどこかでボトルネックが発生することができます。 ボトルネックの場所を特定した後、ソースを識別するために構造化されたアプローチを行うことができます。 ボトルネックが解消されている新たなボトルネックが導入されていない別の場所の行をさらにシステムのことを確認するには、もう一度パフォーマンスを測定するために不可欠なります。  
  
 これにより、一度に 1 つだけのパラメーターを変更する必要があり、パフォーマンスを測定するその 1 つの変更の影響を確認する、シリアル方式では、特定し、ボトルネックを解決するプロセスを行う必要があります。 一度に 1 つ以上のパラメーターをさまざまな変更の効果を非表示でした。  
  
 たとえば、パラメーター 1 を変更するただしにパフォーマンスを向上させることが、パラメーター 1 が 0 の効果を net に先行するための変更の利点を否定有害な影響を与える可能性がありますパラメーター 1 の変更を組み合わせて 2 番目のパラメーターを変更します。 ただし、その結果、さまざまなパラメーター 1 の効果が偽陰性、およびさまざまなパラメーター 2 の影響の偽陽性です。  
  
## <a name="testing-consistency"></a>テストの一貫性  
 パフォーマンス特性を測定する設定を変更した後は、変更の結果を検証する必要があります。  
  
-   ハードウェア :使用として、ハードウェアのさまざまな一貫性のあるハードウェアが一貫性のない動作を誤るなどの結果を表示できますが、ラップトップを使用しないでください。  
  
-   テスト実行の継続時間:結果が実際に維持可能なであることを確認する固定の最小期間とピーク時だけでなくパフォーマンスの測定に重要です。 長期にわたってテストを実行する別の理由は、システムになったこと、すべてのキャッシュが設定されます、データベース テーブルが予想される数に到達したおよび調整が指定された期間の初期のウォーム/傾斜を十分なことを確認するまでの時間に開始および制御定義済みのしきい値に達するのスループット。 このアプローチでは、最適なスループットを検出するのに役立ちます。  
  
-   パラメーターをテストします。テストのテストのテスト実行のパラメーターの実行に変わらないことにもできます。 たとえば、マップの複雑さやドキュメントのサイズをさまざまな異なるスループットと待機時間の結果を生成できます。  
  
-   クリーンな状態:テストが完了すると、実行、次のテストを実行する前にすべての状態をクリーンアップするには重要です。 たとえば、履歴データには、実行時のスループットに影響を与える、データベースに蓄積されたことができます。 メモリ、データベース接続、スレッドのようにキャッシュされたリソースを解放するサービス インスタンスのヘルプをリサイクルします。  
  
## <a name="expectations-throughput-versus-latency"></a>予測:スループットと待機時間  
 一定量のスループットや待機時間、デプロイされたシステムからの予測になります。 しようとして、高スループットが両方と低待機時間は 2 つの方向を引くと。 ただしは現実的では妥当な待機時間の最適なスループットを期待します。 スループット向上の負荷 (CPU 消費率が高くより高いディスク IO の競合、メモリ不足、ロックの競合) の向上と待機時間に悪影響を及ぼすことができるシステムに配置されます。 システムの最適な容量を検出するには、特定し、すべてのボトルネックを緩和する必要があります。  
  
 ボトルネックは、クリーンアップされずに、データベースに存在する従来のデータ (完了したインスタンス) によることができます。これが発生したときのパフォーマンスが低下することができます。 システムのための十分な時間をドレインするまでに与えた問題を軽減できます。 ただし、バックログが蓄積された原因を特定し、問題を解決することが重要です。  
  
 バックログの原因を検出するには、履歴データを分析、(を使用状況のパターンを検出し、バックログの原因の診断) パフォーマンス モニター カウンターを監視する重要なは。 これは、一般的な状況を毎晩バッチ方式で大量のデータを処理する場所です。 システムとのバックログから回復するには、その機能の性能は予想外のピーク スループットを処理するために、システム内に対応する overdrive シナリオとバッファーの大きさを処理するためのハードウェア要件を見積もる際の役に立ちます.  
  
 最適なスループットの詳細に必要です、システムをチューニングのアプリケーションのデプロイ、長所と短所、特定のシナリオ、システムと使用状況のパターンを理解します。 ボトルネックを特定しするものに近いトポロジで徹底的なテストを明確に最適なスループットを予測する唯一の方法は、実稼働環境で使用されます。  
  
 このセクションの他のトピックでは、そのトポロジを定義するプロセスを案内して、ボトルネックを緩和し、最初にボトルネックを回避するのに役立つ方法について説明します。  
  
## <a name="scaling"></a>スケーリング  
 展開されたトポロジのさまざまな段階でボトルネックが発生することができます。 いくつかのボトルネックは、ハードウェアをアップグレードすることでアドレス指定できます。 スケール アップ (複数の CPU、メモリまたはキャッシュ) またはスケール アウト (サーバーの追加) のいずれか、ハードウェアをアップグレードできます。 スケール アップ/スケール アウトするかどうかは、発生したボトルネックの種類と構成対象のアプリケーションに依存します。 次は、発生したボトルネックに基づいてハードウェア展開トポロジを変更する方法のガイダンスに役立ちます。 アプリケーションは、スケール アップ/スケール アウトを活用できるゼロから構築する必要があります。以下に例を示します。  
  
-   追加のサーバーのスケール アップ CPU やメモリも役に立ちませんアプリケーションがシリアル化と実行の 1 つのスレッドに依存する場合は、問題を軽減します。  
  
-   スケール アウト システムで追加のサーバーも役に立ちません場合、その他のサーバーも拡張不可能な一般的なリソースの競合を追加するだけです。 ただし、スケール アウトは、その他の特典を提供します。 1 つのクアッド プロセッサ サーバーではなく 2 つのデュアル プロセッサ サーバーを展開すると、冗長サーバーを高可用性トポロジを示し、追加のスループットを処理するための拡張の目的を実現できます。