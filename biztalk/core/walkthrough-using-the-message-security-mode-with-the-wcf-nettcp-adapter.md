---
title: 'チュートリアル: Wcf-nettcp アダプターを使用したメッセージ セキュリティ モードの使用 |Microsoft Docs'
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: c7f6e892-34ce-4132-8867-54cc3bbfe507
caps.latest.revision: 47
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: ce117c852cc9ed2993c30f5c915d8ad5e11f73b6
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/27/2018
ms.locfileid: "36990619"
---
# <a name="walkthrough-using-the-message-security-mode-with-the-wcf-nettcp-adapter"></a><span data-ttu-id="29db3-102">チュートリアル: Wcf-nettcp アダプターを使用したメッセージ セキュリティ モードを使用します。</span><span class="sxs-lookup"><span data-stu-id="29db3-102">Walkthrough: Using the Message Security Mode with the WCF-NetTcp Adapter</span></span>

> [!NOTE]
>  <span data-ttu-id="29db3-103">アダプターの詳細については、次を参照してください。 [BizTalk Server のアダプター](../core/adapters-in-biztalk-server.md)します。</span><span class="sxs-lookup"><span data-stu-id="29db3-103">For more information about adapters, see [Adapters in BizTalk Server](../core/adapters-in-biztalk-server.md).</span></span>  

## <a name="introduction"></a><span data-ttu-id="29db3-104">概要</span><span class="sxs-lookup"><span data-stu-id="29db3-104">Introduction</span></span>

 <span data-ttu-id="29db3-105">このチュートリアルでは、[!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)] メッセージ セキュリティ モードを使用するように WCF-NetTcp アダプターを構成する方法について説明します。このモードでは、WS-Security 仕様を使用してアダプターが送信するメッセージを保護します。</span><span class="sxs-lookup"><span data-stu-id="29db3-105">This walkthrough shows how to configure the WCF-NetTcp adapter to use the [!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)] Message security mode, which uses the WS-Security specification to help secure messages that the adapter transmits.</span></span> <span data-ttu-id="29db3-106">この仕様は、SOAP メッセージ レベルでの機密性、整合性、および認証を実現する SOAP メッセージング プロトコルの機能強化を示しています。</span><span class="sxs-lookup"><span data-stu-id="29db3-106">This specification describes enhancements to the SOAP messaging protocol to accomplish confidentiality, integrity, and authentication at the SOAP message level.</span></span> <span data-ttu-id="29db3-107">メッセージ セキュリティ モードでは、セキュリティ モードの組み合わせに応じて、暗号化/解読や署名/検証を目的とするオペレーションに対して、サービス証明書を指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="29db3-107">Message security mode requires the service certificate to be specified for operations such as encryption/decryption and signing/verification purposes depending on the security mode combinations.</span></span>  

 <span data-ttu-id="29db3-108">WCF-NetTcp アダプターは、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] クライアントと [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] リモート サービスの間の通信に NetTcpBinding バインドを使用します。</span><span class="sxs-lookup"><span data-stu-id="29db3-108">The WCF-NetTcp adapter uses the NetTcpBinding binding to communicate between [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] clients and [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] remote services.</span></span> <span data-ttu-id="29db3-109">このアダプタからは、SOAP セキュリティ、信頼性、およびトランザクションの各機能にフル アクセスできます。</span><span class="sxs-lookup"><span data-stu-id="29db3-109">It provides full access to SOAP security, reliability, and transaction features.</span></span> <span data-ttu-id="29db3-110">これによりオーケストレーションおよびスキーマを [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスとして公開することが可能になります。また、オーケストレーションで外部 WCF サービスを使用できるようになります。</span><span class="sxs-lookup"><span data-stu-id="29db3-110">It allows orchestrations and schemas to be published as [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] services, and also provides the ability for an orchestration to consume external WCF services.</span></span> <span data-ttu-id="29db3-111">このアダプタは、TCP トランスポートを使用し、メッセージではバイナリ エンコードを使用します。</span><span class="sxs-lookup"><span data-stu-id="29db3-111">This adapter uses the TCP transport, and messages have binary encoding.</span></span> <span data-ttu-id="29db3-112">WCF-NetTcp アダプターは、送信アダプターと受信アダプターの 2 つで構成されます。</span><span class="sxs-lookup"><span data-stu-id="29db3-112">The WCF-NetTcp adapter consists of both a send adapter and a receive adapter.</span></span>  

 <span data-ttu-id="29db3-113">このチュートリアルでは、Active Directory 証明書サービスを使用して、メッセージ セキュリティ モードの証明書を作成する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="29db3-113">This walkthrough shows how to create certificates for Message security mode by using the Active Directory Certificate Service.</span></span> <span data-ttu-id="29db3-114">サーバー用とクライアント用の証明書を作成してから、メッセージ セキュリティ モードでそれらの証明書を使用するように WCF-NetTcp 受信場所を構成します。</span><span class="sxs-lookup"><span data-stu-id="29db3-114">You will create certificates for the server and the client, and then configure a WCF-NetTcp receive location to use the certificates in Message security mode.</span></span> <span data-ttu-id="29db3-115">[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] クライアントを使用して、W3C の勧告である「XML Encryption Syntax and Processing」に従って暗号化した状態のメッセージをその受信場所に送信します。</span><span class="sxs-lookup"><span data-stu-id="29db3-115">By using a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client, you will send messages to that receive location in an encrypted state according to XML Encryption Syntax and Processing.</span></span>  

 <span data-ttu-id="29db3-116">このチュートリアルを完了すると、次のタスクを実行できるようになります。</span><span class="sxs-lookup"><span data-stu-id="29db3-116">After completing this walkthrough, you will understand how to perform the following tasks:</span></span>  

- <span data-ttu-id="29db3-117">Active Directory 証明書サービスを使用して証明書要求を作成し、証明書を発行してプロセスを完了する。</span><span class="sxs-lookup"><span data-stu-id="29db3-117">Use the Active Directory Certificate Service to create a certificate request and complete the process by issuing the certificate.</span></span>  

- <span data-ttu-id="29db3-118">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理コンソールから、メッセージ セキュリティ モードを使用するように WCF-NetTcp アダプターを構成する。</span><span class="sxs-lookup"><span data-stu-id="29db3-118">From the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, configure the WCF-NetTcp adapter to use the Message security mode.</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="29db3-119">必須コンポーネント</span><span class="sxs-lookup"><span data-stu-id="29db3-119">Prerequisites</span></span>  
 <span data-ttu-id="29db3-120">このサンプルではを手順がを環境に次の前提条件がインストールされることを確認を実行するには</span><span class="sxs-lookup"><span data-stu-id="29db3-120">To perform the steps in this sample ensure that your environment installs the following prerequisites;</span></span>  

- <span data-ttu-id="29db3-121">アセンブリをビルドし、展開プロセスを実行するコンピューターと、サンプルを実行しているコンピューターの両方の必要な Microsoft [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)]、Microsoft [!INCLUDE[netfx40_short](../includes/netfx40-short-md.md)]、および Microsoft BizTalk Server です。</span><span class="sxs-lookup"><span data-stu-id="29db3-121">Both the computer that builds the assemblies and runs the deployment process, and the computer that runs the sample, require Microsoft [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)], Microsoft [!INCLUDE[netfx40_short](../includes/netfx40-short-md.md)], and Microsoft BizTalk Server.</span></span>  

- <span data-ttu-id="29db3-122">アセンブリのビルドと展開プロセスの実行に使用するコンピューターには、Microsoft Visual Studio が必要です。</span><span class="sxs-lookup"><span data-stu-id="29db3-122">The computer used to build the assemblies and run the deployment process requires Microsoft Visual Studio.</span></span>  

- <span data-ttu-id="29db3-123">サンプルを実行するコンピューターには、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] アダプターと [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] 管理ツールが必要です。</span><span class="sxs-lookup"><span data-stu-id="29db3-123">The computer that runs the sample requires the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Adapters and the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Administration Tools.</span></span> <span data-ttu-id="29db3-124">これらは、Microsoft BizTalk Server のセットアップ時にインストールするオプションです。</span><span class="sxs-lookup"><span data-stu-id="29db3-124">These are options to install during setup of Microsoft BizTalk Server.</span></span>  

- <span data-ttu-id="29db3-125">管理タスクの実行に使用するコンピューターで、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理コンソール内の [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] アプリケーション設定を構成するには、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理者グループのメンバーであるユーザー アカウントとして実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="29db3-125">On the computers that you use to perform administrative tasks, you must run as a user account that is a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group to configure the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application settings within the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="29db3-126">また、アプリケーションの展開、ホスト インスタンスの管理、およびその他の必要なタスクを実行するには、このユーザー アカウントはローカル管理者グループのメンバーである必要もあります。</span><span class="sxs-lookup"><span data-stu-id="29db3-126">This user account must also be a member of the local Administrators group for application deployment, managing host instances, and other tasks that may be required.</span></span>  

- <span data-ttu-id="29db3-127">必要とする任意のコンピューターで[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]機能により、1 回限りのセットアップの手順を完了、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サンプル[ http://go.microsoft.com/fwlink/?LinkId=135510](http://go.microsoft.com/fwlink/?LinkId=135510)します。</span><span class="sxs-lookup"><span data-stu-id="29db3-127">On any computer that requires [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] capability, complete the one-time setup procedure for the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] samples at [http://go.microsoft.com/fwlink/?LinkId=135510](http://go.microsoft.com/fwlink/?LinkId=135510).</span></span>  

- <span data-ttu-id="29db3-128">サンプルを実行してバインドまたは .msi ファイルを [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] にインポートするコンピューターで、ホストが信頼されているホストではないことを確認します。信頼されているホストの場合、インポートは失敗します。</span><span class="sxs-lookup"><span data-stu-id="29db3-128">On the computer that runs the sample and imports a binding or an .msi file into [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], ensure the host is not a trusted host or the import will fail.</span></span>  

- <span data-ttu-id="29db3-129">このサンプルを実行するコンピューターに、Active Directory 証明書サービスがインストールされていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="29db3-129">On the computer that runs the sample ensure that Active Directory Certificate Services is installed.</span></span>  

- <span data-ttu-id="29db3-130">チュートリアルのコードをダウンロードし、コンピューターに展開する必要があります。</span><span class="sxs-lookup"><span data-stu-id="29db3-130">You must download the walkthrough code and extract it to your computer.</span></span>  <span data-ttu-id="29db3-131">このチュートリアルでは全体の一部[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]アダプター チュートリアル パッケージ。</span><span class="sxs-lookup"><span data-stu-id="29db3-131">This walkthrough is a part of the entire [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Adapter Walkthrough package.</span></span> <span data-ttu-id="29db3-132">ファイルをダウンロードする**WCFAdapterWalkthroughs.exe**から、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]デベロッパー センター [ http://go.microsoft.com/fwlink/?LinkId=194140](http://go.microsoft.com/fwlink/?LinkId=194140)します。</span><span class="sxs-lookup"><span data-stu-id="29db3-132">You can download the file **WCFAdapterWalkthroughs.exe** from the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Developer Center at [http://go.microsoft.com/fwlink/?LinkId=194140](http://go.microsoft.com/fwlink/?LinkId=194140).</span></span>  

## <a name="create-the-certificates-for-this-walkthrough"></a><span data-ttu-id="29db3-133">このチュートリアル用の証明書を作成します。</span><span class="sxs-lookup"><span data-stu-id="29db3-133">Create the certificates for this walkthrough</span></span>  

1. <span data-ttu-id="29db3-134">このセクションでは、サービスとクライアントの証明書を要求、証明書の発行が適切なストアにインストールします。</span><span class="sxs-lookup"><span data-stu-id="29db3-134">In this section you will request service and client certificates, issue the certificates, and install them into the appropriate stores.</span></span> <span data-ttu-id="29db3-135">信頼されている証明書チェーンを使用して証明書を作成するには、Active Directory 証明書サービスを使用します。</span><span class="sxs-lookup"><span data-stu-id="29db3-135">Active Directory Certificate Services is used to create a certificate with a trusted certificate chain.</span></span> <span data-ttu-id="29db3-136">「前提条件」において Active Directory 証明書サービスをインストールしていない場合は、コンピューターに Active Directory 証明書サービスをインストールします。</span><span class="sxs-lookup"><span data-stu-id="29db3-136">If you did not install Active Directory Certificate Services as part of the Prerequisites, then install Active Directory Certificate Services on your computer.</span></span> <span data-ttu-id="29db3-137">既にインストールされている場合は、手順 2. に進みます。</span><span class="sxs-lookup"><span data-stu-id="29db3-137">If it is already installed, go to step 2.</span></span>  

   1.  <span data-ttu-id="29db3-138">クリックして**開始**、 をポイント**管理ツール**、順にクリックします**サーバー マネージャー**します。</span><span class="sxs-lookup"><span data-stu-id="29db3-138">Click **Start**, point to **Administrative Tools**, and then click **Server Manager**.</span></span>  

   2.  <span data-ttu-id="29db3-139">下、**サーバー マネージャー**ノード、をクリックして**追加**、順にクリックします**ロール**します。</span><span class="sxs-lookup"><span data-stu-id="29db3-139">Under the **Server Manager** node, click **Add**, and then click **Roles**.</span></span>  

   3.  <span data-ttu-id="29db3-140">すると、**開始する前に**のダイアログ、**役割の追加ウィザード**します。</span><span class="sxs-lookup"><span data-stu-id="29db3-140">This brings up the **Before you begin** dialog for the **Add Roles Wizard**.</span></span> <span data-ttu-id="29db3-141">**[次へ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="29db3-141">Click **Next**.</span></span>  

   4.  <span data-ttu-id="29db3-142">**サーバーの役割の選択**ページで、選択**Active Directory Certificate Services**、 をクリックして**次へ**、しに従って、画面上を完了する手順については、インストールします。</span><span class="sxs-lookup"><span data-stu-id="29db3-142">On the **Select Server Roles** page, select **Active Directory Certificate Services**, click **Next**, and then follow the on-screen instructions to complete the installation.</span></span>  

2. <span data-ttu-id="29db3-143">次の手順に従って、サービス認証の証明書要求を作成します。</span><span class="sxs-lookup"><span data-stu-id="29db3-143">Create a certificate request for the service authentication as follows:</span></span>  

   1. <span data-ttu-id="29db3-144">Internet Explorer で、Web サイトを参照してください。`http://localhost/certsrv`します。</span><span class="sxs-lookup"><span data-stu-id="29db3-144">In Internet Explorer, visit the Web site `http://localhost/certsrv`.</span></span> <span data-ttu-id="29db3-145">**ようこそ**] ページで [**証明書を要求**、順にクリックします**高度な証明書の要求**で、**証明書を要求**ページです。</span><span class="sxs-lookup"><span data-stu-id="29db3-145">On the **Welcome** page, click **Request a Certificate**, and then click **Advanced certificate request** on the **Request a Certificate** page.</span></span>  

      > [!NOTE]
      >  <span data-ttu-id="29db3-146">使用する場合[!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)]証明機関から証明書の要求を要求すると、[!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)]コンピューター、エラーが発生する可能性があります **"証明書の登録を完了するには、CA の Web サイト構成必要がある HTTPS を使用するには認証"** します。</span><span class="sxs-lookup"><span data-stu-id="29db3-146">When using [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] as the certificate authority and requesting a certificate request from a [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)] computer, you may get the error **“In order to complete certificate enrollment, the Web site for the CA must be configured to use HTTPS authentication”**.</span></span> <span data-ttu-id="29db3-147">このエラーが発生した場合、登録 web サイトは Web 証明書 (SSL) を構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="29db3-147">If this error occurs, the enrollment website needs to be configured with a Web Certificate (SSL).</span></span> <span data-ttu-id="29db3-148">この作業の詳細については、次のリンクを参照してください。</span><span class="sxs-lookup"><span data-stu-id="29db3-148">Refer to these links for details in accomplishing this task:</span></span>  
      > 
      >  [<span data-ttu-id="29db3-149">AD Cs:web 登録</span><span class="sxs-lookup"><span data-stu-id="29db3-149">AD CS: Web Enrollment</span></span>](http://technet.microsoft.com/library/cc732517.aspx)  
      > 
      >  [<span data-ttu-id="29db3-150">IIS サーバー証明書のインストール手順</span><span class="sxs-lookup"><span data-stu-id="29db3-150">IIS Server Certificate Installation Instructions</span></span>](http://msdn.microsoft.com/library/ms751408.aspx)  

   2. <span data-ttu-id="29db3-151">**証明書要求の高度な**] ページで [**作成し、この CA に要求を送信**。</span><span class="sxs-lookup"><span data-stu-id="29db3-151">On the **Advanced Certificate Request** page, click **Create and submit a request to this CA**.</span></span>  

   3. <span data-ttu-id="29db3-152">**証明書の要求の高度な**ページで、入力`localhost`で、**名前**テキスト ボックスで、**サーバー認証証明書**から、 **必要な証明書の種類**ドロップダウン リスト、およびクリック**送信**します。</span><span class="sxs-lookup"><span data-stu-id="29db3-152">On the **Advanced Certificate Request** page, type `localhost` in the **Name** text box, select **Server Authentication Certificate** from the **Type of Certificate Needed** drop-down list, and then click **Submit**.</span></span>  

3. <span data-ttu-id="29db3-153">次の手順に従って、クライアント認証の証明書要求を作成します。</span><span class="sxs-lookup"><span data-stu-id="29db3-153">Create a certificate request for client authentication as follows:</span></span>  

   1.  <span data-ttu-id="29db3-154">Internet Explorer で、Web サイトを参照してください。`http://localhost/certsrv`します。</span><span class="sxs-lookup"><span data-stu-id="29db3-154">In Internet Explorer, visit the Web site `http://localhost/certsrv`.</span></span> <span data-ttu-id="29db3-155">**ようこそ**] ページで [**証明書を要求**、順にクリックします**高度な証明書の要求**で、**証明書を要求**ページです。</span><span class="sxs-lookup"><span data-stu-id="29db3-155">On the **Welcome** page, click **Request a Certificate**, and then click **Advanced certificate request** on the **Request a Certificate** page.</span></span>  

   2.  <span data-ttu-id="29db3-156">**証明書要求の高度な**] ページで [**作成し、この CA に要求を送信**。</span><span class="sxs-lookup"><span data-stu-id="29db3-156">On the **Advanced Certificate Request** page, click **Create and submit a request to this CA**.</span></span>  

   3.  <span data-ttu-id="29db3-157">**証明書の要求の高度な**ページで、入力`contoso`で、**名前**テキスト ボックスで、**クライアント認証証明書**から、 **必要な証明書の種類**ドロップダウン リスト、およびクリック**送信**します。</span><span class="sxs-lookup"><span data-stu-id="29db3-157">On the **Advanced Certificate Request** page, type `contoso` in the **Name** text box, select **Client Authentication Certificate** from the **Type of Certificate Needed** drop-down list, and then click **Submit**.</span></span>  

   > [!NOTE]
   >  <span data-ttu-id="29db3-158">クライアント認証証明書は、ドメイン コント ローラー以外のコンピューターで BizTalk Server を実行している場合に使用されます。</span><span class="sxs-lookup"><span data-stu-id="29db3-158">The client authentication certificate is used if you are running BizTalk Server on machine other than the Domain Controller.</span></span> <span data-ttu-id="29db3-159">これは、アダプターのプロパティ ダイアログで構成されます。</span><span class="sxs-lookup"><span data-stu-id="29db3-159">This will be configured in the adapter’s property dialog.</span></span>  

4. <span data-ttu-id="29db3-160">次の手順に従って、証明機関管理コンソールを使用して、証明書を発行します。</span><span class="sxs-lookup"><span data-stu-id="29db3-160">Issue the certificates by using the Certification Authority management console as follows:</span></span>  

   1.  <span data-ttu-id="29db3-161">クリックして**開始**、 をポイント**管理ツール**、順にクリックします**証明機関**します。</span><span class="sxs-lookup"><span data-stu-id="29db3-161">Click **Start**, point to **Administrative Tools**, and then click **Certification Authority**.</span></span>  

   2.  <span data-ttu-id="29db3-162">**証明機関**管理コンソールでは、証明機関の名前を展開し、ダブルクリック**保留中の要求**します。</span><span class="sxs-lookup"><span data-stu-id="29db3-162">In the **Certification Authority** management console, expand your certification authority's name, and then double-click **Pending Request**.</span></span>  

   3.  <span data-ttu-id="29db3-163">右側のウィンドウで、**証明機関**管理コンソールで、サービス認証証明書の要求を右クリックし、[**すべてのタスク**、] をクリックし、**問題**.</span><span class="sxs-lookup"><span data-stu-id="29db3-163">In the right pane of the **Certification Authority** management console, right-click the request for the service authentication certificate, point to **All Tasks**, and then click **Issue**.</span></span>  

   4.  <span data-ttu-id="29db3-164">右側のウィンドウで、**証明機関**管理コンソールで、クライアント認証証明書の要求を右クリックし、[**すべてのタスク**、] をクリックし、**問題**.</span><span class="sxs-lookup"><span data-stu-id="29db3-164">In the right pane of the **Certification Authority** management console, right-click the request for the client authentication certificate, point to **All Tasks**, and then click **Issue**.</span></span>  

   5.  <span data-ttu-id="29db3-165">閉じる、**証明機関**管理コンソール。</span><span class="sxs-lookup"><span data-stu-id="29db3-165">Close the **Certification Authority** management console.</span></span>  

5. <span data-ttu-id="29db3-166">次の手順に従って、発行した証明書をコンピューターにインストールします。</span><span class="sxs-lookup"><span data-stu-id="29db3-166">Install the issued certificates on your computer as follows:</span></span>  

   1.  <span data-ttu-id="29db3-167">Internet Explorer で、Web サイトを参照してください。`http://localhost/certsrv`します。</span><span class="sxs-lookup"><span data-stu-id="29db3-167">In Internet Explorer, visit the Web site `http://localhost/certsrv`.</span></span>  

   2.  <span data-ttu-id="29db3-168">**ようこそ**] ページで [**保留中の証明書の要求の状態を表示**します。</span><span class="sxs-lookup"><span data-stu-id="29db3-168">On the **Welcome** page, click **View the status of a pending certificate request**.</span></span>  

   3.  <span data-ttu-id="29db3-169">**保留中の証明書要求の状態を表示** ページで、サーバー認証証明書をクリックします。</span><span class="sxs-lookup"><span data-stu-id="29db3-169">On the **View the Status of a Pending Certificate Request** page, click the server authentication certificate.</span></span>  

   4.  <span data-ttu-id="29db3-170">**証明書は発行**] ページで [**この証明書をインストール**します。</span><span class="sxs-lookup"><span data-stu-id="29db3-170">On the **Certificate Issued** page, click **Install this Certificate**.</span></span>  

   5.  <span data-ttu-id="29db3-171">Internet Explorer で、Web サイトを参照してください。`http://localhost/certsrv`します。</span><span class="sxs-lookup"><span data-stu-id="29db3-171">In Internet Explorer, visit the Web site `http://localhost/certsrv`.</span></span>  

   6.  <span data-ttu-id="29db3-172">**ようこそ**] ページで [**保留中の証明書の要求の状態を表示**します。</span><span class="sxs-lookup"><span data-stu-id="29db3-172">On the **Welcome** page, click **View the status of a pending certificate request**.</span></span>  

   7.  <span data-ttu-id="29db3-173">**保留中の証明書要求の状態を表示** ページで、クライアント認証証明書をクリックします。</span><span class="sxs-lookup"><span data-stu-id="29db3-173">On the **View the Status of a Pending Certificate Request** page, click the client authentication certificate.</span></span>  

   8.  <span data-ttu-id="29db3-174">**証明書は発行**] ページで [**この証明書をインストール**します。</span><span class="sxs-lookup"><span data-stu-id="29db3-174">On the **Certificate Issued** page, click **Install this Certificate**.</span></span>  

6. <span data-ttu-id="29db3-175">次の手順に従って、発行した証明書が正しくインストールされたことを確認します。</span><span class="sxs-lookup"><span data-stu-id="29db3-175">Make sure that the issued certificates are installed properly as follows:</span></span>  

   1.  <span data-ttu-id="29db3-176">Microsoft 管理コンソール (MMC) を開きます。</span><span class="sxs-lookup"><span data-stu-id="29db3-176">Open Microsoft Management Console (MMC).</span></span> <span data-ttu-id="29db3-177">これを行うには、次のようにクリックします。**開始**、 をクリック**実行**、型`mmc`、順にクリックします**OK**します。</span><span class="sxs-lookup"><span data-stu-id="29db3-177">To do so, click **Start**, click **Run**, type `mmc`, and then click **OK**.</span></span>  

   2.  <span data-ttu-id="29db3-178">MMC で、上、**ファイル** メニューのをクリックして**スナップインの追加と削除**します。</span><span class="sxs-lookup"><span data-stu-id="29db3-178">In the MMC, on the **File** menu, click **Add/Remove Snap-in**.</span></span>  

   3.  <span data-ttu-id="29db3-179">**[スナップインの追加と削除]** ダイアログ ボックスで **[追加]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="29db3-179">In the **Add/Remove Snap-in** dialog box, click **Add**.</span></span>  

   4.  <span data-ttu-id="29db3-180">**スタンドアロン スナップインの追加**ダイアログ ボックスで、**証明書**から、**利用できるスタンドアロン スナップイン**ボックスの一覧をクリックして**追加**.</span><span class="sxs-lookup"><span data-stu-id="29db3-180">In the **Add Standalone Snap-in** dialog box, select **Certificates** from the **Available standalone snap-in** list, and then click **Add**.</span></span>  

   5.  <span data-ttu-id="29db3-181">**証明書スナップイン**ダイアログ ボックスで、 **ユーザー アカウント**オプションをクリックして**完了**します。</span><span class="sxs-lookup"><span data-stu-id="29db3-181">In the **Certificate snap-in** dialog box, select the **My user account** option, and then click **Finish**.</span></span>  

   6.  <span data-ttu-id="29db3-182">開いているダイアログ ボックスをすべて閉じます。</span><span class="sxs-lookup"><span data-stu-id="29db3-182">Close all of the open dialog boxes.</span></span>  

   7.  <span data-ttu-id="29db3-183">MMC のコンソール ルート] ウィンドウで [**証明書 - 現在のユーザー**、展開**個人**、展開**証明書**、いることを確認し、証明書を前の手順でインストールされているが表示されます。</span><span class="sxs-lookup"><span data-stu-id="29db3-183">In the MMC, in the Console Root window, expand **Certificates - Current User**, expand **Personal**, expand **Certificates**, and then make sure that the certificates that you installed in the previous step are displayed.</span></span>  

## <a name="create-the-biztalk-application-for-this-walkthrough"></a><span data-ttu-id="29db3-184">このチュートリアルでは、BizTalk アプリケーションを作成します。</span><span class="sxs-lookup"><span data-stu-id="29db3-184">Create the BizTalk application for this walkthrough</span></span>  

1. <span data-ttu-id="29db3-185">をクリックして**開始**、 をポイント**すべてのプログラム**、 をポイント[!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)]、順にクリックします**BizTalk Server 管理**します。</span><span class="sxs-lookup"><span data-stu-id="29db3-185">Click **Start**, point to **All Programs**, point to [!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)], and then click **BizTalk Server Administration**.</span></span>  

2. <span data-ttu-id="29db3-186">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、[ **BizTalk グループ**を右クリックして**アプリケーション**、 をポイント**新規**、 をクリックし、**アプリケーション**.</span><span class="sxs-lookup"><span data-stu-id="29db3-186">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **BizTalk Group**, right-click **Applications**, point to **New**, and then click **Application**.</span></span>  

3. <span data-ttu-id="29db3-187">**アプリケーション プロパティ** ダイアログ ボックスで、**全般** タブで、入力`WcfMessageSecurity`、順にクリックします**ok**。</span><span class="sxs-lookup"><span data-stu-id="29db3-187">In the **Application Properties** dialog box, on the **General** tab, type `WcfMessageSecurity`, and then click **OK**.</span></span>  

4. <span data-ttu-id="29db3-188">次の手順に従って、BizTalk アプリケーションの WCF-NetTcp アダプターを使用する受信場所を作成します。</span><span class="sxs-lookup"><span data-stu-id="29db3-188">Create a receive location using the WCF-NetTcp adapter for the BizTalk application as follows:</span></span>  

   1. <span data-ttu-id="29db3-189">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、[ **WcfMessageSecurity**を右クリックして**受信ポート**、 をポイント**新規**、 をクリックし、 **一方向受信ポート。**</span><span class="sxs-lookup"><span data-stu-id="29db3-189">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WcfMessageSecurity**, right-click **Receive Ports**, point to **New**, and then click **One-way Receive Port.**</span></span>  

   2. <span data-ttu-id="29db3-190">**受信ポートのプロパティ** ダイアログ ボックスで、**名前**テキスト ボックスに「 `WcfMessageSecurity.OrderRequest.Receive`、順にクリックします**OK**します。</span><span class="sxs-lookup"><span data-stu-id="29db3-190">In the **Receive Port Properties** dialog box, in the **Name** text box, type `WcfMessageSecurity.OrderRequest.Receive`, and then click **OK**.</span></span> <span data-ttu-id="29db3-191">この受信ポートの名前は厳密には任意ですが、わかりやすい名前にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="29db3-191">The name of this receive port is strictly arbitrary but this name makes logical sense.</span></span>  

   3. <span data-ttu-id="29db3-192">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、右クリック**受信場所**、 をクリックして**新規**、 をクリックし、**一方向の受信場所**。</span><span class="sxs-lookup"><span data-stu-id="29db3-192">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, right-click **Receive Locations**, click **New**, and then click **One-way Receive Location**.</span></span> <span data-ttu-id="29db3-193">[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] クライアントは [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] メッセージをこの受信場所に送信します。</span><span class="sxs-lookup"><span data-stu-id="29db3-193">The [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client will send a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] message to this receive location.</span></span> <span data-ttu-id="29db3-194">選択、 **WcfMessageSecurity.OrderRequest.Receive**受信ポートをクリック**OK**します。</span><span class="sxs-lookup"><span data-stu-id="29db3-194">Select the **WcfMessageSecurity.OrderRequest.Receive** recive port, and then click **OK**.</span></span>  

   4. <span data-ttu-id="29db3-195">**受信場所のプロパティ** ダイアログ ボックスで、**名前**テキスト ボックスに「`WcfMessageSecurity.OrderRequest.Receive.NetTcp`します。</span><span class="sxs-lookup"><span data-stu-id="29db3-195">In the **Receive Location Properties** dialog box, in the **Name** text box, type `WcfMessageSecurity.OrderRequest.Receive.NetTcp`.</span></span> <span data-ttu-id="29db3-196">この受信場所の名前は厳密には任意ですが、わかりやすい名前にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="29db3-196">The name of this receive location is strictly arbitrary but this name makes logical sense.</span></span>  

   5. <span data-ttu-id="29db3-197">**受信場所のプロパティ** ダイアログ ボックスで、**トランスポート**の横**型**を選択します**Wcf-nettcp**ドロップダウン リストからボックスの一覧をクリックして**構成**します。</span><span class="sxs-lookup"><span data-stu-id="29db3-197">In the **Receive Location Properties** dialog box, in the **Transport** section next to **Type**, select **WCF-NetTcp** from the drop-down list, and then click **Configure**.</span></span>  

   6. <span data-ttu-id="29db3-198">**Wcf-nettcp トランスポートのプロパティ** ダイアログ ボックスで、**全般** タブで、**アドレス (URI)** テキスト ボックスに「 `net.tcp://localhost/WcfMessageSecurity`。</span><span class="sxs-lookup"><span data-stu-id="29db3-198">In the **WCF-NetTcp Transport Properties** dialog box, on the **General** tab, in the **Address (URI)** text box, type `net.tcp://localhost/WcfMessageSecurity`.</span></span>  

   7. <span data-ttu-id="29db3-199">**Wcf-nettcp トランスポートのプロパティ** ダイアログ ボックスで、**セキュリティ** タブで **メッセージ**から、**セキュリティ モード**ドロップダウンボックスの一覧を選び**証明書**から、**クライアント資格情報の種類のメッセージ**ドロップダウン リスト。</span><span class="sxs-lookup"><span data-stu-id="29db3-199">In the **WCF-NetTcp Transport Properties** dialog box, on the **Security** tab, select **Message** from the **Security mode** drop-down list, and then select **Certificate** from the **Message client credential type** drop-down list.</span></span> <span data-ttu-id="29db3-200">これにより、メッセージ セキュリティ モードを使用するように WCF-NetTcp アダプターが構成されます。</span><span class="sxs-lookup"><span data-stu-id="29db3-200">This configures the WCF-NetTcp adapter to use the Message security mode.</span></span>  

   8. <span data-ttu-id="29db3-201">メッセージ セキュリティ モードで使用するサービス証明書を構成します。</span><span class="sxs-lookup"><span data-stu-id="29db3-201">Configure the service certificate to use with Message security mode.</span></span> <span data-ttu-id="29db3-202">**Wcf-nettcp トランスポートのプロパティ**] ダイアログ ボックスで、**サービス証明書**セクションで、[**参照**します。</span><span class="sxs-lookup"><span data-stu-id="29db3-202">In the **WCF-NetTcp Transport Properties** dialog box, in the **Service certification** section, click **Browse**.</span></span> <span data-ttu-id="29db3-203">**サービス証明書** ダイアログ ボックスでは、前の手順でインストールしたサーバー認証証明書を選択しをクリックして**OK**  ダイアログ ボックスを閉じて、変更を保存します。</span><span class="sxs-lookup"><span data-stu-id="29db3-203">In the **Select service certificate** dialog box, select the server authentication certificate you installed in the previous procedure, and then click **OK** to close the dialog box and save the changes.</span></span>  

   9. <span data-ttu-id="29db3-204">開いているダイアログ ボックスをすべて閉じます。</span><span class="sxs-lookup"><span data-stu-id="29db3-204">Close all of the open dialog boxes.</span></span>  

      > [!NOTE]
      >  <span data-ttu-id="29db3-205">[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] 受信アダプターでクライアント証明書を認証するには、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] アダプターのホスト インスタンスを実行するこのコンピューターの "信頼済みルート証明機関" 証明書ストアに、クライアント証明書の CA 証明書チェーンがインストールされている必要があります。</span><span class="sxs-lookup"><span data-stu-id="29db3-205">To authenticate the client certificates with the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] receive adapters, the CA certificate chain for the client certificates must be installed in the Trusted Root Certification Authorities certificate store of the computer running the host instances for the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] adapters.</span></span> <span data-ttu-id="29db3-206">このチュートリアルでは、証明書サービスが [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] クライアントおよび [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] アダプターと同じコンピューターにインストールされていると想定しているため、コンピューターに CA 証明書チェーンをインストールする必要はありません。</span><span class="sxs-lookup"><span data-stu-id="29db3-206">Because this walkthrough assumes that the certificate service is installed on the same computer as the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client and the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] adapters, you do not have to install the CA certificate chain on your computer.</span></span>  

5. <span data-ttu-id="29db3-207">BizTalk アプリケーションの FILE 送信ポートを作成します。</span><span class="sxs-lookup"><span data-stu-id="29db3-207">Create a FILE send port for the BizTalk application.</span></span> <span data-ttu-id="29db3-208">これは、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスを表すオーケストレーションによって注文要求の出力メッセージが送信される場所です。</span><span class="sxs-lookup"><span data-stu-id="29db3-208">This is the location where the order request output message will be sent by the orchestration representing the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  

   1. <span data-ttu-id="29db3-209">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、[ **WcfMessageSecurity**を右クリックして**送信ポート**、 をポイント**新規**、 をクリックし、**静的一方向の送信ポートです。**</span><span class="sxs-lookup"><span data-stu-id="29db3-209">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WcfMessageSecurity**, right-click **Send Ports**, point to **New**, and then click **Static One-way Send Port.**</span></span>  

   2. <span data-ttu-id="29db3-210">**送信ポートのプロパティ** ダイアログ ボックスで、**全般** タブで、**名**テキスト ボックスに「 `WcfMessageSecurity.OrderRequest.Send.FILE`。</span><span class="sxs-lookup"><span data-stu-id="29db3-210">In the **Send Port Properties** dialog box, on the **General**  tab, in the **Name** text box, type `WcfMessageSecurity.OrderRequest.Send.FILE`.</span></span>  

   3. <span data-ttu-id="29db3-211">**送信ポートのプロパティ** ダイアログ ボックスで、**トランスポート**の横**型**を選択します**ファイル**ドロップダウン リストからしクリックして**構成**します。</span><span class="sxs-lookup"><span data-stu-id="29db3-211">In the **Send Port Properties** dialog box, in the **Transport** section next to **Type**, select **FILE** from the drop-down list, and then click **Configure**.</span></span>  

   4. <span data-ttu-id="29db3-212">**FILE トランスポートのプロパティ** ダイアログ ボックスの 、**一般的な** タブで、入力`C:\WCFMessageSecurity\OrderRequestOut`で、**先フォルダー**テキスト ボックス、およびクリック**ok**.</span><span class="sxs-lookup"><span data-stu-id="29db3-212">In the **FILE Transport Properties** dialog box, on the **General**  tab, type `C:\WCFMessageSecurity\OrderRequestOut` in the **Destination folder** text box, and then click **OK**.</span></span>  

   5. <span data-ttu-id="29db3-213">**送信ポートのプロパティ** ダイアログ ボックスで、**フィルター**  タブで  **BTS します。ReceivePortName**の**プロパティ**フィールドに、入力`WcfMessageSecurity.OrderRequest.Receive`の**値**フィールドをクリックして**OK**します。</span><span class="sxs-lookup"><span data-stu-id="29db3-213">In the **Send Port Properties** dialog box, on the **Filters** tab, select **BTS.ReceivePortName** for the **Property** field, enter `WcfMessageSecurity.OrderRequest.Receive` for the **Value** field, and then click **OK**.</span></span> <span data-ttu-id="29db3-214">このフィルタ式により、着信[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]にクライアントからのメッセージ、 **WcfMessageSecurity.OrderRequest.Receive**この送信ポートにポートを受信します。</span><span class="sxs-lookup"><span data-stu-id="29db3-214">This filter expression routes the incoming [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] messages from the client into the **WcfMessageSecurity.OrderRequest.Receive** receive port to this send port.</span></span>  

## <a name="test-the-wcf-client-against-the-biztalk-application"></a><span data-ttu-id="29db3-215">BizTalk アプリケーションに対して WCF クライアントをテストします。</span><span class="sxs-lookup"><span data-stu-id="29db3-215">Test the WCF client against the BizTalk application</span></span>  

1. <span data-ttu-id="29db3-216">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、右クリックして**WcfMessageSecurity**、順にクリックします**開始**します。</span><span class="sxs-lookup"><span data-stu-id="29db3-216">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, right-click **WcfMessageSecurity**, and then click **Start**.</span></span> <span data-ttu-id="29db3-217">**開始**ダイアログ ボックスで、をクリックして**開始**します。</span><span class="sxs-lookup"><span data-stu-id="29db3-217">In the **Start** dialog box, click **Start**.</span></span>  

2. <span data-ttu-id="29db3-218">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、**プラットフォームの設定**、展開**ホスト インスタンス**を右クリックして**BizTalkServerApplication**またはその他クリックして、ホスト インスタンスを適切な**再起動**します。</span><span class="sxs-lookup"><span data-stu-id="29db3-218">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **Platform Settings**, expand **Host Instances**, right-click **BizTalkServerApplication** or another appropriate host instance, and then click **Restart**.</span></span>  

3. <span data-ttu-id="29db3-219">という名前のフォルダーを作成する**C:\WCFMessageSecurity**のこのチュートリアルの作業フォルダー。</span><span class="sxs-lookup"><span data-stu-id="29db3-219">Create a folder named **C:\WCFMessageSecurity** for the working folder for this walkthrough.</span></span> <span data-ttu-id="29db3-220">チュートリアルのファイルをこのフォルダーに展開します。</span><span class="sxs-lookup"><span data-stu-id="29db3-220">Extract the walkthrough files to this folder.</span></span>  

4. <span data-ttu-id="29db3-221">[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]、オープン、 **WcfMessageSecurity.sln**ファイル、 **C:\WCFMessageSecurity**フォルダー。</span><span class="sxs-lookup"><span data-stu-id="29db3-221">In [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], open the **WcfMessageSecurity.sln** file in the **C:\WCFMessageSecurity** folder.</span></span>  

5. <span data-ttu-id="29db3-222">[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]、ソリューション エクスプ ローラーで、 **WcfClient**を開き**Program.cs**を確認します。</span><span class="sxs-lookup"><span data-stu-id="29db3-222">In [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], in Solution Explorer, expand **WcfClient**, and then open **Program.cs** to review.</span></span>  

   - <span data-ttu-id="29db3-223">クライアントから、前の手順で作成した WCF-NetTcp 受信場所にメッセージが送信されます。</span><span class="sxs-lookup"><span data-stu-id="29db3-223">The client sends a message to the WCF-NetTcp receive location that you created in the previous procedure.</span></span>  

   - <span data-ttu-id="29db3-224">クライアントのチャネルの作成、 **NetTcpBinding**、クライアント資格情報の種類の証明書を使用するバインディングを構成します。</span><span class="sxs-lookup"><span data-stu-id="29db3-224">The client creates a channel with the **NetTcpBinding**, and then configures the binding to use certificates for the client credential type.</span></span>  

   - <span data-ttu-id="29db3-225">クライアントは、前の手順でインストールしたクライアント認証証明書をクライアント認証に使用するようにエンドポイント動作を構成します。</span><span class="sxs-lookup"><span data-stu-id="29db3-225">The client configures the endpoint behavior to use the client authentication certificate that you installed in the previous procedure for the client authentication.</span></span>  

   - <span data-ttu-id="29db3-226">クラス、**プログラム**、実装、 **IClientMessageInspector**と**IEndpointBehavior**送信を表示するインターフェイス[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]これからのメッセージコマンド プロンプトでのクライアント。</span><span class="sxs-lookup"><span data-stu-id="29db3-226">The class, **Program**, implements the **IClientMessageInspector** and **IEndpointBehavior** interfaces to display outgoing [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] messages from this client at a command prompt.</span></span>  

6. <span data-ttu-id="29db3-227">[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]、ソリューション エクスプ ローラーで右クリックし、 **WcfMessageSecurity**ソリューション、およびクリック**リビルド**。</span><span class="sxs-lookup"><span data-stu-id="29db3-227">In [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], in Solution Explorer, right-click the **WcfMessageSecurity** solution, and then click **Rebuild**.</span></span>  

7. <span data-ttu-id="29db3-228">[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]の**デバッグ** メニューのをクリックして**デバッグなしで開始**にメッセージを Wcf-nettcp 受信場所を送信する WcfClient を実行します。</span><span class="sxs-lookup"><span data-stu-id="29db3-228">In [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], on the **Debug** menu, click **Start Without Debugging** to run the WcfClient to send a message to the WCF-NetTcp receive locations.</span></span> <span data-ttu-id="29db3-229">コマンド プロンプトに実行結果が表示されます。</span><span class="sxs-lookup"><span data-stu-id="29db3-229">A command prompt appears to show the execution result.</span></span>  

   1. <span data-ttu-id="29db3-230">コマンド プロンプトで、注文要求メッセージを確認します。</span><span class="sxs-lookup"><span data-stu-id="29db3-230">At the command prompt, review the order request message.</span></span> <span data-ttu-id="29db3-231">注意してください、 **OrderId**フィールドと、メッセージの構造体。</span><span class="sxs-lookup"><span data-stu-id="29db3-231">Pay attention to the **OrderId** field and the structure of the message.</span></span>  

   2. <span data-ttu-id="29db3-232">コマンド プロンプトに移動、`C:\WCFMessageSecurity\OrderRequestOut`フォルダーから送信された注文要求メッセージを確認して、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]クライアントが表示されます。</span><span class="sxs-lookup"><span data-stu-id="29db3-232">At the command prompt, go to the `C:\WCFMessageSecurity\OrderRequestOut` folder, and then make sure the order request message sent by the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client appears.</span></span>  

   3. <span data-ttu-id="29db3-233">コマンド プロンプトを閉じます。</span><span class="sxs-lookup"><span data-stu-id="29db3-233">Close the command prompt.</span></span>
