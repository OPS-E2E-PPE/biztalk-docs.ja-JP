---
title: HIPAA サブドキュメントの分割 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 66d9badd-00c6-43a3-807e-0ad313983adc
caps.latest.revision: 21
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 8cd5c202539a86479b397a7c8417b20aeea32542
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/27/2018
ms.locfileid: "36971483"
---
# <a name="splitting-hipaa-subdocuments"></a><span data-ttu-id="23937-102">HIPAA サブドキュメントの分割</span><span class="sxs-lookup"><span data-stu-id="23937-102">Splitting HIPAA Subdocuments</span></span>
<span data-ttu-id="23937-103">HIPAA の EDI インターチェンジには、通常、1 つのトランザクション セット内に、ST ヘッダーと SE ヘッダーで囲まれた複数の子ドキュメント/サブドキュメントがあります。</span><span class="sxs-lookup"><span data-stu-id="23937-103">EDI interchanges for HIPAA commonly have multiple child/sub documents within a single transaction set, as bounded by the ST/SE headers.</span></span> <span data-ttu-id="23937-104">EDI 受信パイプラインでは、このようなトランザクション セットから、複数の個別の HIPAA サブドキュメントを作成することがサポートされています。</span><span class="sxs-lookup"><span data-stu-id="23937-104">The EDI receive pipeline supports creation of separate HIPAA subdocuments from such an transaction set.</span></span> <span data-ttu-id="23937-105">これは、HIPAA 以外の EDI インターチェンジとは異なる点です。HIPAA 以外の EDI インターチェンジでは、1 つのトランザクション セットが単一のメッセージとして処理されます。</span><span class="sxs-lookup"><span data-stu-id="23937-105">This is different from non-HIPAA EDI interchanges, in which a single transaction set is processed as a single message.</span></span>  
  
## <a name="subdocument-splitting-schemas"></a><span data-ttu-id="23937-106">サブドキュメントによるスキーマの分割</span><span class="sxs-lookup"><span data-stu-id="23937-106">Subdocument Splitting Schemas</span></span>  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="23937-107"> は、ネイティブ スキーマを通じて以下の HIPAA ドキュメント タイプの分割をサポートします。</span><span class="sxs-lookup"><span data-stu-id="23937-107"> supports splitting of the following HIPAA document types through native schemas:</span></span>  
  
- <span data-ttu-id="23937-108">HIPAA version 4010 ドキュメント: 登録 (834)、835 請求の支払いおよび 837 の 3 つのバリエーション</span><span class="sxs-lookup"><span data-stu-id="23937-108">HIPAA version 4010 documents: 834 Enrollment, 835 Claim Payment and three variants of 837 Claim</span></span>  
  
- <span data-ttu-id="23937-109">HIPAA バージョン 5010 のドキュメント: 276/277 請求ステータス-要求と応答、登録 (834)、および 837 の 3 つのバリエーション</span><span class="sxs-lookup"><span data-stu-id="23937-109">HIPAA version 5010 documents: 276/277 Claim Status – Request and Response, 834 Enrollment and three variants of 837 Claim</span></span>  
  
  [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="23937-110"> では、この 3 種類のドキュメントのそれぞれに対して 2 種類のスキーマが用意されています。</span><span class="sxs-lookup"><span data-stu-id="23937-110"> provides two versions of schemas for each of these three document types.</span></span> <span data-ttu-id="23937-111">それぞれの種類のドキュメントについて、分割をサポートするスキーマには、ファイル名に 'Multiple' というマークが付いています。</span><span class="sxs-lookup"><span data-stu-id="23937-111">For each document type, the schema supporting splitting is identified by the ‘Multiple’ tag in the file name.</span></span> <span data-ttu-id="23937-112">もう一方のスキーマでは、サブドキュメントの分割はサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="23937-112">The other schema does not support subdocument splitting.</span></span>  
  
  <span data-ttu-id="23937-113">シナリオによっては、分割スキーマと非分割スキーマの両方が必要になる場合があります。</span><span class="sxs-lookup"><span data-stu-id="23937-113">In some scenarios, both splitting and non splitting schemas may be required.</span></span> <span data-ttu-id="23937-114">これは、どちらかの種類のスキーマでカスタムのターゲット名前空間を使用することによりサポートされます。</span><span class="sxs-lookup"><span data-stu-id="23937-114">This will be supported through the use of a custom target namespace for one variant of the schema.</span></span>  
  
## <a name="how-subdocument-splitting-is-enabled"></a><span data-ttu-id="23937-115">サブドキュメントの分割を有効にする方法</span><span class="sxs-lookup"><span data-stu-id="23937-115">How Subdocument Splitting Is Enabled</span></span>  
 <span data-ttu-id="23937-116">HIPAA サブドキュメントの分割は、HIPAA スキーマ内の 3 つの注釈エントリによって有効になります。</span><span class="sxs-lookup"><span data-stu-id="23937-116">The splitting of HIPAA subdocuments is enabled by three annotation entries in the HIPAA schema.</span></span> <span data-ttu-id="23937-117">最初の 2 つに設定する必要があります appinfo 注釈内のスキーマのエントリ**はい**:</span><span class="sxs-lookup"><span data-stu-id="23937-117">The first two are  entries for the schema in the appinfo annotation, which must be set to **yes**:</span></span>  
  
```  
subdocument_break = "yes" Split_Without_Sibling_Data = "Yes"  
```  
  
 <span data-ttu-id="23937-118">もう 1 つは、HIPAA スキーマの該当するレコード レベルにある注釈エントリです。</span><span class="sxs-lookup"><span data-stu-id="23937-118">The third annotation entry is located at the appropriate record levels within the HIPAA schema.</span></span> <span data-ttu-id="23937-119">このプロパティにも設定する必要があります**はい**します。</span><span class="sxs-lookup"><span data-stu-id="23937-119">This property must also be set to **yes**.</span></span>  
  
```  
subdocument_creation_break = "yes"  
```  
  
 <span data-ttu-id="23937-120">HIPAA スキーマ内のサブドキュメントの作成 break 注釈が"yes"に設定され、受信バッチ処理オプション パーティ プロパティが「トランザクション セットとして分割インターチェンジ」に設定されている場合にのみ、HIPAA インターチェンジをサブドキュメントに分割されます。</span><span class="sxs-lookup"><span data-stu-id="23937-120">A HIPAA interchange will be split into subdocuments only if the subdocument creation break annotation within the HIPAA schema is set to "yes", and the Inbound batch processing option party property is set to "Split Interchange as Transaction Sets".</span></span> <span data-ttu-id="23937-121">[受信バッチ処理オプション] パーティ プロパティが [インターチェンジの保存] に設定されている場合、EDI 逆アセンブラはインターチェンジをサブドキュメントに分割しません。</span><span class="sxs-lookup"><span data-stu-id="23937-121">If the Inbound batch processing option party property is set to preserve the interchange, the EDI disassembler will not split the interchange into subdocuments.</span></span> <span data-ttu-id="23937-122">この場合、EDI 逆アセンブラは注釈を無視します。</span><span class="sxs-lookup"><span data-stu-id="23937-122">In this case, the EDI disassembler will ignore the annotation.</span></span> <span data-ttu-id="23937-123">この状況が発生しても、イベント ビューアには警告が表示されません。</span><span class="sxs-lookup"><span data-stu-id="23937-123">No warning will be raised in the event viewer if this occurs.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="23937-124">サブドキュメントの作成を中断するための注釈は入れ子にできません。</span><span class="sxs-lookup"><span data-stu-id="23937-124">Subdocument creation break annotations cannot be nested.</span></span> <span data-ttu-id="23937-125">サブドキュメントの注釈が適用されたループがスキーマ内にある場合、このループは、サブドキュメントの注釈が適用された別のループを含むことができません。</span><span class="sxs-lookup"><span data-stu-id="23937-125">If a schema includes a loop that has a subdocument annotation applied to it, that loop cannot contain another loop that has a subdocument annotation applied to it.</span></span>  
  
## <a name="how-subdocuments-are-processed"></a><span data-ttu-id="23937-126">サブドキュメントの処理方法</span><span class="sxs-lookup"><span data-stu-id="23937-126">How Subdocuments are Processed</span></span>  
 <span data-ttu-id="23937-127">サブドキュメントは、EDI 受信パイプライン内で EDI 逆アセンブラによって分割されます。</span><span class="sxs-lookup"><span data-stu-id="23937-127">The EDI disassembler in the EDI receive pipeline splits the subdocuments.</span></span> <span data-ttu-id="23937-128">受信パイプラインは、受信インターチェンジを検証し、該当する受信確認を生成した後で、分割されたそれぞれのサブドキュメントをメッセージ ボックスにルーティングします。</span><span class="sxs-lookup"><span data-stu-id="23937-128">After the receive pipeline validates the incoming interchange and generates the appropriate acknowledgments, it routes each separate subdocument to the MessageBox.</span></span> <span data-ttu-id="23937-129">各サブドキュメントは構造的にも構文的にも有効ですが、ビジネス レベルの概要、トランザクション セットの合計、およびトランザクション セット制御番号は同期していないことが予期されます。</span><span class="sxs-lookup"><span data-stu-id="23937-129">Each subdocument is structurally and syntactically valid; however, business level summaries, transaction set totals, and transaction set control numbers are expected to be out of synchronization.</span></span> <span data-ttu-id="23937-130">送信パイプラインで、既存のセグメント カウントの値 (元のトランザクション セットから取得したもの) が格納されている各サブドキュメントの SE01 が、そのサブドキュメントに含まれているセグメントのカウントに上書きされます。</span><span class="sxs-lookup"><span data-stu-id="23937-130">The send pipeline will overwrite the value of the existing segment count in SE01 of each subdocument (which came from the original transaction set) to the count of included segments in the subdocument.</span></span> <span data-ttu-id="23937-131">また、受信パイプラインでは、各サブドキュメント内のトランザクション セット制御番号がリセットされ、サブドキュメントでの制御番号の重複を防ぎます。</span><span class="sxs-lookup"><span data-stu-id="23937-131">The receive pipeline will also reset the transaction set control numbers in each subdocument so that the subdocument do not have duplicate control numbers.</span></span> <span data-ttu-id="23937-132">これによって、送信側の処理が失敗しなくなります。</span><span class="sxs-lookup"><span data-stu-id="23937-132">This ensures that send-side processing will not fail.</span></span>  
  
 <span data-ttu-id="23937-133">サブドキュメントの分割中にトランザクション セットで EDI または拡張された検証が失敗した場合、そのトランザクション セットは中断されます。</span><span class="sxs-lookup"><span data-stu-id="23937-133">If a transaction set fails EDI or extended validation during subdocument splitting, the individual failing transaction set is suspended.</span></span>  
  
 <span data-ttu-id="23937-134">サブドキュメントにサブスクライブしている送信ポートでは、メッセージ ボックスから各サブドキュメントを取得し、XML サブドキュメントをシリアル化して、バッチ処理 (有効になっている場合) と検証を行った後に送信します。</span><span class="sxs-lookup"><span data-stu-id="23937-134">A send port that subscribes to the subdocuments will pick up each subdocument from MessageBox, serialize the XML subdocuments, batch them (if enabled), validate them, and send them.</span></span> <span data-ttu-id="23937-135">送信パイプラインで、セグメント データ要素 (SE01) のカウントが更新されます。</span><span class="sxs-lookup"><span data-stu-id="23937-135">The send pipeline updates the count of segments data element (SE01).</span></span>  
  
## <a name="how-subdocuments-are-split"></a><span data-ttu-id="23937-136">サブドキュメントの分割方法</span><span class="sxs-lookup"><span data-stu-id="23937-136">How Subdocuments Are Split</span></span>  
 <span data-ttu-id="23937-137">サブドキュメントの作成を中断するための注釈は、HIPAA スキーマ内の 1 つ以上の要素を含むループに対して一般的に適用されます。</span><span class="sxs-lookup"><span data-stu-id="23937-137">A subdocument creation break annotation is commonly applied to a loop that encompasses one or more elements within a HIPAA schema.</span></span> <span data-ttu-id="23937-138">スキーマ内で、中断ループの前後に記述されているその他の要素は、複数のサブドキュメントのそれぞれで複製されます。</span><span class="sxs-lookup"><span data-stu-id="23937-138">Other elements before and after the break loop in the schema are replicated in each of the multiple subdocuments.</span></span>  
  
 <span data-ttu-id="23937-139">次の表は、サブドキュメントの分割の例を示しています。</span><span class="sxs-lookup"><span data-stu-id="23937-139">The following table shows an example of subdocument splitting.</span></span> <span data-ttu-id="23937-140">この例では、CC 要素のループに対して、サブドキュメントの作成を中断するための注釈が "yes" に設定されています。</span><span class="sxs-lookup"><span data-stu-id="23937-140">In this example, the subdocument creation break annotation is set to "yes" for the CC element loop.</span></span> <span data-ttu-id="23937-141">この結果、トランザクション セットの CC 要素が個別のサブドキュメントに分割されますが、トランザクション セットの AA、BB、および DD の各要素はすべて、分割されたそれぞれのサブドキュメントに含まれます。</span><span class="sxs-lookup"><span data-stu-id="23937-141">As a result, the CC elements in the transaction set are separated into separate subdocuments, while the AA, BB, and DD elements in the transaction set are all included in each separate subdocument.</span></span>  
  
|<span data-ttu-id="23937-142">スキーマ (最小/最大出現数)</span><span class="sxs-lookup"><span data-stu-id="23937-142">Schema(min and max occurrences)</span></span>|<span data-ttu-id="23937-143">元のインスタンス</span><span class="sxs-lookup"><span data-stu-id="23937-143">Original Instance</span></span>|<span data-ttu-id="23937-144">サブドキュメントの 1</span><span class="sxs-lookup"><span data-stu-id="23937-144">Subdocument #1</span></span>|<span data-ttu-id="23937-145">サブドキュメント 2</span><span class="sxs-lookup"><span data-stu-id="23937-145">Subdocument #2</span></span>|<span data-ttu-id="23937-146">サブドキュメント番号 3</span><span class="sxs-lookup"><span data-stu-id="23937-146">Subdocument #3</span></span>|  
|---------------------------------------|-----------------------|---------------------|---------------------|---------------------|  
|<span data-ttu-id="23937-147">ST (1,0)</span><span class="sxs-lookup"><span data-stu-id="23937-147">ST (1,0)</span></span>|<span data-ttu-id="23937-148">ST</span><span class="sxs-lookup"><span data-stu-id="23937-148">ST</span></span>|<span data-ttu-id="23937-149">ST</span><span class="sxs-lookup"><span data-stu-id="23937-149">ST</span></span>|<span data-ttu-id="23937-150">ST</span><span class="sxs-lookup"><span data-stu-id="23937-150">ST</span></span>|<span data-ttu-id="23937-151">ST</span><span class="sxs-lookup"><span data-stu-id="23937-151">ST</span></span>|  
|<span data-ttu-id="23937-152">AA (1,1)</span><span class="sxs-lookup"><span data-stu-id="23937-152">AA (1,1)</span></span>|<span data-ttu-id="23937-153">AA</span><span class="sxs-lookup"><span data-stu-id="23937-153">AA</span></span>|<span data-ttu-id="23937-154">AA</span><span class="sxs-lookup"><span data-stu-id="23937-154">AA</span></span>|<span data-ttu-id="23937-155">AA</span><span class="sxs-lookup"><span data-stu-id="23937-155">AA</span></span>|<span data-ttu-id="23937-156">AA</span><span class="sxs-lookup"><span data-stu-id="23937-156">AA</span></span>|  
|<span data-ttu-id="23937-157">BB ループ (1,n)</span><span class="sxs-lookup"><span data-stu-id="23937-157">BB loop (1,n)</span></span><br /><br /> <span data-ttu-id="23937-158">BB1 (1,n)</span><span class="sxs-lookup"><span data-stu-id="23937-158">BB1 (1,n)</span></span><br /><br /> <span data-ttu-id="23937-159">CC ループ (1,n) - subdocument_break = "yes"</span><span class="sxs-lookup"><span data-stu-id="23937-159">CC loop (1,n) - subdocument_break = "yes"</span></span><br /><br /> <span data-ttu-id="23937-160">CC1 (1,n)</span><span class="sxs-lookup"><span data-stu-id="23937-160">CC1 (1,n)</span></span><br /><br /> <span data-ttu-id="23937-161">CC2 (0,n)</span><span class="sxs-lookup"><span data-stu-id="23937-161">CC2 (0,n)</span></span><br /><br /> <span data-ttu-id="23937-162">BB2 (0,n)</span><span class="sxs-lookup"><span data-stu-id="23937-162">BB2 (0,n)</span></span>|<span data-ttu-id="23937-163">BB1\*1</span><span class="sxs-lookup"><span data-stu-id="23937-163">BB1\*1</span></span><br /><br /> <span data-ttu-id="23937-164">CC1\*1</span><span class="sxs-lookup"><span data-stu-id="23937-164">CC1\*1</span></span><br /><br /> <span data-ttu-id="23937-165">CC2\*1</span><span class="sxs-lookup"><span data-stu-id="23937-165">CC2\*1</span></span><br /><br /> <span data-ttu-id="23937-166">BB2\*1</span><span class="sxs-lookup"><span data-stu-id="23937-166">BB2\*1</span></span><br /><br /> <span data-ttu-id="23937-167">BB1\*2</span><span class="sxs-lookup"><span data-stu-id="23937-167">BB1\*2</span></span><br /><br /> <span data-ttu-id="23937-168">CC1\*2</span><span class="sxs-lookup"><span data-stu-id="23937-168">CC1\*2</span></span><br /><br /> <span data-ttu-id="23937-169">CC2\*2</span><span class="sxs-lookup"><span data-stu-id="23937-169">CC2\*2</span></span><br /><br /> <span data-ttu-id="23937-170">BB1\*3</span><span class="sxs-lookup"><span data-stu-id="23937-170">BB1\*3</span></span><br /><br /> <span data-ttu-id="23937-171">CC1\*3</span><span class="sxs-lookup"><span data-stu-id="23937-171">CC1\*3</span></span><br /><br /> <span data-ttu-id="23937-172">CC2\*3</span><span class="sxs-lookup"><span data-stu-id="23937-172">CC2\*3</span></span>|<span data-ttu-id="23937-173">BB1\*1</span><span class="sxs-lookup"><span data-stu-id="23937-173">BB1\*1</span></span><br /><br /> <span data-ttu-id="23937-174">CC1\*1</span><span class="sxs-lookup"><span data-stu-id="23937-174">CC1\*1</span></span><br /><br /> <span data-ttu-id="23937-175">CC2\*1</span><span class="sxs-lookup"><span data-stu-id="23937-175">CC2\*1</span></span><br /><br /> <span data-ttu-id="23937-176">BB2\*1</span><span class="sxs-lookup"><span data-stu-id="23937-176">BB2\*1</span></span>|<span data-ttu-id="23937-177">BB1\*2</span><span class="sxs-lookup"><span data-stu-id="23937-177">BB1\*2</span></span><br /><br /> <span data-ttu-id="23937-178">CC1\*2</span><span class="sxs-lookup"><span data-stu-id="23937-178">CC1\*2</span></span><br /><br /> <span data-ttu-id="23937-179">CC2\*2</span><span class="sxs-lookup"><span data-stu-id="23937-179">CC2\*2</span></span>|<span data-ttu-id="23937-180">BB1\*3</span><span class="sxs-lookup"><span data-stu-id="23937-180">BB1\*3</span></span><br /><br /> <span data-ttu-id="23937-181">CC1\*3</span><span class="sxs-lookup"><span data-stu-id="23937-181">CC1\*3</span></span><br /><br /> <span data-ttu-id="23937-182">CC2\*3</span><span class="sxs-lookup"><span data-stu-id="23937-182">CC2\*3</span></span>|  
|<span data-ttu-id="23937-183">DD (0,n)</span><span class="sxs-lookup"><span data-stu-id="23937-183">DD (0,n)</span></span>|<span data-ttu-id="23937-184">DD</span><span class="sxs-lookup"><span data-stu-id="23937-184">DD</span></span>|<span data-ttu-id="23937-185">DD</span><span class="sxs-lookup"><span data-stu-id="23937-185">DD</span></span>|<span data-ttu-id="23937-186">DD</span><span class="sxs-lookup"><span data-stu-id="23937-186">DD</span></span>|<span data-ttu-id="23937-187">DD</span><span class="sxs-lookup"><span data-stu-id="23937-187">DD</span></span>|  
|<span data-ttu-id="23937-188">SE</span><span class="sxs-lookup"><span data-stu-id="23937-188">SE</span></span>|<span data-ttu-id="23937-189">SE</span><span class="sxs-lookup"><span data-stu-id="23937-189">SE</span></span>|<span data-ttu-id="23937-190">SE</span><span class="sxs-lookup"><span data-stu-id="23937-190">SE</span></span>|<span data-ttu-id="23937-191">SE</span><span class="sxs-lookup"><span data-stu-id="23937-191">SE</span></span>|<span data-ttu-id="23937-192">SE</span><span class="sxs-lookup"><span data-stu-id="23937-192">SE</span></span>|