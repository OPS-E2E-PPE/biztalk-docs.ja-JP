---
title: HIPAA サブドキュメントの |Microsoft ドキュメント
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 66d9badd-00c6-43a3-807e-0ad313983adc
caps.latest.revision: 21
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 799cb5813b3c13339a0c477bf142a467a91b2c94
ms.sourcegitcommit: 8418b1a8f38b7f56979cd6e203f0b591e2f40fe1
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/28/2018
ms.locfileid: "22278330"
---
# <a name="splitting-hipaa-subdocuments"></a>HIPAA サブドキュメントの分割
HIPAA の EDI インターチェンジには、通常、1 つのトランザクション セット内に、ST ヘッダーと SE ヘッダーで囲まれた複数の子ドキュメント/サブドキュメントがあります。 EDI 受信パイプラインでは、このようなトランザクション セットから、複数の個別の HIPAA サブドキュメントを作成することがサポートされています。 これは、HIPAA 以外の EDI インターチェンジとは異なる点です。HIPAA 以外の EDI インターチェンジでは、1 つのトランザクション セットが単一のメッセージとして処理されます。  
  
## <a name="subdocument-splitting-schemas"></a>サブドキュメントによるスキーマの分割  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] は、ネイティブ スキーマを通じて以下の HIPAA ドキュメント タイプの分割をサポートします。  
  
-   HIPAA version 4010 ドキュメント: 登録 (834)、835 請求の支払い、および 837 クレームの 3 つのバリエーション  
  
-   HIPAA バージョン 5010 ドキュメント: 276/277 請求ステータス-要求と応答、登録 (834)、および 837 クレームの 3 つのバリエーション  
  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] では、この 3 種類のドキュメントのそれぞれに対して 2 種類のスキーマが用意されています。 それぞれの種類のドキュメントについて、分割をサポートするスキーマには、ファイル名に 'Multiple' というマークが付いています。 もう一方のスキーマでは、サブドキュメントの分割はサポートされていません。  
  
 シナリオによっては、分割スキーマと非分割スキーマの両方が必要になる場合があります。 これは、どちらかの種類のスキーマでカスタムのターゲット名前空間を使用することによりサポートされます。  
  
## <a name="how-subdocument-splitting-is-enabled"></a>サブドキュメントの分割を有効にする方法  
 HIPAA サブドキュメントの分割は、HIPAA スキーマ内の 3 つの注釈エントリによって有効になります。 最初の 2 つに設定する必要があります appinfo 注釈内のスキーマのエントリを **はい**:  
  
```  
subdocument_break = "yes" Split_Without_Sibling_Data = "Yes"  
```  
  
 もう 1 つは、HIPAA スキーマの該当するレコード レベルにある注釈エントリです。 このプロパティにも設定する必要があります **はい**します。  
  
```  
subdocument_creation_break = "yes"  
```  
  
 HIPAA スキーマ内でサブドキュメントの作成中断注釈が"yes"に設定され、受信バッチ処理オプション パーティ プロパティが「トランザクション セットとして分割されたインターチェンジ」に設定している場合にのみ、HIPAA インターチェンジをサブドキュメントに分割されます。 [受信バッチ処理オプション] パーティ プロパティが [インターチェンジの保存] に設定されている場合、EDI 逆アセンブラはインターチェンジをサブドキュメントに分割しません。 この場合、EDI 逆アセンブラは注釈を無視します。 この状況が発生しても、イベント ビューアには警告が表示されません。  
  
> [!NOTE]
>  サブドキュメントの作成を中断するための注釈は入れ子にできません。 サブドキュメントの注釈が適用されたループがスキーマ内にある場合、このループは、サブドキュメントの注釈が適用された別のループを含むことができません。  
  
## <a name="how-subdocuments-are-processed"></a>サブドキュメントの処理方法  
 サブドキュメントは、EDI 受信パイプライン内で EDI 逆アセンブラによって分割されます。 受信パイプラインは、受信インターチェンジを検証し、該当する受信確認を生成した後で、分割されたそれぞれのサブドキュメントをメッセージ ボックスにルーティングします。 各サブドキュメントは構造的にも構文的にも有効ですが、ビジネス レベルの概要、トランザクション セットの合計、およびトランザクション セット制御番号は同期していないことが予期されます。 送信パイプラインで、既存のセグメント カウントの値 (元のトランザクション セットから取得したもの) が格納されている各サブドキュメントの SE01 が、そのサブドキュメントに含まれているセグメントのカウントに上書きされます。 また、受信パイプラインでは、各サブドキュメント内のトランザクション セット制御番号がリセットされ、サブドキュメントでの制御番号の重複を防ぎます。 これによって、送信側の処理が失敗しなくなります。  
  
 サブドキュメントの分割中にトランザクション セットで EDI または拡張された検証が失敗した場合、そのトランザクション セットは中断されます。  
  
 サブドキュメントにサブスクライブしている送信ポートでは、メッセージ ボックスから各サブドキュメントを取得し、XML サブドキュメントをシリアル化して、バッチ処理 (有効になっている場合) と検証を行った後に送信します。 送信パイプラインで、セグメント データ要素 (SE01) のカウントが更新されます。  
  
## <a name="how-subdocuments-are-split"></a>サブドキュメントの分割方法  
 サブドキュメントの作成を中断するための注釈は、HIPAA スキーマ内の 1 つ以上の要素を含むループに対して一般的に適用されます。 スキーマ内で、中断ループの前後に記述されているその他の要素は、複数のサブドキュメントのそれぞれで複製されます。  
  
 次の表は、サブドキュメントの分割の例を示しています。 この例では、CC 要素のループに対して、サブドキュメントの作成を中断するための注釈が "yes" に設定されています。 この結果、トランザクション セットの CC 要素が個別のサブドキュメントに分割されますが、トランザクション セットの AA、BB、および DD の各要素はすべて、分割されたそれぞれのサブドキュメントに含まれます。  
  
|スキーマ (最小/最大出現数)|元のインスタンス|サブドキュメント 1|サブドキュメント 2|サブドキュメント番号 3|  
|---------------------------------------|-----------------------|---------------------|---------------------|---------------------|  
|ST (1,0)|ST|ST|ST|ST|  
|AA (1,1)|AA|AA|AA|AA|  
|BB ループ (1,n)<br /><br /> BB1 (1,n)<br /><br /> CC ループ (1,n) - subdocument_break = "yes"<br /><br /> CC1 (1,n)<br /><br /> CC2 (0,n)<br /><br /> BB2 (0,n)|BB1*1<br /><br /> CC1\*1<br /><br /> CC2\*1<br /><br /> BB2\*1<br /><br /> BB1\*2<br /><br /> CC1\*2<br /><br /> CC2\*2<br /><br /> BB1\*3<br /><br /> CC1\*3<br /><br /> CC2\*3|BB1*1<br /><br /> CC1\*1<br /><br /> CC2\*1<br /><br /> BB2\*1|BB1*2<br /><br /> CC1\*2<br /><br /> CC2\*2|BB1*3<br /><br /> CC1\*3<br /><br /> CC2\*3|  
|DD (0,n)|DD|DD|DD|DD|  
|SE|SE|SE|SE|SE|