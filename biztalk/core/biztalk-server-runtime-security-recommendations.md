---
title: BizTalk Server ランタイムのセキュリティに関する推奨事項 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- security, runtime
- runtime, security
- discretionary access control lists (DACLs)
- DACLs
- .NET Framework Code Access Security Mechanism
ms.assetid: 1933789d-b79a-47ad-8f70-6f1e99bc2be0
caps.latest.revision: 14
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: b1e452a7cf78f63ac128064620db3084e91946fe
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65357871"
---
# <a name="biztalk-server-runtime-security-recommendations"></a><span data-ttu-id="f6a7e-102">BizTalk Server ランタイムのセキュリティに関する推奨事項</span><span class="sxs-lookup"><span data-stu-id="f6a7e-102">BizTalk Server Runtime Security Recommendations</span></span>
<span data-ttu-id="f6a7e-103">メッセージの受信、送信、処理、および追跡を行うすべてのコンピューターに BizTalk Server ランタイム (エンジン) をインストールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-103">You must install the BizTalk Server runtime, or engine, on all the computers from which you want to receive, send, process, and track messages.</span></span> <span data-ttu-id="f6a7e-104">つまり、BizTalk ホスト インスタンス (処理サーバー) を作成するコンピューターにランタイム コンポーネントをインストールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-104">In other words, you must install the run time components on any computer where you create a BizTalk Host instance (processing servers).</span></span> <span data-ttu-id="f6a7e-105">BizTalk Server ランタイムをセキュリティで保護して環境に展開するには、次のガイドラインに従うことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-105">It is recommended you follow these guidelines for securing and deploying the BizTalk Server runtime in your environment.</span></span>  
  
- <span data-ttu-id="f6a7e-106">BizTalk Server ランタイム タスクを行う最小セキュリティのユーザー権利が付与されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-106">Ensure you have the Minimum Security User Rights to perform BizTalk runtime tasks.</span></span> <span data-ttu-id="f6a7e-107">最低限のセキュリティ ユーザー権限の詳細については、次を参照してください。[最小セキュリティ ユーザー権限](../core/minimum-security-user-rights.md)します。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-107">For more information about the Minimum Security User Rights, see [Minimum Security User Rights](../core/minimum-security-user-rights.md).</span></span>  
  
  > [!NOTE]
  >  <span data-ttu-id="f6a7e-108">BizTalk 構成は、タスクを行うための最小限のアクセス権限をアカウントに与えます。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-108">BizTalk Configuration gives the accounts the minimum permissions they need to perform their tasks.</span></span>  
  
- <span data-ttu-id="f6a7e-109">各ホスト インスタンスのサービス アカウントを使用して、ホスト インスタンスを実行するコンピューターのサービス権限としてログオンする必要があります。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-109">The service account for each host instance must have log on as service permissions on the computer where the host instance runs.</span></span>  
  
- <span data-ttu-id="f6a7e-110">ホストのサービス アカウントだけがホストに関連するメッセージ ボックス データにアクセスできます。また、これらのサービスだけがメッセージ ボックスに送信できます。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-110">Only the service account(s) for a host have access to MessageBox data related to a host and only these services can post to the MessageBox.</span></span> <span data-ttu-id="f6a7e-111">情報の漏えいの可能性を最小限に抑えるため、複数のホストで同じサービス アカウントを使用しないでください。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-111">To minimize the potential for information disclosure attacks, you should not use the same service account for more than one host.</span></span>  
  
- <span data-ttu-id="f6a7e-112">処理サーバー (追跡を行わないホスト) は、メッセージ ボックス データベース、管理データベース、およびマスター シークレット サーバーにのみ接続する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-112">Processing servers (hosts that do not host tracking) only need to connect to the MessageBox and Management databases, and the master secret server.</span></span> <span data-ttu-id="f6a7e-113">インターネット プロトコル セキュリティ (IPsec) を使用すると、処理サーバーのアクセスをこれらの 2 つのデータベースとマスター シークレット サーバーに制限できます。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-113">If you use Internet Protocol security (IPSec), you can restrict the access of the processing servers to these two databases and the master secret server.</span></span>  
  
- <span data-ttu-id="f6a7e-114">同じ BizTalk ホスト内で実行されるすべてのコンポーネントは、ホストと同じ信頼レベルを持ちます。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-114">All components running within the same BizTalk Host have the same level of trust as the host.</span></span> <span data-ttu-id="f6a7e-115">同じホストで実行する必要がある (同じ信頼レベルで共有する必要がある) コンポーネントを決めるのは、BizTalk 管理者の責任です。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-115">It is up to the BizTalk administrator to determine which components should run under the same host, and therefore, share the same level of trust.</span></span> <span data-ttu-id="f6a7e-116">BizTalk は、BizTalk 管理者がインストールしたアセンブリだけが BizTalk ホストで実行されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-116">BizTalk makes sure that only assemblies installed by BizTalk administrators run in a BizTalk Host.</span></span> <span data-ttu-id="f6a7e-117">BizTalk が使用するアセンブリに関する制限を追加する場合 (たとえば、特定のベンダーによって署名されたアセンブリだけを実行するように BizTalk を制限する場合やオーケストレーションに対する厳密な名前の署名を検証する場合)、[!INCLUDE[btsDotNetFramework](../includes/btsdotnetframework-md.md)] コード アクセス セキュリティ メカニズムを使用できます。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-117">If you want to create further restrictions as to what assemblies BizTalk uses, for example, if you want to restrict BizTalk only to run assemblies signed by a particular vendor or validate the strong name signature for an orchestration, you can use the [!INCLUDE[btsDotNetFramework](../includes/btsdotnetframework-md.md)] Code Access Security Mechanism.</span></span> <span data-ttu-id="f6a7e-118">Microsoft MSDN Web サイトの詳細については[ http://go.microsoft.com/fwlink/?LinkId=60947](http://go.microsoft.com/fwlink/?LinkId=60947)します。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-118">For more information about the Microsoft MSDN Web site at [http://go.microsoft.com/fwlink/?LinkId=60947](http://go.microsoft.com/fwlink/?LinkId=60947).</span></span>  
  
- <span data-ttu-id="f6a7e-119">メッセージを送信する場合の認証の細かさは、BizTalk ホスト レベルです。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-119">The authorization granularity for posting messages is at the BizTalk Host level.</span></span> <span data-ttu-id="f6a7e-120">つまり、同じ BizTalk ホスト内で実行されているオーケストレーションまたはアダプターが複数ある場合、ホストに送信されるメッセージを受信するオーケストレーションを特定の 1 つのオーケストレーションに制限することはできません。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-120">In other words, if you have multiple orchestrations or adapters running within the same BizTalk Host, you cannot restrict one specific orchestration to receive messages sent to the host.</span></span>  
  
- <span data-ttu-id="f6a7e-121">ホストにメッセージを受信する権限がない場合、保留キューにメッセージが配置されます。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-121">When a host is not authorized to receive a message, the host places the message in its suspended queue.</span></span> <span data-ttu-id="f6a7e-122">既定で、受信アダプターとオーケストレーションが同じホストで実行されている場合、オーケストレーションは、ホストの保留キューを読み込むことができます。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-122">By default, when receive adapters and orchestrations are running in the same host, the orchestration can read the suspended queue of the host.</span></span> <span data-ttu-id="f6a7e-123">認証失敗により BizTalk が保留したメッセージをオーケストレーションが取得する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-123">It is then possible for an orchestration to pick up a message that BizTalk suspended due to authorization failure.</span></span> <span data-ttu-id="f6a7e-124">このため、同じホストでオーケストレーションと受信アダプターを実行しないことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-124">Therefore, it is recommended you do not run orchestrations and receive adapters in the same host.</span></span>  
  
- <span data-ttu-id="f6a7e-125">ホスト インスタンスは、特定のコンピューターで実行される Windows サービスです。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-125">Host instances are Windows services running on a specific computer.</span></span> <span data-ttu-id="f6a7e-126">ホスト インスタンスを作成するには、BizTalk 管理者と先ホスト インスタンスを作成するように BizTalk ホスト インスタンスに対応する Windows サービスを作成するコンピューターの Windows 管理者の両方があります。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-126">In order to create a host instance, you must be both a BizTalk administrator and a Windows administrator on the computer where you want to create the host instance, as BizTalk creates a Windows service to correspond to the host instance.</span></span>  
  
- <span data-ttu-id="f6a7e-127">Microsoft [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] でアセンブリを生成すると、統合開発環境 (IDE) によって生成されるカスタム キーが使用されます。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-127">When Microsoft [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] generates an assembly, it uses a custom key generated by the Integrated Developer Environment (IDE).</span></span> <span data-ttu-id="f6a7e-128">特定のキーですべてのアセンブリの署名が必要な環境を使用している場合、キーを使用するためにすべての開発用コンピューターに IDE を構成するか、アセンブリの遅延署名を利用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-128">If your environment requires you to sign all assemblies with a specific key, you must either configure the IDE for all development computers to use that key or use delay signing of assemblies..</span></span>  
  
- <span data-ttu-id="f6a7e-129">受信パイプラインと送信パイプラインのすべてのコンポーネントは、メモリの使用量を抑えようとします。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-129">All the components in the receive and send pipelines try to keep the memory footprint low.</span></span> <span data-ttu-id="f6a7e-130">特定のしきい値よりもデータが大きい場合、これらのコンポーネントは、一時フォルダー (%TEMP%) のディスクにデータをストリーム出力します。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-130">When the data is larger than a particular threshold, these components stream data to disk in the temporary folder (%TEMP%).</span></span> <span data-ttu-id="f6a7e-131">サービス アカウントだけを使用してこれらのファイルを読み込むため、適切な随意アクセス制御リスト (DACL) がホスト インスタンス用のサービス アカウントの一時フォルダーに格納されていることを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-131">You must ensure the temporary folders for the service accounts for the host instances have proper discretionary access control lists (DACLs), so that only the service account can read these files.</span></span> <span data-ttu-id="f6a7e-132">また、大きなファイルに備えて予備の領域を一時フォルダーに確保する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f6a7e-132">You must also ensure the temporary folder have room to store potentially large files.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f6a7e-133">参照</span><span class="sxs-lookup"><span data-stu-id="f6a7e-133">See Also</span></span>  
 <span data-ttu-id="f6a7e-134">[BizTalk Server のセキュリティを管理します。](../core/managing-biztalk-server-security.md) </span><span class="sxs-lookup"><span data-stu-id="f6a7e-134">[Managing BizTalk Server Security](../core/managing-biztalk-server-security.md) </span></span>  
 <span data-ttu-id="f6a7e-135">[処理サーバーのポート](../core/ports-for-the-processing-servers.md) </span><span class="sxs-lookup"><span data-stu-id="f6a7e-135">[Ports for the Processing Servers](../core/ports-for-the-processing-servers.md) </span></span>  
 <span data-ttu-id="f6a7e-136">[BizTalk Server の展開のセキュリティに関する推奨事項](../core/security-recommendations-for-a-biztalk-server-deployment.md) </span><span class="sxs-lookup"><span data-stu-id="f6a7e-136">[Security Recommendations for a BizTalk Server Deployment](../core/security-recommendations-for-a-biztalk-server-deployment.md) </span></span>  
 [<span data-ttu-id="f6a7e-137">セキュリティの計画</span><span class="sxs-lookup"><span data-stu-id="f6a7e-137">Planning for Security</span></span>](../core/planning-for-security.md)