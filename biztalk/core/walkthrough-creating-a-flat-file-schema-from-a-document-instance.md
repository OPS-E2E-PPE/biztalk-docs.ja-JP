---
title: 'チュートリアル: ドキュメント インスタンスからフラット ファイル スキーマの作成 |Microsoft Docs'
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: a5e1453f-0380-4505-97a9-9d3526db0923
caps.latest.revision: 47
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: f7d14e3e6b1a01e06c7a5877e13c73455368b0e4
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65250318"
---
# <a name="walkthrough-creating-a-flat-file-schema-from-a-document-instance"></a>チュートリアル: ドキュメント インスタンスからフラット ファイル スキーマの作成
このチュートリアルでは、BizTalk フラット ファイル スキーマ ウィザードを使用してドキュメント インスタンスからフラット ファイル スキーマを作成する方法について説明します。ここでは注文書のサンプルを使用します。 BizTalk フラット ファイル スキーマ ウィザードの概要については、次を参照してください。 [BizTalk フラット ファイル スキーマ ウィザードを使用する方法](../core/how-to-use-biztalk-flat-file-schema-wizard.md)します。  

 ![サンプルの注文書](../core/media/flatfileschema-samplepurchaseorder.gif "FlatFileSchema_SamplePurchaseOrder")  

 注文書の各行は、復帰と改行 (CRLF) で終わります。この部分は緑色で表されます。 注文書は PO タグで始まります。このタグは赤色で表され、後に日付が続きます。 2 回繰り返される固定の位置指定フィールドには顧客情報が含まれます。このフィールドは紫色で表されます。 コメント フィールドの後に、複数のコンマ (,) で区切られたレコードとパイプ (&#124;) で区切られたデータ値を含む、ITEMS タグで始まる反復的フィールドは、青で表示します。  

## <a name="prerequisites"></a>前提条件  
 このチュートリアルを実行する前には、サーバー上に次のソフトウェアがインストールされ構成されていることを確認してください。  

- Microsoft [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]  

- Microsoft[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]で、 **Developer tools**インストール

  チュートリアルでは、ドキュメント インスタンスを準備するには、以下の内容をテキスト エディターにコピーし、テキスト ファイルとして保存します。 すべての行をコピーするには、フィードおよび改行を必ずします。  

```
PO1999-10-20
US        Alice Smith         123 Maple Street    Mill Valley    CA 90952
US        Robert Smith        8 Oak Avenue        Old Town       PA 95819
ITEMS,ITEM872-AA|Lawnmower|1|148.95|Confirm this is electric,ITEM926-AA|Baby Monitor|1|39.98|Confirm this is electric
```


## <a name="start-the-wizard"></a>ウィザードを開始する  

1. [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]、オープン、**ソリューション エクスプ ローラー**します。  

2. 新しいフラット ファイル スキーマを追加するには、プロジェクトを右クリックして**追加**します。 クリックして**新しい項目の**します。  

3. **新しい項目の追加**ウィンドウで、次の操作を行います。  

   1.  **カテゴリ**セクションで、**スキーマ ファイル**します。  

   2.  **テンプレート**セクションで、**フラット ファイル スキーマ ウィザード**します。  

   3.  **名前**フィールドに、入力**PurchaseOrder.xsd**新しいスキーマ。  

   4.  **[追加]** をクリックします。  

4. BizTalk フラット ファイル スキーマ ウィザードが開くと、[ようこそ] ページが表示されます。   
   今後ウィザードを実行している場合は、この画面をスキップするには、選択、**このはじめに ページを今後表示しない**ボックス。 **[次へ]** をクリックして次に進みます。  

## <a name="selecting-purchase-order-instance"></a>注文書インスタンスを選択します。  

-   **フラット ファイル スキーマ情報**画面で、インスタンスを選択して、次の情報を入力します。 完了したら、クリックして **[次へ]** を続行します。  

    -   **インスタンスのファイル:** をクリックして、**参照**フラット ファイル スキーマの生成元を指定するボタンをクリックします。 チュートリアルの前提条件」セクションで作成したテキスト ファイルを含むフォルダーを参照してください。ドキュメント インスタンスからフラット ファイル スキーマを作成します。  

    -   **レコード名:** 型**PO**スキーマのルート名になります。  

    -   **ターゲットの名前空間:** 型**http://Flat_File_Project.PurchaseOrder**スキーマのターゲット名前空間。  

    -   **コード ページ:** 選択**utf-8 (65001)** ドロップダウン リストから。  

    -   **位置のカウント (バイト単位)。** バイト単位で位置指定データ フィールドをカウントする場合は、このチェック ボックスをオンにします。 既定では、位置指定データ フィールドは文字数でカウントされます。 このチュートリアルをそのまま、**位置のカウント (バイト) 単位**チェック ボックスはオフです。  

## <a name="select-purchase-order-data"></a>注文書データを選択します。  

-   **ドキュメント データを選択**画面、フラット ファイルの内容が表示されます。 スキーマを作成するために必要なデータを選択し、クリックして**次**します。  

    > [!NOTE]
    >  キーを押してドキュメント インスタンス全体を使用する場合は、 **CTRL + A**すべてを選択します。  

    > [!NOTE]
    >  確認**長い行を折り返す**ウィザードにおいて編集ボックスにラップされたドキュメント全体のインスタンスのコンテンツを表示する場合します。  

    > [!NOTE]
    >  インターチェンジ インスタンスからスキーマを作成する場合は、個別のドキュメント構造を表す部分のみを選択します。  

## <a name="delimit-purchase-order-record"></a>注文書レコードを区切り  

-   ライン フィード (CRLF) で、注文の各行のキャリッジ リターンが終わると、選択**区切り記号**、順にクリックします**次**で**レコード書式を**画面。  

## <a name="specify-purchase-order-record-property"></a>購買注文レコードのプロパティを指定します。  

- **区切られたレコード**画面で、スキーマの最初のレベルを定義し、終えたらをクリックするには、次を入力します。**次**します。  

  - **子区切り記号:** 選択 **{CR} {LF}** します。  

    > [!NOTE]
    >  **子区切り記号**プロパティは、編集可能なドロップダウン リスト ボックスには、既定値のセットが含まれています。 **子区切り記号**文字、または 16 進数の値として指定することができます。 たとえば、  **\\{** または **{0x0d0a}** します。  

  - **文字をエスケープします。** エスケープ文字とは、特殊な意味を持つ文字の前に置くことによって、その意味を無効化させることのできる単一の文字のことです。 参照してください[エスケープ文字](../core/escape-characters.md)詳細についてはします。 このチュートリアルでは空白のままにします。  

    > [!NOTE]
    >  使用する場合**\\**、 **{、** と **}** の**子区切り記号**または**エスケープ文字**、バック スラッシュを使用する必要があります。 たとえば、  **\\ \\、** と **\\{** します。  

  - 確認**レコードにタグ識別子**ボックス**PO**で**タグ**します。 複数のレコード ファイルで**PO**個々 のレコードを識別するために使用されます。 **[次へ]** をクリックして次に進みます。  

    ![区切られたレコード 画面](../core/media/flatfileschemawizard-delimitedrecord1.gif "FlatFileSchemaWizard_DelimitedRecord1")  

## <a name="define-the-element-in-the-purchase-order-record"></a>注文書レコード内の要素を定義します。  

1.  ウィザードのここまでの作業で、注文書レコードの 4 つの要素を指定しました。次は、要素のプロパティを定義する必要があります。 最初の行で、次の操作を行います。  

    1.  型**日付**の**要素名**します。  

    2.  選択**フィールド要素**の**要素型**します。  

    3.  選択**日付**のドロップダウン リストから**データ型**します。  

2.  次の要素について手順 a ～ c を繰り返します。 完了したら、クリックして**次**します。  

    |要素名|[要素の種類]|データ型|  
    |------------------|------------------|---------------|  
    |**customer**|**繰り返しレコード**||  
    ||**無視します。**||  
    |**項目**|**レコード**||  

     ![子要素 画面](../core/media/flatfileschemawizard-childelements.gif "FlatFileSchemaWizard_ChildElements")  

    > [!NOTE]
    >  複数の行を選択し、変更することができます、**要素型**マウスと shift キーまたは CTRL キーを使用して単一の型にします。  

    > [!NOTE]
    >  クリックした後**次へ**上、**子要素** 画面で、をクリックしてできません**戻る**を再定義したり、子要素を変更することです。 子要素を再定義または変更するには、ウィザードを終了し、もう一度ウィザードを起動してフラット ファイルを定義する必要があります。  

3.  以上の手順を完了すると、次に示すようにスキーマの最初のレベルが生成されます。 ここでは 3 つの一意な要素が定義されています。この後で、注文書レコード内の要素の子レコードを定義します。 **[次へ]** をクリックします。  

     ![サンプル スキーマ 画面](../core/media/flatfileschemawizard-schema1.gif "FlatFileSchemaWizard_Schema1")  

## <a name="define-the-customer-record"></a>顧客レコードを定義します。  

1.  定義したため、**顧客**要素として、**繰り返しレコード**型と**項目**要素として、**レコード**BizTalk を入力します。フラット ファイル スキーマ ウィザードで引き続きさらにこれら 2 つの要素を定義します。 **スキーマ ビュー**画面で、**顧客**、順にクリックします**次へ**を続行します。  

2.  顧客レコードを操作するには、要素を表すデータを選択する必要があります。 このレコードは繰り返しレコードなので、任意の行を使用してレコードを定義できます。 顧客データの最初の行を選択し、クリックして**次**を続行します。  

3.  **レコード書式を**ページで、選択**相対位置**、順にクリックします**次**します。  

4.  このウィザードでは、フィールドの間隔を表示および計算するためのビジュアル ツールを利用できます。 **位置指定レコード** ページで、マウスの左ボタンを使用して、名前 フィールドの開始位置を表す位置マーカー 10 をクリックします。 次の位置マーカーを残りのデータ フィールドをクリックします。  

    |フィールド名|位置マーカー|  
    |----------------|---------------------|  
    |street|30|  
    |city|50|  
    |state|65|  
    |postalcode|68|  

     **[次へ]** をクリックして次に進みます。  

     ![位置指定レコード 画面](../core/media/flatfileschemawizard-positionalrecord.gif "FlatFileSchemaWizard_PositionalRecord")  

5.  **子要素** ページで、子要素のプロパティを指定します。 最初の行と種類を選択**国**として、**要素名**します。 他の列では既定値をそのまま使用します。 次の他のプロパティの値を入力、**要素名**:  

    |要素名|値|  
    |------------------|-----------|  
    |**customer_Child2**|**fullName**|  
    |**customer_Child3**|**street**|  
    |**customer_Child4**|**市区町村**|  
    |**customer_Child5**|**state**|  
    |**customer_Child6**|**postalcode**|  

     **[次へ]** をクリックして次に進みます。  

     ![子要素 画面](../core/media/flatfileschemawizard-childelements2.gif "FlatFileSchemaWizard_ChildElements2")  

6.  次に示すように、顧客レコードの子要素が作成されます。 をクリックして**次**品目レコードの子要素を定義します。  

     ![サンプル スキーマ 画面](../core/media/flatfileschemawizard-schema2.gif "FlatFileSchemaWizard_Schema2")  

#### <a name="define-the-items-record"></a>品目レコードを定義します。  

1. **スキーマ ビュー** ] ページで、[**項目**、順にクリックします**次**します。  

2. **ドキュメント データを選択**ページで、行全体が項目では、開始し、をクリックし、選択**次**その子要素を定義します。  

3. **レコード書式を** ページで **区切り記号**、順にクリックします**次**。  

4. 品目レコードでは、個々の品目の区切りにコンマを使用します。 そのため、上、**区切られたレコード**ページで、品目レコードを定義するには、次を入力します。 完了したら、クリックして**次**します。  

   -   選択 **、** から**子区切り記号**ドロップダウンの選択リスト。  

   -   ままに、**エスケープ文字**空白テキスト ボックス。  

   -   選択**レコードにタグ識別子**と種類**項目**で**タグ**します。  

        複数の items レコードで**項目**個々 のレコードを識別するために使用します。  

5. 値を使用して、**区切られたレコード** ページで、ウィザードは、2 つの子要素を識別します。 繰り返しレコードはそれらのいずれかであるため、最初の要素を選択し、入力**項目**要素名、および選択**繰り返しレコード**、ドロップ ダウン リストから**要素の型**. 残りの列の値は既定値のまま使用します。 2 番目の行を選択し、選択、**無視**から**要素型**一覧。 クリックすると**次**、品目レコードの次のレベルは、スキーマで作成されます。 続けて、注文書スキーマの最後の部分を定義します。  

6. 選択**項目**順にクリックします**次**を続行する、**スキーマ ビュー**ページ。  

7. **[ドキュメント データ** ] ページで選択 **ITEM872-AA&#124;文字です。芝刈り機&#124;1&#124;148.95&#124;文字です。これが電気確認**します。 **[次へ]** をクリックして次に進みます。  

8. **レコード書式** ページで、選択、 **区切り記号** 個々 の項目が、パイプ (&#124;) で区切られたオプションを指定します。  

9. **区切られたレコード**ページで、品目レコードを定義するには、次を入力します。 完了したら、クリックして**次**します。  

    -   選択 **&#124;** から、 **子区切り記号** ドロップダウン リストです。  

    -   ままに、**エスケープ文字**空白テキスト ボックス。  

10. **子要素** ページで、ウィザードが 5 つの子要素を識別します。 最初の行を選択し、入力**productCode**の**要素名**します。 残りの列では既定値をそのまま使用します。 残りの部分、**要素名のプロパティ**次を入力します。  

    |要素名|値|  
    |------------------|-----------|  
    |**item_Child2**|**description**|  
    |**item_Child3**|**数量**|  
    |**item_Child4**|**unitPrice**|  
    |**item_Child5**|**ノート**|  

     **[次へ]** をクリックして次に進みます。  

11. これで、注文書スキーマのすべてのノードを定義しました。 **スキーマ ビュー** ] ページで [**完了**します。  

12. これで、最終的な注文書スキーマを表示できます。 BizTalk スキーマ エディターでスキーマの定義を更新することもできます。 フラット ファイル プロパティの名前のテーブルとプロパティ テーブルを参照してください**スキーマのノード プロパティ**します。 このプロパティについて詳しく[!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)]します。

## <a name="summary"></a>まとめ  
 このチュートリアルでは、BizTalk フラット ファイル スキーマ ウィザードを使用して、ドキュメント インスタンスからフラット ファイル スキーマを作成する方法について学習しました。  

## <a name="next-steps"></a>次の手順  

### <a name="validate-po-instance"></a>PO インスタンスを検証します。  
 PurchaseOrder.xsd スキーマで適切に PO インスタンスが解析されることを確認するには、次の操作を行います。  

1.  ソリューション エクスプ ローラーで右クリックし、 **PurchaseOrder.xsd**選び**プロパティ**します。  

2.  **プロパティ ページ**、ことを確認します、**入力インスタンス ファイル名**フィールドは、チュートリアルの前提条件セクションで作成した PO インスタンスの場所を指定します。ドキュメント インスタンスからフラット ファイル スキーマを作成します。 クリックして**OK**ダイアログ ボックスを閉じます。  

3.  ソリューション エクスプ ローラーで右クリックして**PurchaseOrder.xsd**、し、**インスタンスの検証**です。 検証コンポーネントが開きます。  

4.  検証が完了すると、PurchaseOrder.xsd スキーマによる PO インスタンスの解析結果に基づいた XML 出力を確認するためのリンクが表示されます。 この XML 出力を表示するには、Ctrl キーを押しながらリンクをクリックします。  

### <a name="create-pipelines-for-the-schema"></a>スキーマのパイプラインを作成します。  
 ここで、BizTalk アプリケーションで使用するための、PurchaseOrder.xsd スキーマに基づく受信パイプラインまたは送信パイプラインを作成できます。  

 新しいパイプラインを作成するを参照してください。[新しいパイプラインを作成する方法](../core/how-to-create-a-new-pipeline.md)します。 フラット ファイル パイプライン コンポーネントを構成するを参照してください。[フラット ファイル アセンブラー パイプライン コンポーネントを構成する方法](../core/how-to-configure-the-flat-file-assembler-pipeline-component.md)と[フラット ファイル逆アセンブラー パイプライン コンポーネントを構成する方法](../core/how-to-configure-the-flat-file-disassembler-pipeline-component.md)します。  

## <a name="see-also"></a>参照  
 [BizTalk フラット ファイル スキーマ ウィザードを使用する方法](../core/how-to-use-biztalk-flat-file-schema-wizard.md)   
 [BizTalk フラット ファイル スキーマ ウィザードでのスキーマの作成](../core/creating-schemas-using-biztalk-flat-file-schema-wizard.md)