---
title: バックアップおよび BizTalk Server データベースを復元する |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- backing up [BAM]
- databases, backing up
- databases, restoring
- backing up, restoring
- backing up, databases
- restoring, BAM
- backing up, BAM
- backing up, backup jobs
- BAM, restoring
- restoring, databases
- restoring [BAM]
- BAM, backing up
ms.assetid: 82fc1af2-1389-4c79-80dc-f2df5656d201
caps.latest.revision: 30
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 1744d18f51df2020daf57eee7ad532a5eda148e5
ms.sourcegitcommit: d27732e569b0897361dfaebca8352aa97bb7efe1
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/10/2019
ms.locfileid: "65528865"
---
# <a name="backing-up-and-restoring-biztalk-server-databases"></a><span data-ttu-id="67766-102">バックアップおよび BizTalk Server データベースを復元します。</span><span class="sxs-lookup"><span data-stu-id="67766-102">Backing Up and Restoring BizTalk Server Databases</span></span>
<span data-ttu-id="67766-103">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] のバックアップ ジョブを使用すると、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 送信元システムのすべてのデータベース (ただし、ビジネス アクティビティ監視 (BAM) により使用されているデータベースは除く) をバックアップできます。</span><span class="sxs-lookup"><span data-stu-id="67766-103">You use the Backup [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] job to back up all of the databases in your [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] source system, except for some databases used by Business Activity Monitoring (BAM).</span></span> <span data-ttu-id="67766-104">送信元システムは、ライブ データが格納されたサーバーまたはサーバーのグループです。</span><span class="sxs-lookup"><span data-stu-id="67766-104">The source system is the server or group of servers that contain live data.</span></span> <span data-ttu-id="67766-105">BAM データベースはバックアップおよび復元の要件が異なるので、これらのデータベースについては別の方法を使用してバックアップおよび復元を行います。</span><span class="sxs-lookup"><span data-stu-id="67766-105">Because BAM databases have different backup and restore requirements, these databases are backed up and restored using other methods.</span></span>  

 <span data-ttu-id="67766-106">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] データベースのバックアップおよび復元は、次の手順で行います。</span><span class="sxs-lookup"><span data-stu-id="67766-106">Backing up the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases and restoring them involves the following steps:</span></span>  

1. <span data-ttu-id="67766-107">**BizTalk Server のバックアップ ジョブを構成します。**</span><span class="sxs-lookup"><span data-stu-id="67766-107">**Configuring the Backup BizTalk Server job**</span></span>  

    <span data-ttu-id="67766-108">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] データベースをバックアップするには、あらかじめ、送信元システムで [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] のバックアップ ジョブを構成しておく必要があります。バックアップが、後から送信先システムでデータベースを復元するときに使用できるフォルダーに自動的に書き込まれるように指定します。</span><span class="sxs-lookup"><span data-stu-id="67766-108">Before you can back up the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases, you must first configure the Backup [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] job on the source system, which directs backups to be automatically written to a folder where they can then be used to restore the databases on the destination system.</span></span> <span data-ttu-id="67766-109">送信先システムは、送信元システムによって生成されたデータベース バックアップを復元するときに使用されるサーバーまたはサーバーのグループです。</span><span class="sxs-lookup"><span data-stu-id="67766-109">The destination system is the server or group of servers that will be used to restore the database backups produced by the source system.</span></span> <span data-ttu-id="67766-110">この手順の詳細については、次を参照してください。 [Backup BizTalk Server ジョブを構成する方法](../core/how-to-configure-the-backup-biztalk-server-job.md)します。</span><span class="sxs-lookup"><span data-stu-id="67766-110">For more information about this step, see [How to Configure the Backup BizTalk Server Job](../core/how-to-configure-the-backup-biztalk-server-job.md).</span></span>  

2. <span data-ttu-id="67766-111">**ログ配布用に送信先システムを構成します。**</span><span class="sxs-lookup"><span data-stu-id="67766-111">**Configuring the destination system for log shipping**</span></span>  

    <span data-ttu-id="67766-112">送信先システムはログ配布用にも構成する必要があります。ログ配布は、システム障害時のダウンタイムを短縮することを目的とした、スタンバイ サーバーの機能です。</span><span class="sxs-lookup"><span data-stu-id="67766-112">You must also configure the destination system for log shipping, which provides standby server capabilities and reduces downtime in the event of a system failure.</span></span> <span data-ttu-id="67766-113">この手順の詳細については、次を参照してください。[ログ配布用に送信先システムを構成する方法](../core/how-to-configure-the-destination-system-for-log-shipping.md)します。</span><span class="sxs-lookup"><span data-stu-id="67766-113">For more information about this step, see [How to Configure the Destination System for Log Shipping](../core/how-to-configure-the-destination-system-for-log-shipping.md).</span></span>  

3. <span data-ttu-id="67766-114">**データベースを復元します。**</span><span class="sxs-lookup"><span data-stu-id="67766-114">**Restoring the databases**</span></span>  

    <span data-ttu-id="67766-115">ハードウェア障害が発生した場合は、送信先システムに送信されたバックアップおよびログを使用してデータベースを復元できます。</span><span class="sxs-lookup"><span data-stu-id="67766-115">When a hardware failure occurs, you can restore your databases by using the backups and logs sent to your destination system.</span></span> <span data-ttu-id="67766-116">この手順の詳細については、次を参照してください。 [、データベースを復元する方法](../core/how-to-restore-your-databases.md)します。</span><span class="sxs-lookup"><span data-stu-id="67766-116">For more information about this step, see [How to Restore Your Databases](../core/how-to-restore-your-databases.md).</span></span>  

## <a name="biztalk-server-databases"></a><span data-ttu-id="67766-117">BizTalk Server データベース</span><span class="sxs-lookup"><span data-stu-id="67766-117">BizTalk Server Databases</span></span>  
 <span data-ttu-id="67766-118">次の表で、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] によって使用されるデータベースについて説明し、データベースのバックアップに使用する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="67766-118">The following tables describe the databases used by [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and identify which methods are used to back up the databases.</span></span>  

### <a name="databases-backed-up-by-the-backup-biztalk-server-job"></a><span data-ttu-id="67766-119">BizTalk Server のバックアップ ジョブによるデータベースのバックアップ</span><span class="sxs-lookup"><span data-stu-id="67766-119">Databases Backed Up by the Backup BizTalk Server Job</span></span>  
 <span data-ttu-id="67766-120">次の表は、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] のバックアップ ジョブの一部としてバックアップおよび復元されるデータベースの一覧です。</span><span class="sxs-lookup"><span data-stu-id="67766-120">The following table lists the databases that are backed up and restored as a part of the Backup [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] job.</span></span> <span data-ttu-id="67766-121">カスタム データベースがバックアップされるように [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] のバックアップ ジョブを変更するには、adm_OtherBackupDatabases テーブルにデータベースを追加します。</span><span class="sxs-lookup"><span data-stu-id="67766-121">You can modify the Backup [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] job to back up custom databases by adding them to the adm_OtherBackupDatabases table.</span></span> <span data-ttu-id="67766-122">詳細については、次を参照してください。[カスタム データベースを戻す方法](../core/how-to-back-up-custom-databases.md)します。</span><span class="sxs-lookup"><span data-stu-id="67766-122">For more information, see [How to Back Up Custom Databases](../core/how-to-back-up-custom-databases.md).</span></span>  


|                    <span data-ttu-id="67766-123">[データベース]</span><span class="sxs-lookup"><span data-stu-id="67766-123">Database</span></span>                    | <span data-ttu-id="67766-124">既定のデータベース名</span><span class="sxs-lookup"><span data-stu-id="67766-124">Default database name</span></span> |                                                                                                                                       <span data-ttu-id="67766-125">説明</span><span class="sxs-lookup"><span data-stu-id="67766-125">Description</span></span>                                                                                                                                        |
|------------------------------------------------|-----------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|          <span data-ttu-id="67766-126">BAM プライマリ インポート データベース</span><span class="sxs-lookup"><span data-stu-id="67766-126">BAM Primary Import database</span></span>           |   <span data-ttu-id="67766-127">BAMPrimaryImport</span><span class="sxs-lookup"><span data-stu-id="67766-127">BAMPrimaryImport</span></span>    |                                                                                              <span data-ttu-id="67766-128">このデータベースには、ビジネス アクティビティ監視 (BAM) ツールによって未処理の追跡データが収集されます。</span><span class="sxs-lookup"><span data-stu-id="67766-128">This is the database where the Business Activity Monitoring (BAM) collects raw tracking data.</span></span>                                                                                               |
| <span data-ttu-id="67766-129">BAM Notification Services アプリケーション データベース</span><span class="sxs-lookup"><span data-stu-id="67766-129">BAM Notification Services Application database</span></span> | <span data-ttu-id="67766-130">BAMAlertsApplication</span><span class="sxs-lookup"><span data-stu-id="67766-130">BAMAlertsApplication</span></span>  | <span data-ttu-id="67766-131">このデータベースには、BAM 通知に関する警告情報が含まれます。</span><span class="sxs-lookup"><span data-stu-id="67766-131">This database contains alert information for BAM notifications.</span></span> <span data-ttu-id="67766-132">たとえば、BAM ポータルを使用して警告を作成すると、警告に関連する条件とイベントを指定するエントリに加え、警告に関するその他のサポート データ項目がデータベースに挿入されます。</span><span class="sxs-lookup"><span data-stu-id="67766-132">For example, when you create an alert using the BAM portal, entries are inserted in the database specifying the conditions and events to which the alert pertains, as well as other supporting data items for the alert.</span></span> |
|  <span data-ttu-id="67766-133">BAM Notification Services インスタンス データベース</span><span class="sxs-lookup"><span data-stu-id="67766-133">BAM Notification Services Instance database</span></span>   |    <span data-ttu-id="67766-134">BAMAlertsNSMain</span><span class="sxs-lookup"><span data-stu-id="67766-134">BAMAlertsNSMain</span></span>    |                                                                            <span data-ttu-id="67766-135">このデータベースには、BAM で監視しているシステムに Notification Services が接続する方法を指定するインスタンス情報が格納されます。</span><span class="sxs-lookup"><span data-stu-id="67766-135">This database contains instance information specifying how the notification services connect to the system that BAM is monitoring.</span></span>                                                                            |
|           <span data-ttu-id="67766-136">BizTalk 追跡データベース</span><span class="sxs-lookup"><span data-stu-id="67766-136">BizTalk Tracking database</span></span>            |     <span data-ttu-id="67766-137">BizTalkDTADb</span><span class="sxs-lookup"><span data-stu-id="67766-137">BizTalkDTADb</span></span>      |                                                              <span data-ttu-id="67766-138">このデータベースには、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 追跡エンジンで追跡した稼働状況の監視データが格納されます。</span><span class="sxs-lookup"><span data-stu-id="67766-138">This database stores health monitoring data tracked by the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] tracking engine.</span></span>                                                              |
|          <span data-ttu-id="67766-139">BizTalk 管理データベース</span><span class="sxs-lookup"><span data-stu-id="67766-139">BizTalk Management database</span></span>           |     <span data-ttu-id="67766-140">BizTalkMgmtDb</span><span class="sxs-lookup"><span data-stu-id="67766-140">BizTalkMgmtDb</span></span>     |                                                               <span data-ttu-id="67766-141">このデータベースには、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] のすべてのインスタンスのメタ情報が一元的に保存されます。</span><span class="sxs-lookup"><span data-stu-id="67766-141">This database is the central meta-information store for all instances of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>                                                               |
|          <span data-ttu-id="67766-142">BizTalk メッセージ ボックス データベース</span><span class="sxs-lookup"><span data-stu-id="67766-142">BizTalk MessageBox database</span></span>           |    <span data-ttu-id="67766-143">BizTalkMsgBoxDb</span><span class="sxs-lookup"><span data-stu-id="67766-143">BizTalkMsgBoxDb</span></span>    |                                             <span data-ttu-id="67766-144">このデータベースは、ルーティング、キュー処理、インスタンス管理、およびその他のさまざまなタスクを行うために [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] エンジンによって使用されます。</span><span class="sxs-lookup"><span data-stu-id="67766-144">This database is used by the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] engine for routing, queuing, instance management, and a variety of other tasks.</span></span>                                              |
|              <span data-ttu-id="67766-145">ルール エンジン データベース</span><span class="sxs-lookup"><span data-stu-id="67766-145">Rule Engine database</span></span>              |  <span data-ttu-id="67766-146">BizTalkRuleEngineDb</span><span class="sxs-lookup"><span data-stu-id="67766-146">BizTalkRuleEngineDb</span></span>  |                                     <span data-ttu-id="67766-147">このデータベースは以下の項目を格納します。</span><span class="sxs-lookup"><span data-stu-id="67766-147">This database is a repository for:</span></span><br /><br /> <span data-ttu-id="67766-148">-ポリシー、関連するルールのセットであります。</span><span class="sxs-lookup"><span data-stu-id="67766-148">-   Policies, which are sets of related rules.</span></span><br /><span data-ttu-id="67766-149">-ボキャブラリをルール内でデータの参照をドメイン固有のわかりやすい名前のコレクション。</span><span class="sxs-lookup"><span data-stu-id="67766-149">-   Vocabularies, which are collections of user-friendly, domain-specific names for data references in rules.</span></span>                                     |
|                  <span data-ttu-id="67766-150">SSO データベース</span><span class="sxs-lookup"><span data-stu-id="67766-150">SSO database</span></span>                  |         <span data-ttu-id="67766-151">SSODB</span><span class="sxs-lookup"><span data-stu-id="67766-151">SSODB</span></span>         |                                                                                       <span data-ttu-id="67766-152">このエンタープライズ シングル サインオンデータベースは、受信場所の構成情報を安全に格納します。</span><span class="sxs-lookup"><span data-stu-id="67766-152">This Enterprise Single Sign-On database securely stores the configuration information for receive locations.</span></span>                                                                                       |

### <a name="databases-backed-up-by-the-bam-backup-process"></a><span data-ttu-id="67766-153">BAS バックアップ プロセスによりバックアップされるデータベース</span><span class="sxs-lookup"><span data-stu-id="67766-153">Databases Backed Up by the BAM Backup Process</span></span>  
 <span data-ttu-id="67766-154">次の表に、データベースをバックアップおよび復元の手順を使用して[をバックアップおよび復元する BAM](../core/backing-up-and-restoring-bam.md):</span><span class="sxs-lookup"><span data-stu-id="67766-154">The following table lists the databases that are backed up and restored using the procedures in [Backing Up and Restoring BAM](../core/backing-up-and-restoring-bam.md):</span></span>  

|<span data-ttu-id="67766-155">[データベース]</span><span class="sxs-lookup"><span data-stu-id="67766-155">Database</span></span>|<span data-ttu-id="67766-156">既定のデータベース名</span><span class="sxs-lookup"><span data-stu-id="67766-156">Default database name</span></span>|<span data-ttu-id="67766-157">説明</span><span class="sxs-lookup"><span data-stu-id="67766-157">Description</span></span>|  
|--------------|---------------------------|-----------------|  
|<span data-ttu-id="67766-158">BAM スター スキーマ</span><span class="sxs-lookup"><span data-stu-id="67766-158">BAM Star Schema</span></span>|<span data-ttu-id="67766-159">BAMStarSchema</span><span class="sxs-lookup"><span data-stu-id="67766-159">BAMStarSchema</span></span>|<span data-ttu-id="67766-160">このデータベースには、段階テーブル、単位テーブル、およびディメンション テーブルが含まれます。</span><span class="sxs-lookup"><span data-stu-id="67766-160">This database contains the staging table, and the measure and dimension tables.</span></span>|  
|<span data-ttu-id="67766-161">BAM 分析</span><span class="sxs-lookup"><span data-stu-id="67766-161">BAM Analysis</span></span>|<span data-ttu-id="67766-162">BAMAnalysis</span><span class="sxs-lookup"><span data-stu-id="67766-162">BAMAnalysis</span></span>|<span data-ttu-id="67766-163">このデータベースには、オンライン分析用およびオフライン分析用の BAM OLAP キューブが含まれています。</span><span class="sxs-lookup"><span data-stu-id="67766-163">This database contains BAM OLAP cubes for both online and offline analysis.</span></span>|  
|<span data-ttu-id="67766-164">BAM アーカイブ</span><span class="sxs-lookup"><span data-stu-id="67766-164">BAM Archive</span></span>|<span data-ttu-id="67766-165">BAMArchive</span><span class="sxs-lookup"><span data-stu-id="67766-165">BAMArchive</span></span>|<span data-ttu-id="67766-166">このデータベースは、古いビジネス アクティビティ データをアーカイブします。</span><span class="sxs-lookup"><span data-stu-id="67766-166">This database archives old business activity data.</span></span> <span data-ttu-id="67766-167">BAM プライマリ インポート データベースにおけるビジネス アクティビティ データの蓄積を最小限に抑える BAM アーカイブ データベースを作成します。</span><span class="sxs-lookup"><span data-stu-id="67766-167">Create a BAM Archive database to minimize the accumulation of business activity data in the BAM Primary Import database.</span></span>|  
|<span data-ttu-id="67766-168">Tracking Analysis Server</span><span class="sxs-lookup"><span data-stu-id="67766-168">Tracking Analysis Server</span></span>|<span data-ttu-id="67766-169">BizTalkAnalysisDb</span><span class="sxs-lookup"><span data-stu-id="67766-169">BizTalkAnalysisDb</span></span>|<span data-ttu-id="67766-170">このデータベースには、稼動状況の監視のオンライン分析処理 (OLAP) キューブが格納されます。</span><span class="sxs-lookup"><span data-stu-id="67766-170">This database stores health monitoring online analytical processing (OLAP) cubes.</span></span>|  

## <a name="in-this-section"></a><span data-ttu-id="67766-171">このセクションの内容</span><span class="sxs-lookup"><span data-stu-id="67766-171">In This Section</span></span>  

-   [<span data-ttu-id="67766-172">BizTalk Server のバックアップ ジョブを構成する方法</span><span class="sxs-lookup"><span data-stu-id="67766-172">How to Configure the Backup BizTalk Server Job</span></span>](../core/how-to-configure-the-backup-biztalk-server-job.md)  

-   [<span data-ttu-id="67766-173">ログ配布用に送信先システムを構成する方法</span><span class="sxs-lookup"><span data-stu-id="67766-173">How to Configure the Destination System for Log Shipping</span></span>](../core/how-to-configure-the-destination-system-for-log-shipping.md)  

-   [<span data-ttu-id="67766-174">データベースを復元する方法</span><span class="sxs-lookup"><span data-stu-id="67766-174">How to Restore Your Databases</span></span>](../core/how-to-restore-your-databases.md)  

-   [<span data-ttu-id="67766-175">バックアップおよび SQL エージェント ジョブを復元する方法</span><span class="sxs-lookup"><span data-stu-id="67766-175">How to Back Up and Restore SQL Agent Jobs</span></span>](../core/how-to-back-up-and-restore-sql-agent-jobs.md)  

-   [<span data-ttu-id="67766-176">バックアップおよび SQL Server ログインを復元する方法</span><span class="sxs-lookup"><span data-stu-id="67766-176">How to Back Up and Restore SQL Server Logins</span></span>](../core/how-to-back-up-and-restore-sql-server-logins.md)