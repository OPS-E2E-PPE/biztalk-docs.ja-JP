---
title: BizTalk Server メッセージ |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- messages, properties
- messages, about messages
ms.assetid: 6048c191-b495-4fdc-b547-e3e322340a49
caps.latest.revision: 17
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 012bb1f9602b6afa02ab609d8ff2e1b967117bce
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65298877"
---
# <a name="the-biztalk-server-message"></a><span data-ttu-id="0f5bd-102">BizTalk Server メッセージ</span><span class="sxs-lookup"><span data-stu-id="0f5bd-102">The BizTalk Server Message</span></span>
[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="0f5bd-103">基本的には、メッセージの処理エンジンです。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-103">is, at its core, a message-handling engine.</span></span> <span data-ttu-id="0f5bd-104">詳細を理解する[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]メッセージとそれらの表示、保存、および BizTalk Server で処理を理解することが重要です。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-104">To understand the details of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], it is important to understand messages and how they are represented, stored, and processed by BizTalk Server.</span></span> <span data-ttu-id="0f5bd-105">メッセージを使用した BizTalk Server のしくみの詳細については、メッセージの理解を獲得した後に理解しやすいになります。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-105">The details of how BizTalk Server works with messages become easier to understand after you have gained an understanding of what a message is.</span></span>  
  
 <span data-ttu-id="0f5bd-106">BizTalk Server 内の各メッセージを使用して、マルチパート メッセージに見なされ、0 個以上の部分構成されます。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-106">Each message in BizTalk Server is considered a multi-part message and is made up of zero or more parts.</span></span> <span data-ttu-id="0f5bd-107">1 つまたは複数の部分を各メッセージがボディ部として認識される部分のいずれかです。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-107">Each message with one or more parts has one of these parts identified as the body part.</span></span> <span data-ttu-id="0f5bd-108">XML ドキュメント、フラット ファイル、シリアル化された .NET クラス、またはその他のバイナリ ストリームのデータを表すデータのバイナリ データの各部分で構成されます。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-108">Each part consists of a binary chunk of data which can represent an XML document, a flat file, a serialized .NET class, or other binary stream of data.</span></span> <span data-ttu-id="0f5bd-109">ルーティングに使用できるメッセージの種類を識別するために、メッセージのボディ部を使用するとします。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-109">You use the body part of the message to identify the type of the message that can be used for routing.</span></span>  
  
 <span data-ttu-id="0f5bd-110">すべてのメッセージは不変である非常に重要な概念を理解するは[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-110">A very important concept to understand is that all messages are immutable in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="0f5bd-111">これは、メッセージの構築後に変更できないことを意味します。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-111">This means that after a message is constructed, it cannot be changed.</span></span> <span data-ttu-id="0f5bd-112">メッセージは、メッセージ ボックス データベースに格納される構築されたと見なされます。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-112">A message is considered constructed after it is placed into the MessageBox database.</span></span> <span data-ttu-id="0f5bd-113">メッセージへの変更は、新しいメッセージが作成され、その時点から使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-113">Any changes to the message require that a new message is created and used from that point forward.</span></span> <span data-ttu-id="0f5bd-114">これは、コンパイル ルールを強制すると、それを使用する前に、メッセージの構築に関する厳密なガイドラインに従うし、メッセージの構築ブロックの外部で変更できないようにする、オーケストレーション デザイナーで特に明白です。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-114">This is especially clear in the Orchestration Designer, where compilation rules force you to follow strict guidelines about constructing a message before using it, and do not allow the message to be altered outside of its construction block.</span></span> <span data-ttu-id="0f5bd-115">メッセージを変更する必要がある場合、同じ種類のメッセージを作成する新しい構築ブロックを作成、新しいメッセージに、元のメッセージをコピー、構築ブロックを終了する前に、新しいメッセージに変更を加えるし、する必要があります。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-115">If you need to change the message, you must create a new construction block that creates a message of the same type, copy the original message to the new message, and then make any changes to the new message before leaving the construction block.</span></span>  
  
## <a name="message-properties"></a><span data-ttu-id="0f5bd-116">メッセージのプロパティ</span><span class="sxs-lookup"><span data-stu-id="0f5bd-116">Message Properties</span></span>  
 <span data-ttu-id="0f5bd-117">システム内の各メッセージだけでなく、メッセージを構成する部品と呼ばれるものに付随するプロパティのセットがあります、*メッセージ コンテキスト*します。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-117">In addition to the parts that make up a message, each message in the system has a set of properties that go along with it in what is known as the *message context*.</span></span> <span data-ttu-id="0f5bd-118">これらのプロパティから抽出された、またはメッセージ自体に関連する値を指定できます。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-118">These properties can be values extracted from or related to the message itself.</span></span> <span data-ttu-id="0f5bd-119">たとえば、アダプターは、位置、メッセージを受信した、場所など、メッセージの受信に関連するコンテキストとメッセージを受信するために使用されたアダプターの種類にプロパティを配置します。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-119">For example, adapters put properties into the context related to the receiving of a message, such as the location at which the message was received, and the type of adapter that was used to receive the message.</span></span> <span data-ttu-id="0f5bd-120">プロパティは、コンテキストに書き込むかできますまたは*昇格*コンテキストにします。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-120">Properties can either be written to the context, or *promoted* into the context.</span></span> <span data-ttu-id="0f5bd-121">これら 2 つのオプションの違いは、昇格させたプロパティをメッセージのルーティング、書き込まれたプロパティの条件として使用できることです。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-121">The difference between these two options is that promoted properties can be used as criteria in message routing while written properties cannot.</span></span>  
  
 <span data-ttu-id="0f5bd-122">この概念の書き込みまたは昇格の値をコンテキストに関連していますとは異なりますが、BizTalk エディターでプロパティを昇格します。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-122">This concept of writing or promoting values to the context is related to, but not the same as, promoting properties in the BizTalk Editor.</span></span> <span data-ttu-id="0f5bd-123">BizTalk エディターで、要素または属性をスキーマにフラグを設定できます昇格させたプロパティまたは識別フィールドとして。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-123">In the BizTalk Editor, an element or attribute in a schema can be flagged as a promoted property or a distinguished field.</span></span> <span data-ttu-id="0f5bd-124">メッセージ スキーマ内の PropertyField 注釈でマークされている項目は、コンテキストで昇格させたプロパティを設定するパイプラインの逆アセンブラーになります。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-124">Items that are marked with PropertyField annotations in your message schema will lead to the pipeline disassembler putting a Promoted property in the context.</span></span> <span data-ttu-id="0f5bd-125">メッセージ スキーマ内の DistinguishedField 注釈でマークされている項目をコンテキストに書き込まれたプロパティを設定するパイプラインの逆アセンブラーになります。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-125">Items that are marked with DistinguishedField annotations in your message schema will lead to the pipeline disassembler putting a Written property into the context.</span></span>  
  
 <span data-ttu-id="0f5bd-126">昇格させたプロパティのデザインのデザインの使用を開始*メッセージの相関関係*: 既に実行中のオーケストレーション インスタンスに受信されるメッセージに関連する機能。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-126">The design for promoted properties started with the design of *message correlation*: the ability to relate a message being received to an already running orchestration instance.</span></span> <span data-ttu-id="0f5bd-127">関連付けを行うプロパティまたはオーケストレーションでメッセージの間のリンクを提供するプロパティのセットを定義する必要があります。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-127">For correlation, there is a need to define a property or set of properties that provide the link between messages in the orchestration.</span></span> <span data-ttu-id="0f5bd-128">たとえば、購入のプロセスで、PurchaseOrderID に基づいてメッセージを関連付ける必要があります。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-128">For example, in a purchasing process, you need to correlate messages based on the PurchaseOrderID.</span></span> <span data-ttu-id="0f5bd-129">ただし、多くのビジネス ケースの特定のフィールドまたはメッセージ内の属性の名前が一致しません。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-129">However, in many business cases, the name of the particular field or attribute in the messages may not match.</span></span> <span data-ttu-id="0f5bd-130">注文書スキーマには、請求書のスキーマに OrderID という要素を持つ可能性があります、POId をという名前の要素があります。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-130">A purchase order schema might have an element named POId, while the companion invoice schema may have an element named OrderID.</span></span> <span data-ttu-id="0f5bd-131">このような状況で PurchaseOrderID などの名前付きのプロパティでメッセージを関連付けるために、開発者は、値のソースから使用するプロパティの名前を抽象化できる必要があります。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-131">To correlate messages on a named property such as PurchaseOrderID in this situation, the developer must be able to abstract the name of the property to be correlated on from the source of the value.</span></span> <span data-ttu-id="0f5bd-132">プロパティ スキーマでは、この抽象化をサポートします。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-132">Property schemas support this abstraction.</span></span>  
  
 <span data-ttu-id="0f5bd-133">A*プロパティ スキーマ*を共通の場所で昇格させたプロパティを定義し、他のスキーマで参照できます。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-133">A *property schema* enables you to define promoted properties in a common location and have them referenced by other schemas.</span></span> <span data-ttu-id="0f5bd-134">他のスキーマのようにプロパティ スキーマが、名前空間が、他のスキーマとは異なりできますのみが定義要素 (つまり、いないレコードまたは属性)。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-134">Like other schemas, a property schema has a namespace, but unlike other schemas, it can only have defined elements (that is, not records or attributes).</span></span> <span data-ttu-id="0f5bd-135">プロパティ スキーマで定義されている各要素は、名前と型を持ちます。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-135">Each element that is defined in the property schema has a name and type.</span></span> <span data-ttu-id="0f5bd-136">プロパティ スキーマは、1 つ以上のスキーマが参照する必要があり、プロパティ スキーマの情報は、実行時にコンポーネントに使用できる必要があるため、プロパティ スキーマは他のすべてのスキーマのように BizTalk Server に展開を取得する必要があります。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-136">Because the property schema may need to be referenced by more than one schema, and because the information in the property schema must be available to components at runtime, the property schema must get deployed to BizTalk Server like all other schemas.</span></span> <span data-ttu-id="0f5bd-137">通常のスキーマ展開の手順だけでなく、昇格させたプロパティに関する情報が抽出され、管理データベースの bts_documentSpec テーブルに格納されています。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-137">In addition to the normal schema deployment steps, information about the promoted properties is extracted and stored in the bts_documentSpec table in the Management database.</span></span>  
  
 <span data-ttu-id="0f5bd-138">プロパティ スキーマが作成されたら、要素と属性を同じ入力 (たとえばします。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-138">After a property schema has been created, elements and attributes with the same type (for example.</span></span> <span data-ttu-id="0f5bd-139">整数型) は、プロパティ スキーマの名前付きプロパティの 1 つとして昇格できます。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-139">integer) can be promoted as one of the named properties in the property schema.</span></span>  
  
 <span data-ttu-id="0f5bd-140">**上記の例を完了するには、開発者は、関連付けに必要な共有のプロパティを定義する次の手順を実行します。**</span><span class="sxs-lookup"><span data-stu-id="0f5bd-140">**To complete the example case from above, a developer would perform the following steps to define the shared property needed for correlation.**</span></span>  
  
1. <span data-ttu-id="0f5bd-141">プロパティ スキーマを作成し、PurchaseOrderId という xs:int 型の要素を定義します。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-141">Create a property schema and define an element of type xs:int named PurchaseOrderId.</span></span>  
  
2. <span data-ttu-id="0f5bd-142">PurchaseOrder スキーマを作成し、要素または POId という xs:int 型の属性を追加します。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-142">Create a PurchaseOrder schema and add an element or attribute of type xs:int named POId.</span></span>  
  
3. <span data-ttu-id="0f5bd-143">BizTalk エディターでの昇格の表示コマンドを使用して、開発者は昇格させたプロパティの一覧に POId フィールドを追加して、PurchaseOrderId を選択して、プロパティ スキーマで定義された PurchaseOrderId プロパティとして昇格することを示します一覧から名前付きプロパティ。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-143">Using the show promotions command in the BizTalk Editor, the developer adds the POId field to the list of promoted properties and indicates that it should be promoted as the PurchaseOrderId property defined in the property schema by selecting the PurchaseOrderId named property from the list.</span></span>  
  
4. <span data-ttu-id="0f5bd-144">請求書スキーマを作成し、要素または OrderId という xs:int 型の属性を追加します。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-144">Create an Invoice schema and add an element or attribute of type xs:int named OrderId.</span></span>  
  
5. <span data-ttu-id="0f5bd-145">BizTalk エディターでの昇格の表示コマンドを使用して、開発者は昇格させたプロパティの一覧に OrderId フィールドを追加し、PurchaseOrderId を選択して、プロパティ スキーマで定義された PurchaseOrderId プロパティとして昇格することを示します一覧から名前付きプロパティ。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-145">Using the show promotions command in the BizTalk Editor, the developer adds the OrderId field to the list of promoted properties and indicates that it should be promoted as the PurchaseOrderId property defined in the property schema by selecting the PurchaseOrderId named property from the list.</span></span>  
  
   <span data-ttu-id="0f5bd-146">これでこの定義は、ドキュメント スキーマが存在する、パイプライン コンポーネント正しく昇格できます。 OrderId と POId 名前付きプロパティ PurchaseOrderID としてルーティングと相関関係のために使用できるようにします。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-146">Now that this definition exists in the document schemas, pipeline components can properly promote OrderId and POId as the named property PurchaseOrderID so that it can be used for routing and correlation.</span></span> <span data-ttu-id="0f5bd-147">この昇格プロセスの詳細については、このドキュメントで「メッセージの処理」トピックを参照してください。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-147">For more details on this promotion process, see the topic "Message Processing" in this document.</span></span>  
  
   <span data-ttu-id="0f5bd-148">昇格させたプロパティの利点の 1 つは、昇格させた要素の値がメッセージのコンテキストで使用できることです。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-148">One of the benefits of promoted properties is that the value of the element that is promoted is available in the context of the message.</span></span> <span data-ttu-id="0f5bd-149">つまり、値を取得するがないこと、高価なように、メッセージをメッセージの XPath ステートメントを実行するメモリに読み込む必要はありません。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-149">This means that retrieving that value is inexpensive, as it does not require loading the message into memory to execute an XPath statement on the message.</span></span> <span data-ttu-id="0f5bd-150">代わりに、単純なプロパティ バッグは、値を取得するキーと共に使用できます。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-150">Instead, a simple property bag can be used along with a key to get the value.</span></span> <span data-ttu-id="0f5bd-151">この種類の動作はメッセージのルーティング以外の状況に適して、識別フィールドを作成する理由です。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-151">This type of behavior is desirable in situations other than message routing and is the reason for creating distinguished fields.</span></span> <span data-ttu-id="0f5bd-152">昇格させたプロパティがメッセージ コンテキストに昇格させると、中に、識別フィールドは、メッセージ コンテキストに書き込まれます。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-152">While promoted properties are promoted into the message context, distinguished fields are written into the message context.</span></span> <span data-ttu-id="0f5bd-153">昇格させたプロパティとは異なりは識別フィールドのプロパティ スキーマです。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-153">Unlike promoted properties however, there is no property schema for distinguished fields.</span></span> <span data-ttu-id="0f5bd-154">これは、ため、識別フィールドのルーティングに使用することはできませんを使用できるように、送信ポートまたはオーケストレーションのフィルター条件の受信図形です。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-154">This is why distinguished fields cannot be used for routing and are therefore not available as filter criteria in a send port or orchestration receive shape.</span></span> <span data-ttu-id="0f5bd-155">ただしフィールドを識別、メッセージをメモリに読み込むし、値を抽出する代わりに、メッセージ コンテキストから値を書き込んだり読み取ったりするオーケストレーションで使用できます。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-155">Distinguished fields can, however, be used in orchestrations to read or write values from the message context instead of having to load the message into memory and extract the value.</span></span>  
  
   <span data-ttu-id="0f5bd-156">昇格させるか、メッセージ コンテキストにプロパティを書き込む、だけでなくメッセージの述語はまた、コンテキストに追加します。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-156">In addition to promoting or writing properties into the message context, message predicates can also be added to the context.</span></span> <span data-ttu-id="0f5bd-157">メッセージの述語は、BizTalk Server のセキュリティ対策として使用しにルーティングされるメッセージである任意のホストに対して指定された値に一致する必要がありますメッセージに関するコンテキスト情報を提供します。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-157">Message predicates are used as a security measure in BizTalk Server and provide contextual information about the message, which must match values specified for any host that the message is to be routed to.</span></span> <span data-ttu-id="0f5bd-158">このセキュリティ対策を受信して、特定のメッセージを処理できる唯一のホストに特定のホストを許可するように、BizTalk Server 環境を構成することができます。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-158">This security measure allows you to configure your BizTalk Server environment in such a way as to allow specific hosts to be the only hosts that can receive and process particular messages.</span></span> <span data-ttu-id="0f5bd-159">たとえば、BizTalk Server 管理コンソールで、メッセージのデコードおよび暗号化解除に使用する証明書の拇印を持つホストを構成できます。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-159">As an example, in the BizTalk Server Administration Console, a host can be configured with the thumbprint of a certificate to use for message decoding and decryption.</span></span> <span data-ttu-id="0f5bd-160">このプロパティを構成すると、メッセージ ボックス データベースでは、そのホストのアプリケーション プロパティが作成されます。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-160">Configuring this property creates an application property for that host in the MessageBox.</span></span> <span data-ttu-id="0f5bd-161">受信したメッセージをセキュリティで保護し、この拇印を使用して復号化されたは、ルーティングのみのホストに拇印が構成されているのです。</span><span class="sxs-lookup"><span data-stu-id="0f5bd-161">Secure messages that are received and decrypted using this thumbprint are then only routed to the hosts with the thumbprint configured.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0f5bd-162">参照</span><span class="sxs-lookup"><span data-stu-id="0f5bd-162">See Also</span></span>  
 [<span data-ttu-id="0f5bd-163">ランタイム アーキテクチャ</span><span class="sxs-lookup"><span data-stu-id="0f5bd-163">Runtime Architecture</span></span>](../core/runtime-architecture.md)