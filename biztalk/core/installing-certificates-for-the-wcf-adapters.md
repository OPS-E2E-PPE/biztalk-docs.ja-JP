---
title: WCF アダプターの証明書のインストール |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- tools, Certificates Management Console
- certificates, installing [WCF adapters]
- certificates, Certificates Management Console
- certificates, WCF adapters
- WCF adapters, send locations
- receive locations, WCF adapters
- send locations, WCF adapters
- WCF adapters, receive locations
- WCF adapters, certificates
ms.assetid: 04dc065f-a6e8-4359-8696-2a3de24d531d
caps.latest.revision: 13
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: f92f27f71f5989edaf847d3c0d340368553c7afa
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/27/2018
ms.locfileid: "37015187"
---
# <a name="installing-certificates-for-the-wcf-adapters"></a>WCF アダプタの証明書のインストール
WCF アダプタでは、メッセージの暗号化と復号化、メッセージの署名し検証 (否認)、およびクライアント認証のために、公開キー基盤 (PKI) デジタル証明書を使用できます。 このトピックでは、証明書を使用するさまざまなシナリオ、および WCF アダプタでデジタル証明書を使用する場合の構成オプションのガイドラインを示します。  

## <a name="certificate-usage-scenarios-for-the-wcf-receive-locations"></a>WCF 受信場所での証明書の使用シナリオ  
 次の表は、証明書を WCF 受信場所にインストールする方法を示しています。  


|                                 証明書の使用法                                 |                             ユーザー コンテキスト                              |                                                                                                                                                                                     証明書ストアの場所                                                                                                                                                                                      |                      証明書の種類                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                証明書サーバーをインストールするタイミング                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|-----------------------------------------------------------------------------------|-----------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 受信場所のセキュリティ設定に応じた暗号化の解読と署名 | 受信ハンドラーに関連付けられているホスト インスタンスが使用するアカウント |                                                          実行している各コンピューターにログオン[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]各ホスト インスタンス サービス アカウントとして、受信場所をホストし、サービス証明書をインポートするは、**現在のユーザー \ 個人用 (マイ)** を格納します。                                                           |                  独自のプライベート証明書                   | 値を指定、**サービス証明書の拇印**次の構成でのプロパティ。<br /><br /> -**セキュリティ モード**プロパティの Wcf-basichttp 受信場所に設定されている**メッセージ**します。<br />-**クライアント資格情報の種類のトランスポート**プロパティの Wcf-basichttp 受信場所に設定されている**証明書**の**TransportCredentialOnly**セキュリティ モード。<br />-**クライアント資格情報の種類のメッセージ**プロパティの Wcf-wshttp 受信場所に設定されている**None**、**証明書**、または**UserName****メッセージ**セキュリティ モード。<br />-**クライアント資格情報の種類のトランスポート**プロパティの Wcf-nettcp 受信場所に設定されている**None**または**証明書**の**トランスポート**セキュリティ モード。<br />-**クライアント資格情報の種類のメッセージ**プロパティの Wcf-nettcp 受信場所に設定されている**None**、 **UserName**、または**証明書****メッセージ**セキュリティ モード。<br />-**クライアント資格情報の種類のメッセージ**プロパティの Wcf-nettcp 受信場所に設定されている**Windows**、 **UserName**、または**証明書**の**TransportWithMessageCredential**セキュリティ モード。<br />-**セキュリティ モード**Wcf-netmsmq のプロパティに設定されて**メッセージ**または**両方**します。 |
|                               クライアントの認証                               |                                  なし                                  | 受信場所をホストする [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] を実行している各コンピュータに管理者としてログオンし、クライアントをこの受信場所に対して認証できるように、クライアントの X.509 証明書の CA 証明書チェーンをコンピュータの信頼されたルート証明機関の証明書ストアにインポートします。 | クライアントの X.509 証明書の CA 証明書チェーン |                                                                                                                                                                                                               次に示す構成で、クライアント証明書の CA 証明書チェーンを信頼されたルート証明機関の証明書ストアにインストールします。<br /><br /> -**クライアント資格情報の種類のメッセージ**または**クライアント資格情報の種類のトランスポート**プロパティの Wcf-basichttp 受信場所に設定されている**証明書**します。<br />-**クライアント資格情報の種類のメッセージ**または**クライアント資格情報の種類のトランスポート**プロパティの Wcf-wshttp 受信場所に設定されている**証明書**します。<br />-**クライアント資格情報の種類のメッセージ**または**クライアント資格情報の種類のトランスポート**プロパティの Wcf-nettcp 受信場所に設定されている**証明書**します。<br />-**クライアント資格情報の種類のメッセージ**または**MSMQ 認証モード**プロパティの Wcf-netmsmq 受信場所に設定されている**証明書**します。                                                                                                                                                                                                                |

> [!NOTE]
>  標準の WCF 受信アダプターを使用しているため、 [ChainTrust](http://go.microsoft.com/fwlink/?LinkId=88960)クライアント証明書検証モードのクライアントの X.509 証明書の CA 証明書チェーンをインストールする必要があります。 この既定の動作を Wcf-custom または Wcf-customisolated アダプター cange に使用することができます。  

> [!NOTE]
>  分離 WCF 受信アダプタの場合は、分離ホスト インスタンスとそれに対応するアプリケーション プールのユーザー アカウントを一致させる必要があります。 BizTalk 分離ホストの詳細については、次を参照してください。 [Web サービスを有効にする](../core/enabling-web-services.md)します。  

> [!NOTE]
>  Wcf-custom および Wcf-customisolated 受信場所、ユーザー コンテキスト、証明書ストアの場所、および証明書をインストールする証明書の種類によって異なります、 **serviceCredentials**と**clientCredentials**動作要素を設定します。  

> [!NOTE]
>  受信場所、証明書の要素を使用している場合、**エンドポイント Id**プロパティもインストールする必要が公開されたサービス id の証明書で指定された証明書ストアに、 **エンドポイント Id**プロパティ。  

> [!NOTE]
>  ホスト インスタンス サービス アカウントまたは管理者アカウントを使用してコンピュータにログオンする代わりに、[別のユーザーとして実行] を使用すると、適用可能なアカウントを使用して同じアクションを実行できます。  

## <a name="certificate-usage-scenarios-for-the-wcf-send-ports"></a>WCF 送信ポートでの証明書の使用シナリオ  
 次の表は、証明書を WCF 送信ポートにインストールする方法を示しています。  


|                                                 証明書の使用法                                                  |                          ユーザー コンテキスト                           |                                                                                                                                                                                                      証明書ストアの場所                                                                                                                                                                                                      |                                       証明書の種類                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                   証明書サーバーをインストールするタイミング                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|--------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                                               クライアントの認証                                                | 送信ポートに関連付けられているホスト インスタンスが使用するアカウント |                                                                               実行している各コンピューターにログオン[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]各ホスト インスタンス サービス アカウントとして、送信ポートをホストし、クライアント証明書をインポートするが、**現在のユーザー \ 個人用 (マイ)** を格納します。                                                                               |                                   独自のプライベート証明書                                    |                                                                                              値を指定、**クライアント証明書の拇印**次の構成でのプロパティ。<br /><br /> -**クライアント資格情報の種類のメッセージ**または**クライアント資格情報の種類のトランスポート**Wcf-basichttp 送信ポートのプロパティに設定されて**証明書**します。<br />-**クライアント資格情報の種類のメッセージ**または**クライアント資格情報の種類のトランスポート**、Wcf-wshttp 送信ポートのプロパティに設定されて**証明書**します。<br />-**クライアント資格情報の種類のメッセージ**または**クライアント資格情報の種類のトランスポート**、Wcf-nettcp 送信ポートのプロパティに設定されて**証明書**します。<br />-**クライアント資格情報の種類のメッセージ**または**MSMQ 認証モード**Wcf-netmsmq 送信ポートのプロパティに設定されて**証明書**します。                                                                                              |
| 送信ポートのセキュリティ設定に応じたサービス認証、署名の確認、および暗号化 |                               なし                               | 実行している各コンピューターにログオン[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]、管理者として、送信ポートをホストし、サービス証明書をインポートするが、**ローカル コンピューター \ その他の人 (アドレス帳)** 格納します。 また、そのコンピュータの信頼されたルート証明機関の証明書ストアに、サービス証明書の CA 証明書チェーンをインストールする必要があります。 | -サービスのパブリック証明書<br />でサービス証明書、CA 証明書チェーン |                                                                                                                                                                           値を指定、**サービス証明書の拇印**次の構成でのプロパティ。<br /><br /> -**クライアント資格情報の種類のメッセージ**または**クライアント資格情報の種類のトランスポート**Wcf-basichttp 送信ポートのプロパティに設定されて**証明書**します。<br />-**クライアント資格情報の種類のメッセージ**、Wcf-wshttp 送信ポートのプロパティに設定されて**None**、 **UserName**、または**証明書**ときに、**サービス資格情報をネゴシエート**オプションはオフにします。<br />-**セキュリティ モード**の Wcf-netmsmq 送信ポートが に設定されている**メッセージ**または**両方**します。                                                                                                                                                                           |
| 送信ポートのセキュリティ設定に応じたサービス認証、署名の確認、および暗号化 |                               なし                               |                         送信ポートをホストする [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] を実行している各コンピュータに管理者としてログオンし、サービスをこの送信ポートに対して認証できるように、クライアントの X.509 証明書の CA 証明書チェーンをコンピュータの信頼されたルート証明機関の証明書ストアにインポートします。                         |                     サービス証明書の CA 証明書チェーン                     | かどうかは明示的に指定しないため、サービス証明書、**サービス証明書の拇印**プロパティに、サービスの X.509 CA 証明書チェーンが信頼されたルート証明機関に証明書のインストール次の構成で証明書ストア:<br /><br /> -**セキュリティ モード**、Wcf-basichttp 送信ポートが に設定されている**トランスポート**または**TransportWithMessageCredential**します。<br />-**セキュリティ モード**、Wcf-wshttp 送信ポートが に設定されている**トランスポート**または**TransportWithMessageCredential**します。<br />-**セキュリティ モード**に設定されているポートの WCF NetTcp 送信**TransportWithMessageCredential**します。<br />-**クライアント資格情報の種類のトランスポート**、Wcf-nettcp 送信ポートのプロパティに設定されて**None**または**証明書**します。<br />-**クライアント資格情報の種類のメッセージ**、Wcf-nettcp 送信ポートのプロパティに設定されて**None**、 **UserName**、または**証明書**します。 |

> [!NOTE]
>  標準の WCF 送信アダプターを使用しているため、 [ChainTrust](http://go.microsoft.com/fwlink/?LinkId=88960)サービス証明書検証モードのサービスの X.509 証明書の CA 証明書チェーンをインストールする必要があります。 WCF-Custom アダプタまたは WCF-CustomIsolated アダプタを使用すると、この既定の動作を変更できます。  

> [!NOTE]
>  Wcf-custom および Wcf-customisolated の送信ポート、ユーザー コンテキスト、証明書ストアの場所、および証明書をインストールする証明書の種類によって異なります、 **serviceCredentials**と**clientCredentials**動作要素を設定します。  

> [!NOTE]
>  送信ポートは、証明書の要素を使用している場合、**エンドポイント Id**プロパティもインストールする必要が予想されるサービス id の証明書で指定された証明書ストアに、**エンドポイントIdentity**プロパティ。  

> [!NOTE]
>  ホスト インスタンス サービス アカウントまたは管理者アカウントを使用してコンピュータにログオンする代わりに、[別のユーザーとして実行] を使用すると、適用可能なアカウントを使用して同じアクションを実行できます。  

## <a name="displaying-the-certificates-management-console"></a>[証明書] 管理コンソールの表示  
 [ローカル コンピュータ] と [現在のユーザー] の [証明書] 管理コンソール インターフェイスを表示するには、次の手順を実行します。  

1.  をクリックして**開始**、 をクリックして**実行**、型**MMC**、 をクリック**OK** Microsoft 管理コンソールを開きます。  

2.  **ファイル** メニューのをクリックして**スナップインの追加と削除**を表示する、**スナップインの追加と削除** ダイアログ ボックス。  

3.  クリックして**追加**を表示する、**スタンドアロン スナップインの追加** ダイアログ ボックス。  

4.  選択**証明書**クリックして、スナップインの一覧から**追加**します。  

5.  選択**コンピューター アカウント**、 をクリックして**次**、順にクリックします**完了**。 [ローカル コンピュータ] の [証明書] 管理コンソール インターフェイスが追加されます。  

6.  いることを確認**証明書**クリックして、スナップインの一覧が選択されている**追加**もう一度です。  

7.  選択 **[ユーザー アカウント**、] をクリックし、**完了**。 [現在のユーザー] の [証明書] 管理コンソール インターフェイスが追加されます。  

    > [!NOTE]
    >  これにより、現在ログオンしているアカウントの [証明書] 管理コンソールが表示されます。 サービス アカウントの個人証明書ストアに証明書をインポートする必要がある場合は、最初にサービス アカウントの資格情報を使用してログオンしてください。  

8.  クリックして**閉じる**で、**スタンドアロン スナップイン** ダイアログ ボックス。  

9. をクリックして**OK**で、**スナップインの追加と削除** ダイアログ ボックス。