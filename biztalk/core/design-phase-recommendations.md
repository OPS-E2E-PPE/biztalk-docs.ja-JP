---
title: 設計フェーズの推奨事項 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: ee3d183e-a6f3-47d0-90ac-99b12c064607
caps.latest.revision: 4
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 4beb6e0a9fc5750e5e9f8135fd17723301206577
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/27/2018
ms.locfileid: "36979811"
---
# <a name="design-phase-recommendations"></a><span data-ttu-id="f167d-102">デザイン フェーズの推奨事項</span><span class="sxs-lookup"><span data-stu-id="f167d-102">Design Phase Recommendations</span></span>
<span data-ttu-id="f167d-103">設計フェーズの主な成果物は、システムの設計仕様と、システムの機能およびパフォーマンスを検証するためのテスト ケースの設計仕様です。</span><span class="sxs-lookup"><span data-stu-id="f167d-103">The primary deliverables for the design phase are design specifications for both the system and the test cases for validating system functionality and performance.</span></span> <span data-ttu-id="f167d-104">機能およびテストの実現可能性の調査は、通常、設計プロセスの一部として行われます。以下で説明するように、この調査には初期開発が含まれ、検証設計の場合は POC (Proof of Concept: 概念実証) 実装の早期テストも必要になります。</span><span class="sxs-lookup"><span data-stu-id="f167d-104">Investigations of the feasibility of features and tests are a typical part of the design process, involving initial development and, in the case of validation design, some early testing of proof-of-concept implementations as discussed in this section below.</span></span>  
  
## <a name="acquire-detailed-throughput-and-latency-profiles"></a><span data-ttu-id="f167d-105">詳細なスループットと待機時間のプロファイルの取得</span><span class="sxs-lookup"><span data-stu-id="f167d-105">Acquire Detailed Throughput and Latency Profiles</span></span>  
 <span data-ttu-id="f167d-106">前のプロジェクト フェーズでパフォーマンス リリース条件を確立する際に使用した初期ロード プロファイルを基に、設計フェーズで詳細なスループットと待機時間のプロファイルを設定します。</span><span class="sxs-lookup"><span data-stu-id="f167d-106">Building on the initial load profiles on which the performance release criteria from the previous project phase were established, establish detailed throughput and latency profiles during the design phase.</span></span> <span data-ttu-id="f167d-107">可能な場合は実稼動システムからパフォーマンス データを取得します。</span><span class="sxs-lookup"><span data-stu-id="f167d-107">If available, acquire performance data from production systems.</span></span> <span data-ttu-id="f167d-108">実稼動データを使用すると、現実的なパフォーマンス プロファイルを基に、設計フェーズでテスト ケースを設計できます。</span><span class="sxs-lookup"><span data-stu-id="f167d-108">Using production data will provide realistic performance profiles on which test cases can be designed during this phase.</span></span> <span data-ttu-id="f167d-109">実稼動データが取得できない場合は、予想される負荷から現実的なプロファイルを推定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f167d-109">If production data is not available, then a realistic profile must be extrapolated from expected load.</span></span>  
  
 <span data-ttu-id="f167d-110">設計フェーズでパフォーマンス テスト ケースを作成する場合は、実稼働環境で求められるシステムを忠実にエミュレートしたパフォーマンス プロファイルをテスト ケースに含めることが重要です。</span><span class="sxs-lookup"><span data-stu-id="f167d-110">It is critical that the performance test cases being created during the design phase include performance profiles that closely emulate what the system will be expected to support in production.</span></span> <span data-ttu-id="f167d-111">現実的で維持可能なパフォーマンス プロファイルを作成する方法の詳細については、次を参照してください[維持可能なパフォーマンスとは何ですか?。](../core/what-is-sustainable-performance.md)</span><span class="sxs-lookup"><span data-stu-id="f167d-111">For more information about creating realistic and sustainable performance profiles, see [What Is Sustainable Performance?](../core/what-is-sustainable-performance.md)</span></span>  
  
## <a name="investigate-performance-risk-mitigations"></a><span data-ttu-id="f167d-112">パフォーマンス リスクの緩和策の調査</span><span class="sxs-lookup"><span data-stu-id="f167d-112">Investigate Performance Risk Mitigations</span></span>  
 <span data-ttu-id="f167d-113">要件フェーズで、必要なパフォーマンス目標の実現に対するリスクと可能な緩和策を特定しました。</span><span class="sxs-lookup"><span data-stu-id="f167d-113">During the requirements phase, risks to achieving the desired performance goals were identified and possible mitigations identified.</span></span>  <span data-ttu-id="f167d-114">リスクおよび緩和策は、設計フェーズのできる限り早い段階で調査する必要があります。これは、必要に応じて設計を変更するための時間を確保するためです。</span><span class="sxs-lookup"><span data-stu-id="f167d-114">The risks and mitigations should be investigated as early in the design phase as possible in order to allow time to change the design if needed.</span></span> <span data-ttu-id="f167d-115">まず特定した各リスクが問題になることを POC テストで実証し、次に緩和策をテストしてその有効性を評価する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f167d-115">Each identified risk should first be proven to be an issue using proof of concept (POC) testing and then mitigations should be tested to evaluate efficacy.</span></span>  
  
 <span data-ttu-id="f167d-116">たとえば、FTP を使用して他のシステムと通信するレガシ システムがあるとします。</span><span class="sxs-lookup"><span data-stu-id="f167d-116">For example, assume that a legacy system uses FTP to communicate with other systems.</span></span> <span data-ttu-id="f167d-117">ここで、レガシ FTP サーバーと BizTalk Server FTP アダプターの組み合わせで実現可能なスループットのレベルを調べてみると、(要件フェーズでリリース条件として確立された) 目標のスループットが実現されないことがわかりました。</span><span class="sxs-lookup"><span data-stu-id="f167d-117">However, looking at the level of throughput that the legacy FTP server can achieve in combination with the BizTalk Server FTP adapter, it is clear that the desired throughput (established as release criteria during the requirements phase) will not be achievable.</span></span> <span data-ttu-id="f167d-118">プロジェクトのリスクを軽減するために、次の方法は、要件フェーズ中に識別されます。</span><span class="sxs-lookup"><span data-stu-id="f167d-118">To mitigate the risk to the project, the following alternatives are identified during the requirements phase:</span></span>  
  
- <span data-ttu-id="f167d-119">FTP サーバーをスケール アップまたはスケール アウトし、特定のメッセージ タイプ専用の論理 FTP アドレスを複数作成して負荷を分散する。</span><span class="sxs-lookup"><span data-stu-id="f167d-119">Scale up or out the FTP server and create multiple logical FTP addresses dedicated to specific message types to spread the load</span></span>  
  
- <span data-ttu-id="f167d-120">多数のメッセージをバッチとして単一ファイルで配信するようにレガシ システムを変更し、1 メッセージあたりの転送オーバーヘッドを軽減する。</span><span class="sxs-lookup"><span data-stu-id="f167d-120">Modify the legacy system to deliver many messages in a single file as a batch to reduce the per-message transfer overhead</span></span>  
  
- <span data-ttu-id="f167d-121">FTP よりも高速な別のプロトコル (MSMQ など) を使用するようにレガシ システムを変更する。</span><span class="sxs-lookup"><span data-stu-id="f167d-121">Modify the legacy system to use an alternative protocol that is known to be faster than FTP such as MSMQ</span></span>  
  
  <span data-ttu-id="f167d-122">この例で最初に行う必要がある調査は、現在の FTP システムのパフォーマンスをテストしてリスクの存在を実証することです。</span><span class="sxs-lookup"><span data-stu-id="f167d-122">The first investigation that needs to be done in this example is to prove that the risk exists by testing the current FTP system performance.</span></span> <span data-ttu-id="f167d-123">FTP サーバーからメッセージを受信するだけの簡単な概念実証ソリューションを構築および展開し、FTP 経路に必要な実稼動ロード プロファイルをそのソリューションに適用します。</span><span class="sxs-lookup"><span data-stu-id="f167d-123">A simple proof of concept solution that just receives messages from the FTP server would be built and deployed and the production load profile expected for the FTP pathway applied to it.</span></span> <span data-ttu-id="f167d-124">必要な負荷をサーバーが維持できる場合は、リスクが顕在化しないため、詳細な調査を行う必要はありません。</span><span class="sxs-lookup"><span data-stu-id="f167d-124">If the server is capable of sustaining the desired load, then the risk is not realized and further investigation is not needed.</span></span> <span data-ttu-id="f167d-125">必要な負荷をサーバーが維持できない場合は、コストおよびプロジェクト リスクが最も低く、問題を解決できる可能性が最も高い代替策を、概念実証を通じて調査する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f167d-125">If it is not able to sustain the desired load, then the alternative that is most likely to address the issue with the least amount of cost and project risk should be investigated via a proof of concept investigation.</span></span>  
  
## <a name="refine-system-size-estimate"></a><span data-ttu-id="f167d-126">システム サイズの推定値の調整</span><span class="sxs-lookup"><span data-stu-id="f167d-126">Refine System Size Estimate</span></span>  
 <span data-ttu-id="f167d-127">設計フェーズで行った調査により、システムのパフォーマンス機能に関する貴重な経験的情報が得られます。</span><span class="sxs-lookup"><span data-stu-id="f167d-127">Investigations conducted during the design phase provide valuable empirical information regarding the performance capabilities of your system.</span></span>  
  
 <span data-ttu-id="f167d-128">たとえば、FTP のパフォーマンスが低すぎると判明した上記の例について引き続き検討してみましょう。</span><span class="sxs-lookup"><span data-stu-id="f167d-128">For example, let's continue the example above where the performance of FTP is found to be too low.</span></span> <span data-ttu-id="f167d-129">メッセージング トランスポートとして MSMQ を使用するシステムが既に環境に組み込まれているため、MSMQ も使用するようにレガシ システムを変更することを決定しました。</span><span class="sxs-lookup"><span data-stu-id="f167d-129">Because the environment already includes systems that use MSMQ as a messaging transport, it was decided to modify the legacy system to use MSMQ as well.</span></span> <span data-ttu-id="f167d-130">ただし、MSMQ を採用した新しい POC のパフォーマンス テスト中に、メッセージ ボックス データベースがある SQL サーバーの CPU 使用率がほぼ常時 100% に達し、MSMQ 経路で必要なスループットを実現できないことがわかりました。</span><span class="sxs-lookup"><span data-stu-id="f167d-130">However, during the performance testing of a new POC that employs MSMQ, it was observed that the CPU on the SQL server on which the MessageBox database lives almost constantly at 100% utilization and you are not able to achieve the expected throughput on the MSMQ pathway.</span></span>  
  
 <span data-ttu-id="f167d-131">SQL Server の構成がアプリケーションに対して最適化されていると想定した場合、目的のスループットに対して SQL Server のハードウェアのサイズが明らかに不足しており、システム サイズを調整する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f167d-131">Assuming the SQL Server configuration is optimal for the application, the SQL Server hardware is clearly undersized for the desired throughput and the system size needs to be refined.</span></span> <span data-ttu-id="f167d-132">この場合は、SQL Server のハードウェアに CPU を追加するか、より高速な CPU に交換するか、またはその両方を実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f167d-132">In this case, the SQL Server hardware needs either additional CPUs, faster CPUs, or both.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f167d-133">参照</span><span class="sxs-lookup"><span data-stu-id="f167d-133">See Also</span></span>  
 <span data-ttu-id="f167d-134">[プロジェクトの計画フェーズの推奨事項](../core/project-planning-recommendations-by-phase.md) </span><span class="sxs-lookup"><span data-stu-id="f167d-134">[Project Planning Recommendations by Phase](../core/project-planning-recommendations-by-phase.md) </span></span>  
 <span data-ttu-id="f167d-135">[要件フェーズの推奨事項](../core/requirements-phase-recommendations.md) </span><span class="sxs-lookup"><span data-stu-id="f167d-135">[Requirements Phase Recommendations](../core/requirements-phase-recommendations.md) </span></span>  
 <span data-ttu-id="f167d-136">[実装フェーズの推奨事項](../core/implementation-phase-recommendations.md) </span><span class="sxs-lookup"><span data-stu-id="f167d-136">[Implementation Phase Recommendations](../core/implementation-phase-recommendations.md) </span></span>  
 <span data-ttu-id="f167d-137">[検証フェーズの推奨事項](../core/verification-phase-recommendations.md) </span><span class="sxs-lookup"><span data-stu-id="f167d-137">[Verification Phase Recommendations](../core/verification-phase-recommendations.md) </span></span>  
 [<span data-ttu-id="f167d-138">リリース フェーズの推奨事項</span><span class="sxs-lookup"><span data-stu-id="f167d-138">Release Phase Recommendations</span></span>](../core/release-phase-recommendations.md)