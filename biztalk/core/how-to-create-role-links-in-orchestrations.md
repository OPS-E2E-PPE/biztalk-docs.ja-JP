---
title: オーケストレーションでロール リンクを作成する方法 |Microsoft ドキュメント
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: cc386ac2-a851-4342-9ceb-0b6faddf4ece
caps.latest.revision: 13
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 8bf9dd0026fd0da3a83e847639cbbd130400ccd9
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65385452"
---
# <a name="how-to-create-role-links-in-orchestrations"></a><span data-ttu-id="481df-102">オーケストレーションのロール リンクを作成する方法</span><span class="sxs-lookup"><span data-stu-id="481df-102">How to Create Role Links in Orchestrations</span></span>
<span data-ttu-id="481df-103">オーケストレーションでロール リンクを使用するには、次の基本的な作業を行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="481df-103">The following are the basic tasks you will need to complete to use role links in your orchestration:</span></span>  
  
-   <span data-ttu-id="481df-104">パーティおよび送信ポートを作成し、相互に関連付けます。</span><span class="sxs-lookup"><span data-stu-id="481df-104">Create parties and send ports and associate them with each other.</span></span>  
  
-   <span data-ttu-id="481df-105">以下の手順に従って、ロール リンクの種類を作成し、ポートの種類を追加します。</span><span class="sxs-lookup"><span data-stu-id="481df-105">Use the following procedure to create role link types and add the port types.</span></span>  
  
    |<span data-ttu-id="481df-106">ロール リンクの種類を作成するには</span><span class="sxs-lookup"><span data-stu-id="481df-106">To create a role link type</span></span>|  
    |--------------------------------|  
    |<span data-ttu-id="481df-107">1.オーケストレーションの種類 ウィンドウで、**型**を右クリックして**ロール リンクの種類**、クリックして**新しいロール リンクの種類**です。</span><span class="sxs-lookup"><span data-stu-id="481df-107">1.  In the Orchestration View window, expand **Types**, right-click **Role Link Types**, and then click **New Role Link Type**.</span></span><br /><span data-ttu-id="481df-108">2.作成したロール リンクの種類をクリックします。</span><span class="sxs-lookup"><span data-stu-id="481df-108">2.  Click the role link type you just created.</span></span> <span data-ttu-id="481df-109">[プロパティ] ウィンドウでの**識別子**フィールドに「`Provider_Consumer_RoleLinkType`です。</span><span class="sxs-lookup"><span data-stu-id="481df-109">In the Properties window, in the **Identifier** field, type `Provider_Consumer_RoleLinkType`.</span></span><br /><span data-ttu-id="481df-110">3.展開**Provider_Consumer_RoleLinkType**、クリックして **[role_1]** です。</span><span class="sxs-lookup"><span data-stu-id="481df-110">3.  Expand **Provider_Consumer_RoleLinkType**, and then click **Role_1**.</span></span> <span data-ttu-id="481df-111">[プロパティ] ウィンドウでの**識別子**フィールドに「`ConsumerRole`です。</span><span class="sxs-lookup"><span data-stu-id="481df-111">In the Properties window, in the **Identifier** field, type `ConsumerRole`.</span></span><br /><span data-ttu-id="481df-112">4.右クリック**ConsumerRole**、クリックして**ポートの種類の追加**です。</span><span class="sxs-lookup"><span data-stu-id="481df-112">4.  Right-click **ConsumerRole**, and then click **Add Port Type**.</span></span> <span data-ttu-id="481df-113">ポートの種類ウィザードが起動します。</span><span class="sxs-lookup"><span data-stu-id="481df-113">This starts the Port Type Wizard.</span></span><br /><span data-ttu-id="481df-114">5.**ポートの種類ウィザードへようこそ** ページで、をクリックして**次**です。</span><span class="sxs-lookup"><span data-stu-id="481df-114">5.  On the **Welcome to the Port Type Wizard** page, click **Next**.</span></span><br /><span data-ttu-id="481df-115">6.**ポートの種類を選択するか、新しいポートの種類を作成** ページで選択**新しいポートの種類を作成する**、し、**ポートの種類名**、型`ConsumerPortType`です。</span><span class="sxs-lookup"><span data-stu-id="481df-115">6.  On the **Select a Port Type or create a new Port Type** page, select **Create a new Port Type**, and then for **Port Type Name**, type `ConsumerPortType`.</span></span><br /><span data-ttu-id="481df-116">7.**通信パターン** **一方向**、および**アクセス制限**を選択**パブリック - 制限なし**です。</span><span class="sxs-lookup"><span data-stu-id="481df-116">7.  For **Communication Pattern**, select **One-Way**, and for **Access Restrictions**, select **Public - no limit**.</span></span> <span data-ttu-id="481df-117">**[次へ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="481df-117">Click **Next**.</span></span><br /><span data-ttu-id="481df-118">8.**ポート ウィザードの完了**] ページで [**完了**です。</span><span class="sxs-lookup"><span data-stu-id="481df-118">8.  On the **Completing the Port Wizard** page, click **Finish**.</span></span><br /><span data-ttu-id="481df-119">9.右クリック**Provider_Consumer_RoleLinkType**、クリックして**新しいロール**です。</span><span class="sxs-lookup"><span data-stu-id="481df-119">9. Right-click **Provider_Consumer_RoleLinkType**, and then click **New Role**.</span></span><br /><span data-ttu-id="481df-120">10.をクリックして **[role_1]** 、し、[プロパティ] ウィンドウで、次に、**識別子**フィールドに「`ProviderRole`です。</span><span class="sxs-lookup"><span data-stu-id="481df-120">10. Click **Role_1**, and then in the Properties window, in the **Identifier** field, type `ProviderRole`.</span></span><br /><span data-ttu-id="481df-121">11.右クリック**ProviderRole**、クリックして**ポートの種類の追加**です。</span><span class="sxs-lookup"><span data-stu-id="481df-121">11. Right-click **ProviderRole**, and then click **Add Port Type**.</span></span> <span data-ttu-id="481df-122">ポートの種類ウィザードが起動します。</span><span class="sxs-lookup"><span data-stu-id="481df-122">This starts the Port Type Wizard.</span></span><br /><span data-ttu-id="481df-123">12.**ポートの種類ウィザードへようこそ** ページで、をクリックして**次**です。</span><span class="sxs-lookup"><span data-stu-id="481df-123">12. On the **Welcome to the Port Type Wizard** page, click **Next**.</span></span><br /><span data-ttu-id="481df-124">13.**ポートの種類を選択するか、新しいポートの種類を作成** ページで選択**新しいポートの種類を作成する**、し、**ポートの種類名**、型`ProviderPortType`です。</span><span class="sxs-lookup"><span data-stu-id="481df-124">13. On the **Select a Port Type or create a new Port Type** page, select **Create a new Port Type**, and then for **Port Type Name**, type `ProviderPortType`.</span></span><br /><span data-ttu-id="481df-125">14.**通信パターン** **一方向**、および**アクセス制限**を選択**パブリック - 制限なし**です。</span><span class="sxs-lookup"><span data-stu-id="481df-125">14. For **Communication Pattern**, select **One-Way**, and for **Access Restrictions**, select **Public - no limit**.</span></span> <span data-ttu-id="481df-126">**[次へ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="481df-126">Click **Next**.</span></span><br /><span data-ttu-id="481df-127">15.**ポート ウィザードの完了**] ページで [**完了**です。</span><span class="sxs-lookup"><span data-stu-id="481df-127">15. On the **Completing the Port Wizard** page, click **Finish**.</span></span> <span data-ttu-id="481df-128">**注:**    ロール リンクの内部に配置、構成されたポートでは、その関連付けられたバインド情報は保持されません。</span><span class="sxs-lookup"><span data-stu-id="481df-128">**Note:**      Configured ports placed inside of role links do not retain their associated binding information.</span></span>|  
  
     <span data-ttu-id="481df-129">前の手順で 2 つのロールを含むロール リンクの種類を作成する — を受信してメッセージを送信する役割を持つ、オーケストレーションが提供される送信ポートを使用、コンシューマーは、ConsumerRole からメッセージを処理する ProviderRole、コンシューマー。</span><span class="sxs-lookup"><span data-stu-id="481df-129">In the preceding procedure, you create a role link type that contains two roles—a ProviderRole that will receive and process messages from the consumer and a ConsumerRole that your orchestration will use the send port provided with the role to send messages to the consumer.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="481df-130">ロール リンクの種類には、プロバイダー ロールとコンシューマー ロールを含めることができます。ビジネス プロセスのニーズに応じて、いずれか 1 つ、または両方を 1 つずつ含めることができます。</span><span class="sxs-lookup"><span data-stu-id="481df-130">The role link type can contain a provider role and a consumer role, and it can include one of either or one of each, depending on your business process needs.</span></span>  
  
-   <span data-ttu-id="481df-131">以下の手順に従って、ロール リンクをオーケストレーションに追加します。</span><span class="sxs-lookup"><span data-stu-id="481df-131">Use the following procedure to add role links to your orchestration.</span></span>  
  
    |<span data-ttu-id="481df-132">ロール リンク ウィザードを使用してロール リンクを作成するには</span><span class="sxs-lookup"><span data-stu-id="481df-132">To create a role link by using the Role Link Wizard</span></span>|  
    |---------------------------------------------------------|  
    |<span data-ttu-id="481df-133">1.オーケストレーション ツールボックスで、ドラッグ、**ロール リンク**図形をデザイン画面にします。</span><span class="sxs-lookup"><span data-stu-id="481df-133">1.  In the orchestration Toolbox, drag the **Role Link** shape to the design surface.</span></span> <span data-ttu-id="481df-134">ロール リンク ウィザードが起動します。</span><span class="sxs-lookup"><span data-stu-id="481df-134">This starts the Role Link Wizard.</span></span><br /><span data-ttu-id="481df-135">2.**ロール リンク ウィザードへようこそ** ページで、をクリックして**次**です。</span><span class="sxs-lookup"><span data-stu-id="481df-135">2.  On the **Welcome to the Role Link Wizard** page, click **Next**.</span></span><br /><span data-ttu-id="481df-136">3.**ロール リンク名**] ページの [、**名前**フィールドに「`Provider_Consumer`です。</span><span class="sxs-lookup"><span data-stu-id="481df-136">3.  On the **Role Link Name** page, in the **Name** field, type `Provider_Consumer`.</span></span> <span data-ttu-id="481df-137">**[次へ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="481df-137">Click **Next**.</span></span><br /><span data-ttu-id="481df-138">4.**ロール リンクの種類**] ページで、[**既存のロール リンクの種類を使用して**です。</span><span class="sxs-lookup"><span data-stu-id="481df-138">4.  On the **Role Link Type** page, select **Use an existing Role Link Type**.</span></span> <span data-ttu-id="481df-139">**ロール リンクの種類名**ドロップダウン リストで、 **Provider_Consumer_RoleLinkType**です。</span><span class="sxs-lookup"><span data-stu-id="481df-139">In the **Role Link Type Name** drop-down list, select **Provider_Consumer_RoleLinkType**.</span></span> <span data-ttu-id="481df-140">**[次へ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="481df-140">Click **Next**.</span></span><br /><span data-ttu-id="481df-141">5.**ロール Id** ] ページで、[ **ProviderRole**から、**ロールはこのオーケストレーションに実装を受信し、パートナーからメッセージを処理しますか?** ドロップダウン リスト。</span><span class="sxs-lookup"><span data-stu-id="481df-141">5.  On the **Role Identification** page, select **ProviderRole** from the **Which role will this orchestration implement to receive and process messages from partners?** drop-down list.</span></span> <span data-ttu-id="481df-142">ウィザードが自動的に選択**ConsumerRole**の**このオーケストレーションは、以下のロールを使用して、ロール内部のポートでパートナーにメッセージを送信は**します。</span><span class="sxs-lookup"><span data-stu-id="481df-142">The wizard automatically selects **ConsumerRole** for **This orchestration will use the role below to send messages to partners on ports inside the role**.</span></span> <span data-ttu-id="481df-143">**[次へ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="481df-143">Click **Next**.</span></span><br /><span data-ttu-id="481df-144">6.**ロール リンクの使用法**] ページで、[**パートナーのロールに最初のメッセージを送信する**です。</span><span class="sxs-lookup"><span data-stu-id="481df-144">6.  On the **Role Link Usage** page, select **I will be sending the first message to my partner's role**.</span></span> <span data-ttu-id="481df-145">**[完了]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="481df-145">Click **Finish**.</span></span>|  
  
     <span data-ttu-id="481df-146">前の手順では、ConsumerRole をさらにイニシャライズ ロールとして定義しています。</span><span class="sxs-lookup"><span data-stu-id="481df-146">In the preceding procedure, you further define the ConsumerRole as the initiating role.</span></span> <span data-ttu-id="481df-147">つまり、ConsumerRole によって提供されるポートを通じて、オーケストレーションが最初のメッセージをコンシューマーに送信し、次に、コンシューマーから返されるメッセージを ProviderRole が受信し、さらに処理を行います。</span><span class="sxs-lookup"><span data-stu-id="481df-147">This means that your orchestration will send the first message to the consumer through the port provided by the ConsumerRole and then the ProviderRole will receive the message sent back from the consumer for further processing.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="481df-148">ロール リンクの種類に 1 つだけの役割がある場合は、ビジネス プロセスのいずれかを選択して、ロールを定義する必要があります。**プロバイダー ロール。最初のメッセージを受信する**または**コンシューマー ロール。最初のメッセージを送信する**を実行するのではなくステップの前の手順では 5 です。</span><span class="sxs-lookup"><span data-stu-id="481df-148">If there is only one role in the role link type, you need to define your role in the business process by selecting either **Provider Role: I will be receiving the first message** or **Consumer Role: I will be sending the first message** instead of performing step 5 in the preceding procedure.</span></span>  
  
-   <span data-ttu-id="481df-149">ビジネス プロセスをデザインします。</span><span class="sxs-lookup"><span data-stu-id="481df-149">Design your business process.</span></span> <span data-ttu-id="481df-150">関連付けのセットを活用すると、受信メッセージをオーケストレーションの適切なインスタンスに確実に一致させることができます。</span><span class="sxs-lookup"><span data-stu-id="481df-150">You can leverage correlation sets to ensure that an incoming message matches the appropriate instance of an orchestration.</span></span>  
  
-   <span data-ttu-id="481df-151">ポートを関連付ける**送信**と**受信**図形です。</span><span class="sxs-lookup"><span data-stu-id="481df-151">Associate the ports with **Send** and **Receive** shapes.</span></span> <span data-ttu-id="481df-152">さらに、次の操作を実行します。</span><span class="sxs-lookup"><span data-stu-id="481df-152">In addition, do the following:</span></span>  
  
    -   <span data-ttu-id="481df-153">イニシャライズ ロールがコンシューマーのメッセージを送信するため、明示的に設定、 **DestinationParty**オーケストレーションでのプロパティ (1 回、1 回だけ)。</span><span class="sxs-lookup"><span data-stu-id="481df-153">If the initiating role is a consumer for sending messages, explicitly set the **DestinationParty** property (once and only once) in your orchestration.</span></span> <span data-ttu-id="481df-154">値を設定するには、 **DestinationParty**で、**式**ConfirmOrder がロール リンクの名前、PartnerName と OrganizationName がパラメーターの次の例のように、図形: パーティの</span><span class="sxs-lookup"><span data-stu-id="481df-154">To do so, set the value of the **DestinationParty** in the **Expression** shape, as in the following example, where ConfirmOrder is the name of a role link, and PartnerName and OrganizationName are parameters of a party:</span></span>  
  
        ```  
        ConfirmOrder(Microsoft.XLANGs.BaseTypes.DestinationParty) = new Microsoft.XLANGs.BaseTypes.Party("PartnerName", "OrganizationName");  
        ```  
  
    -   <span data-ttu-id="481df-155">イニシャライズ ロールがプロバイダーの場合、メッセージの受信、 **DestinationParty**プロパティは、受信側によって自動的に初期化します。</span><span class="sxs-lookup"><span data-stu-id="481df-155">If the initiating role is a provider for receiving messages, the **DestinationParty** property is initialized automatically by the receiver.</span></span> <span data-ttu-id="481df-156">**DestinationParty**プロバイダー自体に設定されています。</span><span class="sxs-lookup"><span data-stu-id="481df-156">The **DestinationParty** is set to the provider itself.</span></span> <span data-ttu-id="481df-157">**SourceParty**プロパティは読み取り専用、およびセキュリティ識別子 (SID) 送信者のまたはパーティに関連付けられている証明書に基づいてパーティ名を解決するのには信頼されているパイプライン コンポーネントを通じて提供されます。</span><span class="sxs-lookup"><span data-stu-id="481df-157">The **SourceParty** property is read-only, and is supplied through a trusted pipeline component to resolve the party name based on the security identifier (SID) of the sender or on a certificate associated with the party.</span></span> <span data-ttu-id="481df-158">パイプライン コンポーネントを実行しているホストとしてマークする必要があります**信頼されている認証**です。</span><span class="sxs-lookup"><span data-stu-id="481df-158">The host running the pipeline component must be marked as **Authentication Trusted**.</span></span> <span data-ttu-id="481df-159">値を取得することができます、 **SourceParty**で、**式**次のサンプル コードを使用して図形。</span><span class="sxs-lookup"><span data-stu-id="481df-159">You can get the value of the **SourceParty** in the **Expression** shape by using the following sample code:</span></span>  
  
        ```  
        PartyName = Buyer_Supplier(Microsoft.XLANGs.BaseTypes.SourceParty);  
        ```  
  
## <a name="examples-of-using-role-links"></a><span data-ttu-id="481df-160">ロール リンクの使用例</span><span class="sxs-lookup"><span data-stu-id="481df-160">Examples of Using Role Links</span></span>  
  
-   [<span data-ttu-id="481df-161">PartyResolution (BizTalk Server サンプル)</span><span class="sxs-lookup"><span data-stu-id="481df-161">PartyResolution (BizTalk Server Sample)</span></span>](../core/partyresolution-biztalk-server-sample.md)  
  
-   <span data-ttu-id="481df-162">BizTalk Server のコード サンプルで使用可能なから「ロール リンクを使用して」SDK サンプルをダウンロード[ http://go.microsoft.com/fwlink/?LinkId=73703](http://go.microsoft.com/fwlink/?LinkId=73703)します。</span><span class="sxs-lookup"><span data-stu-id="481df-162">Download the SDK sample "Using Role Links" from the BizTalk Server code samples available at [http://go.microsoft.com/fwlink/?LinkId=73703](http://go.microsoft.com/fwlink/?LinkId=73703).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="481df-163">参照</span><span class="sxs-lookup"><span data-stu-id="481df-163">See Also</span></span>  
 <span data-ttu-id="481df-164">[オーケストレーションでロール リンクの使用](../core/using-role-links-in-orchestrations.md) </span><span class="sxs-lookup"><span data-stu-id="481df-164">[Using Role Links in Orchestrations](../core/using-role-links-in-orchestrations.md) </span></span>  
 <span data-ttu-id="481df-165">[ロール リンク図形を使用する方法](../core/how-to-use-the-role-link-shape.md) </span><span class="sxs-lookup"><span data-stu-id="481df-165">[How to Use the Role Link Shape](../core/how-to-use-the-role-link-shape.md) </span></span>  
 [<span data-ttu-id="481df-166">ロール リンク ウィザードを使用する方法</span><span class="sxs-lookup"><span data-stu-id="481df-166">How to Use the Role Link Wizard</span></span>](../core/how-to-use-the-role-link-wizard.md)