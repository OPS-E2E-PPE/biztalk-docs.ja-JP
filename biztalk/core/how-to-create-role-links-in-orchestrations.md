---
title: オーケストレーションでロール リンクを作成する方法 |Microsoft ドキュメント
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: cc386ac2-a851-4342-9ceb-0b6faddf4ece
caps.latest.revision: 13
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 8bf9dd0026fd0da3a83e847639cbbd130400ccd9
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65385452"
---
# <a name="how-to-create-role-links-in-orchestrations"></a>オーケストレーションのロール リンクを作成する方法
オーケストレーションでロール リンクを使用するには、次の基本的な作業を行う必要があります。  
  
-   パーティおよび送信ポートを作成し、相互に関連付けます。  
  
-   以下の手順に従って、ロール リンクの種類を作成し、ポートの種類を追加します。  
  
    |ロール リンクの種類を作成するには|  
    |--------------------------------|  
    |1.オーケストレーションの種類 ウィンドウで、**型**を右クリックして**ロール リンクの種類**、クリックして**新しいロール リンクの種類**です。<br />2.作成したロール リンクの種類をクリックします。 [プロパティ] ウィンドウでの**識別子**フィールドに「`Provider_Consumer_RoleLinkType`です。<br />3.展開**Provider_Consumer_RoleLinkType**、クリックして **[role_1]** です。 [プロパティ] ウィンドウでの**識別子**フィールドに「`ConsumerRole`です。<br />4.右クリック**ConsumerRole**、クリックして**ポートの種類の追加**です。 ポートの種類ウィザードが起動します。<br />5.**ポートの種類ウィザードへようこそ** ページで、をクリックして**次**です。<br />6.**ポートの種類を選択するか、新しいポートの種類を作成** ページで選択**新しいポートの種類を作成する**、し、**ポートの種類名**、型`ConsumerPortType`です。<br />7.**通信パターン****一方向**、および**アクセス制限**を選択**パブリック - 制限なし**です。 **[次へ]** をクリックします。<br />8.**ポート ウィザードの完了**] ページで [**完了**です。<br />9.右クリック**Provider_Consumer_RoleLinkType**、クリックして**新しいロール**です。<br />10.をクリックして **[role_1]**、し、[プロパティ] ウィンドウで、次に、**識別子**フィールドに「`ProviderRole`です。<br />11.右クリック**ProviderRole**、クリックして**ポートの種類の追加**です。 ポートの種類ウィザードが起動します。<br />12.**ポートの種類ウィザードへようこそ** ページで、をクリックして**次**です。<br />13.**ポートの種類を選択するか、新しいポートの種類を作成** ページで選択**新しいポートの種類を作成する**、し、**ポートの種類名**、型`ProviderPortType`です。<br />14.**通信パターン****一方向**、および**アクセス制限**を選択**パブリック - 制限なし**です。 **[次へ]** をクリックします。<br />15.**ポート ウィザードの完了**] ページで [**完了**です。 **注:**    ロール リンクの内部に配置、構成されたポートでは、その関連付けられたバインド情報は保持されません。|  
  
     前の手順で 2 つのロールを含むロール リンクの種類を作成する — を受信してメッセージを送信する役割を持つ、オーケストレーションが提供される送信ポートを使用、コンシューマーは、ConsumerRole からメッセージを処理する ProviderRole、コンシューマー。  
  
> [!NOTE]
>  ロール リンクの種類には、プロバイダー ロールとコンシューマー ロールを含めることができます。ビジネス プロセスのニーズに応じて、いずれか 1 つ、または両方を 1 つずつ含めることができます。  
  
-   以下の手順に従って、ロール リンクをオーケストレーションに追加します。  
  
    |ロール リンク ウィザードを使用してロール リンクを作成するには|  
    |---------------------------------------------------------|  
    |1.オーケストレーション ツールボックスで、ドラッグ、**ロール リンク**図形をデザイン画面にします。 ロール リンク ウィザードが起動します。<br />2.**ロール リンク ウィザードへようこそ** ページで、をクリックして**次**です。<br />3.**ロール リンク名**] ページの [、**名前**フィールドに「`Provider_Consumer`です。 **[次へ]** をクリックします。<br />4.**ロール リンクの種類**] ページで、[**既存のロール リンクの種類を使用して**です。 **ロール リンクの種類名**ドロップダウン リストで、 **Provider_Consumer_RoleLinkType**です。 **[次へ]** をクリックします。<br />5.**ロール Id** ] ページで、[ **ProviderRole**から、**ロールはこのオーケストレーションに実装を受信し、パートナーからメッセージを処理しますか?** ドロップダウン リスト。 ウィザードが自動的に選択**ConsumerRole**の**このオーケストレーションは、以下のロールを使用して、ロール内部のポートでパートナーにメッセージを送信は**します。 **[次へ]** をクリックします。<br />6.**ロール リンクの使用法**] ページで、[**パートナーのロールに最初のメッセージを送信する**です。 **[完了]** をクリックします。|  
  
     前の手順では、ConsumerRole をさらにイニシャライズ ロールとして定義しています。 つまり、ConsumerRole によって提供されるポートを通じて、オーケストレーションが最初のメッセージをコンシューマーに送信し、次に、コンシューマーから返されるメッセージを ProviderRole が受信し、さらに処理を行います。  
  
    > [!NOTE]
    >  ロール リンクの種類に 1 つだけの役割がある場合は、ビジネス プロセスのいずれかを選択して、ロールを定義する必要があります。**プロバイダー ロール。最初のメッセージを受信する**または**コンシューマー ロール。最初のメッセージを送信する**を実行するのではなくステップの前の手順では 5 です。  
  
-   ビジネス プロセスをデザインします。 関連付けのセットを活用すると、受信メッセージをオーケストレーションの適切なインスタンスに確実に一致させることができます。  
  
-   ポートを関連付ける**送信**と**受信**図形です。 さらに、次の操作を実行します。  
  
    -   イニシャライズ ロールがコンシューマーのメッセージを送信するため、明示的に設定、 **DestinationParty**オーケストレーションでのプロパティ (1 回、1 回だけ)。 値を設定するには、 **DestinationParty**で、**式**ConfirmOrder がロール リンクの名前、PartnerName と OrganizationName がパラメーターの次の例のように、図形: パーティの  
  
        ```  
        ConfirmOrder(Microsoft.XLANGs.BaseTypes.DestinationParty) = new Microsoft.XLANGs.BaseTypes.Party("PartnerName", "OrganizationName");  
        ```  
  
    -   イニシャライズ ロールがプロバイダーの場合、メッセージの受信、 **DestinationParty**プロパティは、受信側によって自動的に初期化します。 **DestinationParty**プロバイダー自体に設定されています。 **SourceParty**プロパティは読み取り専用、およびセキュリティ識別子 (SID) 送信者のまたはパーティに関連付けられている証明書に基づいてパーティ名を解決するのには信頼されているパイプライン コンポーネントを通じて提供されます。 パイプライン コンポーネントを実行しているホストとしてマークする必要があります**信頼されている認証**です。 値を取得することができます、 **SourceParty**で、**式**次のサンプル コードを使用して図形。  
  
        ```  
        PartyName = Buyer_Supplier(Microsoft.XLANGs.BaseTypes.SourceParty);  
        ```  
  
## <a name="examples-of-using-role-links"></a>ロール リンクの使用例  
  
-   [PartyResolution (BizTalk Server サンプル)](../core/partyresolution-biztalk-server-sample.md)  
  
-   BizTalk Server のコード サンプルで使用可能なから「ロール リンクを使用して」SDK サンプルをダウンロード[ http://go.microsoft.com/fwlink/?LinkId=73703](http://go.microsoft.com/fwlink/?LinkId=73703)します。  
  
## <a name="see-also"></a>参照  
 [オーケストレーションでロール リンクの使用](../core/using-role-links-in-orchestrations.md)   
 [ロール リンク図形を使用する方法](../core/how-to-use-the-role-link-shape.md)   
 [ロール リンク ウィザードを使用する方法](../core/how-to-use-the-role-link-wizard.md)