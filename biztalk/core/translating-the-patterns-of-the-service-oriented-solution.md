---
title: 指向ソリューションのサービスのパターンの変換 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- patterns [service solutions], translating patterns to orchestration shapes
- artifacts, patterns
- orchestrations, patterns
- patterns [process management solutions], connections
- patterns [service solutions], orchestration boundaries
- patterns [process management solutions], translating patterns to orchestrations
- orchestrations, boundaries
- patterns [service solutions], translating patterns to artifacts
ms.assetid: ff17cc41-2a7b-4304-b5bd-96b1174cea7f
caps.latest.revision: 19
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 71d95653dbfcbf3937509ceedfe0ff304c602a8b
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65243088"
---
# <a name="translating-the-patterns-of-the-service-oriented-solution"></a><span data-ttu-id="163fc-102">指向ソリューションのサービスのパターンの変換</span><span class="sxs-lookup"><span data-stu-id="163fc-102">Translating the Patterns of the Service Oriented Solution</span></span>
<span data-ttu-id="163fc-103">このセクションでは、ソリューションが BizTalk Server アイテムにパターンの図に変換される方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="163fc-103">This section describes how the solution translates the pattern diagram into BizTalk Server artifacts.</span></span>  
  
 <span data-ttu-id="163fc-104">![サービス&#45;ソリューション パターンを指向](../core/media/service-oriented-solution-patterns.gif "Service_Oriented_Solution_Patterns")</span><span class="sxs-lookup"><span data-stu-id="163fc-104">![Service&#45;Oriented Solution Patterns](../core/media/service-oriented-solution-patterns.gif "Service_Oriented_Solution_Patterns")</span></span>  
  
## <a name="connections-and-completeness-conditions"></a><span data-ttu-id="163fc-105">接続と完全性条件</span><span class="sxs-lookup"><span data-stu-id="163fc-105">Connections and Completeness Conditions</span></span>  
 <span data-ttu-id="163fc-106">BizTalk Server コンポーネント、パターンに変換するすべての場所で開始非常にことができます。</span><span class="sxs-lookup"><span data-stu-id="163fc-106">We can pretty much start anywhere with translating the patterns into BizTalk Server components.</span></span> <span data-ttu-id="163fc-107">ただし、コンポーネント間の接続は、実際には、インフラストラクチャ コンポーネントを開始点として見えますようにします。</span><span class="sxs-lookup"><span data-stu-id="163fc-107">However, the connections among the components are, in effect, the infrastructure for the components so that it seems a good place to start.</span></span> <span data-ttu-id="163fc-108">また、アグリゲータ パターンの場合にどのように示すか、すべての必要な情報があると思われる必要があります。</span><span class="sxs-lookup"><span data-stu-id="163fc-108">Also, in the case of the aggregator pattern, we need to think about what will tell it that it has all of the information it needs.</span></span> <span data-ttu-id="163fc-109">これは、その設計と同様に他のコンポーネントへの接続に影響します。</span><span class="sxs-lookup"><span data-stu-id="163fc-109">This affects both its connections to other components as well as its design.</span></span>  
  
 <span data-ttu-id="163fc-110">ソリューションは、使用状況の便利で一貫した方法を提供する必要があります。</span><span class="sxs-lookup"><span data-stu-id="163fc-110">The solution needs to provide a convenient and consistent way of being used.</span></span> <span data-ttu-id="163fc-111">サービス インターフェイスでは、他のアプリケーションが使用できる方法を指定します。</span><span class="sxs-lookup"><span data-stu-id="163fc-111">The service interface specifies how other applications can use it.</span></span> <span data-ttu-id="163fc-112">ソリューションは、IBM WebSphere MQ を使用してレガシ アプリケーションと通信する必要があります、ために、IBM WebSphere MQ をサービス インターフェイスの一部にする必要があります。</span><span class="sxs-lookup"><span data-stu-id="163fc-112">Because the solution needs to communicate with a legacy application using IBM WebSphere MQ, IBM WebSphere MQ needs to be part of the service interface.</span></span> <span data-ttu-id="163fc-113">ただし、新しいアプリケーションでは、Web サービスのインターフェイスでは、最適に見えます。</span><span class="sxs-lookup"><span data-stu-id="163fc-113">However, for newer applications, a Web service interface seems an obvious choice.</span></span> <span data-ttu-id="163fc-114">Web サービス インターフェイスは、他のアプリケーション サービスを使用して最大限の柔軟性を提供します。</span><span class="sxs-lookup"><span data-stu-id="163fc-114">A Web service interface provides maximum flexibility for other applications using the service.</span></span> <span data-ttu-id="163fc-115">ここでは、BizTalk Server の柔軟性、デュアル サービス インターフェイスに使用できます。</span><span class="sxs-lookup"><span data-stu-id="163fc-115">Here, we can use the flexibility of BizTalk Server to have a dual service interface.</span></span> <span data-ttu-id="163fc-116">オーケストレーションを Web サービスとして公開する方法の詳細については、次を参照してください。 [Web サービスにオーケストレーションをマップする方法](../core/how-to-map-orchestrations-to-web-services.md)します。</span><span class="sxs-lookup"><span data-stu-id="163fc-116">For information about exposing orchestrations as Web services, see [How to Map Orchestrations to Web Services](../core/how-to-map-orchestrations-to-web-services.md).</span></span>  
  
 <span data-ttu-id="163fc-117">その他の接続は、サービス インターフェイスと、受信者の一覧と、バックエンド アプリケーション間、およびバックエンド アプリケーション、アグリゲーター、およびサービスのインターフェイス間で、受信者の一覧。</span><span class="sxs-lookup"><span data-stu-id="163fc-117">The other connections are those between the service interface and the recipient list, between the recipient list and the back-end applications, and among the back-end applications, aggregator, and the service interface.</span></span>  
  
 <span data-ttu-id="163fc-118">受信者の一覧への接続が同期の場合、ソリューションが相関関係を使用して、受信者の一覧にすべてのメッセージが送信され、受信したことを確認する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="163fc-118">If the connection to the recipient list is synchronous, the solution does not need to use correlations to ensure all messages to the recipient list are sent and received.</span></span> <span data-ttu-id="163fc-119">バックエンド アプリケーションと、アグリゲーター間の接続は、同じ理由で同期されることができます。</span><span class="sxs-lookup"><span data-stu-id="163fc-119">The connections between the back-end applications and the aggregator can be synchronous for the same reasons.</span></span> <span data-ttu-id="163fc-120">アグリゲーターでは、3 つのクエリの応答を完了するバックエンド アプリケーションすべてから応答が必要です。</span><span class="sxs-lookup"><span data-stu-id="163fc-120">The aggregator needs the responses from all three of the back-end applications to complete the query response.</span></span> <span data-ttu-id="163fc-121">応答時間は、同期接続が適切なが、ソリューションを簡素化されるように、短いことがあります。</span><span class="sxs-lookup"><span data-stu-id="163fc-121">Response times should be short so that synchronous connections are appropriate and simplify the solution.</span></span>  
  
 <span data-ttu-id="163fc-122">アグリゲーター パターンでは通常は、完全性条件です。</span><span class="sxs-lookup"><span data-stu-id="163fc-122">In the aggregator pattern, there is usually a completeness condition.</span></span> <span data-ttu-id="163fc-123">複数のバック エンド サーバーが存在し、応答時間がかかる場合は、完全性条件可能性があります、たとえば、応答の受信を少なくとも 1 つ、一定時間内で。</span><span class="sxs-lookup"><span data-stu-id="163fc-123">In cases where there are multiple back-end servers and response times are slow, the completeness condition might be, for example, receiving at least one response in a given time period.</span></span> <span data-ttu-id="163fc-124">このサービス指向ソリューションでは、最後のメッセージを構築するために 3 つすべての応答が必要です。</span><span class="sxs-lookup"><span data-stu-id="163fc-124">This service-oriented solution requires all three responses in order to construct the final message.</span></span> <span data-ttu-id="163fc-125">そのため、ここでは、完全性条件が受信して 3 つすべての応答。</span><span class="sxs-lookup"><span data-stu-id="163fc-125">Thus, here, the completeness condition is receiving all three responses.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="163fc-126">コピーすることで、ソリューションが関連付け識別子を追加します IBM WebSphere MQ 経由で要求を受信するときに、 **MQMD_MsgId**値を**MQMD_CorrelId**の応答メッセージ。</span><span class="sxs-lookup"><span data-stu-id="163fc-126">When receiving requests through IBM WebSphere MQ, the solution adds a correlation identifier by copying the **MQMD_MsgId** value to the **MQMD_CorrelId** of the response message.</span></span> <span data-ttu-id="163fc-127">これは、要求/応答で競合状態を回避するために、MQSeries アダプターを使用する標準的な方法の一部です。</span><span class="sxs-lookup"><span data-stu-id="163fc-127">This is part of the standard way of using the MQSeries adapter in request-reply to avoid a possible race condition.</span></span> <span data-ttu-id="163fc-128">詳細については、次を参照してください。[関連付けメッセージを使用して要求/応答](../core/correlating-messages-using-request-reply.md)します。</span><span class="sxs-lookup"><span data-stu-id="163fc-128">For more information, see [Correlating Messages Using Request-Reply](../core/correlating-messages-using-request-reply.md).</span></span>  
  
## <a name="determining-orchestration-boundaries"></a><span data-ttu-id="163fc-129">オーケストレーションの境界を決定します。</span><span class="sxs-lookup"><span data-stu-id="163fc-129">Determining Orchestration Boundaries</span></span>  
 <span data-ttu-id="163fc-130">要求だけでなく、Web サービス インターフェイスを通じて、IBM WebSphere MQ キューからソリューションを許可する必要があります。</span><span class="sxs-lookup"><span data-stu-id="163fc-130">The solution must allow for requests from an IBM WebSphere MQ queue as well as through the Web service interface.</span></span> <span data-ttu-id="163fc-131">1 つのオーケストレーション、IBM WebSphere MQ 入力を別には、第 3 の処理の大部分に、サービス インターフェイスを配置するには、処理から切り離されて外部通信が保持されます。</span><span class="sxs-lookup"><span data-stu-id="163fc-131">Putting the service interface into one orchestration, the IBM WebSphere MQ input into another, and the bulk of the processing into a third keeps the external communication separated from the processing.</span></span>  
  
## <a name="translating-the-components-into-orchestration-shapes"></a><span data-ttu-id="163fc-132">コンポーネントのオーケストレーション図形への変換</span><span class="sxs-lookup"><span data-stu-id="163fc-132">Translating the Components into Orchestration Shapes</span></span>  
 <span data-ttu-id="163fc-133">図形に変換するパターンは、最終的なソリューションでに 1 つのオーケストレーション。</span><span class="sxs-lookup"><span data-stu-id="163fc-133">The patterns to translate into shapes will, in the final solution, be in a single orchestration.</span></span> <span data-ttu-id="163fc-134">BizTalk Server メッセージ ボックス サブスクリプションの作成などのコンテンツ ベースのルーターを作成するさまざまな方法はあります。</span><span class="sxs-lookup"><span data-stu-id="163fc-134">There are numerous ways to create a content-based router in BizTalk Server, including creating MessageBox subscriptions.</span></span> <span data-ttu-id="163fc-135">ソリューションでは、ルーティング、メッセージ ボックス サブスクリプションを使用します。</span><span class="sxs-lookup"><span data-stu-id="163fc-135">In the solution, the routing uses MessageBox subscriptions.</span></span> <span data-ttu-id="163fc-136">式図形では、メッセージには、必要なフィールドの値が含まれて かどうかを評価します。</span><span class="sxs-lookup"><span data-stu-id="163fc-136">An expression shape evaluates whether or not the message includes values for the required fields.</span></span> <span data-ttu-id="163fc-137">判断図形は、式図形内の変数セットを評価し、オーケストレーションを使用してパスを選択します。</span><span class="sxs-lookup"><span data-stu-id="163fc-137">A decision shape evaluates the variable set in the expression shape and selects the path through the orchestration.</span></span>  
  
 <span data-ttu-id="163fc-138">**CustomerService**オーケストレーションでは、並列図形を使用してバックエンド アプリケーションにメッセージを送信し、応答を同時に受信します。</span><span class="sxs-lookup"><span data-stu-id="163fc-138">The **CustomerService** orchestration uses the parallel shape to send messages to the backend applications and receive responses simultaneously.</span></span> <span data-ttu-id="163fc-139">1 つのアプリケーションが、次の要求を行う前に完了を待機する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="163fc-139">It does not have to wait on one application finishing before making the next request.</span></span> <span data-ttu-id="163fc-140">アプリケーションの数が多くの場合、変更された場合、またはアプリケーションへの接続の信頼性が低い場合は、オーケストレーションはパターンを異なる方法で変換する必要があります。</span><span class="sxs-lookup"><span data-stu-id="163fc-140">If the number of applications were to change frequently, or if the connections to the applications were unreliable, then the orchestration would need to translate the pattern differently.</span></span>  
  
 <span data-ttu-id="163fc-141">ソリューションで、アグリゲータは 3 つの応答メッセージから要素を組み合わせる必要があります。</span><span class="sxs-lookup"><span data-stu-id="163fc-141">In the solution the aggregator must combine elements from three response messages.</span></span> <span data-ttu-id="163fc-142">並列図形を使用してにより、バックエンド システムとの通信が並列であります。</span><span class="sxs-lookup"><span data-stu-id="163fc-142">Using the parallel shape ensures that the communication with the back-end systems is parallel.</span></span> <span data-ttu-id="163fc-143">また、続行すると、アグリゲーターが常に把握、図形がすべての応答またはタイムアウトを受信するまで終了しないためです。</span><span class="sxs-lookup"><span data-stu-id="163fc-143">And, because the shape does not terminate until it receives all responses or a timeout, the aggregator will always know when it can proceed.</span></span> <span data-ttu-id="163fc-144">オーケストレーションでは、3 つのバックエンド応答メッセージと元の要求メッセージから応答メッセージ内の要素までの要素をマップする変換図形を使用します。</span><span class="sxs-lookup"><span data-stu-id="163fc-144">The orchestration uses a transform shape that maps elements from the three backend response messages and the original request message to elements in the response message.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="163fc-145">バックエンド システムとの通信がタイムアウトで場合もあります。囲むことで、タイムアウト期間を設定することができます、**受信**で図形を**スコープ**図形と設定、**タイムアウト**スコープのプロパティ。</span><span class="sxs-lookup"><span data-stu-id="163fc-145">The communications with the back-end systems may also time out. You can set the time-out period by enclosing the **Receive** shape in a **Scope** shape and setting the **Timeout** property of the scope.</span></span>  
  
 <span data-ttu-id="163fc-146">オーケストレーション図形の一覧については、次を参照してください。[オーケストレーション図形](../core/orchestration-shapes.md)します。</span><span class="sxs-lookup"><span data-stu-id="163fc-146">For a complete list of orchestration shapes, see [Orchestration Shapes](../core/orchestration-shapes.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="163fc-147">参照</span><span class="sxs-lookup"><span data-stu-id="163fc-147">See Also</span></span>  
 <span data-ttu-id="163fc-148">[パターン、サービス指向ソリューション](../core/patterns-in-the-service-oriented-solution.md) </span><span class="sxs-lookup"><span data-stu-id="163fc-148">[Patterns in the Service Oriented Solution](../core/patterns-in-the-service-oriented-solution.md) </span></span>  
 [<span data-ttu-id="163fc-149">サービス指向ソリューションのコンポーネント</span><span class="sxs-lookup"><span data-stu-id="163fc-149">Components of the Service Oriented Solution</span></span>](../core/components-of-the-service-oriented-solution.md)