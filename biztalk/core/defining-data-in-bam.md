---
title: "BAM でデータを定義する |Microsoft ドキュメント"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- aggregations [BAM], dimensions
- monitoring business activities [BAM], BAM Activity Wizard
- monitoring business activities [BAM], time intervals
- aggregations [BAM], measurements
- monitoring business activities [BAM], views
- monitoring business activities [BAM], aggregations
- Excel add-in [BAM], collecting data
- aggregations [BAM], scheduling
- monitoring business activities [BAM], milestone groups
- aggregations [BAM], real-time data
ms.assetid: 501a1c08-3979-4a99-94d9-0d1b5ec4266b
caps.latest.revision: "11"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e6acbc0ea1d80ec129d691d6c54b6eefd626d0e9
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/20/2017
---
# <a name="defining-data-in-bam"></a>BAM でのデータの定義
BAM Excel アドインを使用すると、BAM で収集するデータの種類と、収集したデータを共有する方法を定義できます。 データを定義するには BAM アクティビティを使用します。他のユーザーが参照できるデータを定義するには BAM ビューを使用します。  
  
## <a name="activities"></a>アクティビティ  
 BAM アクティビティを作成すると、BAM で監視するビジネス プロセスに関する情報を定義できます。 BAM アクティビティは、注文書の処理や製品の出荷などの特定のビジネス プロセスを表します。 ビジネス プロセスには、マイルストーンとビジネス データの定義済みのセットが含まれます。 たとえば、発注プロセスには、承認済み、拒否、配信済みなどのマイルストーンと、顧客名や製品などのビジネス データを含めることができます。  
  
 BAM アクティビティの目的は、プロセスに関する履歴 (マイルストーン) とデータをインフォメーション ワーカーに提示することです。 BAM アクティビティは、BizTalk Server の実際の実装から独立した高度な抽象概念です。 BAM の概念の概要については、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] ヘルプのトピック「ビジネス アクティビティ監視」を参照してください。  
  
 BAM アクティビティ ウィザードを使用すると、少なくとも 1 つのアクティビティ項目を含む BAM アクティビティを定義できます。 アクティビティ内の関連するアクティビティ項目はグループ化できます。また、アクティビティ項目を使用して、ビジネス プロセスで使用できるデータの種類を示すことができます。  
  
 BAM で使用できるアクティビティ項目の種類を次の表で説明します。  
  
|アイテムの種類|Description|  
|---------------|-----------------|  
|ビジネス マイルス トーン|日付/時刻値。 たとえば、注文書が承認された日付です。|  
|ビジネス データ - Text|任意の英数字の文字列。 たとえば、出荷先 : 市区町村、都道府県、郵便番号です。|  
|ビジネス データ - Integer|整数値です。 たとえば、注文の合計数です。|  
|ビジネス データ - 浮動小数点します。|decimal 値です。 たとえば、PO の合計金額です。|  
  
 たとえば、発注アクティビティでは、次の表に示すようなアクティビティ項目を作成できます。  
  
|アクティビティ項目|アイテムの種類|  
|-------------------|---------------|  
|Product|ビジネス データ-テキスト|  
|City|ビジネス データ-テキスト|  
|状態|ビジネス データ-テキスト|  
|Amount|ビジネス データ - Float|  
|Quantity|ビジネス データ-整数|  
|承認|ビジネス マイルス トーン|  
|Delivered|ビジネス マイルス トーン|  
|拒否|ビジネス マイルス トーン|  
|受信しました。|ビジネス マイルス トーン|  
  
 金額は小数値の可能性があるため、浮動小数点を指定しています。 数量は、この例では常に整数値なので、整数を指定しています。 承認、配送、拒否、受信はすべて、発注プロセスのマイルストーンです。  
  
## <a name="views"></a>ビュー  
 ビューを作成すると、アクティビティのデータをユーザーに公開できます。 発注アクティビティに基づいてビューを作成するときに、アクティビティ項目に含めるデータを定義します。 BAM のビュー データは、ディメンション、メジャー、期間、マイルストーン グループ、進捗ディメンションとして定義します。  
  
 ビューには 1 つ以上のビュー項目が含まれます。 次の種類のビュー項目を作成できます。  
  
-   期間  
  
-   マイルストーン グループ  
  
-   集計  
  
### <a name="durations"></a>期間  
 期間は時間間隔です。 期間は、時間間隔の開始と終了を定義するマイルストーンで表されます。 上の表に示されているマイルストーンで作成できる期間を次の表に示します。  
  
|Duration|開始マイルストーン|終了マイルストーン|  
|--------------|---------------------|-------------------|  
|1|受信しました。|承認|  
|2|受信しました。|Delivered|  
|3|受信しました。|拒否|  
|4|承認|Delivered|  
  
 この表で、最初の期間 (期間 1) は、注文書が BizTalk Server で受信されたときに始まり、承認されたときに終了する時間間隔です。  
  
### <a name="milestone-groups"></a>マイルストーン グループ  
 マイルストーン グループを作成すると、複数のマイルストーンを 1 つのエンティティとして使用できます。たとえば、1 つのプロセスの開始マイルストーンと終了マイルストーンをまとめて、プロセスの期間全体を表す 1 つのマイルストーンを作成できます。  
  
### <a name="aggregations"></a>集計  
 集計を使用すると、データベースからデータを更新するときの応答時間を改善できます。 Excel では、集計を事前計算された要約データとして定義し、質問の答えをあらかじめ用意しておくことで、クエリの応答時間を短縮します。 たとえば、数十万行が格納されているデータ ウェアハウスのファクト テーブルに対して、特定の 2 つの製品の出荷スケジュールを要求するクエリがあるとします。この計算でファクト テーブルをスキャンする必要があると、応答に時間がかかります。 ただし、このクエリの回答となる集計データがあらかじめ計算されていれば、即座に応答できます。  
  
 次に、事前に計算された集計データの例を示します。  
  
 ![](../core/media/bam-olap-cube.gif "bam_olap_cube")  
  
 この図では、2 か月間に特定の場所への出荷された各製品数の概要を示しています。 通常、Excel では、このデータをメジャーとして定義し、 フィルター選択または分類に使用するデータをディメンションとして定義します。  
  
 BAM ブックでは 2 種類の集計を定義できます。  
  
-   リアルタイム集計  
  
-   スケジュール済みの集計  
  
### <a name="real-time-aggregations"></a>リアルタイム集計  
 リアルタイム集計 (RTA) を使用すると、ビジネス プロセスの現在の状態を確認でき、プロセスのボトルネックを簡単に特定できます。  
  
 BAM データはピボットテーブル内に表示されます。 BAM ピボットテーブルは RTA またはスケジュール済みの集計として定義できます。 RTA を使用すると、たとえば特定の PO が出荷処理中であるなど、データの現時点のビューを表示できます。 1 日のうちいつでも画面を更新して、データのビューを最新の状態にできます。  
  
 多次元集計の特定のスライスでは、時間が重要な要素になる場合があります。このような場合には、スライスをリアルタイムで使用することが必要になります。 たとえば、生鮮食料品を販売する業者では、配送の各段階での製品数量の集計をリアルタイムで利用できるようにする必要があります。 同時に、代表的な顧客の年齢などの他の集計を、ビジネス インテリジェンス分析のために月末にのみ実行する必要がある場合もあります。  
  
> [!IMPORTANT]
>  同じ BAM アクティビティを使用する RTA を複数定義しないでください。 そのような RTA を複数定義した場合、BAM データをアーカイブしたときに RTA データが不正確になります。  
  
 多次元データの参照については、Excel のヘルプでピボットテーブルに関するトピックを参照してください。  
  
### <a name="scheduled-aggregations"></a>スケジュール済みの集計  
 既定では、すべての BAM 集計はスケジュール済みの集計です。 スケジュール済みの集計は、今朝の出荷の概要など、指定した期間のビジネス データのスナップショットを表します。 集計が処理される時期については、データベース管理者に問い合わせてください。集計が処理されると、履歴データを見ることができます。  
  
### <a name="dimensions-and-measures"></a>ディメンションとメジャー  
 ディメンションとメジャーを使用すると、データの集計を作成できます。  
  
-   ディメンションはファクトの説明です。  
  
-   メジャーはファクトの値です。  
  
 たとえばファクトは、在庫にある "3 台の赤い自動車" などになります。 製品の説明:"car"と「赤い」はディメンションです。 ファクトの値である "3" はメジャーです。 自動車の価格がファクトに含まれている場合、自動車の価格はディメンションですが、在庫にある自動車の平均価格はメジャーです。 Microsoft SQL Server Books Online では、メジャーを "集計および分析された代表値" と表現しています。 言い換えれば、数える、平均する、または数学的な関数を適用することで得られるものはメジャーです。  
  
 次の種類のディメンションを作成できます。  
  
-   進捗ディメンション  
  
-   データ ディメンション  
  
-   時間ディメンション  
  
-   数値範囲ディメンション  
  
## <a name="progress-dimensions"></a>進捗ディメンション  
 BAM には新しい種類のディメンション: 進捗ディメンションです。 進捗ディメンションを作成すると、処理中のアクティビティの進捗状況に関する集計を作成できます。  
  
 たとえば、1,000 件の注文を受信する発注ビジネス プロセスがあるとします。 行に進捗ディメンションを使用すると、次のテーブルを作成できます。  
  
|OrderProgress_Level1|Count|  
|---------------------------|-----------|  
|受信しました。|1000|  
  
 受信プロセスを開くと、アクティビティの進捗に関するより詳細な情報を表示できます。以下にその例を示します。  
  
|||Count|  
|------|------|-----------|  
|受信しました。|評価中|300|  
||承認|500|  
||拒否|200|  
  
 このテーブルは、受信した 1,000 件の注文のうち 500 件が承認され、200 件が拒否され、300 件が評価中であることを表しています。  
  
 受信、承認、拒否はマイルストーンを表します。 "数" 列の対応する数字は、これらのマイルストーンを通過した注文の数を表しています。 "評価中" は、注文が "受信" マイルストーンから "承認" マイルストーンまたは "拒否" マイルストーンの間で通過する段階です。  
  
 進捗ディメンションは他の任意のディメンションと組み合わせて使用できます。 たとえば、行に進捗ディメンションである "発注進捗" を使用して、列にデータ ディメンションである "製品" を使用すると、次の結果が得られます。  
  
|||テニス ラケット|サッカー ボール|  
|------|------|---------------------|------------------|  
|受信しました。|評価中|250|50|  
||承認|200|300|  
||拒否|150|50|  
  
 進捗ディメンションでは、リアルタイム集計 (RTA) に基づくグラフに特に有用な情報を提供します。 RTA を使用すると、ビジネス プロセスの現在の状態を確認でき、プロセスのボトルネックを簡単に特定できます。  
  
 購入のマイルス トーンが進捗ディメンションをシーケンシャルにすることができますを注文: 次の手順を開始する前に、最初の手順を完了します。 また、マイルストーンは平行して完了することもあります。 段階的なステップは子ステップで、平行ステップは兄弟ステップです。 発注書の処理では、検証は、発注書を受信するとすぐを開始します。 確認ステップは、"受信" マイルストーンと同時に発生する一時的なステップであるため、"受信" マイルストーンと兄弟になります。 注文は、注文書の受信後にのみ承認されます。つまり、"承認" マイルストーンは "受信" マイルストーンの子になります。  
  
## <a name="data-dimension"></a>データ ディメンション  
 データ ディメンションを定義すると、BAM アクティビティ内の複数のテキスト項目の値を行または列で使用できるようになります。 たとえば、次の表を作成する製品の名前のデータ ディメンションを使用できます。  
  
|Product|Count|  
|-------------|-----------|  
|テニス ラケット|100|  
|サッカー ボール|200|  
  
 また、BAM ビュー ウィザードで、1 つ以上のデータ ディメンションを定義できます。 たとえば、州や市の各レベルが含まれる場所の名前のデータ ディメンションを定義して、次のテーブルを作成できます。  
  
|Product|Los Angeles|San Francisco|Seattle|  
|-------------|-----------------|-------------------|-------------|  
|テニス ラケット|50|20|30|  
|サッカー ボール|130|50|20|  
  
 このテーブルでは、製品ディメンションは行として使用され、場所ディメンションは列として使用されています。  
  
## <a name="time-dimension"></a>時間ディメンション  
 時間ディメンションを作成すると、時間に関連する集計を作成できます。 たとえば、次の表を作成する、時間ディメンションを使用できます。  
  
|年|Month|Count|  
|----------|-----------|-----------|  
|2003|January|120|  
||February|230|  
||March|350|  
||April|280|  
  
 時間ディメンションは他の任意のディメンションと組み合わせて使用できます。 たとえば、行に時間ディメンションを使用し、列にデータ ディメンションを使用して、次のテーブルを作成できます。  
  
|Month|テニス ラケット|サッカー ボール|  
|-----------|---------------------|------------------|  
|January|50|70|  
|February|120|110|  
|March|300|50|  
|April|220|60|  
  
## <a name="numeric-range-dimension"></a>数値範囲ディメンション  
 数値範囲ディメンションを使用すると、フレンドリ名で数値範囲を分類した集計を作成できます。 たとえば、ビジネス アナリストは、次の範囲を設定した "PO サイズ" という名前の数値範囲ディメンションを作成できます。  
  
 小 (0 ～ 100 ドルの注文)  
  
 中 (100 ドルを超え、1,000 ドル以下の注文)  
  
 大 (1,000 ドルを超える注文)  
  
> [!NOTE]
>  注文の合計が 0 より小さいなど、定義した範囲内にない場合は、範囲外のデータを格納する "範囲外" という行が BAM により自動的に作成されます。  
  
|PO サイズ|Count|  
|-------------|-----------|  
|小|500|  
|Medium|350|  
|大|225|  
  
> [!NOTE]
>  同じデータ エイリアスを参照する複数の数値範囲ディメンションは作成できません。