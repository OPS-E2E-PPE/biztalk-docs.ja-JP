---
title: ビジネス プロセスの定義 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: e5e0fdfe-e298-4f32-a7c5-d081b926a206
caps.latest.revision: 16
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 098001041c47b096ab2c2079d4f830e96ed1e19f
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65352395"
---
# <a name="defining-business-processes"></a><span data-ttu-id="8e503-102">ビジネス プロセスの定義</span><span class="sxs-lookup"><span data-stu-id="8e503-102">Defining Business Processes</span></span>
<span data-ttu-id="8e503-103">異なるシステム間でメッセージ交換は、問題の解決のために必要な部分を[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]アドレス。</span><span class="sxs-lookup"><span data-stu-id="8e503-103">The exchange of messages between different systems is a necessary part of solving the problems that [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] addresses.</span></span> <span data-ttu-id="8e503-104">実際の目標が定義し、アプリケーションに基づいてビジネス プロセスを実行します。</span><span class="sxs-lookup"><span data-stu-id="8e503-104">The real goal, however, is to define and execute business processes based on the applications.</span></span> <span data-ttu-id="8e503-105">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]エンジンでは、オーケストレーションを使用して、これらのビジネス プロセスのロジックを定義します。</span><span class="sxs-lookup"><span data-stu-id="8e503-105">The [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] engine uses orchestrations to define the logic of these business processes.</span></span> <span data-ttu-id="8e503-106">作成し、ビジネス ルールのグループを評価、ビジネス ルール エンジンを使用します。</span><span class="sxs-lookup"><span data-stu-id="8e503-106">To create and evaluate groups of business rules, it uses the Business Rule Engine.</span></span> <span data-ttu-id="8e503-107">このセクションでは、オーケストレーションとビジネス ルール エンジンの両方について説明します。</span><span class="sxs-lookup"><span data-stu-id="8e503-107">This section describes both orchestrations and the Business Rule Engine.</span></span>  
  
## <a name="using-orchestrations"></a><span data-ttu-id="8e503-108">オーケストレーションを使用してください。</span><span class="sxs-lookup"><span data-stu-id="8e503-108">Using Orchestrations</span></span>  
 <span data-ttu-id="8e503-109">自動化されたビジネス プロセスのロジックは、Microsoft Visual Basic または Microsoft Visual などの言語で直接実装できますC#します。</span><span class="sxs-lookup"><span data-stu-id="8e503-109">The logic of an automated business process can be implemented directly in a language such as Microsoft Visual Basic or Microsoft Visual C#.</span></span> <span data-ttu-id="8e503-110">まだ作成、保守、および従来のプログラミング言語で複雑なビジネス プロセスを管理することは困難です。</span><span class="sxs-lookup"><span data-stu-id="8e503-110">Yet creating, maintaining, and managing complex business processes in conventional programming languages can be challenging.</span></span> <span data-ttu-id="8e503-111">採用されておりとは異なり[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]別のアプローチを採用します。</span><span class="sxs-lookup"><span data-stu-id="8e503-111">Unlike its predecessors, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] takes a different approach.</span></span> <span data-ttu-id="8e503-112">ビジネス管理者や開発者は、ビジネス プロセスをグラフィカルに定義できます。</span><span class="sxs-lookup"><span data-stu-id="8e503-112">It enables business managers or developers to define a business process graphically.</span></span> <span data-ttu-id="8e503-113">これは、プログラミング言語で直接プロセスを作成するよりも高速化でき、簡単、プロセスを理解、説明、および変更します。</span><span class="sxs-lookup"><span data-stu-id="8e503-113">Doing this can be faster than building the process directly in a programming language, and it also makes the process easier to understand, explain, and change.</span></span> <span data-ttu-id="8e503-114">この方法で作成されたビジネス プロセスをすることもできます、ビジネス アクティビティ監視 (BAM) テクノロジが悪用するという事実をより簡単に監視します。</span><span class="sxs-lookup"><span data-stu-id="8e503-114">Business processes built in this fashion can also be monitored more easily, a fact that is exploited by the Business Activity Monitoring (BAM) technology.</span></span>  
  
 <span data-ttu-id="8e503-115">開発者にとって、3 つの主要なツールに依存オーケストレーションを作成します BizTalk マッパーは、これらのスキーマとのビジネス ロジックを指定するためのオーケストレーション デザイナー間の変換を定義するために、XML スキーマを作成するため、BizTalk エディター。処理します。</span><span class="sxs-lookup"><span data-stu-id="8e503-115">For a developer, creating an orchestration relies on three primary tools: the BizTalk Editor for creating XML schemas, the BizTalk Mapper for defining translations between those schemas, and the Orchestration Designer for specifying the logic of business processes.</span></span> <span data-ttu-id="8e503-116">内でホストされるすべてのこれらのツール[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]開発者の一貫した環境を提供します。</span><span class="sxs-lookup"><span data-stu-id="8e503-116">All of these tools are hosted inside [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], providing a consistent environment for developers.</span></span> <span data-ttu-id="8e503-117">このセクションでは、点について説明しますが、どのように連動するこれらの各ツールします。</span><span class="sxs-lookup"><span data-stu-id="8e503-117">This section describes what each of these tools does and how they work together.</span></span>  
  
### <a name="creating-schemas-the-biztalk-editor"></a><span data-ttu-id="8e503-118">スキーマの作成。BizTalk エディター</span><span class="sxs-lookup"><span data-stu-id="8e503-118">Creating Schemas: The BizTalk Editor</span></span>  
 <span data-ttu-id="8e503-119">オーケストレーションは、いくつかの XML スキーマに準拠した各 XML ドキュメントを使用します。</span><span class="sxs-lookup"><span data-stu-id="8e503-119">Orchestrations work with XML documents, each of which conforms to some XML schema.</span></span> <span data-ttu-id="8e503-120">BizTalk エディターでは、XML スキーマ定義言語 (XSD) を使用してこれらのスキーマでは、基本的に、構造とドキュメントの情報の種類を定義する定義開発者を使用できます。</span><span class="sxs-lookup"><span data-stu-id="8e503-120">The BizTalk Editor enables developers to define these schemas, which essentially define the structure and types of a document’s information, using the XML Schema Definition language (XSD).</span></span>  
  
 <span data-ttu-id="8e503-121">ツールのサポートなしの生の XSD スキーマを作成することは、単純ではありません。</span><span class="sxs-lookup"><span data-stu-id="8e503-121">Creating raw XSD schemas without some tool support is not simple.</span></span> <span data-ttu-id="8e503-122">このために必要な手順をよりわかりやすく、BizTalk エディターができます: 通常は開発者-、グラフィカルな階層でその要素を定義することで、スキーマを作成します。</span><span class="sxs-lookup"><span data-stu-id="8e503-122">To make this necessary step more approachable, the BizTalk Editor enables users—probably developers—to build a schema by defining its elements in a graphical hierarchy.</span></span> <span data-ttu-id="8e503-123">既存のスキーマは、ファイルまたはアクセス可能な Web サービスのいずれかからインポートすることもできます。</span><span class="sxs-lookup"><span data-stu-id="8e503-123">Existing schemas can also be imported from either files or accessible Web services.</span></span> <span data-ttu-id="8e503-124">を取得しているが、BizTalk の基本マップ、スキーマが使用されます。</span><span class="sxs-lookup"><span data-stu-id="8e503-124">However they’re acquired, schemas are used as the basis for BizTalk maps.</span></span>  
  
### <a name="mapping-between-schemas-the-biztalk-mapper"></a><span data-ttu-id="8e503-125">スキーマ間のマッピング。BizTalk マッパー</span><span class="sxs-lookup"><span data-stu-id="8e503-125">Mapping Between Schemas: The BizTalk Mapper</span></span>  
 <span data-ttu-id="8e503-126">通常、ビジネス プロセスを実装するオーケストレーションは、いくつかのドキュメントを受信し、他のユーザーに送信します。</span><span class="sxs-lookup"><span data-stu-id="8e503-126">An orchestration implementing a business process typically receives some documents and sends others.</span></span> <span data-ttu-id="8e503-127">多くの場合、受信したドキュメント内の情報の一部は、おそらくいくつかの方法で変換、送信するドキュメントに転送されます。</span><span class="sxs-lookup"><span data-stu-id="8e503-127">Often, part of the information in the received documents is transferred to the sent documents, perhaps transformed in some way.</span></span> <span data-ttu-id="8e503-128">たとえば、注文調達プロセスは、いくつかのアイテムの注文を受信し、順序がいくつかの理由で拒否されたことを示すメッセージを送信します。</span><span class="sxs-lookup"><span data-stu-id="8e503-128">For example, an order fulfillment process might receive an order for some number of items, then send back a message indicating that the order was declined for some reason.</span></span> <span data-ttu-id="8e503-129">情報は、注文から要求 id と数量の注文など可能性がありますにコピーされる受信した注文メッセージのフィールドから拒否メッセージ内のフィールド。</span><span class="sxs-lookup"><span data-stu-id="8e503-129">Information from the order, such as a request identifier and the quantity ordered, might be copied from fields in the received order message into fields in the rejection message.</span></span> <span data-ttu-id="8e503-130">もう 1 つのドキュメントから、マップと呼ばれる、変換を定義するのには、BizTalk マッパーを使用できます。</span><span class="sxs-lookup"><span data-stu-id="8e503-130">The BizTalk Mapper can be used to define a transformation, called a map, from one document to the other.</span></span>  
  
 <span data-ttu-id="8e503-131">![スキーマ間のマッピング](../core/media/understandingbts-2010-mapper.gif "UnderstandingBTS_2010_Mapper")</span><span class="sxs-lookup"><span data-stu-id="8e503-131">![Mapping Between Schemas](../core/media/understandingbts-2010-mapper.gif "UnderstandingBTS_2010_Mapper")</span></span>  
  
 <span data-ttu-id="8e503-132">表示上の図、としては、各マップは、これらのスキーマ内の要素間のリレーションシップを定義する 2 つの XML スキーマ間のグラフィカルな関連付けとして表されます。</span><span class="sxs-lookup"><span data-stu-id="8e503-132">As the figure above shows, each map is expressed as a graphical correlation between two XML schemas that defines a relationship between elements in those schemas.</span></span> <span data-ttu-id="8e503-133">World Wide Web Consortium (W3C) が、この種の XML のスキーマ間における変換を表現する標準的な方法としては拡張可能なスタイル シート言語変換 (XSLT) を定義し、マップでのように[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]XSLT 変換として実装されます。</span><span class="sxs-lookup"><span data-stu-id="8e503-133">The World Wide Web Consortium (W3C) has defined the Extensible Stylesheet Language Transformation (XSLT) as a standard way to express these kinds of transformations between XML schemas, and so maps in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] are implemented as XSLT transformations.</span></span>  
  
 <span data-ttu-id="8e503-134">マップ内で定義された変換は 1 つのドキュメントから別の値をコピーするなど、簡単にすることはできます。</span><span class="sxs-lookup"><span data-stu-id="8e503-134">The transformation defined in a map can be simple, such as copying values unchanged from one document to another.</span></span> <span data-ttu-id="8e503-135">このような直接のデータのコピーは、BizTalk マッパーで、送信先スキーマ内の対応する送信元スキーマ内の適切な要素を結ぶ線として表示されているリンクを使用して表現されます。</span><span class="sxs-lookup"><span data-stu-id="8e503-135">Direct data copies like this are expressed using a link, which is shown in the BizTalk Mapper as a line connecting the appropriate elements in the source schema with their counterparts in the destination schema.</span></span> <span data-ttu-id="8e503-136">複雑な変換は、functoid を使用することもできます。</span><span class="sxs-lookup"><span data-stu-id="8e503-136">More complex transformations are also possible using functoids.</span></span> <span data-ttu-id="8e503-137">Functoid は、XML スキーマ間の任意の複雑なマッピングを定義できる実行可能コードのチャンク、前述のように、BizTalk マッパーを表しますが変換される要素を結ぶ線上のボックスとして。</span><span class="sxs-lookup"><span data-stu-id="8e503-137">A functoid is a chunk of executable code that can define arbitrarily complex mappings between XML schemas, and as shown above, the BizTalk Mapper represents it as a box on the line connecting the elements being transformed.</span></span> <span data-ttu-id="8e503-138">これらの変換のいくつかは非常に一般的な[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]組み込みの functoid の数が含まれています。</span><span class="sxs-lookup"><span data-stu-id="8e503-138">Because some of those transformations are fairly common, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] includes a number of built-in functoids.</span></span> <span data-ttu-id="8e503-139">これらの組み込みの functoid は、次のカテゴリに分類されます。</span><span class="sxs-lookup"><span data-stu-id="8e503-139">These built-in functoids are grouped into categories, which include the following:</span></span>  
  
- <span data-ttu-id="8e503-140">追加、乗算、ソース ドキュメント内のフィールドの値を除算して、ターゲット ドキュメント内のフィールドに、結果を格納するなどの操作を実行する数値演算 functoid。</span><span class="sxs-lookup"><span data-stu-id="8e503-140">Mathematical functoids that perform operations such as adding, multiplying, and dividing the values of fields in the source document and storing the result in a field in the target document.</span></span>  
  
- <span data-ttu-id="8e503-141">逆に、対応する ASCII を数値に変換する変換 functoid。</span><span class="sxs-lookup"><span data-stu-id="8e503-141">Conversion functoids that convert a numeric value to its ASCII equivalent and vice-versa.</span></span>  
  
- <span data-ttu-id="8e503-142">要素または属性かどうかを判断するために使用する論理演算 functoid は、ソース ドキュメントで指定された値の間の論理比較に基づいて、ターゲット ドキュメントで作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8e503-142">Logical functoids that can be used to determine whether an element or attribute should be created in the target document based on a logical comparison between specified values in the source document.</span></span> <span data-ttu-id="8e503-143">等しいかどうか、大きい、小さい、またはその他の方法では、これらの値を比較できます。</span><span class="sxs-lookup"><span data-stu-id="8e503-143">Those values can be compared for equality, greater than/less than, and in other ways.</span></span>  
  
- <span data-ttu-id="8e503-144">平均、合計、または、ソース ドキュメント内のさまざまなフィールドからその他の値を計算する累積 functoid は結果をターゲット ドキュメントの 1 つのフィールドに格納します。</span><span class="sxs-lookup"><span data-stu-id="8e503-144">Cumulative functoids that compute averages, sums, or other values from various fields in the source document, then store the result in a single field in the target document.</span></span>  
  
- <span data-ttu-id="8e503-145">データベース functoid をデータベースに格納されている情報にアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="8e503-145">Database functoids that can access information stored in a database.</span></span>  
  
  <span data-ttu-id="8e503-146">XSLT またはを使用して直接でカスタム functoid を作成することもできます。NET を使用できる言語などの VisualC#および Visual Basic です。</span><span class="sxs-lookup"><span data-stu-id="8e503-146">It is also possible to create custom functoids directly in XSLT or using .NET-enabled languages like Visual C# and Visual Basic.</span></span> <span data-ttu-id="8e503-147">Functoid 組み合わせることもできます、シーケンスの別の入力に 1 つの出力をカスケードします。</span><span class="sxs-lookup"><span data-stu-id="8e503-147">Functoids can also be combined in sequences, cascading the output of one into the input of another.</span></span>  
  
  <span data-ttu-id="8e503-148">スキーマが異なるドキュメント間でドキュメントの XML のスキーマとマッピング情報のメカニズムを定義する方法があることが重要です。</span><span class="sxs-lookup"><span data-stu-id="8e503-148">It is essential that you have a way to define a document’s XML schema, as well as a mechanism for mapping information across documents with different schemas.</span></span> <span data-ttu-id="8e503-149">BizTalk エディターおよび BizTalk マッパーは、これら 2 つの問題に対処します。</span><span class="sxs-lookup"><span data-stu-id="8e503-149">The BizTalk Editor and BizTalk Mapper address these two problems.</span></span> <span data-ttu-id="8e503-150">スキーマとマップをまだ定義は、プロセスの一部のみです。</span><span class="sxs-lookup"><span data-stu-id="8e503-150">Yet defining schemas and maps is only part of the process.</span></span> <span data-ttu-id="8e503-151">スキーマを使用して、マップを呼び出すと、ビジネス ロジックを指定することも必要があります。</span><span class="sxs-lookup"><span data-stu-id="8e503-151">You must also specify the business logic that will use the schemas and invoke the maps.</span></span>  
  
### <a name="defining-business-logic-the-orchestration-designer"></a><span data-ttu-id="8e503-152">ビジネス ロジックを定義するには。オーケストレーション デザイナー</span><span class="sxs-lookup"><span data-stu-id="8e503-152">Defining Business Logic: The Orchestration Designer</span></span>  
 <span data-ttu-id="8e503-153">ビジネス プロセスは、一連の操作をまとめて、便利なビジネスのニーズを満たすです。</span><span class="sxs-lookup"><span data-stu-id="8e503-153">A business process is a set of actions that together meet some useful business need.</span></span> <span data-ttu-id="8e503-154">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]開発者は、オーケストレーション デザイナーを使用してこれらのアクションをグラフィカルに定義することができます。</span><span class="sxs-lookup"><span data-stu-id="8e503-154">With [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], a developer can use the Orchestration Designer to define these actions graphically.</span></span> <span data-ttu-id="8e503-155">いくつかのプログラミング言語での手順を表現するのではなく、開発者は、論理的な方法で一連の図形を組み合わせることで、オーケストレーションを作成できます。</span><span class="sxs-lookup"><span data-stu-id="8e503-155">Instead of expressing the steps in some programming language, a developer can create an orchestration by connecting together a series of shapes in a logical way.</span></span> <span data-ttu-id="8e503-156">オーケストレーション デザイナーで使用できる図形は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="8e503-156">The shapes available in the Orchestration Designer include:</span></span>  
  
- <span data-ttu-id="8e503-157">これにより、オーケストレーションでメッセージを受信する受信図形。</span><span class="sxs-lookup"><span data-stu-id="8e503-157">The Receive shape, which allows the orchestration to receive messages.</span></span> <span data-ttu-id="8e503-158">受信図形は、受信メッセージの種類を定義するフィルターを設定でき、新しいメッセージが到着したときに、オーケストレーションの新しいインスタンスを開始する構成することもできます。</span><span class="sxs-lookup"><span data-stu-id="8e503-158">A Receive shape can have a filter that defines the types of messages that will be received, and it can also be configured to start a new instance of an orchestration when a new message arrives.</span></span>  
  
- <span data-ttu-id="8e503-159">これにより、オーケストレーションでメッセージを送信する送信図形。</span><span class="sxs-lookup"><span data-stu-id="8e503-159">The Send shape, which allows the orchestration to send messages.</span></span>  
  
- <span data-ttu-id="8e503-160">ポート図形をメッセージの送信方法を定義します。</span><span class="sxs-lookup"><span data-stu-id="8e503-160">The Port shape, which defines how messages are transmitted.</span></span> <span data-ttu-id="8e503-161">ポート図形の各インスタンスは、送信または受信図形に接続されます。</span><span class="sxs-lookup"><span data-stu-id="8e503-161">Each instance of a Port shape is connected to either a Send or Receive shape.</span></span> <span data-ttu-id="8e503-162">各ポートに、型は、ポートが受信できるメッセージの種類などを定義します。送信または受信; などの方向バインディング、メッセージが送信または受信した、たとえば方法を決定する、特定の URL やその他の情報を指定します。</span><span class="sxs-lookup"><span data-stu-id="8e503-162">Each port also has a type, which defines things such as the kinds of messages the port can receive; a direction, such as send or receive; and a binding, which determines how a message is sent or received by, for example, specifying a particular URL and other information.</span></span>  
  
- <span data-ttu-id="8e503-163">判断図形をブール条件に基づいて異なるタスクを実行するオーケストレーションを許可する場合、その他のステートメントを表します。</span><span class="sxs-lookup"><span data-stu-id="8e503-163">The Decide shape, which represents an if-then-else statement that allows an orchestration to perform different tasks based on Boolean conditions.</span></span> <span data-ttu-id="8e503-164">式エディター、オーケストレーション デザイナの一部は、この条件付きステートメントを指定できます。</span><span class="sxs-lookup"><span data-stu-id="8e503-164">An Expression Editor, part of the Orchestration Designer, can be used to specify this conditional statement.</span></span>  
  
- <span data-ttu-id="8e503-165">ループ図形をいくつかの条件が true の場合、アクションの繰り返しに実行制御します。</span><span class="sxs-lookup"><span data-stu-id="8e503-165">The Loop shape, which controls the repeated performing of an action while some condition is true.</span></span>  
  
- <span data-ttu-id="8e503-166">メッセージの構築図形、メッセージを構築できます。</span><span class="sxs-lookup"><span data-stu-id="8e503-166">The Construct Message shape, which allows building a message.</span></span>  
  
- <span data-ttu-id="8e503-167">変換図形を 1 つのドキュメントと BizTalk マッパーで定義されたマップを呼び出すことによって変換されてからの情報を転送できます。</span><span class="sxs-lookup"><span data-stu-id="8e503-167">The Transform shape, which allows the transfer of information from one document to another, and transforming it by invoking maps defined with the BizTalk Mapper.</span></span>  
  
- <span data-ttu-id="8e503-168">並列アクション図形、開発者は、シーケンス内ではなく、並列で複数の操作を実行することを指定します。</span><span class="sxs-lookup"><span data-stu-id="8e503-168">The Parallel Actions shape, which allows a developer to specify that multiple operations should be performed in parallel rather than in sequence.</span></span> <span data-ttu-id="8e503-169">この 1 つに続く図形は、すべての並列操作が完了するまでは実行されません。</span><span class="sxs-lookup"><span data-stu-id="8e503-169">The shape that follows this one is not executed until all of the parallel actions have completed.</span></span>  
  
- <span data-ttu-id="8e503-170">これにより操作をトランザクションにグループ化し、エラー処理の例外ハンドラーを定義するスコープ図形。</span><span class="sxs-lookup"><span data-stu-id="8e503-170">The Scope shape, which allows the grouping of operations into transactions and defining exception handlers for error handling.</span></span> <span data-ttu-id="8e503-171">従来のアトミック トランザクションと実行時間の長いトランザクションの両方がサポートされています。</span><span class="sxs-lookup"><span data-stu-id="8e503-171">Both traditional atomic transactions and long-running transactions are supported.</span></span> <span data-ttu-id="8e503-172">アトミックのトランザクションとは異なりは、実行時間の長いトランザクションは、compensating ロールバック予期しないイベントを処理するよりもロジックに依存します。</span><span class="sxs-lookup"><span data-stu-id="8e503-172">Unlike atomic transactions, long-running transactions rely on compensating logic rather than rollback to handle unexpected events.</span></span>  
  
- <span data-ttu-id="8e503-173">メッセージの割り当て図形をオーケストレーションの変数に値を割り当てることができます。</span><span class="sxs-lookup"><span data-stu-id="8e503-173">The Message Assignment shape, which allows assigning values to orchestration variables.</span></span> <span data-ttu-id="8e503-174">これらの変数は、作成中のメッセージや文字列など、オーケストレーションによって使用される状態情報の格納に使用できます。</span><span class="sxs-lookup"><span data-stu-id="8e503-174">These variables can be used to store state information used by the orchestration, such as a message being created or a character string.</span></span>  
  
  <span data-ttu-id="8e503-175">次の図は、これらの図形のいくつかを使用してオーケストレーション デザイナーで作成されたオーケストレーションを示しています。</span><span class="sxs-lookup"><span data-stu-id="8e503-175">The figure below shows an orchestration created in the Orchestration Designer using a few of these shapes.</span></span> <span data-ttu-id="8e503-176">この簡単な例では、メッセージを受信する、に基づいて決定されます、メッセージのコンテンツの結果として 2 つのパスのいずれかが実行します。</span><span class="sxs-lookup"><span data-stu-id="8e503-176">In this simple example, a message is received, a decision is made based on the content of that message, and one of two paths is executed as a result of that decision.</span></span> <span data-ttu-id="8e503-177">実際の問題を解決するオーケストレーションを; これよりもはるかに複雑にすることができます。これらのより複雑なダイアグラムを使用しやすくするには、オーケストレーション デザイナーには、拡大/縮小する機能が含まれています。開発者は、現在関心は、オーケストレーションの部分のみを表示できます。</span><span class="sxs-lookup"><span data-stu-id="8e503-177">Orchestrations that solve real problems can be significantly more complex than this; to make these more complex diagrams easier to work with, the Orchestration Designer includes the ability to zoom in and out. Developers can view only those parts of an orchestration that they are currently interested in.</span></span>  
  
  <span data-ttu-id="8e503-178">![](../core/media/understandingbts-08-orchestration.gif "UnderstandingBTS_08_Orchestration")</span><span class="sxs-lookup"><span data-stu-id="8e503-178">![](../core/media/understandingbts-08-orchestration.gif "UnderstandingBTS_08_Orchestration")</span></span>  
  
  <span data-ttu-id="8e503-179">開発者がオーケストレーションを定義した後に、Microsoft Intermediate Language (MSIL)、.NET Framework の共通言語ランタイム (CLR) によって使用される図形とそれらの関係のグループが変換されます。</span><span class="sxs-lookup"><span data-stu-id="8e503-179">After a developer has defined an orchestration, the group of shapes and relations between them is converted into the Microsoft Intermediate Language (MSIL) used by the .NET Framework’s Common Language Runtime (CLR).</span></span> <span data-ttu-id="8e503-180">最終的には、BizTalk Server の開発者によって定義されている図形のグループには、標準的なになります。NET が有効なアセンブリ。</span><span class="sxs-lookup"><span data-stu-id="8e503-180">Ultimately, the group of shapes defined by a BizTalk Server developer becomes just a standard .NET-enabled assembly.</span></span> <span data-ttu-id="8e503-181">図形の内部から COM または .NET オブジェクトを呼び出すことによって、必要な場合に、オーケストレーションに明示的なコードを追加することもできます。</span><span class="sxs-lookup"><span data-stu-id="8e503-181">You can also add explicit code to an orchestration when necessary by calling a COM or .NET object from inside a shape.</span></span>  
  
### <a name="the-role-of-web-services"></a><span data-ttu-id="8e503-182">Web サービスの役割</span><span class="sxs-lookup"><span data-stu-id="8e503-182">The Role of Web Services</span></span>  
 <span data-ttu-id="8e503-183">Web サービスは、SOAP を使用して XML ドキュメントを交換するアプリケーションを許可して、統合プラットフォームに大きな影響があった。</span><span class="sxs-lookup"><span data-stu-id="8e503-183">Web services allow applications to exchange XML documents using SOAP, and have had a significant impact on integration platforms.</span></span> <span data-ttu-id="8e503-184">外部 Web サービスにアクセスするには、オーケストレーションの作成者がで Web 参照の追加オプションを使用できます[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]を直接操作を呼び出す Web サービス アダプターと共にします。</span><span class="sxs-lookup"><span data-stu-id="8e503-184">To access an external Web service, an orchestration’s creator can use the Add Web Reference option in [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] along with the Web Services adapter to directly invoke operations.</span></span> <span data-ttu-id="8e503-185">同様に、 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 1 つ以上の SOAP 呼び出し可能な Web サービスとしてのオーケストレーションの操作を公開する ASP.NET Web サービス プロジェクトを生成する Web サービス公開ウィザードを提供します。</span><span class="sxs-lookup"><span data-stu-id="8e503-185">Similarly, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] provides a Web Services Publishing wizard that can generate an ASP.NET Web service project exposing one or more of an orchestration’s operations as SOAP-callable Web services.</span></span> <span data-ttu-id="8e503-186">これら 2 つのオプションを使用すると、開発者からビジネス プロセス内の既存の Web サービスにアクセスして、他のビジネス プロセスを Web サービスとしてのオーケストレーションの機能を公開します。</span><span class="sxs-lookup"><span data-stu-id="8e503-186">These two options allow developers to both access existing Web services from within a business process and expose an orchestration’s functionality as a Web service to other business processes.</span></span>  
  
- <span data-ttu-id="8e503-187">Web サービスの登場により、ビジネス プロセスを定義する方法に影響があります。</span><span class="sxs-lookup"><span data-stu-id="8e503-187">The rise of Web services also has an impact on how business processes are defined.</span></span> <span data-ttu-id="8e503-188">たとえば、2 つに場合を考えてみて組織では、Web サービスを使用して対話します。</span><span class="sxs-lookup"><span data-stu-id="8e503-188">For example, think about the case where two organizations interact using Web services.</span></span> <span data-ttu-id="8e503-189">効果的に相互運用、各パーティの何かを使用して、もう一方はビジネス プロセスの詳細を知るとの対話に必要な場合があります。</span><span class="sxs-lookup"><span data-stu-id="8e503-189">To interoperate effectively, it might be necessary for each party to the interaction to know something about the business process the other is using.</span></span> <span data-ttu-id="8e503-190">両方の組織を使用して場合[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]、これは大きな問題には、知識を共有する取引先管理テクノロジなどのツールを使用できます。</span><span class="sxs-lookup"><span data-stu-id="8e503-190">If both organizations use [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], this isn’t a big problem; tools such as the Trading Partner Management technology can be used to distribute this knowledge.</span></span> <span data-ttu-id="8e503-191">しかし、さまざまな製品を使用している場合でしょうか。</span><span class="sxs-lookup"><span data-stu-id="8e503-191">But what if they use different products?</span></span> <span data-ttu-id="8e503-192">このような場合は、ベンダーの特定の方法でビジネス プロセスの側面を記述する方法があると便利です。</span><span class="sxs-lookup"><span data-stu-id="8e503-192">For cases like this, it is useful to have a way to describe aspects of business processes in a non-vendor specific way.</span></span>  
  
  <span data-ttu-id="8e503-193">これを許可するのには、Microsoft、IBM、およびその他のユーザーによって Business Process Execution Language (BPEL) が作成されます。</span><span class="sxs-lookup"><span data-stu-id="8e503-193">To allow this, Microsoft, IBM, and others have created the Business Process Execution Language (BPEL).</span></span> <span data-ttu-id="8e503-194">オーケストレーション デザイナーを使用して定義したビジネス プロセスは BPEL にエクスポート可能と[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]BPEL で定義されているプロセスをインポートできます。</span><span class="sxs-lookup"><span data-stu-id="8e503-194">A business process defined using the Orchestration Designer can be exported to BPEL, and [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] can also import processes defined in BPEL.</span></span> <span data-ttu-id="8e503-195">言語は記述したり、ビジネス プロセスの外部から参照できる部分を共有する場合に便利ですが、BPEL に焦点を当てた包括的なビジネス プロセスを実行するクロスプラット フォーム対応によりもこの問題を解決します。</span><span class="sxs-lookup"><span data-stu-id="8e503-195">While the language is useful for describing and sharing externally visible parts of a business process, BPEL is focused more on solving this problem than on cross-platform execution of complete business processes.</span></span> <span data-ttu-id="8e503-196">重要です BPEL が Web サービスに完全に構築されたことを理解するには、するときに[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]の詳細はこの言語をサポートするその他の製品が提供されます。</span><span class="sxs-lookup"><span data-stu-id="8e503-196">It’s also important to understand that BPEL is built entirely on Web services, while [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and other products that support this language provide more.</span></span> <span data-ttu-id="8e503-197">たとえば、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]さまざまな XML スキーマ間のマッピング、ローカル オブジェクトは、BPEL では使用できない機能とその他のメソッドの呼び出しがサポートされます。</span><span class="sxs-lookup"><span data-stu-id="8e503-197">For example, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] supports mapping between different XML schemas, calling methods in local objects, and other features that aren’t available in BPEL.</span></span> <span data-ttu-id="8e503-198">これらとその他の理由は、BPEL はビジネス プロセスを定義するための完全な言語はありません。</span><span class="sxs-lookup"><span data-stu-id="8e503-198">For these and other reasons, BPEL isn’t a complete language for defining business processes.</span></span> <span data-ttu-id="8e503-199">BPEL では、組織の昇格の Structured Information Standards (OASIS) によって標準化されている処理中は、することは困難を完全に成熟したテクノロジとしての今すぐに表示します。</span><span class="sxs-lookup"><span data-stu-id="8e503-199">And given that BPEL is still in the process of being standardized by the Organization for the Advancement of Structured Information Standards (OASIS), it’s hard to view it today as a fully mature technology.</span></span>  
  
- <span data-ttu-id="8e503-200">オーケストレーションは、BizTalk Server でビジネス プロセスを作成する基本的なメカニズムです。</span><span class="sxs-lookup"><span data-stu-id="8e503-200">Orchestrations are the fundamental mechanism for creating business processes in BizTalk Server.</span></span> <span data-ttu-id="8e503-201">オーケストレーションの一部の側面は、ただし、他に比べて頻繁に変更する傾向があります。</span><span class="sxs-lookup"><span data-stu-id="8e503-201">Some aspects of an orchestration tend to change more often than others, however.</span></span> <span data-ttu-id="8e503-202">ビジネス プロセスに埋め込まれている決定具体的には、-ビジネス ルール — は通常、その最も揮発性の側面です。</span><span class="sxs-lookup"><span data-stu-id="8e503-202">In particular, the decisions embedded in a business process—the business rules—are commonly its most volatile aspect.</span></span> <span data-ttu-id="8e503-203">最後の週に 10万ドルだった管理者の支出限度ですが最大 500,000 ドル、または低速を払っている顧客の許可されている最大の注文の減少を 100 単位から 10 個しかこの昇進をバンプします。</span><span class="sxs-lookup"><span data-stu-id="8e503-203">A manager’s spending limit was $100,000 last week, but her promotion bumps this up to $500,000, or a slow-paying customer’s maximum allowed order decreases from 100 units to only 10.</span></span> <span data-ttu-id="8e503-204">指定し、ビジネス ルール エンジンを使用してこれらの規則を更新できます。</span><span class="sxs-lookup"><span data-stu-id="8e503-204">You can specify and update these rules using the  Business Rule Engine.</span></span>  
  
## <a name="using-the-business-rule-engine"></a><span data-ttu-id="8e503-205">ビジネス ルール エンジンを使用します。</span><span class="sxs-lookup"><span data-stu-id="8e503-205">Using the Business Rule Engine</span></span>  
 <span data-ttu-id="8e503-206">オーケストレーション デザイナー、BizTalk エディターと、BizTalk マッパーでは、ビジネス プロセスとを使用してルールを定義する効果的な方法を提供します。</span><span class="sxs-lookup"><span data-stu-id="8e503-206">The Orchestration Designer, together with the BizTalk Editor and the BizTalk Mapper, provide an effective way to define a business process and the rules it uses.</span></span> <span data-ttu-id="8e503-207">なること、ただし、簡単な方法を定義し、ビジネス ルールの変更があります。</span><span class="sxs-lookup"><span data-stu-id="8e503-207">It can be useful, however, to have an easier way to define and change business rules.</span></span> <span data-ttu-id="8e503-208">これを許可するのには、BizTalk Server は、ビジネス ルール エンジン (BRE) を提供します。</span><span class="sxs-lookup"><span data-stu-id="8e503-208">To allow this, BizTalk Server provides the Business Rule Engine (BRE).</span></span> <span data-ttu-id="8e503-209">開発者は、BRE を使用してほとんどの場合より多くのビジネス指向のユーザーを作成し、ビジネス ルール作成ツールと呼ばれるツールを使用してビジネス ルールのセットを変更します。</span><span class="sxs-lookup"><span data-stu-id="8e503-209">Developers will most often use the BRE, but more business-oriented users can create and modify sets of business rules using a tool called the Business Rule Composer.</span></span>  
  
 <span data-ttu-id="8e503-210">BRE が役立つ状況の 1 つは、複雑なビジネス ルールを評価する必要がありますのセットの場合です。</span><span class="sxs-lookup"><span data-stu-id="8e503-210">One situation in which the BRE is useful is when a complex set of business rules must be evaluated.</span></span> <span data-ttu-id="8e503-211">融資するかどうかを決定するなどがあります貸し付けを多数のお客様のクレジットの履歴、収入、およびその他の要因に基づくルール。</span><span class="sxs-lookup"><span data-stu-id="8e503-211">Deciding whether to grant a loan, for example, might entail working through a large set of rules based on the customer’s credit history, income, and other factors.</span></span> <span data-ttu-id="8e503-212">同様に、さまざまな考慮事項、申請者の年齢、性別、および正常性を含む依存申請者に生命保険を販売するかどうかを決定します。</span><span class="sxs-lookup"><span data-stu-id="8e503-212">Similarly, determining whether to sell life insurance to an applicant depends on a number of things, including the applicant’s age, gender, and health.</span></span> <span data-ttu-id="8e503-213">使用して条件付きステートメントとしてこれらすべてのルールを表現すると答えると、オーケストレーションの判断図形、可能な場合がありますが、実装するために非常に複雑になります。</span><span class="sxs-lookup"><span data-stu-id="8e503-213">Expressing all of these rules as conditional statements using, say, an orchestration’s Decide shape might be possible, but would be fairly complex to implement.</span></span> <span data-ttu-id="8e503-214">上記のようなルール数が多いプロセスにおいて、BRE できます簡素開発者の作業です。</span><span class="sxs-lookup"><span data-stu-id="8e503-214">For rule-intensive processes like these, the BRE can make a developer’s life simpler.</span></span>  
  
 <span data-ttu-id="8e503-215">開発者は、BRE を使用して、すばやくし、必要に応じて、規則を簡単に変更します。</span><span class="sxs-lookup"><span data-stu-id="8e503-215">Using the BRE, developers can quickly and easily change rules as needed.</span></span> <span data-ttu-id="8e503-216">その理由を表示するには、オーケストレーション内で実装されているビジネス ルールの変更に必要な内容について考えてみます。</span><span class="sxs-lookup"><span data-stu-id="8e503-216">To see why, think about what’s required to change a business rule that’s implemented within an orchestration.</span></span> <span data-ttu-id="8e503-217">開発者がオーケストレーションを開く必要がありますまず[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)]、適切な図形を変更 (およびおそらく .NET または COM オブジェクトを呼び出すように)、ビルドして、変更されたアセンブリを展開します。</span><span class="sxs-lookup"><span data-stu-id="8e503-217">A developer must first open the orchestration in [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)], modify the appropriate shapes (and perhaps the .NET or COM objects they invoke), and then build and deploy the modified assembly.</span></span> <span data-ttu-id="8e503-218">これを行うことも必要がありますを停止して、このオーケストレーションを含む BizTalk アプリケーションを再起動します。</span><span class="sxs-lookup"><span data-stu-id="8e503-218">Doing this also requires stopping and restarting the BizTalk application that includes this orchestration.</span></span> <span data-ttu-id="8e503-219">代わりに、BRE を使用してこのビジネス ルールが実装する場合は、再コンパイルまたは再起動何もなく変更できます。</span><span class="sxs-lookup"><span data-stu-id="8e503-219">If instead this business rule is implemented using the BRE, it can be modified without recompiling or restarting anything.</span></span> <span data-ttu-id="8e503-220">必要なビジネス ルール作成ツールを使用して、目的の規則を変更し、新しいルールのセットを再デプロイするだけです。</span><span class="sxs-lookup"><span data-stu-id="8e503-220">All that’s needed is to use the Business Rule Composer to change the desired rule, then redeploy the new set of rules.</span></span> <span data-ttu-id="8e503-221">変更は直ちに有効にします。</span><span class="sxs-lookup"><span data-stu-id="8e503-221">The change takes effect immediately.</span></span> <span data-ttu-id="8e503-222">ビジネス ルールが読み取れる場合によっては、変更できることを技術担当者を関与させることがなくビジネス アナリストは通常はオーケストレーションが作成され、開発者によって管理される、中にします。</span><span class="sxs-lookup"><span data-stu-id="8e503-222">And while orchestrations are typically created and maintained by developers, business rules are readable enough that in some cases they can be modified by business analysts without the need to involve more technical people.</span></span>  
  
 <span data-ttu-id="8e503-223">ビジネス ルールのセットの作成者は、通常、これらのルールを指定するときに使用するボキャブラリを定義するビジネス ルール作成ツールを使用して開始します。</span><span class="sxs-lookup"><span data-stu-id="8e503-223">The creator of a set of business rules typically begins by using the Business Rule Composer to define a vocabulary for use in specifying those rules.</span></span> <span data-ttu-id="8e503-224">ボキャブラリの各用語は、いくつかの情報のわかりやすい名前を提供します。</span><span class="sxs-lookup"><span data-stu-id="8e503-224">Each term in the vocabulary provides a user-friendly name for some information.</span></span> <span data-ttu-id="8e503-225">たとえば、出荷数または項目の最大数量、承認制限などの用語をボキャブラリを定義できます。</span><span class="sxs-lookup"><span data-stu-id="8e503-225">For example, a vocabulary might define terms such as Number Shipped or Maximum Quantity of Items or Approval Limit.</span></span> <span data-ttu-id="8e503-226">これらの各用語は、定数に設定することができます。 またはいくつかのデータベースに対して SQL クエリの結果または .NET オブジェクトの値または特定の要素または属性のいくつかの XML スキーマの (およびそのために受信メッセージ) にマップします。</span><span class="sxs-lookup"><span data-stu-id="8e503-226">Each of these terms can be set to a constant or be mapped to a particular element or attribute in some XML schema (and thus in an incoming message) or to the result of a SQL query against some database or even to a value in a .NET object.</span></span>  
  
 <span data-ttu-id="8e503-227">ボキャブラリの定義後は、このボキャブラリを使用してビジネス ポリシーを作成するビジネス ルール作成ツールを使用できます。</span><span class="sxs-lookup"><span data-stu-id="8e503-227">After a vocabulary has been defined, the Business Rule Composer can be used to create business policies that use this vocabulary.</span></span> <span data-ttu-id="8e503-228">各ポリシーは、1 つまたは複数のビジネス ルールを含めることができます。</span><span class="sxs-lookup"><span data-stu-id="8e503-228">Each policy can contain one or more business rules.</span></span> <span data-ttu-id="8e503-229">ルールより小さい、等しいなどのより大きいなどの論理演算子と共にボキャブラリで定義されている用語を使用して、ビジネス プロセスの動作を定義します。</span><span class="sxs-lookup"><span data-stu-id="8e503-229">A rule uses the terms defined in some vocabulary together with logical operators such as Greater Than, Less Than, Is Equal To, and others to define how a business process operates.</span></span> <span data-ttu-id="8e503-230">どのような値がデータベース、またはその他の点で記述されたに影響する必要があります値を受け取るもの方法やビジネス ルールが受信した XML ドキュメントに含まれる値が送信される XML ドキュメントで作成された値にする必要があります影響を定義できます。</span><span class="sxs-lookup"><span data-stu-id="8e503-230">A business rule can define how values contained in a received XML document should affect the values created in an XML document that’s sent, or how those received values should affect what value is written in a database, or other things.</span></span>  
  
 <span data-ttu-id="8e503-231">ビジネス ポリシーを実行するには、オーケストレーションは、ルールの呼び出し図形を使用します。</span><span class="sxs-lookup"><span data-stu-id="8e503-231">To execute a business policy, an orchestration uses a CallRules shape.</span></span> <span data-ttu-id="8e503-232">この図形は、BRE のインスタンスを作成、受信した XML ドキュメントなど、ポリシーに必要な情報が渡されますし、実行するポリシーを指定します。</span><span class="sxs-lookup"><span data-stu-id="8e503-232">This shape creates an instance of the BRE, specifies which policy to execute, then passes in the information this policy needs, such as a received XML document.</span></span> <span data-ttu-id="8e503-233">BRE は、使用してプログラムで呼び出すこともできます、します。NET ベースのオブジェクト モデルを使用していないアプリケーションから呼び出すことによって、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="8e503-233">The BRE can also be invoked programmatically using a .NET-based object model, which allows it to be called from applications that don’t use [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="8e503-234">つまり、Windows フォーム アプリケーション、Web サービスを公開するソフトウェア、およびそれ以外の場合は、.NET Framework に基づいて構築されたものことができますを使用して、BRE 当面の問題の解決にします。</span><span class="sxs-lookup"><span data-stu-id="8e503-234">This means that Windows Forms applications, software exposing Web services, and anything else built on the .NET Framework can potentially use the BRE whenever it helps solve the problem at hand.</span></span>  
  
 <span data-ttu-id="8e503-235">ボキャブラリとビジネス ルールの両方をはるかに複雑になる可能性 — とはるかに強力な-より単純な例は、ここで説明します。</span><span class="sxs-lookup"><span data-stu-id="8e503-235">Both vocabularies and business rules can be much more complicated—and much more powerful—than the simple examples described here.</span></span> <span data-ttu-id="8e503-236">ボキャブラリを定義し、ボキャブラリを使用する規則のセットを定義するの核となる概念は、ビジネス ルール エンジンの中核です。</span><span class="sxs-lookup"><span data-stu-id="8e503-236">But the core idea of defining a vocabulary, then defining sets of rules that use that vocabulary is the heart of the Business Rule Engine.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8e503-237">参照</span><span class="sxs-lookup"><span data-stu-id="8e503-237">See Also</span></span>  
 [<span data-ttu-id="8e503-238">BizTalk Server メッセージング エンジン</span><span class="sxs-lookup"><span data-stu-id="8e503-238">The BizTalk Server Messaging Engine</span></span>](../core/the-biztalk-server-messaging-engine.md)