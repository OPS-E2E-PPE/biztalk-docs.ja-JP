---
title: "DTA 追跡の MST の検索のヒントし、テクニック |Microsoft ドキュメント"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 7d72e4ac-d952-4cff-9a65-491e20945d40
caps.latest.revision: "8"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 9faaaf7ebb47ac7ec18d8df6d8cb7c6ebd48d7f8
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/20/2017
---
# <a name="tips-and-tricks-for-finding-mst-of-dta-tracking"></a><span data-ttu-id="a0cbc-102">DTA 追跡の MSTを特定するためのヒントとテクニック</span><span class="sxs-lookup"><span data-stu-id="a0cbc-102">Tips and Tricks for Finding MST of DTA Tracking</span></span>
<span data-ttu-id="a0cbc-103">定義上、MST とは、一定の負荷を使用してシステム パフォーマンスを再現可能な形で測定するベンチマークです。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-103">By definition, MST is a benchmark to reproducibly measure system performance using a constant load.</span></span> <span data-ttu-id="a0cbc-104">MST を測定することは、次のような場合に特に有用です。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-104">Following are situations where knowing the MST is particularly useful.</span></span>  
  
1.  <span data-ttu-id="a0cbc-105">**システムから最短の待機時間を必要とする場合**です。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-105">**When you require the lowest latency from the system**.</span></span> <span data-ttu-id="a0cbc-106">MST を超えるとシステムでバックログが発生して、メッセージの待機時間が長くなります。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-106">Exceeding MST results in backlog in the system, which introduces increased latency for messages.</span></span> <span data-ttu-id="a0cbc-107">バックログは、たとえ一時的なものであっても、待機時間に直接的な悪影響を及ぼします。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-107">Even if the backlog is only temporary, backlog has an immediate and deleterious effect on latency.</span></span> <span data-ttu-id="a0cbc-108">したがって、システムの MST を知ることで、個々のメッセージ処理の待機時間が大幅に増加する (構成によっては秒単位から分単位に変わるなど) 前の段階で期待できる絶対的な最大スループットがわかります。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-108">So, knowing your systems MST will tell you the absolute maximum throughput you should expect to achieve before the latency of individual message processing increases dramatically (for example, from seconds to minutes depending on your configuration).</span></span>  
  
2.  <span data-ttu-id="a0cbc-109">**他のシステムを比較するときに**です。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-109">**When comparing to other systems**.</span></span> <span data-ttu-id="a0cbc-110">たとえば、他のシステム (このトピックやケース スタディのシナリオ、または同じ環境内の別のシステムなど) と比べて期待した MST を達成できているかどうかを検証する場合は、一定の入力を使用して MST を測定すると、明確かつ再現可能な比較のための基準を得ることができます。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-110">For example, if you want to validate that you are achieving the expected MST compared to another system (for example, the scenario in this topic, a case study, or another system in your environment); measuring MST using a steady input offers a reproducible, unambiguous standard for comparison.</span></span>  
  
 <span data-ttu-id="a0cbc-111">ただし、言うまでもなく、MST の測定には時間がかかります。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-111">Needless to say, however, it can be time consuming to measure MST.</span></span> <span data-ttu-id="a0cbc-112">したがって、その長期にわたる測定に実際に取りかかる前に、そのメリットを評価する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-112">Therefore, before you embark on a lengthy exercise to measure it, you should evaluate the benefits.</span></span> <span data-ttu-id="a0cbc-113">ほとんどの実稼働システムは、MST で測定されるような一定の入力を受けることはありません。実際の負荷は時間の経過と共に変化します。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-113">Most production systems will not experience a steady input such as that measured by MST, but rather a load that changes over time.</span></span> <span data-ttu-id="a0cbc-114">実稼働に先立ってシステムを保証するためには、最終的にはこのロード プロファイルをテストする必要があります。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-114">It is this load profile that must ultimately be tested to certify a system prior to production.</span></span> <span data-ttu-id="a0cbc-115">さいわい、実稼働のロード プロファイルの持続性は、MST の測定に使用されるのと同じ手法を使用して評価できます。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-115">Fortunately, you can use the same technique that is used to measure MST to evaluate the sustainability of your production load profile.</span></span> <span data-ttu-id="a0cbc-116">BizTalkDTADb データベースのデータ保有期間を 1 つ以上含めた期間、ロード プロファイルを実行して、主要業績評価指標 (KPI) を観察します。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-116">Simply run your load profile long enough to include one or more BizTalkDTADb database data retention windows and observe the key performance indicators (KPI).</span></span>  
  
 <span data-ttu-id="a0cbc-117">テスト実行は、MST の場合もロード プロファイルの場合も、空の BizTalkDTADb データベースを使用して開始することが重要です。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-117">It is important to start your test runs, whether MST or load profiles, with an empty BizTalkDTADb database.</span></span> <span data-ttu-id="a0cbc-118">BizTalkDTADb データベースに格納されているデータは時間に依存するため、テスト実行のたびに新しく取得し直さないと正しい結果が得られません。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-118">The data that is stored in the BizTalkDTADb database is time sensitive and if it is not re-acquired from scratch for each test run, it can skew your results.</span></span> <span data-ttu-id="a0cbc-119">このことが原因で、データ保有期間によっては、MST を測定するために要する時間が大幅に増加することもあります。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-119">Depending on your data retention window, this can significantly increase the time it takes to find MST.</span></span> <span data-ttu-id="a0cbc-120">この問題を軽減するには、テスト実行の間に負荷を "その場で" 調整します。これにより、より短時間で MST に照準を合わせることができます。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-120">To mitigate this, adjusting load "on the fly" during test runs can be useful in more quickly zeroing in on MST.</span></span>  
  
 <span data-ttu-id="a0cbc-121">たとえば、最初の保有期間を過ぎたときに、スループットを上げる余地がまだあることが KPI によって示されていた場合は (ディスク アイドル時間がまだゼロになっていないなど)、徐々に負荷を増加させてその効果を観察することができます。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-121">For example, if you find that you have passed your first retention window time and the KPIs indicate you have headroom for higher throughput left (for example, disk idle time is still above zero), you can incrementally increase your load and observe the effect.</span></span> <span data-ttu-id="a0cbc-122">ただし、このようにして MST の推定値を見直した後は、空の BizTalkDTADb データベースを使用してテスト実行を開始して、その推定値を検証することが重要です。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-122">After you have refined your MST estimate in this way, however, it is important that you perform a test run starting with an empty BizTalkDTADb database to validate your estimate.</span></span>  
  
## <a name="recommendations"></a><span data-ttu-id="a0cbc-123">推奨事項</span><span class="sxs-lookup"><span data-stu-id="a0cbc-123">Recommendations</span></span>  
 <span data-ttu-id="a0cbc-124">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] の追跡システム アーキテクチャは、さまざまな情報の追跡が可能であり、慎重に管理および監視する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-124">The tracking system architecture in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] is capable of tracking a wide variety of information and must be managed and monitored carefully.</span></span> <span data-ttu-id="a0cbc-125">MST によって示されるシステムのパフォーマンスに最も影響を与える要因を以下に示します。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-125">The factors that will most affect the performance of your system, as indicated by MST, are as follows:</span></span>  
  
-   <span data-ttu-id="a0cbc-126">システムの目的のスループット。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-126">The desired throughput for the system.</span></span>  
  
-   <span data-ttu-id="a0cbc-127">システムでメッセージおよびサービスの各インスタンスに対して追跡される情報の量。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-127">The volume of information tracked for each message and service instance in the system.</span></span> <span data-ttu-id="a0cbc-128">これにより、BizTalkDTADb データベースのサイズが増加する早さが決まります。したがって、遅延を回避するためには BizTalkDTADb データベースのデータをどのくらいの頻度で削除する必要があるかも決まります。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-128">This will determine how quickly the size of the BizTalkDTADb database increases, and ultimately how often the BizTalkDTADb database must be purged to avoid falling behind.</span></span>  
  
-   <span data-ttu-id="a0cbc-129">BizTalkDTADb データベースのデータを保持する期間 (データ保有期間)。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-129">How long you wish to retain data in the BizTalkDTADb database, that is, the data retention window.</span></span> <span data-ttu-id="a0cbc-130">この期間が長くなると BizTalkDTADb データベースが肥大化し、スループットに影響します。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-130">The longer the window, the larger the BizTalkDTADb database will grow, affecting throughput.</span></span>  
  
-   <span data-ttu-id="a0cbc-131">BizTalkDTADb データベースのデータを削除するだけでなくアーカイブも行うか、BizTalkDTADb データベースのサイズを維持するために削除のみを行うか。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-131">Whether you archive BizTalkDTADb database data as well as purge, or just purge to maintain BizTalkDTADb database size.</span></span>  
  
 <span data-ttu-id="a0cbc-132">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] における追跡の維持可能な最大スループットを特定するプロセスには、次の 3 つの主要業績評価指標が関係します。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-132">The process of finding the maximum sustainable throughput for tracking in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] involves three key performance indicators:</span></span>  
  
-   <span data-ttu-id="a0cbc-133">DTAdb データ ファイルのディスク サブシステムの物理的なディスク アイドル時間</span><span class="sxs-lookup"><span data-stu-id="a0cbc-133">Physical Disk Idle Time for the DTAdb data file disk subsystem.</span></span>  
  
-   <span data-ttu-id="a0cbc-134">スプールの深さ</span><span class="sxs-lookup"><span data-stu-id="a0cbc-134">Spool depth</span></span>  
  
-   <span data-ttu-id="a0cbc-135">BizTalkDTADb データの深さ</span><span class="sxs-lookup"><span data-stu-id="a0cbc-135">BizTalkDTADbData depth</span></span>  
  
 <span data-ttu-id="a0cbc-136">次の状態になるように、これら 3 つの主要業績評価指標を監視することにより、システムの MST を測定することも、実稼働プロファイルのスループットを検証することもできます。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-136">Find either your systems’ MST or validate your production profile throughput by monitoring these three key performance indicators looking for:</span></span>  
  
-   <span data-ttu-id="a0cbc-137">安定したスプールと trackingdata テーブルの深さ</span><span class="sxs-lookup"><span data-stu-id="a0cbc-137">Stable spool and trackingdata table depth.</span></span>  
  
-   <span data-ttu-id="a0cbc-138">ゼロに近い (ただし継続的にゼロにはならない) BizTalkDTADb データベース データ ファイルのディスクの物理的なアイドル時間</span><span class="sxs-lookup"><span data-stu-id="a0cbc-138">BizTalkDTADb database data file disk physical idle time near, but not continuously "pegged" at, zero.</span></span>  
  
 <span data-ttu-id="a0cbc-139">DTA 追跡機能の使用はパフォーマンスに影響します。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-139">Using the DTA tracking features has an associated performance impact.</span></span>  <span data-ttu-id="a0cbc-140">既定の追跡では、実稼働環境のソリューションにとっては必要以上のデータが追跡されますが、問題解決の情報が豊富に得られるため、開発や初期のテストおよびデバッグが容易になります。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-140">Default tracking may track more than is needed once a solution is in production, but can make development and initial testing and debugging easier by providing ample problem resolution information.</span></span> <span data-ttu-id="a0cbc-141">したがって、開発と初期テストの間は既定の追跡をオンのままにしておくことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-141">Therefore, we recommend that default tracking be left on during development and initial testing.</span></span> <span data-ttu-id="a0cbc-142">BizTalk に展開されたソリューションが安定し、実稼働の保証 (パフォーマンス テストなど) の準備が整ったら、実稼働環境で追跡する必要がある情報の量と BizTalkDTADb データベースに保持する必要がある期間を慎重に検討して、それに応じた調整を行うことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-142">Once a solution deployed on BizTalk is stable and ready for production certification, including performance testing, it is recommended that you carefully examine the amount of information that needs to be tracked in production, and the length of time it needs to be kept in the BizTalkDTADb database and adjust accordingly.</span></span>  
  
 <span data-ttu-id="a0cbc-143">たとえば、否認不可または問題解決を目的としてメッセージ本文を追跡する必要がない場合は、メッセージ本文の追跡はオンにしないでください。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-143">For example, if message bodies do not need to be tracked for either non-repudiation or problem resolution purposes, then do not turn on message body tracking.</span></span> <span data-ttu-id="a0cbc-144">説明したシナリオ例で、この点を説明する[測定 MST DTA 追跡のテストのシナリオ](../core/test-scenarios-for-measuring-mst-of-dta-tracking.md)メッセージ本文の追跡の追跡の構成のコンポーネントが削除されたときに、40、MST が 2 倍になりますメッセージ/秒です。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-144">To illustrate this point, in the example scenario described in [Test Scenarios for Measuring MST of DTA Tracking](../core/test-scenarios-for-measuring-mst-of-dta-tracking.md), when the message body tracking component of the tracking configuration was eliminated, the MST was doubled to 40 messages/second.</span></span>  
  
 <span data-ttu-id="a0cbc-145">また、問題が発生したとしても、たいていは (必ずとは言えませんが) メッセージがメッセージ ボックス データベースに保留されているので、メッセージ本文を追跡しなくてもそれを取得して調べることができます。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-145">Also, keep in mind that even when problems do occur, in many (but by no means all) cases, messages are suspended in the MessageBox database and can be retrieved and inspected without needing to track message bodies.</span></span>  
  
 <span data-ttu-id="a0cbc-146">システムに加える負荷の持続性に注目します。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-146">Focus on the sustainability of the load you place on the system:</span></span>  
  
-   <span data-ttu-id="a0cbc-147">通常の保守アクティビティが生じても、システムで実稼働のロード プロファイルを無期限に維持できるか。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-147">Can your system sustain the production load profile indefinitely even with normal maintenance activities?</span></span>  
  
-   <span data-ttu-id="a0cbc-148">システムでバックログが保持されるような事態 (BizTalkDTADb データベースの計画内または計画外の停止など) が発生した場合はどうなるか。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-148">What if something happens that causes the system to sustain a backlog, such as a planned or unplanned BizTalkDTADb database outage?</span></span>  
  
 <span data-ttu-id="a0cbc-149">最悪のシナリオに基づいて目標を設定し、その目標に向けてテストを行うことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-149">It is a good idea to set goals based on worst case scenarios and test to those goals.</span></span> <span data-ttu-id="a0cbc-150">たとえば、定期的に行われる計画的メンテナンスのサイクルによって BizTalkDTADb データベースがオフラインになることがわかっている場合は、テスト実行の間にその停止状態をエミュレートして、結果のバックログから回復するシステムの能力を評価します。</span><span class="sxs-lookup"><span data-stu-id="a0cbc-150">For example, if you know that there is a periodic planned maintenance cycle that will take the BizTalkDTADb database off line, emulate this outage during a test run to evaluate the ability of the system to recover from the resulting backlog.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a0cbc-151">参照</span><span class="sxs-lookup"><span data-stu-id="a0cbc-151">See Also</span></span>  
 <span data-ttu-id="a0cbc-152">[維持可能な最大の追跡スループットの測定](../core/measuring-maximum-sustainable-tracking-throughput.md) </span><span class="sxs-lookup"><span data-stu-id="a0cbc-152">[Measuring Maximum Sustainable Tracking Throughput](../core/measuring-maximum-sustainable-tracking-throughput.md) </span></span>  
 <span data-ttu-id="a0cbc-153">[DTA 追跡のパフォーマンス特性を理解します。](../core/understanding-dta-tracking-performance-behavior.md) </span><span class="sxs-lookup"><span data-stu-id="a0cbc-153">[Understanding DTA Tracking Performance Behavior](../core/understanding-dta-tracking-performance-behavior.md) </span></span>  
 <span data-ttu-id="a0cbc-154">[DTA 追跡の MST を測定するためのシナリオをテストします。](../core/test-scenarios-for-measuring-mst-of-dta-tracking.md) </span><span class="sxs-lookup"><span data-stu-id="a0cbc-154">[Test Scenarios for Measuring MST of DTA Tracking](../core/test-scenarios-for-measuring-mst-of-dta-tracking.md) </span></span>  
 [<span data-ttu-id="a0cbc-155">追跡データベースのサイズに関するガイドライン</span><span class="sxs-lookup"><span data-stu-id="a0cbc-155">Tracking Database Sizing Guidelines</span></span>](../core/tracking-database-sizing-guidelines.md)