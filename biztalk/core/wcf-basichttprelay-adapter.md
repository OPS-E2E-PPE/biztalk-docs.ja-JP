---
title: Wcf-basichttprelay アダプター |Microsoft ドキュメント
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 22eefde6-80f5-4d45-80cf-55f743ff9d45
caps.latest.revision: 5
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 72a72129a9b0ee48969d528374c2a06497aa3311
ms.sourcegitcommit: 8418b1a8f38b7f56979cd6e203f0b591e2f40fe1
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/23/2018
ms.locfileid: "25975862"
---
# <a name="wcf-basichttprelay-adapter"></a>WCF-BasicHttpRelay アダプター
[!INCLUDE[btsCoName](../includes/btsconame-md.md)] [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 使用して、 **Wcf-basichttprelay**を介して WCF サービス要求を送受信するためのアダプター、 [BasicHttpRelayBinding クラス](https://msdn.microsoft.com/library/azure/microsoft.servicebus.basichttprelaybinding.aspx)です。 **Wcf-basichttprelay** アダプターを使用して Service Bus リレー エンドポイントを使用して、 **BasicHttpRelayBinding**します。  

## <a name="before-you-begin"></a>アンインストールの準備

以降で[!INCLUDE[bts2016_md](../includes/bts2016-md.md)]、このアダプターは Service Bus でアクセス制御サービス (ACS) または athenticate に Shared Access Signature (SAS) を使用できます。 Service Bus での認証時に、共有アクセス署名 (SAS) を使用することをお勧めします。 

Service Bus 名前空間を作成するときに、Access Control (ACS) 名前空間は自動的に作成されません。 認証に ACS を使用する場合は、新しい ACS 名前空間を作成する必要があります。 参照してください[Sb-messaging アダプター](../core/sb-messaging-adapter.md) ACS キーの値を取得する手順を含む詳細については、します。
  
## <a name="create-the-receive-location"></a>受信場所を作成します。
  
> [!NOTE]
>  次の手順を完了する前にする必要がありますを既に追加した一方向受信ポートです。 参照してください [を作成する方法、受信ポート](../core/how-to-create-a-receive-port.md)します。  
  
1.  BizTalk Server 管理コンソールで、 [!INCLUDE[btsBizTalkServerAdminConsoleui](../includes/btsbiztalkserveradminconsoleui-md.md)]、**[BizTalk グループ]**、**[アプリケーション]**、受信場所を作成するアプリケーションの順に展開します。  
  
2.  左側のウィンドウで、**[受信ポート]** ノードをクリックし、右側のウィンドウで、新しい受信場所に関連付ける受信ポートを右クリックし、**[プロパティ]** をクリックします。  
  
3.  **[受信ポートのプロパティ]** ダイアログ ボックスの左側のウィンドウで **[受信場所]** を選択し、右側のウィンドウで **[新規作成]** をクリックして、新しい受信場所を作成します。  
  
4.  **受信場所のプロパティ** ダイアログ ボックスで、 **トランスポート** ] セクションの [ **Wcf-basichttprelay** から、 **型** クリックしてドロップダウン リスト **構成** 受信場所のトランスポートのプロパティを構成します。  
  
5.  **Wcf-basichttprelay トランスポートのプロパティ** ] ダイアログ ボックスの [、 **全般** タブで、Service Bus リレー エンドポイントがホストされているし、サービス id を Wcf-basichttprelay 受信場所のエンドポイント アドレスを構成します。  
  
    |プロパティ|目的|  
    |--------------|----------------|  
    |**アドレス (URI)**|必須。 Service Bus リレー エンドポイントを展開する URI を指定します。|  
    |**エンドポイント Id**|省略可。 エンドポイント ID を指定します。 これらの設定により、エンドポイントはこの受信場所を認証できます。 エンドポイントと受信場所のハンドシェイク プロセスでは、Windows Communication Foundation (WCF) インフラストラクチャによって、この要素の値と予期されるサービスの ID が照合されます。<br /><br /> 既定値は空の文字列です。|  
  
6.  **Wcf-basichttprelay トランスポートのプロパティ**  ダイアログ ボックスの 、 **バインド**  タブで、タイムアウトおよびエンコード関連のプロパティを構成します。  
  
    |プロパティ|目的|  
    |--------------|----------------|  
    |**オープン タイムアウト (hh:mm:ss)**|チャネルを開く操作が完了するまでの間隔を示す期間値を指定します。 **System.TimeSpan.Zero**以上の値を指定してください。<br /><br /> 既定値:00:01:00<br /><br /> 最大値: 23:59:59|  
    |**送信タイムアウト (hh:mm:ss)**|送信操作が完了するまでの間隔を示す期間値を指定します。 **System.TimeSpan.Zero**以上の値を指定してください。 要求 - 応答受信ポートを使用する場合、この値は、対話処理がすべて完了するまでの時間を指定します。これは、クライアントが大きなメッセージを返した場合にも適用されます。<br /><br /> 既定値:00:01:00<br /><br /> 最大値: 23:59:59|  
    |**クローズ タイムアウト (hh:mm:ss)**|チャネルを閉じる操作が完了するまでの間隔を示す期間値を指定します。 **System.TimeSpan.Zero**以上の値を指定してください。<br /><br /> 既定値:00:01:00<br /><br /> 最大値: 23:59:59|  
    |**受信したメッセージの最大サイズ (バイト)**|有線ネットワーク上で受信できる、ヘッダーを含むメッセージの最大サイズをバイト単位で指定します。 メッセージのサイズは、各メッセージに割り当てられているメモリの量に制限されます。 このプロパティを使用して、サービス拒否 (DoS) 攻撃にさらされる危険性を制限できます。<br /><br /> Wcf-basichttprelay アダプター活用して、 [BasicHttpRelayBinding](http://msdn.microsoft.com/library/windowsazure/microsoft.servicebus.basichttprelaybinding.aspx) クラスには、バッファリングされた送信モードで、エンドポイントと通信します。 バッファリングされたトランスポート モード用、 [BasicHttpRelayBinding.MaxBufferSize](http://msdn.microsoft.com/library/windowsazure/microsoft.servicebus.basichttprelaybinding.maxbuffersize.aspx) プロパティは常にこのプロパティの値とします。<br /><br /> 既定値:65536<br /><br /> 最大値: 2147483647|  
    |**メッセージのエンコード**|SOAP メッセージをエンコードするために使用されるエンコーダーを指定します。 有効な値は次のとおりです。<br /><br /> -   **テキスト**: テキスト メッセージ エンコーダーを使用します。<br />-   **Mtom**: メッセージ Transmission Organization Mechanism 1.0 (MTOM) エンコーダーを使用します。<br /><br /> 既定値は **テキスト**します。|  
    |**テキスト エンコード**|文字セットのバインディングでメッセージを出力するために使用するエンコーディングを指定時に、 **メッセージ エンコーディング** にプロパティが設定されている **テキスト**します。 有効な値は次のとおりです。<br /><br /> -   **utf 16BE (unicodeFFFE)**: Unicode BigEndian エンコーディングします。<br />-   **utf-16**: 16 ビット エンコーディングします。<br />-   **utf-8**: 8 ビット エンコーディング。<br /><br /> 既定値は **utf-8**します。|  
    |**最大同時呼び出し数**|単一のサービス インスタンスに対する同時呼び出しの数を指定します。 制限を超える呼び出しはキューに格納されます。 この値を 0 に設定することは、 **Int32.MaxValue**に設定するのと同じです。<br /><br /> 既定値は 200 です。|  
  
7.  **Wcf-basichttprelay トランスポートのプロパティ**  ダイアログ ボックスの 、 **セキュリティ**  タブで、セキュリティを定義する機能、Wcf-basichttprelay 受信場所。  
  
    |プロパティ|目的|  
    |--------------|----------------|  
    |**セキュリティ モード**|使用するセキュリティの種類を指定します。 有効な値は次のとおりです。<br /><br /> -   **None**: メッセージが転送中にセキュリティ保護されません。<br />-   **トランスポート**: HTTPS トランスポートを使用してセキュリティを提供します。 SOAP メッセージは、HTTPS を使用してセキュリティ保護されます。 このモードを使用するには、Microsoft インターネット インフォメーション サービス (IIS) の Secure Sockets Layer (SSL) を設定する必要があります。<br />-   **メッセージ**: HTTP トランスポート経由で SOAP メッセージ セキュリティを使用してセキュリティを提供します。 既定では、SOAP **Body** は暗号化および署名されます。 唯一の有効な **クライアント資格情報の種類のメッセージ** Wcf-basic アダプターは **証明書**します。 このモードには、HTTP トランスポートが必要です。 このサービス証明書で指定する場所のニーズが表示されるこのセキュリティ モードを使用する場合、 **サービス証明書の拇印** プロパティです。<br />-   **TransportWithMessageCredential**: 整合性、機密性、およびサービスの認証は、HTTPS トランスポートによって提供されます。 このモードを使用するには、Microsoft インターネット インフォメーション サービス (IIS) の Secure Sockets Layer (SSL) を設定する必要があります。<br /><br /> 既定値は **[トランスポート]** です。|  
    |**メッセージ クライアント資格情報の種類**|設定した場合にのみ、メッセージ レベルのセキュリティ オプションを指定、 **セキュリティ モード** の上に **メッセージ** または **TransportWithMessageCredential**します。 有効な値は次のとおりです。<br /><br /> -   **ユーザー名**: によりこの受信場所が要求を使用してクライアントを認証する、 **UserName**資格情報。 ドメインまたはクライアントの資格情報に対応するローカル ユーザー アカウントを作成する必要があります。<br />-   **証明書**: このクライアントを認証の受信場所のクライアント証明書を使用します。 クライアントをこの受信場所に対して認証できるように、クライアントの X.509 証明書の CA 証明書チェーンを、このコンピューターの信頼されたルート証明機関の証明書ストアにインストールする必要があります。<br /><br /> 既定値は **UserName**します。|  
    |**アルゴリズム スイート**|設定した場合にのみ、メッセージの暗号化およびキー ラップ アルゴリズムを指定、 **セキュリティ モード** に上記のモード **メッセージ** または **TransportWithMessageCredential**します。 これは、設定した場合に適用されません、 **セキュリティ モード** に **None** または **トランスポート**します。<br /><br /> これらのアルゴリズムは、セキュリティ ポリシー言語 (WS-SecurityPolicy) 仕様で指定されたアルゴリズムにマップされます。 有効な値は次のとおりです。<br /><br /> -   **Basic128**: Aes128 暗号化、メッセージ ダイジェストに Sha1、Rsa oaep-mgf1p キー ラップします。<br />-   **[Basic128rsa15]**: メッセージの暗号化に Aes128、メッセージ ダイジェストに Sha1、キー ラップに rsa15 を使用します。<br />-   **Basic128Sha256**: メッセージの暗号化に Aes256、メッセージ ダイジェストに Sha256、Rsa oaep-mgf1p キー ラップします。<br />-   **Basic128Sha256Rsa15**: メッセージの暗号化に Aes128、メッセージ ダイジェストに Sha256、キー ラップに rsa15 を使用します。<br />-   **Basic192**: Aes192 暗号化、メッセージ ダイジェストに Sha1、Rsa oaep-mgf1p キー ラップします。<br />-   **Basic192Rsa15**: メッセージの暗号化に Aes192、メッセージ ダイジェストに Sha1、キー ラップに rsa15 を使用します。<br />-   **Basic192Sha256**: メッセージの暗号化に使用する Aes192、メッセージ ダイジェストに Sha256、Rsa oaep-mgf1p キー ラップします。<br />-   **Basic192Sha256Rsa15**: メッセージの暗号化に Aes192、メッセージ ダイジェストに Sha256、キー ラップに rsa15 を使用します。<br />-   **Basic256**: Aes256 暗号化、メッセージ ダイジェストに Sha1、Rsa oaep-mgf1p キー ラップします。<br />-   **Basic256Rsa15**: メッセージの暗号化に Aes256、メッセージ ダイジェストに Sha1、キー ラップに rsa15 を使用します。<br />-   **Basic256Sha256**: メッセージの暗号化に Aes256、メッセージ ダイジェストに Sha256、Rsa oaep-mgf1p キー ラップします。<br />-   **Basic256Sha256Rsa15**: メッセージの暗号化に Aes256、メッセージ ダイジェストに Sha256、キー ラップに rsa15 を使用します。<br />-   **TripleDes**: TripleDes 暗号化、メッセージ ダイジェスト認証、Rsa oaep-mgf1p キー ラップには Sha1 です。<br />-   **TripleDesRsa15**: TripleDes 暗号化、メッセージ ダイジェストに Sha1、キー ラップに rsa15 を使用します。<br />-   **TripleDesSha256**: メッセージの暗号化に TripleDes、メッセージ ダイジェストに Sha256、Rsa oaep-mgf1p キー ラップします。<br />-   **TripleDesSha256Rsa15**: メッセージの暗号化に TripleDes、メッセージ ダイジェストに Sha256、キー ラップに rsa15 を使用します。<br /><br /> 既定値は **[Basic256]** です。|  
    |**サービス証明書の拇印**|クライアントがサービスの認証に使用する、この受信場所に対する X.509 証明書の拇印を指定します。 拇印は、**[参照]** ボタンを使用して **[現在のユーザー]** の場所の **[My]** ストアを参照して選択できます。 **注:**  を設定する場合にのみ、このプロパティを設定する必要があります、 **セキュリティ モード** に上記のモード **メッセージ** または **TransportWithMessageCredential**します。 これは、設定した場合に適用されません、 **セキュリティ モード** に **None** または **トランスポート**します。 **注:**  にサービス証明書をインストールする必要があります、 **現在のユーザー** この受信場所をホストする受信ハンドラーのユーザー アカウントの場所。 <br /><br /> 最小長: 0<br /><br /> 最大長:40<br /><br /> 既定値は空の文字列です。|  
    |**リレー クライアント認証の種類**|メッセージの送信元となる Service Bus リレー エンドポイントでの認証のオプションを指定します。 有効な値は次のとおりです。<br /><br /> -   **None**: 認証は必要ありません。<br />-   **RelayAccessToken**: Service Bus リレー エンドポイントでの認証にセキュリティ トークンを使用する場合に指定します。<br /><br /> 既定値は **[RelayAccessToken]** です。|  
    |**サービスの検出を有効にします。**|サービスの動作をサービス レジストリに発行するには、このチェック ボックスをオンにします。<br /><br /> -   **表示名**– サービス レジストリに、サービスを公開名を指定します。<br />-   **探索モード** – サービス レジストリで発行されたサービスの検出モードを設定します。 探索モードの詳細については、次を参照してください。 [ http://msdn.microsoft.com/library/microsoft.servicebus.discoverytype.aspx](http://msdn.microsoft.com/library/microsoft.servicebus.discoverytype.aspx)です。|  
    |**アクセス制御サービス**|適用されます[!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)]と[!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)]2013。<br/><br/>**[リレー クライアントの認証の種類]** を **[RelayAccessToken]** に設定した場合は、**[編集]** ボタンをクリックして、以下の詳細を指定してください。<br /><br /> -   **アクセス制御サービス STS Uri** – これを設定して`https://<Namespace>-sb.accesscontrol.windows.net/`ここで、\<名前空間\>Service Bus 名前空間です。<br />-   **発行者名** – 発行者の名前を指定します。 通常は所有者に設定します。<br />-   **発行者キー** – 発行者キーを指定します。|  
    |**Service Bus 接続情報** | 始まる新しい[!INCLUDE[bts2016_md](../includes/bts2016-md.md)]です。<br/><br/>共有アクセス署名 (SAS) または Service Bus 名前空間のように、Access Control Service (ACS) を使用できます。 <br/><br/>オプションを選択し、 **編集** キーの情報を入力します。<br/><br/> - **Shared Access Signature** : アクセスのキー名とアクセス キーを入力します。 両方の値は、「、 [Azure ポータル](https://portal.azure.com)します。<br/> - **アクセス制御サービス**: STS URI を入力 (`https://<yourNamespace>-sb.accesscontrol.windows.net/`)、発行者名、および発行者キー。 これらの値を取得する」の説明に従って Windows PowerShell を使用して[Sb-messaging アダプター](../core/sb-messaging-adapter.md)です。 |
  
8.  **Wcf-basichttprelay トランスポートのプロパティ**  ダイアログ ボックスで、 **メッセージ**  タブで、SOAP のデータ選択を指定 **本文** 要素。  
  
    |プロパティ|目的|  
    |--------------|----------------|  
    |**Envelope -- entire \<soap:Envelope\>**|受信メッセージの SOAP **Envelope** 全体から、BizTalk メッセージのボディ部を作成します。<br /><br /> 既定値はオフです。|  
    |**本文--内容\<Soap:body\>要素**|受信メッセージの SOAP **Body** 要素の内容を使用して、BizTalk メッセージのボディ部を作成します。 **Body** 要素に複数の子要素がある場合は、最初の要素のみが BizTalk メッセージのボディ部になります。<br /><br /> これが既定の設定です。|  
    |**本文のパスで見つかったパス--コンテンツ**|**[本文のパス式]** ボックスのボディ パス式を使用して、BizTalk メッセージのボディ部を作成します。 ボディ パス式は、受信メッセージの SOAP **Body** 要素のすぐ下の子要素に対して評価されます。<br /><br /> 既定値はオフです。|  
    |**ボディ パス式**|BizTalk メッセージのボディ部を作成するために使用する受信メッセージの特定の部分を示すボディ パス式を入力します。 このボディ パス式は、受信メッセージの SOAP **Body** 要素のすぐ下の子要素に対して評価されます。 このボディ パス式で複数のノードが返される場合は、最初のノードのみが BizTalk メッセージのボディ部に対して選択されます。 **[パス -- 本文のパスで見つかったコンテンツ]** オプションが選択されている場合は、このプロパティが必要です。<br /><br /> 型:文字列<br /><br /> 最小長: 0<br /><br /> 最大長:32767<br /><br /> 既定値は空の文字列です。|  
    |**ノード エンコード**|Wcf-basichttprelay 受信アダプター ボディ パス式で識別されるノードのデコードに使用するエンコードの種類の指定、 **本文のパス式** テキスト ボックスです。<br /><br /> **[パス -- 本文のパスで見つかったコンテンツ]** オプションが選択されている場合は、このプロパティが必要です。 有効な値は次のとおりです。<br /><br /> -   **Base64**: Base64 エンコードします。<br />-   **16 進**: 16 進エンコードします。<br />-   **文字列**: テキスト エンコード - utf-8<br />-   **XML**: WCF アダプターは、ボディ パス式で選択されたノードの外部の XML での BizTalk メッセージ本文の作成、 **本文のパス式** テキスト ボックスです。<br /><br /> 既定値は **[XML]** です。|  
    |**ボディ--BizTalk 応答メッセージ本文**|BizTalk メッセージのボディ部を使用して、送信応答メッセージの SOAP **Body** 要素の内容を作成します。 このプロパティは、要求 - 応答の受信場所に対してのみ有効です。<br /><br /> これが既定の設定です。|  
    |**テンプレート--テンプレートで指定されたコンテンツ**|**[XML]** ボックスで指定されているテンプレートを使用して、送信メッセージの SOAP **Body** 要素の内容を作成します。 このプロパティは、要求 - 応答の受信場所に対してのみ有効です。<br /><br /> 既定値はオフです。|  
    |**XML**|送信メッセージの SOAP **Body** 要素の内容に対する XML 形式のテンプレートを入力します。 **[ボディ -- BizTalk 応答メッセージ本文]** オプションが選択されている場合は、このプロパティが必要です。 このプロパティは、要求 - 応答の受信場所に対してのみ有効です。<br /><br /> 型:文字列<br /><br /> 最小長: 0<br /><br /> 最大長:32767<br /><br /> 既定値は **\<bts メッセージ本文の xmlns ="http://www.microsoft.com/schemas/bts2007"エンコード"xml"を =\>** です。|  
    |**失敗時に要求メッセージを中断します。**|受信パイプラインまたはルーティングの障害によって受信処理に失敗した要求メッセージを保留するかどうかを指定します。<br /><br /> 既定値はオフです。|  
    |**エラーに例外の詳細を含める**|エラーが発生した場合に、デバッグのために SOAP エラーを返すかどうかを指定します。<br /><br /> 既定値はオフです。|  
  
9. **[OK]** をクリックします。  
  
10. **[受信場所のプロパティ]** ダイアログ ボックスで、受信場所を構成するための適切な値を入力し、**[OK]** をクリックして設定を保存します。 については、 **受信場所のプロパティ** ダイアログ ボックスを参照してください [受信場所を作成する方法](../core/how-to-create-a-receive-location.md)します。  

## <a name="create-the-send-port"></a>送信ポートを作成します。

1.  BizTalk 管理コンソールで、新しい送信ポートを作成するか、既存の送信ポートをダブルクリックして変更します。 参照してください [送信ポートを作成する方法](../core/how-to-create-a-send-port2.md)します。 すべての送信ポートのオプションを構成し、指定 **Wcf-basichttprelay** の **型** オプション、 **トランスポート** のセクションで、 **全般**  タブをクリックします。  
  
2.  **全般的な**  タブで、 **トランスポート**  をクリックして、 **構成**  ボタンをクリックします。  
  
3.  **Wcf-basichttprelay トランスポートのプロパティ**  ダイアログ ボックスの 、 **全般**  タブで、次を指定します。  
  
    |プロパティ|目的|  
    |--------------|----------------|  
    |**アドレス (URI)**|必須。 Service Bus のリレー エンドポイントが展開されている URL を指定します。 通常、URL は次のような形式になっています。<br /><br /> `https://<namespace>.servicebus.windows.net/`|  
    |**エンドポイント Id**|省略可。 エンドポイント ID を指定します。 これらの設定により、この送信ポートでエンドポイントを認証できるようになります。 エンドポイントと送信ポートの間のハンドシェイク プロセスでは、Windows Communication Foundation (WCF) インフラストラクチャによって、この要素の値とエンドポイントの ID が照合されます。<br /><br /> 既定値はオフです。|  
    |**操作**|指定の **SOAPAction** 送信メッセージの HTTP ヘッダー フィールドです。 このプロパティは、メッセージ コンテキスト プロパティからは設定も **WCF です。アクション** パイプラインまたはオーケストレーションします。 2 つの方法でこの値を指定することができます。 シングル アクション形式とアクション マッピング形式です。 たとえば、1 つのアクションの形式でこのプロパティを設定する場合 `http://contoso.com/Svc/Op1`- **SOAPAction** ヘッダーは常に送信メッセージの値に設定、このプロパティで指定します。<br /><br /> 送信アクション マッピング形式でこのプロパティを設定した場合 **SOAPAction** によってヘッダーが決定、 **BTS します。操作** コンテキスト プロパティです。 たとえば、次の XML 形式にこのプロパティが設定されている場合、 **BTS します。操作** を Op1 に設定されているプロパティ、WCF 送信アダプタを使用して `http://contoso.com/Svc/Op1` を送信 **SOAPAction** ヘッダー。<br /><br /> `<BtsActionMapping> <Operation Name="Op1" Action="http://contoso.com/Svc/Op1" /> <Operation Name="Op2" Action="http://contoso.com/Svc/Op2" /> </BtsActionMapping>`<br /><br /> 送信メッセージは、オーケストレーション ポートからは場合、オーケストレーション インスタンスは動的に設定、 **BTS します。操作** ポートの操作の名前を持つプロパティです。 コンテンツ ベースのルーティングと送信メッセージがルーティングされる場合は、設定、 **BTS します。操作** パイプライン コンポーネントのプロパティです。<br /><br /> 重要:<br /><br /> [!INCLUDE[sb](../includes/sb-md.md)] では、リレー エンドポイントにメッセージを送信するときに SOAP アクションを設定する必要があります。<br /><br /> 最小長: 0<br /><br /> 最大長:32767<br /><br /> 既定値は空の文字列です。|  
  
4.  **Wcf-basichttprelay トランスポートのプロパティ**  ダイアログ ボックスで、 **バインド** タブで、タイムアウトを構成し、エンコードのプロパティです。  
  
    |プロパティ|目的|  
    |--------------|----------------|  
    |**オープン タイムアウト (hh:mm:ss)**|チャネルを開く操作が完了するまでの間隔を示す期間値を指定します。 **System.TimeSpan.Zero**以上の値を指定してください。<br /><br /> 既定値:00:01:00<br /><br /> 最大値: 23:59:59|  
    |**送信タイムアウト (hh:mm:ss)**|送信操作が完了するまでの間隔を示す期間値を指定します。 **System.TimeSpan.Zero**以上の値を指定してください。 送信請求 - 応答の送信ポートを使用する場合は、サービスから大きいメッセージが返される場合でも、この値には対話処理がすべて完了するまでの時間を指定します。<br /><br /> 既定値:00:01:00<br /><br /> 最大値: 23:59:59|  
    |**クローズ タイムアウト (hh:mm:ss)**|チャネルを閉じる操作が完了するまでの間隔を示す期間値を指定します。 この値が以上にする必要があります **System.TimeSpan.Zero**します。<br /><br /> 既定値:00:01:00<br /><br /> 最大値: 23:59:59|  
    |**受信したメッセージの最大サイズ (バイト)**|有線ネットワーク上で受信できる、ヘッダーを含むメッセージの最大サイズをバイト単位で指定します。 メッセージのサイズは、各メッセージに割り当てられているメモリの量に制限されます。 このプロパティを使用して、サービス拒否 (DoS) 攻撃にさらされる危険性を制限できます。<br /><br /> Wcf-basichttprelay アダプター活用して、 [BasicHttpBinding](http://go.microsoft.com/fwlink/?LinkId=81086) クラスには、バッファリングされた送信モードで、エンドポイントと通信します。 バッファリングされたトランスポート モード用、 [BasicHttpBinding.MaxBufferSize](http://go.microsoft.com/fwlink/?LinkId=80659) プロパティは常にこのプロパティの値とします。<br /><br /> 既定値:65536<br /><br /> 最大値: 2147483647|  
    |**メッセージのエンコード**|SOAP メッセージをエンコードするために使用されるエンコーダーを指定します。 有効な値は次のとおりです。<br /><br /> -                         **テキスト**: テキスト メッセージ エンコーダーを使用します。<br /><br /> -                         **Mtom**: メッセージ Transmission Organization Mechanism 1.0 (MTOM) エンコーダーを使用します。<br /><br /> 既定値: **テキスト**|  
    |**テキスト エンコード**|文字セットのバインディングでメッセージを出力するために使用するエンコーディングを指定時に、 **メッセージ エンコーディング** にプロパティが設定されている **テキスト**します。 有効な値は次のとおりです。<br /><br /> -                         **utf 16BE (unicodeFFFE)**: Unicode BigEndian エンコーディングします。<br /><br /> -                         **utf-16**: 16 ビット エンコーディングします。<br /><br /> -                         **utf-8**: 8 ビットのエンコーディング<br /><br /> 既定値: **utf-8**|  
  
5.  **Wcf-basichttprelay トランスポートのプロパティ**  ダイアログ ボックスで、 **セキュリティ**  タブで、Wcf-basichttprelay 送信ポートのセキュリティ機能を定義します。  
  
    |プロパティ|目的|  
    |--------------|----------------|  
    |**セキュリティ モード**|使用するセキュリティの種類を指定します。 有効な値は次のとおりです。<br /><br /> -                         **None**: メッセージが転送中にセキュリティ保護されません。<br /><br /> -                         **トランスポート**: セキュリティは、HTTPS トランスポートを使用して提供します。 SOAP メッセージは、HTTPS を使用してセキュリティ保護されます。 サービスの証明書を使用してサービスを送信ポートに対して認証できるように、サービスの X.509 証明書の CA 証明書チェーンを、このコンピューターの信頼されたルート証明機関の証明書ストアにインストールする必要があります。<br /><br /> -                         **メッセージ**: SOAP メッセージ セキュリティを使用してセキュリティを提供します。 既定では、SOAP **本文** 要素は暗号化および署名されます。 唯一の有効な **クライアント資格情報の種類のメッセージ** Wcf-basichttprelay 送信アダプターは **証明書**します。 このモードには、HTTP トランスポートが必要です。<br /><br /> -                         **TransportWithMessageCredential**: 整合性、機密性、およびサービスの認証は、HTTPS トランスポートによって提供されます。 サービスがサービスの証明書を使用して送信ポートに対して認証できるように、このコンピューターの信頼されたルート証明機関の証明書ストアにサービスの X.509 証明書の CA 証明書チェーンをインストールする必要があります。 送信ポートの認証は、SOAP メッセージのセキュリティによって提供されます。<br /><br /> 既定値は **None**します。|  
    |**メッセージ クライアント資格情報の種類**|設定した場合にのみ、メッセージ レベルのセキュリティ オプションを指定、 **セキュリティ モード** の上に **メッセージ** または **TransportWithMessageCredential**します。 有効な値は次のとおりです。<br /><br /> -                         **ユーザー名**: この送信ポートのエンドポイントに対して認証されて、 **UserName**資格情報。 WCF-BasicHttpRelay 送信アダプターは、これをサポートしていません。<br /><br /> -                         **証明書**: この送信ポートは認証を使用して指定するクライアント証明書を使用してエンドポイントを**クライアント証明書の拇印**プロパティです。 さらに、この資格情報の種類を使用する場合、サービス証明書はで指定する必要な **サービス証明書の拇印** プロパティです。<br /><br /> 既定値は **UserName**します。|  
    |**アルゴリズム スイート**|メッセージの暗号化とキー ラップのアルゴリズムを指定します。 これらのアルゴリズムは、セキュリティ ポリシー言語 (WS-SecurityPolicy) 仕様で指定されたアルゴリズムにマップされます。 有効な値は次のとおりです。<br /><br /> -                         **Basic128**: Aes128 暗号化、メッセージ ダイジェストに Sha1、Rsa oaep-mgf1p キー ラップします。<br /><br /> -                         **[Basic128rsa15]**: メッセージの暗号化に Aes128、メッセージ ダイジェストに Sha1、キー ラップに rsa15 を使用します。<br /><br /> -                         **Basic128Sha256**: メッセージの暗号化に Aes256、メッセージ ダイジェストに Sha256、キー ラップには Rsa-oaep-mgf1p です。<br /><br /> -                         **Basic128Sha256Rsa15**: メッセージの暗号化に Aes128、メッセージ ダイジェストに Sha256、キー ラップに rsa15 を使用します。<br /><br /> -                         **Basic192**: Aes192 暗号化、メッセージ ダイジェストに Sha1、キー ラップには Rsa-oaep-mgf1p です。<br /><br /> -                         **Basic192Rsa15**: メッセージの暗号化に Aes192、メッセージ ダイジェストに Sha1、キー ラップに rsa15 を使用します。<br /><br /> -                         **Basic192Sha256**: メッセージの暗号化に Aes192、メッセージ ダイジェストに Sha256、キー ラップには Rsa-oaep-mgf1p です。<br /><br /> -                         **Basic192Sha256Rsa15**: メッセージの暗号化に Aes192、メッセージ ダイジェストに Sha256、キー ラップに rsa15 を使用します。<br /><br /> -                         **Basic256**: Aes256 暗号化、メッセージ ダイジェストに Sha1、Rsa oaep-mgf1p キー ラップします。<br /><br /> -                         **Basic256Rsa15**: メッセージの暗号化に Aes256、メッセージ ダイジェストに Sha1、キー ラップに rsa15 を使用します。<br /><br /> -                         **Basic256Sha256**: メッセージの暗号化に Aes256、メッセージ ダイジェストに Sha256、キー ラップには Rsa-oaep-mgf1p です。<br /><br /> -                         **Basic256Sha256Rsa15**: メッセージの暗号化に Aes256、メッセージ ダイジェストに Sha256、キー ラップに rsa15 を使用します。<br /><br /> -                         **TripleDes**: TripleDes 暗号化、メッセージ ダイジェスト認証、Rsa oaep-mgf1p キー ラップには Sha1 です。<br /><br /> -                         **TripleDesRsa15**: TripleDes 暗号化、メッセージ ダイジェストに Sha1、キー ラップに rsa15 を使用します。<br /><br /> -                         **TripleDesSha256**: メッセージの暗号化に TripleDes、メッセージ ダイジェストに Sha256、キー ラップには Rsa-oaep-mgf1p です。<br /><br /> -                         **TripleDesSha256Rsa15**: メッセージの暗号化に TripleDes、メッセージ ダイジェストに Sha256、キー ラップに rsa15 を使用します。<br /><br /> 既定値は **[Basic256]** です。|  
    |**クライアント証明書の拇印**|この送信ポートをエンドポイントに対して認証する際に使用する X.509 証明書の拇印を指定します。 移動してサムプリントを選択することができます、 **マイ** に格納、 **現在のユーザー** と場所、 **参照**  ボタンをクリックします。<br /><br /> 注:<br /><br /> クライアント証明書をインストールする必要があります、 **現在のユーザー** 送信ポートをホストしているこの送信ハンドラーのユーザー アカウントの場所。<br /><br /> 最小長: 0<br /><br /> 最大長:40<br /><br /> 既定値は空の文字列です。|  
    |**サービス証明書の拇印**|この送信ポートのメッセージ送信先のエンドポイントを認証する際に使用する X.509 証明書の拇印を指定します。 拇印を選択することができます、 **その他のユーザー** に格納、 **ローカル マシン** と場所、 **参照**  ボタンをクリックします。<br /><br /> 最小長: 0<br /><br /> 最大長:40<br /><br /> 既定値は空の文字列です。|  
    |**ユーザー名資格情報**|メッセージを送信するための資格情報を指定します。 クリックしてプロパティを指定することができます、 **編集** ボタンをクリックします。 選択した場合は、資格情報を設定する必要があります、 **Username** のオプションとして **クライアント資格情報の種類のメッセージ**します。<br /><br /> 既定値は **シングル サインオンを使用しない**します。|  
    |**ACS サービス id を使用します。**|適用されます[!INCLUDE[bts2013r2_md](../includes/bts2013r2-md.md)]と[!INCLUDE[btsBizTalkServerNoVersion_md](../includes/btsbiztalkservernoversion-md.md)]2013。<br/><br/>このチェック ボックスを選択し、クリックして **編集** と Service Bus での認証に次の値を指定します。<br /><br /> -                         **アクセス制御サービス STS Uri** – これを設定して`https://<Namespace>-sb.accesscontrol.windows.net/`ここで、\<名前空間\>Service Bus 名前空間です。<br /><br /> -                         **発行者名**– 発行者名を指定します。 通常は所有者に設定します。<br /><br /> -                         **発行者キー** – 発行者キーを指定します。|  
    |**Service Bus 接続情報** | 始まる新しい[!INCLUDE[bts2016_md](../includes/bts2016-md.md)]です。<br/><br/>共有アクセス署名 (SAS) または Service Bus 名前空間のように、Access Control Service (ACS) を使用できます。 <br/><br/>オプションを選択し、 **編集** キーの情報を入力します。<br/><br/> - **Shared Access Signature** : アクセスのキー名とアクセス キーを入力します。 両方の値は、「、 [Azure ポータル](https://portal.azure.com)します。<br/> - **アクセス制御サービス**: STS URI を入力 (`https://<yourNamespace>-sb.accesscontrol.windows.net/`)、発行者名、および発行者キー。 これらの値を取得する」の説明に従って Windows PowerShell を使用して[Sb-messaging アダプター](../core/sb-messaging-adapter.md)です。 |
  
6.  **Wcf-basichttprelay トランスポートのプロパティ**  ダイアログ ボックスで、 **プロキシ**  タブで、Wcf-basichttprelay 送信ポートのプロキシ設定を構成します。  
  
    |プロパティ|目的|  
    |--------------|----------------|  
    |**送信ハンドラーのプロキシ設定を使用します。**|この送信ポートがホストされている送信ハンドラーのプロキシ設定を使用するかどうかを指定します。<br /><br /> これが既定の設定です。|  
    |**プロキシを使用しません。**|この送信ポートがプロキシ サーバーを使用するかどうかを示します。<br /><br /> 既定値はオフです。|  
    |**プロキシを使用します。**|この送信ポートがで指定されたプロキシ サーバーを使用するかどうかを示す、 **アドレス** プロパティです。<br /><br /> 既定値はオフです。|  
    |**アドレス**|プロキシ サーバーのアドレスを指定します。 使用して、 **https** または **http** セキュリティ構成に応じて設定します。 このアドレスの後に、コロンとポート番号を指定します。 たとえば、http://127.0.0.1:8080 と指定します。<br /><br /> このプロパティには値の場合にのみ **プロキシを使用して** が選択されています。<br /><br /> 型:文字列<br /><br /> 最大長: 256<br /><br /> 既定値は空の文字列です。|  
    |**ユーザー名**|認証に使用するユーザー名を指定します。 統合認証が使用されている場合、ユーザー名にはドメインが含まれ、"ドメイン\ユーザー名" となります。 基本認証またはダイジェスト認証を使用する場合、ユーザー名がドメインを含まない\\します。 このプロパティには値の場合にのみ **プロキシを使用して** が選択されています。<br /><br /> 注:<br /><br /> WCF-BasicHttpRelay 送信アダプターでは、プロキシに対して基本認証を使用します。<br /><br /> 型:文字列<br /><br /> 最小長: 0<br /><br /> 最大長: 256<br /><br /> 既定値は空の文字列です。|  
    |**パスワード**|認証を使用するパスワードを指定します。<br /><br /> このプロパティには値の場合にのみ **プロキシを使用して** が選択されています。<br /><br /> 型:文字列<br /><br /> 最小長: 0<br /><br /> 最大長: 256<br /><br /> 既定値は空の文字列です。|  
  
7.  **Wcf-basichttprelay トランスポートのプロパティ**  ダイアログ ボックスで、 **メッセージ**  タブで、SOAP のデータ選択を指定 **本文** 要素。  
  
    |プロパティ|目的|  
    |--------------|----------------|  
    |**ボディ--BizTalk 要求メッセージの本文**|BizTalk メッセージのボディ部を使用して、SOAP のコンテンツを作成する **本文** 、送信メッセージの要素。<br /><br /> これが既定の設定です。|  
    |**テンプレート--テンプレートで指定されたコンテンツ**|**[XML]** ボックスで指定されているテンプレートを使用して、送信メッセージの SOAP **Body** 要素の内容を作成します。<br /><br /> 既定値はオフです。|  
    |**XML**|SOAP のコンテンツを XML 形式のテンプレートの入力  **本文** 、送信メッセージの要素。 **[ボディ -- BizTalk 応答メッセージ本文]** オプションが選択されている場合は、このプロパティが必要です。<br /><br /> 型:文字列<br /><br /> 最小長: 0<br /><br /> 最大長:32767<br /><br /> 既定値は `<bts-msg-body xmlns="http://www.microsoft.com/schemas/bts2007" encoding="xml"/>` です。|  
    |**Envelope -- entire \<soap:Envelope\>**|受信メッセージの SOAP **Envelope** 全体から、BizTalk メッセージのボディ部を作成します。 このプロパティは、送信請求 - 応答のポートに対してのみ有効です。<br /><br /> 既定値はオフです。|  
    |**本文--内容\<Soap:body\>要素**|受信メッセージの SOAP **Body** 要素の内容を使用して、BizTalk メッセージのボディ部を作成します。 **Body** 要素に複数の子要素がある場合は、最初の要素のみが BizTalk メッセージのボディ部になります。 このプロパティは、送信請求 - 応答のポートに対してのみ有効です。<br /><br /> これが既定の設定です。|  
    |**本文のパスで見つかったパス--コンテンツ**|**[本文のパス式]** ボックスのボディ パス式を使用して、BizTalk メッセージのボディ部を作成します。 ボディ パス式は、受信メッセージの SOAP **Body** 要素のすぐ下の子要素に対して評価されます。 このプロパティは、送信請求 - 応答のポートに対してのみ有効です。<br /><br /> 既定値はオフです。|  
    |**ボディ パス式**|BizTalk メッセージのボディ部を作成するために使用する受信メッセージの特定の部分を示すボディ パス式を入力します。 このボディ パス式が、SOAP の直下の子要素に対して評価されます **本文** 受信メッセージのノードです。 このボディ パス式で複数のノードが返される場合は、最初のノードのみが BizTalk メッセージのボディ部に対して選択されます。 **[パス -- 本文のパスで見つかったコンテンツ]** オプションが選択されている場合は、このプロパティが必要です。 このプロパティは、送信請求 - 応答のポートに対してのみ有効です。<br /><br /> 型:文字列<br /><br /> 最小長: 0<br /><br /> 最大長:32767<br /><br /> 既定値は空の文字列です。|  
    |**ノード エンコード**|ボディ パス式で識別されるノードに対して、Wcf-basichttprelay 送信アダプターがデコードに使用するエンコードの種類の指定、 **本文のパス式** テキスト ボックスです。 **[パス -- 本文のパスで見つかったコンテンツ]** オプションが選択されている場合は、このプロパティが必要です。 このプロパティは、送信請求 - 応答のポートに対してのみ有効です。 有効な値は次のとおりです。<br /><br /> - **Base64**: Base64 エンコードします。<br /><br /> -                         **16 進**: 16 進エンコードします。<br /><br /> -                         **文字列**: テキスト エンコード - utf-8<br /><br /> -                         **XML**: WCF アダプターは、ボディ パス式で選択されたノードの外部の XML での BizTalk メッセージ本文の作成、**本文のパス式**テキスト ボックス。<br /><br /> 既定値は **[XML]** です。|  
    |**エラー メッセージを伝達します。**|送信処理に失敗したメッセージを、他の受信ポートやオーケストレーション スケジュールなど、そのメッセージをサブスクライブしているアプリケーションに回送する場合は、このチェック ボックスをオンにします。 失敗したメッセージを保留し、否定の確認 (NACK) を生成する場合は、このチェック ボックスをオフにします。 このプロパティは、送信請求 - 応答のポートに対してのみ有効です。<br /><br /> 既定値が選択されます。|  
  
8.  をクリックして **[ok]** と **OK** 設定を保存します。  
  
## <a name="add-a-proxy-to-the-send-handler"></a>送信ハンドラーにプロキシを追加します。

プロキシは、送信ポートまたは送信ハンドラーを追加できます。 送信ポートでのプロキシを追加する場合は、このセクションをスキップします。

1.  [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、展開[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理、展開**BizTalk グループ**、展開**プラットフォームの設定**、順に展開**アダプター**.  
  
2.  選択 **Wcf-basichttprelay**, 、送信ハンドラーを選択します。  
  
3.  **アダプター ハンドラーのプロパティ**, の **全般** ] タブで [ **プロパティ**します。  
  
4.  **プロキシ** タブで、次の操作を行います。  
  
    |プロパティ|目的|  
    |--------------|----------------|  
    |**プロキシを使用します。**|この送信ハンドラーがプロキシ サーバーを使用しているかどうかを示します。<br /><br /> 既定値はオフです。|  
    |**アドレス**|プロキシ サーバーのアドレスを指定します。 使用して、 **https** または **http** セキュリティ構成に応じて設定します。 このアドレスの後に、コロンとポート番号を指定します。 たとえば、http://127.0.0.1:8080 と指定します。<br /><br /> このプロパティには値の場合にのみ **プロキシを使用して** が選択されています。<br /><br /> 型:文字列<br /><br /> 最大長: 256<br /><br /> 既定値は空の文字列です。|  
    |**ユーザー名**|認証に使用するユーザー名を指定します。 統合認証または基本認証が使用されている場合は、"ドメイン\ユーザー名" のように、ユーザー名にドメインを含めます。 ダイジェスト認証を使用する場合、ユーザー名がドメインを含まない\\します。<br /><br /> このプロパティには値の場合にのみ **プロキシを使用して** が選択されています。<br /><br /> 型:文字列<br /><br /> 最小長: 0<br /><br /> 最大長: 256<br /><br /> 既定値は空の文字列です。|  
    |**パスワード**|認証を使用するパスワードを指定します。<br /><br /> このプロパティには値の場合にのみ **プロキシを使用して** が選択されています。<br /><br /> 型:文字列<br /><br /> 最小長: 0<br /><br /> 最大長: 256<br /><br /> 既定値は空の文字列です。|  
  
5.  クリックして **OK** すべてのダイアログ ボックスを終了するまでです。  
  
## <a name="see-also"></a>参照  
[Sb-messaging アダプター](../core/sb-messaging-adapter.md)

[アダプターの使用](../core/using-adapters.md)