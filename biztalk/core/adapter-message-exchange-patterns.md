---
title: アダプターのメッセージ交換パターン |Microsoft ドキュメント
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 54a3fc8f-33d0-4b7e-ad4c-b00912dc3328
caps.latest.revision: 14
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: f42368d8687bbed4cbce60243a3b8528364b5fda
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/20/2017
ms.locfileid: "22230178"
---
# <a name="adapter-message-exchange-patterns"></a><span data-ttu-id="44e8f-102">アダプターのメッセージ交換パターン</span><span class="sxs-lookup"><span data-stu-id="44e8f-102">Adapter Message Exchange Patterns</span></span>
<span data-ttu-id="44e8f-103">BizTalk アダプター フレームワークは、多くの強力なメッセージング シナリオでアダプターが使用できるメッセージ交換パターンの豊富なセットをサポートします。</span><span class="sxs-lookup"><span data-stu-id="44e8f-103">The BizTalk Adapter Framework supports a rich set of message exchange patterns that adapters can use in many powerful messaging scenarios.</span></span>  
  
## <a name="one-way-asynchronous"></a><span data-ttu-id="44e8f-104">一方向 (非同期)</span><span class="sxs-lookup"><span data-stu-id="44e8f-104">One-Way (Asynchronous)</span></span>  
 <span data-ttu-id="44e8f-105">ここでの主な概念は、メッセージが一方向に流れるということです。</span><span class="sxs-lookup"><span data-stu-id="44e8f-105">The key concept here is that messages flow in one direction.</span></span>  
  
 <span data-ttu-id="44e8f-106">このメッセージ交換パターンでは、メッセージがアダプターを経由して [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] に一方向に流れます。</span><span class="sxs-lookup"><span data-stu-id="44e8f-106">In this message exchange pattern, messages flow one way into [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] through an adapter.</span></span> <span data-ttu-id="44e8f-107">メッセージング エンジンは、メッセージ ボックス データベースにメッセージを公開します。</span><span class="sxs-lookup"><span data-stu-id="44e8f-107">The Messaging Engine publishes the message into the MessageBox database.</span></span> <span data-ttu-id="44e8f-108">オーケストレーションにこの種類のメッセージに対するアクティブなサブスクリプションがある場合は、メッセージはそのオーケストレーションにルーティングされます。</span><span class="sxs-lookup"><span data-stu-id="44e8f-108">If an orchestration has an active subscription to a message of that type, the message is routed to that orchestration.</span></span>  
  
 <span data-ttu-id="44e8f-109">メッセージの処理の後に、オーケストレーションは、メッセージが特定のエンドポイントに送信されるアダプターにルーティングされる前に、メッセージをメッセージ ボックス データベースに公開します。</span><span class="sxs-lookup"><span data-stu-id="44e8f-109">After processing the message, the orchestration publishes the message back into the MessageBox database before it is routed to an adapter to be transmitted to the specific endpoint.</span></span>  
  
 <span data-ttu-id="44e8f-110">エンジンにメッセージが送信されるときに、応答は発生しません。</span><span class="sxs-lookup"><span data-stu-id="44e8f-110">When the message is submitted to the engine, no response is expected.</span></span> <span data-ttu-id="44e8f-111">送信側では、メッセージが送信されるときに、応答は発生しません。</span><span class="sxs-lookup"><span data-stu-id="44e8f-111">On the outbound side, when the message is transmitted, no response is expected.</span></span> <span data-ttu-id="44e8f-112">これは、通常、非同期メッセージングと呼ばれており、すべてのメッセージング シナリオでエンジンによってさまざまな形で使用される基本的なビルド ブロックです。</span><span class="sxs-lookup"><span data-stu-id="44e8f-112">This is typically referred to as asynchronous messaging and is in many ways the basic building block used by the engine for all messaging scenarios.</span></span>  
  
## <a name="request-response-style-protocols-sync-on-async"></a><span data-ttu-id="44e8f-113">要求 - 応答形式のプロトコル (sync-on-async)</span><span class="sxs-lookup"><span data-stu-id="44e8f-113">Request-Response Style Protocols (Sync-on-Async)</span></span>  
 <span data-ttu-id="44e8f-114">要求 - 応答シナリオは、要求メッセージの受信、その処理、および応答メッセージの送信で構成されています。</span><span class="sxs-lookup"><span data-stu-id="44e8f-114">A request-response scenario consists of receiving a request message, processing it, and sending a response message.</span></span> <span data-ttu-id="44e8f-115">これは、基になる [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] アーキテクチャがスケーラビリティ上の理由で非同期なので、非同期での同期 (sync-on-async) とも呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="44e8f-115">It is also referred to as synchronous-on-asynchronous (sync-on-async) because the underlying [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] architecture is asynchronous for scalability reasons.</span></span> <span data-ttu-id="44e8f-116">ただし、BizTalk メッセージング エンジンのアーキテクチャによって、これらの非同期の交換の上位で同期メッセージ交換パターンを公開できます。</span><span class="sxs-lookup"><span data-stu-id="44e8f-116">However, the architecture of the BizTalk Messaging Engine enables exposing a synchronous message exchange pattern on top of these asynchronous exchanges.</span></span> <span data-ttu-id="44e8f-117">これを行うために、エンジンは、同期インターフェイスを公開するために多数の非同期メッセージ交換をまとめてリンクすることによって、スケール アウトされたアーキテクチャにわたって要求メッセージおよび応答メッセージの関連付けの複雑なタスクを処理します。</span><span class="sxs-lookup"><span data-stu-id="44e8f-117">To do this, the engine handles the complex task of correlating the request and response messages across a scaled-out architecture by linking together a number of asynchronous message exchanges to expose a synchronous interface.</span></span>  
  
 <span data-ttu-id="44e8f-118">たとえば、インベントリは、BizTalk SOAP を SOAP 呼び出しを行うことがありますをチェックする Web ページには、アダプターが表示されます。</span><span class="sxs-lookup"><span data-stu-id="44e8f-118">For example, a Web page that checks inventory might make a SOAP call to a BizTalk SOAP receive adapter.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="44e8f-119">一連の情報を集約し、1 つの SOAP 応答で返す Web サービスを統制します。</span><span class="sxs-lookup"><span data-stu-id="44e8f-119"> orchestrates a series of Web services that aggregate the information and return it in one SOAP response.</span></span> <span data-ttu-id="44e8f-120">クライアントから見ると、これは同期 SOAP 呼び出しのように見えますが、実際にはエンジンによって多数の非同期メッセージ交換が結合されています。</span><span class="sxs-lookup"><span data-stu-id="44e8f-120">To the client this appears to be a synchronous SOAP call, but in actuality the engine knits together a number of asynchronous message exchanges.</span></span>  
  
## <a name="solicit-response-style-protocols"></a><span data-ttu-id="44e8f-121">送信請求 - 応答形式のプロトコル</span><span class="sxs-lookup"><span data-stu-id="44e8f-121">Solicit-Response Style Protocols</span></span>  
 <span data-ttu-id="44e8f-122">このシナリオは、送信請求メッセージの送信によって開始され、応答メッセージの受信によって完了します。</span><span class="sxs-lookup"><span data-stu-id="44e8f-122">This scenario is initiated by sending a solicit message and completed by receiving a response message.</span></span> <span data-ttu-id="44e8f-123">これは、送信される最初のメッセージがエンドポイントに対する応答メッセージの送信請求であるため、送信請求 - 応答と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="44e8f-123">It is referred to as solicit-response because the initial message sent is soliciting an endpoint for a response message.</span></span> <span data-ttu-id="44e8f-124">このメッセージ交換パターンを使用するシナリオには、送信 HTTP 呼び出し (応答の送信請求) の作成および応答に対する待機を行うオーケストレーションが含まれることがあります。</span><span class="sxs-lookup"><span data-stu-id="44e8f-124">A scenario using this message exchange pattern might involve an orchestration making an outbound HTTP call (a solicit for a response) and waiting for the response.</span></span>  
  
## <a name="request-multiresponse"></a><span data-ttu-id="44e8f-125">要求 - 複数応答</span><span class="sxs-lookup"><span data-stu-id="44e8f-125">Request-Multiresponse</span></span>  
 <span data-ttu-id="44e8f-126">このシナリオは、要求 - 応答シナリオに似ています。</span><span class="sxs-lookup"><span data-stu-id="44e8f-126">This scenario is similar to the request-response scenario.</span></span> <span data-ttu-id="44e8f-127">ただし、このシナリオでは、指定した要求に対して複数の応答を返すことができます。</span><span class="sxs-lookup"><span data-stu-id="44e8f-127">However, in this scenario multiple responses may be returned for a given request.</span></span> <span data-ttu-id="44e8f-128">API によってタイムアウト値を指定でき、タイムアウト期間の間に受信されたすべての応答は受信アダプターに返されます。</span><span class="sxs-lookup"><span data-stu-id="44e8f-128">The APIs allow a time-out value to be specified, and all responses received within the time-out period are returned to the receive adapter.</span></span>  
  
## <a name="loop-back"></a><span data-ttu-id="44e8f-129">ループバック</span><span class="sxs-lookup"><span data-stu-id="44e8f-129">Loop-Back</span></span>  
 <span data-ttu-id="44e8f-130">このシナリオは、要求 - 応答シナリオに似ています。</span><span class="sxs-lookup"><span data-stu-id="44e8f-130">This scenario is similar to the request-response scenario.</span></span> <span data-ttu-id="44e8f-131">要求メッセージは通常どおり公開されますが、エンジンによって、要求メッセージを公開したアダプター インスタンスと同じアダプター インスタンスに応答メッセージが確実にルーティングされるようになります。</span><span class="sxs-lookup"><span data-stu-id="44e8f-131">The request message is published as usual, but the engine ensures that the response message is routed back to the same adapter instance the published the request message.</span></span> <span data-ttu-id="44e8f-132">要求メッセージはメッセージ ボックス データベースに公開されるため、追跡インフラストラクチャによって、要求メッセージと応答メッセージの両方が確実に追跡されるようになります。</span><span class="sxs-lookup"><span data-stu-id="44e8f-132">Because the request message is published to the MessageBox database, the tracking infrastructure ensures that both the request and response messages are tracked.</span></span> <span data-ttu-id="44e8f-133">これは、メッセージを処理している送信パイプラインを呼び出し、すぐに出力メッセージを取得し、後続の処理のためにアダプターに返送する場合にも適した方法です。</span><span class="sxs-lookup"><span data-stu-id="44e8f-133">This is also a good way to invoke a send pipeline processing on message then immediately get the output message send back to the adapter for subsequent processing.</span></span>  
  
 <span data-ttu-id="44e8f-134">このシナリオの例としては、メッセージに対する確認メッセージを要求するクライアントが挙げられます。</span><span class="sxs-lookup"><span data-stu-id="44e8f-134">An example of this scenario is a client that requires a receipt for a message.</span></span> <span data-ttu-id="44e8f-135">受信メッセージはメッセージ ボックス データベースに公開されます。</span><span class="sxs-lookup"><span data-stu-id="44e8f-135">The inbound message is published to the MessageBox database.</span></span> <span data-ttu-id="44e8f-136">このメッセージと確認メッセージの両方は、同じバッチでアダプターに返されます。</span><span class="sxs-lookup"><span data-stu-id="44e8f-136">Both this message and the receipt are returned to the adapter in the same batch.</span></span> <span data-ttu-id="44e8f-137">この場合、受信メッセージは、クライアントに返されている 1 つのインスタンス、および通常の方法で処理されているもう 1 つのインスタンスを使用して、コピーされます。</span><span class="sxs-lookup"><span data-stu-id="44e8f-137">In this case, the inbound message is copied with one instance being returned to the client, and the other being processed in the normal manner.</span></span> <span data-ttu-id="44e8f-138">この特定のシナリオでは、カスタム XML 逆アセンブラーも記述する必要があります。</span><span class="sxs-lookup"><span data-stu-id="44e8f-138">This specific scenario also requires a custom XML disassembler to be written.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="44e8f-139">参照</span><span class="sxs-lookup"><span data-stu-id="44e8f-139">See Also</span></span>  
 [<span data-ttu-id="44e8f-140">アダプター フレームワークとは何ですか。</span><span class="sxs-lookup"><span data-stu-id="44e8f-140">What Is the Adapter Framework?</span></span>](../core/what-is-the-adapter-framework.md)