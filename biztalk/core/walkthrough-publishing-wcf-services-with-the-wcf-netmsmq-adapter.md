---
title: "チュートリアル: Wcf-netmsmq アダプタを使用して WCF サービスを発行する |Microsoft ドキュメント"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: e623b6dc-32e5-467c-bb7d-68b7a75723c1
caps.latest.revision: "46"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 38530cfdbde78e96fb41093c79b6a5d1bb8fd132
ms.sourcegitcommit: 6b6d905bbef7796c850178e99ac293578bb58317
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/17/2017
---
# <a name="walkthrough-publishing-wcf-services-with-the-wcf-netmsmq-adapter"></a><span data-ttu-id="dfe6d-102">チュートリアル: Wcf-netmsmq アダプタを使用して WCF サービスの発行</span><span class="sxs-lookup"><span data-stu-id="dfe6d-102">Walkthrough: Publishing WCF Services with the WCF-NetMsmq Adapter</span></span>
  
> [!NOTE]
>  <span data-ttu-id="dfe6d-103">アダプターの詳細については、次を参照してください。 [BizTalk Server のアダプター](../core/adapters-in-biztalk-server.md)です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-103">For more information about adapters, see [Adapters in BizTalk Server](../core/adapters-in-biztalk-server.md).</span></span>  
  
## <a name="introduction"></a><span data-ttu-id="dfe6d-104">概要</span><span class="sxs-lookup"><span data-stu-id="dfe6d-104">Introduction</span></span>
  
 <span data-ttu-id="dfe6d-105">[!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] では、オーケストレーションを [!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)] サービスとして公開できます。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-105">In [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)], an orchestration can be published as a [!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="dfe6d-106">BizTalk の受信場所を通じて、オーケストレーションにより [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] エンドポイントを公開し、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] クライアントから呼び出せるようにします。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-106">Through a BizTalk receive location, an orchestration can expose a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] endpoint, which allows it to be called by a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client.</span></span> <span data-ttu-id="dfe6d-107">**BizTalk WCF サービス公開ウィザード**オーケストレーション、受信場所として公開する簡単な方法を提供します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-107">The **BizTalk WCF Service Publishing Wizard** provides a simple way to expose an orchestration as a receive location.</span></span>  
  
 <span data-ttu-id="dfe6d-108">Wcf-netmsmq アダプターを使用して、 **NetMsmqBinding**基になるトランスポートとして Microsoft メッセージ キュー (MSMQ とも呼ばれます) を使用するためのサポートを提供するバインディング。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-108">The WCF-NetMsmq adapter uses the **NetMsmqBinding** binding to provide support for using Microsoft Message Queuing (also known as MSMQ) as its underlying transport.</span></span> <span data-ttu-id="dfe6d-109">[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスのクライアントは、WCF-NetMSMQ アダプターを使用するように構成された受信場所を使用して、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] メッセージを MSMQ キューに送信します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-109">The client of a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service sends [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] messages to an MSMQ queue by using the receive location configured to use the WCF-NetMSMQ adapter.</span></span> <span data-ttu-id="dfe6d-110">アダプターは MSMQ キューから [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] メッセージを取得し、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 形式に変換して、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] メッセージ ボックス データベースに書き込みます。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-110">The adapter picks up the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] messages from the MSMQ queue, converts them into [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] format, and writes them to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] MessageBox database.</span></span>  
  
 <span data-ttu-id="dfe6d-111">このチュートリアルでは、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] クライアント コンソール アプリケーションが WCF-NetMsmq アダプターを使用して、.NET コンソール アプリケーションでホストされている [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスと MSMQ メッセージ キューを介して通信する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-111">This walkthrough shows how a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client console application uses the WCF-NetMsmq adapter to communicate with a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service, hosted in a .NET console application, through an MSMQ message queue.</span></span> <span data-ttu-id="dfe6d-112">BizTalk WCF サービス公開ウィザードで受信場所にメタデータを公開する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-112">It demonstrates how to publish metadata for a receive location with the BizTalk WCF Service Publishing Wizard.</span></span> <span data-ttu-id="dfe6d-113">公開メタデータをサポートするように Web アプリケーションを構成する方法についても説明します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-113">It also shows how to configure a Web application to support publishing metadata.</span></span>  
  
 <span data-ttu-id="dfe6d-114">このチュートリアルを完了すると、次のタスクを実行できるようになります。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-114">After completing this walkthrough, you will understand how to perform the following tasks:</span></span>  
  
-   <span data-ttu-id="dfe6d-115">Visual Studio を使用して、**展開**のローカル インスタンスに BizTalk アセンブリを展開するコマンドを[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-115">From within Visual Studio, use the **Deploy** command to deploy BizTalk assemblies to a local instance of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="dfe6d-116">これにより、アセンブリが含まれた BizTalk アプリケーションが作成されます。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-116">This creates a BizTalk application that is populated with the assemblies.</span></span> <span data-ttu-id="dfe6d-117">BizTalk アセンブリには、オーケストレーション、パイプライン、スキーマ、マップなど、BizTalk ソリューションで使用するリソース情報が含まれます。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-117">A BizTalk assembly contains resource information such as orchestrations, pipelines, schemas, and maps to be used in a BizTalk solution.</span></span>  
  
-   <span data-ttu-id="dfe6d-118">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理コンソールから、公開した [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスをホストするように WCF-NetMsmq 受信場所を構成する。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-118">From the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, configure a WCF-NetMsmq receive location to host the published [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
-   <span data-ttu-id="dfe6d-119">**BizTalk WCF サービス公開ウィザード**、既存の受信場所用にメタデータを公開する Web アプリケーションを作成します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-119">From the **BizTalk WCF Service Publishing Wizard**, create the Web application to publish metadata for an existing receive location.</span></span> <span data-ttu-id="dfe6d-120">このメタデータは、メッセージを受信場所に送信するクライアントによって使用されます。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-120">This metadata is used by the client that submits messages to the receive location.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="dfe6d-121">前提条件</span><span class="sxs-lookup"><span data-stu-id="dfe6d-121">Prerequisites</span></span>  
 <span data-ttu-id="dfe6d-122">このサンプルの手順を実行するには、使用する環境が次の前提条件を満たしている必要があります。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-122">To perform the steps in this sample ensure that your environment installs the following prerequisites:</span></span>  
  
-   <span data-ttu-id="dfe6d-123">アセンブリをビルドおよび展開プロセスと、サンプルを実行しているコンピューターを実行するコンピューターの両方では、Microsoft Windows Server、.NET Framework、および BizTalk Server が必要です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-123">Both the computer that builds the assemblies and runs the deployment process, and the computer that runs the sample, require Microsoft Windows Server, .NET Framework, and BizTalk Server.</span></span>  
  
-   <span data-ttu-id="dfe6d-124">アセンブリのビルドと展開プロセスの実行に使用するコンピューターには、Microsoft Visual Studio が必要です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-124">The computer used to build the assemblies and run the deployment process requires Microsoft Visual Studio.</span></span>  
  
-   <span data-ttu-id="dfe6d-125">サンプルを実行するコンピューターには、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] アダプターと [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] 管理ツールが必要です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-125">The computer that runs the sample requires the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Adapters and the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Administration Tools.</span></span> <span data-ttu-id="dfe6d-126">これらは、Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)] のセットアップ時にインストールするオプションです。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-126">These are options to install during setup of Microsoft [!INCLUDE[btsBizTalkServer2006r3](../includes/btsbiztalkserver2006r3-md.md)].</span></span>  
  
-   <span data-ttu-id="dfe6d-127">管理タスクの実行に使用するコンピューターで、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理コンソール内の [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] アプリケーション設定を構成するには、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理者グループのメンバーであるユーザー アカウントとして実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-127">On the computers that you use to perform administrative tasks, you must run as a user account that is a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group to configure the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application settings within the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="dfe6d-128">また、アプリケーションの展開、ホスト インスタンスの管理、およびその他の必要なタスクを実行するには、このユーザー アカウントはローカル管理者グループのメンバーである必要もあります。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-128">This user account must also be a member of the local Administrators group for application deployment, managing host instances, and other tasks that may be required.</span></span>  
  
-   <span data-ttu-id="dfe6d-129">必要とする任意のコンピューターで[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]、機能の 1 回限りのセットアップの手順を完了、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]ではサンプル[http://go.microsoft.com/fwlink/?LinkId=135510](http://go.microsoft.com/fwlink/?LinkId=135510)です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-129">On any computer that requires [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] capability, complete the one-time setup procedure for the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] samples at [http://go.microsoft.com/fwlink/?LinkId=135510](http://go.microsoft.com/fwlink/?LinkId=135510).</span></span>  
  
-   <span data-ttu-id="dfe6d-130">サンプルを実行してバインドまたは .msi ファイルを [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] にインポートするコンピューターで、ホストが信頼されているホストではないことを確認します。信頼されているホストの場合、インポートは失敗します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-130">On the computer that runs the sample and imports a binding or an .msi file into [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], ensure the host is not a trusted host or the import will fail.</span></span>  
  
-   <span data-ttu-id="dfe6d-131">チュートリアルのコードをダウンロードし、コンピューターに展開する必要があります。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-131">You must download the walkthrough code and extract it to your computer.</span></span> <span data-ttu-id="dfe6d-132">このチュートリアルでは、全体の一部[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]アダプター チュートリアル パッケージです。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-132">This walkthrough is a part of the entire [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Adapter Walkthrough package.</span></span> <span data-ttu-id="dfe6d-133">ファイルをダウンロードする**WCFAdapterWalkthroughs.exe**から、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]デベロッパー センター [http://go.microsoft.com/fwlink/?LinkId=194140](http://go.microsoft.com/fwlink/?LinkId=194140)です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-133">You can download the file **WCFAdapterWalkthroughs.exe** from the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Developer Center at [http://go.microsoft.com/fwlink/?LinkId=194140](http://go.microsoft.com/fwlink/?LinkId=194140).</span></span>  
  
## <a name="build-and-deploy-the-biztalk-solution-biztalkapp"></a><span data-ttu-id="dfe6d-134">ビルドし、BizTalk ソリューションの BizTalkApp を展開</span><span class="sxs-lookup"><span data-stu-id="dfe6d-134">Build and deploy the BizTalk solution, BizTalkApp</span></span>  
  
1.  <span data-ttu-id="dfe6d-135">抽出する WCFNetMsmqAdapterPublishing.exe **C:\WCFNetMsmqAdapterPublishing**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-135">Extract WCFNetMsmqAdapterPublishing.exe to **C:\WCFNetMsmqAdapterPublishing**.</span></span>  
  
2.  <span data-ttu-id="dfe6d-136">Visual Studio で開く、 **WCFNetMsmqAdapterPublishing.sln**ファイル。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-136">In Visual Studio, open the **WCFNetMsmqAdapterPublishing.sln** file.</span></span>  
  
3.  <span data-ttu-id="dfe6d-137">ソリューション エクスプ ローラーで、 **BizTalkApp**、開き、 **OrderProcess.odx**を確認します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-137">In Solution Explorer, expand **BizTalkApp**, and then open **OrderProcess.odx** to review.</span></span> <span data-ttu-id="dfe6d-138">サンプル オーケストレーションは発注要求メッセージを受信し、注文応答メッセージを返します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-138">The sample orchestration receives order request messages, and simply returns the order response messages.</span></span>  
  
4.  <span data-ttu-id="dfe6d-139">**BizTalkApp**アセンブリを GAC にインストールする必要があります、厳密な名前キー ファイルを展開プロセスを完了する必要があります。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-139">Because the **BizTalkApp** assembly must be installed in the GAC, it will need a strong name key file to complete the deployment process.</span></span> <span data-ttu-id="dfe6d-140">右クリックし、 **BizTalkApp**プロジェクトをクリックして**プロパティ**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-140">Right-click the **BizTalkApp** project, and then click **Properties**.</span></span> <span data-ttu-id="dfe6d-141">**プロパティ**] ページで [**署名**を選択し、**アセンブリに署名**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-141">On the **Properties** page, click **Signing**, and select **Sign the assembly**.</span></span> <span data-ttu-id="dfe6d-142">下向きの矢印をクリックして、**厳密な名前キー ファイルを選択して**ドロップダウン リストをクリックして**\<新規 >**を入力し、`keyfile.snk`で、**キー ファイルの名前** テキスト ボックス。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-142">Click the down arrow in the **Choose a strong name key file** drop-down list, click **\<New>** and enter `keyfile.snk` in the **key file name** textbox.</span></span> <span data-ttu-id="dfe6d-143">オフに**キーファイルをパスワードで保護する**、順にクリック**OK**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-143">Uncheck **Protect my key file with a password**, and then click **OK**.</span></span>  
  
5.  <span data-ttu-id="dfe6d-144">クリックして、**展開**タブをクリックし、変更、**サーバー**プロパティだけでなく、BizTalk 管理データベースを別のデータベース サーバーを使用する場合**LOCALHOST**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-144">Click the **Deployment** tab, and then change the **Server** property if you use a different database server for the BizTalk Management database besides **LOCALHOST**.</span></span>  <span data-ttu-id="dfe6d-145">確認**BizTalk アプリケーション**に値が設定されている**WCFNetMsmqAdapterPublishing**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-145">Ensure **BizTalk Application** value is set to **WCFNetMsmqAdapterPublishing**.</span></span> <span data-ttu-id="dfe6d-146">確認**グローバル アセンブリ キャッシュにインストール**に設定されている**True**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-146">Ensure **Install to Global Assembly Cache** is set to **True**.</span></span>  
  
6.  <span data-ttu-id="dfe6d-147">ソリューション エクスプ ローラーで右クリックし、 **BizTalkApp**プロジェクトし、をクリックして**リビルド**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-147">In Solution Explorer, right-click the **BizTalkApp**  project and then click **Rebuild**.</span></span>  
  
7.  <span data-ttu-id="dfe6d-148">ソリューション エクスプ ローラーで右クリック**BizTalkApp**、クリックして**展開**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-148">In Solution Explorer, right-click **BizTalkApp**, and then click **Deploy**.</span></span>  
  
## <a name="configure-the-application"></a><span data-ttu-id="dfe6d-149">アプリケーションの構成</span><span class="sxs-lookup"><span data-stu-id="dfe6d-149">Configure the application</span></span>  
  
1.  <span data-ttu-id="dfe6d-150">次の手順で、Microsoft メッセージ キュー (MSMQ) コンポーネントがコンピューターにインストールされていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-150">Make sure that the Microsoft Message Queuing (MSMQ) component is installed on your computer as follows:</span></span>  
  
    1.  <span data-ttu-id="dfe6d-151">をクリックして**開始**を右クリックして**コンピューター**、順にクリック**管理**を開くには**サーバー マネージャー**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-151">Click **Start**, right-click **Computer**, and then click **Manage** to open **Server Manager**.</span></span>  
  
    2.  <span data-ttu-id="dfe6d-152">展開して、**機能**ノード。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-152">Expand the **Features** node.</span></span>  <span data-ttu-id="dfe6d-153">場合**メッセージ キュー**がインストールされていないを右クリックして**機能**を選択し、**機能の追加**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-153">If **Message Queuing** is not installed, right-click **Features**, and select **Add Features**.</span></span> <span data-ttu-id="dfe6d-154">確認**メッセージ キュー**、をクリックして**[次へ]**、順にクリック**インストール**そのシステムで MSMQ をインストールします。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-154">Check **Message Queuing**, click **Next**, and then click **Install** to install MSMQ on that system.</span></span>  
  
2.  <span data-ttu-id="dfe6d-155">次の手順で、メッセージ キュー サービスがコンピューターで開始され、WCF-NetMsmq アダプターで使用できることを確認します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-155">Make sure that the MSMQ message queuing service is started on your computer to be used by the WCF-NetMsmq adapter as follows:</span></span>  
  
    1.  <span data-ttu-id="dfe6d-156">をクリックして**開始**、をポイント**管理ツール**、順にクリック**Services**。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-156">Click **Start**, point to **Administrative Tools**, and then click **Services**.</span></span>  
  
    2.  <span data-ttu-id="dfe6d-157">**Services**、ことを確認して、**ステータス**の**メッセージ キュー**サービスは**Started**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-157">In **Services**, make sure that the **Status** of the **Message Queuing** service is **Started**.</span></span> <span data-ttu-id="dfe6d-158">サービスが開始されていない場合は右クリック**メッセージ キュー**、クリックして**開始**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-158">If the service is not started, right-click **Message Queuing**, and then click **Start**.</span></span>  
  
3.  <span data-ttu-id="dfe6d-159">WCF-NetMsmq がクライアントからの受信 [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] メッセージを取得する元となる、受信場所が使用するターゲット キューを作成します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-159">Create the target queue that the receive location uses from which the WCF-NetMsmq adapter picks up incoming [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] messages from the clients.</span></span>  
  
    1.  <span data-ttu-id="dfe6d-160">をクリックして**開始**、をポイント**管理ツール**、順にクリック**コンピューターの管理**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-160">Click **Start**, point to **Administrative Tools**, and then click **Computer Management**.</span></span>  
  
    2.  <span data-ttu-id="dfe6d-161">**コンピューターの管理**、展開**サービスとアプリケーション**、展開**メッセージ キュー**を右クリックして**専用キュー**、をポイント**新規**、クリックして**プライベート キュー**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-161">In **Computer Management**, expand **Services and Applications**, expand **Message Queuing**, right-click **Private Queues**, point to **New**, and then click **Private Queue**.</span></span>  
  
    3.  <span data-ttu-id="dfe6d-162">**新しい専用キュー**  ダイアログ ボックスで、「`WCFNetMsmqAdapterPublishing`で、**キュー名**テキスト ボックスで、、**トランザクション**チェック ボックスをクリックしてして**OK**.</span><span class="sxs-lookup"><span data-stu-id="dfe6d-162">In the **New Private Queue** dialog box, type `WCFNetMsmqAdapterPublishing` in the **Queue name** text box, select the **Transactional** check box, and then click **OK**.</span></span>  
  
4.  <span data-ttu-id="dfe6d-163">次の手順に従って、サンプル アプリケーションの WCF-NetMsmq 受信場所を作成します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-163">Create a WCF-NetMsmq receive location for the sample application as follows:</span></span>  
  
    1.  <span data-ttu-id="dfe6d-164">をクリックして**開始**、をポイント**すべてのプログラム**、をポイント[!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)]、順にクリック**BizTalk Server 管理コンソール**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-164">Click **Start**, point to **All Programs**, point to [!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)], and then click **BizTalk Server Administration**.</span></span>  
  
    2.  <span data-ttu-id="dfe6d-165">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、 **BizTalk グループ**、展開**アプリケーション**、展開**WCFNetMsmqAdapterPublishing**を右クリックして**受信ポート**、指す**新規**、順にクリック**一方向の受信ポート。**</span><span class="sxs-lookup"><span data-stu-id="dfe6d-165">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **BizTalk Group**, expand **Applications**, expand **WCFNetMsmqAdapterPublishing**, right-click **Receive Ports**, point to **New**, and then click **One-way Receive Port.**</span></span>  
  
    3.  <span data-ttu-id="dfe6d-166">**受信ポートのプロパティ** ダイアログ ボックスで、**名前**テキスト ボックスで、「 `WCFNetMsmqAdapterPublishing.ReceivePurchaseOrder`、クリックしてして**ok**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-166">In the **Receive Port Properties** dialog box, in the **Name** text box, type `WCFNetMsmqAdapterPublishing.ReceivePurchaseOrder`, and then click **OK**.</span></span>  
  
    4.  <span data-ttu-id="dfe6d-167">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールを右クリックして**[wcfnetmsmqadapterpublishing.receivepurchaseorder]**、をポイント**新規**、クリックして**受信場所**.</span><span class="sxs-lookup"><span data-stu-id="dfe6d-167">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, right-click **WCFNetMsmqAdapterPublishing.ReceivePurchaseOrder**, point to **New**, and then click **Receive Location**.</span></span>  
  
    5.  <span data-ttu-id="dfe6d-168">**受信場所のプロパティ** ダイアログ ボックスで、**名前**テキスト ボックスで、「`WCFNetMsmqAdapterPublishing.ReceivePurchaseOrder.NetMsmq`です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-168">In the **Receive Location Properties** dialog box, in the **Name** text box, type `WCFNetMsmqAdapterPublishing.ReceivePurchaseOrder.NetMsmq`.</span></span>  
  
    6.  <span data-ttu-id="dfe6d-169">**受信場所のプロパティ**] ダイアログ ボックスで、**トランスポート**横**型**[ **Wcf-netmsmq**から、クリックしてドロップダウン リスト、**構成**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-169">In the **Receive Location Properties** dialog box, in the **Transport** section next to **Type**, select **WCF-NetMsmq** from the drop-down list, and then click **Configure**.</span></span>  
  
    7.  <span data-ttu-id="dfe6d-170">**Wcf-netmsmq トランスポートのプロパティ** ダイアログ ボックスで、**全般** タブの 、**アドレス (URI)**テキスト ボックスで、「`net.msmq://localhost/private/WCFNetMsmqAdapterPublishing`です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-170">In the **WCF-NetMsmq Transport Properties** dialog box, on the **General**  tab, in the **Address (URI)** text box, type `net.msmq://localhost/private/WCFNetMsmqAdapterPublishing`.</span></span>  
  
    8.  <span data-ttu-id="dfe6d-171">**Wcf-netmsmq トランスポートのプロパティ**ダイアログ ボックスの**バインド** タブで、ことを確認して、**トランザクション** チェック ボックスをオンします。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-171">In the **WCF-NetMsmq Transport Properties** dialog box, on the **Binding**  tab, make sure that the **Transactional** check box is selected.</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="dfe6d-172">対象のキューをトランザクション キューとして作成したため、このチェック ボックスをオンにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-172">Because you created the target queue as a transactional queue, you must select this check box.</span></span> <span data-ttu-id="dfe6d-173">このチェック ボックスがオンになっていない場合、受信場所のトランザクション要件と基になる MSMQ キューのトランザクション要件との間に不一致が生じるため、受信場所が有効になりません。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-173">If this box is not selected, the receive location will not be enabled because there will be a discrepancy between the transactional requirement of the receive location and that of the underlying MSMQ queue.</span></span>  
  
    9. <span data-ttu-id="dfe6d-174">**Wcf-netmsmq トランスポートのプロパティ** ダイアログ ボックスで、**セキュリティ** タブで **なし**から、**セキュリティ モード**ドロップダウン リスト.</span><span class="sxs-lookup"><span data-stu-id="dfe6d-174">In the **WCF-NetMsmq Transport Properties** dialog box, on the **Security**  tab, select **None** from the **Security mode** drop-down list.</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="dfe6d-175">このチュートリアルでは、MSMQ は、[!INCLUDE[btsAD](../includes/btsad-md.md)] 統合を無効にしてコンピューターにインストールされていると想定しています。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-175">This walkthrough assumes that MSMQ is installed with [!INCLUDE[btsAD](../includes/btsad-md.md)] integration disabled on your computer.</span></span> <span data-ttu-id="dfe6d-176">既定値は**WindowsDomain**の**MSMQ 認証モード**プロパティは使用可能な場合に[!INCLUDE[btsAD](../includes/btsad-md.md)]統合が有効にします。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-176">The default value, **WindowsDomain**, for the **MSMQ authentication mode** property is available when [!INCLUDE[btsAD](../includes/btsad-md.md)] integration is enabled.</span></span>  
  
    10. <span data-ttu-id="dfe6d-177">**受信場所のプロパティ**ダイアログ ボックスで、をクリックして**OK**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-177">In the **Receive Location Properties** dialog box, click **OK**.</span></span>  
  
5.  <span data-ttu-id="dfe6d-178">サンプル アプリケーションの FILE 送信ポートを作成します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-178">Create a FILE send port for the sample application.</span></span> <span data-ttu-id="dfe6d-179">このポートは、サービスの基となるオーケストレーションの注文書からの応答をルーティングします。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-179">This port is used to route the response from the purchase order from the service's underlying orchestration.</span></span>  
  
    1.  <span data-ttu-id="dfe6d-180">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、 **WCFNetMsmqAdapterPublishing**を右クリックして**送信ポート**、をポイント**新規**をクリックして**静的な一方向送信ポート**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-180">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WCFNetMsmqAdapterPublishing**, right-click **Send Ports**, point to **New**, and then click **Static One-way Send Port**.</span></span>  
  
    2.  <span data-ttu-id="dfe6d-181">**送信ポートのプロパティ** ダイアログ ボックスで、**名前**テキスト ボックスで、「`WCFNetMsmqAdapterPublishing.SendPurchaseOrder.File`です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-181">In the **Send Port Properties** dialog box, in the **Name** text box, type `WCFNetMsmqAdapterPublishing.SendPurchaseOrder.File`.</span></span>  
  
    3.  <span data-ttu-id="dfe6d-182">**送信ポートのプロパティ**] ダイアログ ボックスで、**トランスポート**セクションの横に**型**[**ファイル**ドロップダウン リストから、し、をクリックして**構成**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-182">In the **Send Port Properties** dialog box, in the **Transport** section next to **Type**, select **FILE** from the drop-down list, and then click **Configure**.</span></span>  
  
    4.  <span data-ttu-id="dfe6d-183">**FILE トランスポートのプロパティ**ダイアログ ボックスの**全般**] タブの [、**コピー先フォルダー**テキスト ボックスで、「 `C:\WCFNetMsmqAdapterPublishing\Out`、順にクリック**ok**.</span><span class="sxs-lookup"><span data-stu-id="dfe6d-183">In the **FILE Transport Properties** dialog box, on the **General** tab, in the **Destination folder** text box, type `C:\WCFNetMsmqAdapterPublishing\Out`, and then click **OK**.</span></span>  
  
    5.  <span data-ttu-id="dfe6d-184">**送信ポートのプロパティ**ダイアログ ボックスで、をクリックして**OK**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-184">In the **Send Port Properties** dialog box, click **OK**.</span></span>  
  
6.  <span data-ttu-id="dfe6d-185">次の手順で、サンプル アプリケーションのホスト名とバインドを指定します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-185">Specify the host name and bindings for the sample application as follows:</span></span>  
  
    1.  <span data-ttu-id="dfe6d-186">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、 **WCFNetMsmqAdapterPublishing**、展開**オーケストレーション**サンプル オーケストレーションを右クリックしをクリックして**のプロパティ**をクリックして**バインド**、設定と**ホスト**に**BizTalkServerApplication**または別の適切なホストです。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-186">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WCFNetMsmqAdapterPublishing**, expand **Orchestrations**, right-click the sample orchestration, click **Properties**, click **Bindings**, and set **Host** to **BizTalkServerApplication** or another appropriate host.</span></span>  
  
    2.  <span data-ttu-id="dfe6d-187">**オーケストレーションのプロパティ**ダイアログ ボックスで、 **WCFNetMsmqAdapterPublishing.ReceivePurchaseOrder**から、**受信ポート**のドロップダウンリスト**PurchaseOrderRequestPort**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-187">In the **Orchestration Properties** dialog box, select **WCFNetMsmqAdapterPublishing.ReceivePurchaseOrder** from the **Receive Ports** drop-down list for the **PurchaseOrderRequestPort**.</span></span>  
  
    3.  <span data-ttu-id="dfe6d-188">**オーケストレーションのプロパティ**ダイアログ ボックスで、 **WCFNetMsmqAdapterPublishing.SendPurchaseOrder.File**から、**送信ポート/送信ポート グループ**ドロップダウン リスト**PurchaseOrderResponsePort**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-188">In the **Orchestration Properties** dialog box, select **WCFNetMsmqAdapterPublishing.SendPurchaseOrder.File** from the **Send Ports/Send Port Groups** drop-down list for the **PurchaseOrderResponsePort**.</span></span>  
  
    4.  <span data-ttu-id="dfe6d-189">**オーケストレーションのプロパティ**ダイアログ ボックスで、をクリックして**OK**構成を保存します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-189">In the **Orchestration Properties** dialog box, click **OK** to save the configuration.</span></span>  
  
## <a name="publish-the-metadata-for-the-wcf-netmsmq-receive-location"></a><span data-ttu-id="dfe6d-190">Wcf-netmsmq 受信場所のメタデータを公開します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-190">Publish the metadata for the WCF-NetMsmq receive location</span></span>  
  
1.  <span data-ttu-id="dfe6d-191">をクリックして**開始**、をポイント**すべてのプログラム**、をポイント[!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)]、順にクリック**BizTalk WCF サービス公開ウィザード**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-191">Click **Start**, point to **All Programs**, point to [!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)], and then click **BizTalk WCF Service Publishing Wizard**.</span></span>  
  
2.  <span data-ttu-id="dfe6d-192">**BizTalk WCF サービス公開ウィザードへようこそ** ページで、をクリックして**次**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-192">On the **Welcome to the BizTalk WCF Service Publishing Wizard** page, click **Next**.</span></span>  
  
3.  <span data-ttu-id="dfe6d-193">**WCF サービスの種類** ページで、、**メタデータのみのエンドポイント (MEX)** WCFNetMsmq のメタデータを公開する チェック ボックスの受信場所。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-193">On the **WCF Service Type** page, select the **Metadata only endpoint (MEX)** check box to publish the metadata for the WCFNetMsmq receive location.</span></span> <span data-ttu-id="dfe6d-194">選択**WCFNetMsmqAdapterPublishing.ReceivePurchaseOrder.NetMsmq**から、**受信場所のメタデータを公開**クリックしてドロップダウン リスト、**次**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-194">Select **WCFNetMsmqAdapterPublishing.ReceivePurchaseOrder.NetMsmq** from the **Publish metadata for receive location** drop-down list, and then click **Next**.</span></span>  
  
4.  <span data-ttu-id="dfe6d-195">**WCF サービスの作成**] ページで、[ **BizTalk オーケストレーションの WCF サービスとして発行**、クリックして**[次へ]**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-195">On the **Create WCF Service** page, select **Publish BizTalk orchestrations as WCF service**, and then click **Next**.</span></span>  
  
5.  <span data-ttu-id="dfe6d-196">**BizTalk アセンブリ**] ページの [、 **BizTalk アセンブリ ファイル (\*.dll)**テキスト ボックスで、をクリックして**参照**を参照する、 **C:\WCFNetMsmqAdapterPublishing\BizTalkApp\bin\Development**フォルダーで、をクリックし、サンプル オーケストレーションを含むアセンブリをダブルクリックして**次**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-196">On the **BizTalk Assembly** page, in the **BizTalk assembly file (\*.dll)** text box, click **Browse** to browse to the **C:\WCFNetMsmqAdapterPublishing\BizTalkApp\bin\Development** folder, double-click the assembly containing the sample orchestration to publish, and then click **Next**.</span></span>  
  
6.  <span data-ttu-id="dfe6d-197">**オーケストレーションとポート** ページで、ことを確認して、**ポート: PurchaseOrderRequestPort**ノードがページで、選択されているしをクリックして**次**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-197">On the **Orchestrations and Ports** page, make sure that the **Port: PurchaseOrderRequestPort** node is selected on the page, and then click **Next**.</span></span>  
  
     <span data-ttu-id="dfe6d-198">受信ポートの MEX が公開され、メッセージを受信場所に送信するためにクライアントによって使用されます。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-198">The MEX for the receive port will be published and used by the client to submit messages to the receive location.</span></span>  
  
7.  <span data-ttu-id="dfe6d-199">**WCF サービスのプロパティ**] ページの [、 **WCF サービスのターゲットの名前空間**テキスト ボックスに入力する、この公開された URI[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービスが使用すると、クリックして**次へ**.</span><span class="sxs-lookup"><span data-stu-id="dfe6d-199">On the **WCF Service Properties** page, in the **Target namespace of WCF service** text box, type a URI that you want this published [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service to use, and then click **Next**.</span></span> <span data-ttu-id="dfe6d-200">このチュートリアルでは、既定の URI を選択したままに`http://tempuri.org/`です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-200">For this walkthrough, leave the default URI, `http://tempuri.org/`.</span></span>  
  
8.  <span data-ttu-id="dfe6d-201">**WCF サービスの場所** ページで、次の場所を指定する操作を実行、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービスを作成して、をクリックする**次**:</span><span class="sxs-lookup"><span data-stu-id="dfe6d-201">On the **WCF Service Location** page, perform the following actions to specify the location of the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] services to create, and then click **Next**:</span></span>  
  
    1.  <span data-ttu-id="dfe6d-202">**場所**テキスト ボックスで、「Web ディレクトリ名、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービスが実行されるかをクリックして**参照**Web ディレクトリを選択します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-202">In the **Location** text box, type the Web directory name where the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service runs or click **Browse** and select a Web directory.</span></span> <span data-ttu-id="dfe6d-203">このチュートリアルでは、既定の場所を選択したままに (http://localhost/*\<BizTalk アセンブリ名 >*) で、**場所**テキスト ボックス。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-203">For this walkthrough, leave the default location (http://localhost/*\<BizTalk Assembly Name>*) in the **Location** text box.</span></span>  
  
    2.  <span data-ttu-id="dfe6d-204">選択、 **WCF サービスへの匿名アクセスを許可する**オプション。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-204">Select the **Allow anonymous access to WCF service** option.</span></span> <span data-ttu-id="dfe6d-205">: このオプションでは、作成した仮想ディレクトリに匿名アクセスを追加します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-205">This option adds anonymous access to the created virtual directory.</span></span> <span data-ttu-id="dfe6d-206">このウィザードで作成される Web アプリケーションに匿名認証を許可するには、このオプションをオンにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-206">This option needs to be selected to allow anonymous authentication for the Web application that this wizard will create.</span></span>  
  
9. <span data-ttu-id="dfe6d-207">**WCF サービスの概要**] ページで [**作成**を作成する、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービス。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-207">On the **WCF Service Summary** page, click **Create** to create the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
10. <span data-ttu-id="dfe6d-208">**BizTalk WCF サービス公開ウィザードの完了**] ページで [**完了**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-208">On the **Completing BizTalk WCF Service Publishing Wizard** page, click **Finish**.</span></span>  
  
## <a name="configure-the-web-application-hosting-the-published-metadata-service"></a><span data-ttu-id="dfe6d-209">公開したメタデータ サービスをホストする Web アプリケーションを構成します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-209">Configure the Web application hosting the published metadata service</span></span>  
  
1.  <span data-ttu-id="dfe6d-210">コマンド プロンプトを開きに移動、 **C:\inetpub\wwwroot\Microsoft.Samples.BizTalk.WCF.NetMsmqPublishing.BizTalkApp**フォルダー場所、 **BizTalk WCF サービス公開ウィザード**作成、 [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービス。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-210">Open a command prompt, go to the **C:\inetpub\wwwroot\Microsoft.Samples.BizTalk.WCF.NetMsmqPublishing.BizTalkApp** folder where the **BizTalk WCF Service Publishing Wizard** created the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="dfe6d-211">開く、 **Web.config**ファイルのメモ帳を使用します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-211">Open the **Web.config** file using Notepad.</span></span>  
  
2.  <span data-ttu-id="dfe6d-212">メモ帳で、内部の次の行を追加、  **\<system.web >**要素。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-212">In Notepad, add the following line inside the **\<system.web>** element:</span></span>  
  
    ```  
    <trust level="Full" originUrl="" />  
    ```  
  
    > [!NOTE]
    >  <span data-ttu-id="dfe6d-213">この設定は省略可能です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-213">This setting is optional.</span></span> <span data-ttu-id="dfe6d-214">この設定により、公開された [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスをホストする ASP.NET アプリケーションに対して、オペレーティング システムのセキュリティの対象であるすべてのリソースへのアクセス権限が付与されます。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-214">It grants the ASP.NET application hosting the published [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service access to any resource that is subject to operating system security.</span></span>  
  
3.  <span data-ttu-id="dfe6d-215">次の手順に従い、公開された [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスを Internet Explorer を使用してテストします。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-215">Test the published [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service by using Internet Explorer as follows:</span></span>  
  
    1.  <span data-ttu-id="dfe6d-216">をクリックして**開始**、をポイント**管理者ツール**、順にクリック**インターネット インフォメーション サービス (IIS) マネージャー**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-216">Click **Start**, point to **Administrator Tools**, and then click **Internet Information Services (IIS) Manager**.</span></span>  
  
    2.  <span data-ttu-id="dfe6d-217">IIS マネージャーでは、BizTalk データベースの正しいアクセス許可を持つこのサービスが実行されるアプリケーション プールを作成します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-217">In IIS Manager, create an application pool within which this service will run that has the correct BizTalk database permissions.</span></span> <span data-ttu-id="dfe6d-218">右クリック**アプリケーション プール**、をクリックして**アプリケーション プールの追加**アプリケーション プールの名前を入力し、クリックして**OK**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-218">Right-click **Application Pools**, click **Add Application Pool**, enter a name for the application pool, and then click **OK**.</span></span>  
  
    3.  <span data-ttu-id="dfe6d-219">展開**アプリケーション プール**作成したアプリケーション プールを右クリックし、**詳細設定**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-219">Expand **Application Pools**, right-click the application pool you just created, and then select **Advanced Settings**.</span></span> <span data-ttu-id="dfe6d-220">**プロセス モデル**セクションで、アクセスを許可されているアカウントを入力して、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]データベースで、 **Identity**フィールドです。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-220">Under **Process Model** section, enter the account which has access to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases under the **Identity** field.</span></span>  
  
    4.  <span data-ttu-id="dfe6d-221">展開**Web サイト**、展開**既定の Web サイト**、し、BizTalk WCF サービス公開ウィザードを作成した Web アプリケーションを展開します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-221">Expand **Web Sites**, expand **Default Web Site**, and then expand the Web application that the BizTalk WCF Service Publishing Wizard created.</span></span>  
  
    5.  <span data-ttu-id="dfe6d-222">IIS マネージャーで、中央のウィンドウでをクリックして**コンテンツ ビュー**アプリケーションのファイルを表示します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-222">In IIS Manager, in the center pane, click **Content View** to display the files for the application.</span></span>  
  
    6.  <span data-ttu-id="dfe6d-223">右クリックし、 **Microsoft_Samples_BizTalk_WCF_NetMsmqPublishing_BizTalkApp_OrderProcess_PurchaseOrderRequestPort.svc**サービス ファイルを**BizTalk WCF サービス公開ウィザード**作成され、をクリックして**参照**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-223">Right-click the **Microsoft_Samples_BizTalk_WCF_NetMsmqPublishing_BizTalkApp_OrderProcess_PurchaseOrderRequestPort.svc** service file that the **BizTalk WCF Service Publishing Wizard** created, and then click **Browse**.</span></span> <span data-ttu-id="dfe6d-224">表示する Internet Explorer が開き、 **BizTalkServerInstance サービス**ことを示すページのインスタンス、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービスが実行されています。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-224">This opens Internet Explorer to display the **BizTalkServerInstance Service** page indicating that an instance of the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service is running.</span></span> <span data-ttu-id="dfe6d-225">ページには、完全な WSDL アドレスをコピーして、サービス メタデータ ツール (svcutil.exe) で使用することが表示されます。 または、ファイル システムから、Visual Studio 内でプロキシを取得するコードと、構成ファイルを、サービスのクライアント アプリケーションの作成に使用できます。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-225">The page displays a full WSDL address that you can copy and use with the Service Metadata Tool (svcutil.exe), or from within Visual Studio, to retrieve proxy code and a configuration file that can be used to create a client application for the service.</span></span>  
  
    7.  <span data-ttu-id="dfe6d-226">完全な WSDL アドレスを使用してコマンドラインをクリップボードにコピー **BizTalkServerInstance サービス**ページが前の手順で Internet Explorer が示されます。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-226">Copy to the Clipboard the command line with the full WSDL address from **BizTalkServerInstance Service** page that Internet Explorer shows in the previous step.</span></span>  
  
         <span data-ttu-id="dfe6d-227">**svcutil.exe http://localhost/Microsoft.Samples.BizTalk.WCF.NetMsmqPublishing.BizTalkApp/Microsoft_Samples_BizTalk_WCF_NetMsmqPublishing_BizTalkApp_OrderProcess_PurchaseOrderRequestPort.svc?wsdl**</span><span class="sxs-lookup"><span data-stu-id="dfe6d-227">**svcutil.exe http://localhost/Microsoft.Samples.BizTalk.WCF.NetMsmqPublishing.BizTalkApp/Microsoft_Samples_BizTalk_WCF_NetMsmqPublishing_BizTalkApp_OrderProcess_PurchaseOrderRequestPort.svc?wsdl**</span></span>  
  
## <a name="build-the-client-application"></a><span data-ttu-id="dfe6d-228">クライアント アプリケーションをビルドします。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-228">Build the client application</span></span>  
  
1.  <span data-ttu-id="dfe6d-229">管理者として Visual Studio コマンド プロンプトを開きに移動、 **C:\WCFNetMsmqAdapterPublishing\WCFClient**フォルダーです。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-229">Open a Visual Studio command prompt as Administrator and go to the **C:\WCFNetMsmqAdapterPublishing\WCFClient** folder.</span></span> <span data-ttu-id="dfe6d-230">このフォルダーに、プロキシ クラスおよびアプリケーション構成ファイルが保存されます。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-230">This is where you will place the proxy class and application configuration file.</span></span>  
  
2.  <span data-ttu-id="dfe6d-231">前の手順でコピーした、完全な WSDL アドレスを含む svcutil.exe コマンド ラインを貼り付け、Enter キーを押します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-231">Paste the entire svcutil.exe command line containing the full WSDL address that you copied in the previous procedure, and then press ENTER.</span></span> <span data-ttu-id="dfe6d-232">これは、クラスを作成、プロキシ、 **BizTalkServiceInstance.cs**、およびアプリケーション構成ファイル、 **output.config**です。コマンド プロンプト ウィンドウは、最後のセクションで使用するため開いたままにします。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-232">This creates the proxy class, **BizTalkServiceInstance.cs**, and application configuration file, **output.config**. Keep the command prompt window open for use during the final section.</span></span>  
  
3.  <span data-ttu-id="dfe6d-233">Visual Studio で、ソリューション エクスプ ローラーで右クリックし**WCFClient**、をポイント**追加**、クリックして**既存項目の**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-233">In Visual Studio, in Solution Explorer, right-click **WCFClient**, point to **Add**, and then click **Existing Item**.</span></span>  
  
4.  <span data-ttu-id="dfe6d-234">**既存項目の追加**ダイアログ ボックスを参照、 **WCFClient**フォルダーを選択**すべてのファイル (\*.\*)**で、**ファイルの種類**ドロップダウン リストで、 **BizTalkServiceInstance.cs**と**output.config**ファイル、および  をクリックして**追加**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-234">In the **Add Existing Item** dialog box, browse to the **WCFClient** folder, select **All Files (\*.\*)** in the **Files of type** drop-down list, select the **BizTalkServiceInstance.cs** and **output.config** files, and then click **Add**.</span></span>  
  
5.  <span data-ttu-id="dfe6d-235">展開**WCFClient**を右クリックして**output.config**、 をクリックして**の名前を変更**、し、入力`App.config`新しい名前として。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-235">Expand **WCFClient**, right-click **output.config**, click **Rename**, and then type `App.config` as the new name.</span></span>  
  
6.  <span data-ttu-id="dfe6d-236">ダブルクリックして**Program.cs**を呼び出して、公開された方法を確認する[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]svcutil.exe によって生成されたプロキシ クラスを使用してサービスを提供します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-236">Double-click **Program.cs** to review how to call the published [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service using the proxy class generated by svcutil.exe.</span></span>  
  
7.  <span data-ttu-id="dfe6d-237">展開**参照**、いることを確認し、 **WCFClient**プロジェクトが**System.ServiceModel.dll**参照します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-237">Expand **References**, and then make sure that the **WCFClient** project has **System.ServiceModel.dll** referenced.</span></span>  
  
8.  <span data-ttu-id="dfe6d-238">右クリックし、 **WCFClient**プロジェクトし、選択**ビルド**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-238">Right-click the **WCFClient** project and select **Build**.</span></span> <span data-ttu-id="dfe6d-239">次のセクションに、Visual Studio 開くおよび移動を維持します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-239">Keep Visual Studio open and go to the next section.</span></span>  
  
## <a name="test-the-sample-solution-with-the-wcf-netmsmq-adapter"></a><span data-ttu-id="dfe6d-240">Wcf-netmsmq アダプターを使用するサンプル ソリューションをテストします。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-240">Test the sample solution with the WCF-NetMsmq adapter</span></span>  
  
1.  <span data-ttu-id="dfe6d-241">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールを右クリックし、 **[wcfnetmsmqadapterpublishing]**アプリケーション、およびクリック**開始**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-241">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, right-click the **WCFNetMsmqAdapterPublishing** application, and then click **Start**.</span></span> <span data-ttu-id="dfe6d-242">**開始**ダイアログ ボックスで、をクリックして**開始**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-242">In the **Start** dialog box, click **Start**.</span></span>  
  
2.  <span data-ttu-id="dfe6d-243">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、**プラットフォームの設定**、展開**ホスト インスタンス**を右クリックして**BizTalkServerApplication**または別クリックして、ホスト インスタンスの適切な**再起動**です。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-243">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **Platform Settings**, expand **Host Instances**, right-click **BizTalkServerApplication** or another appropriate host instance, and then click **Restart**.</span></span> <span data-ttu-id="dfe6d-244">このステップは必須ではありませんが、この時点でサンプルが正しく動作することを確認しておくことをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-244">While this step is not required, it is a good idea to ensure the sample works correctly up to this point.</span></span>  
  
3.  <span data-ttu-id="dfe6d-245">Visual Studio での**デバッグ** メニューのをクリックして**デバッグなしで開始**WCFClient アプリケーションを実行します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-245">In Visual Studio, on the **Debug** menu, click **Start Without Debugging** to run the WCFClient application.</span></span> <span data-ttu-id="dfe6d-246">この操作で、サンプル メッセージが WCF-NetMsmq 受信場所に送信されます。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-246">This sends a sample message to the WCF-NetMsmq receive location.</span></span> <span data-ttu-id="dfe6d-247">メッセージが送信されたことを示す次の出力メッセージが表示されます。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-247">You will see the output message below stating the message was sent.</span></span>  
  
     <span data-ttu-id="dfe6d-248">**Wcf-netmsmq 送信操作の呼び出しの受信場所**</span><span class="sxs-lookup"><span data-stu-id="dfe6d-248">**Calling the Submit operation on the WCF-NetMsmq receive location**</span></span>  
  
     <span data-ttu-id="dfe6d-249">**任意のキーを押して WCF クライアント アプリケーションを閉じる**</span><span class="sxs-lookup"><span data-stu-id="dfe6d-249">**Press any key to close WCF client application**</span></span>  
  
4.  <span data-ttu-id="dfe6d-250">任意のキーを押して、WCFClient アプリケーションを閉じてください。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-250">Press any key to close the WCFClient application.</span></span>  
  
5.  <span data-ttu-id="dfe6d-251">Visual Studio コマンド プロンプトで、 **C:\WCFNetMsmqAdapterPublishing\Out**フォルダーをクリックして確認応答メッセージを返信 WCFClient アプリケーションが存在します。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-251">In the Visual Studio Command Prompt, go to the **C:\WCFNetMsmqAdapterPublishing\Out** folder, and then make sure the response message that the WCFClient application sent back exists.</span></span>  
  
6.  <span data-ttu-id="dfe6d-252">Internet Explorer とビューで開く {GUID} .xml ファイルをダブルクリックして、 **OrderID**値は、サービスによって処理されます。</span><span class="sxs-lookup"><span data-stu-id="dfe6d-252">Double-click the {GUID}.xml file to open it in Internet Explorer and view the **OrderID** value processed by the service.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="dfe6d-253">参照</span><span class="sxs-lookup"><span data-stu-id="dfe6d-253">See Also</span></span>  
 <span data-ttu-id="dfe6d-254">[構成、Wcf-netmsmq 受信場所](../core/how-to-configure-a-wcf-netmsmq-receive-location.md) </span><span class="sxs-lookup"><span data-stu-id="dfe6d-254">[Configure a WCF-NetMsmq Receive Location](../core/how-to-configure-a-wcf-netmsmq-receive-location.md) </span></span>  
 <span data-ttu-id="dfe6d-255">[WCF アダプターのチュートリアル](../core/wcf-adapter-walkthroughs.md) </span><span class="sxs-lookup"><span data-stu-id="dfe6d-255">[WCF Adapter Walkthroughs](../core/wcf-adapter-walkthroughs.md) </span></span>  
 [<span data-ttu-id="dfe6d-256">受信アダプターの wcf サービス メタデータの公開</span><span class="sxs-lookup"><span data-stu-id="dfe6d-256">Publishing Service Metadata for the WCF Receive Adapters</span></span>](../core/publishing-service-metadata-for-the-wcf-receive-adapters.md)