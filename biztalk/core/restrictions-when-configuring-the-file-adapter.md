---
title: ファイル アダプタ構成時の制限事項 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- configuring [File adapters], restrictions
- File adapters, restrictions
ms.assetid: 8d8137a7-5b16-4ae3-a0a7-6d114324bdf3
caps.latest.revision: 8
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 1c866dc6bfed3e378105b7055b312a832598c22d
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65399095"
---
# <a name="restrictions-when-configuring-the-file-adapter"></a>ファイル アダプタ構成時の制限事項
制限と規則、ファイル アダプターを使用する場合。

## <a name="file-mask-and-file-name-gotchas"></a>ファイル マスクおよびファイル名の潜在的な問題

ファイル マスクは、ファイル受信ハンドラー、受信場所から取得するファイルの種類を指定する文字列です。 ファイル名は、場所、ファイル送信ハンドラがメッセージを書き込むファイルの名前を指定する文字列です。  
  
 ファイル名およびファイル マスクのプロパティに、次の制限が適用されます。  
  
- 1 つのファイル マスクまたはファイル名を指定できますあたり受信場所または送信ポート。  
  
- 完全なパスまたはファイル マスクまたはファイル名とパスの一部が許可されていません。 ファイル マスクおよびファイル名は、常にパスを使用せずに名前を表します。  
  
- ファイル マスクおよびファイル名は区別されません。  
  
- ファイル名には、次の文字を含めることはできません: \< \> :/ &#124; "でしょうか。 * ;  
  
- ファイル マスクには、次の文字を含めることはできません: \< \> :/ &#124; "; 
  
- 次の予約済みのデバイス名は、ファイルの名前として使用できません。CON、PRN、AUX、クロック $、NUL、COM1、COM2、COM3、COM4、COM5、COM6、COM7、COM8、COM9、LPT1、LPT2、LPT3、LPT4、LPT5、LPT6、LPT7、LPT8、および LPT9 します。 さらに、これらの拡張機能の任意の組み合わせは許可されていません。  
  
- Windows ディスク ボリュームは、既定では、短期および長期のファイル名を使用する名前付け規則 8.3 (8dot3) を使用します。 非システム ディスク ボリュームは、8dot3 名前付け規則を無効にして、したがってのみ長いファイル名を使用します。 

  8dot3 を有効にすると、ファイルとファイル拡張子の短い名前に変換します。 たとえば、`testabcdefgh.docx`に変換`testab~1.doc`します。 ファイル名が短縮されから、ファイル拡張子を短縮`.docx`に`doc`します。

  この動作は、ファイル アダプターがファイルを受信する方法に影響します。 ファイル マスクに設定されている場合`*.xml`、し、ファイルの両方に一致する`*.xml`と`*.xmln`拡張機能が選択されています。 

  については、ディスクに 8dot3 名前付け規則が有効になっているかどうか、管理者、および種類としてコマンド プロンプトを開き`fsutil 8dot3name query c:`、または`fsutil 8dot3name query d:`など。 サンプル出力は、次のようになります。

  ```
  C:\WINDOWS\system32>fsutil 8dot3name query c:
  The volume state is: 0 (8dot3 name creation is enabled).
  The registry state is: 2 (Per volume setting - the default).
    
  Based on the above two settings, 8dot3 name creation is enabled on c:
  ```
    
  ファイル アダプターを使用して、 [FindFirstFile 関数](https://msdn.microsoft.com/library/windows/desktop/aa364418(v=vs.85).aspx)します。 この関数には、短期および長期のファイルの名前を持つ検索結果が含まれています。 フォルダーで、短期および長期のファイル名を表示するには、コマンド プロンプトを開きには、フォルダー、および種類`dir /x`します。 コマンド プロンプトで入力することも`dir c:\foldername /x`します。
    
  ボリュームに 8dot3name 設定を変更した場合、新しいファイルは新しい設定を使用します。 既存のファイルは、それらも移動するまでの名前を保持します。 
    
  のみを目的のファイルを選択して、8dot3name が無効になっているボリュームを使用するファイル アダプターを構成する最適な可能性があるし、負荷が高く、中にパフォーマンスを向上させる (オーバーヘッドが少ない) を取得するには。 
  
- ファイル パス、ファイル マスク、およびファイル名 (マクロの置換) なしの合計の長さは 256 文字を超えない必要があります。 (これは、メッセージ ボックス データベースの制限です)。  
  
- ファイル パスが始まることはできません"`\\`ですか?"。  
  
- マップ済みネットワーク ドライブ文字は、ユーザー セッションに基づいているため、ファイルのパスでは使用できません。  
  
  BizTalk メッセージング エンジンは、常にファイル名およびファイル マスクのプロパティ デザイン時に検証前に示した項目を使用しています。 さらに、ファイル アダプタ、ファイル名およびファイル マスク プロパティ実行時に検証動的ポートでメッセージを送信する場合。  
  
> [!NOTE]
>  ファイル アダプターは、システム ファイルまたは読み取り専用ファイルは選択されません。 ディスク ベースのファイルのみが取得されるアップ、およびデバイスのファイルではありません。  

## <a name="using-macros-in-file-names"></a>ファイル名のマクロの使用

定義済みマクロのセットを使用するには、ファイル送信ハンドラがメッセージを書き込みますファイルを動的に作成します。 ファイル システム上のファイルを作成する前に、ファイル送信ハンドラーの置換、すべてのマクロが個別の値で、ファイル名。 1 つのファイル名では、複数の異なるマクロを使用できます。  
  
 BizTalk エクスプ ローラー オブジェクト モデルを使用して、ファイル送信ハンドラを構成するときに、ファイル名のマクロを使用できます。  
  
 次のいずれかに該当する場合、ファイル送信ハンドラーは、値は、マクロを置き換えられません。  
  
- 対応するシステム プロパティが設定されていない場合  
  
- マクロのスペルが間違っている場合  
  
- マクロの値には、ファイル名に無効なシンボルが含まれています。  
  
  これらの条件のいずれかの問題が発生した場合、ファイル送信ハンドラ Myfile_%MessageID%.xml など、ファイル名をマクロのままです。  
  
  次の表は、サポートされているマクロの一覧し、ファイル送信ハンドラがそれらを置換する方法について説明します。  
  
|マクロ名|値に置き換えてください。|  
|----------------|----------------------|  
|%datetime%|YYYY、MM-DDThhmmss 形式で日付の時刻 (UTC) 協定世界時 (たとえば、1997-07-12T103508)。|  
|%datetime_bts2000%|YYYYMMDDhhmmsss 形式の UTC 日時。sss は秒およびミリ秒を表します (たとえば、199707121035234 は 1997 年 7 月 12 日 10 時 35 分 23 秒 400 ミリ秒を表します)。|  
|%datetime.tz%|ローカルの日時に GMT のタイム ゾーンを加えた YYYY-MM-DDThhmmssTZD 形式の日時 (例、1997-07-12T103508+800)。|  
|%DestinationParty%|送信先パーティの名前。 この値は、メッセージ コンテキスト プロパティ **BTS.DestinationParty**から取得されます。|  
|%DestinationPartyQualifier%|送信先パーティの修飾子。 この値は、メッセージ コンテキスト プロパティ **BTS.DestinationPartyQualifier**から取得されます。|  
|%MessageID%|BizTalk Server 内のメッセージのグローバル一意識別子 (GUID)。 値は、メッセージ コンテキスト プロパティから直接取得**BTS します。MessageID**します。|  
|%SourceFileName%|ファイル アダプターがメッセージを読み取るファイルの名前です。 ファイル名では、拡張機能が含まれていて、ファイルのパス、例、Sample.xml は含まれません。 ファイル アダプターがファイル名を抽出しに格納されているファイルの絶対パスからこのプロパティを置き換えるときに、**ファイル。ReceivedFileName**コンテキスト プロパティ。 コンテキスト プロパティに値がない場合: たとえば、ファイル アダプター以外のアダプタにメッセージを受信しました: マクロ置換しませんし、ファイルの名前をそのままに残ります (C:\Drop など\\%sourcefilename%)。 **注:** このマクロを正しく実装するには、出力メッセージが受信したメッセージと同じメッセージである必要があります。|  
|%SourceParty%|ファイル アダプタが受信したメッセージの受信元パーティの名前。 **注:** このマクロを正しく実装するには、出力メッセージが受信したメッセージと同じメッセージである必要があります。|  
|%SourcePartyQualifier%|ファイル アダプタが受信したメッセージの受信元パーティの修飾子。 **注:** このマクロを正しく実装するには、出力メッセージが受信したメッセージと同じメッセージである必要があります。|  
|%time%|hhmmss 形式の UTC 時刻。|  
|%time.tz%|ローカルの日付に GMT のタイム ゾーンを加えた hhmmssTZD 形式の日付 (例、124525+530)。|  
  
 
## <a name="receive-folder-and-destination-location-properties-gotchas"></a>受信フォルダーと移動先の場所のプロパティの注意事項

ファイルの受信場所はファイル システム上のフォルダーへのパスを含む文字列、またはネットワーク共有の元のファイル受信ハンドラーは、ファイルを読み取ります。 ファイル変換先の場所はファイル システム上のフォルダーへのパスを含む文字列、またはネットワーク共有のファイル送信ハンドラがファイルを書き込みます。  
  
 受信フォルダーと移動先の場所のプロパティに、次の制限が適用されます。  
  
- ファイル システムまたはネットワーク共有上のファイル パスが存在するは、ユーザーのプロパティを指定する場合に必要ではありません。  
  
- ファイルのパスは、常に絶対である必要があります。  
  
- 汎用名前付け規則 (UNC) 形式を使用して、ファイルのパスを指定することができます (たとえば、 \\ \\ < *server* \> \\ < *共有*\>)。  
  
- サーバー名が、次の文字を含める必要がありますいないファイルのパスが UNC 形式である場合は、: ' ~! @ # $ ^ & * ( ) = + [ ] { } \ &#124; ; : ' " , \< \> / ? ;  
  
- 親を使用することはできません (\\..\\) と現在 (\\.\\) フォルダーのシンボル ファイルのパスの一部にします。  
  
- ファイルのパスは区別されません。  
  
- ファイルのパスには、次の文字を含めることはできません: \< \> :/ &#124; "でしょうか。 * ;  
  
- ファイル パスでは、次の予約済みのデバイス名を使用できません。CON、PRN、AUX、クロック $、NUL、COM1、COM2、COM3、COM4、COM5、COM6、COM7、COM8、COM9、LPT1、LPT2、LPT3、LPT4、LPT5、LPT6、LPT7、LPT8、および LPT9 します。  
  
- ファイル パス、ファイル マスクまたはファイル名 (マクロの置換) なしの合計の長さは 256 文字を超えない必要があります。 (メッセージ ボックス データベースには、この制限が設定されます)。  
  
- ファイル アダプターがファイルのパスの Unicode 仕様をサポートしていません (たとえば、"\\\\?\\")。  
  
  受信フォルダーのプロパティのみに制限:  
  
- シンボリック リンクを使用して、Microsoft Windows NT の分散ファイル システムを使用しているフォルダーには、受信フォルダーのプロパティを設定しないでください。 Windows NT の分散ファイル システムを使用している場合は、フォルダーを使用する直接的なネットワーク パスでファイル アダプターの受信場所のみをできます。  
  
- ドキュメントが UNC パスに送信され、ドキュメント、ファイル アダプターの受信場所の受信は、複数のサーバーがある、ときに 1 つのサーバーが取得し、その UNC パスに送信されたドキュメントのほとんどを処理します。 ファイル名の変更の詳細については、のファイル受信アダプターのセクションを参照してください。[ファイル アダプター](../core/file-adapter.md)します。  
  
  送信フォルダーのプロパティのみの制限:  
  
- ファイル アダプターには、Microsoft Windows Vista などの非サーバー オペレーティング システムで実行されているときに同時には、すべてのバッチ内のメッセージを処理するための十分なオペレーティング システム リソースがありません。  
  
  ファイル アダプターは、前述の規則を使用して、デザイン時にファイル パスを検証します。 さらに、ファイル アダプターは、ファイル アダプターに動的ポート経由でメッセージを送信する場合、実行時にメッセージを検証します。  
  
