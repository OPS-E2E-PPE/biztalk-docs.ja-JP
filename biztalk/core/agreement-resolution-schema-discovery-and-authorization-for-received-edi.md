---
title: アグリーメントの解決、スキーマ探索、および受信した EDI メッセージの承認 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 503e307c-4cb0-49b5-8751-82dcea203151
caps.latest.revision: 45
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e82722ddb6adfcd3e0f8c5d24050bb58471da378
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65359645"
---
# <a name="agreement-resolution-schema-discovery-and-authorization-for-received-edi-messages"></a><span data-ttu-id="0fb72-102">アグリーメントの解決、スキーマ探索、および受信した EDI メッセージの承認</span><span class="sxs-lookup"><span data-stu-id="0fb72-102">Agreement Resolution, Schema Discovery, and Authorization for Received EDI Messages</span></span>
<span data-ttu-id="0fb72-103">ときに[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]EDI メッセージを受信、EDI 受信パイプラインが取引先アグリーメント解決、スキーマ探索、およびメッセージを処理する方法を決定する承認プロセスを実行します。</span><span class="sxs-lookup"><span data-stu-id="0fb72-103">When [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] receives an EDI message, the EDI receive pipeline performs trading partner agreement lookup, schema discovery, and authorization processes to determine how to process the message.</span></span>  
  
## <a name="agreement-resolution"></a><span data-ttu-id="0fb72-104">アグリーメントの解決</span><span class="sxs-lookup"><span data-stu-id="0fb72-104">Agreement Resolution</span></span>  
 <span data-ttu-id="0fb72-105">EDI 受信パイプラインは、一連のメッセージのヘッダー フィールドとプロパティでアグリーメント定義間の一致があるかどうかを判断する手順を実行することによって取引先パートナー アグリーメントの解決を実行します。</span><span class="sxs-lookup"><span data-stu-id="0fb72-105">The EDI receive pipeline performs a trading partner agreement resolution by performing a series of steps to determine whether there is a match between header fields in the message and properties in the agreement definition.</span></span> <span data-ttu-id="0fb72-106">1 回[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]アグリーメントが決定されます (下記参照) のインターチェンジに適用されるドキュメント スキーマを決定します。</span><span class="sxs-lookup"><span data-stu-id="0fb72-106">Once [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] has determined the agreement, it determines the document schema that applies to the interchange (see below).</span></span> <span data-ttu-id="0fb72-107">一致するアグリーメントと関連するスキーマに関連付けられたプロパティを検証および受信したメッセージの処理に使用します。</span><span class="sxs-lookup"><span data-stu-id="0fb72-107">It uses the properties associated with the matching agreement and the relevant schema to validate and process the received message.</span></span>  
  
 <span data-ttu-id="0fb72-108">アグリーメントの解決を実行する[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]次のように進みます。</span><span class="sxs-lookup"><span data-stu-id="0fb72-108">To perform agreement resolution, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] proceeds as follows:</span></span>  
  
1. <span data-ttu-id="0fb72-109">送信者の修飾子と識別子、および受信者の修飾子および識別子をインターチェンジ ヘッダーとアグリーメントのプロパティを照合してアグリーメントを解決します。</span><span class="sxs-lookup"><span data-stu-id="0fb72-109">Resolve the agreement by matching the sender qualifier and identifier, and the receiver qualifier and identifier, in the interchange header with those in the properties of an agreement.</span></span>  
  
2. <span data-ttu-id="0fb72-110">手順 1. が成功しなかった場合は、送信者の修飾子と、インターチェンジ ヘッダーとアグリーメントのプロパティでの識別子だけを照合することで、アグリーメントを解決します。</span><span class="sxs-lookup"><span data-stu-id="0fb72-110">If step 1 does not succeed, resolve the agreement by matching just the sender qualifier and identifier in the interchange header with those in the properties of an agreement.</span></span> <span data-ttu-id="0fb72-111">また、最初のステップが成功しなかったためがあると想定しても安全[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]メッセージを受信します。</span><span class="sxs-lookup"><span data-stu-id="0fb72-111">Also, because the first step did not succeed, it is safe to assume that [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will be receiving the message.</span></span> <span data-ttu-id="0fb72-112">そのため、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]受信者の修飾子と識別子を次の一致を試みます。</span><span class="sxs-lookup"><span data-stu-id="0fb72-112">Hence, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] tries to match the receiver qualifier and identifier with the following:</span></span>  
  
   -   <span data-ttu-id="0fb72-113">値"BT"および"HostX12Recvr"(X12 でエンコードされたメッセージ) と</span><span class="sxs-lookup"><span data-stu-id="0fb72-113">Values “BT” and “HostX12Recvr” (for X12-encoded messages) and</span></span>  
  
   -   <span data-ttu-id="0fb72-114">値"BT"および"HostEdifactRecvr"(EDIFACT でエンコードされたメッセージ)</span><span class="sxs-lookup"><span data-stu-id="0fb72-114">Values “BT” and “HostEdifactRecvr” (for EDIFACT-encoded messages)</span></span>  
  
   > [!IMPORTANT]
   > - <span data-ttu-id="0fb72-115">**BizTalk Server 2013 R2、2013、および 2010**:ISA5、ISA6、ISA7、ISA8、UNB2.1、UNB2.2、UNB3.1、および [unb3.2] フィールドでは、アグリーメントの設定で必須です。</span><span class="sxs-lookup"><span data-stu-id="0fb72-115">**BizTalk Server 2013 R2, 2013, and 2010**: The ISA5, ISA6, ISA7, ISA8, UNB2.1, UNB2.2, UNB3.1, and UNB3.2 fields are mandatory in the agreement settings.</span></span>  
   >   -   <span data-ttu-id="0fb72-116">**BizTalk Server 2009 および 2006 R2**:ISA7、ISA8、UNB3.1、および [unb3.2] フィールドは、パーティ設定で必須ではありません。</span><span class="sxs-lookup"><span data-stu-id="0fb72-116">**BizTalk Server 2009 and 2006 R2**: The ISA7, ISA8, UNB3.1, and UNB3.2 fields are not mandatory in the party settings.</span></span> <span data-ttu-id="0fb72-117">フィールドは空白の場合、EDI エンジンは ISA5、ISA6、UNB2.1、UNB2.2 の値に基づいて解決を提供します。</span><span class="sxs-lookup"><span data-stu-id="0fb72-117">If the fields are left blank, the EDI engine gives a resolution based on the values of ISA5, ISA6, UNB2.1, and UNB2.2.</span></span>  
   >   -   <span data-ttu-id="0fb72-118">BizTalk Server 2009 および 2006 R2 から BizTalk Server の新しいバージョンに解像度をサポートするために、ハード コードされた Id (HostX12Recvr および HostEdifactRecvr) と修飾子 (BT) が導入されています。</span><span class="sxs-lookup"><span data-stu-id="0fb72-118">To support the resolutions from BizTalk Server 2009 and 2006 R2 to newer versions of BizTalk Server, the hard coded IDs (HostX12Recvr and HostEdifactRecvr) and qualifiers (BT) are introduced.</span></span>  
   >   -   <span data-ttu-id="0fb72-119">EDIFACT メッセージが従う必要があります、 [UNECE ガイドライン](http://www.unece.org/tradewelcome/areas-of-work/un-centre-for-trade-facilitation-and-e-business-uncefact/outputs/standards/unedifact/tradeedifactrules.html)メッセージの構文と規則。</span><span class="sxs-lookup"><span data-stu-id="0fb72-119">Your EDIFACT messages should follow the [UNECE guidelines](http://www.unece.org/tradewelcome/areas-of-work/un-centre-for-trade-facilitation-and-e-business-uncefact/outputs/standards/unedifact/tradeedifactrules.html) for message syntax and rules.</span></span>  
  
3. <span data-ttu-id="0fb72-120">手順 2. が成功しなかった場合は、フォールバック アグリーメントのプロパティを使用します。</span><span class="sxs-lookup"><span data-stu-id="0fb72-120">If step 2 does not succeed, use the fallback agreement properties.</span></span>  
  
   <span data-ttu-id="0fb72-121">X12 の場合、最初の手順で[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]を照合に次の値が使用されます。</span><span class="sxs-lookup"><span data-stu-id="0fb72-121">In the first step, for X12, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will use the following values to make the match:</span></span>  
  
- <span data-ttu-id="0fb72-122">ISA05 (送信者の修飾子)</span><span class="sxs-lookup"><span data-stu-id="0fb72-122">ISA05 (sender qualifier)</span></span>  
  
- <span data-ttu-id="0fb72-123">ISA06 (送信者 id)</span><span class="sxs-lookup"><span data-stu-id="0fb72-123">ISA06 (sender identifier)</span></span>  
  
- <span data-ttu-id="0fb72-124">ISA07 (受信者の修飾子)</span><span class="sxs-lookup"><span data-stu-id="0fb72-124">ISA07 (receiver qualifier)</span></span>  
  
- <span data-ttu-id="0fb72-125">ISA08 (受信者 id)</span><span class="sxs-lookup"><span data-stu-id="0fb72-125">ISA08 (receiver identifier)</span></span>  
  
  <span data-ttu-id="0fb72-126">Edifact では、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]を照合に次の値が使用されます。</span><span class="sxs-lookup"><span data-stu-id="0fb72-126">For EDIFACT, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will use the following values to make the match:</span></span>  
  
- <span data-ttu-id="0fb72-127">UNB2.1 (送信者 id)</span><span class="sxs-lookup"><span data-stu-id="0fb72-127">UNB2.1 (sender identifier)</span></span>  
  
- <span data-ttu-id="0fb72-128">UNB2.2 (送信者の修飾子)</span><span class="sxs-lookup"><span data-stu-id="0fb72-128">UNB2.2 (sender qualifier)</span></span>  
  
- <span data-ttu-id="0fb72-129">UNB3.1 (受信者 id)</span><span class="sxs-lookup"><span data-stu-id="0fb72-129">UNB3.1 (receiver identifier)</span></span>  
  
- <span data-ttu-id="0fb72-130">UNB3.2 (受信者の修飾子)</span><span class="sxs-lookup"><span data-stu-id="0fb72-130">UNB3.2 (receiver qualifier)</span></span>  
  
  <span data-ttu-id="0fb72-131">照合に使用されるアグリーメントのプロパティが定義されている、**識別子**の特定方向アグリーメント タブのページ、**アグリーメントのプロパティ** ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="0fb72-131">The agreement properties used for the match are defined in the **Identifiers** page of the direction-specific agreement tabs of the **Agreement Properties** dialog box.</span></span>  
  
  <span data-ttu-id="0fb72-132">これら 4 つの受信側と送信側のプロパティは、取引先アグリーメントを一意に識別します。</span><span class="sxs-lookup"><span data-stu-id="0fb72-132">These four receive-side and send-side properties uniquely identify the trading partner agreement.</span></span> <span data-ttu-id="0fb72-133">4 つのプロパティを使用してより柔軟で受信側の処理。</span><span class="sxs-lookup"><span data-stu-id="0fb72-133">Using the four properties gives you more flexibility in receive-side processing.</span></span> <span data-ttu-id="0fb72-134">などのアグリーメントの解決には、このメソッドでは、送信ポートを複数作成することがなく複数のパーティに対する受信確認を送信する有効可能性があります。</span><span class="sxs-lookup"><span data-stu-id="0fb72-134">For example, this method of agreement resolution may enable you to send acknowledgments to multiple parties without creating multiple send ports.</span></span>  
  
  <span data-ttu-id="0fb72-135">場合[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]すべてを使用してアグリーメントを解決できない送信者と受信者の修飾子と識別子を 4 つにするは、送信者の修飾子と識別子だけを使用してアグリーメントを解決を試みます。</span><span class="sxs-lookup"><span data-stu-id="0fb72-135">If [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] cannot resolve the agreement using all four sender and receiver qualifiers and identifiers, it will attempt to resolve the agreement using just the sender qualifier and identifier.</span></span> <span data-ttu-id="0fb72-136">これらのフィールドは ISA05 と ISA06; x12 の場合edifact では、これらのフィールドは、UNB2.1 および UNB2.2 は。</span><span class="sxs-lookup"><span data-stu-id="0fb72-136">For X12, these fields are ISA05 and ISA06; for EDIFACT, these fields are UNB2.1 and UNB2.2.</span></span> <span data-ttu-id="0fb72-137">送信者と受信者のプロパティと一致すると同様[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]インターチェンジ ヘッダーの値と一致するアグリーメントのプロパティで定義されている、**識別子**の特定方向アグリーメントタブのページ**アグリーメントのプロパティ** ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="0fb72-137">As with a match of sender and receiver properties, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] matches the values in the interchange header with the agreement properties defined in the **Identifiers** page of the direction-specific agreement tabs of the **Agreement Properties** dialog box.</span></span> <span data-ttu-id="0fb72-138">送信者の修飾子と識別子を使用して、アグリーメントを解決するには、専用の場合、受信者の修飾子と識別子は未定義になって、双方向アグリーメント タブの**アグリーメントのプロパティ** ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="0fb72-138">If only the sender qualifier and identifier are used to resolve the agreement, the receiver qualifier and identifier should be undefined in the bi-directional agreement tab of the **Agreement Properties** dialog box.</span></span>  
  
  <span data-ttu-id="0fb72-139">アグリーメントが見つからない場合、し[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ポート設定は認証を必要としない限り、フォールバックのパートナー アグリーメントを取引先を使用します。</span><span class="sxs-lookup"><span data-stu-id="0fb72-139">If no agreement is found, then [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] uses the fallback trading partner agreement, unless the port setting requires authentication.</span></span> <span data-ttu-id="0fb72-140">ポートの設定には、認証が必要な場合 (いずれか**認証が失敗した場合は、メッセージを削除**または**認証が失敗した場合は、メッセージを保持する**で選択した、**全般**ページ、**受信ポートのプロパティ**)、アグリーメントが、受信ポートで受信したインターチェンジ必要です。</span><span class="sxs-lookup"><span data-stu-id="0fb72-140">If the port setting requires authentication (if either **Drop messages if authentication fails** or **Keep messages if authentication fails** is selected on the **General** page of the **Receive Port Properties**), an agreement is required for any interchange received by the receive port.</span></span> <span data-ttu-id="0fb72-141">この場合、インターチェンジ ヘッダーとアグリーメントのプロパティを照合してアグリーメントが解決しない場合、フォールバック アグリーメントのプロパティを使用してアグリーメントを特定はできません。</span><span class="sxs-lookup"><span data-stu-id="0fb72-141">In this case, if the agreement is not resolved by matching the interchange header with agreement properties, using the fallback agreement properties to determine the agreement is not allowed.</span></span> <span data-ttu-id="0fb72-142">インターチェンジはアグリーメントが見つからない場合、認証に失敗したかのように処理されは中断されます。</span><span class="sxs-lookup"><span data-stu-id="0fb72-142">The interchange will be treated as though authentication had failed if no agreement is found, and will be suspended.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0fb72-143">EDI パイプライン内のメッセージは次の手順にアグリーメントで解決、メッセージがアグリーメントを持つ有効な状態の手順に解決されるまでします。</span><span class="sxs-lookup"><span data-stu-id="0fb72-143">A message in the EDI pipeline goes to the succeeding step in Agreement Resolution till the message gets resolved with the step having Agreement in enable state.</span></span> <span data-ttu-id="0fb72-144">たとえば場合は、メッセージがアグリーメントの解決の最初の手順で解決を取得しますが、アグリーメントが無効の状態が次の解決手順をメッセージが通過します。</span><span class="sxs-lookup"><span data-stu-id="0fb72-144">For example, if the message gets resolved in the first step of Agreement Resolution but the Agreement is in a disabled state then the message goes to the succeeding step for resolution.</span></span>  
  
## <a name="schema-discovery"></a><span data-ttu-id="0fb72-145">スキーマの検出</span><span class="sxs-lookup"><span data-stu-id="0fb72-145">Schema Discovery</span></span>  
 <span data-ttu-id="0fb72-146">後[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]スキーマの検証およびメッセージを処理するために使用する必要がありますを決定する必要があります、メッセージに解決されるアグリーメントが決定されます。</span><span class="sxs-lookup"><span data-stu-id="0fb72-146">After [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] has determined the agreement that resolves to the message, it must determine the schema that it should use to validate and process the message.</span></span> <span data-ttu-id="0fb72-147">指定されたプロパティを使用して、**ローカル ホストの設定**ページ (送信側) の一方向のアグリーメント タブの**アグリーメントのプロパティ** ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="0fb72-147">It does so using the properties identified in the **Local Host Settings** page of the one-way (send side) agreement tab of the **Agreement Properties** dialog box.</span></span>  
  
 <span data-ttu-id="0fb72-148">スキーマを決定する[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]スキーマ名前空間を決定する必要がありますまずします。</span><span class="sxs-lookup"><span data-stu-id="0fb72-148">To determine the schema, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] must first determine the schema namespace.</span></span> <span data-ttu-id="0fb72-149">付属の標準スキーマ用、EDI 逆アセンブラーに既定の名前空間を使用するか[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]、またはカスタム スキーマを使用する名前空間を決定します。</span><span class="sxs-lookup"><span data-stu-id="0fb72-149">The EDI Disassembler will either use a default namespace for the standard schemas shipped with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], or it will determine the namespace to be used for a custom schema.</span></span>  
  
 <span data-ttu-id="0fb72-150">**ローカル ホスト設定**の一方向アグリーメント タブのページ、**アグリーメントのプロパティ** ダイアログ ボックスでは、カスタムの名前空間を決定する値のグリッドを設定することができます。</span><span class="sxs-lookup"><span data-stu-id="0fb72-150">The **Local Host Settings** page of the one-way agreement tab of the **Agreement Properties** dialog box enables you to set up a grid of values to determine a custom namespace.</span></span> <span data-ttu-id="0fb72-151">EDI 逆アセンブラーで既定の名前空間を使用してそのグリッドで一致するものがない場合、**ターゲットの名前空間**フィールドは、既定の行をマークします。</span><span class="sxs-lookup"><span data-stu-id="0fb72-151">If no match is found in that grid, the EDI Disassembler uses the default namespace in the **Target namespace** field marked for the default row.</span></span>  
  
### <a name="x12-schema-discovery"></a><span data-ttu-id="0fb72-152">X12 スキーマ探索</span><span class="sxs-lookup"><span data-stu-id="0fb72-152">X12 Schema Discovery</span></span>  
 <span data-ttu-id="0fb72-153">X12 エンコード メッセージのため[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]アプリケーション送信者の識別子 (GS02) と、トランザクションを使用して、カスタムの名前空間受信したインターチェンジのヘッダーからの ID (ST01) の設定を判断します。</span><span class="sxs-lookup"><span data-stu-id="0fb72-153">For X12-encoded messages, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] determines a custom namespace using the application sender identifier (GS02) and the transaction set ID (ST01) from the header of the incoming interchange.</span></span> <span data-ttu-id="0fb72-154">内の GS02] と [ST01 プロパティのこれらの値と値の間の一致を確認しようと、**ターゲットの名前空間をカスタマイズ**でグリッド、**ローカル ホストの設定**ページ ([**トランザクションセットの設定**) の双方向アグリーメント タブの**アグリーメントのプロパティ**] ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="0fb72-154">It attempts to find a match between these values and the values for the GS02 and ST01 properties in the **Customize target namespace** grid in the **Local Host Settings** page (under **Transaction Set Settings**) of the bi-directional agreement tab of the **Agreement Properties** dialog box.</span></span> <span data-ttu-id="0fb72-155">一致が見つかると、スキーマを検証し、メッセージの処理を決定するのにグリッドの同じ行で指定されたターゲットの名前空間が使用されます。</span><span class="sxs-lookup"><span data-stu-id="0fb72-155">If it finds a match, it will use the target namespace identified in the same row of the grid to determine which schema to us to validate and process the message.</span></span> <span data-ttu-id="0fb72-156">ターゲットの名前空間が決定されない場合は、既定のターゲット名前空間が使用されます。</span><span class="sxs-lookup"><span data-stu-id="0fb72-156">If the target namespace is not determined, then the default target namespace will be used.</span></span> <span data-ttu-id="0fb72-157">名前空間が指定されていない場合、**ターゲットの名前空間**フィールドが設定されていますが、既定の行[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]は、既定では、X12でエンコードされたメッセージのフォールバックアグリーメントプロパティで識別されるターゲットの名前空間を使用`http://schemas.microsoft.com/BizTalk/Edi/X12/2006`.</span><span class="sxs-lookup"><span data-stu-id="0fb72-157">If no namespace is identified in the **Target namespace** field marked for the default row, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will use the target namespace identified in the fallback agreement properties for X12-encoded messages, which by default is `http://schemas.microsoft.com/BizTalk/Edi/X12/2006`.</span></span>  
  
 <span data-ttu-id="0fb72-158">X12 インターチェンジの場合、ターゲットの名前空間が検出されると、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]次の情報を使用してスキーマを決定します。</span><span class="sxs-lookup"><span data-stu-id="0fb72-158">For X12 interchanges, after the target namespace is discovered, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] determines the schema using the following information:</span></span>  
  
- <span data-ttu-id="0fb72-159">検出されたターゲットの名前空間</span><span class="sxs-lookup"><span data-stu-id="0fb72-159">The target namespace just discovered</span></span>  
  
- <span data-ttu-id="0fb72-160">ST03 の最初の 5 文字のバージョン/リリース (場合 GS07 Accredited Standards Committee X12 X を = =)。</span><span class="sxs-lookup"><span data-stu-id="0fb72-160">The version/release in the first five characters of ST03 (if GS07 == X - Accredited Standards Committee X12).</span></span> <span data-ttu-id="0fb72-161">バージョンの GS08 または ISA12 の最初の 5 文字が続くかどうかは、ST03 が存在する/無効なまたはスキーマの解決が行われません (場合 GS07! = X)。</span><span class="sxs-lookup"><span data-stu-id="0fb72-161">If ST03 is not present/invalid or does not result in the schema resolution, then the version is determined by the first five characters of GS08 or of ISA12 (if GS07 != X).</span></span>  
  
- <span data-ttu-id="0fb72-162">ST01 の DocType</span><span class="sxs-lookup"><span data-stu-id="0fb72-162">The DocType in ST01.</span></span>  
  
  <span data-ttu-id="0fb72-163">EDI 逆アセンブラーは、エンコードの種類、バージョン/リリース、および"X12_00401_864"など、スキーマ名を確認する DocType を連結します。</span><span class="sxs-lookup"><span data-stu-id="0fb72-163">The EDI Disassembler concatenates the encoding type, version/release, and DocType to determine the schema name, for example, "X12_00401_864".</span></span> <span data-ttu-id="0fb72-164">次に連結しますターゲットの名前空間とスキーマ名では、たとえば、`http://schemas.microsoft.com/BizTalk/Edi/X12/2006/X12#X12_00401_864`します。</span><span class="sxs-lookup"><span data-stu-id="0fb72-164">It then concatenates the target namespace with the schema name, for example, `http://schemas.microsoft.com/BizTalk/Edi/X12/2006/X12#X12_00401_864`.</span></span>  
  
  <span data-ttu-id="0fb72-165">受信した HIPAA 837 インターチェンジ、 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 3 つの HIPAA 837 スキーマをサポートしています。</span><span class="sxs-lookup"><span data-stu-id="0fb72-165">For an incoming HIPAA 837 interchange, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] supports three HIPAA 837 schemas:</span></span>  
  
|<span data-ttu-id="0fb72-166">837 スキーマ</span><span class="sxs-lookup"><span data-stu-id="0fb72-166">837 Schema</span></span>|<span data-ttu-id="0fb72-167">バージョン 4010 GS08 の値</span><span class="sxs-lookup"><span data-stu-id="0fb72-167">GS08 Value in version 4010</span></span>|<span data-ttu-id="0fb72-168">バージョン 5010 の GS08/ST03 の値</span><span class="sxs-lookup"><span data-stu-id="0fb72-168">GS08/ST03 Value in version 5010</span></span>|  
|----------------|--------------------------------|--------------------------------------|  
|<span data-ttu-id="0fb72-169">Claim-dental_837d</span><span class="sxs-lookup"><span data-stu-id="0fb72-169">Claim-Dental_837D</span></span>|<span data-ttu-id="0fb72-170">004010X097A1</span><span class="sxs-lookup"><span data-stu-id="0fb72-170">004010X097A1</span></span>|<span data-ttu-id="0fb72-171">005010X224A1</span><span class="sxs-lookup"><span data-stu-id="0fb72-171">005010X224A1</span></span>|  
|<span data-ttu-id="0fb72-172">Claim-institutional_837i</span><span class="sxs-lookup"><span data-stu-id="0fb72-172">Claim-Institutional_837I</span></span>|<span data-ttu-id="0fb72-173">004010X096A1</span><span class="sxs-lookup"><span data-stu-id="0fb72-173">004010X096A1</span></span>|<span data-ttu-id="0fb72-174">005010X223A1</span><span class="sxs-lookup"><span data-stu-id="0fb72-174">005010X223A1</span></span>|  
|<span data-ttu-id="0fb72-175">Claim-professional_837p</span><span class="sxs-lookup"><span data-stu-id="0fb72-175">Claim-Professional_837P</span></span>|<span data-ttu-id="0fb72-176">004010X098A1</span><span class="sxs-lookup"><span data-stu-id="0fb72-176">004010X098A1</span></span>|<span data-ttu-id="0fb72-177">005010X222</span><span class="sxs-lookup"><span data-stu-id="0fb72-177">005010X222</span></span>|  
  
> [!NOTE]
>  <span data-ttu-id="0fb72-178">トランザクション セット 278 (Health Care Services Review) に対して、HIPAA バージョンでは、要求と応答の両方のペアは、GS08 および ST01 の同じ値を共有します。</span><span class="sxs-lookup"><span data-stu-id="0fb72-178">In HIPAA versions, for the transaction set 278 (Health Care Services Review), both the request and response pairs share the same value for GS08 and ST01.</span></span> <span data-ttu-id="0fb72-179">BHT02 のフィールドを 278 とを区別することがあります内のトリガー値に応じて要求/応答バージョン 5010 で。</span><span class="sxs-lookup"><span data-stu-id="0fb72-179">Depending on the trigger values in BHT02 field you may differentiate between a 278 Request/ Response in version 5010:</span></span>  
> 
> 1. <span data-ttu-id="0fb72-180">Health Care Services Review Request 01、13、36 bht02 の値のいずれかを示します</span><span class="sxs-lookup"><span data-stu-id="0fb72-180">Any of the values 01, 13 and 36 in BHT02 indicates a Health Care Services Review Request</span></span>  
>    2.  <span data-ttu-id="0fb72-181">bht02 11 は、Health Care Services Review Response をことを示します</span><span class="sxs-lookup"><span data-stu-id="0fb72-181">11 in BHT02 indicates Health Care Services Review Response</span></span>  
  
### <a name="edifact-schema-discovery"></a><span data-ttu-id="0fb72-182">EDIFACT スキーマ探索</span><span class="sxs-lookup"><span data-stu-id="0fb72-182">EDIFACT Schema Discovery</span></span>  
 <span data-ttu-id="0fb72-183">EDIFACT でエンコードされたメッセージでは、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]メッセージの種類 (UNH2.1)、メッセージのバージョン番号 (UNH2.2)、割り当てコード (UNH2.5)、メッセージ リリース番号 (UNH2.3) を使用してカスタムの名前空間を決定します機能グループ ID (UNG2.1)、およびアプリケーション送信コード。受信したインターチェンジのヘッダーからの修飾子 (UNG2.2)。</span><span class="sxs-lookup"><span data-stu-id="0fb72-183">For EDIFACT-encoded messages, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] determines a custom namespace using the message type (UNH2.1), message version number (UNH2.2), message release number (UNH2.3), assigned code (UNH2.5), functional group ID (UNG2.1), and application send code qualifier (UNG2.2) from the header of the incoming interchange.</span></span> <span data-ttu-id="0fb72-184">UNH2.1、UNH2.2、UNH2.3、UNH2.5、UNG2.1、および UNG2.2 のプロパティの値とこれらの値の検索を試みます、**ターゲットの名前空間のカスタマイズ**グリッド ([**トランザクション セットの設定**)双方向アグリーメント タブの**アグリーメントのプロパティ**] ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="0fb72-184">It then attempts to find a match between these values and the values for the UNH2.1, UNH2.2, UNH2.3, UNH2.5, UNG2.1, and UNG2.2 properties in the **Customize target namespace** grid (under **Transaction Set Settings**) of the bi-directional agreement tab of the **Agreement Properties** dialog box.</span></span> <span data-ttu-id="0fb72-185">一致が見つかると、検証およびメッセージの処理に使用するのにスキーマを決定するのにグリッドの同じ行で指定されたターゲットの名前空間が使用されます。</span><span class="sxs-lookup"><span data-stu-id="0fb72-185">If it finds a match, it will use the target namespace identified in the same row of the grid to determine which schema to use to validate and process the message.</span></span> <span data-ttu-id="0fb72-186">ターゲットの名前空間が決定されない場合は、既定のターゲット名前空間が使用されます。</span><span class="sxs-lookup"><span data-stu-id="0fb72-186">If the target namespace is not determined, then the default target namespace will be used.</span></span> <span data-ttu-id="0fb72-187">名前空間が指定されていない場合、**ターゲットの名前空間**フィールドが設定されていますが、既定の行[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ターゲットの名前空間、EDIFACT でエンコードされたメッセージをフォールバック アグリーメント プロパティで指定された既定を使用`http://schemas.microsoft.com/BizTalk/Edi/EDIFACT/2006`.</span><span class="sxs-lookup"><span data-stu-id="0fb72-187">If no namespace is identified in the **Target namespace** field marked for the default row, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will use the target namespace identified in the fallback agreement properties for EDIFACT-encoded messages, which by default is `http://schemas.microsoft.com/BizTalk/Edi/EDIFACT/2006`.</span></span>  
  
 <span data-ttu-id="0fb72-188">EDIFACT インターチェンジの場合、ターゲットの名前空間が検出されると、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]次の情報を使用してスキーマを決定します。</span><span class="sxs-lookup"><span data-stu-id="0fb72-188">For EDIFACT interchanges, once the target namespace is discovered, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] determines the schema using the following information:</span></span>  
  
- <span data-ttu-id="0fb72-189">検出されたターゲット名前空間。</span><span class="sxs-lookup"><span data-stu-id="0fb72-189">The target namespace just discovered.</span></span>  
  
- <span data-ttu-id="0fb72-190">UNH2.2 のメッセージのバージョン番号。</span><span class="sxs-lookup"><span data-stu-id="0fb72-190">The message version number in UNH2.2.</span></span>  
  
- <span data-ttu-id="0fb72-191">UNH2.3 のメッセージ リリース番号。</span><span class="sxs-lookup"><span data-stu-id="0fb72-191">The message release number in UNH2.3.</span></span>  
  
- <span data-ttu-id="0fb72-192">メッセージの種類 (unh2.1)。</span><span class="sxs-lookup"><span data-stu-id="0fb72-192">The message type in UNH2.1.</span></span>  
  
- <span data-ttu-id="0fb72-193">割り当てコード (unh2.5)。</span><span class="sxs-lookup"><span data-stu-id="0fb72-193">The assigned code in UNH2.5.</span></span>  
  
  <span data-ttu-id="0fb72-194">EDI 逆アセンブラーは、エンコードの種類、バージョン、リリース、およびスキーマ名を確認するメッセージ型"EFACT_D94A_CONTEN"を連結します。</span><span class="sxs-lookup"><span data-stu-id="0fb72-194">The EDI Disassembler concatenates the encoding type, the version, the release, and the message type to determine the schema name, for example, " EFACT_D94A_CONTEN".</span></span> <span data-ttu-id="0fb72-195">次に連結しますターゲットの名前空間とスキーマ名では、たとえば、`http://schemas.microsoft.com/BizTalk/Edi/Edifact/2006/EFACT#EFACT_D94A_CONTEN`します。</span><span class="sxs-lookup"><span data-stu-id="0fb72-195">It then concatenates the target namespace with the schema name, for example, `http://schemas.microsoft.com/BizTalk/Edi/Edifact/2006/EFACT#EFACT_D94A_CONTEN`.</span></span>  
  
  <span data-ttu-id="0fb72-196">UNH2.5 がメッセージに存在する場合は、EDI 逆アセンブラーは最初にスキーマ名、たとえば"EFACT_D94A_CONTEN_TEST"の一部として UNH2.5 の値を使用して、一致するスキーマを検索しようとします。</span><span class="sxs-lookup"><span data-stu-id="0fb72-196">If UNH2.5 is present in the message, the EDI Disassembler will first attempt to find a matching schema by using the value of UNH2.5 as part of the schema name, for example “EFACT_D94A_CONTEN_TEST”.</span></span> <span data-ttu-id="0fb72-197">一致するスキーマが見つからない場合、EDI 逆アセンブラーがフォールバック UNH2.5 の値のないスキーマを検索します。</span><span class="sxs-lookup"><span data-stu-id="0fb72-197">If no matching schema is found, the EDI Disassembler will fall back to finding the schema without the UNH2.5 value.</span></span>  
  
## <a name="authorization"></a><span data-ttu-id="0fb72-198">Authorization</span><span class="sxs-lookup"><span data-stu-id="0fb72-198">Authorization</span></span>  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="0fb72-199">メッセージのフィールドとのアグリーメントに対して定義された承認およびセキュリティ フィールドの値を確認します。</span><span class="sxs-lookup"><span data-stu-id="0fb72-199">checks the values of the authorization and security fields defined for the agreement with the fields in the message.</span></span> <span data-ttu-id="0fb72-200">一致しない場合がある場合[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]インターチェンジは中断されます。</span><span class="sxs-lookup"><span data-stu-id="0fb72-200">If there is a mismatch, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will suspend the interchange.</span></span> <span data-ttu-id="0fb72-201">EDIFACT でエンコードされたメッセージでは、これらのフィールドは受信者の参照パスワード (UNB6.1 および UNB6.2 です)。</span><span class="sxs-lookup"><span data-stu-id="0fb72-201">For EDIFACT-encoded messages, these fields are the recipient reference password (UNB6.1 and UNB6.2).</span></span> <span data-ttu-id="0fb72-202">X12 でエンコードされたメッセージでは、これらのフィールドは、認証修飾子と情報 (ISA1 ~ 2) とセキュリティ修飾子 (ISA3 ~ 4) の情報。</span><span class="sxs-lookup"><span data-stu-id="0fb72-202">For X12-encoded messages, these fields are the Authorization qualifier and information (ISA1-2) and Security qualifier and information (ISA3-4).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0fb72-203">参照</span><span class="sxs-lookup"><span data-stu-id="0fb72-203">See Also</span></span>  
 [<span data-ttu-id="0fb72-204">BizTalk Server が EDI メッセージを受信する方法</span><span class="sxs-lookup"><span data-stu-id="0fb72-204">How BizTalk Server Receives EDI Messages</span></span>](../core/how-biztalk-server-receives-edi-messages.md)