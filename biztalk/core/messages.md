---
title: メッセージ |Microsoft ドキュメント
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- messages, headers
- messages, acknowledgements
- messages, persisting
- messages
- examples, message headers
- properties
- message headers
- EMS messages
ms.assetid: 65bb3431-7186-4d4c-b004-932cdf070e73
caps.latest.revision: 11
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 8f7313e93029ca75d345aa4e9603699c50399230
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/20/2017
ms.locfileid: "22266690"
---
# <a name="messages"></a><span data-ttu-id="899e8-102">メッセージ</span><span class="sxs-lookup"><span data-stu-id="899e8-102">Messages</span></span>
<span data-ttu-id="899e8-103">JMS メッセージのように、Enterprise Message Service (EMS) メッセージには、次の 3 つの別々 の部分が含まれています: ヘッダー、プロパティ、および本文です。</span><span class="sxs-lookup"><span data-stu-id="899e8-103">An Enterprise Message Service (EMS) message, like a JMS message, contains three separate parts: header, properties, and body.</span></span> <span data-ttu-id="899e8-104">ヘッダーは、EMS メッセージで唯一の必須部分です。</span><span class="sxs-lookup"><span data-stu-id="899e8-104">The header is the only required part of an EMS message.</span></span> <span data-ttu-id="899e8-105">ここでは、Microsoft BizTalk Adapter for TIBCO Enterprise Message Service でのメッセージの処理方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="899e8-105">This topic describes how messages are treated in Microsoft BizTalk Adapter for TIBCO Enterprise Message Service.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="899e8-106">ヘッダー フィールドを取得または設定する (メッセージの優先度または関連付け ID は設定など) をオーケストレーションからのメッセージ プロパティへの参照を追加する必要があります、 **Microsoft.BizTalk.Adapters.TIBCOEMSProperties.dll**で、プロジェクトがソリューション エクスプ ローラーを使用します。</span><span class="sxs-lookup"><span data-stu-id="899e8-106">To set or retrieve a header field (for example, set the Message Priority or Correlation ID) or a message property from the orchestration, you must add a reference to the **Microsoft.BizTalk.Adapters.TIBCOEMSProperties.dll** in your project using Solution Explorer.</span></span>  
  
## <a name="message-header"></a><span data-ttu-id="899e8-107">メッセージ ヘッダー</span><span class="sxs-lookup"><span data-stu-id="899e8-107">Message Header</span></span>  
 <span data-ttu-id="899e8-108">メッセージ ヘッダーには、値が格納された、一連の定義済みフィールドがあります。</span><span class="sxs-lookup"><span data-stu-id="899e8-108">The message header contains a series of predefined fields that contain values.</span></span> <span data-ttu-id="899e8-109">BizTalk Adapter for TIBCO Enterprise Message Service は、ヘッダーに設定できる値と設定できない値を認識しています。</span><span class="sxs-lookup"><span data-stu-id="899e8-109">BizTalk Adapter for TIBCO Enterprise Message Service knows what it can and cannot set in the header.</span></span> <span data-ttu-id="899e8-110">読み取り専用の値を設定しようとすると、その値はリダイレクトされるか、Properties{} セクションに設定されます。</span><span class="sxs-lookup"><span data-stu-id="899e8-110">If you try to set a read-only value, the adapter redirects or sets your value in the Properties{} section.</span></span>  
  
### <a name="header-example"></a><span data-ttu-id="899e8-111">ヘッダーの例</span><span class="sxs-lookup"><span data-stu-id="899e8-111">Header Example</span></span>  
 <span data-ttu-id="899e8-112">次の例でわかるように**プロパティ = {先 = {String:queue [Q2]}}** です。</span><span class="sxs-lookup"><span data-stu-id="899e8-112">In the following example, notice that **Properties= { Destination={String:Queue[Q2]} }**.</span></span> <span data-ttu-id="899e8-113">`Properties`文字列を含むプロパティであり、文字列の内容は**Q2**です。</span><span class="sxs-lookup"><span data-stu-id="899e8-113">`Properties` is a property that contains a string, and the contents of the string is **Q2**.</span></span> <span data-ttu-id="899e8-114">これは Destination セクションとは無関係です。Destination セクションには、ユーザーが設定した値が格納されています。この値は他のセクションには該当しないため、このセクションに保持されています。</span><span class="sxs-lookup"><span data-stu-id="899e8-114">This has nothing to do with the Destination section; it contains strings of values that you set that could not go anywhere else, so the adapter has held them here in this section.</span></span>  
  
 <span data-ttu-id="899e8-115">オーケストレーションで `ReplyTo` プロパティを設定すると、応答の送信先となる最終的なコンシューマを指定できます。</span><span class="sxs-lookup"><span data-stu-id="899e8-115">The `ReplyTo` property can be set in the orchestration to tell an eventual consumer where to send a response.</span></span> <span data-ttu-id="899e8-116">TIBCOEMS からメッセージを受信すると、`Destination` プロパティが設定されます。</span><span class="sxs-lookup"><span data-stu-id="899e8-116">EMS sets the `Destination` property when the message is received from TIBCOEMS.</span></span> <span data-ttu-id="899e8-117">この 2 つ目のプロパティは、TIBCOEMS からメッセージを受信するオーケストレーションでは読み取り専用であり、編集できません。</span><span class="sxs-lookup"><span data-stu-id="899e8-117">This second property is read-only in the orchestration receiving the message from TIBCOEMS and cannot be edited in the orchestration.</span></span>  
  
 <span data-ttu-id="899e8-118">たとえば、オーケストレーションでは、メッセージをディスパッチし、オーケストレーション内で送信先を動的に設定することはできません。</span><span class="sxs-lookup"><span data-stu-id="899e8-118">For example, an orchestration cannot dispatch messages and set the destination dynamically inside an orchestration.</span></span> <span data-ttu-id="899e8-119">Destination の値は、メッセージの送信先のポートによって設定されます。</span><span class="sxs-lookup"><span data-stu-id="899e8-119">The value of Destination is set by the port to which the message is being transmitted.</span></span>  
  
 <span data-ttu-id="899e8-120">別のキューにメッセージをディスパッチする場合は、各キューの送信ポートを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="899e8-120">If you want to dispatch messages to different queues, you must create send ports for each queue.</span></span> <span data-ttu-id="899e8-121">これにより、オーケストレーションがメッセージの割り当て先のポートを決定できるようになります。</span><span class="sxs-lookup"><span data-stu-id="899e8-121">The orchestration can then decide which port to assign the message.</span></span>  
  
 <span data-ttu-id="899e8-122">次のメッセージの例で、Destination= `{Queue[Q1]}` は読み取り専用です。</span><span class="sxs-lookup"><span data-stu-id="899e8-122">In the following message example, the Destination= `{Queue[Q1]}` is read-only.</span></span> <span data-ttu-id="899e8-123">サーバーがメッセージを受信すると、TIBCOEMS によってこの値が設定されます。</span><span class="sxs-lookup"><span data-stu-id="899e8-123">This value is set by TIBCOEMS when the server receives the message.</span></span> <span data-ttu-id="899e8-124">Destination の値 Q1 は、トランスポートのプロパティから取得したものです。</span><span class="sxs-lookup"><span data-stu-id="899e8-124">The value for Destination, Q1, comes from the Transport Properties.</span></span>  
  
#### <a name="example"></a><span data-ttu-id="899e8-125">例</span><span class="sxs-lookup"><span data-stu-id="899e8-125">Example</span></span>  
  
```  
TextMessage={   
    Header={ MessageID={ID:EMS-SERVER.824437A58B11C75F4:1}   
    Destination={Queue[Q1]}   
  
        ' This is READONLY. It gets set by the server when the  
        ' message is received by the server (EMS). It is set in the  
        ' Transport Properties when you specify that you want to  
        ' listen for messages on Q1.  
    ReplyTo={}   
    DeliveryMode={Persistent}   
    Redelivered={False}   
    CorrelationID={}   
    MsgType={}   
    Timestamp={12/1/2005 11:59:01 PM}   
    Expiration={0}   
    Priority={1} }   
    Properties={ Destination={String:Queue[Q2]} }   
  
        ' This is a property that contains a string, and the   
        ' contents of the string is Q2. This has nothing to do with  
        ' the Destination section above – it is just another   
        ' property that is set.   
        ' This is in the schema. The adapter knows what it can and   
        ' cannot set in an EMS header. The values that the adapter   
        ' cannot set are put in the Properties section.   
    text={<?xml version="1.0" encoding="utf-16"?>  
    <ns0:Employees xmlns:ns0="http://BizTalk_Server_Project1.Employee">  
        <Emp Id="Id_0">  
            Name>Name_0</Name>  
        </Emp>  
    </ns0:Employees>  
    }  
```  
  
 <span data-ttu-id="899e8-126">ヘッダーには、値が格納された、一連の定義済みフィールドがあり、これらの値が BizTalk Server のメッセージ コンテキストに昇格されて、オーケストレーションで使用できるようになります。</span><span class="sxs-lookup"><span data-stu-id="899e8-126">The header contains a series of predefined fields that contain values, which the adapter promotes to the BizTalk Server message context for use in the orchestration.</span></span> <span data-ttu-id="899e8-127">昇格されたプロパティは、JMS 仕様および TIBCO Enterprise Message Service 拡張で定義されている標準のヘッダー プロパティと定義上は同一です。</span><span class="sxs-lookup"><span data-stu-id="899e8-127">The promoted properties are identical in definition to the standard header properties as defined by the JMS specification and the TIBCO Enterprise Message Service extensions.</span></span> <span data-ttu-id="899e8-128">2 つを除くすべてのプロパティがオーケストレーション EMS から受信したとおりに使用可能な:`Destination`と`ReplyTo`を 1 つのプロパティとしてオーケストレーションで使用する適切にマップできない宛先を記述します。</span><span class="sxs-lookup"><span data-stu-id="899e8-128">All properties except for two are available to the orchestration as received from EMS: `Destination` and `ReplyTo` describe a destination that cannot be correctly mapped for use in an orchestration as a single property.</span></span>  
  
 <span data-ttu-id="899e8-129">BizTalk Adapter for TIBCO EMS では、TIBCOEMS プロパティを文字列型にマップし、送信先の文字列表記を使用します。</span><span class="sxs-lookup"><span data-stu-id="899e8-129">BizTalk Adapter for TIBCO EMS maps the TIBCOEMS property to a string type and uses the Destination string representation.</span></span> <span data-ttu-id="899e8-130">たとえば、`StaticQueue[queuename]` や `StatisTopic[topicname]` のようになります。</span><span class="sxs-lookup"><span data-stu-id="899e8-130">This looks like `StaticQueue[queuename]` or `StatisTopic[topicname]`.</span></span> <span data-ttu-id="899e8-131">オーケストレーションで `ReplyTo` の値を設定できます。その場合、値がアダプタによって、ヘッダー内で有効な送信先オブジェクトに置き換えられます。</span><span class="sxs-lookup"><span data-stu-id="899e8-131">The orchestration can set the value for `ReplyTo`, and the adapter replaces it with a valid destination object in the header.</span></span>  
  
 <span data-ttu-id="899e8-132">アダプタには、オーケストレーションで使用できるすべての TIBCO EMS ヘッダー プロパティを記述したスキーマおよび参照アセンブリが用意されています。</span><span class="sxs-lookup"><span data-stu-id="899e8-132">The adapter provides a schema and reference assembly describing all TIBCO EMS header properties that can be used by orchestrations.</span></span> <span data-ttu-id="899e8-133">これらのプロパティは、受信メッセージのフィルタ処理と送信メッセージへの追加に使用できます。</span><span class="sxs-lookup"><span data-stu-id="899e8-133">These properties can be used to either filter incoming messages or to add to the outgoing message.</span></span> <span data-ttu-id="899e8-134">オーケストレーションのフィルタを制御する規則は、EMS サーバーのメッセージ セレクタの規則とは異なります。</span><span class="sxs-lookup"><span data-stu-id="899e8-134">The rules governing the orchestration filter differs from those for the message selector for the EMS server.</span></span> <span data-ttu-id="899e8-135">たとえば、オーケストレーションでは、`TibcoEMS.ReplyTo` プロパティまたは `TibcoEMS.Destination` プロパティに基づいてフィルタ処理できますが、JMS 仕様では、これらのプロパティに基づくメッセージ セレクタはサポートされません。</span><span class="sxs-lookup"><span data-stu-id="899e8-135">For example, orchestrations can filter on the `TibcoEMS.ReplyTo` or the `TibcoEMS.Destination` property, but there is no support in the JMS specification to allow message selector on this same property.</span></span>  
  
 <span data-ttu-id="899e8-136">オーケストレーションでこれらのプロパティが定義されている場合は、JMS メッセージのヘッダー プロパティに組み込まれます。</span><span class="sxs-lookup"><span data-stu-id="899e8-136">When these properties are defined by the orchestration, they are included in the header properties of the JMS message.</span></span> <span data-ttu-id="899e8-137">また、EMS メッセージを受信したときは、これらのヘッダー プロパティが BizTalk Server のメッセージ コンテキストにコピーされます。</span><span class="sxs-lookup"><span data-stu-id="899e8-137">Alternatively, when the EMS message is received, these header properties are copied to the BizTalk Server message context.</span></span>  
  
 <span data-ttu-id="899e8-138">プロパティがポートの構成に一致した場合は、メッセージのプロパティの値が、ポートの構成よりも優先されます。</span><span class="sxs-lookup"><span data-stu-id="899e8-138">When a property matches the port configuration, the value of the property on the message takes precedence on the port’s configuration.</span></span> <span data-ttu-id="899e8-139">たとえば、ポートで優先度が 4 に設定されていても、オーケストレーションのロジックでメッセージの優先度を 9 に設定すると、TIBCO EMS では、優先度 9 としてメッセージが受信されます。</span><span class="sxs-lookup"><span data-stu-id="899e8-139">For example, if the priority is set to 4 in the port, but you set the priority of the message to 9 in the logic of the orchestration, the message is received by TIBCO EMS as having a priority of 9.</span></span>  
  
### <a name="property-descriptions"></a><span data-ttu-id="899e8-140">プロパティの説明</span><span class="sxs-lookup"><span data-stu-id="899e8-140">Property Descriptions</span></span>  
 <span data-ttu-id="899e8-141">BizTalk Adapter for TIBCO Enterprise Message Service での各プロパティの用途を次の表に示します。</span><span class="sxs-lookup"><span data-stu-id="899e8-141">The following table describes how each property is used by BizTalk Adapter for TIBCO Enterprise Message Service.</span></span>  
  
|<span data-ttu-id="899e8-142">名前</span><span class="sxs-lookup"><span data-stu-id="899e8-142">Name</span></span>|<span data-ttu-id="899e8-143">型</span><span class="sxs-lookup"><span data-stu-id="899e8-143">Type</span></span>|<span data-ttu-id="899e8-144">Description</span><span class="sxs-lookup"><span data-stu-id="899e8-144">Description</span></span>|  
|----------|----------|-----------------|  
|<span data-ttu-id="899e8-145">TibcoEMS.MessageID</span><span class="sxs-lookup"><span data-stu-id="899e8-145">TibcoEMS.MessageID</span></span>|<span data-ttu-id="899e8-146">string</span><span class="sxs-lookup"><span data-stu-id="899e8-146">string</span></span>|<span data-ttu-id="899e8-147">送信呼び出しが、各メッセージに一意の ID を割り当て、ヘッダーに記録します。</span><span class="sxs-lookup"><span data-stu-id="899e8-147">Sending calls assign a unique ID to each message and record it in the header.</span></span><br /><br /> <span data-ttu-id="899e8-148">すべてのメッセージ ID の値は、この目的のために予約されている 3 文字のプレフィックス ID で始まります。</span><span class="sxs-lookup"><span data-stu-id="899e8-148">All message ID values start with the three-character prefix ID (which is reserved for this purpose).</span></span><br /><br /> <span data-ttu-id="899e8-149">読み取り専用です。</span><span class="sxs-lookup"><span data-stu-id="899e8-149">Read-only.</span></span> <span data-ttu-id="899e8-150">値を変更しても、メッセージには影響しません。</span><span class="sxs-lookup"><span data-stu-id="899e8-150">Changing the value does not affect the message.</span></span>|  
|<span data-ttu-id="899e8-151">TibcoEMS.Timestamp</span><span class="sxs-lookup"><span data-stu-id="899e8-151">TibcoEMS.Timestamp</span></span>|<span data-ttu-id="899e8-152">long</span><span class="sxs-lookup"><span data-stu-id="899e8-152">long</span></span>|<span data-ttu-id="899e8-153">送信呼び出しが、ヘッダーに UTC タイムスタンプを記録します。</span><span class="sxs-lookup"><span data-stu-id="899e8-153">Sending calls record a UTC timestamp in the header.</span></span> <span data-ttu-id="899e8-154">これは、サーバーがメッセージを受け付けた時刻を示します。</span><span class="sxs-lookup"><span data-stu-id="899e8-154">This indicates the approximate time that the server accepted the message.</span></span><br /><br /> <span data-ttu-id="899e8-155">値は、1970 年 1 月 1 日からのミリ秒で示されます。</span><span class="sxs-lookup"><span data-stu-id="899e8-155">The value is in milliseconds since January 1, 1970</span></span><br /><br /> <span data-ttu-id="899e8-156">読み取り専用です。</span><span class="sxs-lookup"><span data-stu-id="899e8-156">Read-only.</span></span> <span data-ttu-id="899e8-157">値を変更しても、メッセージには影響しません。</span><span class="sxs-lookup"><span data-stu-id="899e8-157">Changing the value does not affect the message.</span></span>|  
|<span data-ttu-id="899e8-158">TibcoEMS.Redelivered</span><span class="sxs-lookup"><span data-stu-id="899e8-158">TibcoEMS.Redelivered</span></span>|<span data-ttu-id="899e8-159">boolean</span><span class="sxs-lookup"><span data-stu-id="899e8-159">boolean</span></span>|<span data-ttu-id="899e8-160">サーバーは、メッセーが以前に配信されたメッセージを複製したものであるかどうかを示すためのヘッダーを設定します。次の値があります。</span><span class="sxs-lookup"><span data-stu-id="899e8-160">The server sets the header to indicate whether a message might duplicate a previously delivered message:</span></span><br /><br /> <span data-ttu-id="899e8-161">-false: サーバーが以前を試行していませんコンシューマーに対してこのメッセージを配信します。</span><span class="sxs-lookup"><span data-stu-id="899e8-161">-   false—The server has not previously tried to deliver this message to the consumer.</span></span><br /><span data-ttu-id="899e8-162">場合は true。-可能性がありますが、信頼性は保証できませんが、コンシューマーに対してこのメッセージを配信しようとして、サーバーに以前が、コンシューマーでは、適切な受信確認は返されませんでした。</span><span class="sxs-lookup"><span data-stu-id="899e8-162">-   true—It is likely, but not guaranteed, that the server has previously tried to deliver this message to the consumer, but the consumer did not return timely acknowledgement.</span></span><br /><br /> <span data-ttu-id="899e8-163">読み取り専用です。</span><span class="sxs-lookup"><span data-stu-id="899e8-163">Read-only.</span></span> <span data-ttu-id="899e8-164">値を変更しても、メッセージには影響しません。</span><span class="sxs-lookup"><span data-stu-id="899e8-164">Changing the value does not affect the message.</span></span>|  
|<span data-ttu-id="899e8-165">TibcoEMS.Destination</span><span class="sxs-lookup"><span data-stu-id="899e8-165">TibcoEMS.Destination</span></span>|<span data-ttu-id="899e8-166">string</span><span class="sxs-lookup"><span data-stu-id="899e8-166">string</span></span>|<span data-ttu-id="899e8-167">送信呼び出しは、メッセージの送信先 (キューまたはトピック) をこのヘッダーに記録します。</span><span class="sxs-lookup"><span data-stu-id="899e8-167">Sending calls record the destination (queue or topic) of the message in this header.</span></span> <span data-ttu-id="899e8-168">形式は送信先から取得され、文字列に変換されます。</span><span class="sxs-lookup"><span data-stu-id="899e8-168">The format is adapted from a destination to a string.</span></span> <span data-ttu-id="899e8-169">形式は前に説明した形式です。</span><span class="sxs-lookup"><span data-stu-id="899e8-169">The format is previously described.</span></span><br /><br /> <span data-ttu-id="899e8-170">読み取り専用です。</span><span class="sxs-lookup"><span data-stu-id="899e8-170">Read-only.</span></span> <span data-ttu-id="899e8-171">値を変更しても、メッセージには影響しません。</span><span class="sxs-lookup"><span data-stu-id="899e8-171">Changing the value does not affect the message.</span></span>|  
|<span data-ttu-id="899e8-172">TibcoEMS.DeliveryMode</span><span class="sxs-lookup"><span data-stu-id="899e8-172">TibcoEMS.DeliveryMode</span></span>|<span data-ttu-id="899e8-173">string</span><span class="sxs-lookup"><span data-stu-id="899e8-173">string</span></span>|<span data-ttu-id="899e8-174">2 つの値を持つ: 永続的なと NON-PERSISTENT です。</span><span class="sxs-lookup"><span data-stu-id="899e8-174">Has two possible values: PERSISTENT and NON-PERSISTENT.</span></span> <span data-ttu-id="899e8-175">既定値は PERSISTENT モードです。</span><span class="sxs-lookup"><span data-stu-id="899e8-175">Default value is PERSISTENT mode.</span></span><br /><br /> <span data-ttu-id="899e8-176">アダプタは、EMS サーバーからの受信確認を待機してから、BizTalk Server にメッセージの受信確認を送信します。</span><span class="sxs-lookup"><span data-stu-id="899e8-176">The adapter waits for an acknowledgement from the EMS server before acknowledging the message sent to BizTalk Server.</span></span> <span data-ttu-id="899e8-177">このヘッダー プロパティとポートの構成アイテムは、この受信確認が EMS によってアダプタに送信されるまでの所定時間と、メッセージ送信の信頼性を制御します。</span><span class="sxs-lookup"><span data-stu-id="899e8-177">This header property and port configuration item controls the time EMS takes to send this acknowledgement to the adapter and control the reliability of message transmission.</span></span><br /><br /> <span data-ttu-id="899e8-178">PERSISTENT 配信モードを使用すると、EMS サーバーは、メッセージが EMS サーバーに正常に保存されるまで待機します。</span><span class="sxs-lookup"><span data-stu-id="899e8-178">Using PERSISTENT delivery mode—the EMS server waits until the message is successfully persisted in the EMS server.</span></span> <span data-ttu-id="899e8-179">これにより、メッセージがキューに到着したことが確実になります。</span><span class="sxs-lookup"><span data-stu-id="899e8-179">This action guarantees that the message has arrived in the queue.</span></span> <span data-ttu-id="899e8-180">PERSISTENT モードの配信を使用する場合は、以下を考慮してください。</span><span class="sxs-lookup"><span data-stu-id="899e8-180">When you use PERSISTENT mode delivery, consider the following:</span></span><br /><br /> <span data-ttu-id="899e8-181">メッセージの長さに比例して、BizTalk Server がメッセージが送信されたと見なすまでの時間が長くなります。</span><span class="sxs-lookup"><span data-stu-id="899e8-181">The larger the messages, the longer it takes for BizTalk Server to consider the message as sent.</span></span><br /><br /> <span data-ttu-id="899e8-182">NON-PERSISTENT モードを使用すると、EMS サーバーは、メッセージが保存される前に受信確認を返します。</span><span class="sxs-lookup"><span data-stu-id="899e8-182">Using NON-PERSISTENT mode—the EMS server returns the acknowledgement before persisting the message.</span></span> <span data-ttu-id="899e8-183">EMS サーバーでエラーが発生した場合は、メッセージが失われていても、BizTalk Server が、正常に送信されたと見なす可能性があります。</span><span class="sxs-lookup"><span data-stu-id="899e8-183">If a failure were to occur with the EMS server, the message might be lost when it is considered successfully sent by BizTalk Server.</span></span>|  
|<span data-ttu-id="899e8-184">TibcoEMS.Expiration</span><span class="sxs-lookup"><span data-stu-id="899e8-184">TibcoEMS.Expiration</span></span>|<span data-ttu-id="899e8-185">long</span><span class="sxs-lookup"><span data-stu-id="899e8-185">long</span></span>|<span data-ttu-id="899e8-186">メッセージの有効期限が切れるまでの時間の長さです。</span><span class="sxs-lookup"><span data-stu-id="899e8-186">Length of time that the message will live before expiration.</span></span> <span data-ttu-id="899e8-187">0 に設定すると、メッセージは期限切れになりません。</span><span class="sxs-lookup"><span data-stu-id="899e8-187">If set to 0, message does not expire.</span></span><br /><br /> <span data-ttu-id="899e8-188">有効期限はミリ秒単位で指定します。</span><span class="sxs-lookup"><span data-stu-id="899e8-188">The time-to-live is specified in milliseconds.</span></span>|  
|<span data-ttu-id="899e8-189">TibcoEMS.Priority</span><span class="sxs-lookup"><span data-stu-id="899e8-189">TibcoEMS.Priority</span></span>|<span data-ttu-id="899e8-190">int</span><span class="sxs-lookup"><span data-stu-id="899e8-190">int</span></span>|<span data-ttu-id="899e8-191">0 ～ 9 の数値による順位付けを使用して、メッセージの優先度が標準か、高いかを定義します。</span><span class="sxs-lookup"><span data-stu-id="899e8-191">Uses a numeric ranking, between 0 and 9, to define message priority as normal or expedited.</span></span> <span data-ttu-id="899e8-192">数字が大きくなるほど、優先度は高くなります。</span><span class="sxs-lookup"><span data-stu-id="899e8-192">Larger numbers represent higher priority.</span></span>|  
|<span data-ttu-id="899e8-193">TibcoEMS.CorrolationID</span><span class="sxs-lookup"><span data-stu-id="899e8-193">TibcoEMS.CorrolationID</span></span>|<span data-ttu-id="899e8-194">string</span><span class="sxs-lookup"><span data-stu-id="899e8-194">string</span></span>|<span data-ttu-id="899e8-195">応答メッセージを要求メッセージに関連付けるなど、メッセージの関連付けに使用されます。</span><span class="sxs-lookup"><span data-stu-id="899e8-195">Can be used to link messages, such as linking a response message to a request message.</span></span><br /><br /> <span data-ttu-id="899e8-196">通常は、`EMS.JMSMessageID` と同じ値です。</span><span class="sxs-lookup"><span data-stu-id="899e8-196">Usually this is the same value as the `EMS.JMSMessageID`.</span></span> <span data-ttu-id="899e8-197">このプロパティは通常、`EMS.JMSReplyTo` プロパティと共に使用されます。</span><span class="sxs-lookup"><span data-stu-id="899e8-197">This is usually used together with the `EMS.JMSReplyTo` property.</span></span>|  
|<span data-ttu-id="899e8-198">TibcoEMS.ReplyTo</span><span class="sxs-lookup"><span data-stu-id="899e8-198">TibcoEMS.ReplyTo</span></span>|<span data-ttu-id="899e8-199">string</span><span class="sxs-lookup"><span data-stu-id="899e8-199">string</span></span>|<span data-ttu-id="899e8-200">メッセージに対する返信の送信先です。</span><span class="sxs-lookup"><span data-stu-id="899e8-200">A destination to which a message reply should be sent.</span></span> <span data-ttu-id="899e8-201">形式は、`EMS.JMSDestination` およびポートの構成と同じです。</span><span class="sxs-lookup"><span data-stu-id="899e8-201">Format is identical to the `EMS.JMSDestination` and also the port's configuration.</span></span>|  
|<span data-ttu-id="899e8-202">TibcoEMS.Type</span><span class="sxs-lookup"><span data-stu-id="899e8-202">TibcoEMS.Type</span></span>|<span data-ttu-id="899e8-203">string</span><span class="sxs-lookup"><span data-stu-id="899e8-203">string</span></span>|<span data-ttu-id="899e8-204">メッセージの種類 (テキスト、バイト、文字列など) を示すものではありません。</span><span class="sxs-lookup"><span data-stu-id="899e8-204">Does not describe the message type (text, byte, string …).</span></span><br /><br /> <span data-ttu-id="899e8-205">一部の JMS プロバイダは、メッセージ リポジトリに、メッセージの種類の定義を格納します。</span><span class="sxs-lookup"><span data-stu-id="899e8-205">Some JMS providers use a message repository to store message type definitions.</span></span> <span data-ttu-id="899e8-206">クライアント プログラムでは、リポジトリ内の定義を参照するために、このフィールドに値を格納できます。</span><span class="sxs-lookup"><span data-stu-id="899e8-206">Client programs can store a value in this field to reference a definition in the repository.</span></span> <span data-ttu-id="899e8-207">EMS では、このヘッダーがサポートされていますが、使用されることはありません。</span><span class="sxs-lookup"><span data-stu-id="899e8-207">EMS supports this header but does not use it.</span></span><br /><br /> <span data-ttu-id="899e8-208">JMS 仕様では、標準のメッセージ定義リポジトリは定義されていません。また、メッセージの種類の定義に関する名前付けポリシーも定義されていません。</span><span class="sxs-lookup"><span data-stu-id="899e8-208">The JMS specification does not define a standard message definition repository, nor does it define a naming policy for message type definitions.</span></span><br /><br /> <span data-ttu-id="899e8-209">プロバイダによっては、アプリケーション メッセージごとにメッセージの種類の定義が必要です。</span><span class="sxs-lookup"><span data-stu-id="899e8-209">Some providers require message type definitions for each application message.</span></span> <span data-ttu-id="899e8-210">クライアント プログラムでそのようなプロバイダとの互換性を確保するには、クライアント アプリケーションが使用しない場合でも、このヘッダーを設定します。</span><span class="sxs-lookup"><span data-stu-id="899e8-210">To guarantee compatibility with such providers, client programs can set this header, even if the client application does not use it.</span></span><br /><br /> <span data-ttu-id="899e8-211">クライアントで移植性を確保するには、(リテラルではなく) シンボリック値を使用してこのヘッダーを設定し、プロバイダのリポジトリに適合するように構成します。</span><span class="sxs-lookup"><span data-stu-id="899e8-211">To guarantee portability, clients can set this header with symbolic values (instead of literals), and configure them to match the provider's repository.</span></span>|  
  
## <a name="properties"></a><span data-ttu-id="899e8-212">[プロパティ]</span><span class="sxs-lookup"><span data-stu-id="899e8-212">Properties</span></span>  
 <span data-ttu-id="899e8-213">インテグレータは、BizTalk Server のメッセージ コンテキストに昇格させるための一連のプロパティを定義できます。定義されたプロパティは、JMS メッセージのプロパティ部分に追加されます。</span><span class="sxs-lookup"><span data-stu-id="899e8-213">The integrator can define a set of properties to promote to the BizTalk Server message context, after which the properties are added to the properties part of the JMS message.</span></span> <span data-ttu-id="899e8-214">インテグレータは、スキーマの作成中に、慎重にプロパティの種類を定義します。</span><span class="sxs-lookup"><span data-stu-id="899e8-214">The integrator takes care when defining the type of the property while it is creating the schema.</span></span> <span data-ttu-id="899e8-215">このプロパティの値がメッセージ セレクタで使用されると、プロパティの種類によっては、特定の操作が有効になります。</span><span class="sxs-lookup"><span data-stu-id="899e8-215">If this property value is used in a message selector, certain operations are valid depending on the type of the property.</span></span> <span data-ttu-id="899e8-216">たとえば、メッセージ セレクタ**myMessageProperty > 5**はプロパティは、整数値として定義する必要があり、アダプターでは、値を整数値としてメッセージに使用される、します。</span><span class="sxs-lookup"><span data-stu-id="899e8-216">For example, if a message selector **myMessageProperty > 5** is used, the property must be defined as an integer value, and the adapter puts the value in the message as an integer value.</span></span> <span data-ttu-id="899e8-217">昇格させるプロパティは、プロパティ名の先頭が EMSX である必要があります。</span><span class="sxs-lookup"><span data-stu-id="899e8-217">For the properties to be promoted, the property names must start with EMSX.</span></span> <span data-ttu-id="899e8-218">定義済みのプロパティと同じ名前は使用できません。</span><span class="sxs-lookup"><span data-stu-id="899e8-218">They must also not have the same name as the predefined properties.</span></span>  
  
 <span data-ttu-id="899e8-219">BizTalk Adapter for TIBCO Enterprise Message Service には、このセクションに含めることができる EMS 固有および JMS 固有のプロパティを宣言するスキーマとアセンブリが用意されています。</span><span class="sxs-lookup"><span data-stu-id="899e8-219">BizTalk Adapter for TIBCO Enterprise Message Service provides a schema and assembly, which declare the EMS- and JMS-specific properties that can appear in this section.</span></span> <span data-ttu-id="899e8-220">これらを拡張して、除外を含めることができます。</span><span class="sxs-lookup"><span data-stu-id="899e8-220">These can be augmented to include any omissions.</span></span> <span data-ttu-id="899e8-221">メッセージ コンテキストで参照されているすべての EMSX プロパティは、EMS メッセージのメッセージ プロパティ セクションに書き込まれます。</span><span class="sxs-lookup"><span data-stu-id="899e8-221">All EMSX properties referenced in the message context are put in the message property section of the EMS message.</span></span> <span data-ttu-id="899e8-222">詳細については、『TIBCO EMS Users Guide』を参照してください。</span><span class="sxs-lookup"><span data-stu-id="899e8-222">For more information, see the TIBCO EMS Users Guide.</span></span>  
  
## <a name="body"></a><span data-ttu-id="899e8-223">本文</span><span class="sxs-lookup"><span data-stu-id="899e8-223">Body</span></span>  
 <span data-ttu-id="899e8-224">EMS は、JMS 仕様に列挙されたすべてのメッセージをサポートしています: テキスト、バイト、ストリーム、マップ、およびオブジェクト。</span><span class="sxs-lookup"><span data-stu-id="899e8-224">EMS supports all messages enumerated in the JMS specification: text, byte, stream, map, and object.</span></span> <span data-ttu-id="899e8-225">TIBCO EMS 用の BizTalk ではテキスト メッセージの種類のみをサポートしています。</span><span class="sxs-lookup"><span data-stu-id="899e8-225">The BizTalk Adapter for TIBCO EMS supports only the text message type.</span></span>  
  
 <span data-ttu-id="899e8-226">JMS では、種類がテキストのメッセージに XML 形式の本文が含まれている必要はありません。</span><span class="sxs-lookup"><span data-stu-id="899e8-226">JMS does not require that messages of type text contain XML-formatted bodies.</span></span> <span data-ttu-id="899e8-227">アダプターがメッセージの本文を処理しませんこれに用意されて[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]受信します。</span><span class="sxs-lookup"><span data-stu-id="899e8-227">The adapter does not process the body of the message; it is provided to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] as received.</span></span>  <span data-ttu-id="899e8-228">したがって、BizTalk にアダプターによって送信されたメッセージ可能性がありますとして解析されない XML データです。</span><span class="sxs-lookup"><span data-stu-id="899e8-228">Therefore, messages submitted to BizTalk by the adapter may not always parse as XML data.</span></span>  
  
## <a name="persistent-messages"></a><span data-ttu-id="899e8-229">永続的なメッセージ</span><span class="sxs-lookup"><span data-stu-id="899e8-229">Persistent Messages</span></span>  
 <span data-ttu-id="899e8-230">メッセージを EMS サーバーに保持すると、サブスクライバへの 1 回限りの配信を確実に行うことができますが、この方法はアダプタのパフォーマンスに大きな影響を与えます。</span><span class="sxs-lookup"><span data-stu-id="899e8-230">Messages can be persisted on the EMS server to guarantee exactly one-time delivery to a subscriber; however, this can have a significant impact on the adapter's performance.</span></span> <span data-ttu-id="899e8-231">送信されたメッセージは、EMS のローカル ストアに格納され、その後でメッセージの受信確認がアダプタに送信されます。</span><span class="sxs-lookup"><span data-stu-id="899e8-231">When you send messages, EMS stores the message in local storage before acknowledging reception of the message to the adapter.</span></span> <span data-ttu-id="899e8-232">このプロパティをオーケストレーション内でメッセージ単位で設定することも、すべてのメッセージがポートで処理されるように設定することもできます。</span><span class="sxs-lookup"><span data-stu-id="899e8-232">You can set this property on a per-message basis in the orchestration or for all messages processed by the port.</span></span>  
  
 <span data-ttu-id="899e8-233">受信側の観点からは、アダプタがトピックにサブスクライブしていない場合、メッセージの受信に失敗する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="899e8-233">From the receiving aspect, the adapter can miss messages when it is not subscribed to the topic.</span></span> <span data-ttu-id="899e8-234">サブスクリプションのないトピックに送信されたメッセージは、EMS で保持されません。</span><span class="sxs-lookup"><span data-stu-id="899e8-234">Messages posted to topics when there are no subscriptions are not persisted by EMS.</span></span> <span data-ttu-id="899e8-235">現在はサブスクライブされていない場合でも、送信されたメッセージを受信するためのメカニズムがアダプタに必要です。ただし、永続的なメッセージの使用と同様に、これも EMS のパフォーマンスに大きく影響し、常に必要というわけではありません。</span><span class="sxs-lookup"><span data-stu-id="899e8-235">The adapter needs a mechanism to receive message postings even when not currently subscribed; however, like the use of persistent messages, this has a significant impact on the EMS performance, and it is not always required.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="899e8-236">EMS の観点からの受信メカニズムがありますが、実装されておらず、実際には推奨される方法ではありません。</span><span class="sxs-lookup"><span data-stu-id="899e8-236">There is a mechanism for receive from the point of view of EMS, but it is not implemented, nor is it really desired.</span></span> <span data-ttu-id="899e8-237">これはトピックのみに関連する問題で、キューは影響を受けません。</span><span class="sxs-lookup"><span data-stu-id="899e8-237">This is only an issue with topic; queues are not affected.</span></span> <span data-ttu-id="899e8-238">トピックは通常、株式相場などの時間別のデータに使用されます。</span><span class="sxs-lookup"><span data-stu-id="899e8-238">A topic is generally used for time-specific data -- stock quotes, for example.</span></span> <span data-ttu-id="899e8-239">株価を受信しなかった場合、通常は後で再送信されます。</span><span class="sxs-lookup"><span data-stu-id="899e8-239">If the price of a stock is missed, you know that it will be posted again later.</span></span>  
  
 <span data-ttu-id="899e8-240">このような理由から、ポートの構成で EMS サーバーでのメッセージの永続性を有効または無効にできます。</span><span class="sxs-lookup"><span data-stu-id="899e8-240">For these reasons the port configuration lets you enable or disable message persistence on the EMS server.</span></span>  
  
## <a name="message-acknowledgement"></a><span data-ttu-id="899e8-241">メッセージ受信確認</span><span class="sxs-lookup"><span data-stu-id="899e8-241">Message Acknowledgement</span></span>  
 <span data-ttu-id="899e8-242">BizTalk Adapter for TIBCO Enterprise Message Service では、メッセージが BizTalk Server に適切にディスパッチされると、メッセージの受信確認が常に行われます。</span><span class="sxs-lookup"><span data-stu-id="899e8-242">BizTalk Adapter for TIBCO Enterprise Message Service always acknowledges reception of a message when that message was correctly dispatched to BizTalk Server.</span></span> <span data-ttu-id="899e8-243">したがって、未確認のメッセージは EMS からアダプタに再送信されます。</span><span class="sxs-lookup"><span data-stu-id="899e8-243">This means that unacknowledged messages are resent from EMS to the adapter.</span></span> <span data-ttu-id="899e8-244">EMS からのメッセージの再送信回数は、送信先自体の構成であるため、アダプタでは制御できません。ただし、アダプタでは、メッセージがメッセージ ボックスに送信されるかどうかを制御できます。</span><span class="sxs-lookup"><span data-stu-id="899e8-244">The adapter cannot control the number of times the message is resent by EMS because this is a configuration of the destination itself; however, the adapter can control if the message is sent to the MessageBox or not.</span></span> <span data-ttu-id="899e8-245">EMS サーバーでは、失敗したメッセージがキューに送信される回数を制御します。</span><span class="sxs-lookup"><span data-stu-id="899e8-245">The EMS server controls the maximum number of times a failed message is sent to a queue.</span></span>  
  
 <span data-ttu-id="899e8-246">再配信されたメッセージについては、EMS サーバーが `JMSRedelivered` プロパティを True に設定し、`JMSXDeliveryCount` をインクリメントします。</span><span class="sxs-lookup"><span data-stu-id="899e8-246">For messages that are redelivered, the EMS server sets the `JMSRedelivered` property to True and increments the `JMSXDeliveryCount`.</span></span> <span data-ttu-id="899e8-247">両方のプロパティの値をオーケストレーションで利用できます。</span><span class="sxs-lookup"><span data-stu-id="899e8-247">Both property values are available to the orchestration.</span></span> <span data-ttu-id="899e8-248">メッセージを配信せずに、EMS の未配信キューに移動することはできません。</span><span class="sxs-lookup"><span data-stu-id="899e8-248">You cannot move a message to the EMS un-delivered queue without delivering it there.</span></span> <span data-ttu-id="899e8-249">これを行うと、メッセージのプロパティが変わります。</span><span class="sxs-lookup"><span data-stu-id="899e8-249">Doing this would change the message properties.</span></span>  
  
 <span data-ttu-id="899e8-250">最大再配信回数で設定されている回数に達すると、EMS サーバーにより、メッセージを削除するか、$sys.undelivered キューに書き込むかが決定されます。</span><span class="sxs-lookup"><span data-stu-id="899e8-250">When a message reaches its configured maximum redelivery count, the EMS server determines whether the message should be deleted or put on the $sys.undelivered queue.</span></span> <span data-ttu-id="899e8-251">EMS サーバーでは、`JMS_TIBCO_PRESERVE_UNDELIVERED` プロパティに基づいて、この決定を行います。True の場合はメッセージが未配信キューに書き込まれ、それ以外の場合は削除されます。</span><span class="sxs-lookup"><span data-stu-id="899e8-251">The EMS server makes the decision based on the `JMS_TIBCO_PRESERVE_UNDELIVERED` property; if True, the message goes to the undelivered queue, or it is deleted.</span></span> <span data-ttu-id="899e8-252">このプロパティは、メッセージの送信前にオーケストレーションで設定できます。</span><span class="sxs-lookup"><span data-stu-id="899e8-252">This property can be set in the orchestration before sending the message.</span></span> <span data-ttu-id="899e8-253">配信後は、メッセージのプロパティを変更できません。</span><span class="sxs-lookup"><span data-stu-id="899e8-253">After delivery, the message property cannot be changed.</span></span> <span data-ttu-id="899e8-254">EMS へのメッセージの送信が正常に完了すると、BizTalk Server に受信確認が送信されます。</span><span class="sxs-lookup"><span data-stu-id="899e8-254">Messages sent to EMS are acknowledged to BizTalk Server when they are successful.</span></span> <span data-ttu-id="899e8-255">EMS への送信中にエラーが発生すると、メッセージが中断され、再試行可能に設定されます。</span><span class="sxs-lookup"><span data-stu-id="899e8-255">If there is a failure sending theme to EMS, they are suspended and marked as retryable.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="899e8-256">参照</span><span class="sxs-lookup"><span data-stu-id="899e8-256">See Also</span></span>  
 [<span data-ttu-id="899e8-257">作業の開始</span><span class="sxs-lookup"><span data-stu-id="899e8-257">Getting Started</span></span>](../core/getting-started-with-biztalk-adapter-for-tibco-enterprise-message-service.md)