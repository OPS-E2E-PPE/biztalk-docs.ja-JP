---
title: スケール アウト受信ホスト |Microsoft ドキュメント
ms.custom: ''
ms.date: 2016-03-17
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- adapters, receive adapters
- high availability
- HTTP adapters, scaling
- receive adapters, scaling
- POP3 adapters, scaling
- MSMQ adapters, scaling
- EDI adapters, scaling
- Web services, scaling
- hosts, multiple
- MQSeries adapters, scaling
- adapters, Windows SharePoint Services
- scaling, hosts
- scaling, adapters
- SAP adapters
- FTP adapters
- scaling, receive adapters
- hosts, receiving
- adapters, Web services
- hosts, scaling
- SOAP adapters, scaling
- adapters, scaling
- SQL adapters, scaling
- Web services, adapters
- File adapters, scaling
- clustering
ms.assetid: 94f35426-37fa-4ad2-8e35-d82fdca02262
caps.latest.revision: 54
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 5b9bc048de978a6dfd7c28505c54cdaaaef64064
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/20/2017
ms.locfileid: "22272554"
---
# <a name="scaled-out-receiving-hosts"></a><span data-ttu-id="f6169-102">受信ホストのスケールアウト</span><span class="sxs-lookup"><span data-stu-id="f6169-102">Scaled-Out Receiving Hosts</span></span>
<span data-ttu-id="f6169-103">受信機能 (受信場所やパイプラインなど) をつかさどるホストはセキュリティの処理境界として機能し、メッセージのデコードや復号化は、そのホスト内のパイプラインで行われます。</span><span class="sxs-lookup"><span data-stu-id="f6169-103">When a host contains a receiving item, such as a receive location or pipeline, it acts as a security boundary, and the message decoding and decrypting occurs in a pipeline within the host.</span></span> <span data-ttu-id="f6169-104">受信ホストの高可用性を確保するためには、それぞれが受信ホストのインスタンスを実行する複数の [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] コンピューターを用意する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f6169-104">To make the receiving hosts highly available, you must have two or more [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computers that are running instances of each receiving host.</span></span> <span data-ttu-id="f6169-105">受信ホストをスケール アウトすることにより、メッセージ処理の負荷の大きい [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 環境で可用性を確保できます。</span><span class="sxs-lookup"><span data-stu-id="f6169-105">By scaling out the receiving hosts you can guarantee availability for [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] deployments that are messaging intensive.</span></span> <span data-ttu-id="f6169-106">こうすることで、受信ホストが実行するオーケストレーション処理を最小限に抑えながら、さまざまなタイプのメッセージを高速かつ高い信頼性でルーティングさせることができます。</span><span class="sxs-lookup"><span data-stu-id="f6169-106">While these deployments might perform minimal processing for orchestrations, they can route many messages of varying types with great speed and reliability.</span></span>  
  
 <span data-ttu-id="f6169-107">オーケストレーション処理やメッセージ送信を行うホストから受信ホストを分離することは、環境のセキュリティとスケーラビリティ強化にもつながります。各ホストのセキュリティやスケーラビリティを他のホストと切り離して捉えることができるためです。</span><span class="sxs-lookup"><span data-stu-id="f6169-107">You can enhance security and scalability in your environment by separating the receiving host from the hosts that process orchestrations and send messages because you can secure and scale each host independently of other hosts.</span></span> <span data-ttu-id="f6169-108">たとえば、処理ホストや送信ホストには一切コンピューターを追加することなく、受信ホストにのみ 2 台のコンピューター (ホスト インスタンス) を追加することもできます。</span><span class="sxs-lookup"><span data-stu-id="f6169-108">For example, you can add two computers (host instances) to the receiving host without adding any computers to the processing or sending hosts.</span></span>  
  
## <a name="multiple-hosts-for-receiving-messages"></a><span data-ttu-id="f6169-109">複数ホストによるメッセージの受信</span><span class="sxs-lookup"><span data-stu-id="f6169-109">Multiple Hosts for Receiving Messages</span></span>  
 <span data-ttu-id="f6169-110">次の図は、受信ホストのインスタンスを実行する 2 台のコンピューターを使用して、受信ホストの高可用性を実現した [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 環境を示しています。</span><span class="sxs-lookup"><span data-stu-id="f6169-110">The following figure shows a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] deployment that provides high availability for the receiving host by having two computers that are running instances of the receiving host.</span></span> <span data-ttu-id="f6169-111">この図に示されている処理ホストおよび送信ホストの可用性は高くないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="f6169-111">Note that in this figure the processing and sending hosts are not highly available.</span></span>  
  
 <span data-ttu-id="f6169-112">![メッセージを受信するための複数のホスト](../core/media/tdi-ha-scalereceive.gif "TDI_HA_ScaleReceive")</span><span class="sxs-lookup"><span data-stu-id="f6169-112">![Multiple Host for Receiving Messages](../core/media/tdi-ha-scalereceive.gif "TDI_HA_ScaleReceive")</span></span>  
  
 <span data-ttu-id="f6169-113">複数の取引先とやりとりする場合や、異なるプロトコルを使用する場合など、環境の規模が大きい場合は、受信機能を複数の受信ホストに分散させることが可能です。</span><span class="sxs-lookup"><span data-stu-id="f6169-113">For large deployments, for scenarios dealing with multiple trading partners, and for scenarios when you use different protocols, you can spread out the receiving functionality across multiple receiving hosts.</span></span> <span data-ttu-id="f6169-114">たとえば、アダプターごとにメッセージ受信用のホストを設けたり、メッセージの受信ホストを取引先ごとに用意することもできます。</span><span class="sxs-lookup"><span data-stu-id="f6169-114">For example, you can create a host for receiving messages for each adapter, or different hosts for receiving messages from different partners.</span></span> <span data-ttu-id="f6169-115">複数の受信ホストを設ける際、セキュリティの処理境界を作成することで環境の管理性とスケーラビリティは向上しますが、それによって環境の高可用性が実現するというわけではありません。</span><span class="sxs-lookup"><span data-stu-id="f6169-115">When you create multiple receiving hosts you can create security boundaries and ease the manageability and scalability of your environment; however, it does not make your environment highly available.</span></span>  
  
 <span data-ttu-id="f6169-116">環境の高可用性を実現するためには、受信ホストごとに複数のホスト インスタンスを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f6169-116">To make your environment highly available, you must create two or more host instances for each receiving host that you create.</span></span> <span data-ttu-id="f6169-117">たとえば、3 つの受信ホスト (A、B、C) を用意し、それぞれが異なる会社からのメッセージを受信するように構成したとします。</span><span class="sxs-lookup"><span data-stu-id="f6169-117">For example, you can create three different receive hosts (A, B, and C) to receive messages from three different companies.</span></span> <span data-ttu-id="f6169-118">すべての受信ホストに高可用性を確保するためには、受信ホストごとに複数のホスト インスタンスを作成し、それらを複数のコンピューターに展開する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f6169-118">To make each of these hosts highly available you then create host instances of each of these hosts in two or more computers.</span></span> <span data-ttu-id="f6169-119">セキュリティの処理境界、管理性、スケーラビリティを損なうことなく、複数のホスト インスタンスを 1 台のコンピューターに割り当てることができるという点に注目してください。</span><span class="sxs-lookup"><span data-stu-id="f6169-119">Note that you can have instances of each host on one computer without losing the security boundary, manageability, or scalability.</span></span>  
  
 <span data-ttu-id="f6169-120">次の図は、会社ごとに専用の受信ホストが用意された BizTalk Server 環境に対し、3 台のコンピューターを使って高可用性を実現した例です。</span><span class="sxs-lookup"><span data-stu-id="f6169-120">The following figure shows a highly available three-computer BizTalk Server environment with hosts dedicated to receiving messages from different companies.</span></span>  
  
 <span data-ttu-id="f6169-121">![受信インスタンス](../core/media/tdi-ha-receiveinstances2.gif "TDI_HA_ReceiveInstances2")</span><span class="sxs-lookup"><span data-stu-id="f6169-121">![Receive Instances](../core/media/tdi-ha-receiveinstances2.gif "TDI_HA_ReceiveInstances2")</span></span>  
  
 <span data-ttu-id="f6169-122">この構成で高可用性を実現するには、各コンピューターが 3 つのホスト インスタンスを実行します。 3 つの会社の列ごとに 1 つのインスタンス。</span><span class="sxs-lookup"><span data-stu-id="f6169-122">To provide high availability in this configuration, each computer runs three host instances: one instance for each of the three companies.</span></span> <span data-ttu-id="f6169-123">各会社に対応するホスト インスタンスには、その会社と通信するための受信場所およびパイプラインが保持されます。</span><span class="sxs-lookup"><span data-stu-id="f6169-123">The host instances for each company contain the receive locations and pipelines to communicate with that company.</span></span> <span data-ttu-id="f6169-124">通常動作中は、受信アダプターのスケールアウトに必要な作業 (たとえば、HTTP 用にネットワーク負荷分散を構成するなど) を終えていれば、メッセージの負荷が各ホストの 3 つのホスト インスタンスに分散されます。</span><span class="sxs-lookup"><span data-stu-id="f6169-124">During typical operations, as long as you have done the necessary work for scale out in front of the receive adapters (for example, if you configure network load balancing for HTTP), the messaging load is distributed among the three host instances for each host.</span></span> <span data-ttu-id="f6169-125">1 つのコンピューターの特定のホスト インスタンスで障害が発生した場合、その他の 2 つのコンピューターで実行されているホスト インスタンスが処理を引き継ぐため、サービスの可用性は維持されます。</span><span class="sxs-lookup"><span data-stu-id="f6169-125">If a host instance on one computer fails, the host instances running on the other two computers provide redundancy and maintain service availability.</span></span>  
  
## <a name="scaling-the-biztalk-server-receive-adapters"></a><span data-ttu-id="f6169-126">BizTalk Server 受信アダプターの拡張</span><span class="sxs-lookup"><span data-stu-id="f6169-126">Scaling the BizTalk Server Receive Adapters</span></span>  
 <span data-ttu-id="f6169-127">受信ホストをスケールアウトして高可用性を確保するという目的において考慮するべき要素はホスト インスタンスだけではありません。環境に実装されているアダプターにも注目する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f6169-127">Besides host instances, the process of scaling and providing high availability for the receive hosts also depends on the specific adapters that you implement in your deployment.</span></span> <span data-ttu-id="f6169-128">各アダプターには、プロトコルごとの特性があるため、計画と導入もそれぞれのケースによって異なります。</span><span class="sxs-lookup"><span data-stu-id="f6169-128">Each adapter has protocol-specific characteristics that make planning and deployment different in each case.</span></span> <span data-ttu-id="f6169-129">ただし、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] では、すべてのアダプターに対して同じ高可用性ソリューションを適用できます。これは、主にコンピューターとホスト インスタンスの増設を通じて行うことになります。</span><span class="sxs-lookup"><span data-stu-id="f6169-129">However, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] lets you apply the same high-availability solution for all adapters, primarily through additional computers and host instances.</span></span>  
  
 <span data-ttu-id="f6169-130">受信メッセージを複数のホスト コンピューターに分散して高可用性を確保する際、使用するプロトコルによっては、受信アダプターに追加のメカニズムが必要になる場合もあります。</span><span class="sxs-lookup"><span data-stu-id="f6169-130">Depending on the specific protocol being used, some receive adapters require an additional mechanism for distributing incoming messages among multiple host computers to provide high availability.</span></span> <span data-ttu-id="f6169-131">たとえば、HTTP アダプターまたは SOAP アダプター (Web サービス アダプター) を使用する [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] ソリューションでは、ネットワーク負荷分散 (NLB) などのロード バランサーを使用して、受信のワークロードを分散する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f6169-131">For example, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] solutions that use the HTTP or SOAP adapter (otherwise known as the Web services adapter) require a load balancer such as Network Load Balancing (NLB) to distribute the receiving workload.</span></span> <span data-ttu-id="f6169-132">次の表は、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] で一般的に使用されるアダプターについて、高可用性を実現する上でのガイドラインをまとめたものです。</span><span class="sxs-lookup"><span data-stu-id="f6169-132">The following table summarizes the high-availability guidelines for the most common adapters in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>  
  
|<span data-ttu-id="f6169-133">**アダプター**</span><span class="sxs-lookup"><span data-stu-id="f6169-133">**Adapter**</span></span>|<span data-ttu-id="f6169-134">**高可用性のガイドライン**</span><span class="sxs-lookup"><span data-stu-id="f6169-134">**High-availability guidelines**</span></span>|  
|-----------------|---------------------------------------|  
|<span data-ttu-id="f6169-135">HTTP</span><span class="sxs-lookup"><span data-stu-id="f6169-135">HTTP</span></span>|<span data-ttu-id="f6169-136">受信ホストに複数のコンピューターを追加して NLB を構成し、受信メッセージを複数のホスト コンピューターに分散させます。</span><span class="sxs-lookup"><span data-stu-id="f6169-136">Add multiple computers to the receive host and configure NLB to distribute incoming messages across the multiple host computers.</span></span>|  
|<span data-ttu-id="f6169-137">SOAP</span><span class="sxs-lookup"><span data-stu-id="f6169-137">SOAP</span></span>|<span data-ttu-id="f6169-138">受信ホストに複数のコンピューターを追加して NLB を構成し、受信メッセージを複数のホスト コンピューターに分散させます。</span><span class="sxs-lookup"><span data-stu-id="f6169-138">Add multiple computers to the receive host and configure NLB to distribute incoming messages across the multiple host computers.</span></span>|  
|<span data-ttu-id="f6169-139">ファイル</span><span class="sxs-lookup"><span data-stu-id="f6169-139">File</span></span>|<span data-ttu-id="f6169-140">受信ホストに複数のコンピューターを追加し、各ホスト コンピューター上で、受信場所として同じファイル フォルダーまたは UNC (汎用名前付け規則) パスが参照されるように構成します。</span><span class="sxs-lookup"><span data-stu-id="f6169-140">Add multiple computers to the receive host with the receive location on each host computer referencing the same file folder or Universal Naming Convention (UNC) path.</span></span> <span data-ttu-id="f6169-141">さらに強固な可用性ソリューションを導入する場合は、UNC パスで指定された場所の可用性を確保します (あるいは信頼性を高める)。</span><span class="sxs-lookup"><span data-stu-id="f6169-141">For a complete highly available solution, you must make sure that the file location to which the UNC path points is highly available (or at least reliable).</span></span>|  
|<span data-ttu-id="f6169-142">FTP</span><span class="sxs-lookup"><span data-stu-id="f6169-142">FTP</span></span>|<span data-ttu-id="f6169-143">クラスター化された BizTalk ホストで FTP 受信アダプターを実行するように構成します。</span><span class="sxs-lookup"><span data-stu-id="f6169-143">Configure the FTP receive adapter to run in a clustered BizTalk host.</span></span> <span data-ttu-id="f6169-144">詳細については、次を参照してください。[化されたクラスター化されたホストでアダプター ハンドラーの実行に関する考慮事項](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)です。</span><span class="sxs-lookup"><span data-stu-id="f6169-144">For more information, see [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span>|  
|<span data-ttu-id="f6169-145">POP3</span><span class="sxs-lookup"><span data-stu-id="f6169-145">POP3</span></span>|<span data-ttu-id="f6169-146">クラスター化された BizTalk ホストで POP3 受信アダプターを実行するように構成します。</span><span class="sxs-lookup"><span data-stu-id="f6169-146">Configure the POP3 receive adapter to run in a clustered BizTalk host.</span></span> <span data-ttu-id="f6169-147">詳細については、次を参照してください。[化されたクラスター化されたホストでアダプター ハンドラーの実行に関する考慮事項](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)です。</span><span class="sxs-lookup"><span data-stu-id="f6169-147">For more information, see [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span>|  
|<span data-ttu-id="f6169-148">MSMQ (MSMQ)</span><span class="sxs-lookup"><span data-stu-id="f6169-148">MSMQ</span></span>|<span data-ttu-id="f6169-149">MSMQ を構成する受信アダプタは、Windows クラスター化された BizTalk ホストで実行します。</span><span class="sxs-lookup"><span data-stu-id="f6169-149">Configure the MSMQ receive adapter to run in a Windows-clustered BizTalk host.</span></span> <span data-ttu-id="f6169-150">詳細については、次を参照してください。[化されたクラスター化されたホストでアダプター ハンドラーの実行に関する考慮事項](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)です。</span><span class="sxs-lookup"><span data-stu-id="f6169-150">For more information, see [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span> <span data-ttu-id="f6169-151">場合は、MSMQ 受信場所は、キューを使用してリモート MSMQ サーバーでは、BizTalk ホストをクラスター化する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="f6169-151">If the MSMQ receive locations are using queues on a remote MSMQ server, you do not need to cluster the BizTalk host.</span></span>  <span data-ttu-id="f6169-152">このシナリオでは、実行、MSMQ は、グループ内の複数の BizTalk コンピューター上のホストを受信します。</span><span class="sxs-lookup"><span data-stu-id="f6169-152">In this scenario, run the MSMQ receive host on multiple BizTalk computers in the group.</span></span>|  
|<span data-ttu-id="f6169-153">MQSeries</span><span class="sxs-lookup"><span data-stu-id="f6169-153">MQSeries</span></span>|<span data-ttu-id="f6169-154">このアダプターの受信ホストに複数のコンピューターを追加して、MQSeries for Windows のキュー マネージャーをクラスター化し、MQSeries Server for Windows をクラスター化します。</span><span class="sxs-lookup"><span data-stu-id="f6169-154">Add multiple computers to the receive host for this adapter, use clustered queue managers in MQSeries for Windows, and cluster the MQSeries Server for Windows.</span></span>|  
|<span data-ttu-id="f6169-155">Windows Sharepoint Services</span><span class="sxs-lookup"><span data-stu-id="f6169-155">Windows Sharepoint Services</span></span>|<span data-ttu-id="f6169-156">受信ホストに複数のコンピューターを追加して NLB を構成し、受信メッセージを複数のホスト コンピューターに分散させます。</span><span class="sxs-lookup"><span data-stu-id="f6169-156">Add multiple computers to the receive host and configure NLB to distribute incoming messages across the multiple host computers.</span></span>|  
|<span data-ttu-id="f6169-157">WCF-NetTcp</span><span class="sxs-lookup"><span data-stu-id="f6169-157">-   WCF-NetTcp</span></span><br /><span data-ttu-id="f6169-158">-Wcf-custom</span><span class="sxs-lookup"><span data-stu-id="f6169-158">-   WCF-Custom</span></span>|<span data-ttu-id="f6169-159">受信ホストに複数のコンピューターを追加して NLB を構成し、受信メッセージをこれらのホスト コンピューターに分散させます。</span><span class="sxs-lookup"><span data-stu-id="f6169-159">Add multiple computers to the receive host and configure NLB to distribute incoming messages across these host computers.</span></span><br /><br /> <span data-ttu-id="f6169-160">- または -</span><span class="sxs-lookup"><span data-stu-id="f6169-160">-or -</span></span><br /><br /> <span data-ttu-id="f6169-161">アダプター受信ハンドラーによって使用されるホストをクラスター化します。</span><span class="sxs-lookup"><span data-stu-id="f6169-161">Cluster the host used by the adapter receive handler.</span></span>|  
|<span data-ttu-id="f6169-162">-Wcf-netnamedpipe</span><span class="sxs-lookup"><span data-stu-id="f6169-162">-   WCF-NetNamedPipe</span></span><br /><span data-ttu-id="f6169-163">-Wcf-basichttp</span><span class="sxs-lookup"><span data-stu-id="f6169-163">-   WCF-BasicHttp</span></span><br /><span data-ttu-id="f6169-164">-Wcf-wshttp</span><span class="sxs-lookup"><span data-stu-id="f6169-164">-   WCF-WSHttp</span></span><br /><span data-ttu-id="f6169-165">-Wcf-customisolated</span><span class="sxs-lookup"><span data-stu-id="f6169-165">-   WCF-CustomIsolated</span></span>|<span data-ttu-id="f6169-166">受信ホストに複数のコンピューターを追加して NLB を構成し、受信メッセージをこれらのホスト コンピューターに分散させます。</span><span class="sxs-lookup"><span data-stu-id="f6169-166">Add multiple computers to the receive host and configure NLB to distribute incoming messages across these host computers.</span></span>|  
|<span data-ttu-id="f6169-167">WCF-NetMsmq</span><span class="sxs-lookup"><span data-stu-id="f6169-167">WCF-NetMsmq</span></span>|<span data-ttu-id="f6169-168">アダプター受信ハンドラーによって使用されるホストをクラスター化します。</span><span class="sxs-lookup"><span data-stu-id="f6169-168">Cluster the host used by the adapter receive handler.</span></span>|  
  
### <a name="http-adapter"></a><span data-ttu-id="f6169-169">HTTP アダプター</span><span class="sxs-lookup"><span data-stu-id="f6169-169">HTTP Adapter</span></span>  
 <span data-ttu-id="f6169-170">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] の HTTP 受信アダプターは、各受信ホスト コンピューター上でホスト インスタンスとして動作する ISAPI (Internet Server API) 拡張 (BTSHTTPReceive.dll) です。</span><span class="sxs-lookup"><span data-stu-id="f6169-170">The HTTP receive adapter in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] is an Internet Server API (ISAPI) extension (BTSHTTPReceive.dll) that runs as a host instance on each receive host computer.</span></span> <span data-ttu-id="f6169-171">パートナーが HTTP プロトコルを通じて BizTalk Server にメッセージを送信すると、そのメッセージは通常、インターネット インフォメーション サービス (IIS) のインストールされた BizTalk Server コンピューターの特定の URL で受信されます。</span><span class="sxs-lookup"><span data-stu-id="f6169-171">When a partner sends a message to BizTalk Server through the HTTP protocol, the message typically arrives at a specific URL on a BizTalk Server computer with Internet Information Services (IIS) installed.</span></span> <span data-ttu-id="f6169-172">BizTalk Server には、受信場所でこの URL をサブスクライブするホスト インスタンスを作成することになります。</span><span class="sxs-lookup"><span data-stu-id="f6169-172">You create a host instance in BizTalk Server with a receive location that subscribes to this URL.</span></span> <span data-ttu-id="f6169-173">この URL に到着したメッセージは、BizTalk Server によって取り出され、メッセージ ボックス データベースに格納されます。</span><span class="sxs-lookup"><span data-stu-id="f6169-173">When messages arrive at the URL, BizTalk Server retrieves them and persists them in the MessageBox database.</span></span>  
  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="f6169-174"> では、同じ受信ホストのホスト インスタンスを複数作成することにより、HTTP 受信アダプターに高い可用性を確保できます。</span><span class="sxs-lookup"><span data-stu-id="f6169-174"> provides high availability for the HTTP receive adapter by letting you create multiple host instances of the same receive host.</span></span> <span data-ttu-id="f6169-175">これらのホスト インスタンスは、共有可能な特定の URL (NLB を使って受信メッセージを複数の受信ホストに分散させている場合はクラスターの IP アドレス) をサブスクライブします。</span><span class="sxs-lookup"><span data-stu-id="f6169-175">These host instances subscribe to a specific URL that can be a shared, cluster IP address if you are using NLB to distribute incoming messages across multiple receive hosts.</span></span> <span data-ttu-id="f6169-176">これらのホストはすべて、クラスターの仮想 IP アドレスに対してサービスを提供するため、いずれかのクラスター メンバーで障害が発生しても、他のホストがこの IP アドレスに対してサービスを提供できます。</span><span class="sxs-lookup"><span data-stu-id="f6169-176">These hosts all function to serve the virtual IP address of the cluster, so that if one cluster member fails, others can still serve this IP address.</span></span>  
  
### <a name="soap-adapter-web-services-adapter"></a><span data-ttu-id="f6169-177">SOAP アダプター (Web サービス アダプター)</span><span class="sxs-lookup"><span data-stu-id="f6169-177">SOAP Adapter (Web Services Adapter)</span></span>  
 <span data-ttu-id="f6169-178">HTTP 受信アダプターとは異なり、Web サービスの受信アダプターには ISAPI 拡張は使用されません。</span><span class="sxs-lookup"><span data-stu-id="f6169-178">Unlike the HTTP receive adapter, the receive adapter for Web services does not involve an ISAPI extension.</span></span> <span data-ttu-id="f6169-179">受信メッセージは、BizTalk Web サービス公開ウィザードで指定された URL を通じて取得されます。</span><span class="sxs-lookup"><span data-stu-id="f6169-179">It receives incoming messages through a URL that you specify by using the BizTalk Web Services Publishing Wizard.</span></span> <span data-ttu-id="f6169-180">このウィザードでは、Web サービスがエクスポートされ、受信場所として機能する仮想ディレクトリが作成されます。</span><span class="sxs-lookup"><span data-stu-id="f6169-180">This wizard exports a Web service and creates a virtual directory that functions as the receive location.</span></span>  
  
 <span data-ttu-id="f6169-181">Web サービス アダプターに高い可用性を確保するには、受信ホストに複数のコンピューターを追加して NLB を構成し、受信メッセージを複数のホスト コンピューターに分散させます。</span><span class="sxs-lookup"><span data-stu-id="f6169-181">To provide high availability for the Web services adapter, add multiple computers to the receive host and use NLB to distribute incoming messages.</span></span> <span data-ttu-id="f6169-182">クライアントが Web サービス アダプターを通じて BizTalk Server にメッセージを送信すると、NLB は、そのメッセージを負荷の状況に応じて、いずれかの受信ホストに送信します。さらに、そのホスト上で実行されている適切なホスト インスタンスが、メッセージをメッセージ ボックス データベースに保存します。</span><span class="sxs-lookup"><span data-stu-id="f6169-182">When a client sends a message to BizTalk Server through the Web services adapter, NLB load balances the message to one of the receiving hosts, and the appropriate host instance running on the host persists the message to the MessageBox database.</span></span>  
  
### <a name="file-adapter"></a><span data-ttu-id="f6169-183">ファイル アダプタ</span><span class="sxs-lookup"><span data-stu-id="f6169-183">File Adapter</span></span>  
 <span data-ttu-id="f6169-184">ファイル受信アダプターは、メッセージをファイル フォルダーまたは UNC パスから取得します。</span><span class="sxs-lookup"><span data-stu-id="f6169-184">The File receive adapter retrieves messages from a file folder or UNC path.</span></span> <span data-ttu-id="f6169-185">ファイル アダプターが B2B のシナリオで使用されることはあまり多くありません。ファイル アダプターを使用するには、特定のパスに対するアクセス許可を双方が必要としますが、企業がファイル システムを外部と共有することは通常考えられないからです。むしろ、社内で使用されることの多いアダプターです。</span><span class="sxs-lookup"><span data-stu-id="f6169-185">This adapter is frequently used within companies instead of in business-to-business scenarios because both parties require permissions to the path, and companies do not typically share file systems.</span></span> <span data-ttu-id="f6169-186">受信場所に到着したメッセージを BizTalk Server が取得できるようにファイル受信ハンドラーを構成する (パスをサブスクライブする) 必要があります。</span><span class="sxs-lookup"><span data-stu-id="f6169-186">You configure the File receive handler to subscribe to the path so that BizTalk Server retrieves the message when it arrives at the receive location.</span></span>  
  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="f6169-187"> では、同じ UNC パスをサブスクライブするホスト インスタンスを複数のホスト コンピューターに作成することで、ファイル受信アダプターに高い可用性を確保できます。</span><span class="sxs-lookup"><span data-stu-id="f6169-187"> provides high availability for the file receive adapter by letting you create host instances on multiple host computers that subscribe to the same UNC path.</span></span> <span data-ttu-id="f6169-188">あるホスト コンピューターで実行されているホスト インスタンスにエラーや障害が発生した場合、別のホスト コンピューターで実行されている同じホスト インスタンスが、メッセージを取得し、メッセージ ボックス データベースに保存します。</span><span class="sxs-lookup"><span data-stu-id="f6169-188">If a host instance running on one host computer encounters errors or fails, the same host instance running on another host computer can retrieve the message and persist it to the MessageBox database.</span></span>  
  
### <a name="ftp-adapter"></a><span data-ttu-id="f6169-189">FTP アダプタ</span><span class="sxs-lookup"><span data-stu-id="f6169-189">FTP Adapter</span></span>  
 <span data-ttu-id="f6169-190">FTP 受信アダプターを複数のホストで実行するように構成することはできません。FTP 受信アダプターは、FTP プロトコルを使ってファイルを対象システムから取得します。仮に FTP 受信アダプターの複数のインスタンスを実行しようとした場合、同じファイルの複数のコピーが同時に取得されることのないようにファイルをロックする必要があります。しかし、FTP プロトコルにはファイルをロックするという概念がありません。</span><span class="sxs-lookup"><span data-stu-id="f6169-190">The FTP receive adapter should not be configured to run in multiple hosts because the FTP receive adapter uses the FTP protocol to retrieve files from the target system and the FTP protocol does not have any notion of file locking to ensure that multiple copies of the same file are not retrieved simultaneously when running multiple instances of the FTP receive adapter.</span></span> <span data-ttu-id="f6169-191">FTP 受信アダプターは、クラスター化された BizTalk ホストで実行するように構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f6169-191">The FTP receive adapter should be configured to run in a clustered BizTalk host.</span></span> <span data-ttu-id="f6169-192">詳細については、次を参照してください。[化されたクラスター化されたホストでアダプター ハンドラーの実行に関する考慮事項](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)です。</span><span class="sxs-lookup"><span data-stu-id="f6169-192">For more information, see [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span>  
  
### <a name="pop3-adapter"></a><span data-ttu-id="f6169-193">POP3 アダプタ</span><span class="sxs-lookup"><span data-stu-id="f6169-193">POP3 Adapter</span></span>  
 <span data-ttu-id="f6169-194">POP3 受信アダプターは、データの読み取り先 POP3 サーバーが、同一のメールボックスに対する複数同時接続を許可している場合を除き、複数のホストで実行させることができます。</span><span class="sxs-lookup"><span data-stu-id="f6169-194">The POP3 receive adapter can be configured to run in multiple hosts unless the POP3 server that the adapter is reading from allows multiple concurrent connections to be made to the same mailbox.</span></span> <span data-ttu-id="f6169-195">POP3 アダプターが接続されている POP3 サーバーでメールボックスに対する複数の同時接続が可能な場合、POP3 アダプターの受信ハンドラーを構成してクラスター化された BizTalk ホスト インスタンスで実行することで、POP3 アダプターの高可用性を実現する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f6169-195">If the POP3 server that the POP3 adapter is connected to permits multiple concurrent connections to its mailboxes then high availability for the POP3 adapter must be achieved by configuring POP3 adapter receive handlers to run in a BizTalk host instance that has been clustered.</span></span> <span data-ttu-id="f6169-196">詳細については、次を参照してください。[化されたクラスター化されたホストでアダプター ハンドラーの実行に関する考慮事項](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)です。</span><span class="sxs-lookup"><span data-stu-id="f6169-196">For more information, see [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span>  
  
### <a name="msmq-adapter"></a><span data-ttu-id="f6169-197">MSMQ アダプター</span><span class="sxs-lookup"><span data-stu-id="f6169-197">MSMQ Adapter</span></span>  
 <span data-ttu-id="f6169-198">高可用性を実現するために実行、MSMQ 受信アダプターをクラスター化された MSMQ リソースと同じクラスター グループ内にある Windows クラスター化された BizTalk ホストで。</span><span class="sxs-lookup"><span data-stu-id="f6169-198">To achieve high availability, run the MSMQ receive adapter in a Windows-clustered BizTalk host that is in the same cluster group as the clustered MSMQ resource.</span></span> <span data-ttu-id="f6169-199">詳細については、次を参照してください。[化されたクラスター化されたホストでアダプター ハンドラーの実行に関する考慮事項](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)です。</span><span class="sxs-lookup"><span data-stu-id="f6169-199">For more information, see [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span>  
  
 <span data-ttu-id="f6169-200">MSMQ 受信場所の場合は**のみ**BizTalk グループに複数の BizTalk コンピューター上のホストが表示される、MSMQ を実行して、高可用性を実現することができますし、リモートの MSMQ サーバー上の MSMQ キューから受信します。</span><span class="sxs-lookup"><span data-stu-id="f6169-200">If the MSMQ receive location is **only** receiving from MSMQ queues on a remote MSMQ server, then high availability can be achieved by running the MSMQ receive host on multiple BizTalk computers in the BizTalk group.</span></span>  <span data-ttu-id="f6169-201">MSMQ の高可用性を実現するには、Windows のフェールオーバー クラスタ リングを使用して、リモートの MSMQ サーバーを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f6169-201">To provide high availability for MSMQ, you must ensure the remote MSMQ server is using failover clustering in Windows.</span></span>  <span data-ttu-id="f6169-202">トランザクション キューを使用する場合、リモートの MSMQ サーバーが MSMQ 4.0 (Windows Server 2008) を実行する必要がありますかそれ以降。</span><span class="sxs-lookup"><span data-stu-id="f6169-202">If using transactional queues, the remote MSMQ server must be running MSMQ 4.0 (Windows Server 2008) or above.</span></span>  
  
### <a name="mqseries-adapter"></a><span data-ttu-id="f6169-203">MQSeries アダプタ</span><span class="sxs-lookup"><span data-stu-id="f6169-203">MQSeries Adapter</span></span>  
 <span data-ttu-id="f6169-204">Microsoft BizTalk Adapter for MQSeries は、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] サーバーと IBM MQSeries サーバー間の仲介役として機能します。</span><span class="sxs-lookup"><span data-stu-id="f6169-204">The Microsoft BizTalk Adapter for MQSeries serves as a bridge between [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and IBM MQSeries servers.</span></span> <span data-ttu-id="f6169-205">このアダプターに高可用性ソリューションを適用するには、MQSeries アダプターを実行するホスト インスタンスを複数用意し、MQSeries for Windows のキュー マネージャーをクラスター化し、さらに、MQSeries Server for Windows をクラスター化する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f6169-205">To provide a highly available solution when you use this adapter, you must have multiple instances of the host running the MQSeries adapter, use clustered queue managers in MQSeries for Windows, and cluster the MQSeries Server for Windows.</span></span> <span data-ttu-id="f6169-206">キュー マネージャーのクラスタリングおよび MQSeries Server のクラスタリングの詳細については、IBM WebSphere MQ のドキュメントを参照してください。</span><span class="sxs-lookup"><span data-stu-id="f6169-206">For more information about clustering the queue manager and clustering the MQSeries Server, see the IBM WebSphere MQ documentation.</span></span> <span data-ttu-id="f6169-207">MQSeries アダプターの高可用性を実現する方法の詳細については、Microsoft BizTalk Adapter for MQSeries のヘルプで「High Availability (高可用性)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f6169-207">For more information about making the MQSeries adapter highly available, see "High Availability" in Microsoft BizTalk Adapter for MQSeries Help.</span></span>  
  
### <a name="windows-sharepoint-services-adapter"></a><span data-ttu-id="f6169-208">Windows SharePoint Services アダプタ</span><span class="sxs-lookup"><span data-stu-id="f6169-208">Windows SharePoint Services Adapter</span></span>  
 <span data-ttu-id="f6169-209">Windows SharePoint Services アダプターは、SharePoint コンピューターにインストールされた Windows SharePoint Services Web サービスを呼び出すことによって、SharePoint からメッセージを取得します。</span><span class="sxs-lookup"><span data-stu-id="f6169-209">The Windows SharePoint Services adapter retrieves messages from SharePoint by calling into the Windows SharePoint Services web service installed by BizTalk on the SharePoint machine.</span></span> <span data-ttu-id="f6169-210">このアダプターでは、同じメッセージが異なるホスト インスタンスによって処理されてしまうのを防ぐため、チェックアウト メカニズムが使用されています。</span><span class="sxs-lookup"><span data-stu-id="f6169-210">The adapter uses a checkout mechanism in order to ensure that different host instances will not process the same message.</span></span> <span data-ttu-id="f6169-211">そのため、ホスト インスタンスの追加による受信アダプターのスケールアウトが可能となっています。</span><span class="sxs-lookup"><span data-stu-id="f6169-211">This allows the receive adapter to scale out by adding more host instances.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="f6169-212"> では、同じ HTTP URL (SharePoint の NLB 環境の URL) をサブスクライブする同じ受信場所を、複数のホスト インスタンス上で実行することによって、SharePoint 受信アダプタの高可用性を確保できます。</span><span class="sxs-lookup"><span data-stu-id="f6169-212"> provides high availability for the SharePoint receive adapter by letting you run the same receive locations on multiple host instances that subscribe to the same HTTP URL pointing to a SharePoint NLB installation.</span></span>  
  
### <a name="wcf-nettcp-adapter"></a><span data-ttu-id="f6169-213">Wcf-nettcp アダプター</span><span class="sxs-lookup"><span data-stu-id="f6169-213">WCF-NetTcp Adapter</span></span>  
 <span data-ttu-id="f6169-214">NetTcpBinding では IP レイヤー負荷分散手法を使用して負荷分散できます。</span><span class="sxs-lookup"><span data-stu-id="f6169-214">The NetTcpBinding can be load balanced using IP-layer load balancing techniques.</span></span> <span data-ttu-id="f6169-215">しかし、既定では、NetTcpBinding は接続待ち時間を減らすため、TCP 接続をプールします。</span><span class="sxs-lookup"><span data-stu-id="f6169-215">However, the NetTcpBinding pools TCP connections by default to reduce connection latency.</span></span> <span data-ttu-id="f6169-216">このような最適化は負荷分散の基本メカニズムの支障となります。</span><span class="sxs-lookup"><span data-stu-id="f6169-216">This is an optimization that interferes with the basic mechanism of load balancing.</span></span> <span data-ttu-id="f6169-217">NetTcpBinding を最適化する主要な構成値は、接続プールの設定の一部であるリース タイムアウトです。</span><span class="sxs-lookup"><span data-stu-id="f6169-217">The primary configuration value for optimizing the NetTcpBinding is the lease timeout, which is part of the Connection Pool Settings.</span></span> <span data-ttu-id="f6169-218">接続プールを使用すると、クライアント接続はファーム内の特定のサーバーに関連付けられます。</span><span class="sxs-lookup"><span data-stu-id="f6169-218">Connection pooling causes client connections to become associated to specific servers within the farm.</span></span> <span data-ttu-id="f6169-219">接続の有効期間が増えると (リース タイムアウト設定で制御される要素)、ファームのさまざまなサーバー間の負荷分散が不適切になります。</span><span class="sxs-lookup"><span data-stu-id="f6169-219">As the lifetime of those connections increase (a factor controlled by the lease timeout setting), the load distribution across various servers in the farm becomes unbalanced.</span></span> <span data-ttu-id="f6169-220">その結果、平均呼び出し時間が増加します。</span><span class="sxs-lookup"><span data-stu-id="f6169-220">As a result the average call time increases.</span></span> <span data-ttu-id="f6169-221">したがって、負荷分散シナリオで NetTcpBinding を使用する場合、バインディングで使用されるリース タイムアウトの既定値を小さくすることを検討してください。</span><span class="sxs-lookup"><span data-stu-id="f6169-221">So when using the NetTcpBinding in load-balanced scenarios, consider reducing the default lease timeout used by the binding.</span></span> <span data-ttu-id="f6169-222">負荷分散シナリオの最初の値として 30 秒のリース タイムアウトは妥当ですが、最適な値はアプリケーションによって異なります。</span><span class="sxs-lookup"><span data-stu-id="f6169-222">A 30-second lease timeout is a reasonable starting point for load-balanced scenarios, although the optimal value is application-dependent.</span></span> <span data-ttu-id="f6169-223">チャネル リース タイムアウトおよびその他のトランスポート クォータの詳細については、「トランスポート クォータ」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f6169-223">For more information about the channel lease timeout and other transport quotas, see Transport Quotas.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f6169-224">参照</span><span class="sxs-lookup"><span data-stu-id="f6169-224">See Also</span></span>  
 [<span data-ttu-id="f6169-225">BizTalk ホストの高可用性</span><span class="sxs-lookup"><span data-stu-id="f6169-225">Providing High Availability for BizTalk Hosts</span></span>](../core/providing-high-availability-for-biztalk-hosts.md)