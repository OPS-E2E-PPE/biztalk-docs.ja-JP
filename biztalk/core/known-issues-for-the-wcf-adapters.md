---
title: "WCF アダプタに関する既知の問題 |Microsoft ドキュメント"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 423c6021-5fb7-48c9-9319-11e7a18c775c
caps.latest.revision: "54"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 26c296dfb2ca1f05a2f403aa31a73b67934fb23a
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/01/2017
---
# <a name="known-issues-for-the-wcf-adapters"></a><span data-ttu-id="97ada-102">WCF アダプタに関する既知の問題</span><span class="sxs-lookup"><span data-stu-id="97ada-102">Known Issues for the WCF Adapters</span></span>
<span data-ttu-id="97ada-103">このトピックでは、BizTalk Server に含まれる WCF アダプターに関する既知の問題について説明します。</span><span class="sxs-lookup"><span data-stu-id="97ada-103">This topic describes the known issues for the WCF adapters included with BizTalk Server.</span></span>  
  
## <a name="a-message-that-fails-in-the-inbound-soap-marshaling-processing-is-not-suspended-in-wcf-receive-adapters"></a><span data-ttu-id="97ada-104">受信 SOAP マーシャリング プロセスでエラーとなったメッセージが WCF 受信アダプターで中断されない</span><span class="sxs-lookup"><span data-stu-id="97ada-104">A message that fails in the inbound SOAP marshaling processing is not suspended in WCF receive adapters</span></span>  
 <span data-ttu-id="97ada-105">メッセージが WCF 受信アダプターに到着すると、WCF アダプターは受信 SOAP メッセージから BizTalk メッセージを作成し、この BizTalk メッセージをエンドポイント マネージャーによって管理されるトランスポート プロキシに渡します。</span><span class="sxs-lookup"><span data-stu-id="97ada-105">When a message arrives at a WCF receive adapter, the WCF adapter creates a BizTalk message from the incoming SOAP message, and then passes the BizTalk message to the transport proxy, which is managed by the Endpoint Manager.</span></span> <span data-ttu-id="97ada-106">BizTalk メッセージの作成中にアダプターが SOAP エンベロープと本文の読み取りに失敗した場合でも、アダプターは非キャッシュで順方向専用の高速リーダーを使用して SOAP メッセージにアクセスするので、メッセージは中断されません。</span><span class="sxs-lookup"><span data-stu-id="97ada-106">If the adapter fails to read the SOAP envelope and body while creating the BizTalk message, the message is not suspended because the adapter uses the fast, non-cached, and forward-only reader to access the SOAP message.</span></span>  
  
 <span data-ttu-id="97ada-107">失敗したメッセージのイベント ログを確認してください。</span><span class="sxs-lookup"><span data-stu-id="97ada-107">You should check the event log for the failed message.</span></span> <span data-ttu-id="97ada-108">たとえばのボディ パス式を使用することができます、**メッセージ** タブで、WCF アダプターを介して受信 SOAP メッセージから受信 BizTalk メッセージ本文を作成する方法を指定する WCF アダプター トランスポートのプロパティ ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="97ada-108">For example, you can use a body path expression on the **Messages** tab in the WCF adapter transport properties dialog box to specify how to create the inbound BizTalk message body from a SOAP message incoming through the WCF adapter.</span></span> <span data-ttu-id="97ada-109">受信 SOAP メッセージに無効なボディ パス式が入力された場合、**メッセージ** タブで、アダプターは BizTalk メッセージの作成に失敗し、受信メッセージを中断できません。</span><span class="sxs-lookup"><span data-stu-id="97ada-109">When an invalid body path expression for the incoming SOAP message is supplied on the **Messages** tab, the adapter fails to create the BizTalk message and cannot suspend the incoming message.</span></span> <span data-ttu-id="97ada-110">ボディ パス式を使用する方法について、**メッセージ** タブを参照してください[WCF アダプタのメッセージの本文を指定する](../core/specifying-the-message-body-for-the-wcf-adapters.md)です。</span><span class="sxs-lookup"><span data-stu-id="97ada-110">For more information about how to use the body path expression on the **Messages** tab, see [Specifying the Message Body for the WCF Adapters](../core/specifying-the-message-body-for-the-wcf-adapters.md).</span></span>  
  
 <span data-ttu-id="97ada-111">次の図に示しています、**メッセージ** タブの受信 SOAP メッセージから受信 BizTalk メッセージを作成する方法を指定することができます。</span><span class="sxs-lookup"><span data-stu-id="97ada-111">The following figure shows the **Messages** tab on which you can specify how to create inbound BizTalk messages from the incoming SOAP messages.</span></span>  
  
## <a name="a-message-that-fails-in-the-inbound-soap-marshaling-processing-is-not-suspended-in-wcf-send-adapters"></a><span data-ttu-id="97ada-112">受信 SOAP マーシャリング プロセスでエラーとなったメッセージが WCF 送信アダプターで中断されない</span><span class="sxs-lookup"><span data-stu-id="97ada-112">A message that fails in the inbound SOAP marshaling processing is not suspended in WCF send adapters</span></span>  
 <span data-ttu-id="97ada-113">送信請求 - 応答の WCF 送信ポートは、WCF メッセージを応答メッセージとして受信できます。</span><span class="sxs-lookup"><span data-stu-id="97ada-113">The solicit-response WCF send port can receive a WCF message as a response message.</span></span> <span data-ttu-id="97ada-114">メッセージが WCF 送信アダプターに到着すると、WCF アダプターは受信 SOAP メッセージから BizTalk メッセージを作成し、この BizTalk メッセージをエンドポイント マネージャーによって管理されるトランスポート プロキシに渡します。</span><span class="sxs-lookup"><span data-stu-id="97ada-114">When the message arrives at the WCF send adapter, the WCF adapter creates the BizTalk message from the incoming SOAP message, and then passes the BizTalk message to the transport proxy, which is managed by the Endpoint Manager.</span></span> <span data-ttu-id="97ada-115">BizTalk メッセージの作成中にアダプターが SOAP エンベロープと本文の読み取りに失敗した場合でも、アダプターは非キャッシュで順方向専用の高速リーダーを使用して SOAP メッセージにアクセスするので、メッセージは中断されません。</span><span class="sxs-lookup"><span data-stu-id="97ada-115">If the adapter fails to read the SOAP envelope and body while creating the BizTalk message, the message is not suspended because the adapter uses the fast, non-cached, and forward-only reader to access the SOAP message.</span></span>  
  
 <span data-ttu-id="97ada-116">失敗したメッセージのイベント ログを確認してください。</span><span class="sxs-lookup"><span data-stu-id="97ada-116">You should check the event log for the failed message.</span></span> <span data-ttu-id="97ada-117">たとえばの XPath 式を使用することができます、**メッセージ** タブで、WCF アダプターを介して受信 SOAP メッセージから受信 BizTalk メッセージ本文を作成する方法を指定する WCF アダプター トランスポートのプロパティ ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="97ada-117">For example, you can use an XPath expression on the **Messages** tab in the WCF adapter transport properties dialog box to specify how to create the inbound BizTalk message body from a SOAP message incoming through the WCF adapter.</span></span> <span data-ttu-id="97ada-118">受信 SOAP メッセージの無効な XPath 式が入力された場合、**メッセージ** タブで、アダプターは BizTalk メッセージの作成に失敗し、受信メッセージを中断できません。</span><span class="sxs-lookup"><span data-stu-id="97ada-118">When an invalid XPath expression for the incoming SOAP message is supplied on the **Messages** tab, the adapter fails to create the BizTalk message and cannot suspend the incoming message.</span></span> <span data-ttu-id="97ada-119">XPath 式を使用する方法について、**メッセージ** タブを参照してください[WCF アダプタのメッセージの本文を指定する](../core/specifying-the-message-body-for-the-wcf-adapters.md)です。</span><span class="sxs-lookup"><span data-stu-id="97ada-119">For more information about how to use the XPath expression on the **Messages** tab, see [Specifying the Message Body for the WCF Adapters](../core/specifying-the-message-body-for-the-wcf-adapters.md).</span></span>  
  
 <span data-ttu-id="97ada-120">次の図に示しています、**メッセージ**例として、Wcf-netnamedpipe 送信アダプターのタブです。</span><span class="sxs-lookup"><span data-stu-id="97ada-120">The following figure shows the **Messages** tab of the WCF-NetNamedPipe send adapter as an example.</span></span>  
  
 <span data-ttu-id="97ada-121">![[メッセージ] タブ、WCF 送信アダプタ](../core/media/54623ccf-49a9-4b6a-9487-da0d94bab64d.gif "54623ccf-49a9-4b6a-9487-da0d94bab64d")</span><span class="sxs-lookup"><span data-stu-id="97ada-121">![The Messages tab in the WCF send adapters](../core/media/54623ccf-49a9-4b6a-9487-da0d94bab64d.gif "54623ccf-49a9-4b6a-9487-da0d94bab64d")</span></span>  
  
## <a name="messages-can-be-lost-when-using-onewaybindingelement-in-a-two-way-transport-with-custom-binding-in-non-transactional-wcf-receive-locations"></a><span data-ttu-id="97ada-122">トランザクションではない WCF 受信場所においてカスタム バインドされた双方向トランスポートで OneWayBindingElement を使用すると、メッセージが失われることがある</span><span class="sxs-lookup"><span data-stu-id="97ada-122">Messages can be lost when using OneWayBindingElement in a two-way transport with custom binding in non-transactional WCF receive locations</span></span>  
 <span data-ttu-id="97ada-123">双方向通信では、WCF アダプターは、メッセージ ボックス データベースにメッセージが保存されるまで応答を返します。</span><span class="sxs-lookup"><span data-stu-id="97ada-123">In a two-way communication, WCF adapters will send the response back until the messages have been persisted in the MessageBox database.</span></span> <span data-ttu-id="97ada-124">ただしを使用して**OneWayBindingElement** WCF アダプターに受信したメッセージをディスパッチする直前にダミーの応答が生成されます。</span><span class="sxs-lookup"><span data-stu-id="97ada-124">However, using **OneWayBindingElement** generates a dummy response immediately before dispatching the received message to the WCF adapter.</span></span> <span data-ttu-id="97ada-125">そのため、使用してカスタム バインドを構成する場合、 **OneWayBindingElement**非トランザクションで双方向トランスポートのチャネル スタック内の 受信場所、WCF アダプターは、処理、受信したため、メッセージが失われることができます一方向のメッセージです。</span><span class="sxs-lookup"><span data-stu-id="97ada-125">Therefore, if you configure a custom binding with a **OneWayBindingElement** in the channel stack for two-way transport in non-transactional receive locations, messages can be lost because the WCF adapters process the received messages in the one-way fashion.</span></span>  
  
## <a name="default-values-of-the-readerquotas-attributes-in-the-wcf-custom-and-wcf-customisolated-transport-properties-dialog-boxes-are-used-when-constructing-the-bindings"></a><span data-ttu-id="97ada-126">WCF-Custom および WCF-CustomIsolated トランスポート プロパティのダイアログ ボックスにある ReaderQuotas 属性の既定値が、バインドを構築するときに使用される</span><span class="sxs-lookup"><span data-stu-id="97ada-126">Default values of the ReaderQuotas attributes in the WCF-Custom and WCF-CustomIsolated transport properties dialog boxes are used when constructing the bindings</span></span>  
 <span data-ttu-id="97ada-127">Wcf-custom および Wcf-customisolated トランスポートのプロパティ ダイアログ ボックス、 **ReaderQuotas**属性値が 0 と表示されます。</span><span class="sxs-lookup"><span data-stu-id="97ada-127">In the WCF-Custom and WCF-CustomIsolated transport properties dialog boxes, the **ReaderQuotas** attribute values are shown as zero.</span></span> <span data-ttu-id="97ada-128">ただし、バインドを構築するときには、次の値が使用されます。</span><span class="sxs-lookup"><span data-stu-id="97ada-128">However, when constructing the bindings, the following values are used:</span></span>  
  
|<span data-ttu-id="97ada-129">属性</span><span class="sxs-lookup"><span data-stu-id="97ada-129">Attribute</span></span>|<span data-ttu-id="97ada-130">Description</span><span class="sxs-lookup"><span data-stu-id="97ada-130">Description</span></span>|<span data-ttu-id="97ada-131">値</span><span class="sxs-lookup"><span data-stu-id="97ada-131">Value</span></span>|  
|---------------|-----------------|-----------|  
|<span data-ttu-id="97ada-132">maxArrayLength</span><span class="sxs-lookup"><span data-stu-id="97ada-132">maxArrayLength</span></span>|<span data-ttu-id="97ada-133">許容される配列の長さの最大値を指定する正の整数。</span><span class="sxs-lookup"><span data-stu-id="97ada-133">A positive integer that specifies the maximum allowed array length.</span></span>|<span data-ttu-id="97ada-134">16384</span><span class="sxs-lookup"><span data-stu-id="97ada-134">16384</span></span>|  
|<span data-ttu-id="97ada-135">maxBytesPerRead</span><span class="sxs-lookup"><span data-stu-id="97ada-135">maxBytesPerRead</span></span>|<span data-ttu-id="97ada-136">読み取りごとに返される最大許容サイズ (バイト単位) を指定する正の整数。</span><span class="sxs-lookup"><span data-stu-id="97ada-136">A positive integer that specifies the maximum allowed bytes returned per read.</span></span>|<span data-ttu-id="97ada-137">4096</span><span class="sxs-lookup"><span data-stu-id="97ada-137">4096</span></span>|  
|<span data-ttu-id="97ada-138">maxDepth</span><span class="sxs-lookup"><span data-stu-id="97ada-138">maxDepth</span></span>|<span data-ttu-id="97ada-139">読み取りごとにネストされるノードの深さの最大値を指定する正の整数。</span><span class="sxs-lookup"><span data-stu-id="97ada-139">A positive integer that specifies the maximum nested node depth per read.</span></span>|<span data-ttu-id="97ada-140">32</span><span class="sxs-lookup"><span data-stu-id="97ada-140">32</span></span>|  
|<span data-ttu-id="97ada-141">maxNameTableCharCount</span><span class="sxs-lookup"><span data-stu-id="97ada-141">maxNameTableCharCount</span></span>|<span data-ttu-id="97ada-142">テーブル名に使用できる最大文字数を指定する正の整数。</span><span class="sxs-lookup"><span data-stu-id="97ada-142">A positive integer that specifies the maximum characters allowed in a table name.</span></span>|<span data-ttu-id="97ada-143">16384</span><span class="sxs-lookup"><span data-stu-id="97ada-143">16384</span></span>|  
|<span data-ttu-id="97ada-144">maxStringContentLength</span><span class="sxs-lookup"><span data-stu-id="97ada-144">maxStringContentLength</span></span>|<span data-ttu-id="97ada-145">XML 要素のコンテンツに使用できる最大文字数を指定する正の整数。</span><span class="sxs-lookup"><span data-stu-id="97ada-145">A positive integer that specifies the maximum characters allowed in XML element content.</span></span>|<span data-ttu-id="97ada-146">8192</span><span class="sxs-lookup"><span data-stu-id="97ada-146">8192</span></span>|  
  
## <a name="the-wcf-receive-locations-may-be-disabled-if-you-change-the-wcf-adapter-type-and-keep-the-same-address"></a><span data-ttu-id="97ada-147">WCF アダプターの種類を変更し、同じアドレスを維持すると、WCF 受信場所が無効になる場合がある</span><span class="sxs-lookup"><span data-stu-id="97ada-147">The WCF receive locations may be disabled if you change the WCF adapter type and keep the same address</span></span>  
 <span data-ttu-id="97ada-148">アダプターの種類を変更する場合: たとえば、WCF アダプターの種類を Wcf-nettcp から NetTcp バインドされた Wcf-custom に変更 — と同じアドレスを保持する、キャッシュの問題により、エンドポイント マネージャーで、受信場所を無効にすることがあります。</span><span class="sxs-lookup"><span data-stu-id="97ada-148">If you change the adapter type—for example, change the WCF adapter type from WCF-NetTcp to WCF-Custom with NetTcp Binding—and keep the same address, the receive location may be disabled because of the caching problem in the Endpoint Manager.</span></span> <span data-ttu-id="97ada-149">この問題を回避するには、次のいずれかを実行します。</span><span class="sxs-lookup"><span data-stu-id="97ada-149">To work around this, you can do either of the following:</span></span>  
  
-   <span data-ttu-id="97ada-150">BTSNTSvc サービスを再起動します。</span><span class="sxs-lookup"><span data-stu-id="97ada-150">Restart the BTSNTSvc service.</span></span>  
  
-   <span data-ttu-id="97ada-151">URI を別のアドレスに変更し、保存してから、元のアドレスに戻して、再度保存します。</span><span class="sxs-lookup"><span data-stu-id="97ada-151">Change the URI to a different address and save it, and then change the URI back to the original address and save it again.</span></span>  
  
## <a name="the-wcf-action-set-in-the-orchestration-does-not-override-the-action-setting-in-the-static-send-port"></a><span data-ttu-id="97ada-152">オーケストレーションの WCF アクション設定が静的送信ポートのアクション設定を上書きしない</span><span class="sxs-lookup"><span data-stu-id="97ada-152">The WCF action set in the orchestration does not override the action setting in the static send port</span></span>  
 <span data-ttu-id="97ada-153">設定した場合、 **WCF です。アクション**オーケストレーションのコンテキスト プロパティのままにする必要があります、**アクション**WCF アダプター トランスポートのプロパティ ダイアログ ボックスでフィールドを空白。</span><span class="sxs-lookup"><span data-stu-id="97ada-153">If you set the **WCF.Action** context property in the orchestration, you need to leave the **Action** field blank in the WCF adapter transport properties dialog box.</span></span> <span data-ttu-id="97ada-154">また、静的送信ポートでアクションを指定した場合、 **WCF です。アクション**オーケストレーションで設定したコンテキスト プロパティは、静的送信ポートで設定した値によって上書きされます。</span><span class="sxs-lookup"><span data-stu-id="97ada-154">If you also specify an action in the static send port, the **WCF.Action** context property you set in the orchestration will be overridden by the value you set in the static send port.</span></span>  
  
## <a name="propagating-a-fault-message-is-not-supported-in-the-transactional-send"></a><span data-ttu-id="97ada-155">エラー メッセージの伝達がトランザクション送信でサポートされない</span><span class="sxs-lookup"><span data-stu-id="97ada-155">Propagating a fault message is not supported in the transactional send</span></span>  
 <span data-ttu-id="97ada-156">**エラー メッセージを伝達**送信請求-応答送信ポートのオプションでは、サブスクライブしているアプリケーションへの送信処理に失敗したメッセージをルーティングすることができます。</span><span class="sxs-lookup"><span data-stu-id="97ada-156">The **Propagate fault message** option in the solicit-response send ports allows you to route the messages that fail the outbound processing to a subscribing application.</span></span> <span data-ttu-id="97ada-157">ただし場合、**トランザクションを有効にする** チェック ボックスがトランスポートのプロパティ ダイアログ ボックスも選択されていると、トランザクションは中止またはできなくなる場合、エラー応答がアダプターに到着すると、することはできませんに反映されるまで、任意のサブスクライブしているアプリケーションへのエラー メッセージ</span><span class="sxs-lookup"><span data-stu-id="97ada-157">However, if the **Enable transactions** check box is also selected in the transport properties dialog box and the transaction is aborted or not usable when the fault response arrives to the adapter, you will not be able to propagate the fault messages to any subscribing applications</span></span>  
  
## <a name="the-msmq-cluster-resource-group-needs-to-be-restarted-before-restarting-the-biztalk-host-cluster-resource-group-during-the-cluster-failover"></a><span data-ttu-id="97ada-158">クラスターのフェールオーバー時に、BizTalk ホストのクラスター リソース グループを再起動する前に MSMQ クラスター リソース グループを再起動する必要がある</span><span class="sxs-lookup"><span data-stu-id="97ada-158">The MSMQ cluster resource group needs to be restarted before restarting the BizTalk Host cluster resource group during the cluster failover</span></span>  
 <span data-ttu-id="97ada-159">フェールオーバー クラスターのシナリオでは、フェールオーバーが発生したとき、BizTalk ホストのクラスター リソース グループを再起動する前に MSMQ クラスター リソース グループを再起動する必要があります。</span><span class="sxs-lookup"><span data-stu-id="97ada-159">In a failover cluster scenario, when a failover is taking place, the MSMQ cluster resource group needs to be restarted before restarting the BizTalk Host cluster resource group.</span></span> <span data-ttu-id="97ada-160">この操作を行わないと、MSMQ 受信場所が無効になる場合があります。</span><span class="sxs-lookup"><span data-stu-id="97ada-160">If you fail to do so, the MSMQ receive locations may be disabled.</span></span> <span data-ttu-id="97ada-161">この問題を回避するには、BizTalk ホストのクラスター リソース グループが MSMQ クラスター リソース グループに従属するように設定して、BizTalk ホストのクラスター リソース グループより MSMQ クラスター リソース グループが先に起動するように指定できます。</span><span class="sxs-lookup"><span data-stu-id="97ada-161">To work around this issue, you can make the BizTalk Host cluster resource group dependent on the MSMQ cluster resource group to ensure that the MSMQ cluster resource group starts before the BizTalk Host cluster resource group.</span></span> <span data-ttu-id="97ada-162">または、BizTalk ホストのクラスター リソース グループを再起動して、この問題を回避することもできます。</span><span class="sxs-lookup"><span data-stu-id="97ada-162">Alternatively, you can restart the BizTalk Host cluster resource group to work around this issue.</span></span>  
  
## <a name="you-receive-an-error-when-sending-messages-to-a-wcf-service-that-uses-wsfederationhttpbinding-in-the-endpoint"></a><span data-ttu-id="97ada-163">エンドポイントで wsFederationHttpBinding を使用する WCF サービスにメッセージを送信すると、エラーが表示される</span><span class="sxs-lookup"><span data-stu-id="97ada-163">You receive an error when sending messages to a WCF service that uses wsFederationHttpBinding in the endpoint</span></span>  
 <span data-ttu-id="97ada-164">次のようなエラーが表示されます。</span><span class="sxs-lookup"><span data-stu-id="97ada-164">You receive an error similar to the following:</span></span>  
  
```  
The adapter failed to transmit message going to send port "MySendPort" with URL "http://localohost/MywsFedHttp". It will be retransmitted after the retry interval specified for this Send Port. Details:"The channel is configured to use interactive initializer 'System.ServiceModel.Security.InfocardInteractiveChannelInitializer', but the channel was Opened without calling DisplayInitializationUI.  Call DisplayInitializationUI before calling Open or other methods on this channel.".  
```  
  
 <span data-ttu-id="97ada-165">この動作は仕様による結果です。</span><span class="sxs-lookup"><span data-stu-id="97ada-165">This behavior is by design.</span></span> <span data-ttu-id="97ada-166">WCF アダプタを使用している WCF サービスにメッセージを送信できません**wsFederationHttpBinding**エンドポイントにします。</span><span class="sxs-lookup"><span data-stu-id="97ada-166">WCF adapters cannot send messages to the WCF services that are using **wsFederationHttpBinding** in their endpoints.</span></span>  
  
## <a name="the-biztalk-wcf-service-consuming-wizard-does-not-enable-you-to-select-message-types-or-port-types-from-the-wsdl"></a><span data-ttu-id="97ada-167">BizTalk WCF サービス使用ウィザードで、WSDL からメッセージの種類またはポートの種類を選択できない</span><span class="sxs-lookup"><span data-stu-id="97ada-167">The BizTalk WCF Service Consuming Wizard does not enable you to select message types or port types from the WSDL</span></span>  
 <span data-ttu-id="97ada-168">BizTalk WCF サービス使用ウィザードでは、WCF サービスをインポートするときに、WSDL からメッセージの種類またはポートの種類を選択できません。</span><span class="sxs-lookup"><span data-stu-id="97ada-168">The BizTalk WCF Service Consuming Wizard does not enable you to select message types or port types from the WSDL when importing the WCF services.</span></span> <span data-ttu-id="97ada-169">この制限を回避するには、次のコードを使用してスキーマを取得し、必要なスキーマを BizTalk プロジェクトに追加します。</span><span class="sxs-lookup"><span data-stu-id="97ada-169">To work around this limitation, you can use the following code to obtain the schemas and then add the desired schemas to your BizTalk projects:</span></span>  
  
```  
svcutil.exe /t:metadata http://service/metadataendpoint  
```  
  
## <a name="the-biztalk-wcf-service-consuming-wizard-does-not-allow-the-combination-of-one-way-and-request-response-operations"></a><span data-ttu-id="97ada-170">BizTalk WCF サービス使用ウィザードで、一方向の操作と要求 - 応答操作の組み合わせを実行できない</span><span class="sxs-lookup"><span data-stu-id="97ada-170">The BizTalk WCF Service Consuming Wizard does not allow the combination of one-way and request-response operations</span></span>  
 <span data-ttu-id="97ada-171">BizTalk WCF サービス使用ウィザードでは、一方向の操作と要求 - 応答操作の組み合わせを持つポートの種類をインポートできません。</span><span class="sxs-lookup"><span data-stu-id="97ada-171">The BizTalk WCF Service Consuming Wizard does not allow you to import the port types that have a combination of one-way and request-response operations.</span></span> <span data-ttu-id="97ada-172">この問題を回避するには、ServiceModel メタデータ ユーティリティ ツールを使用して、ポートの種類を生成します。</span><span class="sxs-lookup"><span data-stu-id="97ada-172">To work around this, you can use the ServiceModel Metadata Utility Tool to generate the port types.</span></span>  
  
## <a name="the-biztalk-wcf-service-consuming-wizard-does-not-allow-you-to-set-certificate-credentials-when-retrieving-the-wsdl"></a><span data-ttu-id="97ada-173">BizTalk WCF サービス使用ウィザードで、WSDL を取得するときに証明書の資格情報を設定できない</span><span class="sxs-lookup"><span data-stu-id="97ada-173">The BizTalk WCF Service Consuming Wizard does not allow you to set certificate credentials when retrieving the WSDL</span></span>  
 <span data-ttu-id="97ada-174">BizTalk WCF サービス使用ウィザードでは、WSDL を取得するときに証明書の資格情報を設定することはできません。</span><span class="sxs-lookup"><span data-stu-id="97ada-174">The BizTalk WCF Service Consuming Wizard does not allow you to set certificate credentials when retrieving the WSDL.</span></span> <span data-ttu-id="97ada-175">この問題を回避するには、は、ServiceModel メタデータ ユーティリティ ツールを使用するには、WSDL の生成にして、証明書資格情報で使用する WCF サービスからの XSD ファイルは、svcutil.exe.config ファイルで設定し、し、BizTalk WCF サービスにインポート選択してウィザードを使用**メタデータ ファイル (WSDL と XSD)**オプション、**メタデータ ソース**ページ。</span><span class="sxs-lookup"><span data-stu-id="97ada-175">To work around this, you can use the ServiceModel Metadata Utility Tool to generate the WSDL and XSD files from the WCF services you wish to consume with the certificate credentials set in the svcutil.exe.config file, and then import them into the BizTalk WCF Service Consuming Wizard by choosing **Metadata Files (WSDL and XSD)** option in the **Metadata source** page.</span></span>  
  
## <a name="wcf-adapters-do-not-support-one-way-operations"></a><span data-ttu-id="97ada-176">WCF アダプターが一方向の操作をサポートしない</span><span class="sxs-lookup"><span data-stu-id="97ada-176">WCF adapters do not support one-way operations</span></span>  
 <span data-ttu-id="97ada-177">次のようなエラー メッセージ (Wcf-netmsmq 受信アダプター) 以外の WCF アダプタによって公開された WCF サービスの使用時に表示、 **IsOneWay**プロパティに設定されている**true**クライアント側でします。</span><span class="sxs-lookup"><span data-stu-id="97ada-177">You will receive an error message similar to the following when consuming WCF services published with the WCF adapters (except for the WCF-NetMsmq receive adapter) if the **IsOneWay** property is set to **true** at client side.</span></span> <span data-ttu-id="97ada-178">これは、ため、 **System.ServiceModel.OperationContractAttribute.IsOneWay** (Wcf-netmsmq によって公開されたサービスの受信アダプターを除く)、WCF アダプタによって公開された WCF サービスのプロパティが**false**一方向の受信場所に対してもします。</span><span class="sxs-lookup"><span data-stu-id="97ada-178">This is because the **System.ServiceModel.OperationContractAttribute.IsOneWay** property of WCF services published with the WCF adapters (except for services published with the WCF-NetMsmq receive adapter) is set to **false** even for the one-way receive locations.</span></span>  
  
```  
The channel received an unexpected input message while closing. Your Channel.Close() calls are not synchronized.  
```  
  
 <span data-ttu-id="97ada-179">指定された WCF サービスを使用するときに、次のようなエラー メッセージが表示されます、 **IsOneWay**プロパティに設定**true**です。</span><span class="sxs-lookup"><span data-stu-id="97ada-179">You will receive an error message similar to the following when consuming the WCF services specified with the **IsOneWay** property set to **true**.</span></span> <span data-ttu-id="97ada-180">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] から送信したメッセージは中断され、再開することができます。</span><span class="sxs-lookup"><span data-stu-id="97ada-180">The messages you sent from [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will be suspended and resumable.</span></span>  
  
```  
The request operation at net.tcp://localhost:8088/MyService/tcp did not receive a reply within timeout 00:01:00.  
```  
  
## <a name="a-memory-leak-may-occur-when-sending-messages-to-non-transactional-msmq-queues-using-wcf-netmsmq-binding"></a><span data-ttu-id="97ada-181">WCF-NetMsmq バインドを使用して、トランザクションではない MSMQ キューにメッセージを送信すると、メモリ リークが発生する場合がある</span><span class="sxs-lookup"><span data-stu-id="97ada-181">A memory leak may occur when sending messages to non-transactional MSMQ queues using WCF-NetMsmq binding</span></span>  
 <span data-ttu-id="97ada-182">WCF-NetMsmq バインドを使用して、トランザクションではない MSMQ キューにメッセージを送信すると、BizTalk NT サービスでメモリ リークが発生する場合があります。</span><span class="sxs-lookup"><span data-stu-id="97ada-182">A memory leak may occur in the BizTalk NT service when sending messages to non-transactional MSMQ queues using WCF-NetMsmq binding.</span></span> <span data-ttu-id="97ada-183">これは、WCF-NetMsmq トランスポートを使用してトランザクションではない MSMQ キューにメッセージを送信する場合、または WCF-Custom トランスポートで netMsmqBinding を使用してトランザクションではない MSMQ キューにメッセージを送信する場合に発生します。</span><span class="sxs-lookup"><span data-stu-id="97ada-183">This may occur when you send messages to a non-transactional MSMQ queue using WCF-NetMsmq transport or when you send messages to a non-transactional MSMQ queue using netMsmqBinding with WCF-Custom transport.</span></span>  
  
 <span data-ttu-id="97ada-184">問題を解決するのには、サポート技術情報の記事 936512 で説明されている .NET Framework 3.0 修正プログラムをインストールする必要があります[http://go.microsoft.com/fwlink/?LinkId=92962](http://go.microsoft.com/fwlink/?LinkId=92962)です。</span><span class="sxs-lookup"><span data-stu-id="97ada-184">To resolve the issue, you must install .NET Framework 3.0 hotfix described in the KB article 936512 at [http://go.microsoft.com/fwlink/?LinkId=92962](http://go.microsoft.com/fwlink/?LinkId=92962).</span></span> <span data-ttu-id="97ada-185">この修正プログラムをインストールした後にシステムを再起動する必要はありませんが、WCF-NetMsmq バインドを使用する送信ポートをホストする BizTalk NT サービスは再起動する必要があります。</span><span class="sxs-lookup"><span data-stu-id="97ada-185">The hotfix does not require a system reboot but it is necessary to restart the BizTalk NT service which hosts the send ports that using WCF-NetMsmq binding.</span></span>  
  
## <a name="you-may-receive-exception-when-communicating-with-apache-web-servers-using-wcf-basichttp-adapter"></a><span data-ttu-id="97ada-186">WCF-BasicHttp アダプターを使用して Apache Web サーバーと通信すると、例外が発生する場合がある</span><span class="sxs-lookup"><span data-stu-id="97ada-186">You may receive exception when communicating with Apache Web servers using WCF-BasicHttp adapter</span></span>  
 <span data-ttu-id="97ada-187">トランスポート セキュリティを備える WCF-BasicHttp アダプターを使用して Apache Web サーバーと通信すると、次のような例外が発生する場合があります。</span><span class="sxs-lookup"><span data-stu-id="97ada-187">When you use WCF-BasicHttp adapter with transport security to communicate with an Apache Web server, you may receive the exception similar to the followings:</span></span>  
  
```  
System.Net.WebException: The underlying connection was closed: An unexpected error occurred on a send.  
System.IO.IOException: Unable to write data to the transport connection: An established connection was aborted by the software in your host machine. System.Net.Sockets.SocketException: An established connection was aborted by the software in your host machine  
```  
  
 <span data-ttu-id="97ada-188">この問題を回避するには、次の手順に従って、WCF-BasicHttp アダプターではなく WCF-Custom アダプターを使用して Apache Web サーバーと通信する必要があります。</span><span class="sxs-lookup"><span data-stu-id="97ada-188">To work around this, you need to use WCF-Custom adapter instead of WCF-BasicHttp adapter to communicate with the Apache Web servers as following:</span></span>  
  
1.  <span data-ttu-id="97ada-189">送信ポートを作成し、トランスポートの種類を設定**Wcf-custom**です。</span><span class="sxs-lookup"><span data-stu-id="97ada-189">Create a send port and set the transport type to **WCF-Custom**.</span></span>  
  
2.  <span data-ttu-id="97ada-190">**Wcf-custom トランスポートのプロパティ** ダイアログ ボックスで、**バインド** タブで  **customBinding**から、**バインディングの種類**ドロップダウン リスト。</span><span class="sxs-lookup"><span data-stu-id="97ada-190">In the **WCF-Custom Transport Properties** dialog box, on the **Binding** tab, select **customBinding** from the **Binding Type** drop-down list.</span></span>  
  
3.  <span data-ttu-id="97ada-191">**CustomeBindingElement**を右クリックして**httpTransport**、クリックして**拡張機能を削除**です。</span><span class="sxs-lookup"><span data-stu-id="97ada-191">Under **CustomeBindingElement**, right-click **httpTransport**, and then click **Remove extension**.</span></span>  
  
4.  <span data-ttu-id="97ada-192">右クリック**CustomeBindingElement**、クリックして**拡張機能を追加**です。</span><span class="sxs-lookup"><span data-stu-id="97ada-192">Right-click **CustomeBindingElement**, and then click **Add extension**.</span></span>  
  
5.  <span data-ttu-id="97ada-193">**バインド要素拡張機能の選択**ダイアログ ボックスで、 **httpTransport**  をクリックし、 **OK**です。</span><span class="sxs-lookup"><span data-stu-id="97ada-193">In the **Select Binding Element Extension** dialog box, select **httpTransport** and then click **OK**.</span></span>  
  
6.  <span data-ttu-id="97ada-194">をクリックして**httpTransport**、し、**構成**の値の設定 ウィンドウで、 **keepAliveEnabled**に**False**です。</span><span class="sxs-lookup"><span data-stu-id="97ada-194">Click **httpTransport**, and then in the **Configuration** pane, set the value of **keepAliveEnabled** to **False**.</span></span>  
  
7.  <span data-ttu-id="97ada-195">をクリックして**textMessageEncoding**、し、**構成**の値の設定 ウィンドウで、 **messageVersion**に`Soap11WSAddressing10`です。</span><span class="sxs-lookup"><span data-stu-id="97ada-195">Click **textMessageEncoding**, and then in the **Configuration** pane, set the value of **messageVersion** to `Soap11WSAddressing10`.</span></span>  
  
8.  <span data-ttu-id="97ada-196">必要に応じて、追加のプロパティを構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="97ada-196">You may need to configure additional properties as needed.</span></span>  
  
## <a name="biztalk-server-does-not-work-with-wcf-clients-that-using-clientviabehavior-for-multiple-hop-conversations"></a><span data-ttu-id="97ada-197">複数ホップの交換に ClientViaBehavior を使用する WCF クライアントで BizTalk Server が動作しない</span><span class="sxs-lookup"><span data-stu-id="97ada-197">BizTalk Server does not work with WCF clients that using ClientViaBehavior for multiple-hop conversations</span></span>  
 <span data-ttu-id="97ada-198">WCF クライアントでは、隣接するネットワーク宛先でメッセージを処理して複数ホップの交換を可能にする場合、呼び出し元のアプリケーションが最終的な宛先を認識する必要がないときには ClientViaBehavior を使用します。</span><span class="sxs-lookup"><span data-stu-id="97ada-198">WCF clients use ClientViaBehavior when the immediate network destination is not the intended processor of the message to enable multiple-hop conversations when the calling application does not necessarily know the ultimate destination.</span></span> <span data-ttu-id="97ada-199">ClientViaBehavior を指定し、To アドレスを [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] が仲介として機能するリモート サービスに設定すると、次のようなエラー メッセージが表示されます。</span><span class="sxs-lookup"><span data-stu-id="97ada-199">If you specify the ClientViaBehavior and set the To address to a remote service where [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will be acting as an intermediary, you will receive the error message similar to the following:</span></span>  
  
```  
The message with To 'net.tcp://localhost:5555/test.svc' cannot be processed at the receiver, due to an AddressFilter mismatch at the EndpointDispatcher. Check that the sender and receiver's EndpointAddresses agree  
```