---
title: WCF アダプターに関する既知の問題 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 423c6021-5fb7-48c9-9319-11e7a18c775c
caps.latest.revision: 54
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 05951b5bfd2f586cdaf88bc11bdf12f505ef15b1
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65330724"
---
# <a name="known-issues-for-the-wcf-adapters"></a><span data-ttu-id="9cfac-102">WCF アダプターに関する既知の問題</span><span class="sxs-lookup"><span data-stu-id="9cfac-102">Known Issues for the WCF Adapters</span></span>
<span data-ttu-id="9cfac-103">このトピックでは、BizTalk Server に含まれている WCF アダプターに関する既知の問題について説明します。</span><span class="sxs-lookup"><span data-stu-id="9cfac-103">This topic describes the known issues for the WCF adapters included with BizTalk Server.</span></span>  
  
## <a name="a-message-that-fails-in-the-inbound-soap-marshaling-processing-is-not-suspended-in-wcf-receive-adapters"></a><span data-ttu-id="9cfac-104">受信 SOAP マーシャ リングの処理に失敗するが、WCF では中断されていないメッセージの受信アダプター</span><span class="sxs-lookup"><span data-stu-id="9cfac-104">A message that fails in the inbound SOAP marshaling processing is not suspended in WCF receive adapters</span></span>  
 <span data-ttu-id="9cfac-105">WCF にメッセージが到着すると、受信アダプター、WCF アダプターは受信 SOAP メッセージから BizTalk メッセージを作成および BizTalk メッセージをエンドポイント マネージャーによって管理されるトランスポート プロキシに渡します。</span><span class="sxs-lookup"><span data-stu-id="9cfac-105">When a message arrives at a WCF receive adapter, the WCF adapter creates a BizTalk message from the incoming SOAP message, and then passes the BizTalk message to the transport proxy, which is managed by the Endpoint Manager.</span></span> <span data-ttu-id="9cfac-106">アダプターは、BizTalk メッセージを作成するときに、SOAP エンベロープと本文の読み取りに失敗した場合、アダプターでは、高速、非キャッシュ、前方参照専用のリーダーを使用して、SOAP メッセージにアクセスするため、メッセージは中断されません。</span><span class="sxs-lookup"><span data-stu-id="9cfac-106">If the adapter fails to read the SOAP envelope and body while creating the BizTalk message, the message is not suspended because the adapter uses the fast, non-cached, and forward-only reader to access the SOAP message.</span></span>  
  
 <span data-ttu-id="9cfac-107">失敗したメッセージのイベント ログを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9cfac-107">You should check the event log for the failed message.</span></span> <span data-ttu-id="9cfac-108">本文のパス式を使用するなど、**メッセージ**WCF アダプターを介して受信 SOAP メッセージから受信 BizTalk メッセージ本文を作成する方法を指定する WCF アダプター トランスポートのプロパティ ダイアログ ボックスのタブ。</span><span class="sxs-lookup"><span data-stu-id="9cfac-108">For example, you can use a body path expression on the **Messages** tab in the WCF adapter transport properties dialog box to specify how to create the inbound BizTalk message body from a SOAP message incoming through the WCF adapter.</span></span> <span data-ttu-id="9cfac-109">上の受信 SOAP メッセージの無効なボディ パス式が指定されると、**メッセージ**] タブの [アダプターの BizTalk メッセージの作成に失敗し、受信メッセージを中断できません。</span><span class="sxs-lookup"><span data-stu-id="9cfac-109">When an invalid body path expression for the incoming SOAP message is supplied on the **Messages** tab, the adapter fails to create the BizTalk message and cannot suspend the incoming message.</span></span> <span data-ttu-id="9cfac-110">ボディ パス式を使用する方法について、**メッセージ** タブを参照してください[WCF アダプタのメッセージ本文の指定](../core/specifying-the-message-body-for-the-wcf-adapters.md)します。</span><span class="sxs-lookup"><span data-stu-id="9cfac-110">For more information about how to use the body path expression on the **Messages** tab, see [Specifying the Message Body for the WCF Adapters](../core/specifying-the-message-body-for-the-wcf-adapters.md).</span></span>  
  
 <span data-ttu-id="9cfac-111">次に示します、**メッセージ** タブの受信 SOAP メッセージから受信 BizTalk メッセージを作成する方法を指定できます。</span><span class="sxs-lookup"><span data-stu-id="9cfac-111">The following figure shows the **Messages** tab on which you can specify how to create inbound BizTalk messages from the incoming SOAP messages.</span></span>  
  
## <a name="a-message-that-fails-in-the-inbound-soap-marshaling-processing-is-not-suspended-in-wcf-send-adapters"></a><span data-ttu-id="9cfac-112">WCF 送信アダプタの受信 SOAP マーシャ リング プロセスで失敗したメッセージが中断されていません。</span><span class="sxs-lookup"><span data-stu-id="9cfac-112">A message that fails in the inbound SOAP marshaling processing is not suspended in WCF send adapters</span></span>  
 <span data-ttu-id="9cfac-113">送信請求-応答 WCF 送信ポートは、応答メッセージとして、WCF メッセージを受信できます。</span><span class="sxs-lookup"><span data-stu-id="9cfac-113">The solicit-response WCF send port can receive a WCF message as a response message.</span></span> <span data-ttu-id="9cfac-114">メッセージが到着すると、WCF 送信アダプターは、WCF アダプターは受信 SOAP メッセージから BizTalk メッセージを作成および BizTalk メッセージをエンドポイント マネージャーによって管理されるトランスポート プロキシに渡します。</span><span class="sxs-lookup"><span data-stu-id="9cfac-114">When the message arrives at the WCF send adapter, the WCF adapter creates the BizTalk message from the incoming SOAP message, and then passes the BizTalk message to the transport proxy, which is managed by the Endpoint Manager.</span></span> <span data-ttu-id="9cfac-115">アダプターは、BizTalk メッセージを作成するときに、SOAP エンベロープと本文の読み取りに失敗した場合、アダプターでは、高速、非キャッシュ、前方参照専用のリーダーを使用して、SOAP メッセージにアクセスするため、メッセージは中断されません。</span><span class="sxs-lookup"><span data-stu-id="9cfac-115">If the adapter fails to read the SOAP envelope and body while creating the BizTalk message, the message is not suspended because the adapter uses the fast, non-cached, and forward-only reader to access the SOAP message.</span></span>  
  
 <span data-ttu-id="9cfac-116">失敗したメッセージのイベント ログを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9cfac-116">You should check the event log for the failed message.</span></span> <span data-ttu-id="9cfac-117">XPath 式を使用するなど、**メッセージ**WCF アダプターを介して受信 SOAP メッセージから受信 BizTalk メッセージ本文を作成する方法を指定する WCF アダプター トランスポートのプロパティ ダイアログ ボックスのタブ。</span><span class="sxs-lookup"><span data-stu-id="9cfac-117">For example, you can use an XPath expression on the **Messages** tab in the WCF adapter transport properties dialog box to specify how to create the inbound BizTalk message body from a SOAP message incoming through the WCF adapter.</span></span> <span data-ttu-id="9cfac-118">受信 SOAP メッセージの無効な XPath 式が入力された場合、**メッセージ**] タブの [アダプターの BizTalk メッセージの作成に失敗し、受信メッセージを中断できません。</span><span class="sxs-lookup"><span data-stu-id="9cfac-118">When an invalid XPath expression for the incoming SOAP message is supplied on the **Messages** tab, the adapter fails to create the BizTalk message and cannot suspend the incoming message.</span></span> <span data-ttu-id="9cfac-119">XPath 式を使用する方法について、**メッセージ** タブを参照してください[WCF アダプタのメッセージ本文の指定](../core/specifying-the-message-body-for-the-wcf-adapters.md)します。</span><span class="sxs-lookup"><span data-stu-id="9cfac-119">For more information about how to use the XPath expression on the **Messages** tab, see [Specifying the Message Body for the WCF Adapters](../core/specifying-the-message-body-for-the-wcf-adapters.md).</span></span>  
  
 <span data-ttu-id="9cfac-120">次に示します、**メッセージ**例として、Wcf-netnamedpipe 送信アダプターのタブ。</span><span class="sxs-lookup"><span data-stu-id="9cfac-120">The following figure shows the **Messages** tab of the WCF-NetNamedPipe send adapter as an example.</span></span>  
  
 <span data-ttu-id="9cfac-121">![[メッセージ] タブの wcf 送信アダプタ](../core/media/54623ccf-49a9-4b6a-9487-da0d94bab64d.gif "54623ccf-49a9-4b6a-9487-da0d94bab64d")</span><span class="sxs-lookup"><span data-stu-id="9cfac-121">![The Messages tab in the WCF send adapters](../core/media/54623ccf-49a9-4b6a-9487-da0d94bab64d.gif "54623ccf-49a9-4b6a-9487-da0d94bab64d")</span></span>  
  
## <a name="messages-can-be-lost-when-using-onewaybindingelement-in-a-two-way-transport-with-custom-binding-in-non-transactional-wcf-receive-locations"></a><span data-ttu-id="9cfac-122">ときにメッセージが失われる可能性が非トランザクションの WCF でのカスタム バインドの双方向トランスポートで OneWayBindingElement を使用して受信場所</span><span class="sxs-lookup"><span data-stu-id="9cfac-122">Messages can be lost when using OneWayBindingElement in a two-way transport with custom binding in non-transactional WCF receive locations</span></span>  
 <span data-ttu-id="9cfac-123">双方向の通信で、メッセージがメッセージ ボックス データベースに保存されるまで、WCF アダプターは応答を送信します。</span><span class="sxs-lookup"><span data-stu-id="9cfac-123">In a two-way communication, WCF adapters will send the response back until the messages have been persisted in the MessageBox database.</span></span> <span data-ttu-id="9cfac-124">ただしを使用して**OneWayBindingElement** WCF アダプターに受信したメッセージをディスパッチする直前にダミーの応答が生成されます。</span><span class="sxs-lookup"><span data-stu-id="9cfac-124">However, using **OneWayBindingElement** generates a dummy response immediately before dispatching the received message to the WCF adapter.</span></span> <span data-ttu-id="9cfac-125">そのため、使用して、カスタム バインドを構成する場合、 **OneWayBindingElement**双方向トランスポートで非トランザクションのチャネル スタックの受信場所、WCF アダプターは、処理、受信したため、メッセージが失われることができます一方向のメッセージ。</span><span class="sxs-lookup"><span data-stu-id="9cfac-125">Therefore, if you configure a custom binding with a **OneWayBindingElement** in the channel stack for two-way transport in non-transactional receive locations, messages can be lost because the WCF adapters process the received messages in the one-way fashion.</span></span>  
  
## <a name="default-values-of-the-readerquotas-attributes-in-the-wcf-custom-and-wcf-customisolated-transport-properties-dialog-boxes-are-used-when-constructing-the-bindings"></a><span data-ttu-id="9cfac-126">既定では、Wcf-custom および Wcf-customisolated トランスポート プロパティ ダイアログ ボックスを使用して、バインドを作成するときにある ReaderQuotas 属性の値</span><span class="sxs-lookup"><span data-stu-id="9cfac-126">Default values of the ReaderQuotas attributes in the WCF-Custom and WCF-CustomIsolated transport properties dialog boxes are used when constructing the bindings</span></span>  
 <span data-ttu-id="9cfac-127">Wcf-custom および Wcf-customisolated トランスポートのプロパティ ダイアログ ボックス、 **ReaderQuotas**属性値が 0 と表示されます。</span><span class="sxs-lookup"><span data-stu-id="9cfac-127">In the WCF-Custom and WCF-CustomIsolated transport properties dialog boxes, the **ReaderQuotas** attribute values are shown as zero.</span></span> <span data-ttu-id="9cfac-128">ただし、バインドを作成するときに、次の値が使用されます。</span><span class="sxs-lookup"><span data-stu-id="9cfac-128">However, when constructing the bindings, the following values are used:</span></span>  
  
|<span data-ttu-id="9cfac-129">属性</span><span class="sxs-lookup"><span data-stu-id="9cfac-129">Attribute</span></span>|<span data-ttu-id="9cfac-130">説明</span><span class="sxs-lookup"><span data-stu-id="9cfac-130">Description</span></span>|<span data-ttu-id="9cfac-131">値</span><span class="sxs-lookup"><span data-stu-id="9cfac-131">Value</span></span>|  
|---------------|-----------------|-----------|  
|<span data-ttu-id="9cfac-132">maxArrayLength</span><span class="sxs-lookup"><span data-stu-id="9cfac-132">maxArrayLength</span></span>|<span data-ttu-id="9cfac-133">許容される最大配列長を指定する正の整数。</span><span class="sxs-lookup"><span data-stu-id="9cfac-133">A positive integer that specifies the maximum allowed array length.</span></span>|<span data-ttu-id="9cfac-134">16384</span><span class="sxs-lookup"><span data-stu-id="9cfac-134">16384</span></span>|  
|<span data-ttu-id="9cfac-135">MaxBytesPerRead</span><span class="sxs-lookup"><span data-stu-id="9cfac-135">maxBytesPerRead</span></span>|<span data-ttu-id="9cfac-136">読み取りあたり最大バイト数を指定する正の整数が返されます。</span><span class="sxs-lookup"><span data-stu-id="9cfac-136">A positive integer that specifies the maximum allowed bytes returned per read.</span></span>|<span data-ttu-id="9cfac-137">4096</span><span class="sxs-lookup"><span data-stu-id="9cfac-137">4096</span></span>|  
|<span data-ttu-id="9cfac-138">maxDepth</span><span class="sxs-lookup"><span data-stu-id="9cfac-138">maxDepth</span></span>|<span data-ttu-id="9cfac-139">読み取りあたりの最大ネスト ノード深度を指定する正の整数。</span><span class="sxs-lookup"><span data-stu-id="9cfac-139">A positive integer that specifies the maximum nested node depth per read.</span></span>|<span data-ttu-id="9cfac-140">32</span><span class="sxs-lookup"><span data-stu-id="9cfac-140">32</span></span>|  
|<span data-ttu-id="9cfac-141">MaxNameTableCharCount</span><span class="sxs-lookup"><span data-stu-id="9cfac-141">maxNameTableCharCount</span></span>|<span data-ttu-id="9cfac-142">テーブル名の最大文字数を指定する正の整数。</span><span class="sxs-lookup"><span data-stu-id="9cfac-142">A positive integer that specifies the maximum characters allowed in a table name.</span></span>|<span data-ttu-id="9cfac-143">16384</span><span class="sxs-lookup"><span data-stu-id="9cfac-143">16384</span></span>|  
|<span data-ttu-id="9cfac-144">maxStringContentLength</span><span class="sxs-lookup"><span data-stu-id="9cfac-144">maxStringContentLength</span></span>|<span data-ttu-id="9cfac-145">XML 要素のコンテンツで許可される最大文字数を指定する正の整数。</span><span class="sxs-lookup"><span data-stu-id="9cfac-145">A positive integer that specifies the maximum characters allowed in XML element content.</span></span>|<span data-ttu-id="9cfac-146">8192</span><span class="sxs-lookup"><span data-stu-id="9cfac-146">8192</span></span>|  
  
## <a name="the-wcf-receive-locations-may-be-disabled-if-you-change-the-wcf-adapter-type-and-keep-the-same-address"></a><span data-ttu-id="9cfac-147">WCF 受信場所、WCF アダプターの種類を変更し、同じアドレスを維持した場合、無効にすることがあります</span><span class="sxs-lookup"><span data-stu-id="9cfac-147">The WCF receive locations may be disabled if you change the WCF adapter type and keep the same address</span></span>  
 <span data-ttu-id="9cfac-148">アダプターの種類を変更する場合: たとえば、WCF アダプターの種類を Wcf-nettcp から NetTcp バインドされた Wcf-custom に変更 — と同じアドレスを維持、エンドポイント マネージャーでのキャッシュの問題により、受信場所を無効にすることがあります。</span><span class="sxs-lookup"><span data-stu-id="9cfac-148">If you change the adapter type—for example, change the WCF adapter type from WCF-NetTcp to WCF-Custom with NetTcp Binding—and keep the same address, the receive location may be disabled because of the caching problem in the Endpoint Manager.</span></span> <span data-ttu-id="9cfac-149">この問題を回避するには、次のいずれかの操作を行います。</span><span class="sxs-lookup"><span data-stu-id="9cfac-149">To work around this, you can do either of the following:</span></span>  
  
-   <span data-ttu-id="9cfac-150">BTSNTSvc サービスを再起動します。</span><span class="sxs-lookup"><span data-stu-id="9cfac-150">Restart the BTSNTSvc service.</span></span>  
  
-   <span data-ttu-id="9cfac-151">別のアドレスに URI を変更し、保存し、URI を元のアドレスに変更し、もう一度保存します。</span><span class="sxs-lookup"><span data-stu-id="9cfac-151">Change the URI to a different address and save it, and then change the URI back to the original address and save it again.</span></span>  
  
## <a name="the-wcf-action-set-in-the-orchestration-does-not-override-the-action-setting-in-the-static-send-port"></a><span data-ttu-id="9cfac-152">オーケストレーションで設定された WCF アクションでは、静的な送信ポートでアクションの設定は上書きされません。</span><span class="sxs-lookup"><span data-stu-id="9cfac-152">The WCF action set in the orchestration does not override the action setting in the static send port</span></span>  
 <span data-ttu-id="9cfac-153">設定した場合、 **WCF です。アクション**オーケストレーションのコンテキスト プロパティのままにする必要があります、**アクション**WCF アダプター トランスポートのプロパティ ダイアログ ボックスでフィールドを空白。</span><span class="sxs-lookup"><span data-stu-id="9cfac-153">If you set the **WCF.Action** context property in the orchestration, you need to leave the **Action** field blank in the WCF adapter transport properties dialog box.</span></span> <span data-ttu-id="9cfac-154">また、静的送信ポートでアクションを指定した場合、 **WCF です。アクション**オーケストレーションで設定したコンテキスト プロパティは、静的送信ポートで設定した値によって上書きされます。</span><span class="sxs-lookup"><span data-stu-id="9cfac-154">If you also specify an action in the static send port, the **WCF.Action** context property you set in the orchestration will be overridden by the value you set in the static send port.</span></span>  
  
## <a name="propagating-a-fault-message-is-not-supported-in-the-transactional-send"></a><span data-ttu-id="9cfac-155">トランザクション送信でエラー メッセージの伝達はサポートされていません</span><span class="sxs-lookup"><span data-stu-id="9cfac-155">Propagating a fault message is not supported in the transactional send</span></span>  
 <span data-ttu-id="9cfac-156">**エラー メッセージを伝達**送信請求-応答の送信ポートのオプションでは、サブスクライブするアプリケーションの送信処理に失敗したメッセージをルーティングできます。</span><span class="sxs-lookup"><span data-stu-id="9cfac-156">The **Propagate fault message** option in the solicit-response send ports allows you to route the messages that fail the outbound processing to a subscribing application.</span></span> <span data-ttu-id="9cfac-157">ただし場合、**トランザクションを有効にする** チェック ボックスがトランスポートのプロパティ ダイアログ ボックスも選択されていると、トランザクションは中止できる場合もできなくなる場合、エラー応答がアダプターに到着するはしないに反映されるまで、サブスクライブしているアプリケーションへのエラー メッセージ</span><span class="sxs-lookup"><span data-stu-id="9cfac-157">However, if the **Enable transactions** check box is also selected in the transport properties dialog box and the transaction is aborted or not usable when the fault response arrives to the adapter, you will not be able to propagate the fault messages to any subscribing applications</span></span>  
  
## <a name="the-msmq-cluster-resource-group-needs-to-be-restarted-before-restarting-the-biztalk-host-cluster-resource-group-during-the-cluster-failover"></a><span data-ttu-id="9cfac-158">MSMQ クラスター リソース グループがクラスター フェールオーバー中に、BizTalk ホストのクラスター リソース グループを再起動する前に再起動する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9cfac-158">The MSMQ cluster resource group needs to be restarted before restarting the BizTalk Host cluster resource group during the cluster failover</span></span>  
 <span data-ttu-id="9cfac-159">フェールオーバー クラスターのシナリオで、フェールオーバーが行われて、MSMQ クラスター リソース グループは、BizTalk ホストのクラスター リソース グループを再起動する前に再起動しなければ。</span><span class="sxs-lookup"><span data-stu-id="9cfac-159">In a failover cluster scenario, when a failover is taking place, the MSMQ cluster resource group needs to be restarted before restarting the BizTalk Host cluster resource group.</span></span> <span data-ttu-id="9cfac-160">そのため、MSMQ の受信に失敗した場所が無効になっている可能性があります。</span><span class="sxs-lookup"><span data-stu-id="9cfac-160">If you fail to do so, the MSMQ receive locations may be disabled.</span></span> <span data-ttu-id="9cfac-161">この問題を回避するには、行うことができます、BizTalk ホストのクラスター リソース グループの BizTalk ホストのクラスター リソース グループの前に MSMQ クラスター リソース グループが開始されることを確認するには、MSMQ クラスター リソース グループに依存します。</span><span class="sxs-lookup"><span data-stu-id="9cfac-161">To work around this issue, you can make the BizTalk Host cluster resource group dependent on the MSMQ cluster resource group to ensure that the MSMQ cluster resource group starts before the BizTalk Host cluster resource group.</span></span> <span data-ttu-id="9cfac-162">また、この問題を回避するには、BizTalk ホスト クラスター リソース グループを再起動することができます。</span><span class="sxs-lookup"><span data-stu-id="9cfac-162">Alternatively, you can restart the BizTalk Host cluster resource group to work around this issue.</span></span>  
  
## <a name="you-receive-an-error-when-sending-messages-to-a-wcf-service-that-uses-wsfederationhttpbinding-in-the-endpoint"></a><span data-ttu-id="9cfac-163">エンドポイントで wsFederationHttpBinding を使用する WCF サービスにメッセージを送信するときにエラーが表示されます。</span><span class="sxs-lookup"><span data-stu-id="9cfac-163">You receive an error when sending messages to a WCF service that uses wsFederationHttpBinding in the endpoint</span></span>  
 <span data-ttu-id="9cfac-164">次のようなエラーが表示されます。</span><span class="sxs-lookup"><span data-stu-id="9cfac-164">You receive an error similar to the following:</span></span>  
  
```  
The adapter failed to transmit message going to send port "MySendPort" with URL "http://localohost/MywsFedHttp". It will be retransmitted after the retry interval specified for this Send Port. Details:"The channel is configured to use interactive initializer 'System.ServiceModel.Security.InfocardInteractiveChannelInitializer', but the channel was Opened without calling DisplayInitializationUI.  Call DisplayInitializationUI before calling Open or other methods on this channel.".  
```  
  
 <span data-ttu-id="9cfac-165">この動作は仕様による結果です。</span><span class="sxs-lookup"><span data-stu-id="9cfac-165">This behavior is by design.</span></span> <span data-ttu-id="9cfac-166">WCF アダプタを使用している WCF サービスにメッセージを送信できません**wsFederationHttpBinding**でそれらのエンドポイント。</span><span class="sxs-lookup"><span data-stu-id="9cfac-166">WCF adapters cannot send messages to the WCF services that are using **wsFederationHttpBinding** in their endpoints.</span></span>  
  
## <a name="the-biztalk-wcf-service-consuming-wizard-does-not-enable-you-to-select-message-types-or-port-types-from-the-wsdl"></a><span data-ttu-id="9cfac-167">BizTalk WCF サービス使用ウィザードで使用すると、WSDL からメッセージの種類またはポートの種類を選択できません。</span><span class="sxs-lookup"><span data-stu-id="9cfac-167">The BizTalk WCF Service Consuming Wizard does not enable you to select message types or port types from the WSDL</span></span>  
 <span data-ttu-id="9cfac-168">BizTalk WCF サービス使用ウィザードでは、WCF サービスをインポートするときに、WSDL からメッセージの種類またはポートの種類を選択できません。</span><span class="sxs-lookup"><span data-stu-id="9cfac-168">The BizTalk WCF Service Consuming Wizard does not enable you to select message types or port types from the WSDL when importing the WCF services.</span></span> <span data-ttu-id="9cfac-169">この制限を回避するには、スキーマを取得し、BizTalk プロジェクトに必要なスキーマを追加し、次のコードを使用できます。</span><span class="sxs-lookup"><span data-stu-id="9cfac-169">To work around this limitation, you can use the following code to obtain the schemas and then add the desired schemas to your BizTalk projects:</span></span>  
  
```  
svcutil.exe /t:metadata http://service/metadataendpoint  
```  
  
## <a name="the-biztalk-wcf-service-consuming-wizard-does-not-allow-the-combination-of-one-way-and-request-response-operations"></a><span data-ttu-id="9cfac-170">BizTalk WCF サービス使用ウィザードが一方向の組み合わせを許可しないと要求-応答操作</span><span class="sxs-lookup"><span data-stu-id="9cfac-170">The BizTalk WCF Service Consuming Wizard does not allow the combination of one-way and request-response operations</span></span>  
 <span data-ttu-id="9cfac-171">BizTalk WCF サービス使用ウィザードが一方向の組み合わせを持つポートの種類のインポートを許可していないと要求-応答操作。</span><span class="sxs-lookup"><span data-stu-id="9cfac-171">The BizTalk WCF Service Consuming Wizard does not allow you to import the port types that have a combination of one-way and request-response operations.</span></span> <span data-ttu-id="9cfac-172">この問題を回避するのにには、ポートの種類を生成するのに、ServiceModel メタデータ ユーティリティ ツールを使用することができます。</span><span class="sxs-lookup"><span data-stu-id="9cfac-172">To work around this, you can use the ServiceModel Metadata Utility Tool to generate the port types.</span></span>  
  
## <a name="the-biztalk-wcf-service-consuming-wizard-does-not-allow-you-to-set-certificate-credentials-when-retrieving-the-wsdl"></a><span data-ttu-id="9cfac-173">BizTalk WCF サービス使用ウィザードにより、WSDL を取得するときに、証明書資格情報を設定します。</span><span class="sxs-lookup"><span data-stu-id="9cfac-173">The BizTalk WCF Service Consuming Wizard does not allow you to set certificate credentials when retrieving the WSDL</span></span>  
 <span data-ttu-id="9cfac-174">BizTalk WCF サービス使用ウィザードでは、WSDL を取得するときに、証明書資格情報を設定できません。</span><span class="sxs-lookup"><span data-stu-id="9cfac-174">The BizTalk WCF Service Consuming Wizard does not allow you to set certificate credentials when retrieving the WSDL.</span></span> <span data-ttu-id="9cfac-175">この問題を回避するには、は、ServiceModel メタデータ ユーティリティ ツールを使用するには、WSDL を生成して証明書資格情報を使用する WCF サービスからの XSD ファイルは、svcutil.exe.config ファイルで設定し、BizTalk WCF サービスにインポート使用を選択してウィザード**メタデータ ファイル (WSDL と XSD)** オプション、**メタデータ ソース**ページ。</span><span class="sxs-lookup"><span data-stu-id="9cfac-175">To work around this, you can use the ServiceModel Metadata Utility Tool to generate the WSDL and XSD files from the WCF services you wish to consume with the certificate credentials set in the svcutil.exe.config file, and then import them into the BizTalk WCF Service Consuming Wizard by choosing **Metadata Files (WSDL and XSD)** option in the **Metadata source** page.</span></span>  
  
## <a name="wcf-adapters-do-not-support-one-way-operations"></a><span data-ttu-id="9cfac-176">WCF アダプターでは、一方向の操作をサポートしていません</span><span class="sxs-lookup"><span data-stu-id="9cfac-176">WCF adapters do not support one-way operations</span></span>  
 <span data-ttu-id="9cfac-177">場合は、次のようなエラー メッセージ (Wcf-netmsmq 受信アダプター) 以外の WCF アダプターによって公開された WCF サービスの使用時に受信するが、 **IsOneWay**プロパティに設定されて**true**クライアント側でします。</span><span class="sxs-lookup"><span data-stu-id="9cfac-177">You will receive an error message similar to the following when consuming WCF services published with the WCF adapters (except for the WCF-NetMsmq receive adapter) if the **IsOneWay** property is set to **true** at client side.</span></span> <span data-ttu-id="9cfac-178">これは、ため、 **System.ServiceModel.OperationContractAttribute.IsOneWay** にWCFアダプタ(Wcf-netmsmqによって公開されたサービスの受信アダプターを除く)で公開されたWCFサービスのプロパティが設定されて**false**一方向の受信場所に対してもします。</span><span class="sxs-lookup"><span data-stu-id="9cfac-178">This is because the **System.ServiceModel.OperationContractAttribute.IsOneWay** property of WCF services published with the WCF adapters (except for services published with the WCF-NetMsmq receive adapter) is set to **false** even for the one-way receive locations.</span></span>  
  
```  
The channel received an unexpected input message while closing. Your Channel.Close() calls are not synchronized.  
```  
  
 <span data-ttu-id="9cfac-179">指定された WCF サービスを使用するときに、次のようなエラー メッセージが表示されるが、 **IsOneWay**プロパティに設定**true**します。</span><span class="sxs-lookup"><span data-stu-id="9cfac-179">You will receive an error message similar to the following when consuming the WCF services specified with the **IsOneWay** property set to **true**.</span></span> <span data-ttu-id="9cfac-180">送信されたメッセージ[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]一時停止、再開可能になります。</span><span class="sxs-lookup"><span data-stu-id="9cfac-180">The messages you sent from [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will be suspended and resumable.</span></span>  
  
```  
The request operation at net.tcp://localhost:8088/MyService/tcp did not receive a reply within timeout 00:01:00.  
```  
  
## <a name="a-memory-leak-may-occur-when-sending-messages-to-non-transactional-msmq-queues-using-wcf-netmsmq-binding"></a><span data-ttu-id="9cfac-181">Wcf-netmsmq バインドを使用して、非トランザクション MSMQ キューにメッセージを送信するときに、メモリ リークが発生します。</span><span class="sxs-lookup"><span data-stu-id="9cfac-181">A memory leak may occur when sending messages to non-transactional MSMQ queues using WCF-NetMsmq binding</span></span>  
 <span data-ttu-id="9cfac-182">メモリ リークは、BizTalk NT サービスで、Wcf-netmsmq バインドを使用して、非トランザクション MSMQ キューにメッセージを送信するときに発生します。</span><span class="sxs-lookup"><span data-stu-id="9cfac-182">A memory leak may occur in the BizTalk NT service when sending messages to non-transactional MSMQ queues using WCF-NetMsmq binding.</span></span> <span data-ttu-id="9cfac-183">これは、Wcf-netmsmq トランスポートを使用して非トランザクション MSMQ キューにメッセージを送信するとき、または Wcf-custom トランスポートで netMsmqBinding を使用して非トランザクション MSMQ キューにメッセージを送信するときに発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="9cfac-183">This may occur when you send messages to a non-transactional MSMQ queue using WCF-NetMsmq transport or when you send messages to a non-transactional MSMQ queue using netMsmqBinding with WCF-Custom transport.</span></span>  
  
 <span data-ttu-id="9cfac-184">この問題を解決するで KB 記事 936512 で説明されている .NET Framework 3.0 修正プログラムをインストールする必要があります[ http://go.microsoft.com/fwlink/?LinkId=92962](http://go.microsoft.com/fwlink/?LinkId=92962)します。</span><span class="sxs-lookup"><span data-stu-id="9cfac-184">To resolve the issue, you must install .NET Framework 3.0 hotfix described in the KB article 936512 at [http://go.microsoft.com/fwlink/?LinkId=92962](http://go.microsoft.com/fwlink/?LinkId=92962).</span></span> <span data-ttu-id="9cfac-185">修正プログラムでは、システムの再起動は必要ありませんを使用して送信ポートをホストする BizTalk NT サービスを再起動する必要がある、Wcf-netmsmq バインドします。</span><span class="sxs-lookup"><span data-stu-id="9cfac-185">The hotfix does not require a system reboot but it is necessary to restart the BizTalk NT service which hosts the send ports that using WCF-NetMsmq binding.</span></span>  
  
## <a name="you-may-receive-exception-when-communicating-with-apache-web-servers-using-wcf-basichttp-adapter"></a><span data-ttu-id="9cfac-186">Wcf-basichttp アダプターを使用して Apache Web サーバーと通信するときに例外が発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="9cfac-186">You may receive exception when communicating with Apache Web servers using WCF-BasicHttp adapter</span></span>  
 <span data-ttu-id="9cfac-187">使用する場合、Wcf-basichttp アダプタのトランスポート セキュリティには、次のような例外が発生する、Apache Web サーバーと通信します。</span><span class="sxs-lookup"><span data-stu-id="9cfac-187">When you use WCF-BasicHttp adapter with transport security to communicate with an Apache Web server, you may receive the exception similar to the followings:</span></span>  
  
```  
System.Net.WebException: The underlying connection was closed: An unexpected error occurred on a send.  
System.IO.IOException: Unable to write data to the transport connection: An established connection was aborted by the software in your host machine. System.Net.Sockets.SocketException: An established connection was aborted by the software in your host machine  
```  
  
 <span data-ttu-id="9cfac-188">この問題を回避するには、Wcf-basichttp アダプタではなく Wcf-custom アダプタを使用して、次のように Apache Web サーバーと通信する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9cfac-188">To work around this, you need to use WCF-Custom adapter instead of WCF-BasicHttp adapter to communicate with the Apache Web servers as following:</span></span>  
  
1.  <span data-ttu-id="9cfac-189">送信ポートを作成し、トランスポートの種類を設定**Wcf-custom**します。</span><span class="sxs-lookup"><span data-stu-id="9cfac-189">Create a send port and set the transport type to **WCF-Custom**.</span></span>  
  
2.  <span data-ttu-id="9cfac-190">**Wcf-custom トランスポートのプロパティ** ダイアログ ボックスで、**バインド** タブで  **customBinding**から、**バインドの種類**ドロップダウン リスト。</span><span class="sxs-lookup"><span data-stu-id="9cfac-190">In the **WCF-Custom Transport Properties** dialog box, on the **Binding** tab, select **customBinding** from the **Binding Type** drop-down list.</span></span>  
  
3.  <span data-ttu-id="9cfac-191">[ **CustomeBindingElement**を右クリックして**httpTransport**、] をクリックし、**拡張機能を削除**します。</span><span class="sxs-lookup"><span data-stu-id="9cfac-191">Under **CustomeBindingElement**, right-click **httpTransport**, and then click **Remove extension**.</span></span>  
  
4.  <span data-ttu-id="9cfac-192">右クリック**CustomeBindingElement**、 をクリックし、**拡張機能の追加**します。</span><span class="sxs-lookup"><span data-stu-id="9cfac-192">Right-click **CustomeBindingElement**, and then click **Add extension**.</span></span>  
  
5.  <span data-ttu-id="9cfac-193">**バインド要素拡張機能の選択**ダイアログ ボックスで、 **httpTransport**順にクリックします**OK**します。</span><span class="sxs-lookup"><span data-stu-id="9cfac-193">In the **Select Binding Element Extension** dialog box, select **httpTransport** and then click **OK**.</span></span>  
  
6.  <span data-ttu-id="9cfac-194">クリックして**httpTransport**、し、**構成**ペインで、設定の値**keepAliveEnabled**に**False**します。</span><span class="sxs-lookup"><span data-stu-id="9cfac-194">Click **httpTransport**, and then in the **Configuration** pane, set the value of **keepAliveEnabled** to **False**.</span></span>  
  
7.  <span data-ttu-id="9cfac-195">クリックして**textMessageEncoding**、し、**構成**ペインで、設定の値**messageVersion**に`Soap11WSAddressing10`します。</span><span class="sxs-lookup"><span data-stu-id="9cfac-195">Click **textMessageEncoding**, and then in the **Configuration** pane, set the value of **messageVersion** to `Soap11WSAddressing10`.</span></span>  
  
8.  <span data-ttu-id="9cfac-196">必要に応じて、追加のプロパティを構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="9cfac-196">You may need to configure additional properties as needed.</span></span>  
  
## <a name="biztalk-server-does-not-work-with-wcf-clients-that-using-clientviabehavior-for-multiple-hop-conversations"></a><span data-ttu-id="9cfac-197">BizTalk Server では機能しません WCF クライアントを使用して複数ホップの交換に ClientViaBehavior</span><span class="sxs-lookup"><span data-stu-id="9cfac-197">BizTalk Server does not work with WCF clients that using ClientViaBehavior for multiple-hop conversations</span></span>  
 <span data-ttu-id="9cfac-198">WCF クライアントは、直接のネットワーク送信先が想定される呼び出し元のアプリケーションが最終的な送信先を必ずしも判断できない場合は、複数ホップの交換を有効にするメッセージのプロセッサではない場合に、ClientViaBehavior を使用します。</span><span class="sxs-lookup"><span data-stu-id="9cfac-198">WCF clients use ClientViaBehavior when the immediate network destination is not the intended processor of the message to enable multiple-hop conversations when the calling application does not necessarily know the ultimate destination.</span></span> <span data-ttu-id="9cfac-199">ClientViaBehavior を指定し、To アドレスをリモート サービスに設定したかどうか、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]仲介役として機能する、次のようなエラー メッセージが表示されます。</span><span class="sxs-lookup"><span data-stu-id="9cfac-199">If you specify the ClientViaBehavior and set the To address to a remote service where [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will be acting as an intermediary, you will receive the error message similar to the following:</span></span>  
  
```  
The message with To 'net.tcp://localhost:5555/test.svc' cannot be processed at the receiver, due to an AddressFilter mismatch at the EndpointDispatcher. Check that the sender and receiver's EndpointAddresses agree  
```