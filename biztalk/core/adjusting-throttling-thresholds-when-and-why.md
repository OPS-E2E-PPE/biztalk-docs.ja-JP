---
title: "制限のしきい値の調整: タイミングと理由 |Microsoft ドキュメント"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 9afb26c8-e5f4-4b78-9a45-a1263e3cb6ab
caps.latest.revision: "5"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 3b49ae78d4b2d0cf2dabfc69af9023b1e8676dea
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/20/2017
---
# <a name="adjusting-throttling-thresholds-when-and-why"></a><span data-ttu-id="30eda-102">制限のしきい値の調整: タイミングと理由</span><span class="sxs-lookup"><span data-stu-id="30eda-102">Adjusting Throttling Thresholds: When and Why</span></span>
<span data-ttu-id="30eda-103">制限に関しては、あらゆる状況に対応できる汎用の設定は存在しません。</span><span class="sxs-lookup"><span data-stu-id="30eda-103">When it comes to throttling, one size does not fit all.</span></span> <span data-ttu-id="30eda-104">最適な設定はさまざまな要因によって決まります。</span><span class="sxs-lookup"><span data-stu-id="30eda-104">There are a range of factors that will determine what the optimal settings should be.</span></span> <span data-ttu-id="30eda-105">BizTalk Server が提供する既定値は、バックログ過多などの問題からシステムを有効に保護することがテストを通じて実証されています。</span><span class="sxs-lookup"><span data-stu-id="30eda-105">Out of the box, BizTalk Server provides default values that have been proven through testing to effectively protect a system from things like backlog overages.</span></span> <span data-ttu-id="30eda-106">ただし、シナリオによっては、既定値を使用すると設定が厳しくなり過ぎる場合があります。</span><span class="sxs-lookup"><span data-stu-id="30eda-106">However, for some scenarios, this may be too aggressive.</span></span> <span data-ttu-id="30eda-107">この点について、次の各例で説明します。</span><span class="sxs-lookup"><span data-stu-id="30eda-107">The following examples illustrate this point.</span></span>  
  
## <a name="example-1-peak-loads-and-database-size"></a><span data-ttu-id="30eda-108">例 1: 負荷がピークとデータベースのサイズ</span><span class="sxs-lookup"><span data-stu-id="30eda-108">Example 1: Peak Loads and Database Size</span></span>  
 <span data-ttu-id="30eda-109">BizTalk Server を基に構築された各ソリューションには、維持可能な最大スループット (MST) が設定されています。</span><span class="sxs-lookup"><span data-stu-id="30eda-109">Each solution built on BizTalk Server has a maximum sustainable throughput (MST).</span></span> <span data-ttu-id="30eda-110">負荷がこのレベルを下回っている限り、定義上、システムはその負荷を無期限に維持できます。</span><span class="sxs-lookup"><span data-stu-id="30eda-110">As long as load stays below this level, the system can sustain that load indefinitely, by definition.</span></span> <span data-ttu-id="30eda-111">ところが実際には、時間が経過しても負荷が一定のままであることはなく、負荷プロファイルが上下に変動するのが一般的です。</span><span class="sxs-lookup"><span data-stu-id="30eda-111">In practice, however, it is more common to have peaks and valleys in the load profile than it is to have a steady load that doesn’t vary over time.</span></span>  
  
 <span data-ttu-id="30eda-112">最高時の負荷を無期限に維持できるシステムを構築するよりも、負荷がピークのときにある程度のバックログを処理でき、負荷が最も低いときに回復できるシステムを構築した方が、コスト効果が高くなります。</span><span class="sxs-lookup"><span data-stu-id="30eda-112">Rather than build a system that is capable of sustaining the highest peak loads indefinitely, it is more cost effective to build a system that can handle some backlog under peak load, and recover during the valleys.</span></span> <span data-ttu-id="30eda-113">ただし、負荷のピーク時に想定されるバックログがデータベース サイズの既定の制限値を上回ると、システムは入力を制限してバックログをブロックします。</span><span class="sxs-lookup"><span data-stu-id="30eda-113">However, if the backlog expected during the peak loads is higher than the default throttling value for database size, then the system will block the backlog by throttling the input.</span></span> <span data-ttu-id="30eda-114">すべての入力ファイルを可能な限り短時間で処理する必要がある場合など、このような事態が望ましくない場合は、対策としてデータベース サイズのしきい値を引き上げ、想定されるバックログを制限が作動しないうちに受け入れられるようにします。</span><span class="sxs-lookup"><span data-stu-id="30eda-114">If this is not desirable, for example, because you need all of the input files to be consumed as quickly as possible, then the solution is to raise the database size threshold to accept the expected backlog before throttling.</span></span>  
  
## <a name="example-2-memory-usage-optimization"></a><span data-ttu-id="30eda-115">例 2: メモリ使用量の最適化</span><span class="sxs-lookup"><span data-stu-id="30eda-115">Example 2: Memory Usage Optimization</span></span>  
 <span data-ttu-id="30eda-116">処理速度を測定するために制限で使用されるもう 1 つのリソースは、プロセスをホストするために使用できるメモリの量です。</span><span class="sxs-lookup"><span data-stu-id="30eda-116">Another resource that throttling uses in order to gauge processing speed is how much memory is available to host processes.</span></span> <span data-ttu-id="30eda-117">使用可能なメモリがしきい値に比べて小さすぎると、エンジンが作業対象のホスト キューから取得するメッセージの数が制限によって削減されます。</span><span class="sxs-lookup"><span data-stu-id="30eda-117">If the available memory gets too small compared to the threshold, throttling will slow down the number of messages the engine retrieves from the host queues to be worked on.</span></span> <span data-ttu-id="30eda-118">最近のエンタープライズ クラスのサーバーでは、特に [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] で x64 がサポートされるようになったことで、メモリの量と可用性にばらつきが見られます。このような要因により、メモリ使用量を最適化するためにしきい値の引き上げまたは引き下げが必要になると考えられます。</span><span class="sxs-lookup"><span data-stu-id="30eda-118">Given the variability in the amount and availability of memory on today’s enterprise class servers, especially with x64 support in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], the threshold may very well need to be raised or lowered to optimize memory usage.</span></span>  
  
## <a name="recommendation"></a><span data-ttu-id="30eda-119">推奨</span><span class="sxs-lookup"><span data-stu-id="30eda-119">Recommendation</span></span>  
 <span data-ttu-id="30eda-120">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] では、追加設定なしでシステムが適切に保護されるように制限の既定値が構成されています。</span><span class="sxs-lookup"><span data-stu-id="30eda-120">Throttling in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] is configured by default to provide good protection for the system out of the box.</span></span> <span data-ttu-id="30eda-121">既定の設定はしないで、ただし、実行される与えに最適なです。</span><span class="sxs-lookup"><span data-stu-id="30eda-121">The default settings should not, however, be taken for granted as optimal.</span></span> <span data-ttu-id="30eda-122">パフォーマンス カウンターで制限の状態を監視して制限が実行されているかどうかを確認し、制限の基準となるリソース (データベース サイズやメモリ使用量など) が過度に使用されているか、または十分に活用されていないかを各自で判断して、制限のしきい値を適宜調整してください。</span><span class="sxs-lookup"><span data-stu-id="30eda-122">Monitor the performance counters for throttling states to see if throttling is taking place, then gauge for yourself if the resource on which throttling is based (for example, database size or memory usage) is under or over utilized, then adjust the throttling thresholds up or down accordingly.</span></span>