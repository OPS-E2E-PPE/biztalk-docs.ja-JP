---
title: "サンプル TMA: ファイル アダプターの |Microsoft ドキュメント"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- architecture, examples
- DFD, File adapters
- File adapters, TMA
- examples, File adapters
- security examples [TMA], File adapters
ms.assetid: bcb862c0-fe02-4335-8b59-242d28049e3f
caps.latest.revision: "17"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 5b0a5bfe1cce0db07ef26a8d71cc6795cd49202f
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/20/2017
---
# <a name="sample-tma-file-adapter"></a>サンプル TMA: ファイル アダプタ
ここでは、サンプル アーキテクチャのファイル アダプター シナリオ向けの脅威モデル分析 (TMA) について説明します。 次の図では、ファイル アダプタ シナリオのサンプル アーキテクチャを示しています。  
  
 **図 1. ファイル アダプタ シナリオのサンプル アーキテクチャ**  
  
 ![サンプル ファイル アダプターのアーキテクチャ](../core/media/tdi-sec-refarch-file.gif "TDI_Sec_RefArch_File")  
  
## <a name="step-1-collect-background-information-file-adapter-scenario"></a>手順 1. 背景情報 (ファイル アダプタ シナリオ) の収集します。  
 このセクションでは、サンプル アーキテクチャのファイル アダプタ シナリオ向けのデータ フロー ダイアグラム (DFD) について説明します。  
  
 その他のすべての背景情報の使用シナリオ、すべて同じでありで既に説明した[サンプル シナリオの背景情報](../core/background-information-for-sample-scenarios.md)です。  
  
### <a name="data-flow-diagram"></a>データ フロー ダイアグラム  
 次の図は、ファイル アダプタを使用した場合におけるサンプル アーキテクチャのデータ フロー ダイアグラム (DFD) を示しています。  
  
 **ファイル アダプタ シナリオのサンプル アーキテクチャの図 2 の DFD**  
  
 ![サンプル アーキテクチャの DFD の](../core/media/tdi-sec-refarch-dfd-file.gif "tdi_sec_refarch_dfd_file _")  
  
 データ フローは次のとおりです。  
  
1.  パートナーは、イントラネットの境界ネットワーク内のファイル サーバーに (ファイアウォール 1 経由で) メッセージを配置します。  
  
2.  ファイル受信アダプタのインプロセス ホストのインスタンスは、ファイル サーバーを (ファイアウォール 2 経由で) 定期的にポーリングして、新しいメッセージがあるかどうかを確認します。 インスタンスは、新しいメッセージを検出した後、そのメッセージを取得し、初期処理を行ってから、メッセージをメッセージ ボックス データベースに格納します。  
  
3.  メッセージへのサブスクリプションが含まれた処理ホストのインスタンスが、メッセージ ボックス データベースからそのメッセージを取得し、追加処理を行い、メッセージ ボックス データベースにメッセージを戻します。  
  
4.  ファイル送信アダプタが含まれたインプロセス ホストのインスタンスが、メッセージ ボックス データベースからメッセージを取得します。 メッセージは、送信パイプラインでの最終処理を完了してから、ファイアウォール 2 経由でファイル サーバーに送信されます。  
  
5.  パートナーがファイル サーバーからメッセージを取得します。  
  
## <a name="step-2-create-and-analyze-the-threat-model-file-adapter-scenario"></a>手順 2. 作成し、分析、脅威モデル (ファイル アダプタ シナリオ)  
 このセクションでは、サンプル アーキテクチャのファイル アダプタ シナリオに対して実行した TMA の結果を示します。  
  
-   **特定のエントリ ポイント、信頼の境界、およびデータ フローの -** 「収集背景情報のファイル アダプタ シナリオ」と「すべてのシナリオの背景情報。」で既に説明した背景情報を参照してください。  
  
-   **特定された脅威の一覧を作成**を使用して、次の分類、DFD のすべてのエントリのシナリオに潜在的な脅威を特定する: **S**poofing を識別、 **T**データを ampering **R**、これが否認**すれば**漏洩、 **D**ービス拒否、および**E**の levation権限です。 次の表は、ファイル アダプタを使用して BizTalk Server との間でメッセージを送受信したときに特定された脅威を示しています。  
  
 **表 1 のリストは、脅威を特定します。**  
  
|脅威|Description|[Asset]|影響|  
|------------|-----------------|-----------|------------|  
|未認証のユーザーが、ファイル ドロップ フォルダ内のメッセージを取得できる|ファイル アダプタが使用するフォルダに強力な随意アクセス制御リスト (DACL) を設定していない場合、未認証のユーザーがファイル受信場所にメッセージをドロップしたりファイル送信場所のメッセージを取得することがあります。|メッセージ本文|データの改ざん<br /><br /> 情報の漏えい|  
|未認証のユーザーが、BizTalk Server にメッセージを送信できる|BizTalk Server がメッセージを取得するファイル フォルダへの書き込みアクセス許可をユーザーが持っている場合、未認証のユーザーが BizTalk Server にメッセージを送信することがあります。|メッセージ本文|サービス拒否が起こる<br /><br /> 特権の昇格|  
  
## <a name="step-3-review-threats-file-adapter-scenario"></a>手順 3. 脅威の確認 (ファイル アダプタ シナリオ)  
 このセクションでは、サンプル アーキテクチャのファイル アダプタ シナリオで特定された脅威に対して実行したリスク分析の結果を示します。 主な脅威モデルについてのミーティングは後、脅威を確認し、次の影響カテゴリ各脅威のリスクを識別するために使用します**D**amage 潜在的な、 **R**eproducibility、 **E。**xploitability、 **A**影響を受けるユーザー、および**D**iscoverability です。  
  
 次の表は、ファイル アダプタを使用して BizTalk Server との間でメッセージを送受信したときに特定された脅威のリスクの度合いを示しています。  
  
 **特定された脅威のリスクの度合いを 2 つのテーブルにします。**  
  
|脅威|影響|潜在的な損害|再現性|悪用性|影響を受けるユーザー|検出可能性|リスクの度合い|  
|------------|------------|----------------------|---------------------|--------------------|--------------------|---------------------|-------------------|  
|未認証のユーザーが、ファイル ドロップ フォルダ内のメッセージを取得できる|データの改ざん<br /><br /> 情報の漏えい|4|7|5|4|6|5.2|  
|未認証のユーザーが、BizTalk Server にメッセージを送信できる|サービス拒否が起こる<br /><br /> 特権の昇格|4|7|5|4|5|5.2|  
  
## <a name="step-4-identify-mitigation-techniques-file-adapter-scenario"></a>手順 4. 緩和方法 (ファイル アダプタ シナリオ) の特定します。  
 このセクションでは、サンプル アーキテクチャのファイル アダプタ シナリオで特定された脅威を緩和する方法について説明します。  
  
 次の表は、ファイル アダプタを使用して BizTalk Server との間でメッセージを送受信したときに特定された脅威の緩和方法とテクノロジを示しています。  
  
 **表 3 の緩和方法とテクノロジ**  
  
|脅威|影響|リスクの度合い|緩和方法とテクノロジ|  
|------------|------------|-------------------|--------------------------------------------|  
|未認証のユーザーが、ファイル ドロップ フォルダ内のメッセージを取得できる|データの改ざん<br /><br /> 情報の漏えい|5.2|BizTalk Server がメッセージを取得するフォルダには、次のように強力な随意アクセス制御リスト (DACL) を使用します。<br /><br /> -受信アダプターを実行しているホストのホスト インスタンスのサービス アカウント、読み取りを設定、書き込み、ファイルが削除、およびファイルの受信場所がメッセージを取得するディレクトリにサブフォルダとファイルのアクセス許可を削除します。<br />-外部のユーザーまたはこのフォルダーにファイルをドロップするアプリケーションでは、書き込みアクセス許可を設定します。<br />BizTalk 管理者グループのフル コントロールを設定します。<br /><br /> BizTalk Server がメッセージをドロップするフォルダには、次のように強力な DACL を使用します。<br /><br /> -送信アダプターを実行しているホストのホスト インスタンスのサービス アカウント、書き込みアクセス許可を設定します。<br />-外部ユーザーまたはこのフォルダーにファイルをドロップするアプリケーションでの読み取り権限の設定。<br />BizTalk 管理者グループのフル コントロールを設定します。|  
|未認証のユーザーが、BizTalk Server にメッセージを送信できる|サービス拒否が起こる<br /><br /> 特権の昇格|5.2|前述のように、受信場所ドロップ ディレクトリに強力な DACL を設定します。|  
  
## <a name="see-also"></a>参照  
 [脅威モデル分析](../core/threat-model-analysis.md)   
 [脅威モデル分析のサンプル シナリオ](../core/sample-scenarios-for-threat-model-analysis.md)   
 [小規模および中規模企業向けのサンプル アーキテクチャ](../core/sample-architectures-for-small-medium-sized-companies.md)