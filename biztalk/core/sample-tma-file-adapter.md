---
title: サンプル TMA:ファイル アダプター |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- architecture, examples
- DFD, File adapters
- File adapters, TMA
- examples, File adapters
- security examples [TMA], File adapters
ms.assetid: bcb862c0-fe02-4335-8b59-242d28049e3f
caps.latest.revision: 17
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 6d22d7bfc496921b9d564dc673755f2b52009e27
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65309569"
---
# <a name="sample-tma-file-adapter"></a>サンプル TMA:ファイル アダプター
このトピックでは、サンプル アーキテクチャのファイル アダプタ シナリオに対して、脅威モデル分析 (TMA) を示します。 次の図は、ファイル アダプタ シナリオのサンプル アーキテクチャを示します。  
  
 **図 1. ファイル アダプタ シナリオのサンプル アーキテクチャ**  
  
 ![サンプル ファイル アダプターのアーキテクチャ](../core/media/tdi-sec-refarch-file.gif "TDI_Sec_RefArch_File")  
  
## <a name="step-1-collect-background-information-file-adapter-scenario"></a>手順 1. 背景情報 (ファイル アダプタ シナリオ) の収集します。  
 このセクションでは、サンプル アーキテクチャのファイル アダプタ シナリオのデータ フロー ダイアグラム (DFD) を提供します。  
  
 その他のすべての背景情報の使用シナリオ、すべて同じで既に説明した[サンプル シナリオの背景情報](../core/background-information-for-sample-scenarios.md)します。  
  
### <a name="data-flow-diagram"></a>データ フロー ダイアグラム  
 ファイル アダプターを使用すると、次の図は、サンプル アーキテクチャの DFD を示します。  
  
 **ファイル アダプタ シナリオのサンプル アーキテクチャの図 2 の DFD**  
  
 ![アーキテクチャの DFD のサンプル](../core/media/tdi-sec-refarch-dfd-file.gif "tdi_sec_refarch_dfd_file _")  
  
 データ フローは次のとおりです。  
  
1.  パートナーは、イントラネット境界ネットワーク内のファイル サーバーに (ファイアウォール 1) 経由のメッセージを入れます。  
  
2.  インプロセス ホストのインスタンス、ファイル受信アダプターが定期的に (ファイアウォール 2) 経由で新しいメッセージ用のファイル サーバーをポーリングします。 新しいメッセージのインスタンスを検出した後は、初期処理を、およびメッセージ ボックス データベースにメッセージを配置にメッセージを取得します。  
  
3.  メッセージへのサブスクリプションが含まれた処理ホストのインスタンスが、メッセージ ボックス データベースからそのメッセージを取得し、追加処理を行い、メッセージ ボックス データベースにメッセージを戻します。  
  
4.  アダプターは、メッセージ ボックス データベースからメッセージを送信するファイルがある、インプロセス ホストのインスタンス。 メッセージは、送信パイプラインでの最終処理が、ファイル サーバーをファイアウォール 2 経由で送信されます。  
  
5.  パートナーは、ファイル サーバーからメッセージを取得します。  
  
## <a name="step-2-create-and-analyze-the-threat-model-file-adapter-scenario"></a>手順 2. 作成し、分析、脅威モデル (ファイル アダプタ シナリオ)  
 このセクションでは、サンプル アーキテクチャのファイル アダプタ シナリオに対して実行した TMA の結果を提供します。  
  
- **特定のエントリ ポイント、信頼の境界、およびデータのフロー -** 「収集背景情報のファイル アダプタ シナリオ」と「すべてのシナリオの背景情報。」で既に説明した背景情報を参照してください。  
  
- **-特定された脅威の一覧を作成**シナリオに潜在的な脅威を識別するために、DFD のすべてのエントリのカテゴリに分類を使いました。**S**poofing を識別、 **T**データ、ampering **R**、これが否認**は**漏洩、 **D**ービス拒否、**E**levation 特権。 次の表には、ファイル アダプターを使用して、BizTalk Server とのメッセージを送受信するときに特定された脅威が一覧表示します。  
  
  **表 1 のリストは、脅威を識別します。**  
  
|脅威|説明|[Asset]|影響|  
|------------|-----------------|-----------|------------|  
|承認されていないユーザーは、ファイル ドロップ フォルダーからメッセージを取得できます。|ファイル アダプターを使用して、未認証のユーザーを削除できますフォルダーの強力な随意アクセス リスト (Dacl) に設定することできませんが、ファイル内のメッセージは受信場所、か、ファイル送信場所からメッセージを取得します。|メッセージ本文|データの改ざん<br /><br /> 情報の漏えい|  
|未認証のユーザーは、BizTalk Server にメッセージを送信できます。|ユーザーは、元の BizTalk Server はメッセージが取得ファイル フォルダーへの書き込みアクセス許可を持つ、権限のないユーザーは BizTalk Server にメッセージを送信できます。|メッセージ本文|サービス拒否が起こる<br /><br /> 特権の昇格|  
  
## <a name="step-3-review-threats-file-adapter-scenario"></a>手順 3. 脅威の確認 (ファイル アダプタ シナリオ)  
 このセクションでは、サンプル アーキテクチャのファイル アダプタ シナリオで特定された脅威に対して実行したリスク分析の結果を提供します。 主要な脅威モデルは、会議後脅威を確認し、各脅威のリスクを識別するために、次の影響カテゴリを使用します。**D**amage、潜在的な**R**可能性、 **E**xploitability、 **A**影響を受けるユーザー、および**D**iscoverability します。  
  
 次の表では、ファイル アダプターを使用して、BizTalk Server とのメッセージを送受信するときに特定された脅威のリスクの度合いを示します。  
  
 **表 2. 特定された脅威のリスクの度合い**  
  
|脅威|影響|潜在的な損害|再現性|悪用性|影響を受けるユーザー|検出可能性|リスクの度合い|  
|------------|------------|----------------------|---------------------|--------------------|--------------------|---------------------|-------------------|  
|承認されていないユーザーは、ファイル ドロップ フォルダーからメッセージを取得できます。|データの改ざん<br /><br /> 情報の漏えい|4|7|5|4|6|5.2|  
|未認証のユーザーは、BizTalk Server にメッセージを送信できます。|サービス拒否が起こる<br /><br /> 特権の昇格|4|7|5|4|5|5.2|  
  
## <a name="step-4-identify-mitigation-techniques-file-adapter-scenario"></a>手順 4. 緩和方法 (ファイル アダプタ シナリオ) の特定します。  
 ここでは、サンプル アーキテクチャのファイル アダプタ シナリオで特定された脅威を緩和する方法を示します。  
  
 次の表は、ファイル アダプターを使用して、BizTalk Server とのメッセージを送受信するときに特定された脅威の緩和方法とテクノロジを示します。  
  
 **表 3. 緩和方法とテクノロジ**  
  
|脅威|影響|リスクの度合い|緩和方法とテクノロジ|  
|------------|------------|-------------------|--------------------------------------------|  
|承認されていないユーザーは、ファイル ドロップ フォルダーからメッセージを取得できます。|データの改ざん<br /><br /> 情報の漏えい|5.2|元となる BizTalk Server がメッセージを取得、フォルダーのような強力な随意アクセス リスト (DACL) を使用します。<br /><br /> -受信アダプターを実行するホストのホスト インスタンス サービス アカウントの読み取り設定、記述ファイルを削除し、ファイルの受信場所がメッセージを取得元となるディレクトリにサブフォルダとファイルのアクセス許可を削除します。<br />-外部ユーザーまたはアプリケーションのファイルをこのフォルダーにドロップする、書き込みアクセス許可を設定します。<br />BizTalk 管理者グループのフル コントロールを設定します。<br /><br /> 、BizTalk Server がメッセージを削除するフォルダーのような強力な DACL を使用します。<br /><br /> 送信アダプターを実行するホストのホスト インスタンス サービス アカウントの書き込みアクセス許可を設定します。<br />-外部ユーザーまたはアプリケーションのファイルをこのフォルダーにドロップする、読み取り権限の設定。<br />BizTalk 管理者グループのフル コントロールを設定します。|  
|未認証のユーザーは、BizTalk Server にメッセージを送信できます。|サービス拒否が起こる<br /><br /> 特権の昇格|5.2|強力な Dacl で設定、受信場所ドロップ ディレクトリ前に示したようします。|  
  
## <a name="see-also"></a>参照  
 [脅威モデル分析](../core/threat-model-analysis.md)   
 [脅威モデル分析のサンプル シナリオ](../core/sample-scenarios-for-threat-model-analysis.md)   
 [中小企業向けのサンプル アーキテクチャ](../core/sample-architectures-for-small-medium-sized-companies.md)