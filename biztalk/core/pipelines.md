---
title: パイプライン |Microsoft ドキュメント
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- pipelines
- deploying, pipelines
- receive pipelines, about receive pipelines
- pipelines, deploying
- send pipelines, about send pipelines
- receive pipelines
- pipelines, about pipelines
- send pipelines, stages
- send pipelines
- pipelines, receive pipelines
- pipelines, send pipelines
- receive pipelines, stages
ms.assetid: 76947dd8-728a-4fa3-bd33-7a708ae82cac
caps.latest.revision: 8
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: b5fec49dcc9ba21c5d117188f280f7e9b65fe2b2
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/20/2017
ms.locfileid: "22265274"
---
# <a name="pipelines"></a>パイプライン
パイプラインは、パイプとフィルターの統合パターンを実装する Microsoft BizTalk Server のコンポーネントです。 ビジネス上の理由で、メッセージの送受信中にメッセージを変換して、BizTalk Server への入力または BizTalk Server からの送信に使用できるように準備を行う必要が生じることがあります。  
  
 一般的な例は、マップなどの BizTalk Server の特定の機能を利用するためにコンマ区切りフラット ファイルを XML ファイルに変換しなければならない場合などです。この変換は、フラット ファイル逆アセンブラー コンポーネントで行われます。 メッセージを送受信する前に統合シナリオで複数の種類のメッセージを変換しなければならない場合、パイプラインを使用してこの要件に対応します。 パイプラインを使用すると、開発者は、メッセージの送受信中に行う一連の変換を定義することができます。  
  
 パイプラインには、実行されるポートと対応して送信と受信の 2 種類があります。 *送信パイプライン*は送信ポートで実行され、要求/応答の応答部分では、受信ポート、中に*受信パイプライン*が実行されるには、受信場所、および送信請求-応答の応答部分で送信ポート。 基本的に、受信パイプラインは、メッセージ ボックス データベースに公開されるメッセージの変換に使用されます。送信パイプラインは、サブスクライブされており BizTalk Server から送信されるメッセージに使用されます。  
  
 各パイプラインには、そのパイプラインの実行時に順に実行されるステージのセットが含まれています。 各ステージには、0 個以上のコンポーネントを含めることができます。 コンポーネントの最大数はステージによって異なります。  
  
## <a name="receive-pipeline-stages"></a>受信パイプラインのステージ  
 ![受信パイプラインのステージ](../core/media/arch-pipe-receive.gif "arch_pipe_receive")  
  
|段階|用途|  
|-----------|-------------|  
|**デコード**|メッセージ データを解読またはデコードします。|  
|**逆アセンブルします。**|インターチェンジを小さいメッセージに逆アセンブルし、メッセージの内容を解析します。|  
|**[検証]**|メッセージ データを、通常、スキーマと照合して検証します。|  
|**パーティを解決します。**|メッセージまたはメッセージのコンテキストの一部のセキュリティ トークンに関連付けられた BizTalk Server パーティを確認します。|  
  
## <a name="send-pipeline-stages"></a>送信パイプラインのステージ  
 ![送信パイプラインのステージ](../core/media/arch-pipe-send.gif "arch_pipe_send")  
  
|段階|用途|  
|-----------|-------------|  
|**プリアセンブルします。**|メッセージをアセンブルする前に必要なメッセージ処理があれば実行します。|  
|**アセンブル**|エンベロープの追加や XML のフラット ファイルへの変換、受信パイプラインの逆アセンブル ステージを補完するその他のタスクなどの手順を実行して、メッセージをアセンブルし、送信のための準備をします。|  
|**エンコード**|メッセージを配信前に暗号化またはエンコードします。|  
  
 パイプラインのステージが、*実行モード*すべてのまたは複数のコンポーネントがステージに追加された場合に実行するコンポーネントを制御する、最初に一致します。 実行モードが [すべて] に設定されているステージでは、ステージ内に構成されている順序で各コンポーネントが呼び出されてメッセージ処理が行われます。 モードが [First Match] の場合、一致するコンポーネントが見つかるまで、正しいコンポーネントを検出するためのポーリングが各コンポーネントに対して行われ、一致するコンポーネントが見つかるとそのコンポーネントが実行されて、残りのコンポーネントは実行されません。  
  
 実行モードの例として、受信パイプラインの逆アセンブル ステージは [First Match] ステージなので、ステージの各コンポーネントが呼び出され、そのコンポーネントでメッセージを認識して処理できるかどうかが評価されます。 コンポーネントが肯定応答を返せば、そのステージの他のコンポーネントに対しては、メッセージを処理できるかどうかを検証するクエリは実行されません。 これに対し、受信パイプラインのデコード ステージの実行モードは [すべて] なので、メッセージを処理するために、このステージのそれぞれのコンポーネントが構成順に呼び出されます。 たとえば最初のデコーダーでメッセージを解読し、2 番目のデコーダーで圧縮形式からメッセージの圧縮解除を行うなどの処理が行われます。  
  
 パイプライン処理の実行モードに起因した問題の多くは、開発者が 1 つの受信パイプラインで複数の逆アセンブラーを使用した場合に生じます。 通常、逆アセンブル コンポーネントの違いはわずかで、たとえば、よく似た 2 つのフラット ファイル逆アセンブラーで、構成されているスキーマのみが異なるというケースがあります。 このような場合、メッセージが実際に一致するのは 2 番目の逆アセンブラーで定義されているスキーマであっても、最初の逆アセンブラーでメッセージを処理できるとプローブで判断されることがあります。 このときエラーが検出されメッセージが保留されるのは、メッセージを処理した後になってしまいます。 これに対処するには、もっと具体的なプローブ ロジックを持つ逆アセンブラーを新しく作成するか、パイプラインを 2 つ作成することによって異なるメッセージをそれぞれ別の受信場所でを受信する方法をとる必要があります。  
  
## <a name="pipeline-deployment"></a>パイプラインの展開  
 パイプラインを含むアセンブリを展開するときに、管理データベースは、パイプラインを保存します。 パイプラインは特定のバージョンのアセンブリに関連付けられており、結果は次のようになります。  
  
-   同じパイプラインを使用する複数のアセンブリを展開すると、管理データベースは各アセンブリのパイプラインに 1 つのエントリを作成します。  
  
-   パイプラインが含まれるアセンブリを削除すると、管理データベースはそのアセンブリに関連付けられたパイプラインを削除します。 管理データベースの関連付けられた各アセンブリにはパイプラインのコピーが存在するため、アセンブリを 1 つ削除しても他に影響はありません。  
  
## <a name="see-also"></a>参照  
 [成果物](../core/artifacts.md)