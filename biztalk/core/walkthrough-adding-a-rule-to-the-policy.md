---
title: 'チュートリアル: ポリシーにルールを追加する |Microsoft ドキュメント'
ms.custom: ''
ms.date: 2016-04-05
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: b2a682c0-a5d7-4550-924d-be9fa29b84d2
caps.latest.revision: 21
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: b08fc197c16f04f3eb738468421db340060b9613
ms.sourcegitcommit: 5abd0ed3f9e4858ffaaec5481bfa8878595e95f7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/28/2017
ms.locfileid: "25975704"
---
# <a name="walkthrough-adding-a-rule-to-the-policy"></a>チュートリアル: ポリシーにルールを追加します。
このチュートリアルでは、という名前のルールを追加するための手順は**DeniedRule**を**ProcessPurchaseOrder**ポリシー。  
  
## <a name="prerequisites"></a>前提条件  
 完了する必要があります、[チュートリアル: ポリシーで作成およびボキャブラリ](../core/walkthrough-creating-and-using-a-vocabulary-in-the-policy.md)このチュートリアルを実行する前にチュートリアルです。  
  
## <a name="overview-of-this-walkthrough"></a>このチュートリアルの概要  
 次の表に示すように、このチュートリアルには 3 つの手順が含まれています。  
  
|手順のタイトル|手順の説明|  
|---------------------|---------------------------|  
|ProcessPurchaseOrder ポリシーに DeniedRule を追加するには|という名前の新しいルールを追加するための手順をわかりやすく説明**DeniedRule**を**ProcessPurchaseOrder**ポリシー。 **DeniedRule**規則セットの値、**ステータス**フィールドを**Denied**場合の値、**数量**が 500 より大きい。|  
|ビジネス ルール作成ツールを使用してテストするには|テストするための手順をわかりやすく説明、 **ProcessPurchaseOrder**ビジネス ルール作成ツールを使用してポリシー。|  
|ソリューションをテストするには、次の操作を行います。|ソリューションをテストします。|  
  
### <a name="to-add-deniedrule-to-the-processpurchaseorder-policy"></a>ProcessPurchaseOrder ポリシーに DeniedRule を追加するには  
  
1.  **開始**] メニューの [開いている**ビジネス ルール作成ツール**です。  
  
    > [!NOTE]
    >  ユーザー アカウント制御 (UAC) をサポートするシステムでは、管理者特権を使用してこのツールを実行することが必要な場合があります。 これを行うには、アプリケーションを右クリックし、**管理者として実行**です。  
  
2.  ポリシー エクスプ ローラー ウィンドウで、**ポリシー**、展開**ProcessPurchaseOrder**を右クリックして**バージョン 1.1**、クリックして**をコピー**.  
  
3.  右クリック**ProcessPurchaseOrder**、クリックして**ポリシーのバージョンの貼り付け**です。  
  
4.  右クリック**Version 1.2 (未保存)**、 をクリックして**新しいルールの追加**、規則の名前を変更し、 **DeniedRule**です。  
  
5.  規則の名前を変更する忘れたかどうか**DeniedRule**手順 4 で、をクリックして**Rule1**、名前を変更して**DeniedRule**プロパティ ウィンドウでします。  
  
6.  IF ペインで右クリック**条件**、 をポイント**述語**、クリックして**より大きい**です。  
  
7.  [ファクト エクスプ ローラー] ウィンドウ、**ボキャブラリ**タブです。  
  
8.  展開**ボキャブラリ**、展開**POVocabulary**、展開**バージョン 1.0 - 公開済み**、し、ドラッグ**要求された数量**に**argument1** IF ペイン。  
  
9. ドラッグ**許可される項目の最大数**に**argument2** IF ペイン。  
  
10. ドラッグ**要求の状態**[THEN] ペインにします。  
  
11. をクリックして**\<空の文字列\>** し、入力**Denied**です。  
  
12. 右クリック**Version 1.2 (未保存)**、クリックして**保存**です。  
  
13. 右クリック**バージョン 1.2**、クリックして**発行**です。  
  
14. 右クリック**バージョン 1.2**、クリックして**展開**です。  
  
### <a name="to-test-with-business-rule-composer"></a>ビジネス ルール作成ツールを使用してテストするには  
  
1.  値を変更して、SamplePO.xml ファイルと SamplePO2.xml ファイルをメモ帳で開き、**ステータス**フィールドを**XYZ**です。  
  
2.  ポリシー エクスプ ローラー] ウィンドウで、**ポリシー**、展開**ProcessPurchaseOrder**を右クリックして**バージョン 1.2**、クリックして **[ポリシーのテスト**.  
  
3.  下にある、 **XMLDocuments**ノードで、選択**RuleTest.PO**、クリックして**インスタンスを追加**です。  
  
4.  選択**SamplePO.xml**、クリックして**開く**です。  
  
5.  をクリックして**テスト**です。  
  
6.  見て、**議題の更新**出力では、セクションし、だけであることを確認**ApprovalRule**議題に追加します。 このため、このルールだけが実行されます (このルールに関連付けられたアクションが実行されます)。  
  
7.  開いている**SamplePO.xml**メモ帳で通知の値、**ステータス**フィールドに設定されて**承認済み**です。  
  
8.  ポリシー エクスプ ローラー ウィンドウで、**ポリシー**、展開**ProcessPurchaseOrder**を右クリックして**バージョン 1.2**、順にクリック**テスト ポリシーです。**  
  
9. 選択**SamplePO.xml**、 をクリックして**削除インスタンス**、クリックして**インスタンスを追加**です。  
  
10. 選択**SamplePO2.xml**、クリックして**開く**です。  
  
11. をクリックして**テスト**です。  
  
12. 見て、**議題の更新**出力では、セクションし、だけであることを確認**DeniedRule**議題に追加します。 このため、このルールだけが実行されます。  
  
13. 開いている**SamplePO2.xml**メモ帳で通知の値、**ステータス**フィールドは**が拒否されました**です。  
  
### <a name="to-test-the-solution"></a>ソリューションをテストするには、次の操作を行います。  
  
1.  開いている**SamplePO.xml**と**SamplePO2.xml**メモ帳での値を変更し、**ステータス**フィールドを**XYZ**です。  
  
2.  コピー、 **SamplePO.xml**オーケストレーション用の C:\BRE-Walkthroughs\RuleTestSol\Input ディレクトリに C:\BRE-Walkthroughs ディレクトリからファイルです。  
  
3.  オーケストレーションの C:\BRE-Walkthroughs\RuleTestSol\Output ディレクトリに出力ファイルが表示されます。 出力 XML ファイルを開くことを確認の値、**ステータス**にフィールドが設定されている**Approved**です。  
  
4.  手順 2 および 3 を繰り返します**SamplePO2.xml**、ことを確認の値、**ステータス**フィールドに設定されて**Denied**出力ドキュメント。 オーケストレーションでのバージョン 1.2 を使用していることが証明、 **ProcessPurchaseOrder**ポリシー。 オーケストレーションは、配置済みの最新バージョンを使用して、 **ProcessPurchaseOrder**ポリシーが**1.2**です。 ポリシーのバージョン 1.2 を使用するためにポリシーのバージョン 1.1 を展開解除する必要はありません。 ただし、ソリューションをテストする前に約 60 秒間待つ必要があります。 詳細については、「コメント」を参照してください。  
  
## <a name="comments"></a>コメント  
  
-   ポリシーには、1 つ以上のルールを含めることができます。 理論上は、1 つのポリシー内のルールの数に制限はありません。  
  
-   ルール エンジンは、条件の評価、競合解決、アクションの実行というアルゴリズムを使用します。 **条件の評価**段階では、ルール エンジンは、すべてのルールの条件を評価します。 条件が true と評価される条件を持つルールは、実行の候補となるルールになります。 **競合の解決**ステージで候補ルールがルールの優先度の順序で議題に追加されます。 **アクションの実行**ステージで規則が実行される候補では、操作します。 複数の候補ルールが同じ優先度を持っている場合、それらのルールのアクションの実行については決定的な順序はありません。 これらのアクションは並列して実行されることを想定する必要があります。  
  
-   このシナリオでは、任意の指定されたサンプル ファイルに対して、ルールの 1 つだけが実行されます。 値を変更することを確認してください、**ステータス**テストを実行する前にフィールドです。  
  
-   ポリシーの新しいバージョンが展開される場合は、テスト前に約 60 秒間待つ必要があります。 ルール エンジン更新サービスは、定期的に (既定では 60 秒ごとに) ルール エンジン データベースをポーリングして、新しく展開されたポリシーを検索します。 ルール エンジン更新サービスは、ルール エンジン データベースからポリシーの展開されている最新のバージョンに関する情報を使用して、メモリ内のポリシー オブジェクトを更新します。  
  
## <a name="next-steps"></a>次の手順  
 これで、このチュートリアルを完了すると、実行、[チュートリアル: ポリシーを変更する](../core/walkthrough-modifying-the-policy.md)の値は、発注書を承認するポリシーを変更するための手順を説明するチュートリアル**数量**(500) ではなく 1000 以下です。  
  
## <a name="see-also"></a>参照  
 [条件の評価とアクションの実行](../core/condition-evaluation-and-action-execution.md)   
 [議題と優先度](../core/agenda-and-priority.md)