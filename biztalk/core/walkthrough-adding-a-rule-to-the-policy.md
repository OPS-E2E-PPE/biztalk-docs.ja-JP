---
title: 'チュートリアル: ポリシーにルールを追加する |Microsoft Docs'
ms.custom: ''
ms.date: 2016-04-05
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: b2a682c0-a5d7-4550-924d-be9fa29b84d2
caps.latest.revision: 21
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 9b5a19b02429f946a282ed5609beb3155310c8fe
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65320780"
---
# <a name="walkthrough-adding-a-rule-to-the-policy"></a>チュートリアル: ポリシーにルールを追加します。
このチュートリアルがという名前の規則を追加するための手順を示します**DeniedRule**を**ProcessPurchaseOrder**ポリシー。  
  
## <a name="prerequisites"></a>前提条件  
 完了する必要があります、[チュートリアル。作成して、ボキャブラリを使用して、ポリシーで](../core/walkthrough-creating-and-using-a-vocabulary-in-the-policy.md)このチュートリアルを実行する前にチュートリアル。  
  
## <a name="overview-of-this-walkthrough"></a>このチュートリアルの概要  
 このチュートリアルには、次の表に示すように 3 つの手順が含まれます。  
  
|プロシージャ タイトル|手順の説明|  
|---------------------|---------------------------|  
|ProcessPurchaseOrder ポリシーに DeniedRule を追加するには|という名前の新しい規則を追加するための手順について説明します**DeniedRule**を**ProcessPurchaseOrder**ポリシー。 **DeniedRule**規則セットの値、**状態**フィールドを**Denied**場合の値、**数量**が 500 より大きい。|  
|ビジネス ルール作成ツールを使用してテストするには|テストするための手順について説明します、 **ProcessPurchaseOrder**ビジネス ルール作成ツールを使用してポリシー。|  
|ソリューションをテストするには、次の操作を行います。|ソリューションをテストします。|  
  
### <a name="to-add-deniedrule-to-the-processpurchaseorder-policy"></a>ProcessPurchaseOrder ポリシーに DeniedRule を追加するには  
  
1.  **開始**] メニューの [open**ビジネス ルール作成ツール**します。  
  
    > [!NOTE]
    >  ユーザー アカウント制御 (UAC) をサポートするシステムでは、管理者特権を使用してこのツールを実行することが必要な場合があります。 これを行うには、アプリケーションを右クリックし、**管理者として実行**します。  
  
2.  ポリシー エクスプ ローラー ウィンドウで、**ポリシー**、展開**ProcessPurchaseOrder**、右クリック**バージョン 1.1**、順にクリックします**コピー**.  
  
3.  右クリック**ProcessPurchaseOrder**、 をクリックし、**ポリシーのバージョンの貼り付け**します。  
  
4.  右クリック**Version 1.2 (未保存)**、 をクリックして**新しいルールの追加**、規則の名前を変更し、 **DeniedRule**します。  
  
5.  規則の名前を変更し忘れたかどうか**DeniedRule**手順 4 で、次のようにクリックします。 **Rule1**、名を変更して、 **DeniedRule**プロパティ ウィンドウでします。  
  
6.  IF ペインで右クリック**条件**、 をポイント**述語**、 をクリックし、**より大きい**します。  
  
7.  [ファクト エクスプ ローラー] ウィンドウ、**ボキャブラリ**タブ。  
  
8.  展開**ボキャブラリ**、展開**POVocabulary**、展開**バージョン 1.0 - 公開済み**、し、ドラッグ**要求された数量**に**引数 1** IF ペインでします。  
  
9. ドラッグ**許可される項目の最大数**に**引数 2** IF ペインでします。  
  
10. ドラッグ**要求の状態**[THEN] ペインにします。  
  
11. をクリックして**\<空の文字列\>** し、入力**Denied**します。  
  
12. 右クリック**Version 1.2 (未保存)**、 をクリックし、**保存**します。  
  
13. 右クリックして**バージョン 1.2**、 をクリックし、**発行**します。  
  
14. 右クリック**バージョン 1.2**、 をクリックし、**デプロイ**します。  
  
### <a name="to-test-with-business-rule-composer"></a>ビジネス ルール作成ツールを使用してテストするには  
  
1.  メモ帳で SamplePO.xml と SamplePO2.xml ファイルを開きの値を変更、**状態**フィールドを**XYZ**します。  
  
2.  ポリシー エクスプ ローラー ウィンドウで、**ポリシー**、展開**ProcessPurchaseOrder**を右クリックして**バージョン 1.2**、 をクリックし、 **ポリシーのテスト**.  
  
3.  下、 **XMLDocuments**ノードの  **RuleTest.PO**、順にクリックします**インスタンスの追加**します。  
  
4.  選択**SamplePO.xml**、 をクリックし、**オープン**します。  
  
5.  クリックして**テスト**します。  
  
6.  見て、**議題の更新**出力では、セクションだけを注意してください。 **ApprovalRule** 、議題に追加されます。 そのため起動されるルールだけが (、規則に関連付けられたアクションが実行されます)。  
  
7.  開いている**SamplePO.xml**でメモ帳に注目してくださいの値、**状態**にフィールドが設定されている**Approved**します。  
  
8.  ポリシー エクスプ ローラー ウィンドウで、**ポリシー**、展開**ProcessPurchaseOrder**を右クリックして**バージョン 1.2**、 をクリックし、**ポリシーのテスト。**  
  
9. 選択**SamplePO.xml**、 をクリックして**インスタンスの削除**、 をクリックし、**インスタンスの追加**します。  
  
10. 選択**SamplePO2.xml**、 をクリックし、**オープン**します。  
  
11. クリックして**テスト**します。  
  
12. 見て、**議題の更新**出力では、セクションだけを注意してください。 **DeniedRule** 、議題に追加されます。 そのため、この起動のみルールが。  
  
13. 開いている**SamplePO2.xml**でメモ帳に注目してくださいの値、**状態**フィールドは**Denied**。  
  
### <a name="to-test-the-solution"></a>ソリューションをテストするには、次の操作を行います。  
  
1.  開いている**SamplePO.xml**と**SamplePO2.xml**メモ帳での値を変更し、**状態**フィールドを**XYZ**します。  
  
2.  コピー、 **SamplePO.xml**オーケストレーション用の C:\BRE-Walkthroughs\RuleTestSol\Input ディレクトリに C:\BRE-Walkthroughs ディレクトリからファイル。  
  
3.  オーケストレーションの C:\BRE-Walkthroughs\RuleTestSol\Output ディレクトリに出力ファイルが表示されます。 出力 XML ファイルを開き、注意の値、**状態**にフィールドが設定されている**Approved**します。  
  
4.  手順 2 と 3 を繰り返します**SamplePO2.xml**、ことに注意しての値、**状態**にフィールドが設定されている**Denied**出力ドキュメント。 オーケストレーションでのバージョン 1.2 を使用していることが証明されます、 **ProcessPurchaseOrder**ポリシー。 オーケストレーションの展開された最新のバージョンを使用して、 **ProcessPurchaseOrder**ポリシーが**1.2**します。 ポリシーのバージョン 1.2 を使用するポリシーのバージョン 1.1 の展開を解除する必要はありません。 ただし、ソリューションをテストする前に約 60 秒間待機する必要があります。 詳細については、コメント セクションを参照してください。  
  
## <a name="comments"></a>コメント  
  
-   ポリシーは、1 つまたは複数のルールを持つことができます。 ポリシーの規則の数の論理の制限はありません。  
  
-   ルール エンジンは、条件の評価、競合解決 - アクションの実行アルゴリズムを使用します。 **条件の評価**ステージでは、ルール エンジンは、すべてのルールの条件を評価します。 条件が true に評価ルールでは、実行のルールの候補になります。 **競合の解決**ステージで、候補ルールがルールの優先順位に従って議題に追加されます。 **アクションの実行**ステージで、候補ルールが実行されるアクション。 候補ルールの優先順位が同じ場合は、決定的な順序がこれらのルールのアクションが実行されることはありません。 それらが並列で実行されることを想定してください。  
  
-   この場合は、任意の指定されたサンプル ファイルで、規則のいずれかのみが発生します。 値を変更することを確認、**状態**フィールド テストを実行する前にします。  
  
-   新しいバージョンのポリシーを展開するときは、テストする前に約 60 秒間を待機する必要があります。 ルール エンジン更新サービスは、新しく展開されたポリシーを探すように定期的に (既定では 60 秒ごと) ルール エンジン データベースをポーリングします。 ルール エンジン更新サービスは、ルール エンジン データベースからのポリシーの展開された最新のバージョンに関する情報をメモリ内のポリシー オブジェクトを更新します。  
  
## <a name="next-steps"></a>次の手順  
 これで、このチュートリアルを完了すると、実行、[チュートリアル。ポリシーを変更する](../core/walkthrough-modifying-the-policy.md)の値を持つ注文書を承認する、ポリシーを変更するための手順を説明するチュートリアル**数量**(500) ではなく 1000 未満。  
  
## <a name="see-also"></a>参照  
 [条件の評価とアクションの実行](../core/condition-evaluation-and-action-execution.md)   
 [議題と優先度](../core/agenda-and-priority.md)