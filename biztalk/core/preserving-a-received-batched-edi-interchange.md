---
title: バッチ EDI インターチェンジを受信した保持 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 10d21b9b-9684-422a-8948-8bd71a4d5a10
caps.latest.revision: 20
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 9b323c575b1778e73704f499cd59020b97603b32
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65299904"
---
# <a name="preserving-a-received-batched-edi-interchange"></a><span data-ttu-id="e502c-102">受信したバッチ EDI インターチェンジの保存</span><span class="sxs-lookup"><span data-stu-id="e502c-102">Preserving a Received Batched EDI Interchange</span></span>
> [!NOTE]
>  <span data-ttu-id="e502c-103">このトピックで説明されているすべてのユーザー インターフェイスのオプションが表示されます、**ローカル ホスト設定**ページ (**受信者の設定**セクション) で、双方向アグリーメント タブの**アグリーメントのプロパティ** ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="e502c-103">All the user interface options mentioned in this topic are available in the **Local Host Settings** page (**Receiver’s Settings** section) of the bi-directional agreement tabs in the **Agreement Properties** dialog box.</span></span>  

 <span data-ttu-id="e502c-104">EDI 受信パイプラインが受信バッチ EDI インターチェンジを保存する場合、各トランザクション セットまたはメッセージを別々の中間 XML ファイルに解析する通常の処理は実行されません。</span><span class="sxs-lookup"><span data-stu-id="e502c-104">When the EDI receive pipeline preserves an inbound batched EDI interchange, the normal parsing of each transaction set/message into separate intermediate XML files is not performed.</span></span> <span data-ttu-id="e502c-105">EDI 受信パイプラインは、インターチェンジをトランザクション セットまたはメッセージに分割せず、1 つのドキュメントとして処理します。</span><span class="sxs-lookup"><span data-stu-id="e502c-105">The EDI receive pipeline processes the interchange as one document without splitting the transaction sets/messages.</span></span> <span data-ttu-id="e502c-106">これが発生したときに、**受信バッチ処理オプション**プロパティに設定されて**インターチェンジの保存 - エラーでインターチェンジを中断**または **- インターチェンジの保存時にトランザクション セットを中断エラー**します。</span><span class="sxs-lookup"><span data-stu-id="e502c-106">This occurs when the **Inbound batch processing option** property is set to **Preserve Interchange - suspend Interchange on Error** or **Preserve Interchange - suspend Transaction Sets on Error**.</span></span>  

 <span data-ttu-id="e502c-107">**スキーマの検証**</span><span class="sxs-lookup"><span data-stu-id="e502c-107">**Schema Validation**</span></span>  

 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="e502c-108">は、保存されたバッチのエンベロープを、バッチ スキーマとサービス スキーマを使用して検証します。</span><span class="sxs-lookup"><span data-stu-id="e502c-108">validates the envelope of a preserved batch using the batch schemas and the service schemas.</span></span> <span data-ttu-id="e502c-109">保存されたメッセージのルート ノードの検証にはバッチ スキーマが使用され、インターチェンジ、グループ、およびトランザクション セットのヘッダーとトレーラーの検証にはサービス スキーマが使用されます。</span><span class="sxs-lookup"><span data-stu-id="e502c-109">The batch schema is used to validate the root node of the preserved message; the service schemas are used to validate the interchange, group, and transaction set headers and trailers.</span></span> <span data-ttu-id="e502c-110">バッチ スキーマの詳細については、次を参照してください。 [EDI のバッチ スキーマ](../core/edi-batch-schemas.md)します。</span><span class="sxs-lookup"><span data-stu-id="e502c-110">For more information about the batch schemas, see [EDI Batch Schemas](../core/edi-batch-schemas.md).</span></span> <span data-ttu-id="e502c-111">サービス スキーマの詳細については、次を参照してください。 [EDI サービスと管理スキーマ](../core/edi-service-and-control-schemas.md)します。</span><span class="sxs-lookup"><span data-stu-id="e502c-111">For more information on the service schemas, see [EDI Service and Control Schemas](../core/edi-service-and-control-schemas.md).</span></span>  

 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="e502c-112">は、バッチ インターチェンジ内のドキュメントを、プロジェクト内のドキュメント スキーマを使用して検証します。</span><span class="sxs-lookup"><span data-stu-id="e502c-112">validates the documents in a batched interchange using the document schemas in your project.</span></span>  

 <span data-ttu-id="e502c-113">**受信側の処理**</span><span class="sxs-lookup"><span data-stu-id="e502c-113">**Receive-Side Processing**</span></span>  

 <span data-ttu-id="e502c-114">EDI 逆アセンブラーは、保存されたバッチを次のように処理します。</span><span class="sxs-lookup"><span data-stu-id="e502c-114">The EDI Disassembler processes preserved batches as follows:</span></span>  

- <span data-ttu-id="e502c-115">EDI 逆アセンブラーは、保存するバッチを処理するとき、フラット ファイル形式を XML に変換し、X12InterchangeXML または EdifactInterchangeXML を XML ルート ノードとして追加します。</span><span class="sxs-lookup"><span data-stu-id="e502c-115">When the EDI Disassembler processes a batch to be preserved, it converts the flat file format to XML and adds the X12InterchangeXML or EdifactInterchangeXML as the XML root node.</span></span> <span data-ttu-id="e502c-116">これにより、送信パイプラインに対して、バッチ インターチェンジを保存する必要があること、および、ルート ノードの検証に Edifact_BatchSchema スキーマまたは X12_BatchSchema スキーマを使用する必要があることが通知されます。</span><span class="sxs-lookup"><span data-stu-id="e502c-116">This indicates to the send pipeline that the batched interchange should be preserved, and indicates that the Edifact_BatchSchema schema or X12_BatchSchema schema should be used to validate the root node.</span></span>  

- <span data-ttu-id="e502c-117">逆アセンブラーでは、XML メッセージから、バッチ EDI インターチェンジを生成するときに、送信パイプラインで使用される区切り記号を示すためにバッチ化された XML メッセージのルート ノードに DelimiterSetSerializedData 属性を追加します。</span><span class="sxs-lookup"><span data-stu-id="e502c-117">The Disassembler adds the DelimiterSetSerializedData attribute to the root node of a batched XML message to indicate the separators to be used by the send pipeline when generating a batched EDI interchange from the XML message.</span></span> <span data-ttu-id="e502c-118">XML メッセージが保存されたバッチである場合、受信パイプラインは、受信メッセージで使用されている区切り記号からこの属性を取得します。</span><span class="sxs-lookup"><span data-stu-id="e502c-118">When the XML message is a preserved batch, the attribute is populated by the receive pipeline from the separators used in the incoming message.</span></span> <span data-ttu-id="e502c-119">バッチ XML がバッチ処理オーケストレーションによって生成されるとき、この属性はアグリーメントのプロパティで設定された値から取得されます。</span><span class="sxs-lookup"><span data-stu-id="e502c-119">When the batched XML is produced by the batching orchestration, the attribute is populated from the value specified in agreement properties.</span></span>  

- <span data-ttu-id="e502c-120">逆アセンブラーは、保存された XML エンコード インターチェンジを作成するときに `http://schemas.microsoft.com/BizTalk/EDI/EDIFACT/2006/InterchangeXML` 名前空間または `http://schemas.microsoft.com/BizTalk/EDI/X12/2006/InterchangeXML` 名前空間を使用します。</span><span class="sxs-lookup"><span data-stu-id="e502c-120">The Disassembler uses one of the following namespaces when it creates an XML-encoded preserved interchange: `http://schemas.microsoft.com/BizTalk/EDI/EDIFACT/2006/InterchangeXML` or `http://schemas.microsoft.com/BizTalk/EDI/X12/2006/InterchangeXML`.</span></span>  

- <span data-ttu-id="e502c-121">逆アセンブラーは、インターチェンジを保存されたインターチェンジとして識別するために、コンテキスト プロパティ `EDI.ReuseEnvelope == True` を昇格させます。</span><span class="sxs-lookup"><span data-stu-id="e502c-121">The Disassembler promotes the context property `EDI.ReuseEnvelope == True` to identify the interchange as preserved.</span></span> <span data-ttu-id="e502c-122">これにより、保存されたすべてのバッチ インターチェンジをサブスクライブする送信ポートを作成できます。</span><span class="sxs-lookup"><span data-stu-id="e502c-122">This enables you to create a send port that subscribes to all batched interchanges that are preserved.</span></span>  

  > [!NOTE]
  >  <span data-ttu-id="e502c-123">場合、HIPAA ドキュメントをサブドキュメントに分割されませんが、**受信バッチ処理オプション**に設定されている**インターチェンジの保存**します。</span><span class="sxs-lookup"><span data-stu-id="e502c-123">A HIPAA document will not be split into subdocuments if the **Inbound batch processing option** is set to **Preserve Interchange**.</span></span> <span data-ttu-id="e502c-124">これは、HIPAA スキーマ内のサブドキュメントの作成を中断するための注釈が [はい] に設定されている場合も同じです。</span><span class="sxs-lookup"><span data-stu-id="e502c-124">This will be the case even if the subdocument creation break annotation within the HIPAA schema is set to "Yes".</span></span>  

  <span data-ttu-id="e502c-125">**エラー処理**</span><span class="sxs-lookup"><span data-stu-id="e502c-125">**Error Processing**</span></span>  

  <span data-ttu-id="e502c-126">選択した場合に**インターチェンジの保存 - エラーでインターチェンジを中断**の**受信バッチ処理オプション**、インターチェンジ全体は、エラーの結果として中断されます。</span><span class="sxs-lookup"><span data-stu-id="e502c-126">If you have selected **Preserve Interchange - suspend Interchange on Error** for the **Inbound batch processing option**, the entire interchange will be suspended as a result of any error.</span></span> <span data-ttu-id="e502c-127">保存されたインターチェンジ全体が [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] によって中断されると、インターチェンジの構造と、インターチェンジ内のトランザクション セットの順序が保存されます。</span><span class="sxs-lookup"><span data-stu-id="e502c-127">If [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] suspends the entire preserved interchange, the interchange structure and the ordering of the transaction sets within the interchange will be preserved.</span></span> <span data-ttu-id="e502c-128">エラーが発生した場合、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] は、統合された 1 つのエラー エントリをイベント ログに送信します。</span><span class="sxs-lookup"><span data-stu-id="e502c-128">In the event of an error, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will post one consolidated error entry in the event log.</span></span> <span data-ttu-id="e502c-129">このエントリには、インターチェンジ、機能グループ、およびトランザクション セット レベルのすべてのエラーが含まれます。</span><span class="sxs-lookup"><span data-stu-id="e502c-129">This entry will include any errors in the interchange, functional group, and transaction set levels.</span></span>  

  <span data-ttu-id="e502c-130">選択した場合に**インターチェンジの保存 - エラーのトランザクション セットを中断**受信のバッチ処理オプション、EDI 受信パイプラインはインターチェンジから無効なトランザクション セットをすべてをドロップし、作成を続行インターチェンジ XML。</span><span class="sxs-lookup"><span data-stu-id="e502c-130">If you have selected **Preserve Interchange - suspend Transaction Sets on Error** for the inbound batch processing option, the EDI receive pipeline will drop any invalid transaction set from the interchange and proceed with the creation of the interchange XML.</span></span> <span data-ttu-id="e502c-131">作成されるインターチェンジ XML は、既存の制御セグメントのエンベロープ (X12 エンコード インターチェンジの場合は ISA、GS、GE、および IEA、EDIFACT エンコード インターチェンジの場合は UNA、UNB、UNG、UNE および UNZ) を再利用するために必要です。</span><span class="sxs-lookup"><span data-stu-id="e502c-131">The resulting interchange XML is required to reuse the existing control segment envelopes (ISA, GS, GE, and IEA for X12-encoded interchanges or UNA, UNB, UNG, UNE, and UNZ for EDIFACT-encoded interchanges).</span></span> <span data-ttu-id="e502c-132">このインターチェンジは正常に処理されたドキュメントと見なされますが、イベント ビューアではエラーが報告され、機能確認ドキュメントが生成される場合は機能確認ドキュメントでもエラーが報告されます。</span><span class="sxs-lookup"><span data-stu-id="e502c-132">The interchange will be considered a successfully processed document; however, the error will be reported in the event viewer and if a functional acknowledgment is generated, it will report the error.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="e502c-133">イベント ログ エラーが発生したトランザクション セットごとに個別のエントリが作成されます。</span><span class="sxs-lookup"><span data-stu-id="e502c-133">will create a separate entry in the event log for each transaction set that is in error.</span></span> <span data-ttu-id="e502c-134">場合[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ドロップ誤ったトランザクション セットがインターチェンジのインターチェンジの構造からと順序付けは維持されません。</span><span class="sxs-lookup"><span data-stu-id="e502c-134">If [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] drops an erroneous transaction set from the interchange, the interchange structure and ordering may not be preserved.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="e502c-135">インターチェンジ内のトランザクション セットの数が更新されます。</span><span class="sxs-lookup"><span data-stu-id="e502c-135">will update the number of transaction sets in the interchange.</span></span>  

  <span data-ttu-id="e502c-136">以下の特殊なケースが、エラー発生時のトランザクション セットの中断に当てはまります。</span><span class="sxs-lookup"><span data-stu-id="e502c-136">The following special cases apply to suspending transaction sets on error:</span></span>  

- <span data-ttu-id="e502c-137">グループ内のすべてのトランザクション セットが無効である場合、各トランザクション セットが個別に中断されます。しかし、生成されるインターチェンジ XML には、トランザクション セットを持たないグループ制御セグメントが含まれます (これは、トランザクション セットがドロップされたためです)。</span><span class="sxs-lookup"><span data-stu-id="e502c-137">If all transaction sets in a group are invalid, then each transaction set is suspended individually; however, the group control segments (with no transaction sets, because they have been dropped) will be included in the generated interchange XML.</span></span>  

- <span data-ttu-id="e502c-138">インターチェンジ内のすべてのトランザクション セットが無効である場合、各トランザクション セットが個別に中断されます。しかし、生成されるインターチェンジ XML には、トランザクション セットを持たないインターチェンジ制御セグメントが含まれます (これは、トランザクション セットがドロップされたためです)。</span><span class="sxs-lookup"><span data-stu-id="e502c-138">If all transaction sets in an interchange are invalid, then each transaction set is suspended individually; however, the interchange control segments (with no transaction sets, because they have been dropped) will be included in the generated interchange XML.</span></span>  

- <span data-ttu-id="e502c-139">グループ制御セグメントが無効である場合、グループ内のすべてのトランザクション セットが個別に中断されます。</span><span class="sxs-lookup"><span data-stu-id="e502c-139">If the group control segments are invalid, all transaction sets in the group will be suspended individually.</span></span>  

- <span data-ttu-id="e502c-140">インターチェンジ制御セグメントが無効である場合、インターチェンジ内のすべてのトランザクション セットが個別に中断され、インターチェンジ XML は生成されません。</span><span class="sxs-lookup"><span data-stu-id="e502c-140">If the interchange control segments are invalid, all transaction sets in the interchange will be suspended individually, and the interchange XML will not be generated.</span></span> <span data-ttu-id="e502c-141">拒否されたインターチェンジのログがイベント ビューアーに作成されます。</span><span class="sxs-lookup"><span data-stu-id="e502c-141">A log in the event viewer will be created for the rejected interchange.</span></span>
