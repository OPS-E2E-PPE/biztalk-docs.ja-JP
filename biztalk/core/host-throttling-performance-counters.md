---
title: ホスト制限パフォーマンス カウンター |Microsoft ドキュメント
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- host throttling, performance counters
ms.assetid: b9090d1c-86be-40db-b814-cc116a426d95
caps.latest.revision: 22
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 2ca80f44b9f1244a340e9a9892593ae42ba4b4e9
ms.sourcegitcommit: 5abd0ed3f9e4858ffaaec5481bfa8878595e95f7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/28/2017
ms.locfileid: "25971872"
---
# <a name="host-throttling-performance-counters"></a>ホスト制限パフォーマンス カウンター
このセクションでは、ホスト制限に影響するシステム パラメーターを測定するパフォーマンス モニター カウンターについて説明します。 次のパフォーマンス カウンターは各ホスト インスタンスにアクセスできる、 **BizTalk:Message Agent**パフォーマンス オブジェクト カテゴリ。  
  
|カウンター|Description|  
|-------------|-----------------|  
|Active instance count|メモリ内でアクティブなサービス インスタンスの数。 オーケストレーション エンジンの場合、サービス インスタンスは、オーケストレーション スケジュールの各実行インスタンスです。 エンド ポイント マネージャーの場合、サービス インスタンスは、単一のステートレスなメッセージまたはステートフルなメッセージのコレクションのいずれかに対応します。 **注:** ステートフルなインスタンスがインスタンスに関連付けられているメッセージに関する特定の状態情報を維持します。 ステートフルなインスタンスに属するメッセージは、何らかの形で相互に関連しています。 たとえば、順序に関する情報を維持する順次送信ポートは、ステートフルなインスタンスと見なされます。 ほとんどのメッセージング シナリオには、各メッセージが相互に完全に独立して処理されるステートレスなインスタンスが含まれます。 そのような個々のステートレス インスタンスは、EPM 内で単一のメッセージに対応します。|  
|Database session|使用中のメッセージ ボックス データベースへの同時接続の数。|  
|Database session threshold|同時実行データベース セッションの現在のしきい値。 初期設定は、**データベース接続**値を**リソース ベースの制限**] タブの [**設定ダッシュ ボード**です。 この値には、プロセスのデータベース セッションの使用量に基づいて自動的に調整されました。 同時実行データベース セッションの数がこのしきい値を超えると、ホスト制限が実施されます。|  
|データベース サイズ|このプロセスが公開したデータベース キューにあるメッセージの数。 この値は、すべてのホストのキュー テーブル内の項目数およびスプールと追跡テーブル内の項目数によって測定されます。 プロセスが複数のキューに公開している場合、このカウンターには、すべてのキューの加重平均が反映されます。 **注:** ホストを再起動すると、メモリに保持されている統計は失われます。 オーバーヘッドを考慮する必要があるので、BizTalk Server が統計の収集を再開するのは、再開したホスト プロセスにおいて、100 件の公開されたメッセージが存在し、これらのメッセージがすべての公開されたメッセージの 5% に相当する場合だけです。|  
|High database session|-0: 通常<br />-1: データベース セッションの数がしきい値を超えています|  
|High database size|-0: 通常<br />-1: データベースのサイズがしきい値を超えました<br /><br /> このカウンターは、条件のいずれかに登録されている場合、いずれかの値に設定されます、 **DB 内の数をメッセージ**しきい値が発生します。 [リソース ベースの調整設定の変更方法](../core/how-to-modify-resource-based-throttling-settings.md)この制限しきい値に関する情報を提供します。|  
|High in-process message count|-0: 通常<br />-1: インプロセス メッセージ カウントが制限を超えています|  
|High message delivery rate|-0: 通常<br />-1: メッセージの配信率は、メッセージ処理率を超えています。|  
|High message publishing rate|-0: 通常<br />-1: 発行要求レートは、完了の割合を超えています。|  
|High process memory|-0: 通常<br />-1: プロセスのメモリがしきい値を超えています|  
|High system memory|-0: 通常<br />-1: システム メモリがしきい値を超えています|  
|High thread count|-0: 通常<br />-1: スレッド数がしきい値を超えています|  
|In-process message count|XLANG エンジンまたは送信メッセージング エンジンに配信されるインメモリ メッセージでまだ処理されていないメッセージの数。|  
|In-process message count threshold|インプロセス メッセージ数の現在のしきい値。|  
|Message delivery delay (ms)|各メッセージ配信バッチで発生している現在の遅延 (ミリ秒)。メッセージ配信が制限されている場合に使用されます。|  
|Message delivery incoming rate|指定されたサンプル間隔で 1 秒あたりにオーケストレーション エンジンまたはメッセージング エンジンに配信されたメッセージの数。|  
|Message delivery outgoing rate|指定されたサンプル間隔で 1 秒あたりにオーケストレーション エンジンまたはメッセージング エンジンで処理されたメッセージの数。|  
|Message delivery throttling state|システムでメッセージ配信が制限されているかどうかを示すフラグ。XLANG メッセージ処理および送信トランスポートに影響します。<br /><br /> -0: 制限なし。<br />-1: 不均衡メッセージ配信レートに起因する制限 (入力率が出力率を超えています)<br />-3: 高に起因する制限インプロセス メッセージ カウント<br />-4: プロセス メモリ不足に起因する制限<br />-5: システム メモリ不足に起因する制限<br />-9: 高いスレッド数に起因する制限<br />-10: 配信に対してオーバーライドをユーザーに起因する制限|  
|Message delivery throttling state duration|システムがこの状態になってからの秒数。 ホストが制限されている場合は、制限が適用されている時間。制限されていない場合は、制限が適用されてからの時間。|  
|Message delivery throttling user override|このカウンターは、エンジンによって監視されるユーザー指定を反映します。値の意味を以下に示します。<br /><br /> -0: オーバーライドはありません<br />-1: 常にメッセージの配信を制限します。<br />-2: メッセージの配信を制限しません。<br /><br /> このオーバーライドは構成可能で、**割合に基づく制限**] タブの [**設定ダッシュ ボード**です。|  
|Message publishing delay (ms)|各メッセージ公開バッチで発生している現在の遅延 (ミリ秒)。このカウンターは、メッセージ公開が制限されている場合、およびバッチが制限から除外されていない場合に使用されします。|  
|Message publishing incoming rate|指定されたサンプル間隔で 1 秒あたりに公開のためにデータベースに送信されたメッセージの数。|  
|Message publishing outgoing rate|指定されたサンプル間隔で 1 秒あたりに実際にデータベースで公開されたメッセージの数。|  
|Message publishing throttling state|システムでメッセージ公開が制限されているかどうかを示すフラグ。XLANG メッセージ処理および受信トランスポートに影響します。<br /><br /> -0: 制限なし。<br />-2: 不均衡メッセージ公開の割合に起因する制限 (入力率が出力率を超えています)<br />-4: プロセス メモリ不足に起因する制限<br />-5: システム メモリ不足に起因する制限<br />-6: データベース サイズの増加に起因する制限<br />-8: 高いセッション カウントに起因する制限<br />-9: 高いスレッド数に起因する制限<br />-11: パブリッシングに対してオーバーライドをユーザーに起因する制限|  
|Message publishing throttling state duration|システムがこの状態になってからの秒数。 ホストが制限されている場合は、制限が適用されている時間。制限されていない場合は、制限が適用されてからの時間。|  
|Message publishing throttling user override|このカウンターは、エンジンによって監視されるユーザー指定を反映します。値の意味を以下に示します。<br /><br /> -0: オーバーライドはありません<br />-1: 常にメッセージの公開を制限します。<br />-2: メッセージの公開を制限しません。<br /><br /> このオーバーライドは構成可能で、**割合に基づく制限**] タブの [**設定ダッシュ ボード**です。|  
|Physical memory usage (MB)|すべてのプロセスで使用されているコンピューターの物理メモリの量 (MB)。|  
|Process memory usage (MB)|プロセス メモリの消費量 (MB)。 プロセスの作業セットのサイズの最大値で、プロセスでページ ファイルに割り当てられている総容量です。|  
|Process memory usage threshold (MB)|プロセス メモリ消費の現在のしきい値 (MB)。 初期設定は、**プロセス仮想メモリ**値**設定ダッシュ ボード**です。 比率が設定されている場合、この値は、コミットに使用可能なメモリに基づいて計算されます。|  
|Service class ID|サービス クラス GUID の最初の部分で、このパフォーマンス カウンター インスタンスに対応する小数値。 プロセスが複数のサービス クラスをホストする場合があります。その場合は、最もアクティブなサービス クラスのデータがメッセージ エージェント パフォーマンス カウンターに表示されます。|  
|Thread count|プロセス内で使用されているスレッドの数。|  
|Thread count threshold|プロセス内のスレッドの数に対する現在のしきい値。 初期設定は、**スレッド**値を**リソース ベースの制限**] タブの [**設定ダッシュ ボード**です。 この値は、現在のプロセスのスレッド要件に基づいて自動的に調整されます。 プロセス内のスレッドの数がこのしきい値を超えると、ホスト制限が実施されます。|  
|Total batches committed|サービス クラスがコミットされたデータベース バッチの数。|  
|Total messages delivered|オーケストレーション エンジンまたはエンド ポイント マネージャー (EPM) に配信された送信メッセージの数。|  
|Total messages published|公開されたメッセージの数。|  
  
> [!NOTE]
>  **BizTalk:Message Agent**パフォーマンス カウンターがホストの制限の動作を分析するという明確な目的に提供され、したがってデータは取得されません、指定したホストがアクティブにドキュメントを処理しない限り、します。 この動作は、アクティビティの制限が発生していないときにパフォーマンス モニターでシステム スレッドが消費されることを防止するように設計されています。  
  
## <a name="to-access-performance-counters"></a>パフォーマンス カウンターにアクセスするには  
 パフォーマンス カウンターにアクセスするには、次の手順を実行します。  
  
#### <a name="if-you-are-using-windows-2008"></a>Windows 2008 を使用している場合  
  
1.  をクリックして**開始**、 をポイント**管理ツール**、順にクリック**パフォーマンス モニター**です。  
  
2.  **パフォーマンス モニター** ] ダイアログ ボックスで、展開**の監視ツールを**[**パフォーマンス モニター**、順にクリック**追加**です。  
  
3.  **カウンターの追加**] ダイアログ ボックスから、**使用可能なカウンター**一覧で、展開、 **[BizTalk:Message Agent**パフォーマンス カウンター オブジェクトとカウンターを選択します。監視されます。  
  
4.  **インスタンスの選択したオブジェクト**一覧をクリックして、選択したカウンターを監視する特定のインスタンスを選択**追加**です。  使用可能なカウンターのすべてのインスタンスを選択するには、次のように選択します。 \<**すべてのインスタンス**\>です。  
  
5.  カウンターを追加すると、をクリックして**OK**です。  
  
     選択したパフォーマンス カウンターが表示されます、**パフォーマンス モニター**画面。  
  
## <a name="see-also"></a>参照  
 [設計の推奨事項の調整](../core/throttling-design-recommendations.md)   
 [BizTalk Server がホスト制限を実装する方法](../core/how-biztalk-server-implements-host-throttling.md)   
 [BizTalk Server パフォーマンス チューニングのための設定ダッシュボードの使用](../core/using-settings-dashboard-for-biztalk-server-performance-tuning.md)