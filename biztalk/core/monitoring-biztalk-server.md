---
title: 正常性と組み込みのツールを使用してパフォーマンスを監視 |Microsoft ドキュメント
description: 可用性、ヘルス、および BizTalk Server、およびモニター SQL エージェント ジョブの監視のパフォーマンス
ms.custom: ''
ms.date: 01/14/2016
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 96e244dc-b826-4a9f-a4e1-6dabc41eb144
caps.latest.revision: ''
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e6652c962d8ef522128dfb4c9febeca55ce42669
ms.sourcegitcommit: 8418b1a8f38b7f56979cd6e203f0b591e2f40fe1
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/23/2018
---
# <a name="monitoring-biztalk-server"></a>BizTalk Server の監視
BizTalk Server のアプリケーションとインフラストラクチャを定期的に監視して、見つかった問題を解決し、ユーザーが常に BizTalk Server アプリケーションにアクセスできるようにします。 監視の目的は、例外が検出されないままになる (したがって解決されないままになる) 時間を最小限に抑えることです。 また監視は、例外の原因となる状況を見つけるのにも役立ちます。  
  
 BizTalk Server を監視するときには、予期しない動作や異常な動作を探す必要があります。 監視は手動で行うことも、自動で行うこともできます。 BizTalk Server 管理コンソールを使用して BizTalk Server インフラストラクチャの稼働状況を監視できます。 BizTalk Server 管理コンソールを使用すると、BizTalk Server アプリケーションの稼働状況を監視し、根本原因分析を行って、問題の根本原因を特定できます。 」を参照してください。 BizTalk Server を監視する際には、次の点に注意してください。  
  
-   インフラストラクチャが正常でもアプリケーションは正常でない場合があります (アプリケーションが無効なメッセージを受信して処理できない場合など)。  
  
-   インフラストラクチャに異常があってもアプリケーションは正常に実行されている場合もあります (サーバーがダウンしても負荷を引き継ぐのに十分なサーバーがホストに割り当てられている場合など)。  
  
-   インフラストラクチャの問題がアプリケーションの問題のように見える場合があります (サーバーがダウンしているためにメッセージの処理が遅れている場合など)。  
  
 BizTalk Server とアプリケーションの監視は、次の 3 つのカテゴリに大きく分類できます。  
  
-   可用性の監視  
  
-   正常性の監視  
  
-   パフォーマンスの監視  
  
## <a name="availability-monitoring"></a>可用性の監視  
 「BizTalk Server アプリケーションを最適に実行を防止システムまたはアプリケーションのリソースの低下ですか?」という質問に回答の可用性の監視 こうした問題は、ほぼ例外なくシステム レベルの問題 (サービスや接続の可用性の問題など) です。 たとえば、エンタープライズ シングル サインオン サービスが停止しているためにアダプターがエラーになる場合、それは可用性の問題です。 ホストに割り当てられているサーバーのいずれかでエラーが発生して、アプリケーションのメッセージ処理が遅れている場合も可用性の問題です。 同様に、アプリケーションが停止してメッセージを処理できない場合も可用性の問題です。 次の表に、可用性の監視のためのツールを示します。  
  
|ツール|タスク|  
|----------|----------|  
|BizTalk Server 管理コンソール|BizTalk Server 管理コンソールの [グループ ハブ] ページで、アプリケーションやそのコンポーネント (ポート/オーケストレーション) が停止していないかどうかを確認する必要があります。|  
|イベント ビューアー|アダプターの接続の問題やサービスの停止などをチェックします。|  
  
## <a name="health-monitoring"></a>ヘルス状態の監視  
 稼働状況の監視では、"正常でないアプリケーションやリソースがないかどうか" を確認できます。 たとえば、アプリケーションやその構成アイテムで現在例外的な状態が発生していないかどうかや、 メッセージ ペイロードのデータが無効なために保留されているメッセージがないかどうかを確認できます。 次の表に、稼働状況の監視のためのツールを示します。  
  
|ツール|タスク|  
|----------|----------|  
|BizTalk Health Monitor ツール (BHM)|MMC スナップインで、BizTalk Server 環境のヘルスを監視するユーザーにとって重要かつ重要ではない問題を検出し、メンテナンス タスクを実行します。  [BizTalk ヘルス モニターをダウンロード](https://www.microsoft.com/download/details.aspx?id=43716)します。|  
|BizTalk Server 管理コンソール|BizTalk Server 管理コンソールの [グループ ハブ] ページとクエリ ページを使用してアプリケーションの状態の問題を特定し、その原因を分析します。|  
|イベント ビューアー|メッセージやオーケストレーションの処理の間に発生した問題を検出します。|  
  
## <a name="performance-monitoring"></a>パフォーマンス監視  
 パフォーマンス監視では、"システムの処理がどのくらい効率的に行われているか" を確認できます。 この種の監視では、主にデータベースやディスクのような物理的リソースへの負荷が焦点になります。 たとえば、CPU 使用率が常に 90 ～ 100% になっていて、メッセージのバックログが発生している場合は、コンピューター レベルのパフォーマンスに問題があります。 次の表に、パフォーマンス監視のためのツールを示します。  
  
|ツール|タスク|  
|----------|----------|  
|SQL クエリ アナライザー|データベースのサイズと内容を監視して、システムの問題を診断します。|  
|BizTalk Server 管理コンソール|[グループ ハブ] ページに主要なパフォーマンス基準 (現在アクティブ、退避済み、実行準備完了、スケジュール済み、中断などの状態にある BizTalk Server アプリケーションのサービス インスタンスの数など) が表示されます。|  
|ビジネス アクティビティ監視 (BAM)|ビジネス アプリケーションに関係する主要業績評価指標を追跡するビジネス プロセスの特定のステージを指定できます。|  
  
## <a name="biztalk-server-monitoring"></a>BizTalk Server の監視  
 実行することができます、 **Monitor BizTalk Server** 管理、メッセージ ボックスで、または DTA データベースにおける既知の問題を識別するために SQL エージェント ジョブ。 このジョブは、BizTalk Server 管理コンソールで BizTalk グループを構成するとき、または以前のバージョンから BizTalk をアップグレードするときに作成されます。  
  
 Monitor BizTalk Server ジョブは、管理、メッセージ ボックス、および DTA データベースで次の問題をスキャンします。  
  
> [!NOTE]
>  Monitor BizTalk Server ジョブは、問題のスキャンしか行いません。 検出された問題の修正は行いません。  
  
-   参照のないメッセージ  
  
-   参照カウントのないメッセージ  
  
-   0 未満の参照カウントのあるメッセージ  
  
-   スプール行のないメッセージ参照  
  
-   インスタンスのないメッセージ参照  
  
-   インスタンスのないインスタンス状態  
  
-   対応するインスタンスのないインスタンス サブスクリプション  
  
-   孤立した DTA サービス インスタンス  
  
-   孤立した DTA サービス インスタンスの例外  
  
-   TDDS は、グローバル追跡オプションが有効になっている場合は、ホスト インスタンス上で実行されません。  
  
 Monitor BizTalk Server ジョブは、週に 1 回実行するよう構成および自動化されています。 このジョブは計算の負荷が高いため、ダウンタイムまたは低トラフィック中にスケジュールすることをお勧めします。  
  
 ジョブは問題を発見するとエラーになります。エラー文字列には、検出された問題の数が含まれます。 問題が見つからない場合は、正常に実行されます。 ジョブ履歴に詳細を表示できます。 管理者特権を使用してジョブを実行する場合、エラー文字列は (ジョブ履歴に加えて) イベント ビューアーにも記録されます。  
  
## <a name="troubleshooting"></a>トラブルシューティング  
 BizTalk Server アプリケーション (インフラストラクチャではなく) の状態の問題が見つかったら、BizTalk Server 管理コンソールの [グループ ハブ] ページとクエリ ページを使用して問題を分析できます。 BizTalk Server 管理コンソールでは、構成、展開、およびトラブルシューティングの操作が統合されており、問題を特定した後、構成や展開に関連する問題を管理コンソール内で修正できます。 一般に、アプリケーションの問題のほとんどは、正しく処理されないメッセージに起因しています (中断されたサービス インスタンス、再試行中のポート、再アクティブ化されていない退避済みインスタンスなどとして現れる場合もあります)。  
  
 [グループ ハブ] ページとクエリ ページを使用すると、サービス インスタンスを (実行中、中断、退避済みなどの状態に関係なく) アプリケーション、エラーの種類、サービスの種類、ホストなどでグループ化して、さまざまなエラーを切り分けて 1 つずつ調査および修正できます。 また、BizTalk Server 管理コンソールから追跡データを監視して、メッセージ フローの履歴や、オーケストレーションやルール セットの実行の履歴を調査することもできます。 追跡データには、BizTalk Server アプリケーションに関する履歴データが含まれています。  
  
 BizTalk 管理コンソールで追跡を有効にしてある場合は、追跡でクエリを使用してメッセージ フローとサービス インスタンスを検索することができます。 たとえば、メッセージを検索して、その種類 (スキーマ) や、プロパティと値 (顧客の名前など) を確認するだけの場合に便利です。  
  
 次のトピックでは、BizTalk Server 管理コンソールの [グループ ハブ] ページとクエリ ページを使用した監視とトラブルシューティングについて説明します。 その他、トラブルシューティングや根本原因分析に役立つ追跡についても説明します。  
  
## <a name="more-good-stuff"></a>適切な対象の拡張  
  
-   [BizTalk Server 管理コンソールの使用](../core/using-the-biztalk-server-administration-console.md)  
  
-   [追跡メッセージを表示し、インスタンス データ](../core/viewing-tracked-message-and-instance-data.md)  
  
-   [EDI および AS2 ソリューションの監視](../core/monitoring-edi-and-as2-solutions.md)  
  
-   [BizTalk Server アプリケーションにおけるアイテム間の依存関係の追跡](../core/tracking-dependencies-between-artifacts-in-a-biztalk-server-application.md)

- [パフォーマンス カウンター](performance-counters.md)