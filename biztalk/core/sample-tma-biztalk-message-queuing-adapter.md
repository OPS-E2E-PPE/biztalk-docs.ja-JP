---
title: サンプル TMA:BizTalk メッセージ キュー アダプタ |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- security examples [TMA], MSMQ adapters
- architecture, examples
- MSMQ adapters, TMA
- DFD, MSMQ adapters
- MSMQ adapters, data flow
ms.assetid: 15b4a540-2fcd-4668-b4b4-757f23ebd83e
caps.latest.revision: 23
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 27187bcb688ed50d6935fb7dd386cdaad6f59ede
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65393879"
---
# <a name="sample-tma-biztalk-message-queuing-adapter"></a><span data-ttu-id="a6616-102">サンプル TMA:BizTalk メッセージ キュー アダプタ</span><span class="sxs-lookup"><span data-stu-id="a6616-102">Sample TMA: BizTalk Message Queuing Adapter</span></span>
<span data-ttu-id="a6616-103">このトピックでは、サンプル アーキテクチャの BizTalk メッセージ キュー アダプター シナリオ向けの脅威モデル分析 (TMA) について説明します。</span><span class="sxs-lookup"><span data-stu-id="a6616-103">This topic presents the threat model analysis (TMA) for the BizTalk Message Queuing adapter scenario for the sample architecture.</span></span>  
  
## <a name="step-1-collect-background-information-biztalk-message-queuing-adapter-scenario"></a><span data-ttu-id="a6616-104">手順 1.</span><span class="sxs-lookup"><span data-stu-id="a6616-104">Step 1.</span></span> <span data-ttu-id="a6616-105">背景情報 (BizTalk メッセージ キュー アダプタ シナリオ) の収集します。</span><span class="sxs-lookup"><span data-stu-id="a6616-105">Collect Background Information (BizTalk Message Queuing Adapter Scenario)</span></span>  
 <span data-ttu-id="a6616-106">このセクションでは、サンプル アーキテクチャの BizTalk メッセージ キュー アダプタ シナリオ向けのデータ フロー ダイアグラム (DFD) について説明します。</span><span class="sxs-lookup"><span data-stu-id="a6616-106">This section provides the data flow diagram (DFD) for the BizTalk Message Queuing adapter scenario for the sample architecture.</span></span> <span data-ttu-id="a6616-107">次の図は、HTTP アダプタと SOAP アダプタ シナリオのサンプル アーキテクチャを示しています。</span><span class="sxs-lookup"><span data-stu-id="a6616-107">The following figure shows the sample architecture for the HTTP and SOAP adapters scenario.</span></span>  
  
 <span data-ttu-id="a6616-108">**BizTalk メッセージ キュー アダプタ シナリオのサンプル アーキテクチャを図 1**</span><span class="sxs-lookup"><span data-stu-id="a6616-108">**Figure 1 Sample architecture for the BizTalk Message Queuing adapter scenario**</span></span>  
  
 <span data-ttu-id="a6616-109">![BizTalk メッセージ キューのアーキテクチャのサンプル](../core/media/tdi-sec-refarch-msmq.gif "TDI_Sec_RefArch_MSMQ")</span><span class="sxs-lookup"><span data-stu-id="a6616-109">![Sample architecture for BizTalk Message Queuing](../core/media/tdi-sec-refarch-msmq.gif "TDI_Sec_RefArch_MSMQ")</span></span>  
  
 <span data-ttu-id="a6616-110">その他のすべての背景情報の使用シナリオ、すべて同じで既に説明した[サンプル シナリオの背景情報](../core/background-information-for-sample-scenarios.md)します。</span><span class="sxs-lookup"><span data-stu-id="a6616-110">All the other background information is the same for all our usage scenarios, and is described previously in [Background Information for Sample Scenarios](../core/background-information-for-sample-scenarios.md).</span></span>  
  
### <a name="data-flow-diagram"></a><span data-ttu-id="a6616-111">データ フロー ダイアグラム</span><span class="sxs-lookup"><span data-stu-id="a6616-111">Data Flow Diagram</span></span>  
 <span data-ttu-id="a6616-112">次の図は、BizTalk メッセージ キュー アダプタを使用する際の、サンプル アーキテクチャの DFD を示しています。</span><span class="sxs-lookup"><span data-stu-id="a6616-112">The following figure shows the DFD for the sample architecture when you use the BizTalk Message Queuing adapter.</span></span>  
  
 <span data-ttu-id="a6616-113">**BizTalk メッセージ キュー アダプタ シナリオのサンプル アーキテクチャの図 2 の DFD**</span><span class="sxs-lookup"><span data-stu-id="a6616-113">**Figure 2 DFD for the sample architecture of the BizTalk Message Queuing adapter scenario**</span></span>  
  
 <span data-ttu-id="a6616-114">![BizTalk メッセージ キューのアーキテクチャのサンプル](../core/media/tdi-sec-refarch-dfd-msmq.gif "TDI_Sec_RefArch_DFD_MSMQ")</span><span class="sxs-lookup"><span data-stu-id="a6616-114">![Sample architecture for BizTalk Message Queuing](../core/media/tdi-sec-refarch-dfd-msmq.gif "TDI_Sec_RefArch_DFD_MSMQ")</span></span>  
  
 <span data-ttu-id="a6616-115">データ フローは次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="a6616-115">The data flow is as follows:</span></span>  
  
1.  <span data-ttu-id="a6616-116">パートナーがメッセージ キューまたは BizTalk メッセージ キューを使用してメッセージを送信します。</span><span class="sxs-lookup"><span data-stu-id="a6616-116">A partner sends a message using Message Queuing or BizTalk Message Queuing.</span></span> <span data-ttu-id="a6616-117">メッセージは適切な形式に変換され、ネットワーク上に送信されます。</span><span class="sxs-lookup"><span data-stu-id="a6616-117">The message is packed in the appropriate format and sent on the network.</span></span> <span data-ttu-id="a6616-118">Active Directory を使用する場合、メッセージは適切な送信先 (BizTalk メッセージ キュー受信アダプタのホスト インスタンスが実行されている BizTalk Server) に到達するまで、一連のメッセージ キュー ルーターを介して移動します。</span><span class="sxs-lookup"><span data-stu-id="a6616-118">If you use Active Directory, the message goes through a series of Message Queuing routers until it reaches the right destination (the BizTalk Server that runs a host instance of the BizTalk Message Queuing receive adapter).</span></span>  
  
2.  <span data-ttu-id="a6616-119">BizTalk メッセージ キュー受信アダプタのインプロセス ホストのインスタンスは、メッセージ キュー ルーターから (ファイアウォール 2 を介して) メッセージを定期的に受信し、内部処理を行います。次に、ネットワーク プロトコルによって定義された適切なネットワーク応答を送信し、メッセージ ボックス データベースにメッセージを配置します。</span><span class="sxs-lookup"><span data-stu-id="a6616-119">An instance of an in-process host for the BizTalk Message Queuing receive adapter regularly receives the message from a Message Queuing router (through Firewall 2), does any initial processing, sends the correct network responses as defined by the network protocol, and puts the message in the MessageBox database.</span></span>  
  
3.  <span data-ttu-id="a6616-120">メッセージへのサブスクリプションが含まれた処理ホストのインスタンスが、メッセージ ボックス データベースからそのメッセージを取得し、追加処理を行い、メッセージ ボックス データベースにメッセージを戻します。</span><span class="sxs-lookup"><span data-stu-id="a6616-120">An instance of the processing host that has a subscription to the message picks it up from the MessageBox database, does any additional processing, and puts the message back in the MessageBox database.</span></span>  
  
4.  <span data-ttu-id="a6616-121">メッセージ ボックス データベースからメッセージを BizTalk メッセージ キュー送信アダプターを持つ、インプロセス ホストのインスタンスを取得します。</span><span class="sxs-lookup"><span data-stu-id="a6616-121">An instance of the in-process host that has a BizTalk Message Queuing send adapter picks up the message from the MessageBox database.</span></span> <span data-ttu-id="a6616-122">メッセージは、送信パイプラインでの最終処理を完了してから、ファイアウォール 2 を介してパートナーまたはアプリケーションにネットワーク経由で送信されます。</span><span class="sxs-lookup"><span data-stu-id="a6616-122">The message goes through any final processing in the send pipeline, and is then sent through Firewall 2 over the network to the partner or application.</span></span>  
  
## <a name="step-2-create-and-analyze-the-threat-model-biztalk-message-queuing-adapter-scenario"></a><span data-ttu-id="a6616-123">手順 2.</span><span class="sxs-lookup"><span data-stu-id="a6616-123">Step 2.</span></span> <span data-ttu-id="a6616-124">作成し、分析、脅威モデル (BizTalk メッセージ キュー アダプタ シナリオ)</span><span class="sxs-lookup"><span data-stu-id="a6616-124">Create and Analyze the Threat Model (BizTalk Message Queuing Adapter Scenario)</span></span>  
 <span data-ttu-id="a6616-125">このセクションでは、サンプル アーキテクチャの BizTalk メッセージ キュー アダプタ シナリオに対して実行した TMA の結果を示します。</span><span class="sxs-lookup"><span data-stu-id="a6616-125">This section provides the results of the TMA we did for the BizTalk Message Queuing adapter scenario for the sample architecture.</span></span>  
  
- <span data-ttu-id="a6616-126">**特定のエントリ ポイント、信頼の境界、およびデータのフロー -** および手順 1 で前に説明されている背景情報を参照してください[サンプル シナリオの背景情報](../core/background-information-for-sample-scenarios.md)します。</span><span class="sxs-lookup"><span data-stu-id="a6616-126">**Identify Entry Points, Trust Boundaries, and Flow of Data -** See background information described earlier in step 1 and in [Background Information for Sample Scenarios](../core/background-information-for-sample-scenarios.md).</span></span>  
  
- <span data-ttu-id="a6616-127">**-特定された脅威の一覧を作成**シナリオに潜在的な脅威を識別するために、DFD のすべてのエントリのカテゴリに分類を使いました。**S**poofing を識別、 **T**データ、ampering **R**、これが否認**は**漏洩、 **D**ービス拒否、**E**levation 特権。</span><span class="sxs-lookup"><span data-stu-id="a6616-127">**Create a List of the Identified Threats -** We used the following categorization for all entries in the DFD to identify potential threats to the scenario: **S**poofing identify, **T**ampering with data, **R**epudiation, **I**nformation disclosure, **D**enial of service, and **E**levation of privileges.</span></span> <span data-ttu-id="a6616-128">次の表は、BizTalk メッセージ キュー アダプタを使用して BizTalk Server との間でメッセージを送受信したときに特定された脅威を示しています。</span><span class="sxs-lookup"><span data-stu-id="a6616-128">The following table lists the threats we identified when you use the BizTalk Message Queuing adapter to send and receive messages to and from BizTalk Server.</span></span>  
  
  <span data-ttu-id="a6616-129">**特定された脅威の一覧を表 1**</span><span class="sxs-lookup"><span data-stu-id="a6616-129">**Table 1 List of identified threats**</span></span>  
  
|<span data-ttu-id="a6616-130">脅威</span><span class="sxs-lookup"><span data-stu-id="a6616-130">Threat</span></span>|<span data-ttu-id="a6616-131">説明</span><span class="sxs-lookup"><span data-stu-id="a6616-131">Description</span></span>|<span data-ttu-id="a6616-132">[Asset]</span><span class="sxs-lookup"><span data-stu-id="a6616-132">Asset</span></span>|<span data-ttu-id="a6616-133">影響</span><span class="sxs-lookup"><span data-stu-id="a6616-133">Impact</span></span>|  
|------------|-----------------|-----------|------------|  
|<span data-ttu-id="a6616-134">受信場所に大量のメッセージが送信される</span><span class="sxs-lookup"><span data-stu-id="a6616-134">Send lots of messages to receive location</span></span>|<span data-ttu-id="a6616-135">悪意のあるユーザーが、メッセージが有効であるか無効であるかに関係なくアプリケーションで受け取れないほど大量のメッセージを送信することがあります。</span><span class="sxs-lookup"><span data-stu-id="a6616-135">A malicious user can send a large number of valid or invalid messages and flood the application.</span></span>|<span data-ttu-id="a6616-136">BizTalk Server 環境</span><span class="sxs-lookup"><span data-stu-id="a6616-136">BizTalk Server environment</span></span>|<span data-ttu-id="a6616-137">サービス拒否が起こる</span><span class="sxs-lookup"><span data-stu-id="a6616-137">Denial of service</span></span>|  
|<span data-ttu-id="a6616-138">有線ネットワーク上でメッセージ ヘッダーがクリア テキストで送信される</span><span class="sxs-lookup"><span data-stu-id="a6616-138">Message header travels in the clear on the wire</span></span>|<span data-ttu-id="a6616-139">メッセージがキューから BizTalk メッセージ キュー受信アダプタに送信されるとき、メッセージ ヘッダーがクリア テキスト形式なので、悪意のあるユーザーがヘッダーを読み取って改ざんすることがあります。</span><span class="sxs-lookup"><span data-stu-id="a6616-139">As the message travels from the queue to the BizTalk Message Queuing receive adapter, the message header is in the clear, and a malicious user can potentially read and tamper with the header.</span></span>|<span data-ttu-id="a6616-140">メッセージ ヘッダー</span><span class="sxs-lookup"><span data-stu-id="a6616-140">Message header</span></span>|<span data-ttu-id="a6616-141">データの改ざん</span><span class="sxs-lookup"><span data-stu-id="a6616-141">Tampering with data</span></span><br /><br /> <span data-ttu-id="a6616-142">情報の漏えい</span><span class="sxs-lookup"><span data-stu-id="a6616-142">Information disclosure</span></span>|  
|<span data-ttu-id="a6616-143">未認証のユーザーが、BizTalk メッセージ キュー ホストが実行されている BizTalk Server へのネットワーク接続を確立できる</span><span class="sxs-lookup"><span data-stu-id="a6616-143">An unauthorized user can make a network connection to the BizTalk Server that runs the BizTalk Message Queuing host</span></span>|<span data-ttu-id="a6616-144">随意アクセス制御リスト (DACL) を使用して、BizTalk メッセージ キューの受信場所へのアクセスを制限することはできません。</span><span class="sxs-lookup"><span data-stu-id="a6616-144">You cannot use a discretionary access list (DACL) to restrict access to the BizTalk Message Queuing receive location.</span></span> <span data-ttu-id="a6616-145">そのため、BizTalk メッセージ キュー受信アダプタのホスト インスタンスが実行されている BizTalk Server とポート 1801 に対してネットワーク接続を確立できるユーザーであれば、BizTalk メッセージ キューの受信場所にメッセージを送信できます。</span><span class="sxs-lookup"><span data-stu-id="a6616-145">Therefore, anyone that can make a network connection to the BizTalk Server that runs a host instance of the BizTalk Message Queuing receive adapter and to port 1801 can send messages to the BizTalk Message Queuing receive location.</span></span>|<span data-ttu-id="a6616-146">BizTalk Server 環境</span><span class="sxs-lookup"><span data-stu-id="a6616-146">BizTalk Server environment</span></span>|<span data-ttu-id="a6616-147">否認</span><span class="sxs-lookup"><span data-stu-id="a6616-147">Repudiation</span></span><br /><br /> <span data-ttu-id="a6616-148">データの改ざん</span><span class="sxs-lookup"><span data-stu-id="a6616-148">Tampering with data</span></span><br /><br /> <span data-ttu-id="a6616-149">情報の漏えい</span><span class="sxs-lookup"><span data-stu-id="a6616-149">Information disclosure</span></span><br /><br /> <span data-ttu-id="a6616-150">サービス拒否が起こる</span><span class="sxs-lookup"><span data-stu-id="a6616-150">Denial of service</span></span><br /><br /> <span data-ttu-id="a6616-151">特権の昇格</span><span class="sxs-lookup"><span data-stu-id="a6616-151">Elevation of privileges</span></span>|  
|<span data-ttu-id="a6616-152">BizTalk Server でメッセージを受信する前に、悪意のあるユーザーがそのメッセージを改ざんできる</span><span class="sxs-lookup"><span data-stu-id="a6616-152">A malicious user can tamper with the message before BizTalk Server receives it</span></span>|<span data-ttu-id="a6616-153">悪意のあるユーザーが、メッセージの送信中にメッセージを傍受し、改ざんすることがあります。</span><span class="sxs-lookup"><span data-stu-id="a6616-153">A malicious user can intercept the message while it is in transit and modify it.</span></span>|<span data-ttu-id="a6616-154">メッセージ本文</span><span class="sxs-lookup"><span data-stu-id="a6616-154">Message body</span></span>|<span data-ttu-id="a6616-155">データの改ざん</span><span class="sxs-lookup"><span data-stu-id="a6616-155">Tampering with data</span></span><br /><br /> <span data-ttu-id="a6616-156">情報の漏えい</span><span class="sxs-lookup"><span data-stu-id="a6616-156">Information disclosure</span></span>|  
  
## <a name="step-3-review-threats-biztalk-message-queuing-adapter-scenario"></a><span data-ttu-id="a6616-157">手順 3.</span><span class="sxs-lookup"><span data-stu-id="a6616-157">Step 3.</span></span> <span data-ttu-id="a6616-158">(BizTalk メッセージ キュー アダプタ シナリオ) の脅威を確認します。</span><span class="sxs-lookup"><span data-stu-id="a6616-158">Review Threats (BizTalk Message Queuing Adapter Scenario)</span></span>  
 <span data-ttu-id="a6616-159">このセクションでは、サンプル アーキテクチャの BizTalk メッセージ キュー アダプタ シナリオで特定された脅威に対して実行したリスク分析の結果を示します。</span><span class="sxs-lookup"><span data-stu-id="a6616-159">This section provides the results of the risk analysis we did for threats we identified for the BizTalk Message Queuing adapter scenario for the sample architecture.</span></span> <span data-ttu-id="a6616-160">主要な脅威モデルは、会議後脅威を確認し、各脅威のリスクを識別するために、次の影響カテゴリを使用します。**D**amage、潜在的な**R**可能性、 **E**xploitability、 **A**影響を受けるユーザー、および**D**iscoverability します。</span><span class="sxs-lookup"><span data-stu-id="a6616-160">After the main threat model meeting, we reviewed the threats and used the following impact categories to identify the risk for each threat: **D**amage potential, **R**eproducibility, **E**xploitability, **A**ffected users, and **D**iscoverability.</span></span>  
  
 <span data-ttu-id="a6616-161">次の表は、BizTalk メッセージ キュー アダプタを使用して BizTalk Server との間でメッセージを送受信したときに特定された脅威のリスクの度合いを示しています。</span><span class="sxs-lookup"><span data-stu-id="a6616-161">The following table lists the risk ratings for the threats we identified when you use the BizTalk Message Queuing adapter to send and receive messages to and from BizTalk Server.</span></span>  
  
 <span data-ttu-id="a6616-162">**表 2. 特定された脅威のリスクの度合い**</span><span class="sxs-lookup"><span data-stu-id="a6616-162">**Table 2 Risk ratings for identified threats**</span></span>  
  
|<span data-ttu-id="a6616-163">脅威</span><span class="sxs-lookup"><span data-stu-id="a6616-163">Threat</span></span>|<span data-ttu-id="a6616-164">影響</span><span class="sxs-lookup"><span data-stu-id="a6616-164">Impact</span></span>|<span data-ttu-id="a6616-165">潜在的な損害</span><span class="sxs-lookup"><span data-stu-id="a6616-165">Damage potential</span></span>|<span data-ttu-id="a6616-166">再現性</span><span class="sxs-lookup"><span data-stu-id="a6616-166">Reproducibility</span></span>|<span data-ttu-id="a6616-167">悪用性</span><span class="sxs-lookup"><span data-stu-id="a6616-167">Exploitability</span></span>|<span data-ttu-id="a6616-168">影響を受けるユーザー</span><span class="sxs-lookup"><span data-stu-id="a6616-168">Affected users</span></span>|<span data-ttu-id="a6616-169">検出可能性</span><span class="sxs-lookup"><span data-stu-id="a6616-169">Discoverability</span></span>|<span data-ttu-id="a6616-170">リスクの度合い</span><span class="sxs-lookup"><span data-stu-id="a6616-170">Risk exposure</span></span>|  
|------------|------------|----------------------|---------------------|--------------------|--------------------|---------------------|-------------------|  
|<span data-ttu-id="a6616-171">受信場所に大量のメッセージが送信される</span><span class="sxs-lookup"><span data-stu-id="a6616-171">Send lots of messages to receive location</span></span>|<span data-ttu-id="a6616-172">サービス拒否が起こる</span><span class="sxs-lookup"><span data-stu-id="a6616-172">Denial of service</span></span>|<span data-ttu-id="a6616-173">8</span><span class="sxs-lookup"><span data-stu-id="a6616-173">8</span></span>|<span data-ttu-id="a6616-174">7</span><span class="sxs-lookup"><span data-stu-id="a6616-174">7</span></span>|<span data-ttu-id="a6616-175">7</span><span class="sxs-lookup"><span data-stu-id="a6616-175">7</span></span>|<span data-ttu-id="a6616-176">7</span><span class="sxs-lookup"><span data-stu-id="a6616-176">7</span></span>|<span data-ttu-id="a6616-177">5</span><span class="sxs-lookup"><span data-stu-id="a6616-177">5</span></span>|<span data-ttu-id="a6616-178">6.8</span><span class="sxs-lookup"><span data-stu-id="a6616-178">6.8</span></span>|  
|<span data-ttu-id="a6616-179">有線ネットワーク上でメッセージ ヘッダーがクリア テキストで送信される</span><span class="sxs-lookup"><span data-stu-id="a6616-179">Message header travels in the clear on the wire</span></span>|<span data-ttu-id="a6616-180">データの改ざん</span><span class="sxs-lookup"><span data-stu-id="a6616-180">Tampering with data</span></span><br /><br /> <span data-ttu-id="a6616-181">情報の漏えい</span><span class="sxs-lookup"><span data-stu-id="a6616-181">Information disclosure</span></span>|<span data-ttu-id="a6616-182">8</span><span class="sxs-lookup"><span data-stu-id="a6616-182">8</span></span>|<span data-ttu-id="a6616-183">10</span><span class="sxs-lookup"><span data-stu-id="a6616-183">10</span></span>|<span data-ttu-id="a6616-184">8</span><span class="sxs-lookup"><span data-stu-id="a6616-184">8</span></span>|<span data-ttu-id="a6616-185">3</span><span class="sxs-lookup"><span data-stu-id="a6616-185">3</span></span>|<span data-ttu-id="a6616-186">5</span><span class="sxs-lookup"><span data-stu-id="a6616-186">5</span></span>|<span data-ttu-id="a6616-187">6.8</span><span class="sxs-lookup"><span data-stu-id="a6616-187">6.8</span></span>|  
|<span data-ttu-id="a6616-188">未認証のユーザーが、BizTalk メッセージ キュー ホストが実行されている BizTalk Server へのネットワーク接続を確立できる</span><span class="sxs-lookup"><span data-stu-id="a6616-188">An unauthorized user can make a network connection to the BizTalk Server that runs the BizTalk Message Queuing host</span></span>|<span data-ttu-id="a6616-189">否認</span><span class="sxs-lookup"><span data-stu-id="a6616-189">Repudiation</span></span><br /><br /> <span data-ttu-id="a6616-190">データの改ざん</span><span class="sxs-lookup"><span data-stu-id="a6616-190">Tampering with data</span></span><br /><br /> <span data-ttu-id="a6616-191">情報の漏えい</span><span class="sxs-lookup"><span data-stu-id="a6616-191">Information disclosure</span></span><br /><br /> <span data-ttu-id="a6616-192">サービス拒否が起こる</span><span class="sxs-lookup"><span data-stu-id="a6616-192">Denial of service</span></span><br /><br /> <span data-ttu-id="a6616-193">特権の昇格</span><span class="sxs-lookup"><span data-stu-id="a6616-193">Elevation of privileges</span></span>|<span data-ttu-id="a6616-194">8</span><span class="sxs-lookup"><span data-stu-id="a6616-194">8</span></span>|<span data-ttu-id="a6616-195">10</span><span class="sxs-lookup"><span data-stu-id="a6616-195">10</span></span>|<span data-ttu-id="a6616-196">9</span><span class="sxs-lookup"><span data-stu-id="a6616-196">9</span></span>|<span data-ttu-id="a6616-197">9</span><span class="sxs-lookup"><span data-stu-id="a6616-197">9</span></span>|<span data-ttu-id="a6616-198">9</span><span class="sxs-lookup"><span data-stu-id="a6616-198">9</span></span>|<span data-ttu-id="a6616-199">9</span><span class="sxs-lookup"><span data-stu-id="a6616-199">9</span></span>|  
|<span data-ttu-id="a6616-200">BizTalk Server でメッセージを受信する前に、悪意のあるユーザーがそのメッセージを改ざんできる</span><span class="sxs-lookup"><span data-stu-id="a6616-200">A malicious user can tamper with the message before BizTalk Server receives it</span></span>|<span data-ttu-id="a6616-201">データの改ざん</span><span class="sxs-lookup"><span data-stu-id="a6616-201">Tampering with data</span></span><br /><br /> <span data-ttu-id="a6616-202">情報の漏えい</span><span class="sxs-lookup"><span data-stu-id="a6616-202">Information disclosure</span></span>|<span data-ttu-id="a6616-203">5</span><span class="sxs-lookup"><span data-stu-id="a6616-203">5</span></span>|<span data-ttu-id="a6616-204">7</span><span class="sxs-lookup"><span data-stu-id="a6616-204">7</span></span>|<span data-ttu-id="a6616-205">6</span><span class="sxs-lookup"><span data-stu-id="a6616-205">6</span></span>|<span data-ttu-id="a6616-206">5</span><span class="sxs-lookup"><span data-stu-id="a6616-206">5</span></span>|<span data-ttu-id="a6616-207">7</span><span class="sxs-lookup"><span data-stu-id="a6616-207">7</span></span>|<span data-ttu-id="a6616-208">6</span><span class="sxs-lookup"><span data-stu-id="a6616-208">6</span></span>|  
  
## <a name="step-4-identify-mitigation-techniques-biztalk-message-queuing-adapter-scenario"></a><span data-ttu-id="a6616-209">手順 4.</span><span class="sxs-lookup"><span data-stu-id="a6616-209">Step 4.</span></span> <span data-ttu-id="a6616-210">緩和方法 (BizTalk メッセージ キュー アダプタ シナリオ) の特定します。</span><span class="sxs-lookup"><span data-stu-id="a6616-210">Identify Mitigation Techniques (BizTalk Message Queuing Adapter Scenario)</span></span>  
 <span data-ttu-id="a6616-211">このセクションでは、サンプル アーキテクチャの BizTalk メッセージ キュー アダプタ シナリオで特定された脅威を緩和する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="a6616-211">This section presents some mitigation techniques for the threats we identified for the BizTalk Message Queuing adapter scenario for the sample architecture.</span></span>  
  
 <span data-ttu-id="a6616-212">次の表は、BizTalk メッセージ キュー アダプタを使用して BizTalk Server との間でメッセージを送受信したときに特定された脅威の緩和方法とテクノロジを示しています。</span><span class="sxs-lookup"><span data-stu-id="a6616-212">The following table lists mitigation techniques and technologies for the threats we identified when you use the BizTalk Message Queuing adapter to send and receive messages to and from BizTalk Server.</span></span>  
  
 <span data-ttu-id="a6616-213">**表 3. 緩和方法とテクノロジ**</span><span class="sxs-lookup"><span data-stu-id="a6616-213">**Table 3 Mitigation techniques and technologies**</span></span>  
  
|<span data-ttu-id="a6616-214">脅威</span><span class="sxs-lookup"><span data-stu-id="a6616-214">Threat</span></span>|<span data-ttu-id="a6616-215">影響</span><span class="sxs-lookup"><span data-stu-id="a6616-215">Impact</span></span>|<span data-ttu-id="a6616-216">リスクの度合い</span><span class="sxs-lookup"><span data-stu-id="a6616-216">Risk exposure</span></span>|<span data-ttu-id="a6616-217">緩和方法とテクノロジ</span><span class="sxs-lookup"><span data-stu-id="a6616-217">Mitigation techniques and technologies</span></span>|  
|------------|------------|-------------------|--------------------------------------------|  
|<span data-ttu-id="a6616-218">受信場所に大量のメッセージが送信される</span><span class="sxs-lookup"><span data-stu-id="a6616-218">Send lots of messages to receive location</span></span>|<span data-ttu-id="a6616-219">サービス拒否が起こる</span><span class="sxs-lookup"><span data-stu-id="a6616-219">Denial of service</span></span>|<span data-ttu-id="a6616-220">6.8</span><span class="sxs-lookup"><span data-stu-id="a6616-220">6.8</span></span>|<span data-ttu-id="a6616-221">BizTalk メッセージ キュー アダプタを認証必須モードで使用します。</span><span class="sxs-lookup"><span data-stu-id="a6616-221">Use the BizTalk Message Queuing adapter in authentication-required mode.</span></span> <span data-ttu-id="a6616-222">設定、 **MSMQ 認証を要求**、受信場所でフラグと**認証が必要 (メッセージの削除)** 受信ポート。</span><span class="sxs-lookup"><span data-stu-id="a6616-222">Set the **Requires MSMQ authentication** flag on the receive location and **Authentication Required (Drop messages)** on the receive port.</span></span><br /><br /> <span data-ttu-id="a6616-223">証明書ベースの認証を要求するように BizTalk メッセージ キューを構成します。</span><span class="sxs-lookup"><span data-stu-id="a6616-223">Configure BizTalk Message Queuing to require certificate-based authentication.</span></span> <span data-ttu-id="a6616-224">この状況はアダプタ レベルで発生します。BizTalk パイプラインのパーティの解決コンポーネントとは異なります。</span><span class="sxs-lookup"><span data-stu-id="a6616-224">This behavior occurs at the adapter level, and is different from the Party Resolution component of a BizTalk pipeline.</span></span> <span data-ttu-id="a6616-225">このように構成した場合、受信メッセージにはパブリック証明書が含まれます。</span><span class="sxs-lookup"><span data-stu-id="a6616-225">If configured, the public certificate is included with the incoming message.</span></span> <span data-ttu-id="a6616-226">これは、BizTalk メッセージ キューに使用できる唯一のクライアント認証モードです。</span><span class="sxs-lookup"><span data-stu-id="a6616-226">This is the only client authentication mode available for BizTalk Message Queuing.</span></span> <span data-ttu-id="a6616-227">このクライアント認証モードを使用するには、BizTalk メッセージ キューを Active Directory 統合モードでインストールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="a6616-227">To use this client authentication mode, you must install BizTalk Message Queuing with Active Directory Integration Mode.</span></span> <span data-ttu-id="a6616-228">この機能を使用するときに必ず選択して、**認証が必要**受信場所のチェック ボックスを BizTalk メッセージ キューのプロパティ ダイアログ ボックスをオンします。</span><span class="sxs-lookup"><span data-stu-id="a6616-228">When you use this feature, remember to select the **Require Authentication** check box on the property dialog box for the BizTalk Message Queuing receive location.</span></span>|  
|<span data-ttu-id="a6616-229">有線ネットワーク上でメッセージ ヘッダーがクリア テキストで送信される</span><span class="sxs-lookup"><span data-stu-id="a6616-229">Message header travels in the clear on the wire</span></span>|<span data-ttu-id="a6616-230">データの改ざん</span><span class="sxs-lookup"><span data-stu-id="a6616-230">Tampering with data</span></span><br /><br /> <span data-ttu-id="a6616-231">情報の漏えい</span><span class="sxs-lookup"><span data-stu-id="a6616-231">Information disclosure</span></span>|<span data-ttu-id="a6616-232">6.8</span><span class="sxs-lookup"><span data-stu-id="a6616-232">6.8</span></span>|<span data-ttu-id="a6616-233">インターネット プロトコル セキュリティ (IPsec) を使用すると、あるサーバーから別のサーバーにメッセージを送信するときに、メッセージ本文とメッセージ ヘッダーを保護できます。</span><span class="sxs-lookup"><span data-stu-id="a6616-233">Use Internet Protocol security (IPsec) to help protect the message body and the message header as it travels from one server to another.</span></span>|  
|<span data-ttu-id="a6616-234">未認証のユーザーが、BizTalk メッセージ キュー ホストが実行されている BizTalk Server へのネットワーク接続を確立できる</span><span class="sxs-lookup"><span data-stu-id="a6616-234">An unauthorized user can make a network connection to the BizTalk Server that runs the BizTalk Message Queuing host</span></span>|<span data-ttu-id="a6616-235">否認</span><span class="sxs-lookup"><span data-stu-id="a6616-235">Repudiation</span></span><br /><br /> <span data-ttu-id="a6616-236">データの改ざん</span><span class="sxs-lookup"><span data-stu-id="a6616-236">Tampering with data</span></span><br /><br /> <span data-ttu-id="a6616-237">情報の漏えい</span><span class="sxs-lookup"><span data-stu-id="a6616-237">Information disclosure</span></span><br /><br /> <span data-ttu-id="a6616-238">サービス拒否が起こる</span><span class="sxs-lookup"><span data-stu-id="a6616-238">Denial of service</span></span><br /><br /> <span data-ttu-id="a6616-239">特権の昇格</span><span class="sxs-lookup"><span data-stu-id="a6616-239">Elevation of privileges</span></span>|<span data-ttu-id="a6616-240">9</span><span class="sxs-lookup"><span data-stu-id="a6616-240">9</span></span>|<span data-ttu-id="a6616-241">パーティの解決パイプライン コンポーネントを含むカスタム パイプラインを作成し、送信者 ID (SID) を使用してパーティを解決するようにパーティの解決コンポーネントを構成します。</span><span class="sxs-lookup"><span data-stu-id="a6616-241">Create a custom pipeline with a Party Resolution pipeline component, and then configure the Party Resolution component to use the Sender ID (SID) to resolve the party.</span></span> <span data-ttu-id="a6616-242">設定、**証明書によるパーティを解決するには**プロパティを**False**、および**SID によるパーティの解決**プロパティを**True**します。</span><span class="sxs-lookup"><span data-stu-id="a6616-242">Set the **Resolve Party By Certificate** property to **False**, and the **Resolve Party By SID** property to **True**.</span></span> <span data-ttu-id="a6616-243">詳細については、次を参照してください。[パーティの解決パイプライン コンポーネント](../core/party-resolution-pipeline-component.md)します。</span><span class="sxs-lookup"><span data-stu-id="a6616-243">For more information, see [Party Resolution Pipeline Component](../core/party-resolution-pipeline-component.md).</span></span><br /><br /> <span data-ttu-id="a6616-244">受信ポートで、設定、**認証**プロパティを**必要 (メッセージの削除)** します。</span><span class="sxs-lookup"><span data-stu-id="a6616-244">On the receive port, set the **Authentication** property to **Required (Drop Messages)**.</span></span>|  
|<span data-ttu-id="a6616-245">BizTalk Server でメッセージを受信する前に、悪意のあるユーザーがそのメッセージを改ざんできる</span><span class="sxs-lookup"><span data-stu-id="a6616-245">A malicious user can tamper with the message before BizTalk Server receives it</span></span>|<span data-ttu-id="a6616-246">データの改ざん</span><span class="sxs-lookup"><span data-stu-id="a6616-246">Tampering with data</span></span><br /><br /> <span data-ttu-id="a6616-247">情報の漏えい</span><span class="sxs-lookup"><span data-stu-id="a6616-247">Information disclosure</span></span>|<span data-ttu-id="a6616-248">6</span><span class="sxs-lookup"><span data-stu-id="a6616-248">6</span></span>|<span data-ttu-id="a6616-249">プロトコルレベルの認証を使用して、メッセージが送信中に改ざんされないようにします。</span><span class="sxs-lookup"><span data-stu-id="a6616-249">Use protocol-level authentication to make sure the message was not tampered with while in transit.</span></span> <span data-ttu-id="a6616-250">プロトコルレベルの認証を使用するには、E ビジネス ドメインにメッセージ キュー ルーターが必要です。</span><span class="sxs-lookup"><span data-stu-id="a6616-250">To use protocol-level authentication, you must have a Message Queuing router in the E-Business domain.</span></span> <span data-ttu-id="a6616-251">BizTalk Server を次のように構成します。</span><span class="sxs-lookup"><span data-stu-id="a6616-251">Configure BizTalk Server as follows:</span></span><br /><br /> <span data-ttu-id="a6616-252">-で、 **BizTalk メッセージング**ページ Configuration Manager は、ルーターの名前を指定します。</span><span class="sxs-lookup"><span data-stu-id="a6616-252">-   On the **BizTalk Messaging** page of the Configuration Manager, provide the name of the router.</span></span><br /><span data-ttu-id="a6616-253">-受信ポートの設定、**認証**プロパティを**必要 (メッセージの削除)** または**必要 (メッセージの保持)** します。</span><span class="sxs-lookup"><span data-stu-id="a6616-253">-   For the receive port, set the **Authentication** property to **Required (Drop Messages)** or **Required (Keep Messages)**.</span></span><br /><span data-ttu-id="a6616-254">-については、送信ハンドラーで、**全般** タブで、 **MSMQ ルーター**名前ボックスに、メッセージ キュー ルーターの名前を入力します。</span><span class="sxs-lookup"><span data-stu-id="a6616-254">-   For the send handler, on the **General** tab, in the **MSMQ Router** name box, type the name of the Message Queuing router.</span></span><br /><span data-ttu-id="a6616-255">-送信ポートの選択**MSMQ 認証を使用**します。</span><span class="sxs-lookup"><span data-stu-id="a6616-255">-   For the send port, select **Use MSMQ Authentication**.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="a6616-256">参照</span><span class="sxs-lookup"><span data-stu-id="a6616-256">See Also</span></span>  
 <span data-ttu-id="a6616-257">[脅威モデル分析](../core/threat-model-analysis.md) </span><span class="sxs-lookup"><span data-stu-id="a6616-257">[Threat Model Analysis](../core/threat-model-analysis.md) </span></span>  
 <span data-ttu-id="a6616-258">[脅威モデル分析のサンプル シナリオ](../core/sample-scenarios-for-threat-model-analysis.md) </span><span class="sxs-lookup"><span data-stu-id="a6616-258">[Sample Scenarios for Threat Model Analysis](../core/sample-scenarios-for-threat-model-analysis.md) </span></span>  
 [<span data-ttu-id="a6616-259">中小企業向けのサンプル アーキテクチャ</span><span class="sxs-lookup"><span data-stu-id="a6616-259">Sample Architectures for Small & Medium-Sized Companies</span></span>](../core/sample-architectures-for-small-medium-sized-companies.md)