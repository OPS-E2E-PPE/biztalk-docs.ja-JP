---
title: 非同期ビジネス イベントの追跡 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- performance, BAM
- events, tracking [BAM]
- BAM, event tracking
- BAM, performance
ms.assetid: 6d51fadf-b329-4536-9618-d982d9c17882
caps.latest.revision: 7
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: daff76641e9c70cc2860aa1571b86e74d664f66e
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65358801"
---
# <a name="asynchronous-business-event-tracking"></a>非同期ビジネス イベントの追跡
非同期 (を使用して`BufferedEventStream`)-このモデルは、大幅なパフォーマンス向上を提供しています。 これは、別のコンス トラクターのみを使用して、同期モデルに同様の API を使用します。 プライマリ インポート データベースにデータをプッシュするのではなく、BufferedEventStream はイベント データをバイナリ形式でメモリに蓄積され、暫定的なデータベース (MessageBox) に 1 つのテーブルのレコードとして挿入されます。 イベント バス サービスでは、データが BizTalk によってメッセージ ボックス データベースに入れられ、プライマリ インポート データベースにインポートを読み取ります。  
  
 で非同期操作が BAM を構成するには、別のコンピューターに、イベント バス サービスと、呼び出し元アプリケーション (たとえば、オーケストレーション ホスト) を実行する必要があります。 これにより、呼び出し元のアプリケーションをすぐに、別のコンピューターで、CPU を使用して処理するイベント データを削除します。  
  
 この BAM トポロジは、トランザクションの一貫性もあります。 イベント バス サービスは、メッセージ ボックス データベースからコミットされたデータを読み取るだけのため、呼び出し元のアプリケーションにロールバックされたトランザクションの BAM データは取得ことはありません。 コミットされたトランザクションの BAM データは、短い待機時間でのクエリと集計表示されます。  
  
 エラーが発生した場合、いくつかの時間、タイムアウトを使用して、復旧ロジックのクラッシュおよび具合に、イベント バス サービスが再試行されます。 ただし、データが無効な形式にある場合は特殊なテーブル終了します。 この状態を示す、イベント ログでイベントが発生します。 この追加の障害点では、システム管理の難しさが向上します。  
  
 コードから非同期のアプローチを使用することは、通常、DirectEventStream を BufferedEventStream と置き換えると、BAM プライマリ インポート、1 つではなく、コンス トラクターで、メッセージ ボックスに、接続文字列を渡すことと同程度に簡単です。  
  
 非同期ビジネス イベントのコードで追跡に関する次のガイドラインを使用します。  
  
-   常に continuation を使用、アクティビティが複数のアプリケーションを対象とし、BAM にデータを非同期に送信するときにすべてのコンポーネントに ActivityID を伝達する場合でもです。 この場合は、一意の文字列 (アプリケーション名など) で各アプリケーションで ActivityID を使い分けますを使用します。 これは、機能は、BAM は、クエリが正しいことを確認順序のイベントを管理する必要があり、集計の結果では、ランダムな順序は、BAM に別のアプリケーションからデータが届く場合があります必要です。  
  
-   イベント データは、トランザクションに依存しているために、(COM + 疎結合イベントや WMI イベント) を監視するイベントの一般的な方法は BAM には適用ではありません。 たとえば、$1000 の 1 つだけ受信する販売注文がありましたが、データベースに保存する試行が 10 回失敗したときに、$10,000 の合計 10 個の注文が受信したように見えます可能性があります。  
  
## <a name="see-also"></a>参照  

 [同期ビジネス イベントの追跡](../core/synchronous-business-event-tracking.md)