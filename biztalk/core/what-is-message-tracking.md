---
title: メッセージ追跡について | Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- HAT, metadata
- HAT, messages
- messages, tracking
- data, HAT
- metadata, tracking
- tracking, metadata
- HAT, data security
- tracking, messages
- configuring [HAT tracking], messages
- data, security
ms.assetid: 51cec59d-b411-4d8f-b771-7b2cf0f38945
caps.latest.revision: 18
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 944261c6193020c158f707b7f8d39c55ce2d058f
ms.sourcegitcommit: ed9590dbcd97c12a1fe5ce2cdf8d826492cccdff
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/08/2018
ms.locfileid: "39640126"
---
# <a name="what-is-message-tracking"></a>メッセージ追跡について
メッセージとは、通常は、実行中のビジネス プロセスやアプリケーション間で交換されるデータの電子的なインスタンスのことです。 メッセージ インスタンスは、メッセージ本文、メッセージ プロパティ、およびメタデータで構成されています。  
  
 BizTalk Server 管理コンソールを使用すると、メッセージ本文およびメッセージ プロパティの追跡を有効にすることができます。 このコンソールでは、追跡したメッセージ本文を表示できます。表示内容には、スキーマ情報、厳密な名前、および生成されたメッセージの昇格させたすべてのプロパティが含まれます。  
  
## <a name="message-body"></a>メッセージ本文  
 メッセージ本文を追跡すると、送受信されたメッセージの記録が提供されます。 サービス インスタンスの処理が完了したメッセージを保存するには、メッセージ本文の追跡を有効にする必要があります。 追跡オプションを設定してから、メッセージを表示できるようになるまでに数分かかることがあります。  
  
> [!IMPORTANT]
>  すべてのメッセージ ボックス データベースに対して、SQL Server エージェント サービスが実行されている必要があります。 Trackedmessages_copy _\<MessageBoxName\>ジョブにより、メッセージ本文の追跡クエリおよび WMI を使用できます。 メッセージ本文を効率的にコピーするには、メッセージ ボックス データベースに保持し、trackedmessages_copy _ では、BizTalk 追跡 (BizTalkDTADb) データベースに定期的にコピーが\<MessageBoxName\>ジョブ。 SQL Server エージェント サービスを実行していることも、アーカイブおよび削除のプロセスが正しく動作するための前提条件です。  
  
 追跡メッセージを使用して、確認メッセージを提供したり、トラブルシューティングを行ったり、トランザクションの履歴のデータ マイニングを行ったりすることができます。 メッセージ本文は、ポート、パイプライン、およびオーケストレーションの入出力として追跡できます。 これらのメッセージは、BizTalk Server 管理コンソール、Operations オブジェクト モデル (OM) (推奨)、または Windows Management Instrumentation (WMI) アプリケーション プログラミング インターフェイス (API) を使用して回復できます。  
  
 BizTalk Server では、追跡ポイントを通過できなかったメッセージが追跡されません。 場合によってが有効でないために、メッセージが中断されたときや、ホストがメッセージを指定していないかどうかなど、追跡されているせず保留キューに配置する可能性があります。 このようなメッセージを終了した場合、そのメッセージに関する記録は何も残りません。  
  
> [!IMPORTANT]
>  メッセージ本文の追跡は、法的に拘束力のある監査の代わりになるものではなく、否認不可はサポートされていません。  
  
## <a name="message-properties"></a>メッセージ プロパティ  
 メッセージ プロパティには、昇格されたプロパティ、ルーティング情報、および取引先データが含まれます。 メッセージ プロパティの追跡を行うと、各メッセージの昇格されたプロパティの記録が結果一覧で提供されるため、追跡している何千ものメッセージから特定のメッセージを探し出すことができます。 メッセージを特定したら、これらのプロパティのいずれかを使用してメッセージ自体のサブセットを追跡できます。  
  
 コンテキスト プロパティを追跡するには、追跡したプロパティを格納するためのコンテキストで使用される名前空間のプロパティ スキーマを定義します。 このビューで、追跡するコンテキスト プロパティを選択できます。BizTalk Server では、選択したコンテキスト プロパティを昇格されたメッセージ プロパティの追跡と同等の方法で追跡します。  
  
> [!NOTE]
>  スキーマに含まれる各プロパティには異なる名前を付けてください。 重複した名前が存在すると、エラー メッセージが表示されます。  
  
 たとえば、スキーマ エディターを使用して、[PO Number] フィールドを [Purchase Order] スキーマから昇格させることができます。 これにより、[メッセージ ビューの検索] を使用し、この追跡フィールドに特定の値 ([PO Number] が 16995 など) を持つメッセージ インスタンスを見つけることができます。  
  
 メッセージ プロパティの追跡では、選択したフィールドのみを追跡するため、メッセージ本文の追跡よりもオーバーヘッドがはるかに少なくて済みます。 メッセージ プロパティの追跡オプションを設定してから、プロパティを表示できるようになるまでに数分かかることがあります。  
  
## <a name="metadata"></a>メタデータ  
 メタデータとは、メッセージ インスタンスの識別子、メッセージをログに記録するオーケストレーションやパイプライン、オーケストレーションやパイプラインがメッセージをログに記録した日時、および追跡に関連する他の詳細情報のことです。 メッセージ ボックス データベースに格納されているメッセージをビジネス プロセスにルーティングするには、そのメッセージにメッセージの種類や送信元などのコンテキスト プロパティが含まれている必要があります。 このようなプロパティがメタデータになります。 メッセージとサービス インスタンスの追跡では、サブスクリプションの条件を使用して、このメタデータに対してクエリを実行します。  
  
 BizTalk Server 管理コンソールを使用して、特定のシステム スキーマを選択することによりコンテキスト プロパティを昇格させることができます。 システム スキーマは、[Applications\BizTalk.System\Schemas] ノードにあります。 BizTalk Server がこれらのコンテキスト プロパティをグローバルに追跡します-今すぐのすべてのメッセージ、特定のコンテキスト プロパティの追跡は、します。 そのため、BizTalk 追跡データベースのサイズが大幅に増加することがあります。  
  
## <a name="sensitive-data"></a>機密データ  
 次のデータを保護することができます。対応するスキーマ プロパティ ウィンドウにデータが表示されないようにすることで、データの追跡を回避します。  
  
-   適用、 **isSensitive**属性プロパティ スキーマでは、機密なプロパティが不要になったメッセージ プロパティの構成の選択内容の追跡で表示されるようにします。  
  
-   すべての既定のトランスポートには機密データとして指定されているパスワードが含まれているため、追跡できません。  
  
-   また、機密なプロパティは管理データベースに格納されないため、データベースから直接追跡オプションを構成しても、機密なプロパティを追跡することはできません。  
  
-   有線ネットワークで送信されるメッセージ本文を追跡すると、メッセージ追跡により、追跡されるメッセージ本文のショートカットから、すべてのトランスポートのプロパティが削除されます。 そのため、メッセージ追跡では、追跡されるメッセージ本文のショートカットから送信トランスポートのプロパティを削除するだけでなく、受信トランスポートのプロパティも削除します。  
  
    > [!IMPORTANT]
    >  昇格させたプロパティは、機密データを含めることができます。 グループ ハブ ページから、追跡クエリは、機密データを含むプロパティを追跡、追跡クエリを実行するアクセス許可を持つすべてのユーザーはこのデータを表示できます。  
  
## <a name="see-also"></a>参照  
 [BizTalk Server 管理コンソールの使用の追跡の構成](http://msdn.microsoft.com/49b7f9d3-60b5-41bd-ba8b-029253926bef)
