---
title: MSMQ 受信場所を構成する方法 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- MSMQ adapters, receive locations
- receive locations, MSMQ adapters
- configuring [MSMQ adapters], receive locations
ms.assetid: ba25cf43-18f1-4c19-84fb-74c7b82b95a9
caps.latest.revision: 43
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 1c6fcccda5b338df469baf740a118bded4b160f9
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65341723"
---
# <a name="how-to-configure-an-msmq-receive-location"></a><span data-ttu-id="088b0-102">MSMQ 受信場所を構成する方法</span><span class="sxs-lookup"><span data-stu-id="088b0-102">How to Configure an MSMQ Receive Location</span></span>
<span data-ttu-id="088b0-103">MSMQ を設定する受信場所のアダプタ変数は、BizTalk Server 管理コンソールでします。</span><span class="sxs-lookup"><span data-stu-id="088b0-103">You can set MSMQ receive location adapter variables in the BizTalk Server Administration console.</span></span> <span data-ttu-id="088b0-104">プロパティが受信場所に設定されていない場合は、BizTalk Server 管理コンソールで設定された既定の受信ハンドラーの値が使用されます。</span><span class="sxs-lookup"><span data-stu-id="088b0-104">If properties are not set in the receive location, the default receive handler values set in the BizTalk Server Administration console are used.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="088b0-105">次の手順を実行する前に、受信ポートを追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="088b0-105">Before completing the following procedure you must have already added a receive port.</span></span> <span data-ttu-id="088b0-106">詳細については、次を参照してください。[受信ポートを作成する方法](../core/how-to-create-a-receive-port.md)します。</span><span class="sxs-lookup"><span data-stu-id="088b0-106">For more information see [How to Create a Receive Port](../core/how-to-create-a-receive-port.md).</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="088b0-107">ホスト インスタンスが MSMQ 送信ポートまたは受信場所に関連付けられている場合、そのコンピューターで MSMQ サービスが実行されていることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="088b0-107">If a host instance is associated with an MSMQ send port or receive location, verify the MSMQ service is running on that machine.</span></span> <span data-ttu-id="088b0-108">サービスが実行されていない場合、MSMQ 受信ポートは、起動後すぐにシャットダウンされ、MSMQ 送信ポートに送信されたメッセージは中断されます。</span><span class="sxs-lookup"><span data-stu-id="088b0-108">If the service is not running, the MSMQ receive ports will shut down shortly after they are started, and messages sent to the MSMQ send ports will be suspended.</span></span>  
>   
>  <span data-ttu-id="088b0-109">クラスター環境では、クラスター化された MSMQ インスタンスが実行されていることに加え、各クラスター コンピューターでローカル MSMQ サービスが実行されている必要があります。</span><span class="sxs-lookup"><span data-stu-id="088b0-109">In a clustered scenario, not only does the clustered MSMQ instance need to be running, but the local MSMQ service on each cluster machine should be running, as well.</span></span>  
  
## <a name="to-configure-variables-for-an-msmq-receive-location"></a><span data-ttu-id="088b0-110">変数は MSMQ の受信場所を構成するには</span><span class="sxs-lookup"><span data-stu-id="088b0-110">To configure variables for an MSMQ receive location</span></span>  
 <span data-ttu-id="088b0-111">MSMQ 受信場所の変数を構成するこれらの手順に従います。</span><span class="sxs-lookup"><span data-stu-id="088b0-111">Follow these steps to configure variables for an MSMQ receive location:</span></span>  
  
1.  <span data-ttu-id="088b0-112">BizTalk Server 管理コンソールで  **BizTalk Server 管理**、展開**BizTalk グループ**、展開**アプリケーション**の順に展開し、受信場所を作成するアプリケーション。</span><span class="sxs-lookup"><span data-stu-id="088b0-112">In the BizTalk Server Administration console, expand **BizTalk Server Administration**, expand **BizTalk Group**, expand **Applications**, and then expand the application you want to create a receive location in.</span></span>  
  
2.  <span data-ttu-id="088b0-113">左側のウィンドウで、BizTalk Server 管理コンソールでをクリックして、**受信ポート**ノード。</span><span class="sxs-lookup"><span data-stu-id="088b0-113">In the BizTalk Server Administration console, in the left pane, click the **Receive Port** node.</span></span> <span data-ttu-id="088b0-114">次に右ウィンドウで、既存の受信場所に関連付けられているか、新しい受信場所に関連付ける受信ポートを右クリックし、**[プロパティ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="088b0-114">Then in the right pane, right-click the receive port that is associated with an existing receive location or that you want to associate with a new receive location, and then click **Properties**.</span></span>  
  
3.  <span data-ttu-id="088b0-115">**受信ポートのプロパティ**ダイアログ ボックスで、左側のウィンドウで、**受信場所**、右側のウィンドウは、既存の受信場所] をクリックしてまたはダブルクリックし [**新規**、新しい受信場所を作成します。</span><span class="sxs-lookup"><span data-stu-id="088b0-115">In the **Receive Port Properties** dialog box, in the left pane, select **Receive Locations**, and then in the right pane, double-click an existing receive location or click **New**to create a new receive location.</span></span>  
  
4.  <span data-ttu-id="088b0-116">**受信場所のプロパティ** ダイアログ ボックスで、**トランスポート**の横**型**を選択します**MSMQ**ドロップダウン リストからクリックして**構成**します。</span><span class="sxs-lookup"><span data-stu-id="088b0-116">In the **Receive Location Properties** dialog box, in the **Transport** section next to **Type**, select **MSMQ** from the drop-down list, and then click **Configure**.</span></span>  
  
5.  <span data-ttu-id="088b0-117">**MSMQ トランスポートのプロパティ** ダイアログ ボックスで、次の操作を行います。</span><span class="sxs-lookup"><span data-stu-id="088b0-117">In the **MSMQ Transport Properties** dialog box, do the following:</span></span>  
  
    |<span data-ttu-id="088b0-118">プロパティ</span><span class="sxs-lookup"><span data-stu-id="088b0-118">Use this</span></span>|<span data-ttu-id="088b0-119">目的</span><span class="sxs-lookup"><span data-stu-id="088b0-119">To do this</span></span>|<span data-ttu-id="088b0-120">日付型</span><span class="sxs-lookup"><span data-stu-id="088b0-120">Date type</span></span>|<span data-ttu-id="088b0-121">既定値</span><span class="sxs-lookup"><span data-stu-id="088b0-121">Default value</span></span>|  
    |--------------|----------------|---------------|-------------------|  
    |<span data-ttu-id="088b0-122">**Password**</span><span class="sxs-lookup"><span data-stu-id="088b0-122">**Password**</span></span>|<span data-ttu-id="088b0-123">リモート キューを使用するパスワードを設定します。</span><span class="sxs-lookup"><span data-stu-id="088b0-123">Set a password to use for a remote queue.</span></span>|<span data-ttu-id="088b0-124">String</span><span class="sxs-lookup"><span data-stu-id="088b0-124">String</span></span>|<span data-ttu-id="088b0-125">空白</span><span class="sxs-lookup"><span data-stu-id="088b0-125">Blank</span></span>|  
    |<span data-ttu-id="088b0-126">**[ユーザー名]**</span><span class="sxs-lookup"><span data-stu-id="088b0-126">**User Name**</span></span>|<span data-ttu-id="088b0-127">使用するには、パスワードと組み合わせて、リモート キューにアクセスするためのユーザー名を決定します。</span><span class="sxs-lookup"><span data-stu-id="088b0-127">Determine the user name to use, in combination with the password, for access to a remote queue.</span></span> <span data-ttu-id="088b0-128">リモート コンピューターのローカル ユーザーは、ユーザー名に使用できません。</span><span class="sxs-lookup"><span data-stu-id="088b0-128">You cannot use the local user of the remote computer for the user name.</span></span>|<span data-ttu-id="088b0-129">String</span><span class="sxs-lookup"><span data-stu-id="088b0-129">String</span></span>|<span data-ttu-id="088b0-130">空白</span><span class="sxs-lookup"><span data-stu-id="088b0-130">Blank</span></span>|  
    |<span data-ttu-id="088b0-131">**バッチ サイズ**</span><span class="sxs-lookup"><span data-stu-id="088b0-131">**Batch Size**</span></span>|<span data-ttu-id="088b0-132">バッチ サイズを構成します。</span><span class="sxs-lookup"><span data-stu-id="088b0-132">Configure the batch size.</span></span> <span data-ttu-id="088b0-133">MSMQ アダプターでは、バッチ内のメッセージ ボックス データベースにメッセージを送信します。</span><span class="sxs-lookup"><span data-stu-id="088b0-133">The MSMQ adapter submits messages to the MessageBox database in batches.</span></span> <span data-ttu-id="088b0-134">既定のバッチ サイズは 20 で、最小バッチ サイズは 1。</span><span class="sxs-lookup"><span data-stu-id="088b0-134">The default batch size is 20, and the minimum batch size is 1.</span></span> <span data-ttu-id="088b0-135">**注:** 場合、**トランザクション**受信場所のプロパティに設定されて**True**; Microsoft 分散トランザクション コーディネーターのコンテキストでメッセージ ボックス データベースに各メッセージ バッチが送信されます。(MSDTC) トランザクション。</span><span class="sxs-lookup"><span data-stu-id="088b0-135">**Note:**  If the **Transactional** property for the receive location is set to **True**; each message batch is submitted to the MessageBox database under the context of a Microsoft Distributed Transaction Coordinator (MSDTC) transaction.</span></span> <span data-ttu-id="088b0-136">バッチ内のすべてのメッセージをメッセージ ボックス データベースに保存し、適切なサブスクライバー キューに配置されるまで、メッセージ バッチ用に作成した MSDTC トランザクションが開いたままです。</span><span class="sxs-lookup"><span data-stu-id="088b0-136">The MSDTC transaction that is created for a message batch remains open until every message in the batch has been persisted to the MessageBox and placed in the appropriate subscriber queue.</span></span> <span data-ttu-id="088b0-137">として、この MSDTC トランザクションの期間を増加するため、**バッチ サイズ**パラメーターが増加します。</span><span class="sxs-lookup"><span data-stu-id="088b0-137">Therefore the duration of this MSDTC transaction is increased as the **Batch Size** parameter is increased.</span></span> <span data-ttu-id="088b0-138">全体のパフォーマンスに悪影響 MSDTC トランザクションのオープンの数が多いを同時に持つため、**バッチ サイズ**トランザクションのサポートが有効にすると、パラメーターを非常に大きな値に設定しない必要があります。</span><span class="sxs-lookup"><span data-stu-id="088b0-138">Since having a large number of MSDTC transactions open simultaneously can negatively impact overall performance, the **Batch Size** parameter should not be set to a very large value when transaction support is enabled.</span></span>|<span data-ttu-id="088b0-139">Int</span><span class="sxs-lookup"><span data-stu-id="088b0-139">Int</span></span>|<span data-ttu-id="088b0-140">20</span><span class="sxs-lookup"><span data-stu-id="088b0-140">20</span></span>|  
    |<span data-ttu-id="088b0-141">**エラー発生時**</span><span class="sxs-lookup"><span data-stu-id="088b0-141">**On Failure**</span></span>|<span data-ttu-id="088b0-142">アダプターがエラーに応答する方法を指定します。</span><span class="sxs-lookup"><span data-stu-id="088b0-142">Specify how the adapter should respond to an error.</span></span> <span data-ttu-id="088b0-143">このプロパティを次の値のいずれかに設定します。</span><span class="sxs-lookup"><span data-stu-id="088b0-143">Set this property to one of the following values:</span></span><br /><br /> <span data-ttu-id="088b0-144">-   **停止します。**</span><span class="sxs-lookup"><span data-stu-id="088b0-144">-   **Stop.**</span></span> <span data-ttu-id="088b0-145">これで終了します。 メッセージの受信に受信場所が、エラー状態が発生した場合。</span><span class="sxs-lookup"><span data-stu-id="088b0-145">Stop receiving messages through this receive location if an error condition occurs.</span></span><br /><span data-ttu-id="088b0-146">-   **Suspend(non-resumable) します。**</span><span class="sxs-lookup"><span data-stu-id="088b0-146">-   **Suspend(non-resumable).**</span></span> <span data-ttu-id="088b0-147">メッセージを中断し、再開不可としてマークします。</span><span class="sxs-lookup"><span data-stu-id="088b0-147">Suspend messages and mark as non-resumable.</span></span><br /><span data-ttu-id="088b0-148">-   **Suspend(resumable) します。**</span><span class="sxs-lookup"><span data-stu-id="088b0-148">-   **Suspend(resumable).**</span></span> <span data-ttu-id="088b0-149">メッセージを中断し、再開可能としてマークします。</span><span class="sxs-lookup"><span data-stu-id="088b0-149">Suspend messages and mark as resumable.</span></span> <span data-ttu-id="088b0-150">**重要:** 場合、 **True**オプション**順次処理**プロパティ、**停止**オプション、**エラー時**プロパティ、および**False**オプション、**トランザクション**プロパティは、同時に適用し、配信に失敗したメッセージは中断またはソースのキューに残っていません。</span><span class="sxs-lookup"><span data-stu-id="088b0-150">**Important:**  If the **True** option for **Ordered Processing** property, the **Stop** option for the **On Failure** property, and the **False** option for the **Transactional** property are applied at the same time, then any messages that fail delivery will not be suspended or left in the source queue.</span></span> <span data-ttu-id="088b0-151">このシナリオでは、メッセージの損失が発生することができます。</span><span class="sxs-lookup"><span data-stu-id="088b0-151">In this scenario, message loss can occur.</span></span> <span data-ttu-id="088b0-152">使用する場合に、データ損失を防ぐために、**順次処理**機能、**停止**オプション、**エラー時**プロパティは、場合にのみ適用する必要があります、**は True。** オプション、**トランザクション**プロパティが適用されます。</span><span class="sxs-lookup"><span data-stu-id="088b0-152">To prevent data loss, when using the **Ordered Processing** feature, the **Stop** option for the **On Failure** property should only be applied if the **True** option for the **Transactional** property is applied.</span></span> <span data-ttu-id="088b0-153">次に、メッセージの配信エラーが発生した場合、元のメッセージをソース MSMQ キューに左されます。</span><span class="sxs-lookup"><span data-stu-id="088b0-153">Then, if a message delivery failure occurs, the original message will be left in the source MSMQ queue.</span></span> <span data-ttu-id="088b0-154">場合、**順次処理**の値に設定されて**False** 、**エラー時**効果と、メッセージをメッセージ配信エラーが発生したかどうか、プロパティは実行されません状態が中断されます**中断 (再開可能)** します。</span><span class="sxs-lookup"><span data-stu-id="088b0-154">If the **Ordered Processing** property is set to a value of **False** then the **On Failure** property will not take effect and if a message delivery failure occurs the message will be suspended with a status of **Suspended (resumable)**.</span></span>|<span data-ttu-id="088b0-155">String</span><span class="sxs-lookup"><span data-stu-id="088b0-155">String</span></span>|<span data-ttu-id="088b0-156">Suspend(resumable)</span><span class="sxs-lookup"><span data-stu-id="088b0-156">Suspend(resumable)</span></span>|  
    |<span data-ttu-id="088b0-157">**順次処理**</span><span class="sxs-lookup"><span data-stu-id="088b0-157">**Ordered Processing**</span></span>|<span data-ttu-id="088b0-158">このプロパティを設定**True**または**False**します。</span><span class="sxs-lookup"><span data-stu-id="088b0-158">Set this property to **True** or **False**.</span></span> <span data-ttu-id="088b0-159">これは、メッセージを順番に処理するかどうかを示します。</span><span class="sxs-lookup"><span data-stu-id="088b0-159">This indicates whether to process messages serially.</span></span> <span data-ttu-id="088b0-160">プロパティを設定する**True** BizTalk メッセージングまたはオーケストレーション送信のポートを持つと組み合わせて使用すると、メッセージの順次配送が可能になります、**順次配送**に設定するオプション**True**します。</span><span class="sxs-lookup"><span data-stu-id="088b0-160">Setting the property to **True** will accommodate ordered message delivery when used in conjunction with a BizTalk messaging or orchestration send port that has the **Ordered Delivery** option set to **True**.</span></span> <span data-ttu-id="088b0-161">詳細については、次を参照してください。[のメッセージ配信の順序付けられた](../core/ordered-delivery-of-messages.md)します。</span><span class="sxs-lookup"><span data-stu-id="088b0-161">For more information see [Ordered Delivery of Messages](../core/ordered-delivery-of-messages.md).</span></span><br /><br /> <span data-ttu-id="088b0-162">このプロパティを設定**True**アダプターをシングル スレッド化して大きなメッセージを処理する場合にもリソースの使用状況を最適化します。</span><span class="sxs-lookup"><span data-stu-id="088b0-162">Setting this property to **True** also optimizes resource usage when handling large messages by making the adapter single-threaded.</span></span> <span data-ttu-id="088b0-163">詳細については、次を参照してください。 [MSMQ アダプターを使用してサイズの大きいメッセージを送受信する](../core/sending-and-receiving-large-messages-using-the-msmq-adapter.md)します。</span><span class="sxs-lookup"><span data-stu-id="088b0-163">For more information, see [Sending and Receiving Large Messages Using the MSMQ Adapter](../core/sending-and-receiving-large-messages-using-the-msmq-adapter.md).</span></span>|<span data-ttu-id="088b0-164">ブール値</span><span class="sxs-lookup"><span data-stu-id="088b0-164">Boolean</span></span>|<span data-ttu-id="088b0-165">False</span><span class="sxs-lookup"><span data-stu-id="088b0-165">False</span></span>|  
    |<span data-ttu-id="088b0-166">**キュー**</span><span class="sxs-lookup"><span data-stu-id="088b0-166">**Queue**</span></span>|<span data-ttu-id="088b0-167">有効なキューのパスを入力します。</span><span class="sxs-lookup"><span data-stu-id="088b0-167">Type a valid queue path.</span></span> <span data-ttu-id="088b0-168">キューのパスを指定する、によっては、システムは、適切な検証を実行します。</span><span class="sxs-lookup"><span data-stu-id="088b0-168">Depending on the queue path you specify, the system performs the appropriate validations.</span></span> <span data-ttu-id="088b0-169">**注:** URI を送信ポートまたは受信場所が 256 文字を超えることはできません。</span><span class="sxs-lookup"><span data-stu-id="088b0-169">**Note:**  The URI for a send port or receive location cannot exceed 256 characters.</span></span> <span data-ttu-id="088b0-170">**注:** MSMQ 受信アダプターは、0.5 秒おきに新しいメッセージの指定された MSMQ キューを監視するためのポーリング メカニズムを使用します。</span><span class="sxs-lookup"><span data-stu-id="088b0-170">**Note:**  MSMQ Receive adapter uses a polling mechanism to monitor the specified MSMQ queue for new messages every 0.5 seconds.</span></span> <span data-ttu-id="088b0-171">この 0.5 秒の間隔は、固定間隔です。</span><span class="sxs-lookup"><span data-stu-id="088b0-171">This 0.5 second interval is a fixed interval.</span></span>|<span data-ttu-id="088b0-172">String</span><span class="sxs-lookup"><span data-stu-id="088b0-172">String</span></span>|<span data-ttu-id="088b0-173">空白</span><span class="sxs-lookup"><span data-stu-id="088b0-173">Blank</span></span>|  
    |<span data-ttu-id="088b0-174">**トランザクション**</span><span class="sxs-lookup"><span data-stu-id="088b0-174">**Transactional**</span></span>|<span data-ttu-id="088b0-175">このプロパティを設定**True**または**False**します。</span><span class="sxs-lookup"><span data-stu-id="088b0-175">Set this property to **True** or **False**.</span></span> <span data-ttu-id="088b0-176">**注:** アダプターはメッセージ キュー 4.0 以降を使用したリモート キューのトランザクション読み込みのみをサポートしています。</span><span class="sxs-lookup"><span data-stu-id="088b0-176">**Note:**  The adapter supports transactional reads of remote queues with Message Queuing 4.0 or later only.</span></span> <span data-ttu-id="088b0-177">このシナリオでは、BizTalk Server とリモート メッセージ キュー サーバーの両方必要があります実行しているメッセージ キュー 4.0 またはそれ以降。</span><span class="sxs-lookup"><span data-stu-id="088b0-177">In this scenario both the BizTalk Server and the remote Message Queuing server must be running Message Queuing 4.0 or later.</span></span> <br /><br /> <span data-ttu-id="088b0-178">詳細については、次を参照してください。 [MSMQ アダプターの構成](../core/configuring-the-msmq-adapter.md)と[されたクラスター化されたホストでアダプター ハンドラーの実行に関する考慮事項](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)します。</span><span class="sxs-lookup"><span data-stu-id="088b0-178">For more information, see [Configuring the MSMQ Adapter](../core/configuring-the-msmq-adapter.md) and [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span>|<span data-ttu-id="088b0-179">ブール値</span><span class="sxs-lookup"><span data-stu-id="088b0-179">Boolean</span></span>|<span data-ttu-id="088b0-180">False</span><span class="sxs-lookup"><span data-stu-id="088b0-180">False</span></span>|  
  
    > [!NOTE]
    >  <span data-ttu-id="088b0-181">**ユーザー名**と**パスワード**リモート キューにアクセスするために使用する Windows アカウントにのみ適用されます。</span><span class="sxs-lookup"><span data-stu-id="088b0-181">The **User Name** and **Password** apply only to Windows accounts used to access remote queues.</span></span>  
  
6.  <span data-ttu-id="088b0-182">**[OK]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="088b0-182">Click **OK**.</span></span>  
  
7.  <span data-ttu-id="088b0-183">**受信場所のプロパティ** ダイアログ ボックスに、受信場所の構成を完了し、をクリックするには、適切な値を入力して、 **OK**設定を保存します。</span><span class="sxs-lookup"><span data-stu-id="088b0-183">In the **Receive Location Properties** dialog box, enter the appropriate values to complete the configuration of the receive location, and click **OK** to save settings.</span></span> <span data-ttu-id="088b0-184">**[受信場所のプロパティ]** ダイアログ ボックスの詳細については、「 [受信場所を作成する方法](../core/how-to-create-a-receive-location.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="088b0-184">For information about the **Receive Locations Properties** dialog box, see [How to Create a Receive Location](../core/how-to-create-a-receive-location.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="088b0-185">参照</span><span class="sxs-lookup"><span data-stu-id="088b0-185">See Also</span></span>  
 [<span data-ttu-id="088b0-186">MSMQ アダプターの構成</span><span class="sxs-lookup"><span data-stu-id="088b0-186">Configuring the MSMQ Adapter</span></span>](../core/configuring-the-msmq-adapter.md)