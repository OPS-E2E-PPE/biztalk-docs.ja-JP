---
title: "MSMQ 受信場所を構成する方法 |Microsoft ドキュメント"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- MSMQ adapters, receive locations
- receive locations, MSMQ adapters
- configuring [MSMQ adapters], receive locations
ms.assetid: ba25cf43-18f1-4c19-84fb-74c7b82b95a9
caps.latest.revision: "43"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 795b72318054525485a64c9dd704b81ddf6cb6b9
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/01/2017
---
# <a name="how-to-configure-an-msmq-receive-location"></a><span data-ttu-id="fe663-102">MSMQ の受信場所を構成する方法</span><span class="sxs-lookup"><span data-stu-id="fe663-102">How to Configure an MSMQ Receive Location</span></span>
<span data-ttu-id="fe663-103">MSMQ の受信場所のアダプター変数は、BizTalk Server 管理コンソールで設定できます。</span><span class="sxs-lookup"><span data-stu-id="fe663-103">You can set MSMQ receive location adapter variables in the BizTalk Server Administration console.</span></span> <span data-ttu-id="fe663-104">プロパティが受信場所に設定されていない場合は、BizTalk Server 管理コンソールで設定された既定の受信ハンドラーの値が使用されます。</span><span class="sxs-lookup"><span data-stu-id="fe663-104">If properties are not set in the receive location, the default receive handler values set in the BizTalk Server Administration console are used.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="fe663-105">次の手順を実行する前に、受信ポートを追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="fe663-105">Before completing the following procedure you must have already added a receive port.</span></span> <span data-ttu-id="fe663-106">詳細については、次を参照してください。[受信ポートを作成する方法](../core/how-to-create-a-receive-port.md)です。</span><span class="sxs-lookup"><span data-stu-id="fe663-106">For more information see [How to Create a Receive Port](../core/how-to-create-a-receive-port.md).</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="fe663-107">ホスト インスタンスが MSMQ 送信ポートまたは受信場所に関連付けられている場合、そのコンピューターで MSMQ サービスが実行されていることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="fe663-107">If a host instance is associated with an MSMQ send port or receive location, verify the MSMQ service is running on that machine.</span></span> <span data-ttu-id="fe663-108">サービスが実行されていない場合、MSMQ 受信ポートは、起動後すぐにシャットダウンされ、MSMQ 送信ポートに送信されたメッセージは中断されます。</span><span class="sxs-lookup"><span data-stu-id="fe663-108">If the service is not running, the MSMQ receive ports will shut down shortly after they are started, and messages sent to the MSMQ send ports will be suspended.</span></span>  
>   
>  <span data-ttu-id="fe663-109">クラスター環境では、クラスター化された MSMQ インスタンスが実行されていることに加え、各クラスター コンピューターでローカル MSMQ サービスが実行されている必要があります。</span><span class="sxs-lookup"><span data-stu-id="fe663-109">In a clustered scenario, not only does the clustered MSMQ instance need to be running, but the local MSMQ service on each cluster machine should be running, as well.</span></span>  
  
## <a name="to-configure-variables-for-an-msmq-receive-location"></a><span data-ttu-id="fe663-110">MSMQ の受信場所の変数を構成するには</span><span class="sxs-lookup"><span data-stu-id="fe663-110">To configure variables for an MSMQ receive location</span></span>  
 <span data-ttu-id="fe663-111">MSMQ の受信場所の変数を構成するには、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="fe663-111">Follow these steps to configure variables for an MSMQ receive location:</span></span>  
  
1.  <span data-ttu-id="fe663-112">BizTalk Server 管理コンソールで、次のように展開します**BizTalk Server 管理コンソール**、展開**BizTalk グループ**、展開**アプリケーション**、の順に展開し、。受信場所を作成するアプリケーション。</span><span class="sxs-lookup"><span data-stu-id="fe663-112">In the BizTalk Server Administration console, expand **BizTalk Server Administration**, expand **BizTalk Group**, expand **Applications**, and then expand the application you want to create a receive location in.</span></span>  
  
2.  <span data-ttu-id="fe663-113">BizTalk Server 管理コンソールで、左側のウィンドウでをクリックして、**受信ポート**ノード。</span><span class="sxs-lookup"><span data-stu-id="fe663-113">In the BizTalk Server Administration console, in the left pane, click the **Receive Port** node.</span></span> <span data-ttu-id="fe663-114">次に右ウィンドウで、既存の受信場所に関連付けられているか、新しい受信場所に関連付ける受信ポートを右クリックし、**[プロパティ]** をクリックします。</span><span class="sxs-lookup"><span data-stu-id="fe663-114">Then in the right pane, right-click the receive port that is associated with an existing receive location or that you want to associate with a new receive location, and then click **Properties**.</span></span>  
  
3.  <span data-ttu-id="fe663-115">**受信ポートのプロパティ**ダイアログ ボックスで、左ペインで、select、**受信場所**、右側のペインをダブルクリックして、既存の受信場所またはをクリックし **新規**新しい受信場所を作成します。</span><span class="sxs-lookup"><span data-stu-id="fe663-115">In the **Receive Port Properties** dialog box, in the left pane, select **Receive Locations**, and then in the right pane, double-click an existing receive location or click **New**to create a new receive location.</span></span>  
  
4.  <span data-ttu-id="fe663-116">**受信場所のプロパティ**] ダイアログ ボックスで、**トランスポート**横**型**[ **MSMQ**ドロップダウン リストからクリックして**構成**です。</span><span class="sxs-lookup"><span data-stu-id="fe663-116">In the **Receive Location Properties** dialog box, in the **Transport** section next to **Type**, select **MSMQ** from the drop-down list, and then click **Configure**.</span></span>  
  
5.  <span data-ttu-id="fe663-117">**MSMQ トランスポートのプロパティ** ダイアログ ボックスで、次の操作します。</span><span class="sxs-lookup"><span data-stu-id="fe663-117">In the **MSMQ Transport Properties** dialog box, do the following:</span></span>  
  
    |<span data-ttu-id="fe663-118">プロパティ</span><span class="sxs-lookup"><span data-stu-id="fe663-118">Use this</span></span>|<span data-ttu-id="fe663-119">目的</span><span class="sxs-lookup"><span data-stu-id="fe663-119">To do this</span></span>|<span data-ttu-id="fe663-120">日付型</span><span class="sxs-lookup"><span data-stu-id="fe663-120">Date type</span></span>|<span data-ttu-id="fe663-121">既定値</span><span class="sxs-lookup"><span data-stu-id="fe663-121">Default value</span></span>|  
    |--------------|----------------|---------------|-------------------|  
    |<span data-ttu-id="fe663-122">**Password**</span><span class="sxs-lookup"><span data-stu-id="fe663-122">**Password**</span></span>|<span data-ttu-id="fe663-123">リモート キューに使用するパスワードを設定します。</span><span class="sxs-lookup"><span data-stu-id="fe663-123">Set a password to use for a remote queue.</span></span>|<span data-ttu-id="fe663-124">文字列</span><span class="sxs-lookup"><span data-stu-id="fe663-124">String</span></span>|<span data-ttu-id="fe663-125">空白</span><span class="sxs-lookup"><span data-stu-id="fe663-125">Blank</span></span>|  
    |<span data-ttu-id="fe663-126">**[ユーザー名]**</span><span class="sxs-lookup"><span data-stu-id="fe663-126">**User Name**</span></span>|<span data-ttu-id="fe663-127">リモート キューにアクセスするため、パスワードと組み合わせて使用するユーザー名を設定します。</span><span class="sxs-lookup"><span data-stu-id="fe663-127">Determine the user name to use, in combination with the password, for access to a remote queue.</span></span> <span data-ttu-id="fe663-128">リモート コンピューターのローカル ユーザーは、ユーザー名に使用できません。</span><span class="sxs-lookup"><span data-stu-id="fe663-128">You cannot use the local user of the remote computer for the user name.</span></span>|<span data-ttu-id="fe663-129">文字列</span><span class="sxs-lookup"><span data-stu-id="fe663-129">String</span></span>|<span data-ttu-id="fe663-130">空白</span><span class="sxs-lookup"><span data-stu-id="fe663-130">Blank</span></span>|  
    |<span data-ttu-id="fe663-131">**バッチ サイズ**</span><span class="sxs-lookup"><span data-stu-id="fe663-131">**Batch Size**</span></span>|<span data-ttu-id="fe663-132">バッチ サイズを構成します。</span><span class="sxs-lookup"><span data-stu-id="fe663-132">Configure the batch size.</span></span> <span data-ttu-id="fe663-133">MSMQ アダプターでは、メッセージがメッセージ ボックス データベースにバッチ単位で送信されます。</span><span class="sxs-lookup"><span data-stu-id="fe663-133">The MSMQ adapter submits messages to the MessageBox database in batches.</span></span> <span data-ttu-id="fe663-134">既定のバッチ サイズは 20 で、最小値は 1 です。</span><span class="sxs-lookup"><span data-stu-id="fe663-134">The default batch size is 20, and the minimum batch size is 1.</span></span> <span data-ttu-id="fe663-135">**注:**場合、**トランザクション**受信場所のプロパティに設定されて**True**; 各メッセージ バッチは、Microsoft 分散のコンテキストでメッセージ ボックス データベースに送信トランザクション コーディネーター (MSDTC) トランザクションです。</span><span class="sxs-lookup"><span data-stu-id="fe663-135">**Note:**  If the **Transactional** property for the receive location is set to **True**; each message batch is submitted to the MessageBox database under the context of a Microsoft Distributed Transaction Coordinator (MSDTC) transaction.</span></span> <span data-ttu-id="fe663-136">メッセージ バッチ用に作成された MSDTC トランザクションは、そのメッセージ バッチのすべてのメッセージがメッセージ ボックスに保存され、適切なサブスクライバー キューに置かれるまで、開いたままになります。</span><span class="sxs-lookup"><span data-stu-id="fe663-136">The MSDTC transaction that is created for a message batch remains open until every message in the batch has been persisted to the MessageBox and placed in the appropriate subscriber queue.</span></span> <span data-ttu-id="fe663-137">したがって、この MSDTC トランザクションの期間を増やしてとして、**バッチ サイズ**パラメーターが増加します。</span><span class="sxs-lookup"><span data-stu-id="fe663-137">Therefore the duration of this MSDTC transaction is increased as the **Batch Size** parameter is increased.</span></span> <span data-ttu-id="fe663-138">多数の MSDTC トランザクションのオープンを同時に持つことができますに悪影響を与える全体的なパフォーマンスは、ので、**バッチ サイズ**トランザクションのサポートが有効にすると、パラメーターを非常に大きな値を設定しない必要があります。</span><span class="sxs-lookup"><span data-stu-id="fe663-138">Since having a large number of MSDTC transactions open simultaneously can negatively impact overall performance, the **Batch Size** parameter should not be set to a very large value when transaction support is enabled.</span></span>|<span data-ttu-id="fe663-139">int</span><span class="sxs-lookup"><span data-stu-id="fe663-139">Int</span></span>|<span data-ttu-id="fe663-140">20</span><span class="sxs-lookup"><span data-stu-id="fe663-140">20</span></span>|  
    |<span data-ttu-id="fe663-141">**エラー発生時に**</span><span class="sxs-lookup"><span data-stu-id="fe663-141">**On Failure**</span></span>|<span data-ttu-id="fe663-142">エラーに対するアダプターの対応方法を指定します。</span><span class="sxs-lookup"><span data-stu-id="fe663-142">Specify how the adapter should respond to an error.</span></span> <span data-ttu-id="fe663-143">このプロパティには、次のいずれかの値を設定します。</span><span class="sxs-lookup"><span data-stu-id="fe663-143">Set this property to one of the following values:</span></span><br /><br /> <span data-ttu-id="fe663-144">-   **停止します。**</span><span class="sxs-lookup"><span data-stu-id="fe663-144">-   **Stop.**</span></span> <span data-ttu-id="fe663-145">エラー状態になった場合、この受信場所からのメッセージの受信を停止します。</span><span class="sxs-lookup"><span data-stu-id="fe663-145">Stop receiving messages through this receive location if an error condition occurs.</span></span><br /><span data-ttu-id="fe663-146">-   **Suspend(non-resumable) です。**</span><span class="sxs-lookup"><span data-stu-id="fe663-146">-   **Suspend(non-resumable).**</span></span> <span data-ttu-id="fe663-147">メッセージを中断し、再開不可のマークを付けます。</span><span class="sxs-lookup"><span data-stu-id="fe663-147">Suspend messages and mark as non-resumable.</span></span><br /><span data-ttu-id="fe663-148">-   **Suspend(resumable) です。**</span><span class="sxs-lookup"><span data-stu-id="fe663-148">-   **Suspend(resumable).**</span></span> <span data-ttu-id="fe663-149">メッセージを中断し、再開可能のマークを付けます。</span><span class="sxs-lookup"><span data-stu-id="fe663-149">Suspend messages and mark as resumable.</span></span> <span data-ttu-id="fe663-150">**重要:**場合、 **True**オプションを**順次処理**、プロパティ、**停止**オプションを**エラー時**プロパティ、および**False**オプションを**トランザクション**プロパティは、同時に適用し、配信に失敗したメッセージは一時停止中またはソースのキューに残っていません。</span><span class="sxs-lookup"><span data-stu-id="fe663-150">**Important:**  If the **True** option for **Ordered Processing** property, the **Stop** option for the **On Failure** property, and the **False** option for the **Transactional** property are applied at the same time, then any messages that fail delivery will not be suspended or left in the source queue.</span></span> <span data-ttu-id="fe663-151">この場合、メッセージが失われる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="fe663-151">In this scenario, message loss can occur.</span></span> <span data-ttu-id="fe663-152">使用する場合に、データ損失を防ぐために、**順次処理**、機能、**停止**オプションを**エラー時**プロパティは、場合にのみ適用する必要があります、**は True。**オプションを**トランザクション**プロパティを適用します。</span><span class="sxs-lookup"><span data-stu-id="fe663-152">To prevent data loss, when using the **Ordered Processing** feature, the **Stop** option for the **On Failure** property should only be applied if the **True** option for the **Transactional** property is applied.</span></span> <span data-ttu-id="fe663-153">これにより、メッセージの配信エラーが発生した場合も、送信元の MSMQ キューに元のメッセージが残ります。</span><span class="sxs-lookup"><span data-stu-id="fe663-153">Then, if a message delivery failure occurs, the original message will be left in the source MSMQ queue.</span></span> <span data-ttu-id="fe663-154">場合、**順次処理**の値に設定されて**False** 、**エラー時**とメッセージをメッセージ配信エラーが発生したかどうかの影響を行わないプロパティ状態が中断されます**中断 (再開可能)**です。</span><span class="sxs-lookup"><span data-stu-id="fe663-154">If the **Ordered Processing** property is set to a value of **False** then the **On Failure** property will not take effect and if a message delivery failure occurs the message will be suspended with a status of **Suspended (resumable)**.</span></span>|<span data-ttu-id="fe663-155">文字列</span><span class="sxs-lookup"><span data-stu-id="fe663-155">String</span></span>|<span data-ttu-id="fe663-156">中断 (再開可能)</span><span class="sxs-lookup"><span data-stu-id="fe663-156">Suspend(resumable)</span></span>|  
    |<span data-ttu-id="fe663-157">**順次処理**</span><span class="sxs-lookup"><span data-stu-id="fe663-157">**Ordered Processing**</span></span>|<span data-ttu-id="fe663-158">このプロパティを設定**True**または**False**です。</span><span class="sxs-lookup"><span data-stu-id="fe663-158">Set this property to **True** or **False**.</span></span> <span data-ttu-id="fe663-159">このプロパティは、メッセージを順番に処理するかどうかを示しています。</span><span class="sxs-lookup"><span data-stu-id="fe663-159">This indicates whether to process messages serially.</span></span> <span data-ttu-id="fe663-160">プロパティを設定**True** 、BizTalk メッセージングまたはオーケストレーション送信ポートを持つと組み合わせて使用すると、メッセージの順次配送を合わせて、**順次配送**にセットのオプション**True**です。</span><span class="sxs-lookup"><span data-stu-id="fe663-160">Setting the property to **True** will accommodate ordered message delivery when used in conjunction with a BizTalk messaging or orchestration send port that has the **Ordered Delivery** option set to **True**.</span></span> <span data-ttu-id="fe663-161">詳細については、次を参照してください。[のメッセージ配信の順序付け](../core/ordered-delivery-of-messages.md)です。</span><span class="sxs-lookup"><span data-stu-id="fe663-161">For more information see [Ordered Delivery of Messages](../core/ordered-delivery-of-messages.md).</span></span><br /><br /> <span data-ttu-id="fe663-162">このプロパティを設定**True**アダプターをシングル スレッド化して大きなメッセージを処理する場合にもリソースの利用状況を最適化します。</span><span class="sxs-lookup"><span data-stu-id="fe663-162">Setting this property to **True** also optimizes resource usage when handling large messages by making the adapter single-threaded.</span></span> <span data-ttu-id="fe663-163">詳細については、次を参照してください。 [MSMQ アダプターを使用してサイズの大きいメッセージを送受信する](../core/sending-and-receiving-large-messages-using-the-msmq-adapter.md)です。</span><span class="sxs-lookup"><span data-stu-id="fe663-163">For more information, see [Sending and Receiving Large Messages Using the MSMQ Adapter](../core/sending-and-receiving-large-messages-using-the-msmq-adapter.md).</span></span>|<span data-ttu-id="fe663-164">ブール値</span><span class="sxs-lookup"><span data-stu-id="fe663-164">Boolean</span></span>|<span data-ttu-id="fe663-165">False</span><span class="sxs-lookup"><span data-stu-id="fe663-165">False</span></span>|  
    |<span data-ttu-id="fe663-166">**キュー**</span><span class="sxs-lookup"><span data-stu-id="fe663-166">**Queue**</span></span>|<span data-ttu-id="fe663-167">有効なキューのパスを入力します。</span><span class="sxs-lookup"><span data-stu-id="fe663-167">Type a valid queue path.</span></span> <span data-ttu-id="fe663-168">指定するキューのパスに応じて、システムが適切な検証を行います。</span><span class="sxs-lookup"><span data-stu-id="fe663-168">Depending on the queue path you specify, the system performs the appropriate validations.</span></span> <span data-ttu-id="fe663-169">**注:**の URI を送信ポートまたは受信場所は、256 文字を超えることはできません。</span><span class="sxs-lookup"><span data-stu-id="fe663-169">**Note:**  The URI for a send port or receive location cannot exceed 256 characters.</span></span> <span data-ttu-id="fe663-170">**注:** MSMQ 受信アダプターでは、ポーリング メカニズムを使用して 0.5 秒ごとに新しいメッセージの指定した MSMQ キューを監視します。</span><span class="sxs-lookup"><span data-stu-id="fe663-170">**Note:**  MSMQ Receive adapter uses a polling mechanism to monitor the specified MSMQ queue for new messages every 0.5 seconds.</span></span> <span data-ttu-id="fe663-171">この 0.5 秒は固定の間隔です。</span><span class="sxs-lookup"><span data-stu-id="fe663-171">This 0.5 second interval is a fixed interval.</span></span>|<span data-ttu-id="fe663-172">文字列</span><span class="sxs-lookup"><span data-stu-id="fe663-172">String</span></span>|<span data-ttu-id="fe663-173">空白</span><span class="sxs-lookup"><span data-stu-id="fe663-173">Blank</span></span>|  
    |<span data-ttu-id="fe663-174">**トランザクション**</span><span class="sxs-lookup"><span data-stu-id="fe663-174">**Transactional**</span></span>|<span data-ttu-id="fe663-175">このプロパティを設定**True**または**False**です。</span><span class="sxs-lookup"><span data-stu-id="fe663-175">Set this property to **True** or **False**.</span></span> <span data-ttu-id="fe663-176">**注:**アダプターがメッセージ キュー 4.0 以降のみでのリモート キューのトランザクション読み取りをサポートします。</span><span class="sxs-lookup"><span data-stu-id="fe663-176">**Note:**  The adapter supports transactional reads of remote queues with Message Queuing 4.0 or later only.</span></span> <span data-ttu-id="fe663-177">このシナリオでは、BizTalk Server とリモートのメッセージ キュー サーバーの両方あります実行されているメッセージ キュー 4.0 またはそれ以降。</span><span class="sxs-lookup"><span data-stu-id="fe663-177">In this scenario both the BizTalk Server and the remote Message Queuing server must be running Message Queuing 4.0 or later.</span></span> <br /><br /> <span data-ttu-id="fe663-178">詳細については、次を参照してください。 [MSMQ アダプタを構成する](../core/configuring-the-msmq-adapter.md)と[化されたクラスター化されたホストでアダプター ハンドラーの実行に関する考慮事項](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md)です。</span><span class="sxs-lookup"><span data-stu-id="fe663-178">For more information, see [Configuring the MSMQ Adapter](../core/configuring-the-msmq-adapter.md) and [Considerations for Running Adapter Handlers within a Clustered Host](../core/considerations-for-running-adapter-handlers-within-a-clustered-host1.md).</span></span>|<span data-ttu-id="fe663-179">ブール値</span><span class="sxs-lookup"><span data-stu-id="fe663-179">Boolean</span></span>|<span data-ttu-id="fe663-180">False</span><span class="sxs-lookup"><span data-stu-id="fe663-180">False</span></span>|  
  
    > [!NOTE]
    >  <span data-ttu-id="fe663-181">**ユーザー名**と**パスワード**リモート キューにアクセスするために使用する Windows アカウントのみに適用します。</span><span class="sxs-lookup"><span data-stu-id="fe663-181">The **User Name** and **Password** apply only to Windows accounts used to access remote queues.</span></span>  
  
6.  <span data-ttu-id="fe663-182">**[OK]**をクリックします。</span><span class="sxs-lookup"><span data-stu-id="fe663-182">Click **OK**.</span></span>  
  
7.  <span data-ttu-id="fe663-183">**受信場所のプロパティ** ダイアログ ボックスで、受信場所の構成を完了し、をクリックするには、適切な値を入力して**OK**設定を保存します。</span><span class="sxs-lookup"><span data-stu-id="fe663-183">In the **Receive Location Properties** dialog box, enter the appropriate values to complete the configuration of the receive location, and click **OK** to save settings.</span></span> <span data-ttu-id="fe663-184">については、**受信場所のプロパティ**ダイアログ ボックスを参照してください[受信場所を作成する方法](../core/how-to-create-a-receive-location.md)です。</span><span class="sxs-lookup"><span data-stu-id="fe663-184">For information about the **Receive Locations Properties** dialog box, see [How to Create a Receive Location](../core/how-to-create-a-receive-location.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="fe663-185">参照</span><span class="sxs-lookup"><span data-stu-id="fe663-185">See Also</span></span>  
 [<span data-ttu-id="fe663-186">MSMQ アダプターの構成</span><span class="sxs-lookup"><span data-stu-id="fe663-186">Configuring the MSMQ Adapter</span></span>](../core/configuring-the-msmq-adapter.md)