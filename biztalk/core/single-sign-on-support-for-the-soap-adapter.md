---
title: 単一、SOAP アダプターのシングル サインオンのサポート |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- SSO, SOAP adapters
- SOAP adapters, SharePoint Portal Server
- SOAP adapters, SSO
- SharePoint Portal server
ms.assetid: c7bf755c-c37d-4b19-9817-a7f42e1e9656
caps.latest.revision: 18
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 96dfe91651f074649c500ec4e40d6b2c01e649d5
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65247193"
---
# <a name="single-sign-on-support-for-the-soap-adapter"></a><span data-ttu-id="6f32b-102">SOAP アダプターのシングル サインオン サポート</span><span class="sxs-lookup"><span data-stu-id="6f32b-102">Single Sign-On Support for the SOAP Adapter</span></span>
<span data-ttu-id="6f32b-103">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理コンソールを使用して、SOAP 受信場所または送信ポートで使用するエンタープライズ シングル サインオン (SSO) を構成できます。</span><span class="sxs-lookup"><span data-stu-id="6f32b-103">You can use the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console to configure Enterprise Single Sign-On (SSO) for use with the SOAP receive location or send port.</span></span> <span data-ttu-id="6f32b-104">ここでは、SSO と SOAP アダプターの連携について説明します。</span><span class="sxs-lookup"><span data-stu-id="6f32b-104">This topic describes how SSO works with the SOAP adapter.</span></span>  
  
 <span data-ttu-id="6f32b-105">**受信場所の SOAP のシングル サインオン サポート**</span><span class="sxs-lookup"><span data-stu-id="6f32b-105">**Single Sign-On Support for SOAP Receive Locations**</span></span>  
  
 <span data-ttu-id="6f32b-106">SOAP 受信場所では、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] エンタープライズ SSO と、Microsoft SharePoint Portal Server SSO という 2 種類の SSO がサポートされます。</span><span class="sxs-lookup"><span data-stu-id="6f32b-106">SOAP receive locations support two versions of SSO—[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Enterprise SSO and Microsoft SharePoint Portal Server SSO.</span></span> <span data-ttu-id="6f32b-107">SharePoint Portal Server SSO のサポートを有効にするには、BizTalk Web サービス公開ウィザードを実行します。</span><span class="sxs-lookup"><span data-stu-id="6f32b-107">Run the BizTalk Web Services Publishing Wizard to enable support for SharePoint Portal Server SSO.</span></span> <span data-ttu-id="6f32b-108">SharePoint Portal Server SSO が有効にする方法の詳細については、次を参照してください。 [Web サービスの公開](../core/publishing-web-services.md)します。</span><span class="sxs-lookup"><span data-stu-id="6f32b-108">For more information about enabling SharePoint Portal Server SSO, see [Publishing Web Services](../core/publishing-web-services.md).</span></span> <span data-ttu-id="6f32b-109">BizTalk エンタープライズ シングル サインオンを有効にするには、SOAP 受信場所のプロパティ ページを使用します。</span><span class="sxs-lookup"><span data-stu-id="6f32b-109">Enable BizTalk Enterprise Single Sign-On by using the property pages for the SOAP receive location.</span></span> <span data-ttu-id="6f32b-110">SOAP 受信場所のエンタープライズ SSO を有効にする方法の詳細については、次を参照してください。 [SOAP 受信場所を構成する方法](../core/how-to-configure-a-soap-receive-location.md)します。</span><span class="sxs-lookup"><span data-stu-id="6f32b-110">For more information about enabling Enterprise SSO for the SOAP receive location, see [How to Configure a SOAP Receive Location](../core/how-to-configure-a-soap-receive-location.md).</span></span>  
  
 <span data-ttu-id="6f32b-111">**受信場所の SOAP のエンタープライズ SSO のサポート**</span><span class="sxs-lookup"><span data-stu-id="6f32b-111">**Enterprise SSO Support for SOAP Receive Locations**</span></span>  
  
 <span data-ttu-id="6f32b-112">インターネット インフォメーション サービス (IIS) では Web クライアントから SOAP 要求を受信し、ユーザーを認証した後、SOAP アダプターにセキュリティ識別子を渡します。</span><span class="sxs-lookup"><span data-stu-id="6f32b-112">Internet Information Services (IIS) receives a SOAP request from a Web client, and then IIS authenticates the user and passes the security identifier to the SOAP adapter.</span></span> <span data-ttu-id="6f32b-113">IIS の認証方法がダイジェスト認証、基本認証、統合 Windows 認証のいずれかである場合、暗号化されたチケットを取得するために、認証を受けたユーザーに基づいて SSO 資格情報ストアが呼び出されます。</span><span class="sxs-lookup"><span data-stu-id="6f32b-113">If the IIS authentication method is Digest authentication, Basic authentication, or Integrated Windows Authentication, the SOAP adapter calls the SSO credential store to obtain an encrypted ticket based on the authenticated user.</span></span> <span data-ttu-id="6f32b-114">このチケットとして格納されている、 **SSOTicket**メッセージのコンテキスト プロパティのプロパティ。</span><span class="sxs-lookup"><span data-stu-id="6f32b-114">This ticket is stored as the **SSOTicket** property in the context property of the message.</span></span>  
  
 <span data-ttu-id="6f32b-115">パススルー シナリオでは、BizTalk メッセージング エンジンによって、メッセージ ボックス データベースにメッセージが送信されます。</span><span class="sxs-lookup"><span data-stu-id="6f32b-115">In the pass-through scenario, the BizTalk Messaging Engine directs the message to the MessageBox database.</span></span> <span data-ttu-id="6f32b-116">送信アダプターでは、メッセージ ボックス データベースからメッセージを受信すると、暗号化されたチケットおよびアプリケーション名を指定して RedeemTicket メソッドを呼び出し、そのアプリケーションで使用するセキュリティ資格情報を SSO ストアから取得します。</span><span class="sxs-lookup"><span data-stu-id="6f32b-116">When a send adapter receives the message from the MessageBox database, it calls the RedeemTicket method with the encrypted ticket along with the application name to retrieve the security credentials for the application from the SSO store.</span></span> <span data-ttu-id="6f32b-117">その後、外部の資格情報を使用してアプリケーションに接続し、SOAP 要求が処理されます。</span><span class="sxs-lookup"><span data-stu-id="6f32b-117">The send adapter then uses the external credentials to connect to the application and process the request.</span></span> <span data-ttu-id="6f32b-118">関連アプリケーションの詳細については、次を参照してください。 [SSO 関連アプリケーション](../core/sso-affiliate-applications.md)します。</span><span class="sxs-lookup"><span data-stu-id="6f32b-118">For more information about the affiliate applications, see [SSO Affiliate Applications](../core/sso-affiliate-applications.md).</span></span>  
  
 <span data-ttu-id="6f32b-119">オーケストレーションが送信アダプターを呼び出すシナリオでは、BizTalk メッセージング エンジンによって、メッセージ ボックス データベースにメッセージが送信されます。</span><span class="sxs-lookup"><span data-stu-id="6f32b-119">In scenarios where an orchestration invokes the send adapter, the BizTalk Messaging Engine sends the message to the MessageBox database.</span></span> <span data-ttu-id="6f32b-120">オーケストレーションで、ことを確認します両方、 **SSOTicket**コンテキスト プロパティと**Microsoft.BizTalk.XLANGs.BTXEngine.OriginatorSID**チケットを格納しているメッセージのコンテキスト プロパティには維持されます。</span><span class="sxs-lookup"><span data-stu-id="6f32b-120">The orchestration should ensure that both the **SSOTicket** context property and the **Microsoft.BizTalk.XLANGs.BTXEngine.OriginatorSID** context property of the message that contains the ticket are maintained.</span></span> <span data-ttu-id="6f32b-121">HTTP アダプターでは、メッセージ ボックス データベースからこのメッセージを受信すると、暗号化されたチケットを指定して RedeemTicket メソッドを呼び出し、バックエンドの資格情報を SSO ストアから取得します。</span><span class="sxs-lookup"><span data-stu-id="6f32b-121">When the adapter receives this message from the MessageBox database, the adapter calls the RedeemTicket method with the encrypted ticket to retrieve the back-end credentials from the SSO store.</span></span> <span data-ttu-id="6f32b-122">オーケストレーションをデザインするユーザーは、このプロパティをメッセージに明示的にコピーしてください。</span><span class="sxs-lookup"><span data-stu-id="6f32b-122">The user designing the orchestration should specifically copy this property to the message.</span></span>  
  
 <span data-ttu-id="6f32b-123">**受信場所の SOAP の SharePoint Portal Server SSO のサポート**</span><span class="sxs-lookup"><span data-stu-id="6f32b-123">**SharePoint Portal Server SSO Support for SOAP Receive Locations**</span></span>  
  
 <span data-ttu-id="6f32b-124">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] を SharePoint Portal Server と統合している場合、SOAP アダプター経由でのみ Microsoft SharePoint Portal Server SSO の使用がサポートされます。</span><span class="sxs-lookup"><span data-stu-id="6f32b-124">When integrating with SharePoint Portal Server, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] supports the use of Microsoft SharePoint Portal Server SSO only through the SOAP adapter.</span></span> <span data-ttu-id="6f32b-125">SharePoint Portal Server では SSO チケットを作成し、SOAP 要求の SOAP ヘッダーに格納して BizTalk Server に送信します。</span><span class="sxs-lookup"><span data-stu-id="6f32b-125">SharePoint Portal Server creates SSO tickets and sends them to BizTalk Server in a SOAP header of the SOAP request.</span></span> <span data-ttu-id="6f32b-126">チケットとして格納されている SOAP アダプタは、SSO チケットを格納している要求を受信したときに、 **SSOTicket**メッセージのコンテキスト プロパティのプロパティ。</span><span class="sxs-lookup"><span data-stu-id="6f32b-126">When the SOAP adapter receives a request containing an SSO ticket, the ticket is stored as the **SSOTicket** property in the context property of the message.</span></span> <span data-ttu-id="6f32b-127">このプロパティには、エンタープライズ SSO チケットも格納されます。</span><span class="sxs-lookup"><span data-stu-id="6f32b-127">This same property would contain an Enterprise SSO ticket.</span></span> <span data-ttu-id="6f32b-128">1 つの BizTalk メッセージには、1 つの SSO チケットのみを関連付けることができます。</span><span class="sxs-lookup"><span data-stu-id="6f32b-128">Only one SSO ticket can be associated with a BizTalk message.</span></span>  
  
 <span data-ttu-id="6f32b-129">パススルーおよびオーケストレーションのシナリオで SharePoint Portal Server から受信した SSO チケットは、エンタープライズ SSO を使用して SOAP アダプターで作成されたチケットと同様に処理されます。</span><span class="sxs-lookup"><span data-stu-id="6f32b-129">In both pass-through and orchestration scenarios, the handling of an SSO ticket received from SharePoint Portal Server is the same as if the ticket were created by the SOAP adapter using Enterprise SSO.</span></span> <span data-ttu-id="6f32b-130">送信アダプターはメッセージを受信、呼び出し、 **RedeemTicket**メソッドを暗号化されたチケットを SharePoint Portal Server が生成されます。</span><span class="sxs-lookup"><span data-stu-id="6f32b-130">When a send adapter receives a message, it calls the **RedeemTicket** method with the encrypted ticket that SharePoint Portal Server generated.</span></span> <span data-ttu-id="6f32b-131">異なる種類の SSO チケットが存在していることを送信アダプターで認識する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="6f32b-131">The send adapter does not need to be aware that different SSO tickets exist.</span></span> <span data-ttu-id="6f32b-132">**RedeemTicket**メソッドはどの SSO システムには、チケットが生成されたかを判断し、適切な場所から商品と引き換えます。</span><span class="sxs-lookup"><span data-stu-id="6f32b-132">The **RedeemTicket** method will determine which SSO system generated the ticket and redeem it from the appropriate place.</span></span>  
  
 <span data-ttu-id="6f32b-133">**エンタープライズの併用 SSO と SharePoint Portal Server SSO**</span><span class="sxs-lookup"><span data-stu-id="6f32b-133">**Combined Use of Enterprise SSO and SharePoint Portal Server SSO**</span></span>  
  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="6f32b-134">では、両方の SSO システムの同時使用をサポートしています。</span><span class="sxs-lookup"><span data-stu-id="6f32b-134">supports the simultaneous use of both SSO systems.</span></span> <span data-ttu-id="6f32b-135">それぞれの SSO で生成したチケットを API で区別できるので、適切な SSO データベースで引き換えることができます。</span><span class="sxs-lookup"><span data-stu-id="6f32b-135">The API can differentiate between the tickets generated by each SSO and will redeem them from the appropriate SSO database.</span></span> <span data-ttu-id="6f32b-136">次の規則が、SOAP 受信される SSO チケットを判断すると同時に両方の SSO システムを使用する場合の場所が昇格する、 **SSOTicket**コンテキストのプロパティ。</span><span class="sxs-lookup"><span data-stu-id="6f32b-136">If you use both SSO systems at the same time, the following rules determine which SSO ticket the SOAP receive location promotes to the **SSOTicket** context property:</span></span>  
  
- <span data-ttu-id="6f32b-137">いずれの SSO も有効でない場合、チケットを昇格しません。</span><span class="sxs-lookup"><span data-stu-id="6f32b-137">If neither SSO is enabled, do not promote a ticket.</span></span>  
  
- <span data-ttu-id="6f32b-138">エンタープライズ SSO が有効であり、SharePoint Portal Server SSO が有効でない場合、エンタープライズ SSO チケットを取得して昇格します。</span><span class="sxs-lookup"><span data-stu-id="6f32b-138">If the Enterprise SSO is enabled, but the SharePoint Portal Server SSO is not enabled, retrieve and promote the Enterprise SSO ticket.</span></span>  
  
- <span data-ttu-id="6f32b-139">SharePoint Portal Server SSO が有効であり、エンタープライズ SSO が有効でない場合、既存の SharePoint Portal Server SSO チケットを昇格します。</span><span class="sxs-lookup"><span data-stu-id="6f32b-139">If the SharePoint Portal Server SSO is enabled, but the Enterprise SSO is not enabled, promote the existing SharePoint Portal Server SSO ticket.</span></span>  
  
- <span data-ttu-id="6f32b-140">エンタープライズ SSO と SharePoint Portal Server SSO がともに有効である場合、さらに次の規則が適用されます。</span><span class="sxs-lookup"><span data-stu-id="6f32b-140">If both the Enterprise and SharePoint Portal Server SSO are enabled:</span></span>  
  
  -   <span data-ttu-id="6f32b-141">SharePoint Portal Server SSO チケットを受信した場合、そのチケットを昇格します。</span><span class="sxs-lookup"><span data-stu-id="6f32b-141">If the SharePoint Portal Server SSO ticket is received, promote that ticket.</span></span>  
  
  -   <span data-ttu-id="6f32b-142">SharePoint Portal Server SSO チケットを受信していない場合、エンタープライズ SSO チケットを取得して昇格します。</span><span class="sxs-lookup"><span data-stu-id="6f32b-142">If the SharePoint Portal Server SSO ticket is not received, retrieve and promote the Enterprise SSO ticket.</span></span>  
  
  <span data-ttu-id="6f32b-143">**SOAP 送信アダプタのシングル サインオン サポート**</span><span class="sxs-lookup"><span data-stu-id="6f32b-143">**Single Sign-On Support for the SOAP Send Adapter**</span></span>  
  
  <span data-ttu-id="6f32b-144">SSO が有効になっている場合と SOAP 送信ポートを含むメッセージを受信、 **Secure**プロパティ (**SSOTicket**)、SSO サーバーを検証し、関連アプリケーションのチケットを引き換えるを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="6f32b-144">If SSO is enabled, when a SOAP send port receives a message with the **Secure** property (**SSOTicket**), it calls the SSO server to validate and redeem the ticket for an affiliate application.</span></span> <span data-ttu-id="6f32b-145">SSO を呼び出してチケットを引き換える作業は、関連アプリケーションのアプリケーション管理者、関連管理者、または SSO 管理者が行います。</span><span class="sxs-lookup"><span data-stu-id="6f32b-145">The administration application, affiliate administrators, or SSO administrators for the affiliate application can call SSO to redeem a ticket.</span></span> <span data-ttu-id="6f32b-146">その後、SSO によってチケットが解読され、バックエンド資格情報を取得します。</span><span class="sxs-lookup"><span data-stu-id="6f32b-146">SSO then decrypts the ticket and obtains the back-end credentials.</span></span> <span data-ttu-id="6f32b-147">パススルーおよびオーケストレーションのシナリオは、SOAP 送信ポートの同じトピックの「Enterprise SSO サポートの SOAP 受信場所」セクションで説明した[、SOAP アダプターのシングル サインオン サポート](../core/single-sign-on-support-for-the-soap-adapter.md)します。</span><span class="sxs-lookup"><span data-stu-id="6f32b-147">The pass-through and orchestration scenarios are the same for the SOAP send port, as described in the "Enterprise SSO Support for SOAP Receive Locations" section of the topic [Single Sign-On Support for the SOAP Adapter](../core/single-sign-on-support-for-the-soap-adapter.md).</span></span>  
  
  <span data-ttu-id="6f32b-148">既定では、SOAP 送信ポートの SSO は有効になっていません。</span><span class="sxs-lookup"><span data-stu-id="6f32b-148">By default, the SOAP send port does not enable SSO.</span></span> <span data-ttu-id="6f32b-149">SOAP 送信ポートの SSO を有効にする方法の詳細については、次を参照してください。 [SOAP 送信ポートを構成する方法](../core/how-to-configure-a-soap-send-port.md)します。</span><span class="sxs-lookup"><span data-stu-id="6f32b-149">For more information about enabling SSO for the SOAP send port, see [How to Configure a SOAP Send Port](../core/how-to-configure-a-soap-send-port.md).</span></span>