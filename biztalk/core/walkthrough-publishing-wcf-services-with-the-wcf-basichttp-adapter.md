---
title: 'チュートリアル: Wcf-basichttp アダプターを使用した WCF サービスの発行 |Microsoft Docs'
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- tutorials, publishing
- WCF adapters, tutorials
- publishing, WCF services
- WCF-BasicHttp adapters, tutorials
- publishing, tutorials
- WCF services, publishing
- tutorials, WCF adapters
ms.assetid: 43b76215-9cb0-47ab-a085-c4cf265410f9
caps.latest.revision: 72
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 3721080fa296ab5e44ee72c2757461843cfb52bd
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/27/2018
ms.locfileid: "36979779"
---
# <a name="walkthrough-publishing-wcf-services-with-the-wcf-basichttp-adapter"></a><span data-ttu-id="83bdc-102">チュートリアル: Wcf-basichttp アダプターを使用した WCF サービスの発行</span><span class="sxs-lookup"><span data-stu-id="83bdc-102">Walkthrough: Publishing WCF Services with the WCF-BasicHttp Adapter</span></span>
## <a name="introduction"></a><span data-ttu-id="83bdc-103">概要</span><span class="sxs-lookup"><span data-stu-id="83bdc-103">Introduction</span></span>  
 <span data-ttu-id="83bdc-104">このチュートリアルでは、BizTalk WCF サービス公開ウィザードおよび WCF-BasicHttp アダプターを使用して、[!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)] サービスを BizTalk オーケストレーションとして公開します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-104">This walkthrough publishes a [!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)] service as a BizTalk orchestration by using the BizTalk WCF Service Publishing Wizard and the WCF-BasicHttp adapter.</span></span> <span data-ttu-id="83bdc-105">WCF-BasicHttp アダプターを使用して [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] エンドポイントを公開することで、BizTalk オーケストレーションは、別の Web サービスや [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] アプリケーションなどの外部クライアントに、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスとして認識されます。</span><span class="sxs-lookup"><span data-stu-id="83bdc-105">A BizTalk orchestration appears to an external client, such as another Web service or [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] application, as a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service by exposing a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] endpoint using the WCF-BasicHttp adapter.</span></span> <span data-ttu-id="83bdc-106">WCF-BasicHttp アダプターは、受信アダプターと送信アダプターの 2 つで構成されます。</span><span class="sxs-lookup"><span data-stu-id="83bdc-106">The WCF-BasicHttp adapter consists of both a send adapter and a receive adapter.</span></span> <span data-ttu-id="83bdc-107">このサンプルでは、このアダプターの受信側のみを使用し、HTTP または HTTPS プロトコルを使用して [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] クライアント アプリケーションからの WCF サービス要求を受信します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-107">In this sample you will use only the receive side of this adapter to receive WCF service requests through the HTTP or HTTPS protocol from [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client applications.</span></span>  
  
 <span data-ttu-id="83bdc-108">Wcf-basichttp アダプターを使用して、 **BasicHttpBinding**間の仲介役として機能する Web サービスの最初のリリースと互換性のあるトランスポート/プロトコル スタック実装を提供するバインディング[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]と[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]機能します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-108">The WCF-BasicHttp adapter uses the **BasicHttpBinding** binding to provide a transport/protocol stack implementation compatible with the initial release of Web services to serve as a bridge between [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] functionality.</span></span> <span data-ttu-id="83bdc-109">テキスト エンコードの HTTP または HTTPS トランスポートを使用して、WS-I 基本プロファイル 1.1 に準拠する ASMX ベースのレガシー Web サービスおよびクライアントと通信します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-109">It provides communication with legacy ASMX-based Web services and clients that conform to the WS-I Basic Profile 1.1, using either the HTTP or HTTPS transport with text encoding.</span></span> <span data-ttu-id="83bdc-110">WCF-BasicHttp アダプターを使用して、WS-\* プロトコルによってサポートされる高度な Web 通信機能を利用することはできません。</span><span class="sxs-lookup"><span data-stu-id="83bdc-110">Using the WCF-BasicHttp adapter you will not be able to take advantage of advanced Web communication features that are supported by WS-\* protocols.</span></span> <span data-ttu-id="83bdc-111">それが必要な場合は、WCF-WSHttp アダプターを使用してください。</span><span class="sxs-lookup"><span data-stu-id="83bdc-111">If you need to do that, use the WCF-WSHttp adapter.</span></span>  
  
 <span data-ttu-id="83bdc-112">このチュートリアルでは、WCF-BasicHttp 受信場所を作成してオーケストレーションを [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスとして公開する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-112">This walkthrough shows you how to create a WCF-BasicHttp receive location to publish an orchestration as a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  <span data-ttu-id="83bdc-113">[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスの分離されたホスティングを提供するように、インターネット インフォメーション サービス (IIS) を構成します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-113">You will configure Internet Information Services (IIS) to provide isolated hosting of that [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  <span data-ttu-id="83bdc-114">クライアント アプリケーションは、外部クライアントが公開された [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスをインターネット経由で呼び出してその機能を使用する方法を示す例として、公開された [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] オーケストレーションを呼び出します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-114">A client application calls the published [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] orchestration as an example of how an external client might call the published [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service over the Internet to use its functionality.</span></span>  
  
 <span data-ttu-id="83bdc-115">このチュートリアルを完了すると、次のタスクを実行できるようになります。</span><span class="sxs-lookup"><span data-stu-id="83bdc-115">After completing this walkthrough, you will understand how to perform the following tasks:</span></span>  
  
- <span data-ttu-id="83bdc-116">Visual Studio 内で使用して、**デプロイ**を展開するコマンド、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービスのローカル インスタンスに BizTalk アセンブリ内の BizTalk オーケストレーションの形式で[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-116">From within Visual Studio, use the **Deploy** command to deploy the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service in the form of a BizTalk orchestration inside a BizTalk assembly to a local instance of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="83bdc-117">Visual Studio からの展開では、オーケストレーション、パイプライン、スキーマ、マップなど、BizTalk ソリューションで使用されるリソースを含むアセンブリと共に生成される BizTalk アプリケーションが作成されます。</span><span class="sxs-lookup"><span data-stu-id="83bdc-117">Deployment from Visual Studio creates a BizTalk application that is populated with the assemblies containing resources such as orchestrations, pipelines, schemas, and maps to be used in the BizTalk solution.</span></span>  
  
- <span data-ttu-id="83bdc-118">展開後、BizTalk オーケストレーションは、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理コンソールを介して構成および制御できます。</span><span class="sxs-lookup"><span data-stu-id="83bdc-118">After it is deployed, the BizTalk orchestration is available for configuration and control through the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="83bdc-119">このチュートリアルでは、WCF-BasicHttp 受信場所を、BizTalk [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービス公開ウィザードで作成される [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスに送信される受信メッセージを受け取るように構成します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-119">In this walkthrough you will configure the WCF-BasicHttp receive location to accept incoming messages sent to the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service that the BizTalk [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Service Publishing Wizard creates.</span></span> <span data-ttu-id="83bdc-120">受信場所は、IIS の BizTalk 分離ホストによってホストされ、受信要求を処理する [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスとして機能します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-120">The receive location is hosted by the BizTalk isolated host in IIS, and acts as a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service to get to the incoming requests.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="83bdc-121">このチュートリアルでは、BizTalk WCF サービス公開ウィザードや BizTalk Web サービス公開ウィザードを使用して、BizTalk オーケストレーションとスキーマを [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] アダプターで [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスとして公開します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-121">In this walkthrough, you will use the BizTalk WCF Publishing Wizard and/or BizTalk Web Service Publishing Wizard to publish BizTalk orchestrations and schemas as [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] services with the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] adapters.</span></span> <span data-ttu-id="83bdc-122">使用するオーケストレーションとスキーマを SOAP アダプターを使用した Web サービスとして公開するには**BizTalk WCF 公開ウィザード**や**BizTalk Web サービス公開ウィザード**します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-122">To publish orchestrations and schemas as Web services with the SOAP adapter, you use the **BizTalk WCF Publish Wizard** and/or **BizTalk Web Services Publishing Wizard**.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="83bdc-123">前提条件</span><span class="sxs-lookup"><span data-stu-id="83bdc-123">Prerequisites</span></span>  
 <span data-ttu-id="83bdc-124">このサンプルの手順を実行するには、使用する環境が次の前提条件を満たしている必要があります。</span><span class="sxs-lookup"><span data-stu-id="83bdc-124">To perform the steps in this sample ensure that your environment installs the following prerequisites:</span></span>  
  
- <span data-ttu-id="83bdc-125">アセンブリをビルドし、展開プロセスと、サンプルを実行するコンピューターを実行するコンピューターの両方では、Microsoft Windows Server 2008 SP2 または Windows Server 2008 R2、Microsoft .NET Framework 4、および Microsoft BizTalk Server が必要です。</span><span class="sxs-lookup"><span data-stu-id="83bdc-125">Both the computer that builds the assemblies and runs the deployment process, and the computer that runs the sample, require Microsoft Windows Server 2008 SP2 and/or Windows Server 2008 R2, Microsoft .NET Framework 4, and Microsoft BizTalk Server.</span></span>  
  
- <span data-ttu-id="83bdc-126">アセンブリのビルドと展開プロセスの実行に使用するコンピューターには、Microsoft Visual Studio が必要です。</span><span class="sxs-lookup"><span data-stu-id="83bdc-126">The computer used to build the assemblies and run the deployment process requires Microsoft Visual Studio.</span></span>  
  
- <span data-ttu-id="83bdc-127">サンプルを実行するコンピューターには、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] アダプターと [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] 管理ツールが必要です。</span><span class="sxs-lookup"><span data-stu-id="83bdc-127">The computer that runs the sample requires the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Adapters and the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Administration Tools.</span></span> <span data-ttu-id="83bdc-128">これらは、Microsoft BizTalk Server のセットアップ時にインストールするオプションです。</span><span class="sxs-lookup"><span data-stu-id="83bdc-128">These are options to install during setup of Microsoft BizTalk Server.</span></span>  
  
- <span data-ttu-id="83bdc-129">管理タスクの実行に使用するコンピューターで、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理コンソール内の [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] アプリケーション設定を構成するには、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理者グループのメンバーであるユーザー アカウントとして実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="83bdc-129">On the computers that you use to perform administrative tasks, you must run as a user account that is a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group to configure the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application settings within the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="83bdc-130">また、アプリケーションの展開、ホスト インスタンスの管理、およびその他の必要なタスクを実行するには、このユーザー アカウントはローカル管理者グループのメンバーである必要もあります。</span><span class="sxs-lookup"><span data-stu-id="83bdc-130">This user account must also be a member of the local Administrators group for application deployment, managing host instances, and other tasks that may be required.</span></span>  
  
- <span data-ttu-id="83bdc-131">必要とする任意のコンピューターで[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]機能により、1 回限りのセットアップの手順を完了、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サンプル[ http://go.microsoft.com/fwlink/?LinkId=135510](http://go.microsoft.com/fwlink/?LinkId=135510)します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-131">On any computer that requires [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] capability, complete the one-time setup procedure for the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] samples at [http://go.microsoft.com/fwlink/?LinkId=135510](http://go.microsoft.com/fwlink/?LinkId=135510).</span></span>  
  
- <span data-ttu-id="83bdc-132">サンプルを実行してバインドまたは .msi ファイルを [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] にインポートするコンピューターで、ホストが信頼されているホストではないことを確認します。信頼されているホストの場合、インポートは失敗します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-132">On the computer that runs the sample and imports a binding or an .msi file into [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], ensure the host is not a trusted host or the import will fail.</span></span>  
  
- <span data-ttu-id="83bdc-133">チュートリアルのコードをダウンロードし、コンピューターに展開する必要があります。</span><span class="sxs-lookup"><span data-stu-id="83bdc-133">You must download the walkthrough code and extract it to your computer.</span></span> <span data-ttu-id="83bdc-134">このチュートリアルでは全体の一部[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]アダプター チュートリアル パッケージ。</span><span class="sxs-lookup"><span data-stu-id="83bdc-134">This walkthrough is a part of the entire [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Adapter Walkthrough package.</span></span> <span data-ttu-id="83bdc-135">ファイルをダウンロードする**WCFAdapterWalkthroughs.exe**から、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]デベロッパー センター [ http://go.microsoft.com/fwlink/?LinkId=194140](http://go.microsoft.com/fwlink/?LinkId=194140)します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-135">You can download the file **WCFAdapterWalkthroughs.exe** from the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Developer Center at [http://go.microsoft.com/fwlink/?LinkId=194140](http://go.microsoft.com/fwlink/?LinkId=194140).</span></span>  
  
### <a name="to-deploy-the-sample-biztalk-solution-biztalkapp"></a><span data-ttu-id="83bdc-136">サンプル BizTalk ソリューションの BizTalkApp を展開するには</span><span class="sxs-lookup"><span data-stu-id="83bdc-136">To deploy the sample BizTalk solution, BizTalkApp</span></span>  
  
1. <span data-ttu-id="83bdc-137">自己解凍形式実行**WCFBasicHttpReceiveAdapter.exe**ファイルを開き、ファイルを**C:\WCFBasicHttpReceiveAdapter**フォルダー。</span><span class="sxs-lookup"><span data-stu-id="83bdc-137">Run the self-extracting **WCFBasicHttpReceiveAdapter.exe** file and extract the files into the **C:\WCFBasicHttpReceiveAdapter** folder.</span></span>  
  
2. <span data-ttu-id="83bdc-138">Microsoft Visual studio で開く、 **C:\WCFBasicHttpReceiveAdapter\WCFBasicHttpReceiveAdapter.sln**ファイル。</span><span class="sxs-lookup"><span data-stu-id="83bdc-138">In Microsoft Visual Studio, open the **C:\WCFBasicHttpReceiveAdapter\WCFBasicHttpReceiveAdapter.sln** file.</span></span>  
  
3. <span data-ttu-id="83bdc-139">**Microsoft.Samples.BizTalk.WCFBasicHttpReceiveAdapter.BizTalkApp**アセンブリに含まれる、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]オーケストレーション、マップ、および 2 つのスキーマ。</span><span class="sxs-lookup"><span data-stu-id="83bdc-139">The **Microsoft.Samples.BizTalk.WCFBasicHttpReceiveAdapter.BizTalkApp** assembly contains a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] orchestration, a map, and two schemas.</span></span> <span data-ttu-id="83bdc-140">GAC にインストールする必要があり、する必要があります、厳密な名前キー ファイルこれを行うにします。</span><span class="sxs-lookup"><span data-stu-id="83bdc-140">It must be installed in the GAC and will need a strong name key file for this to occur.</span></span> <span data-ttu-id="83bdc-141">右クリックし、 **BizTalkApp**プロジェクトをクリックして**プロパティ**します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-141">Right-click the **BizTalkApp** project and then click **Properties**.</span></span> <span data-ttu-id="83bdc-142">**プロパティ**] ページで [**署名**を選択し、**アセンブリに署名**します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-142">On the **Properties** page, click **Signing**, and select **Sign the assembly**.</span></span> <span data-ttu-id="83bdc-143">下向きの矢印をクリックして、**厳密な名前キー ファイルを選択して**ドロップダウン リストでは、 をクリックして**\<新規\>**、入力と`keyfile.snk`で、**キー ファイル名**テキスト ボックス。</span><span class="sxs-lookup"><span data-stu-id="83bdc-143">Click the down arrow in the **Choose a strong name key file** drop-down list, click **\<New\>**, and enter `keyfile.snk` in the **key file name** textbox.</span></span> <span data-ttu-id="83bdc-144">オフに**キーファイルをパスワードで保護する**、順にクリックします**OK**。</span><span class="sxs-lookup"><span data-stu-id="83bdc-144">Uncheck **Protect my key file with a password**, and then click **OK**.</span></span>  
  
4. <span data-ttu-id="83bdc-145">ソリューション エクスプ ローラーで右クリックし、 **[biztalkapp]** プロジェクトをクリックして**リビルド**。</span><span class="sxs-lookup"><span data-stu-id="83bdc-145">In Solution Explorer, right-click the **BizTalkApp** project, and then click **Rebuild**.</span></span>  
  
   > [!NOTE]
   >  <span data-ttu-id="83bdc-146">しないで、**ソリューションのビルド**、または構築、 **WCFClient**この時点でアプリケーション。</span><span class="sxs-lookup"><span data-stu-id="83bdc-146">Do not attempt a **Build Solution**, or to build the **WCFClient** application at this point.</span></span> <span data-ttu-id="83bdc-147">**WCFClient**この時点で、サンプルでビルドする準備ができています。</span><span class="sxs-lookup"><span data-stu-id="83bdc-147">The **WCFClient** is not ready to be built at this point in the sample.</span></span>  
  
5. <span data-ttu-id="83bdc-148">展開**BizTalkApp**を開き**DeliveryProcess.odx**を確認します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-148">Expand **BizTalkApp**, and then open **DeliveryProcess.odx** to review.</span></span> <span data-ttu-id="83bdc-149">オーケストレーションは、WCF-BasicHttp アダプターを使用して HTTP で [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] 要求を受け取ります。</span><span class="sxs-lookup"><span data-stu-id="83bdc-149">The orchestration takes in a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] request over HTTP using the WCF-BasicHttp adapter.</span></span> <span data-ttu-id="83bdc-150">その後、変換マップを使用して要求を変更し、再び同じ [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] アダプターを使用して応答を送信します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-150">It modifies the request by using a transformation map and sends out the response again using the same [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] adapter.</span></span>  
  
   1.  <span data-ttu-id="83bdc-151">このオーケストレーションは、WCF-BasicHttp アダプターによって公開される論理要求 - 応答ポートを備えています。</span><span class="sxs-lookup"><span data-stu-id="83bdc-151">This orchestration has a logical request-response port that will be published with the WCF-BasicHttp adapter.</span></span> <span data-ttu-id="83bdc-152">このポートは、後の手順で物理ポートにバインドされます。</span><span class="sxs-lookup"><span data-stu-id="83bdc-152">It will be bound to a physical port in a later step.</span></span>  
  
   2.  <span data-ttu-id="83bdc-153">最上位ノードを右クリックして**DeliveryProcess.odx**クリックして、デザイナーのウィンドウで**プロパティ**します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-153">Right-click the top node of **DeliveryProcess.odx** in the designer window, and then select **Properties**.</span></span> <span data-ttu-id="83bdc-154">確認、**型修飾子**ポートの種類のプロパティは**パブリック**します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-154">Make sure that the **Type Modifier** property of the port type is **Public**.</span></span>  
  
6. <span data-ttu-id="83bdc-155">ソリューション エクスプ ローラーで右クリック**BizTalkApp**、 をクリックし、**プロパティ**します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-155">In Solution Explorer, right-click **BizTalkApp**, and then click **Properties**.</span></span>  
  
   1.  <span data-ttu-id="83bdc-156">BizTalk 管理データベースがローカルでホストされていない場合は、変更、 **Server**プロパティ別のデータベース サーバーを使用する場合。</span><span class="sxs-lookup"><span data-stu-id="83bdc-156">If the BizTalk Management database is not hosted locally, modify the **Server** property if you use a different database server.</span></span> <span data-ttu-id="83bdc-157">をクリックして、**展開**タブをクリックし、変更、**サーバー**プロパティをデータベース サーバーをポイントします。</span><span class="sxs-lookup"><span data-stu-id="83bdc-157">Click the **Deployment** tab, and then modify the **Server** property to point to the database server.</span></span>  
  
   2.  <span data-ttu-id="83bdc-158">必ず、**アプリケーション名**プロパティに設定されて**WCFBasicHttpReceiveAdapter**。</span><span class="sxs-lookup"><span data-stu-id="83bdc-158">Make sure that the **Application Name** property is set to **WCFBasicHttpReceiveAdapter**.</span></span> <span data-ttu-id="83bdc-159">これは、BizTalk ソリューションを展開する BizTalk アプリケーションの名前です。</span><span class="sxs-lookup"><span data-stu-id="83bdc-159">This is name of the BizTalk application where the BizTalk solution will be deployed.</span></span>  
  
   3.  <span data-ttu-id="83bdc-160">ソリューション エクスプ ローラーで右クリックして**biztalkapp**、 をクリックし、**デプロイ**します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-160">In Solution Explorer, right-click **BizTalkApp**, and then click **Deploy**.</span></span> <span data-ttu-id="83bdc-161">ローカルに展開しない場合は、リモート接続を許可するように SQL Server を構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="83bdc-161">If not deploying locally you may need to configure SQL Server to allow remote connections.</span></span> <span data-ttu-id="83bdc-162">詳細については、次を参照してください。 [ http://go.microsoft.com/fwlink/?LinkId=194141](http://go.microsoft.com/fwlink/?LinkId=194141)します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-162">For more information, see [http://go.microsoft.com/fwlink/?LinkId=194141](http://go.microsoft.com/fwlink/?LinkId=194141).</span></span>  
  
### <a name="to-publish-the-sample-orchestration-by-using-the-biztalk-wcf-service-publishing-wizard"></a><span data-ttu-id="83bdc-163">BizTalk WCF サービス公開ウィザードを使用して、サンプル オーケストレーションを公開するには</span><span class="sxs-lookup"><span data-stu-id="83bdc-163">To publish the sample orchestration by using the BizTalk WCF Service Publishing Wizard</span></span>  
  
1. <span data-ttu-id="83bdc-164">この手順では、新しく展開されたオーケストレーション アセンブリを取得し、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスとして公開します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-164">In this step you will take the newly deployed orchestration assembly and publish it as a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="83bdc-165">これを行うには、次のようにクリックします**開始**、 をポイント**すべてのプログラム**、 をポイント**Microsoft** [!INCLUDE[btsBizTalkServer2006r3ui](../includes/btsbiztalkserver2006r3ui-md.md)]、 をクリックし、 **BizTalk WCF サービス公開ウィザード**。</span><span class="sxs-lookup"><span data-stu-id="83bdc-165">To do this, click **Start**, point to **All Programs**, point to **Microsoft** [!INCLUDE[btsBizTalkServer2006r3ui](../includes/btsbiztalkserver2006r3ui-md.md)], and then click **BizTalk WCF Service Publishing Wizard**.</span></span>  
  
2. <span data-ttu-id="83bdc-166">**BizTalk WCF サービス公開ウィザードへようこそ**] ページで [**次**します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-166">On the **Welcome to the BizTalk WCF Service Publishing Wizard** page, click **Next**.</span></span>  
  
3. <span data-ttu-id="83bdc-167">**WCF サービスの種類** ページで、次の操作の種類を指定する実行[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]を発行するサービスと BizTalk の受信エンドポイント[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]メッセージ、およびクリック **[次へ]**:</span><span class="sxs-lookup"><span data-stu-id="83bdc-167">On the **WCF Service Type** page, perform the following actions to specify the type of [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service to publish, and the BizTalk endpoints for receiving [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] messages, and then click **Next**:</span></span>  
  
   1. <span data-ttu-id="83bdc-168">選択、**サービス エンドポイント**オプションは、公開すること、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]アセンブリ内のオーケストレーションからサービス。</span><span class="sxs-lookup"><span data-stu-id="83bdc-168">Select the **Service endpoint** option, which states you will publish a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service from an orchestration in an assembly.</span></span> <span data-ttu-id="83bdc-169">選択**Wcf-basichttp**から、**アダプター名 (トランスポートの種類)** ドロップダウン リスト。</span><span class="sxs-lookup"><span data-stu-id="83bdc-169">Select **WCF-BasicHttp** from the **Adapter name (Transport type)** drop-down list.</span></span>  
  
   2. <span data-ttu-id="83bdc-170">選択、**メタデータ エンドポイントを有効にする**チェック ボックスを[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]受信場所が IIS によってホストされている発行その[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービス メタデータ。</span><span class="sxs-lookup"><span data-stu-id="83bdc-170">Select the **Enable metadata endpoint** check box to make the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] receive location hosted by IIS publish its [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service metadata.</span></span> <span data-ttu-id="83bdc-171">このチェック ボックスの設定を選択すると、 **httpGetEnabled**の属性、 \< **serviceMetadata** \>要素`true`Web.Config でします。このメタデータは、HTTP/GET 要求によって要求された場合に取得されます。</span><span class="sxs-lookup"><span data-stu-id="83bdc-171">Selecting this check box sets the **httpGetEnabled** attribute of the \<**serviceMetadata**\> element to `true` in Web.Config. This metadata is retrieved when an HTTP/GET request asks for it.</span></span> <span data-ttu-id="83bdc-172">後で、SvcUtil.exe ツールを使用してプロキシ クラスを使用して呼び出すクライアント コードを生成するには、このデータを取得するが、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービス。</span><span class="sxs-lookup"><span data-stu-id="83bdc-172">Later you will use the SvcUtil.exe tool to obtain this data to generate a proxy class for the client code to use to call the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
   3. <span data-ttu-id="83bdc-173">選択、**次のアプリケーションを作成する BizTalk 受信場所**Wcf-basichttp アダプターの場合は、各生成 .svc ファイルに対応する場所と受信ポートを作成するオプション。</span><span class="sxs-lookup"><span data-stu-id="83bdc-173">Select the **Create BizTalk receive locations in the following application** option to create the receive ports and locations corresponding to each generated .svc file for the WCF-BasicHttp adapter.</span></span> <span data-ttu-id="83bdc-174">BizTalk アプリケーション名を選択**WCFBasicHttpReceiveAdapter**、受信ポートと受信場所が生成 をクリックし、**次**します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-174">Choose the BizTalk application name, **WCFBasicHttpReceiveAdapter**, where the receive ports and locations will be generated, and then click **Next**.</span></span>  
  
       <span data-ttu-id="83bdc-175">ウィザードが、関連付けられている受信場所を表すバインド ファイル Binding.XML を作成します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-175">The wizard creates a binding file, Binding.XML, to represent associated receive locations.</span></span> <span data-ttu-id="83bdc-176">このファイルは、Web ディレクトリに格納され、後で [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理コンソールを介して手動でインポートすることができます。</span><span class="sxs-lookup"><span data-stu-id="83bdc-176">This file is located in the Web directory and later can be manually imported through the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span>  
  
      > [!NOTE]
      >  <span data-ttu-id="83bdc-177">ここで、展開した BizTalk アプリケーションを選択しない場合は、既定のアプリケーションが選択されます。</span><span class="sxs-lookup"><span data-stu-id="83bdc-177">If you do not select a deployed BizTalk application here the default application will be selected.</span></span>  
  
4. <span data-ttu-id="83bdc-178">**WCF サービスの作成**] ページで、[ **BizTalk オーケストレーションの WCF サービスとして発行**、順にクリックします**次**します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-178">On the **Create WCF Service** page, select **Publish BizTalk orchestrations as WCF service**, and then click **Next**.</span></span> <span data-ttu-id="83bdc-179">これにより、次の手順で指定するオーケストレーションが [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスとして公開されます。</span><span class="sxs-lookup"><span data-stu-id="83bdc-179">This will publish the orchestration specified in the next step as a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
5. <span data-ttu-id="83bdc-180">公開するオーケストレーションを含むアセンブリを選択します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-180">Select the assembly containing the orchestration to be published.</span></span> <span data-ttu-id="83bdc-181">**BizTalk アセンブリ** ページの 、 **BizTalk アセンブリ ファイル (\*.dll)** テキスト ボックスで、をクリックして**参照**を参照する、 **C:\WCFBasicHttpReceiveAdapter\BizTalkApp\bin\Development**フォルダーをダブルクリックして、 **Microsoft.Samples.BizTalk.WCFBasicHttpReceiveAdapter.BizTalkApp**サンプルを含むアセンブリオーケストレーションを公開する をクリックして**オープン**、順にクリックします**次**します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-181">On the **BizTalk Assembly** page, in the **BizTalk assembly file (\*.dll)** text box, click **Browse** to browse to the **C:\WCFBasicHttpReceiveAdapter\BizTalkApp\bin\Development** folder, double-click the **Microsoft.Samples.BizTalk.WCFBasicHttpReceiveAdapter.BizTalkApp** assembly containing the sample orchestration to publish, click **Open**, and then click **Next**.</span></span>  
  
6. <span data-ttu-id="83bdc-182">**オーケストレーションおよびポート**ことを確認します ページで、**ポート: DeliveryRequestPort**ノード ページで、選択されている場合をクリックして**次**します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-182">On the **Orchestrations and Ports** page, make sure that the **Port: DeliveryRequestPort** node is selected on the page, and then click **Next**.</span></span> <span data-ttu-id="83bdc-183">このノードを選択すると、対応する上位レベルのノードがも選択されていることを意味します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-183">Selecting this node means that its corresponding higher-level nodes are selected as well.</span></span> <span data-ttu-id="83bdc-184">このポートは、WCF-BasicHttp アダプターをホストする要求 - 応答の受信場所で公開されます。</span><span class="sxs-lookup"><span data-stu-id="83bdc-184">The port will be published with a request-response receive location hosting the WCF-BasicHttp adapter.</span></span>  
  
7. <span data-ttu-id="83bdc-185">**WCF サービスのプロパティ**ページで、**ターゲット**の名前空間、 **WCF サービス**テキスト ボックスに、この公開された URI を入力[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービスを使用してクリックして**次**します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-185">On the **WCF Service Properties** page, in the **Target** namespace of the **WCF service** text box, type a URI that you want this published [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service to use, and then click **Next**.</span></span> <span data-ttu-id="83bdc-186">このチュートリアルでは、既定の URI のままに"**<http://tempuri.org/>"** のターゲット名前空間、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービスのテキスト ボックス。</span><span class="sxs-lookup"><span data-stu-id="83bdc-186">For this walkthrough, leave the default URI, "**<http://tempuri.org/>"** in the Target namespace of the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service text box.</span></span>  
  
8. <span data-ttu-id="83bdc-187">**WCF サービスの場所** ページで、次の場所を指定する操作を実行、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービスを作成、およびクリックして**次**:</span><span class="sxs-lookup"><span data-stu-id="83bdc-187">On the **WCF Service Location** page, perform the following actions to specify the location of the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] services to create, and then click **Next**:</span></span>  
  
   1. <span data-ttu-id="83bdc-188">**場所**テキスト ボックスに「Web ディレクトリ名、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービスが実行される、または [] をクリックして**参照**Web ディレクトリを選択します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-188">In the **Location** text box, type the Web directory name where the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service runs, or click **Browse** and select the Web directory.</span></span> <span data-ttu-id="83bdc-189">このチュートリアルでは、アセンブリ名は、仮想ディレクトリと同じであるため、既定の場所のまま (**<http://localhost/Microsoft.Samples.BizTalk.WCFBasicHttpReceiveAdapter.BizTalkApp>**) で、**場所**テキスト ボックス。</span><span class="sxs-lookup"><span data-stu-id="83bdc-189">For this walkthrough, since the assembly name is the same as the virtual directory, leave the default location (**<http://localhost/Microsoft.Samples.BizTalk.WCFBasicHttpReceiveAdapter.BizTalkApp>**) in the **Location** text box.</span></span>  
  
   2. <span data-ttu-id="83bdc-190">選択、 **WCF サービスへの匿名アクセスを許可する**オプションをクリックして**次**。</span><span class="sxs-lookup"><span data-stu-id="83bdc-190">Select the **Allow anonymous access to WCF service** option, and then click **Next**.</span></span> <span data-ttu-id="83bdc-191">このオプションを選択すると、作成された仮想ディレクトリへの匿名アクセスが許可されます。</span><span class="sxs-lookup"><span data-stu-id="83bdc-191">This option allows anonymous access to the created virtual directory.</span></span> <span data-ttu-id="83bdc-192">このチュートリアルでは、認証なしでトランスポート セキュリティ モードを使用するため、このオプションは、このウィザードで作成する Web アプリケーションの匿名認証を許可するのには選択する必要があります。</span><span class="sxs-lookup"><span data-stu-id="83bdc-192">Because this walkthrough uses the Transport security mode with no authentication, this option needs to be selected to allow anonymous authentication for the Web application that this wizard will create.</span></span>  
  
9. <span data-ttu-id="83bdc-193">**WCF サービスの概要**] ページで [**作成**を作成する、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービス。</span><span class="sxs-lookup"><span data-stu-id="83bdc-193">On the **WCF Service Summary** page, click **Create** to create the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="83bdc-194">この手順では、指定した Web ディレクトリを通じて使用できる、指定したオーケストレーション用の受信ポートを作成します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-194">This step creates a receive port for the specified orchestration available through the specified Web directory.</span></span>  
  
10. <span data-ttu-id="83bdc-195">**BizTalk WCF サービス公開ウィザードの完了**] ページで [**完了**します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-195">On the **Completing BizTalk WCF Service Publishing Wizard** page, click **Finish**.</span></span>  
  
### <a name="to-enable-the-sample-biztalk-application"></a><span data-ttu-id="83bdc-196">サンプル BizTalk アプリケーションを有効にするには</span><span class="sxs-lookup"><span data-stu-id="83bdc-196">To enable the sample BizTalk application</span></span>  
  
1. <span data-ttu-id="83bdc-197">をクリックして**開始**、 をポイント**すべてのプログラム**、 をポイント**Microsoft** [!INCLUDE[btsBizTalkServer2006r3ui](../includes/btsbiztalkserver2006r3ui-md.md)]、順にクリックします**BizTalk Server 管理**します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-197">Click **Start**, point to **All Programs**, point to **Microsoft** [!INCLUDE[btsBizTalkServer2006r3ui](../includes/btsbiztalkserver2006r3ui-md.md)], and then click **BizTalk Server Administration**.</span></span>  
  
2. <span data-ttu-id="83bdc-198">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、[**アプリケーション**、展開**WCFBasicHttpReceiveAdapter**、展開**オーケストレーション**、を右クリックして **[Deliveryprocess]** オーケストレーション、] をクリックして**プロパティ**、し、バインド情報を次のように構成します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-198">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **Applications**, expand **WCFBasicHttpReceiveAdapter**, expand **Orchestrations**, right-click the **DeliveryProcess** orchestration, click **Properties**, and then configure the binding information as follows:</span></span>  
  
   1. <span data-ttu-id="83bdc-199">**オーケストレーションのプロパティ**ダイアログ ボックスで、をクリックして**バインド**、し、設定**ホスト**に**BizTalkServerApplication**。</span><span class="sxs-lookup"><span data-stu-id="83bdc-199">In the **Orchestration Properties** dialog box, click **Bindings**, and then set **Host** to **BizTalkServerApplication**.</span></span>  
  
   2. <span data-ttu-id="83bdc-200">**オーケストレーションのプロパティ**] ダイアログ ボックスで、[受信ポートを**DeliveryRequestPort**にバインドします。</span><span class="sxs-lookup"><span data-stu-id="83bdc-200">In the **Orchestration Properties** dialog box, select a receive port for the **DeliveryRequestPort** to bind.</span></span> <span data-ttu-id="83bdc-201">このチュートリアルでは、選択、受信はポートを BizTalk[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービス公開ウィザードが前の手順で作成され、順にクリックします**OK**します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-201">For this walkthrough, select the receive port that the BizTalk [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Service Publishing Wizard created in the previous procedure, and then click **OK**.</span></span>  
  
3. <span data-ttu-id="83bdc-202">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、右クリックして**WCFBasicHttpReceiveAdapter**、 をクリックして**開始**、順にクリックします**開始**で、**開始アプリケーション** ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="83bdc-202">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, right-click **WCFBasicHttpReceiveAdapter**, click **Start**, and then click **Start** in the **Start Application** dialog box.</span></span>  
  
### <a name="to-configure-the-web-application-hosting-the-published-wcf-service"></a><span data-ttu-id="83bdc-203">公開された WCF サービスをホストする Web アプリケーションを構成するには</span><span class="sxs-lookup"><span data-stu-id="83bdc-203">To configure the Web application hosting the published WCF service</span></span>  
  
1. <span data-ttu-id="83bdc-204">クリックして**開始**、 をポイント**管理者ツール**、順にクリックします**インターネット インフォメーション サービス (IIS) 7.0 マネージャー**します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-204">Click **Start**, point to **Administrator Tools**, and then click **Internet Information Services (IIS) 7.0 Manager**.</span></span>  
  
2. <span data-ttu-id="83bdc-205">IIS マネージャーで、展開**サイト**、展開**既定の Web サイト**、Web アプリケーションを展開し**Microsoft.Samples.BizTalk.WCFBasicHttpReceiveAdapter.BizTalkApp**を**BizTalk WCF サービス公開ウィザード**を作成します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-205">In IIS Manager, expand **Sites**, expand **Default Web Site**, and then expand the Web application **Microsoft.Samples.BizTalk.WCFBasicHttpReceiveAdapter.BizTalkApp** that the **BizTalk WCF Service Publishing Wizard** created.</span></span>  
  
3. <span data-ttu-id="83bdc-206">このサービスが実行されるアプリケーション プールを作成します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-206">Create an application pool within which this service will run.</span></span> <span data-ttu-id="83bdc-207">右クリック**アプリケーション プール**、 をクリックして**アプリケーション プールの追加**、アプリケーション プールの名前を入力し、 **OK**します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-207">Right-click **Application Pools**, click **Add Application Pool**, enter a name for the application pool, and then click **OK**.</span></span>  
  
4. <span data-ttu-id="83bdc-208">展開**アプリケーション プール**作成したアプリケーション プールを右クリックし、**詳細設定**します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-208">Expand **Application Pools**, right-click the application pool you just created, and then select **Advanced Settings**.</span></span> <span data-ttu-id="83bdc-209">**プロセス モデル**セクションで、これにアクセスするアカウントを入力、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]データベースで、 **Identity**フィールド。</span><span class="sxs-lookup"><span data-stu-id="83bdc-209">Under **Process Model** section, enter the account which has access to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases under the **Identity** field.</span></span>  
  
5. <span data-ttu-id="83bdc-210">IIS マネージャーで、**コンテンツ ビュー**します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-210">In IIS Manager, click **Content View**.</span></span>  <span data-ttu-id="83bdc-211">右側のウィンドウで右クリックし、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービスの .svc ファイルを**BizTalk WCF サービス公開ウィザード**作成され、クリックして**参照**します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-211">In the right pane, right-click the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service .svc file that the **BizTalk WCF Service Publishing Wizard** created, and then click **Browse**.</span></span> <span data-ttu-id="83bdc-212">これにより、Internet Explorer が開き、実行対象の [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスが正しく作成されたことを示すページが表示されます。</span><span class="sxs-lookup"><span data-stu-id="83bdc-212">This opens Internet Explorer to display a page that indicates you have successfully created a running [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="83bdc-213">このページには、完全な WSDL アドレスも含まれます。サービス メタデータ ツール (svcutil.exe) で、このアドレスをコピーして使用することで、サービスのクライアント アプリケーションを作成するために使用できるプロキシ コードおよび構成ファイルを取得できます。</span><span class="sxs-lookup"><span data-stu-id="83bdc-213">The page also includes a full WSDL address that you can copy and use with the Service Metadata Tool (svcutil.exe) to retrieve proxy code and a configuration file that can be used to create a client application for the service.</span></span>  
  
6. <span data-ttu-id="83bdc-214">前の手順で Internet Explorer が表示されるページで、完全な WSDL アドレスを使用して SvcUtil.exe コマンドラインをクリップボードにコピーします。</span><span class="sxs-lookup"><span data-stu-id="83bdc-214">Copy to the Clipboard the SvcUtil.exe command line with the full WSDL address on the page that Internet Explorer displayed in the previous step.</span></span>  
  
### <a name="to-create-the-proxy-class-for-the-sample-wcf-client-application-wcfclient"></a><span data-ttu-id="83bdc-215">サンプル クライアント アプリケーション WCFClient のプロキシ クラスを作成するには</span><span class="sxs-lookup"><span data-stu-id="83bdc-215">To create the proxy class for the sample WCF client application, WCFClient</span></span>  
  
1. <span data-ttu-id="83bdc-216">[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] クライアントのサンプル アプリケーションが [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスを呼び出すことができるようにプロキシ クラスを作成します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-216">Create a proxy class so the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client sample application can call into the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="83bdc-217">プロキシは必ずしも必要ではありませんが、手動によるコードの記述は非常に複雑なので、プロキシを作成することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="83bdc-217">While a proxy is not required, to manually write the code is very complex so creating a proxy is recommended.</span></span> <span data-ttu-id="83bdc-218">開く、 **Visual Studio コマンド プロンプト**に移動し、 **C:\WCFBasicHttpReceiveAdapter\WCFClient**プロキシ クラスおよびアプリケーション構成ファイルを配置するフォルダー。</span><span class="sxs-lookup"><span data-stu-id="83bdc-218">Open a **Visual Studio Command Prompt** and go to the **C:\WCFBasicHttpReceiveAdapter\WCFClient** folder where you will place the proxy class and application configuration file.</span></span>  
  
2. <span data-ttu-id="83bdc-219">貼り付け、 **svcutil.exe**前の手順でコピーして、ヒットした完全な WSDL アドレスを使用してコマンドライン **」と入力**プロキシ クラスおよびアプリケーション構成ファイルを作成します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-219">Paste the **svcutil.exe** command line with the full WSDL address that you copied in the previous procedure, and then hit **Enter** to create the proxy class and application configuration file.</span></span> <span data-ttu-id="83bdc-220">このコマンドラインを作成します**BizTalkServiceInstance.cs**プロキシ クラスと**output.config**アプリケーション構成ファイル。</span><span class="sxs-lookup"><span data-stu-id="83bdc-220">This command line creates **BizTalkServiceInstance.cs** for the proxy class and **output.config** for the application configuration file.</span></span>  
  
3. <span data-ttu-id="83bdc-221">ソリューション エクスプ ローラーで、Visual Studio で右クリック**WCFClient**、 をポイント**追加**、 をクリックし、**既存項目の**します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-221">In Visual Studio, in Solution Explorer, right-click **WCFClient**, point to **Add**, and then click **Existing Item**.</span></span>  
  
4. <span data-ttu-id="83bdc-222">**既存項目の追加** ダイアログ ボックスで、参照、 **WCFClient**フォルダーで、**すべてのファイル (\*.\*)** で、**ファイルの種類**ドロップダウン リストで、 **BizTalkServiceInstance.cs**と**output.config**ファイル、および順にクリックします**追加**します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-222">In the **Add Existing Item** dialog box, browse to the **WCFClient** folder, select **All Files (\*.\*)** in the **Files of type** drop-down list, select the **BizTalkServiceInstance.cs** and **output.config** files, and then click **Add**.</span></span>  
  
5. <span data-ttu-id="83bdc-223">**WCFClient**プロジェクトで、展開**参照**、いることを確認し、 **WCFClient**プロジェクトには、 **System.ServiceModel**としてその参照の 1 つ。</span><span class="sxs-lookup"><span data-stu-id="83bdc-223">For the **WCFClient** project, expand **References**, and then make sure that the **WCFClient** project has **System.ServiceModel** as one of its references.</span></span>  
  
6. <span data-ttu-id="83bdc-224">展開、 **WCFClient**プロジェクトを右クリックして**output.config**、 をクリックして**の名前を変更**、し、入力**App.config**の新しい名前。</span><span class="sxs-lookup"><span data-stu-id="83bdc-224">Expand the **WCFClient** project, right-click **output.config**, click **Rename**, and then type **App.config** for the new name.</span></span>  
  
7. <span data-ttu-id="83bdc-225">ダブルクリック**Program.cs** 、公開されたを呼び出す方法を確認する[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービスによって生成されたプロキシ クラスを使用して**Svcutil.exe**します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-225">Double-click **Program.cs** to review how to call the published [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service using the proxy class generated by **Svcutil.exe**.</span></span> <span data-ttu-id="83bdc-226">呼び出しをインスタンス化および呼び出す、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]のコーディングを使用してわかりやすくするためにローカルな呼び出しをサービスが表示されて、 **Microsoft_Samples_BizTalk_WCFBasicHttpReceiveAdapter_BizTalkApp_DeliveryProcess_DeliveryRequestPortClient**クラス。</span><span class="sxs-lookup"><span data-stu-id="83bdc-226">Calls to instantiate and invoke a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service appear to be local calls in the simplicity of coding using the **Microsoft_Samples_BizTalk_WCFBasicHttpReceiveAdapter_BizTalkApp_DeliveryProcess_DeliveryRequestPortClient** class.</span></span> <span data-ttu-id="83bdc-227">リモート [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスの呼び出しを行うために必要な追加コードはありません。</span><span class="sxs-lookup"><span data-stu-id="83bdc-227">There is no additional code needed to make a call to a remote [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
8. <span data-ttu-id="83bdc-228">Visual Studio での**デバッグ** メニューのをクリックして**デバッグなしで開始**して WCFClient を実行します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-228">In Visual Studio, on the **Debug** menu, click **Start Without Debugging** to run WCFClient.</span></span> <span data-ttu-id="83bdc-229">クライアント コードは、DeliveryItem メッセージを作成し、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスの呼び出しを行って、Address、ProductID、および Amount を渡します。</span><span class="sxs-lookup"><span data-stu-id="83bdc-229">The client code creates a DeliveryItem message and makes a call to the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service, passing in the Address, ProductID, and Amount.</span></span>  
  
   ```  
   DeliveryItem deliveryRequestItem = new DeliveryItem();  
   deliveryRequestItem.Address = "One Microsoft Way";  
   deliveryRequestItem.ProductID = "00A120c";  
   deliveryRequestItem.Amount = "300";  
   DeliveryRequestPortClient deliveryProcessClient = new DeliveryRequestPortClient("BasicHttpBinding_ITwoWayAsync");  
   DeliveryItem1 deliveryConfirmation = deliveryProcessClient.Submit(deliveryRequestItem);  
   ```  
  
    <span data-ttu-id="83bdc-230">クライアントが、公開された [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスから応答メッセージを正常に受信すると、配信確認番号 (ProductID と Address を連結したもの) が応答メッセージに表示されます。</span><span class="sxs-lookup"><span data-stu-id="83bdc-230">If the client successfully receives the response message back from the published [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service, it displays the delivery confirmation number (a concatenation of the ProductID and Address) in the response message.</span></span>  
  
    <span data-ttu-id="83bdc-231">**DeliveryRequestItem で呼び出される送信操作**</span><span class="sxs-lookup"><span data-stu-id="83bdc-231">**Submit operation called with deliveryRequestItem**</span></span>  
  
    <span data-ttu-id="83bdc-232">**返信される配信確認番号: 00A120c300One Microsoft Way**</span><span class="sxs-lookup"><span data-stu-id="83bdc-232">**Delivery confirmation number sent back: 00A120c300One Microsoft Way**</span></span>  
  
    <span data-ttu-id="83bdc-233">**続行する任意のキーを押してください.**</span><span class="sxs-lookup"><span data-stu-id="83bdc-233">**Press any key to continue . . .**</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="83bdc-234">参照</span><span class="sxs-lookup"><span data-stu-id="83bdc-234">See Also</span></span>  
 [<span data-ttu-id="83bdc-235">BizTalk WCF サービス公開ウィザードを使用してオーケストレーションを WCF サービスとして公開する方法</span><span class="sxs-lookup"><span data-stu-id="83bdc-235">How to Use the BizTalk WCF Service Publishing Wizard to Publish Orchestrations as WCF Services</span></span>](../core/publish-orchestrations-as-wcf-services--biztalk-wcf-service-publishing-wizard.md)