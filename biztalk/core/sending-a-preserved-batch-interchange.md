---
title: 保存されたバッチ インターチェンジの送信 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: d9bc2207-e34d-4d06-a224-bd7f8e498c27
caps.latest.revision: 14
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 327ef8db3042199cc541d53402ea25c8d36b4a06
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65399082"
---
# <a name="sending-a-preserved-batch-interchange"></a><span data-ttu-id="5a987-102">保存されたバッチ インターチェンジの送信</span><span class="sxs-lookup"><span data-stu-id="5a987-102">Sending a Preserved Batch Interchange</span></span>
<span data-ttu-id="5a987-103">EDI 送信パイプラインが保存された送信バッチ インターチェンジを処理するとき、バッチ インターチェンジ全体を処理します。</span><span class="sxs-lookup"><span data-stu-id="5a987-103">When the EDI send pipeline processes an outbound preserved batch interchange, it processes the batched interchange as a whole.</span></span> <span data-ttu-id="5a987-104">EDI インターチェンジを作成する場合、通常、アグリーメントに基づいてエンベロープを適用するのではなく、既存のエンベロープ (制御) セグメントを再利用します。</span><span class="sxs-lookup"><span data-stu-id="5a987-104">It normally reuses the existing envelope (control) segments in creating the EDI interchange, rather than applying an envelope based upon the agreement.</span></span> <span data-ttu-id="5a987-105">これが発生したときに、**受信バッチ処理オプション**プロパティに設定されて**インターチェンジの保存 - エラーでインターチェンジを中断**または **- インターチェンジの保存時にトランザクション セットを中断エラー**します。</span><span class="sxs-lookup"><span data-stu-id="5a987-105">This occurs when the **Inbound batch processing option** property is set to **Preserve Interchange - suspend Interchange on Error** or **Preserve Interchange - suspend Transaction Sets on Error**.</span></span>  
  
## <a name="schema-validation"></a><span data-ttu-id="5a987-106">スキーマの検証</span><span class="sxs-lookup"><span data-stu-id="5a987-106">Schema Validation</span></span>  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="5a987-107">は、保存されたバッチのエンベロープを、バッチ スキーマとサービス スキーマを使用して検証します。</span><span class="sxs-lookup"><span data-stu-id="5a987-107">validates the envelope of a preserved batch using the batch schemas and the service schemas.</span></span> <span data-ttu-id="5a987-108">保存されたメッセージのルート ノードの検証にはバッチ スキーマが使用され、インターチェンジ、グループ、およびトランザクション セットのヘッダーとトレーラーの検証にはサービス スキーマが使用されます。</span><span class="sxs-lookup"><span data-stu-id="5a987-108">The batch schema is used to validate the root node of the preserved message; the service schemas are used to validate the interchange, group, and transaction set headers and trailers.</span></span> <span data-ttu-id="5a987-109">バッチ スキーマの詳細については、次を参照してください。 [EDI のバッチ スキーマ](../core/edi-batch-schemas.md)します。</span><span class="sxs-lookup"><span data-stu-id="5a987-109">For more information about the batch schemas, see [EDI Batch Schemas](../core/edi-batch-schemas.md).</span></span> <span data-ttu-id="5a987-110">サービス スキーマの詳細については、次を参照してください。 [EDI サービスと管理スキーマ](../core/edi-service-and-control-schemas.md)します。</span><span class="sxs-lookup"><span data-stu-id="5a987-110">For more information on the service schemas, see [EDI Service and Control Schemas](../core/edi-service-and-control-schemas.md).</span></span>  
  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="5a987-111">は、バッチ インターチェンジ内のドキュメントを、プロジェクト内のドキュメント スキーマを使用して検証します。</span><span class="sxs-lookup"><span data-stu-id="5a987-111">validates the documents in a batched interchange using the document schemas in your project.</span></span>  
  
## <a name="send-side-processing"></a><span data-ttu-id="5a987-112">送信側の処理</span><span class="sxs-lookup"><span data-stu-id="5a987-112">Send-Side Processing</span></span>  
 <span data-ttu-id="5a987-113">EDI アセンブラーが保存されたインターチェンジを処理するとき、通常、受信したバッチ インターチェンジに含まれているインターチェンジ、グループ、およびトランザクション セットの各ヘッダーと同じものを使用します。</span><span class="sxs-lookup"><span data-stu-id="5a987-113">When the EDI Assembler processes a preserved interchange, it normally uses the same interchange, group, and transaction-set headers that existed in the batched interchange when it was received.</span></span>  
  
- <span data-ttu-id="5a987-114">X12 インターチェンジの場合、プロパティの設定で一方向アグリーメント タブでさまざまなページで、**アグリーメントのプロパティ** ダイアログ ボックス (決定方法[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]送信の ISA、GS、および ST ヘッダーが作成されますインターチェンジの場合) は、通常は適用されません。</span><span class="sxs-lookup"><span data-stu-id="5a987-114">For X12 interchanges, the property settings on different pages in the one-way agreement tab in the **Agreement Properties** dialog box (which determine how [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will create the ISA, GS, and ST headers of an outgoing interchange) do not normally apply.</span></span>  
  
- <span data-ttu-id="5a987-115">EDIFACT インターチェンジの場合、通常、アグリーメントのプロパティの UNA の設定が使用されます。</span><span class="sxs-lookup"><span data-stu-id="5a987-115">For EDIFACT interchanges, the UNA settings in the agreement properties are normally used.</span></span> <span data-ttu-id="5a987-116">UNA セグメントは、EDIFACT エンコード メッセージの省略可能なセグメントですが、保存されたバッチ インターチェンジのシリアル化には必要です。</span><span class="sxs-lookup"><span data-stu-id="5a987-116">The UNA segment is optional in an EDIFACT-encoded message, but it is required for serializing a preserved batch interchange.</span></span> <span data-ttu-id="5a987-117">XML インスタンスの UNA セグメントに値が設定されていない場合、送信パイプライン コンポーネントの既定のプロパティ値が使用されます。</span><span class="sxs-lookup"><span data-stu-id="5a987-117">If there is no value for the UNA segment in the XML instance, the default property values for the send pipeline component will be used.</span></span> <span data-ttu-id="5a987-118">送信パイプライン コンポーネントのプロパティに値が設定されていないと、保存されたバッチの中間 XML メッセージは中断されます。</span><span class="sxs-lookup"><span data-stu-id="5a987-118">If the send pipeline component properties are not valued, then the preserved batch intermediate XML message will be suspended.</span></span>  
  
- <span data-ttu-id="5a987-119">(カスタム コンポーネントに) 保存されているインターチェンジで `EDI.PopulateInterchangeValues` コンテキスト プロパティを True に昇格させると、送信ポートの EDI アセンブラーによって、アグリーメントのプロパティに設定されている値に対してインターチェンジ、グループ、およびトランザクション セットのヘッダーが設定されます。</span><span class="sxs-lookup"><span data-stu-id="5a987-119">If you promote the `EDI.PopulateInterchangeValues` context property to "True" on the interchange being preserved (in a custom component), the EdiAssembler in the send port will populate all of the interchange, group, and transaction-set headers to the values set in the agreement properties.</span></span>  
  
- <span data-ttu-id="5a987-120">送信パイプラインによって処理される前にインターチェンジの `EDIOverride.OverrideEdiHeader` コンテキスト プロパティを "True" に昇格させると、適切な `EDIOverride` コンテキスト プロパティの値を設定することで、送信ドキュメントのエンベロープ値をオーバーライドできます。</span><span class="sxs-lookup"><span data-stu-id="5a987-120">If you promote the `EDIOverride.OverrideEdiHeader` context property to “True” on the interchange before it is processed by the send pipeline, you can override the envelope values for the outbound document by setting the appropriate `EDIOverride` context property values.</span></span> <span data-ttu-id="5a987-121">詳細については、次を参照してください。 [EDI ヘッダーをオーバーライドする](../core/overriding-edi-headers.md)します。</span><span class="sxs-lookup"><span data-stu-id="5a987-121">For more information, see [Overriding EDI Headers](../core/overriding-edi-headers.md).</span></span>  
  
  <span data-ttu-id="5a987-122">保存されたインターチェンジにエラーがない場合は、アセンブラーは、インターチェンジ内のグループにあるトランザクション セットのシーケンスおよびインターチェンジ内のグループのシーケンスを保持します。</span><span class="sxs-lookup"><span data-stu-id="5a987-122">For a preserved interchange that has no errors, the Assembler will preserve the sequence of transaction sets in a group of the interchange and the sequence of groups in the interchange.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="5a987-123">保存されたバッチは、XML 送信パイプラインを使用して送信できます。</span><span class="sxs-lookup"><span data-stu-id="5a987-123">You can send a preserved batch with an XML send pipeline.</span></span> <span data-ttu-id="5a987-124">ただし、この処理を行うには、バッチ スキーマの名前空間を変更することが必要です。</span><span class="sxs-lookup"><span data-stu-id="5a987-124">However, to do so requires that you change the namespace for the batch schema.</span></span> <span data-ttu-id="5a987-125">詳細については、次を参照してください。 [XML 送信パイプラインによる保存のバッチを送信する](../core/sending-a-preserved-batch-with-an-xml-send-pipeline.md)します。</span><span class="sxs-lookup"><span data-stu-id="5a987-125">For more information, see [Sending a Preserved Batch with an XML Send Pipeline](../core/sending-a-preserved-batch-with-an-xml-send-pipeline.md).</span></span>  
  
## <a name="error-processing"></a><span data-ttu-id="5a987-126">エラー処理</span><span class="sxs-lookup"><span data-stu-id="5a987-126">Error Processing</span></span>  
 <span data-ttu-id="5a987-127">EDI 送信パイプラインは、バッチ EDI インターチェンジを保存されたバッチとして認識します。これは、XML に予約タグが存在するためです。</span><span class="sxs-lookup"><span data-stu-id="5a987-127">The EDI send pipeline recognizes a batched EDI interchange as a preserved batch because of a reserved tag in the XML.</span></span> <span data-ttu-id="5a987-128">か、このタグ\<X12InterchangeXml\>または\<EdifactInterchangeXml\>EDI で、XML に適用される受信パイプライン。</span><span class="sxs-lookup"><span data-stu-id="5a987-128">This tag, either \<X12InterchangeXml\> or \<EdifactInterchangeXml\>, is applied to the XML by the EDI receive pipeline.</span></span>  
  
 <span data-ttu-id="5a987-129">以下の特殊なケースが、エラー発生時のトランザクション セットの中断に当てはまります。</span><span class="sxs-lookup"><span data-stu-id="5a987-129">The following special cases apply to suspending transaction sets on error:</span></span>  
  
-   <span data-ttu-id="5a987-130">グループ内のすべてのトランザクション セットが無効である場合、生成された EDI にグループ制御セグメントを含めますが、このグループにトランザクション セットは含まれません (このトランザクション セットはドロップされるため)。</span><span class="sxs-lookup"><span data-stu-id="5a987-130">If all transaction sets in a group are invalid, then the EDI send pipeline will include group control segments in the generated EDI, but the group will not contain any transaction sets (because they will have been dropped).</span></span> <span data-ttu-id="5a987-131">グループ フッターの集計はゼロ (0) に更新されます。</span><span class="sxs-lookup"><span data-stu-id="5a987-131">The group footer totals are updated to zero.</span></span> <span data-ttu-id="5a987-132">インターチェンジ制御セグメントは変更されません。</span><span class="sxs-lookup"><span data-stu-id="5a987-132">The interchange control segments remain unchanged.</span></span>  
  
-   <span data-ttu-id="5a987-133">インターチェンジ内のすべてのトランザクション セットが無効である場合でも、生成される EDI インターチェンジにはインターチェンジ制御セグメントが含まれます。ただし、このインターチェンジにはトランザクション セットは含まれません (このトランザクション セットはドロップされるため)。</span><span class="sxs-lookup"><span data-stu-id="5a987-133">If all transaction sets in an interchange are invalid, then the interchange control segments will still be included in the generated EDI interchange, but the interchange will not contain any transaction sets (because they will have been dropped).</span></span> <span data-ttu-id="5a987-134">このため、空のインターチェンジが構成されます。</span><span class="sxs-lookup"><span data-stu-id="5a987-134">This would constitute an empty interchange.</span></span>  
  
-   <span data-ttu-id="5a987-135">グループ制御セグメントまたはインターチェンジ制御セグメントが無効である場合、EDI エンコード インターチェンジは生成されません。</span><span class="sxs-lookup"><span data-stu-id="5a987-135">If the group control segments or the interchange control segments are invalid, an EDI-encoded interchange will not be generated.</span></span> <span data-ttu-id="5a987-136">インターチェンジが拒否されたことを示すログがイベント ビューアーに作成されます。</span><span class="sxs-lookup"><span data-stu-id="5a987-136">A log will be created in the event viewer indicating that the interchange was rejected.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5a987-137">参照</span><span class="sxs-lookup"><span data-stu-id="5a987-137">See Also</span></span>  
 [<span data-ttu-id="5a987-138">送信 EDI メッセージのバッチ処理</span><span class="sxs-lookup"><span data-stu-id="5a987-138">Batching Outgoing EDI Messages</span></span>](../core/batching-outgoing-edi-messages.md)