---
title: 保存されたバッチ インターチェンジの送信 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: d9bc2207-e34d-4d06-a224-bd7f8e498c27
caps.latest.revision: 14
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 327ef8db3042199cc541d53402ea25c8d36b4a06
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65399082"
---
# <a name="sending-a-preserved-batch-interchange"></a>保存されたバッチ インターチェンジの送信
EDI 送信パイプラインが保存された送信バッチ インターチェンジを処理するとき、バッチ インターチェンジ全体を処理します。 EDI インターチェンジを作成する場合、通常、アグリーメントに基づいてエンベロープを適用するのではなく、既存のエンベロープ (制御) セグメントを再利用します。 これが発生したときに、**受信バッチ処理オプション**プロパティに設定されて**インターチェンジの保存 - エラーでインターチェンジを中断**または **- インターチェンジの保存時にトランザクション セットを中断エラー**します。  
  
## <a name="schema-validation"></a>スキーマの検証  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] は、保存されたバッチのエンベロープを、バッチ スキーマとサービス スキーマを使用して検証します。 保存されたメッセージのルート ノードの検証にはバッチ スキーマが使用され、インターチェンジ、グループ、およびトランザクション セットのヘッダーとトレーラーの検証にはサービス スキーマが使用されます。 バッチ スキーマの詳細については、次を参照してください。 [EDI のバッチ スキーマ](../core/edi-batch-schemas.md)します。 サービス スキーマの詳細については、次を参照してください。 [EDI サービスと管理スキーマ](../core/edi-service-and-control-schemas.md)します。  
  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] は、バッチ インターチェンジ内のドキュメントを、プロジェクト内のドキュメント スキーマを使用して検証します。  
  
## <a name="send-side-processing"></a>送信側の処理  
 EDI アセンブラーが保存されたインターチェンジを処理するとき、通常、受信したバッチ インターチェンジに含まれているインターチェンジ、グループ、およびトランザクション セットの各ヘッダーと同じものを使用します。  
  
- X12 インターチェンジの場合、プロパティの設定で一方向アグリーメント タブでさまざまなページで、**アグリーメントのプロパティ** ダイアログ ボックス (決定方法[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]送信の ISA、GS、および ST ヘッダーが作成されますインターチェンジの場合) は、通常は適用されません。  
  
- EDIFACT インターチェンジの場合、通常、アグリーメントのプロパティの UNA の設定が使用されます。 UNA セグメントは、EDIFACT エンコード メッセージの省略可能なセグメントですが、保存されたバッチ インターチェンジのシリアル化には必要です。 XML インスタンスの UNA セグメントに値が設定されていない場合、送信パイプライン コンポーネントの既定のプロパティ値が使用されます。 送信パイプライン コンポーネントのプロパティに値が設定されていないと、保存されたバッチの中間 XML メッセージは中断されます。  
  
- (カスタム コンポーネントに) 保存されているインターチェンジで `EDI.PopulateInterchangeValues` コンテキスト プロパティを True に昇格させると、送信ポートの EDI アセンブラーによって、アグリーメントのプロパティに設定されている値に対してインターチェンジ、グループ、およびトランザクション セットのヘッダーが設定されます。  
  
- 送信パイプラインによって処理される前にインターチェンジの `EDIOverride.OverrideEdiHeader` コンテキスト プロパティを "True" に昇格させると、適切な `EDIOverride` コンテキスト プロパティの値を設定することで、送信ドキュメントのエンベロープ値をオーバーライドできます。 詳細については、次を参照してください。 [EDI ヘッダーをオーバーライドする](../core/overriding-edi-headers.md)します。  
  
  保存されたインターチェンジにエラーがない場合は、アセンブラーは、インターチェンジ内のグループにあるトランザクション セットのシーケンスおよびインターチェンジ内のグループのシーケンスを保持します。  
  
> [!NOTE]
>  保存されたバッチは、XML 送信パイプラインを使用して送信できます。 ただし、この処理を行うには、バッチ スキーマの名前空間を変更することが必要です。 詳細については、次を参照してください。 [XML 送信パイプラインによる保存のバッチを送信する](../core/sending-a-preserved-batch-with-an-xml-send-pipeline.md)します。  
  
## <a name="error-processing"></a>エラー処理  
 EDI 送信パイプラインは、バッチ EDI インターチェンジを保存されたバッチとして認識します。これは、XML に予約タグが存在するためです。 か、このタグ\<X12InterchangeXml\>または\<EdifactInterchangeXml\>EDI で、XML に適用される受信パイプライン。  
  
 以下の特殊なケースが、エラー発生時のトランザクション セットの中断に当てはまります。  
  
-   グループ内のすべてのトランザクション セットが無効である場合、生成された EDI にグループ制御セグメントを含めますが、このグループにトランザクション セットは含まれません (このトランザクション セットはドロップされるため)。 グループ フッターの集計はゼロ (0) に更新されます。 インターチェンジ制御セグメントは変更されません。  
  
-   インターチェンジ内のすべてのトランザクション セットが無効である場合でも、生成される EDI インターチェンジにはインターチェンジ制御セグメントが含まれます。ただし、このインターチェンジにはトランザクション セットは含まれません (このトランザクション セットはドロップされるため)。 このため、空のインターチェンジが構成されます。  
  
-   グループ制御セグメントまたはインターチェンジ制御セグメントが無効である場合、EDI エンコード インターチェンジは生成されません。 インターチェンジが拒否されたことを示すログがイベント ビューアーに作成されます。  
  
## <a name="see-also"></a>参照  
 [送信 EDI メッセージのバッチ処理](../core/batching-outgoing-edi-messages.md)