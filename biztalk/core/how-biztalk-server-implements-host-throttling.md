---
title: BizTalk Server がホスト制限を実装する方法 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- host throttling, rate based throttling
- host throttling, outbound
- host throttling, algorithm
- host throttling, components
- host throttling, inbound
- host throttling, resource based throttling
- host throttling, user controlled throttling
- host throttling, strategies
ms.assetid: 46d3c3de-66b9-4c8a-8369-e68563fc9c40
caps.latest.revision: 27
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: f29fc1021b28a0a0eacfa9d7140483e1a287f238
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/27/2018
ms.locfileid: "36998307"
---
# <a name="how-biztalk-server-implements-host-throttling"></a><span data-ttu-id="a7d10-102">BizTalk Server のホスト制限の実装方法</span><span class="sxs-lookup"><span data-stu-id="a7d10-102">How BizTalk Server Implements Host Throttling</span></span>
<span data-ttu-id="a7d10-103">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] のホスト制限メカニズムは、制限の条件を継続的に監視し、制限の条件の重大度を評価し、評価された重大度に応じてホスト制限を段階的に適用します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-103">The [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] host throttling mechanism continually monitors for a throttling condition, calculates the severity of the throttling condition, and applies host throttling progressively depending on the calculated severity.</span></span> <span data-ttu-id="a7d10-104">制限メカニズムは自律的と既定の構成オプションは、大半の適切な[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]シナリオを処理します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-104">The throttling mechanism is self tuning and the default configuration options are suitable for the majority of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] processing scenarios.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="a7d10-105">ホスト制限は、特定のシナリオの制限を調整するために使用できるいくつかの構成可能なオプションを公開します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-105">host throttling exposes several configurable options that can be used to tune throttling for specific scenarios.</span></span> <span data-ttu-id="a7d10-106">これらの構成オプションを変更する方法の詳細については、[ホスト設定の変更方法](../core/how-to-modify-host-settings.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a7d10-106">For information about changing these configuration options, see [How to Modify Host Settings](../core/how-to-modify-host-settings.md).</span></span>  

## <a name="components-of-the-host-throttling-algorithm"></a><span data-ttu-id="a7d10-107">ホスト制限アルゴリズムのコンポーネント</span><span class="sxs-lookup"><span data-stu-id="a7d10-107">Components of the host throttling algorithm</span></span>  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="a7d10-108">は、ホスト制限を適用する際に次のアルゴリズムを使用します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-108">uses the following algorithm when applying host throttling:</span></span>  

1.  <span data-ttu-id="a7d10-109">特定のしきい値を超えているかどうかを確認するため、次のパラメーターを継続的に監視します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-109">Continuously monitor the following parameters to see if they exceed certain thresholds.</span></span> <span data-ttu-id="a7d10-110">パラメーターの値がパラメーターのしきい値を超えると、制限の条件を満たしたことになります。</span><span class="sxs-lookup"><span data-stu-id="a7d10-110">If the values for the parameter exceed the threshold for the parameter then a throttling condition exists.</span></span>  

    -   <span data-ttu-id="a7d10-111">メモリの使用量 (システム全体のメモリとホスト プロセス メモリの両方)。</span><span class="sxs-lookup"><span data-stu-id="a7d10-111">Amount of memory in use (both systemwide and host process memory).</span></span>  

    -   <span data-ttu-id="a7d10-112">配信または処理されるインプロセス メッセージの数 (送信制限のしきい値)。</span><span class="sxs-lookup"><span data-stu-id="a7d10-112">Number of in-process messages being delivered or processed (threshold for outbound throttling).</span></span>  

    -   <span data-ttu-id="a7d10-113">使用しているスレッドの数。</span><span class="sxs-lookup"><span data-stu-id="a7d10-113">Number of threads in use.</span></span>  

    -   <span data-ttu-id="a7d10-114">すべてのホストのキュー テーブル内の項目数とスプール テーブルおよび追跡テーブル内の項目数によって測定されるデータベース サイズ。</span><span class="sxs-lookup"><span data-stu-id="a7d10-114">Database size, measured by the number of items in the queue tables for all hosts and the number of items in the spool and tracking tables.</span></span>  

    -   <span data-ttu-id="a7d10-115">データベースの同時接続数。</span><span class="sxs-lookup"><span data-stu-id="a7d10-115">Number of concurrent database connections.</span></span>  

    -   <span data-ttu-id="a7d10-116">メッセージの公開 (受信) と配信または処理 (送信) の割合。</span><span class="sxs-lookup"><span data-stu-id="a7d10-116">Rate of message publishing (inbound) and delivery or processing (outbound).</span></span>  

2.  <span data-ttu-id="a7d10-117">制限の条件の重大度を判定します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-117">Determine the severity of the throttling condition.</span></span> <span data-ttu-id="a7d10-118">重大度が高い順に、制限の条件を挙げます。</span><span class="sxs-lookup"><span data-stu-id="a7d10-118">Throttling conditions are ranked in severity as follows (from most severe to least severe).</span></span>  

    -   <span data-ttu-id="a7d10-119">使用しているホスト プロセス メモリがしきい値を超えている。</span><span class="sxs-lookup"><span data-stu-id="a7d10-119">Host process memory in use exceeds threshold.</span></span>  

    -   <span data-ttu-id="a7d10-120">インプロセス メッセージの数がしきい値を超えている。</span><span class="sxs-lookup"><span data-stu-id="a7d10-120">Number of in-process messages exceeds threshold.</span></span>  

    -   <span data-ttu-id="a7d10-121">使用しているスレッド数がしきい値を超えている。</span><span class="sxs-lookup"><span data-stu-id="a7d10-121">Count of threads in use exceeds threshold.</span></span>  

    -   <span data-ttu-id="a7d10-122">データベース サイズがしきい値を超えている。</span><span class="sxs-lookup"><span data-stu-id="a7d10-122">Database size exceeds threshold.</span></span>  

    -   <span data-ttu-id="a7d10-123">他のすべての制限の条件。</span><span class="sxs-lookup"><span data-stu-id="a7d10-123">All other throttling conditions.</span></span>  

3.  <span data-ttu-id="a7d10-124">制限の条件の重大度に基づいて、段階的に制限を適用します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-124">Progressively apply throttling based upon the severity of the throttling condition(s).</span></span> <span data-ttu-id="a7d10-125">重大度のレベルが上がるにつれて、強化された制限が適用されます。</span><span class="sxs-lookup"><span data-stu-id="a7d10-125">Throttling is applied more aggressively as the severity level increases.</span></span> <span data-ttu-id="a7d10-126">段階的な制限は、次のように実行されます。</span><span class="sxs-lookup"><span data-stu-id="a7d10-126">Progressive throttling is achieved as follows:</span></span>  

    -   <span data-ttu-id="a7d10-127">1 つ以上の制限の条件が検出され、重大度が割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="a7d10-127">One or more throttling conditions are detected and assigned a severity.</span></span>  

    -   <span data-ttu-id="a7d10-128">最も高い重大度の条件に基づいて、制限を実装する命令が発行されます。</span><span class="sxs-lookup"><span data-stu-id="a7d10-128">An instruction to implement throttling is issued based on the condition with the highest severity.</span></span> <span data-ttu-id="a7d10-129">制限の条件によっては、条件が残るとさまざまなスレッド プールのサイズが小さくなり、実行中のオーケストレーションが退避されてメモリが解放される場合があります。</span><span class="sxs-lookup"><span data-stu-id="a7d10-129">Depending on the throttling condition, if the condition persists, the size of various thread pools may be reduced and memory may be freed by dehydrating running orchestrations.</span></span>  

    -   <span data-ttu-id="a7d10-130">メッセージの受信および送信に応じて、メッセージの公開または処理に遅延期間が適用されます。</span><span class="sxs-lookup"><span data-stu-id="a7d10-130">A delay is applied in the publishing or processing of the message, depending on whether the message is inbound or outbound.</span></span> <span data-ttu-id="a7d10-131">遅延期間は、制限の条件の重大度に比例します。このため、重大度の高い制限の条件は、重大度の低い制限の条件よりも制限の期間が長くなります。</span><span class="sxs-lookup"><span data-stu-id="a7d10-131">The delay period is proportional to the severity of the throttling condition, so higher severity throttling conditions will initiate a longer throttling period than lower severity throttling conditions.</span></span> <span data-ttu-id="a7d10-132">この遅延期間は、条件が変わるたびに制限のメカニズムによって特定の範囲内で期間が調整されます。</span><span class="sxs-lookup"><span data-stu-id="a7d10-132">This delay period is adjusted up and down within certain ranges by the throttling mechanism as conditions change.</span></span> <span data-ttu-id="a7d10-133">現在の遅延期間がを通じて公開される、**メッセージ配信の遅延 (ミリ秒)** と**メッセージ公開の遅延 (ミリ秒)** に関連付けられているパフォーマンス カウンター、 **BizTalk:Message Agent**パフォーマンス オブジェクト カテゴリ。</span><span class="sxs-lookup"><span data-stu-id="a7d10-133">The current delay period is exposed through the **Message delivery delay (ms)** and the **Message publishing delay (ms)** performance counters associated with the **BizTalk:Message Agent** performance object category.</span></span> <span data-ttu-id="a7d10-134">これらのパフォーマンス オブジェクト カウンターは、トピックに記載されている[ホスト制限パフォーマンス カウンター](../core/host-throttling-performance-counters.md)します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-134">These performance object counters are documented in the topic [Host Throttling Performance Counters](../core/host-throttling-performance-counters.md).</span></span>  

    -   <span data-ttu-id="a7d10-135">制限メカニズムは、制限の条件が存在するかどうかの確認を続けます。</span><span class="sxs-lookup"><span data-stu-id="a7d10-135">The throttling mechanism continues to check if a throttling condition is present.</span></span> <span data-ttu-id="a7d10-136">制限の条件が緩和されると、制限されたメッセージのブロックが解除され、制限されていないモードでのスレッド プールと他のリソースの操作が許可されます。</span><span class="sxs-lookup"><span data-stu-id="a7d10-136">If the throttling conditions are mitigated then the throttled messages are unblocked and the thread pool and other resources are allowed to operate in an unrestricted mode.</span></span> <span data-ttu-id="a7d10-137">制限の条件なしでシステムの実行を続けると、遅延期間が大幅に短縮されます。</span><span class="sxs-lookup"><span data-stu-id="a7d10-137">If the system continues to operate without any throttling conditions, the delay period is greatly reduced.</span></span> <span data-ttu-id="a7d10-138">制限の条件が残ると、条件の重大度に比例して遅延期間が長くなり、後続のメッセージの遅延期間が長くなります。</span><span class="sxs-lookup"><span data-stu-id="a7d10-138">If the throttling condition persists, the delay amount is incremented proportional to the severity of the condition and subsequent messages are subject to the higher delay.</span></span>  

    -   <span data-ttu-id="a7d10-139">遅延期間が経過すると、制限は適用されなくなります。</span><span class="sxs-lookup"><span data-stu-id="a7d10-139">Throttling is no longer implemented when the delay period has elapsed.</span></span>  

## <a name="type-of-throttling-conditions"></a><span data-ttu-id="a7d10-140">制限の条件の種類</span><span class="sxs-lookup"><span data-stu-id="a7d10-140">Type of throttling conditions</span></span>  
 <span data-ttu-id="a7d10-141">制限の条件には、3 つの主要な種類 (比率ベース、リソース ベース、オーケストレーション) があります。</span><span class="sxs-lookup"><span data-stu-id="a7d10-141">There are three primary types of throttling conditions: rate based, resource based, and orchestration.</span></span>  

1. <span data-ttu-id="a7d10-142">**比率ベースで調整**は 2 つのカテゴリに分かれています (公開) の受信し、送信 (配信)。</span><span class="sxs-lookup"><span data-stu-id="a7d10-142">**Rate based throttling** is divided into two categories; inbound (published) and outbound (delivered):</span></span>  

   - <span data-ttu-id="a7d10-143">場合、受信 (公開) メッセージの BizTalk Server がメッセージの公開を制限、**メッセージ公開の受信レート**ホストのインスタンスを超えています、**メッセージ公開の送信速度\\**\* 指定した**オーバー ドライブ率 (%)** 値。</span><span class="sxs-lookup"><span data-stu-id="a7d10-143">For inbound (published) messages, BizTalk Server throttles publishing of messages if The **Message publishing incoming rate** for the host instance exceeds the **Message publishing outgoing rate\\**\* the specified **Rate overdrive factor (percent)** value.</span></span> <span data-ttu-id="a7d10-144">**オーバー ドライブ率 (%)** パラメーターを構成するには、**メッセージ公開の制限の設定** ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="a7d10-144">The **Rate overdrive factor (percent)** parameter is configurable on the **Message Publishing Throttling Settings** dialog box.</span></span> <span data-ttu-id="a7d10-145">受信メッセージに対する比率ベースの制限は、メッセージのバッチをメッセージ ボックス データベースに公開する前に遅延を発生させることで、主に実現されます。</span><span class="sxs-lookup"><span data-stu-id="a7d10-145">Rate based throttling for inbound messages is accomplished primarily by inducing a delay before publishing the batch of messages into the MessageBox database.</span></span> <span data-ttu-id="a7d10-146">受信メッセージに対する比率ベースの制限を実現する操作は他にありません。</span><span class="sxs-lookup"><span data-stu-id="a7d10-146">No other action is taken to accomplish rate based throttling for inbound messages.</span></span>  

   - <span data-ttu-id="a7d10-147">場合、送信 (配信) メッセージを BizTalk Server がメッセージの配信を制限、**メッセージ配信の受信レート**ホストのインスタンスを超えています、**メッセージ配信の送信比率** \*、指定した**オーバー ドライブ率 (%)** 値。</span><span class="sxs-lookup"><span data-stu-id="a7d10-147">For outbound (delivered) messages, BizTalk Server throttles delivery of messages if The **Message delivery incoming rate** for the host instance exceeds the **Message delivery outgoing rate** \* the specified **Rate overdrive factor (percent)** value.</span></span> <span data-ttu-id="a7d10-148">**オーバー ドライブ率 (%)** パラメーターを構成するには、**メッセージ処理の制限の設定** ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="a7d10-148">The **Rate overdrive factor (percent)** parameter is configurable on the **Message Processing Throttling Settings** dialog box.</span></span> <span data-ttu-id="a7d10-149">送信メッセージに対する比率ベースの制限は、インメモリ キューのメッセージを取り出してエンド ポイント マネージャー (EPM) またはオーケストレーション エンジンの処理にメッセージを配信する前に遅延を発生させることで、主に実現されます。</span><span class="sxs-lookup"><span data-stu-id="a7d10-149">Rate based throttling for outbound messages is accomplished primarily by inducing a delay before removing the messages from the in-memory queue and delivering the messages to the End Point Manager (EPM) or orchestration engine for processing.</span></span> <span data-ttu-id="a7d10-150">送信メッセージに対する比率ベースの制限を実現する操作は他にありません。</span><span class="sxs-lookup"><span data-stu-id="a7d10-150">No other action is taken to accomplish rate based throttling for outbound messages.</span></span>  

      <span data-ttu-id="a7d10-151">オーバー ドライブ率と他の比率ベースの制限値の詳細については、[率ベースのスロットル設定の変更方法](../core/how-to-modify-rate-based-throttling-settings.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a7d10-151">For more information about the rate overdrive factor and other rate-based throttling values, see [How to Modify Rate Based Throttling Settings](../core/how-to-modify-rate-based-throttling-settings.md).</span></span>  

2. <span data-ttu-id="a7d10-152">**リソース ベースの制限**スレッド、メモリ、およびデータベースのサイズなどのシステム リソースを監視し、任意のサービス クラスに適用できます。</span><span class="sxs-lookup"><span data-stu-id="a7d10-152">**Resource based throttling** monitors system resources such as threads, memory, and database size and can be applied to any service class.</span></span> <span data-ttu-id="a7d10-153">リソース ベースの制限値の詳細については、[リソース ベースのスロットル設定の変更方法](../core/how-to-modify-resource-based-throttling-settings.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a7d10-153">For more information about resource-based throttling values, see [How to Modify Resource Based Throttling Settings](../core/how-to-modify-resource-based-throttling-settings.md).</span></span>  

3. <span data-ttu-id="a7d10-154">**オーケストレーション制限**退避と使用するサブスクリプションを一時停止/再開を防ぐことができます。</span><span class="sxs-lookup"><span data-stu-id="a7d10-154">**Orchestration throttling** can prevent dehydration and when to pause/resume subscriptions.</span></span> <span data-ttu-id="a7d10-155">オーケストレーション制限値の詳細については、[オーケストレーション制限の設定の変更方法](../core/how-to-modify-orchestration-throttling-settings.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a7d10-155">For more information about orchestration throttling values, see [How to Modify Orchestration Throttling Settings](../core/how-to-modify-orchestration-throttling-settings.md).</span></span>  

## <a name="throttling-condition-triggers-actions-and-mitigation-strategies"></a><span data-ttu-id="a7d10-156">制限の条件の発生原因、アクション、および緩和方法</span><span class="sxs-lookup"><span data-stu-id="a7d10-156">Throttling condition triggers, actions, and mitigation strategies</span></span>  
 <span data-ttu-id="a7d10-157">このセクションでは、さまざまな制限の条件の発生原因、制限メカニズムによって発生するアクション、および制限の条件を緩和する技術について説明します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-157">This section describes the triggers for various throttling conditions, the resultant actions by the throttling mechanism, and techniques that may be employed to mitigate the throttling condition.</span></span>  

### <a name="inbound-throttling"></a><span data-ttu-id="a7d10-158">受信制限</span><span class="sxs-lookup"><span data-stu-id="a7d10-158">Inbound Throttling</span></span>  
 <span data-ttu-id="a7d10-159">BizTalk 制限メカニズムは、オーケストレーション エンジン (XLANG) および受信アダプターに受信制限を適用します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-159">The BizTalk throttling mechanism applies inbound throttling to the orchestration engine (XLANG) and to inbound adapters.</span></span>  

 <span data-ttu-id="a7d10-160">使用して、**メッセージ公開の制限の状態**と**メッセージ公開の制限の状態期間**に関連付けられたカウンター **BizTalk:MessageAgent**パフォーマンス現在の制限の状態と制限の期間を測定するオブジェクトのカテゴリ。</span><span class="sxs-lookup"><span data-stu-id="a7d10-160">Use the **Message publishing throttling state** and **Message publishing throttling state duration** counters associated with **BizTalk:MessageAgent** performance object category to measure the current throttling state and duration of throttling.</span></span> <span data-ttu-id="a7d10-161">使用できるホスト制限パフォーマンス カウンターの詳細については、[ホスト制限パフォーマンス カウンター](../core/host-throttling-performance-counters.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a7d10-161">For more information about the available host throttling performance counters, see [Host Throttling Performance Counters](../core/host-throttling-performance-counters.md).</span></span>  

 <span data-ttu-id="a7d10-162">受信制限によって、受信メッセージがソースに残る場合があります。</span><span class="sxs-lookup"><span data-stu-id="a7d10-162">Inbound throttling can cause inbound messages to backlog at the source.</span></span> <span data-ttu-id="a7d10-163">受信制限が受信アダプターに適用されると、受信アダプターは、制限の条件が緩和されるまで、メッセージの受信を停止することがあります。</span><span class="sxs-lookup"><span data-stu-id="a7d10-163">If inbound throttling is applied to a receive adapter then the receive adapter may stop receiving messages until the throttling condition is mitigated.</span></span>  


| <span data-ttu-id="a7d10-164">メッセージの公開</span><span class="sxs-lookup"><span data-stu-id="a7d10-164">Message Publishing</span></span><br /><br /> <span data-ttu-id="a7d10-165">制限の状態</span><span class="sxs-lookup"><span data-stu-id="a7d10-165">throttling state</span></span> |                                                                                                                                                                                                                                                  <span data-ttu-id="a7d10-166">制限の条件の発生原因</span><span class="sxs-lookup"><span data-stu-id="a7d10-166">Trigger for throttling condition</span></span>                                                                                                                                                                                                                                                  |                                                                                                                                                                                                                                                                                        <span data-ttu-id="a7d10-167">実行される制限のアクション</span><span class="sxs-lookup"><span data-stu-id="a7d10-167">Throttling actions taken</span></span>                                                                                                                                                                                                                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                 <span data-ttu-id="a7d10-168">軽減策</span><span class="sxs-lookup"><span data-stu-id="a7d10-168">Mitigation strategy</span></span>                                                                                                                                                                                                                                                                                                                                                                                                  |                                                 <span data-ttu-id="a7d10-169">パフォーマンス オブジェクト</span><span class="sxs-lookup"><span data-stu-id="a7d10-169">Performance object</span></span>                                                  |                                                                                                                                <span data-ttu-id="a7d10-170">パフォーマンス カウンター</span><span class="sxs-lookup"><span data-stu-id="a7d10-170">Performance counter</span></span>                                                                                                                                 |
|-------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                        <span data-ttu-id="a7d10-171">2</span><span class="sxs-lookup"><span data-stu-id="a7d10-171">2</span></span>                        |                                                                                                                                                   <span data-ttu-id="a7d10-172">**メッセージ公開の受信レート**ホストのインスタンスを超えています、**メッセージ公開の送信速度\\** \* 、指定した**オーバー ドライブ率 (%)** 値。</span><span class="sxs-lookup"><span data-stu-id="a7d10-172">**Message publishing incoming rate** for the host instance exceeds the **Message publishing outgoing rate\\**\* the specified **Rate overdrive factor (percent)** value.</span></span> <span data-ttu-id="a7d10-173">データベースの処理が公開率についていけません。</span><span class="sxs-lookup"><span data-stu-id="a7d10-173">The database cannot keep up with the publishing rate.</span></span>                                                                                                                                                   |                                                                                                                                                                                 <span data-ttu-id="a7d10-174">までの時間を動的に計算された期間、公開スレッドをブロック、 **Message Publishing Incoming Rate**と同等では、 **Message Publishing Outgoing Rate** \*指定**オーバー ドライブ率 (%)** 値。</span><span class="sxs-lookup"><span data-stu-id="a7d10-174">Block the publishing thread for a dynamically computed time period until the **Message Publishing Incoming Rate** is at par with the **Message Publishing Outgoing Rate** \* the specified **Rate overdrive factor (percent)** value.</span></span>                                                                                                                                                                                  |                                                                                                                                                  <span data-ttu-id="a7d10-175">パフォーマンス カウンターを使用して、メッセージ公開の受信 (および送信) 比率を指定します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-175">Use performance counters to determine the message publishing incoming and message publishing outgoing rate.</span></span> <span data-ttu-id="a7d10-176">使用している環境に適切なオーバードライブ率を検討してください。</span><span class="sxs-lookup"><span data-stu-id="a7d10-176">Consider an appropriate overdrive factor for your environment.</span></span><br /><br /> <span data-ttu-id="a7d10-177">値を指定することを確認、**サンプリング間隔**と**最小サンプル数**パラメーターは、シナリオに適してします。</span><span class="sxs-lookup"><span data-stu-id="a7d10-177">Verify that the values supplied for the **Sampling window duration** and **Minimum number of samples** parameters are appropriate for your scenario.</span></span><br /><br /> <span data-ttu-id="a7d10-178">これらのパラメーターの詳細については、[率ベースのスロットル設定の変更方法](../core/how-to-modify-rate-based-throttling-settings.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a7d10-178">For more information about these parameters, see [How to Modify Rate Based Throttling Settings](../core/how-to-modify-rate-based-throttling-settings.md).</span></span>                                                                                                                                                   |                                                <span data-ttu-id="a7d10-179">BizTalk:MessageAgent</span><span class="sxs-lookup"><span data-stu-id="a7d10-179">BizTalk:MessageAgent</span></span>                                                 |                                                                                                   <span data-ttu-id="a7d10-180">Message publishing incoming rate</span><span class="sxs-lookup"><span data-stu-id="a7d10-180">Message publishing incoming rate</span></span><br /><br /> <span data-ttu-id="a7d10-181">Message publishing outgoing rate</span><span class="sxs-lookup"><span data-stu-id="a7d10-181">Message publishing outgoing rate</span></span>                                                                                                    |
|                        <span data-ttu-id="a7d10-182">4</span><span class="sxs-lookup"><span data-stu-id="a7d10-182">4</span></span>                        |                                                                                                                                                                         <span data-ttu-id="a7d10-183">プロセス メモリが指定されたしきい値を超えている。</span><span class="sxs-lookup"><span data-stu-id="a7d10-183">Process memory exceeds the specified threshold.</span></span><br /><br /> <span data-ttu-id="a7d10-184">公開するバッチのメモリ要求が厳しい場合またはメッセージを処理するスレッドの数が多すぎる場合、この現象が発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="a7d10-184">This can occur if the batch to be published has steep memory requirements or too many threads are processing messages</span></span>                                                                                                                                                                          | <span data-ttu-id="a7d10-185">EPM で使用されるスレッド プールのサイズを小さくします。</span><span class="sxs-lookup"><span data-stu-id="a7d10-185">Reduce the size of the thread pool used by EPM.</span></span><br /><br /> <span data-ttu-id="a7d10-186">新しいメッセージのバッチの処理を中止 EPM スレッドをブロックします。</span><span class="sxs-lookup"><span data-stu-id="a7d10-186">Block the EPM threads to prevent processing of new messages batches.</span></span><br /><br /> <span data-ttu-id="a7d10-187">バッチのメッセージをデータベースに保存するメモリ要求が厳しい場合、メッセージがデータベースに保存される前に、公開スレッドも段階的に遅れます。</span><span class="sxs-lookup"><span data-stu-id="a7d10-187">If there is a steep memory requirement to persist the messages in a batch to the database, the publishing thread is also subject to a progressive delay before the messages are persisted to the database.</span></span><br /><br /> <span data-ttu-id="a7d10-188">プロセス メモリ不足によって公開バッチがブロックされるかどうかは、バッチのメッセージ数や、バッチで退避コマンドやメッセージ削除コマンドが使用されているかどうかなど、複数の要因によって決まります。</span><span class="sxs-lookup"><span data-stu-id="a7d10-188">Whether the publishing batch will be blocked or not due to process memory pressure depends on several factors including the number of messages in the batch or if there are dehydration or message deletion commands in the batch.</span></span> |                                                                                                                                                                                   <span data-ttu-id="a7d10-189">EPM スレッド プールを小さくして読み込みを少なくすること、および、アダプター バッチのサイズを小さくすることを検討します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-189">Consider reducing the amount of load by reducing the EPM thread pool, and/or the size of adapter batches.</span></span><br /><br /> <span data-ttu-id="a7d10-190">プロセスが過度にメモリを使用していない場合は、増やすことを検討してください、**プロセス仮想**ホストのしきい値。</span><span class="sxs-lookup"><span data-stu-id="a7d10-190">If the process is not consuming excessive memory, consider increasing the **Process virtual** threshold for the host.</span></span><br /><br /> <span data-ttu-id="a7d10-191">変更の詳細については、**プロセス仮想**値を参照してください[リソース ベースのスロットル設定の変更方法](../core/how-to-modify-resource-based-throttling-settings.md)します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-191">For more information about changing the **Process virtual** value, see [How to Modify Resource Based Throttling Settings](../core/how-to-modify-resource-based-throttling-settings.md).</span></span>                                                                                                                                                                                    |                                                <span data-ttu-id="a7d10-192">BizTalk:MessageAgent</span><span class="sxs-lookup"><span data-stu-id="a7d10-192">BizTalk:MessageAgent</span></span>                                                 |                                                                                     <span data-ttu-id="a7d10-193">High process memory</span><span class="sxs-lookup"><span data-stu-id="a7d10-193">High process memory</span></span><br /><br /> <span data-ttu-id="a7d10-194">Process memory usage (MB)</span><span class="sxs-lookup"><span data-stu-id="a7d10-194">Process memory usage (MB)</span></span><br /><br /> <span data-ttu-id="a7d10-195">Process memory usage threshold (MB)</span><span class="sxs-lookup"><span data-stu-id="a7d10-195">Process memory usage threshold (MB)</span></span>                                                                                      |
|                        <span data-ttu-id="a7d10-196">6</span><span class="sxs-lookup"><span data-stu-id="a7d10-196">6</span></span>                        | <span data-ttu-id="a7d10-197">ホスト メッセージ キュー サイズ、スプール テーブル サイズ、または追跡テーブル サイズが指定されたしきい値を超えている。</span><span class="sxs-lookup"><span data-stu-id="a7d10-197">Host message queue size, the spool table size or the tracking table size exceed the specified threshold.</span></span><br /><br /> <span data-ttu-id="a7d10-198">この条件が考えられる理由には次のものがあります。</span><span class="sxs-lookup"><span data-stu-id="a7d10-198">Possible reasons for this condition include:</span></span><br /><br /> <span data-ttu-id="a7d10-199">-SQL エージェント ジョブが実行されていない BizTalk Server データベースを維持するために、BizTalk Server で使用または実行速度が遅い。</span><span class="sxs-lookup"><span data-stu-id="a7d10-199">-   The SQL Agent jobs used by BizTalk Server to maintain the BizTalk Server databases not running or are running slowly.</span></span><br /><span data-ttu-id="a7d10-200">-ダウン ストリーム コンポーネントでは、適切なタイミングで、インメモリ キューからメッセージを処理していません。</span><span class="sxs-lookup"><span data-stu-id="a7d10-200">-   Down-stream components are not processing messages from the in-memory queue in a timely manner.</span></span><br /><span data-ttu-id="a7d10-201">-保留中のメッセージ数が多いです。</span><span class="sxs-lookup"><span data-stu-id="a7d10-201">-   Number of suspended messages is high.</span></span><br /><span data-ttu-id="a7d10-202">-システムの維持可能な最大の負荷に達しています。</span><span class="sxs-lookup"><span data-stu-id="a7d10-202">-   Maximum sustainable load for the system has been reached.</span></span> |                                                                                                                                                                      <span data-ttu-id="a7d10-203">EPM で使用されるスレッド プールのサイズを小さくします。</span><span class="sxs-lookup"><span data-stu-id="a7d10-203">Reduce the size of the thread pool used by EPM.</span></span><br /><br /> <span data-ttu-id="a7d10-204">新しいメッセージのバッチの処理を中止 EPM スレッドをブロックします。</span><span class="sxs-lookup"><span data-stu-id="a7d10-204">Block the EPM threads to prevent processing of new messages batches.</span></span><br /><br /> <span data-ttu-id="a7d10-205">メッセージがデータベースに保存される前に、公開スレッドも段階的に遅れます。</span><span class="sxs-lookup"><span data-stu-id="a7d10-205">The publishing thread is also subject to a progressive delay before the messages are persisted to the database.</span></span>                                                                                                                                                                      | <span data-ttu-id="a7d10-206">BizTalk Server データベースを保守する BizTalk Server で使用される SQL エージェント ジョブが実行されていて障害が発生していないことを確認します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-206">Ensure that the SQL Agent jobs used by BizTalk Server to maintain the BizTalk Server databases are running and are not failing.</span></span><br /><br /> <span data-ttu-id="a7d10-207">必要に応じて、中断したインスタンスを終了および再開します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-207">Terminate and resume suspended instances as needed.</span></span><br /><br /> <span data-ttu-id="a7d10-208">既定値を大きく、 **DB のメッセージ カウント**しきい値は、BizTalk データベースを格納する SQL server の容量の要件を考慮します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-208">Increase the default value for the **Message count in DB** threshold taking into consideration the space requirements of the SQL server that houses the BizTalk databases.</span></span><br /><br /> <span data-ttu-id="a7d10-209">場合は、データベースの追加のメッセージ バックログを処理するために適切にサイズは、増やすことを検討、**スプール乗数**と**追跡データ乗数**スプールに追加のバックログを許可する値テーブルを追跡します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-209">If your database is sized appropriately to handle additional message backlog, consider increasing the **Spool multiplier** and **Tracking data multiplier** values to allow additional backlog in the Spool and Tracking tables.</span></span><br /><br /> <span data-ttu-id="a7d10-210">値を変更する方法についての詳細については、[リソース ベースのスロットル設定の変更方法](../core/how-to-modify-resource-based-throttling-settings.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a7d10-210">For more information about changing the values, see [How to Modify Resource Based Throttling Settings](../core/how-to-modify-resource-based-throttling-settings.md).</span></span> | <span data-ttu-id="a7d10-211">BizTalk:MessageAgent</span><span class="sxs-lookup"><span data-stu-id="a7d10-211">BizTalk:MessageAgent</span></span><br /><br /> <span data-ttu-id="a7d10-212">BizTalk:Message Box:General Counters</span><span class="sxs-lookup"><span data-stu-id="a7d10-212">BizTalk:Message Box:General Counters</span></span><br /><br /> <span data-ttu-id="a7d10-213">BizTalk:Message Box:Host Counters</span><span class="sxs-lookup"><span data-stu-id="a7d10-213">BizTalk:Message Box:Host Counters</span></span> | <span data-ttu-id="a7d10-214">MessageAgent /Database size</span><span class="sxs-lookup"><span data-stu-id="a7d10-214">MessageAgent /Database size</span></span><br /><br /> <span data-ttu-id="a7d10-215">Message Box:General Counters /Spool size</span><span class="sxs-lookup"><span data-stu-id="a7d10-215">Message Box:General Counters /Spool size</span></span><br /><br /> <span data-ttu-id="a7d10-216">Message Box:General Counters /Tracking data size</span><span class="sxs-lookup"><span data-stu-id="a7d10-216">Message Box:General Counters /Tracking data size</span></span><br /><br /> <span data-ttu-id="a7d10-217">Message Box:Host Counters/Host queue – length</span><span class="sxs-lookup"><span data-stu-id="a7d10-217">Message Box:Host Counters/Host queue – length</span></span><br /><br /> <span data-ttu-id="a7d10-218">Message Box:Host Counters/Host queue - suspended msgs – length</span><span class="sxs-lookup"><span data-stu-id="a7d10-218">Message Box:Host Counters/Host queue - suspended msgs – length</span></span> |
|                        <span data-ttu-id="a7d10-219">8</span><span class="sxs-lookup"><span data-stu-id="a7d10-219">8</span></span>                        |                                                                                                                                                                                                                         <span data-ttu-id="a7d10-220">ホスト インスタンスによって使用されるデータベース セッションが指定されたしきい値を超えている。</span><span class="sxs-lookup"><span data-stu-id="a7d10-220">Database sessions being used by the host instance exceed the specified threshold.</span></span>                                                                                                                                                                                                                          |                                                                                                                                                                      <span data-ttu-id="a7d10-221">EPM で使用されるスレッド プールのサイズを小さくします。</span><span class="sxs-lookup"><span data-stu-id="a7d10-221">Reduce the size of the thread pool used by EPM.</span></span><br /><br /> <span data-ttu-id="a7d10-222">新しいメッセージのバッチの処理を中止 EPM スレッドをブロックします。</span><span class="sxs-lookup"><span data-stu-id="a7d10-222">Block the EPM threads to prevent processing of new messages batches.</span></span><br /><br /> <span data-ttu-id="a7d10-223">メッセージがデータベースに保存される前に、公開スレッドも段階的に遅れます。</span><span class="sxs-lookup"><span data-stu-id="a7d10-223">The publishing thread is also subject to a progressive delay before the messages are persisted to the database.</span></span>                                                                                                                                                                      |                                                                                                                                                                                                                                                                                <span data-ttu-id="a7d10-224">増やせば、**データベース接続**ホストのしきい値。</span><span class="sxs-lookup"><span data-stu-id="a7d10-224">Consider increasing the **Database connections** threshold for the host.</span></span><br /><br /> <span data-ttu-id="a7d10-225">この値を変更する方法の詳細については、[リソース ベースのスロットル設定の変更方法](../core/how-to-modify-resource-based-throttling-settings.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a7d10-225">For more information on changing this value, see [How to Modify Resource Based Throttling Settings](../core/how-to-modify-resource-based-throttling-settings.md).</span></span>                                                                                                                                                                                                                                                                                |                                                <span data-ttu-id="a7d10-226">BizTalk:MessageAgent</span><span class="sxs-lookup"><span data-stu-id="a7d10-226">BizTalk:MessageAgent</span></span>                                                 |                                                                                                                                  <span data-ttu-id="a7d10-227">Database session</span><span class="sxs-lookup"><span data-stu-id="a7d10-227">Database session</span></span>                                                                                                                                  |
|                        <span data-ttu-id="a7d10-228">9</span><span class="sxs-lookup"><span data-stu-id="a7d10-228">9</span></span>                        |                                                                                                                                                                                                                                       <span data-ttu-id="a7d10-229">プロセス スレッドの数が指定されたしきい値を超えている。</span><span class="sxs-lookup"><span data-stu-id="a7d10-229">Process thread count exceeds the specified threshold.</span></span>                                                                                                                                                                                                                                        |                                                                                                                                                                      <span data-ttu-id="a7d10-230">EPM で使用されるスレッド プールのサイズを小さくします。</span><span class="sxs-lookup"><span data-stu-id="a7d10-230">Reduce the size of the thread pool used by EPM.</span></span><br /><br /> <span data-ttu-id="a7d10-231">新しいメッセージのバッチの処理を中止 EPM スレッドをブロックします。</span><span class="sxs-lookup"><span data-stu-id="a7d10-231">Block the EPM threads to prevent processing of new messages batches.</span></span><br /><br /> <span data-ttu-id="a7d10-232">メッセージがデータベースに保存される前に、公開スレッドも段階的に遅れます。</span><span class="sxs-lookup"><span data-stu-id="a7d10-232">The publishing thread is also subject to a progressive delay before the messages are persisted to the database.</span></span>                                                                                                                                                                      |                                                                                                                                                                                                         <span data-ttu-id="a7d10-233">多くのスレッドが作成されないように、異なるスレッド プール サイズを設定することを検討します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-233">Consider adjusting the different thread pool sizes to ensure that the system does not create a large number of threads.</span></span><br /><br /> <span data-ttu-id="a7d10-234">スレッド プールのサイズを変更する方法の詳細については、[全般設定を変更する方法](../core/how-to-modify-general-settings.md)と[リソース ベースのスロットル設定の変更方法](../core/how-to-modify-resource-based-throttling-settings.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a7d10-234">For more information about modifying the thread pool sizes, see [How to Modify General Settings](../core/how-to-modify-general-settings.md) and [How to Modify Resource Based Throttling Settings](../core/how-to-modify-resource-based-throttling-settings.md).</span></span>                                                                                                                                                                                                         |                                                <span data-ttu-id="a7d10-235">BizTalk:MessageAgent</span><span class="sxs-lookup"><span data-stu-id="a7d10-235">BizTalk:MessageAgent</span></span>                                                 |                                                                                                                  <span data-ttu-id="a7d10-236">Thread count</span><span class="sxs-lookup"><span data-stu-id="a7d10-236">Thread count</span></span><br /><br /> <span data-ttu-id="a7d10-237">Thread count threshold</span><span class="sxs-lookup"><span data-stu-id="a7d10-237">Thread count threshold</span></span>                                                                                                                   |
|                        <span data-ttu-id="a7d10-238">5</span><span class="sxs-lookup"><span data-stu-id="a7d10-238">5</span></span>                        |                                                                                                                                                                                                                                           <span data-ttu-id="a7d10-239">システム メモリが指定されたしきい値を超えている。</span><span class="sxs-lookup"><span data-stu-id="a7d10-239">System memory exceeds the specified threshold.</span></span>                                                                                                                                                                                                                                           | <span data-ttu-id="a7d10-240">EPM で使用されるスレッド プールのサイズを小さくします。</span><span class="sxs-lookup"><span data-stu-id="a7d10-240">Reduce the size of the thread pool used by EPM.</span></span><br /><br /> <span data-ttu-id="a7d10-241">新しいメッセージのバッチの処理を中止 EPM スレッドをブロックします。</span><span class="sxs-lookup"><span data-stu-id="a7d10-241">Block the EPM threads to prevent processing of new messages batches.</span></span><br /><br /> <span data-ttu-id="a7d10-242">バッチのメッセージをデータベースに保存するメモリ要求が厳しい場合、メッセージがデータベースに保存される前に、公開スレッドも段階的に遅れます。</span><span class="sxs-lookup"><span data-stu-id="a7d10-242">If there is a steep memory requirement to persist the messages in a batch to the database, the publishing thread is also subject to a progressive delay before the messages are persisted to the database.</span></span><br /><br /> <span data-ttu-id="a7d10-243">プロセス メモリ不足によって公開バッチがブロックされるかどうかは、バッチのメッセージ数や、バッチで退避コマンドやメッセージ削除コマンドが使用されているかどうかなど、複数の要因によって決まります。</span><span class="sxs-lookup"><span data-stu-id="a7d10-243">Whether the publishing batch will be blocked or not due to process memory pressure depends on several factors including the number of messages in the batch or if there are dehydration or message deletion commands in the batch.</span></span> |                                                                                                                                                                                <span data-ttu-id="a7d10-244">EPM スレッド プールの既定のサイズを小さくして読み込みを少なくすること、およびアダプター バッチのサイズを小さくすることを検討します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-244">Consider reducing load by reducing the default size of the EPM thread pool, and/or the size of adapter batches.</span></span><br /><br /> <span data-ttu-id="a7d10-245">プロセスが過度にメモリを使用していない場合は、増やすことを検討してください、**グローバル物理**ホストのしきい値。</span><span class="sxs-lookup"><span data-stu-id="a7d10-245">If the process is not consuming excessive memory, consider increasing the **Global Physical** threshold for the host.</span></span><br /><br /> <span data-ttu-id="a7d10-246">変更の詳細については、**グローバル物理**しきい値を参照してください[リソース ベースのスロットル設定の変更方法](../core/how-to-modify-resource-based-throttling-settings.md)します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-246">For more information on changing the **Global Physical** threshold, see [How to Modify Resource Based Throttling Settings](../core/how-to-modify-resource-based-throttling-settings.md).</span></span>                                                                                                                                                                                |                                                <span data-ttu-id="a7d10-247">BizTalk:MessageAgent</span><span class="sxs-lookup"><span data-stu-id="a7d10-247">BizTalk:MessageAgent</span></span>                                                 |                                                                                                    <span data-ttu-id="a7d10-248">Physical memory usage (MB)</span><span class="sxs-lookup"><span data-stu-id="a7d10-248">Physical memory usage (MB)</span></span><br /><br /> <span data-ttu-id="a7d10-249">Physical memory usage threshold (MB)</span><span class="sxs-lookup"><span data-stu-id="a7d10-249">Physical memory usage threshold (MB)</span></span>                                                                                                     |

### <a name="outbound-throttling"></a><span data-ttu-id="a7d10-250">送信制限</span><span class="sxs-lookup"><span data-stu-id="a7d10-250">Outbound Throttling</span></span>  
 <span data-ttu-id="a7d10-251">BizTalk 制限メカニズムは、オーケストレーション エンジン (XLANG) および送信アダプターに送信制限を適用します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-251">The BizTalk throttling mechanism applies outbound throttling to the orchestration engine (XLANG) and to outbound adapters.</span></span>  

 <span data-ttu-id="a7d10-252">使用して、**制限の状態メッセージの配信**と**メッセージ配信の状態期間の調整**に関連付けられたカウンター **BizTalk:MessageAgent**パフォーマンス オブジェクト現在の制限の状態と制限の期間を測定するカテゴリ。</span><span class="sxs-lookup"><span data-stu-id="a7d10-252">Use the **Message delivery throttling state** and **Message delivery throttling state duration** counters associated with **BizTalk:MessageAgent** performance object category to measure the current throttling state and duration of throttling.</span></span> <span data-ttu-id="a7d10-253">カウンターの表示パフォーマンスを調整する使用可能なホストの詳細については[ホスト制限パフォーマンス カウンター](../core/host-throttling-performance-counters.md)します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-253">For more information about the available host throttling performance counters see [Host Throttling Performance Counters](../core/host-throttling-performance-counters.md).</span></span>  

 <span data-ttu-id="a7d10-254">送信制限ではメッセージの配信が遅れる場合があるため、メッセージがインメモリ キューに蓄積され、制限の条件が緩和されるまでキューから取り出すスレッドがブロックされる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="a7d10-254">Outbound throttling can cause delayed message delivery and messages may build up in the in-memory queue and cause de-queue threads to be blocked until the throttling condition is mitigated.</span></span> <span data-ttu-id="a7d10-255">キューから取り出すスレッドがブロックされると、メッセージ ボックス データベースから送信用のインメモリ キューに追加のメッセージが格納されます。</span><span class="sxs-lookup"><span data-stu-id="a7d10-255">When de-queue threads are blocked no additional messages are pulled from the MessageBox into the in-memory queue for outbound delivery.</span></span>  


| <span data-ttu-id="a7d10-256">メッセージ配信</span><span class="sxs-lookup"><span data-stu-id="a7d10-256">Message Delivery</span></span><br /><br /> <span data-ttu-id="a7d10-257">制限の状態</span><span class="sxs-lookup"><span data-stu-id="a7d10-257">throttling state</span></span> |                                                                                                                                    <span data-ttu-id="a7d10-258">制限の条件の発生原因</span><span class="sxs-lookup"><span data-stu-id="a7d10-258">Trigger for throttling condition</span></span>                                                                                                                                     |                                                                                                                                                   <span data-ttu-id="a7d10-259">実行される制限のアクション</span><span class="sxs-lookup"><span data-stu-id="a7d10-259">Throttling actions taken</span></span>                                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <span data-ttu-id="a7d10-260">緩和方法</span><span class="sxs-lookup"><span data-stu-id="a7d10-260">Mitigation Strategy</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |  <span data-ttu-id="a7d10-261">パフォーマンス オブジェクト</span><span class="sxs-lookup"><span data-stu-id="a7d10-261">Performance Object</span></span>  |                                                                               <span data-ttu-id="a7d10-262">パフォーマンス カウンター</span><span class="sxs-lookup"><span data-stu-id="a7d10-262">Performance Counter</span></span>                                                                               |
|-----------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                       <span data-ttu-id="a7d10-263">1</span><span class="sxs-lookup"><span data-stu-id="a7d10-263">1</span></span>                       | <span data-ttu-id="a7d10-264">**メッセージ配信の受信レート**ホストのインスタンスを超えています、**メッセージ配信の送信比率\\**  \* 、指定した**オーバー ドライブ率 (%)** 値</span><span class="sxs-lookup"><span data-stu-id="a7d10-264">**Message delivery incoming rate** for the host instance exceeds the **Message delivery outgoing rate \\**\* the specified **Rate overdrive factor (percent)** value</span></span><br /><br /> <span data-ttu-id="a7d10-265">非常に複雑な処理、低速の送信アダプター、またはシステム リソースの一時的な不足によって、この現象が発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="a7d10-265">This can be caused by high processing complexity, slow outbound adapters, or a momentary shortage of system resources.</span></span> |                                                 <span data-ttu-id="a7d10-266">英文の着信レートが、メッセージの配信までの時間を動的に計算された期間、配信スレッドをブロック、**メッセージ配信の送信比率\\**  \* 、指定した**率オーバー ドライブ率 (%)** 値。</span><span class="sxs-lookup"><span data-stu-id="a7d10-266">Block the delivery thread for a dynamically computed time period until the Message delivery incoming rate is at par with the **Message delivery outgoing rate \\**\* the specified **Rate overdrive factor (percent)** value.</span></span>                                                 |                                                                                                                                                                                                                                                  <span data-ttu-id="a7d10-267">パフォーマンス カウンターを使用して、メッセージ配信の受信 (および送信) 比率を指定します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-267">Use performance counters to determine the message delivery incoming and message delivery outgoing rate.</span></span> <span data-ttu-id="a7d10-268">適切な環境のドライブの要素を考慮します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-268">Consider an appropriate over drive factor for your environment.</span></span><br /><br /> <span data-ttu-id="a7d10-269">値を指定することを確認、**サンプリング間隔**と**最小サンプル数**パラメーターは、シナリオに適してします。</span><span class="sxs-lookup"><span data-stu-id="a7d10-269">Verify that the values supplied for the **Sampling window duration** and **Minimum number of samples** parameters are appropriate for your scenario.</span></span><br /><br /> <span data-ttu-id="a7d10-270">これらのパラメーターの詳細については、[率ベースのスロットル設定の変更方法](../core/how-to-modify-rate-based-throttling-settings.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a7d10-270">For more information about these parameters, see [How to Modify Rate Based Throttling Settings](../core/how-to-modify-rate-based-throttling-settings.md).</span></span>                                                                                                                                                                                                                                                   | <span data-ttu-id="a7d10-271">BizTalk:MessageAgent</span><span class="sxs-lookup"><span data-stu-id="a7d10-271">BizTalk:MessageAgent</span></span> |                                                   <span data-ttu-id="a7d10-272">Message delivery incoming rate</span><span class="sxs-lookup"><span data-stu-id="a7d10-272">Message delivery incoming rate</span></span><br /><br /> <span data-ttu-id="a7d10-273">Message publishing outgoing rate</span><span class="sxs-lookup"><span data-stu-id="a7d10-273">Message publishing outgoing rate</span></span>                                                   |
|                       <span data-ttu-id="a7d10-274">4</span><span class="sxs-lookup"><span data-stu-id="a7d10-274">4</span></span>                       |                             <span data-ttu-id="a7d10-275">プロセス メモリが指定されたしきい値を超えている。</span><span class="sxs-lookup"><span data-stu-id="a7d10-275">Process memory exceeds the specified threshold.</span></span><br /><br /> <span data-ttu-id="a7d10-276">サイズの大きいメッセージを処理する場合や送信アダプターで多くのメッセージを同時に処理しようとする場合のメモリを大量に使用するシナリオで、この現象が発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="a7d10-276">This can occur in memory intensive processing scenarios, when processing large messages, or when send adapters are attempting to process a high number of messages simultaneously.</span></span>                              | <span data-ttu-id="a7d10-277">アダプターまたは XLANG へのメッセージの配信を遅くします。</span><span class="sxs-lookup"><span data-stu-id="a7d10-277">Slow down message delivery to adapters or XLANG.</span></span><br /><br /> <span data-ttu-id="a7d10-278">適用できる場合にサービス インスタンスを退避してキャッシュを小さくすることで、プロセス メモリ使用量を小さくします。</span><span class="sxs-lookup"><span data-stu-id="a7d10-278">Reduce process memory consumption by dehydrating service instances and shrinking cache when applicable.</span></span><br /><br /> <span data-ttu-id="a7d10-279">EPM とメッセージ エージェントのいずれかまたは両方で使用されるスレッド プールのサイズを小さくします。</span><span class="sxs-lookup"><span data-stu-id="a7d10-279">Reduce the size of the thread pools used by the EPM and/or the Message Agent.</span></span><br /><br /> <span data-ttu-id="a7d10-280">定期的に .NET ガベージ コレクション (GC) を強制的に実行します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-280">Periodically force a .NET garbage collection (GC).</span></span> | <span data-ttu-id="a7d10-281">プロセス メモリ ベースでの制限のためにシステムがアイドル状態にならない場合、操作が不要になることがあります。</span><span class="sxs-lookup"><span data-stu-id="a7d10-281">If the system is not becoming idle due to process memory based throttling, no action may be required.</span></span><br /><br /> <span data-ttu-id="a7d10-282">場合、**インプロセス メッセージ カウント**カウンターが高いと、CPU 使用率が増えないプロセス メモリ ベースの制限がある場合にも追加の操作可能性がありますに必要です。</span><span class="sxs-lookup"><span data-stu-id="a7d10-282">If the **In-process message count** counter is high and the CPU utilization is not excessive even when there is process memory based throttling, no additional action may be required.</span></span><br /><br /> <span data-ttu-id="a7d10-283">過剰に調整する、システムが表示されている場合に関連付けられている値を増やすことを検討してください、**プロセス仮想**ホストのしきい値をホスト インスタンスに「メモリ不足」エラーが発生しないことを確認します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-283">If the system appears to be over-throttling, consider increasing the value associated with the **Process virtual** threshold for the host and verify that the host instance does not generate an "out of memory" error.</span></span> <span data-ttu-id="a7d10-284">増やすことで、「メモリ不足」エラーが発生した場合、**プロセス仮想**のしきい値の値を減らすことを検討し、**内部メッセージ キュー サイズ**と**インプロセス メッセージ**しきい値。</span><span class="sxs-lookup"><span data-stu-id="a7d10-284">If an "out of memory" error is raised by increasing the **Process virtual** threshold, then consider reducing the values for the **Internal message queue size** and **In-process messages** thresholds.</span></span> <span data-ttu-id="a7d10-285">この方法は、サイズの大きいメッセージを処理するシナリオに特に関連します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-285">This strategy is particularly relevant in large message processing scenarios.</span></span><br /><br /> <span data-ttu-id="a7d10-286">これらのパラメーターの詳細については、[リソース ベースのスロットル設定の変更方法](../core/how-to-modify-resource-based-throttling-settings.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a7d10-286">For more information about these parameters, see [How to Modify Resource Based Throttling Settings](../core/how-to-modify-resource-based-throttling-settings.md).</span></span> | <span data-ttu-id="a7d10-287">BizTalk:MessageAgent</span><span class="sxs-lookup"><span data-stu-id="a7d10-287">BizTalk:MessageAgent</span></span> | <span data-ttu-id="a7d10-288">High process memory</span><span class="sxs-lookup"><span data-stu-id="a7d10-288">High process memory</span></span><br /><br /> <span data-ttu-id="a7d10-289">プロセス メモリ usage(MB)</span><span class="sxs-lookup"><span data-stu-id="a7d10-289">Process memory usage(MB)</span></span><br /><br /> <span data-ttu-id="a7d10-290">Process memory usage threshold (MB)</span><span class="sxs-lookup"><span data-stu-id="a7d10-290">Process memory usage threshold (MB)</span></span><br /><br /> <span data-ttu-id="a7d10-291">In-process message count</span><span class="sxs-lookup"><span data-stu-id="a7d10-291">In-process message count</span></span><br /><br /> <span data-ttu-id="a7d10-292">Active instance count</span><span class="sxs-lookup"><span data-stu-id="a7d10-292">Active instance count</span></span> |
|                       <span data-ttu-id="a7d10-293">3</span><span class="sxs-lookup"><span data-stu-id="a7d10-293">3</span></span>                       |                                     <span data-ttu-id="a7d10-294">サービス クラスに配信されたインプロセス メッセージの数が指定されたしきい値を超えている。</span><span class="sxs-lookup"><span data-stu-id="a7d10-294">Number of in-process messages delivered to a service class exceeds the specified threshold.</span></span><br /><br /> <span data-ttu-id="a7d10-295">非常に複雑な処理、低速の送信アダプター、またはシステム リソースの一時的な不足によって、この現象が発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="a7d10-295">This can be caused by high processing complexity, slow outbound adapters, or a momentary shortage of system resources.</span></span>                                      |                                                                                                  <span data-ttu-id="a7d10-296">アダプターまたは XLANG へのメッセージの配信を遅くします。</span><span class="sxs-lookup"><span data-stu-id="a7d10-296">Slow down message delivery to adapters or XLANG.</span></span><br /><br /> <span data-ttu-id="a7d10-297">メッセージ エージェントによって使用されるスレッド プールのサイズを小さくします。</span><span class="sxs-lookup"><span data-stu-id="a7d10-297">Reduce the size of the thread pool used by the Message Agent.</span></span>                                                                                                   |                                                                                                                                                                                                                                                                                            <span data-ttu-id="a7d10-298">発生した制限を超える場合に関連付けられている値を増やすことを検討してください、**インプロセス メッセージ**しきい値。</span><span class="sxs-lookup"><span data-stu-id="a7d10-298">If over-throttling occurs, consider increasing the value associated with the **In-process messages** threshold.</span></span><br /><br /> <span data-ttu-id="a7d10-299">このパラメーターの詳細については、次を参照してください[リソース ベースのスロットル設定の変更方法](../core/how-to-modify-resource-based-throttling-settings.md)**注:** 悪影響送信アダプターのパフォーマンスに影響を与えるまたはメモリを増やすことがありますこの値を増やす。プロセスの使用量。</span><span class="sxs-lookup"><span data-stu-id="a7d10-299">For more information about this parameter, see [How to Modify Resource Based Throttling Settings](../core/how-to-modify-resource-based-throttling-settings.md) **Note:**  Increasing this value may adversely impact send adapter performance and/or increase the memory usage of the process.</span></span>                                                                                                                                                                                                                                                                                             | <span data-ttu-id="a7d10-300">BizTalk:MessageAgent</span><span class="sxs-lookup"><span data-stu-id="a7d10-300">BizTalk:MessageAgent</span></span> |                                                     <span data-ttu-id="a7d10-301">In-process message count</span><span class="sxs-lookup"><span data-stu-id="a7d10-301">In-process message count</span></span><br /><br /> <span data-ttu-id="a7d10-302">In-process message count threshold</span><span class="sxs-lookup"><span data-stu-id="a7d10-302">In-process message count threshold</span></span>                                                     |
|                       <span data-ttu-id="a7d10-303">9</span><span class="sxs-lookup"><span data-stu-id="a7d10-303">9</span></span>                       |                                                                                                                          <span data-ttu-id="a7d10-304">プロセス スレッドの数が指定されたしきい値を超えている。</span><span class="sxs-lookup"><span data-stu-id="a7d10-304">Process thread count exceeds the specified threshold.</span></span>                                                                                                                          |                                                                                                                         <span data-ttu-id="a7d10-305">EPM とメッセージ エージェントで使用されるスレッド プールのサイズを減らす</span><span class="sxs-lookup"><span data-stu-id="a7d10-305">Reduce the size of the thread pools used by the EPM and/or the Message Agent</span></span>                                                                                                                          |                                                                                                                                                                                                                                                                                                       <span data-ttu-id="a7d10-306">多くのスレッドが作成されないように、異なるスレッド プール サイズを設定することを検討します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-306">Consider adjusting the different thread pool sizes to ensure that the system does not create a large number of threads.</span></span><br /><br /> <span data-ttu-id="a7d10-307">スレッド プールのサイズを変更する方法の詳細については、[全般設定を変更する方法](../core/how-to-modify-general-settings.md)と[リソース ベースのスロットル設定の変更方法](../core/how-to-modify-resource-based-throttling-settings.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a7d10-307">For more information about modifying the thread pool sizes, see [How to Modify General Settings](../core/how-to-modify-general-settings.md) and [How to Modify Resource Based Throttling Settings](../core/how-to-modify-resource-based-throttling-settings.md).</span></span>                                                                                                                                                                                                                                                                                                        | <span data-ttu-id="a7d10-308">BizTalk:MessageAgent</span><span class="sxs-lookup"><span data-stu-id="a7d10-308">BizTalk:MessageAgent</span></span> |                                                                 <span data-ttu-id="a7d10-309">Thread count</span><span class="sxs-lookup"><span data-stu-id="a7d10-309">Thread count</span></span><br /><br /> <span data-ttu-id="a7d10-310">Thread count threshold</span><span class="sxs-lookup"><span data-stu-id="a7d10-310">Thread count threshold</span></span>                                                                 |
|                       <span data-ttu-id="a7d10-311">5</span><span class="sxs-lookup"><span data-stu-id="a7d10-311">5</span></span>                       |                                                                                                                                   <span data-ttu-id="a7d10-312">システム メモリがしきい値を超えている。</span><span class="sxs-lookup"><span data-stu-id="a7d10-312">System memory exceeds a threshold.</span></span>                                                                                                                                    |                                <span data-ttu-id="a7d10-313">アダプターまたは XLANG へのメッセージの配信を遅くします。</span><span class="sxs-lookup"><span data-stu-id="a7d10-313">Slow down message delivery to adapters or XLANG.</span></span><br /><br /> <span data-ttu-id="a7d10-314">適用できる場合にサービス インスタンスを退避してキャッシュを小さくすることで、プロセス メモリ使用量を小さくします。</span><span class="sxs-lookup"><span data-stu-id="a7d10-314">Reduce process memory consumption by dehydrating service instances and shrinking cache when applicable.</span></span><br /><br /> <span data-ttu-id="a7d10-315">EPM とメッセージ エージェントのいずれかまたは両方で使用されるスレッド プールのサイズを小さくします。</span><span class="sxs-lookup"><span data-stu-id="a7d10-315">Reduce the size of the thread pools used by the EPM and/or the Message Agent.</span></span>                                 |                                                                                                                                                                                                                                                                             <span data-ttu-id="a7d10-316">EPM スレッド プールの既定のサイズを小さくして読み込みを少なくすること、およびアダプター バッチのサイズを小さくすることを検討します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-316">Consider reducing load by reducing the default size of the EPM thread pool, and/or the size of adapter batches.</span></span><br /><br /> <span data-ttu-id="a7d10-317">プロセスが過度にメモリを使用していない場合は、増やすことを検討してください、**グローバル物理**ホストのしきい値。</span><span class="sxs-lookup"><span data-stu-id="a7d10-317">If the process is not consuming excessive memory, consider increasing the **Global Physical** threshold for the host.</span></span><br /><br /> <span data-ttu-id="a7d10-318">変更の詳細については、**グローバル物理**しきい値を参照してください[リソース ベースのスロットル設定の変更方法](../core/how-to-modify-resource-based-throttling-settings.md)します。</span><span class="sxs-lookup"><span data-stu-id="a7d10-318">For more information about changing the **Global Physical** threshold, see [How to Modify Resource Based Throttling Settings](../core/how-to-modify-resource-based-throttling-settings.md).</span></span>                                                                                                                                                                                                                                                                             | <span data-ttu-id="a7d10-319">BizTalk:MessageAgent</span><span class="sxs-lookup"><span data-stu-id="a7d10-319">BizTalk:MessageAgent</span></span> |                                                                           <span data-ttu-id="a7d10-320">Physical memory usage (MB)</span><span class="sxs-lookup"><span data-stu-id="a7d10-320">Physical memory usage (MB)</span></span>                                                                            |

