---
title: トランザクション メッセージ バッチ |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: b1790c05-e3f7-4667-8a9e-f6f208e55e40
caps.latest.revision: 9
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: bbc6d3a450106df1b67aa2c0e8fb1ada2f1a9e95
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65399223"
---
# <a name="transactional-message-batches"></a><span data-ttu-id="f928e-102">トランザクション メッセージ バッチ</span><span class="sxs-lookup"><span data-stu-id="f928e-102">Transactional Message Batches</span></span>
<span data-ttu-id="f928e-103">一部のアダプターが内部と外部トランザクションを調整する必要があります[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]トランザクション。</span><span class="sxs-lookup"><span data-stu-id="f928e-103">Some adapters must coordinate an external transaction with an internal [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] transaction.</span></span> <span data-ttu-id="f928e-104">たとえば、SQL アダプターが付属[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]調整する必要があります、[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)]でトランザクションを[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]トランザクション。</span><span class="sxs-lookup"><span data-stu-id="f928e-104">For example, the SQL adapter supplied with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] must coordinate a [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] transaction with a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] transaction.</span></span> <span data-ttu-id="f928e-105">これを行うには、アダプターへのアクセスを必要があります、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]トランザクション オブジェクトです。</span><span class="sxs-lookup"><span data-stu-id="f928e-105">To do this, the adapter needs access to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] transaction object.</span></span> <span data-ttu-id="f928e-106">トランザクション オブジェクトが明示的に作成され、バッチに送信する前に、バッチに関連付けられている[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="f928e-106">A transaction object is explicitly created and associated with the batch before the batch is submitted to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="f928e-107">関連付けられているトランザクション オブジェクトを持っているバッチはトランザクション バッチと呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="f928e-107">A batch that has an associated transaction object is called a transactional batch.</span></span> <span data-ttu-id="f928e-108">Microsoft 分散トランザクション コーディネーター (MSDTC) トランザクション オブジェクトを指定することによって、「確実、一度だけ」を実現できますの入出力データの配信[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="f928e-108">By supplying your own Microsoft Distributed Transaction Coordinator (MSDTC) transaction object, you can achieve the "guaranteed, once and once only", delivery of data into and out of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>  
  
 <span data-ttu-id="f928e-109">SQL アダプターのようなトランザクション データベース アダプター バッチに使用する 1 つのトランザクションのため外部データベースのデッドロックを引き起こす可能性があります。</span><span class="sxs-lookup"><span data-stu-id="f928e-109">Transactional database adapters like the SQL adapter have the potential for deadlocks in the external database because of the single transaction used for the batch.</span></span> <span data-ttu-id="f928e-110">これは、SQL アダプタのバッチ サイズが 1 つにハード コードされた理由です。</span><span class="sxs-lookup"><span data-stu-id="f928e-110">This is why the batch size for the SQL adapter is hard-coded to one.</span></span>  
  
 <span data-ttu-id="f928e-111">アダプターが別のデータベースや MSMQ などの追加リソース マネージャーをトランザクションのスコープ内に参加する必要があることを作成し、明示的な外部トランザクションをメッセージング エンジンに渡します。</span><span class="sxs-lookup"><span data-stu-id="f928e-111">Should the adapter need to enlist additional resource managers, such as another database or MSMQ, within the scope of that transaction, it must create and pass to the Messaging Engine an explicit external transaction.</span></span> <span data-ttu-id="f928e-112">外部トランザクションを作成し、バッチに関連付けることと呼ばれますが、トランザクション バッチ。</span><span class="sxs-lookup"><span data-stu-id="f928e-112">Creating an external transaction and associating it with a batch is a called a transactional batch.</span></span> <span data-ttu-id="f928e-113">トランザクション アダプターは、トランザクション バッチは、アダプターを使用して、外部の Microsoft 分散トランザクション コーディネーター (MSDTC) トランザクションを明示的に作成しています。</span><span class="sxs-lookup"><span data-stu-id="f928e-113">A transactional adapter is an adapter that makes use of transactional batches by explicitly creating an external Microsoft Distributed Transaction Coordinator (MSDTC) transaction.</span></span>  
  
 <span data-ttu-id="f928e-114">アダプターを提供する理由の 1 つ[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]トランザクションでは、確認するどちらかが[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]または外部システムがデータのレコード。</span><span class="sxs-lookup"><span data-stu-id="f928e-114">One of the reasons an adapter provides [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] with a transaction is to ensure that either [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] or the external system has a record of the data.</span></span> <span data-ttu-id="f928e-115">このレコードにより、メッセージが 1 回だけ配信されるようになります。</span><span class="sxs-lookup"><span data-stu-id="f928e-115">This record ensures the message is delivered once and only once.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="f928e-116">MSDTC の詳細についてでの分散トランザクション コーディネーターのマニュアルを参照してください: [ http://go.microsoft.com/fwlink/?LinkId=44297](http://go.microsoft.com/fwlink/?LinkId=44297)します。</span><span class="sxs-lookup"><span data-stu-id="f928e-116">For more information about MSDTC, see the documentation for the Distributed Transaction Coordinator at: [http://go.microsoft.com/fwlink/?LinkId=44297](http://go.microsoft.com/fwlink/?LinkId=44297).</span></span>  
  
 <span data-ttu-id="f928e-117">ファイル アダプターは、トランザクションへのアクセス、外部のファイル操作を管理するため、いないトランザクションを必要としないアダプターの例を示します。</span><span class="sxs-lookup"><span data-stu-id="f928e-117">The File adapter is an example of an adapter that does not require access to the transaction because the external file operations it manages are not transactional.</span></span> <span data-ttu-id="f928e-118">この場合、アダプターがトランザクション オブジェクトを提供しない[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="f928e-118">In this case, the adapter does not provide a transaction object to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="f928e-119">その一方で、SQL アダプターと対話し、SQL database、以外の追加操作があります、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]メッセージ処理します。</span><span class="sxs-lookup"><span data-stu-id="f928e-119">The SQL adapter, on the other hand, interacts with an SQL database and may have additional operations outside of its [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] message interactions.</span></span> <span data-ttu-id="f928e-120">外部の MSDTC トランザクションはこの場合、アダプターに渡すには意味を行うことがあります[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="f928e-120">An external MSDTC transaction in this case may make sense for the adapter to pass to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>  
  
## <a name="in-this-section"></a><span data-ttu-id="f928e-121">このセクションの内容</span><span class="sxs-lookup"><span data-stu-id="f928e-121">In This Section</span></span>  
  
-   [<span data-ttu-id="f928e-122">トランザクションの処理</span><span class="sxs-lookup"><span data-stu-id="f928e-122">Handling Transactions</span></span>](../core/handling-transactions.md)