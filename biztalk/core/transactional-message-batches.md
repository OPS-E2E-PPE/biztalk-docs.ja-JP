---
title: "トランザクション メッセージ バッチ |Microsoft ドキュメント"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: b1790c05-e3f7-4667-8a9e-f6f208e55e40
caps.latest.revision: "9"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 28be423aa500ba8950b5b2100ce68dba7743bd79
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/20/2017
---
# <a name="transactional-message-batches"></a><span data-ttu-id="6210d-102">トランザクション メッセージ バッチ</span><span class="sxs-lookup"><span data-stu-id="6210d-102">Transactional Message Batches</span></span>
<span data-ttu-id="6210d-103">一部のアダプターは、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] トランザクションに合わせて外部トランザクションを調整する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6210d-103">Some adapters must coordinate an external transaction with an internal [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] transaction.</span></span> <span data-ttu-id="6210d-104">たとえば、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] に付属の SQL アダプターは、[!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] トランザクションに合わせて [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] トランザクションを調整する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6210d-104">For example, the SQL adapter supplied with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] must coordinate a [!INCLUDE[btsSQLServerNoVersion](../includes/btssqlservernoversion-md.md)] transaction with a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] transaction.</span></span> <span data-ttu-id="6210d-105">そのためには、アダプターが [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] トランザクション オブジェクトにアクセスする必要があります。</span><span class="sxs-lookup"><span data-stu-id="6210d-105">To do this, the adapter needs access to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] transaction object.</span></span> <span data-ttu-id="6210d-106">トランザクション オブジェクトは明示的に作成され、バッチに関連付けられます。その後、そのバッチが [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] に送信されます。</span><span class="sxs-lookup"><span data-stu-id="6210d-106">A transaction object is explicitly created and associated with the batch before the batch is submitted to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="6210d-107">トランザクション オブジェクトが関連付けられているバッチを "トランザクション バッチ" といいます。</span><span class="sxs-lookup"><span data-stu-id="6210d-107">A batch that has an associated transaction object is called a transactional batch.</span></span> <span data-ttu-id="6210d-108">独自の Microsoft 分散トランザクション コーディネーター (MSDTC) トランザクション オブジェクトを指定することによって、トランザクションから [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] へ、および  からトランザクションへ、"確実に 1 回だけ" データを配信できます。</span><span class="sxs-lookup"><span data-stu-id="6210d-108">By supplying your own Microsoft Distributed Transaction Coordinator (MSDTC) transaction object, you can achieve the "guaranteed, once and once only", delivery of data into and out of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>  
  
 <span data-ttu-id="6210d-109">SQL アダプターのようなトランザクション データベース アダプターは、バッチに使用される 1 つのトランザクションが原因で外部データベースにデッドロックを引き起こす可能性があります。</span><span class="sxs-lookup"><span data-stu-id="6210d-109">Transactional database adapters like the SQL adapter have the potential for deadlocks in the external database because of the single transaction used for the batch.</span></span> <span data-ttu-id="6210d-110">このため、SQL アダプターのバッチ サイズは特定の値にハードコードされています。</span><span class="sxs-lookup"><span data-stu-id="6210d-110">This is why the batch size for the SQL adapter is hard-coded to one.</span></span>  
  
 <span data-ttu-id="6210d-111">トランザクションのスコープ内で、アダプターが別のデータベースや MSMQ などの追加リソース マネージャーを参加させる必要がある場合は、明示的な外部トランザクションを作成し、メッセージング エンジンに渡す必要があります。</span><span class="sxs-lookup"><span data-stu-id="6210d-111">Should the adapter need to enlist additional resource managers, such as another database or MSMQ, within the scope of that transaction, it must create and pass to the Messaging Engine an explicit external transaction.</span></span> <span data-ttu-id="6210d-112">外部トランザクションを作成し、それをバッチに関連付けることは、トランザクション バッチと呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="6210d-112">Creating an external transaction and associating it with a batch is a called a transactional batch.</span></span> <span data-ttu-id="6210d-113">トランザクション アダプターは、外部の Microsoft 分散トランザクション コーディネーター (MSDTC) トランザクションを明示的に作成してトランザクション バッチの使用するようにするアダプターです。</span><span class="sxs-lookup"><span data-stu-id="6210d-113">A transactional adapter is an adapter that makes use of transactional batches by explicitly creating an external Microsoft Distributed Transaction Coordinator (MSDTC) transaction.</span></span>  
  
 <span data-ttu-id="6210d-114">アダプターが [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] にトランザクションを送信する理由の 1 つは、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] または外部システムにデータのレコードを作成するためです。</span><span class="sxs-lookup"><span data-stu-id="6210d-114">One of the reasons an adapter provides [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] with a transaction is to ensure that either [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] or the external system has a record of the data.</span></span> <span data-ttu-id="6210d-115">このレコードによって、メッセージが確実に一度だけ配信されるようになります。</span><span class="sxs-lookup"><span data-stu-id="6210d-115">This record ensures the message is delivered once and only once.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="6210d-116">MSDTC の詳細については、の分散トランザクション コーディネーターのマニュアルを参照してください: [http://go.microsoft.com/fwlink/?LinkId=44297](http://go.microsoft.com/fwlink/?LinkId=44297)です。</span><span class="sxs-lookup"><span data-stu-id="6210d-116">For more information about MSDTC, see the documentation for the Distributed Transaction Coordinator at: [http://go.microsoft.com/fwlink/?LinkId=44297](http://go.microsoft.com/fwlink/?LinkId=44297).</span></span>  
  
 <span data-ttu-id="6210d-117">ファイル アダプターは、管理対象となる外部ファイル操作がトランザクションではないためトランザクションへのアクセスを必要としないアダプターの一例です。</span><span class="sxs-lookup"><span data-stu-id="6210d-117">The File adapter is an example of an adapter that does not require access to the transaction because the external file operations it manages are not transactional.</span></span> <span data-ttu-id="6210d-118">この場合、アダプターはトランザクション オブジェクトを [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] に送信しません。</span><span class="sxs-lookup"><span data-stu-id="6210d-118">In this case, the adapter does not provide a transaction object to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="6210d-119">一方、SQL アダプターは SQL データベースと連携し、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] メッセージ処理以外の操作を行う可能性があります。</span><span class="sxs-lookup"><span data-stu-id="6210d-119">The SQL adapter, on the other hand, interacts with an SQL database and may have additional operations outside of its [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] message interactions.</span></span> <span data-ttu-id="6210d-120">その場合、SQL アダプターは MSDTC トランザクションを [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] へ渡します。</span><span class="sxs-lookup"><span data-stu-id="6210d-120">An external MSDTC transaction in this case may make sense for the adapter to pass to [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>  
  
## <a name="in-this-section"></a><span data-ttu-id="6210d-121">このセクションの内容</span><span class="sxs-lookup"><span data-stu-id="6210d-121">In This Section</span></span>  
  
-   [<span data-ttu-id="6210d-122">トランザクションの処理</span><span class="sxs-lookup"><span data-stu-id="6210d-122">Handling Transactions</span></span>](../core/handling-transactions.md)