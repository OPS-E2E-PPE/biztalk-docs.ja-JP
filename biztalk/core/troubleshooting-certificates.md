---
title: 証明書のトラブルシューティング |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: b7013db6-ebf7-4294-a072-e9b5b0ad0de2
caps.latest.revision: 26
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: e9db2898f2d40103ed31f4da417d390dc0132dd2
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65296651"
---
# <a name="troubleshooting-certificates"></a><span data-ttu-id="98183-102">証明書のトラブルシューティング</span><span class="sxs-lookup"><span data-stu-id="98183-102">Troubleshooting Certificates</span></span>
<span data-ttu-id="98183-103">Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] では、ドキュメントの暗号化と解読、ドキュメントの署名と検証 (否認不可)、およびパーティの解決のために、公開キー インフラストラクチャ (PKI) デジタル証明書を利用できます。</span><span class="sxs-lookup"><span data-stu-id="98183-103">Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] can make use of public key infrastructure (PKI) digital certificates for purposes of document encryption and decryption, document signing and verification (non-repudiation) and for party resolution.</span></span> <span data-ttu-id="98183-104">このトピックでは、証明書を使用するさまざまなシナリオと構成オプションについて説明し、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] でデジタル証明書を使用する場合の一般的なガイドラインを示します。</span><span class="sxs-lookup"><span data-stu-id="98183-104">This topic describes various certification usage scenarios and configuration options and provides some general guidelines for using digital certificates with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>  

## <a name="certificate-usage-scenarios-and-configuration-options"></a><span data-ttu-id="98183-105">証明書の使用シナリオと構成オプション</span><span class="sxs-lookup"><span data-stu-id="98183-105">Certificate Usage Scenarios and Configuration Options</span></span>  
 <span data-ttu-id="98183-106">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] で証明書を使用している場合に発生する問題の多くは、不適切または不完全な構成が原因です。</span><span class="sxs-lookup"><span data-stu-id="98183-106">Most problems that occur while using certificates with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] are a result of incorrect or incomplete configuration.</span></span> <span data-ttu-id="98183-107">たとえば、正しい証明書を誤った証明書ストアにインポートしたり、誤った証明書を正しい証明書ストアにインポートしたり、BizTalk 管理コンソールに不適切な情報を入力したりすると、証明書の使用中に実行時エラーが発生します。</span><span class="sxs-lookup"><span data-stu-id="98183-107">For example importing the correct certificate into the wrong certificate store, the incorrect certificate into the correct store, or failure to enter the appropriate information into the BizTalk Administration console will cause run-time errors to occur when using certificates.</span></span>  

 <span data-ttu-id="98183-108">証明書の使用シナリオと [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] で使用できる構成オプションについては、次の表を参照してください。</span><span class="sxs-lookup"><span data-stu-id="98183-108">Use the following table as a reference for the certificate usage scenarios and configuration options available in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]:</span></span>  


|       <span data-ttu-id="98183-109">**証明書の使用**</span><span class="sxs-lookup"><span data-stu-id="98183-109">**Certificate Usage**</span></span>        |                           <span data-ttu-id="98183-110">**ユーザー コンテキスト**</span><span class="sxs-lookup"><span data-stu-id="98183-110">**User Context**</span></span>                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <span data-ttu-id="98183-111">**証明書ストアの場所**</span><span class="sxs-lookup"><span data-stu-id="98183-111">**Certificate Store Location**</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |        <span data-ttu-id="98183-112">**証明書の種類**</span><span class="sxs-lookup"><span data-stu-id="98183-112">**Certificate Type**</span></span>        | <span data-ttu-id="98183-113">**使用されるパイプライン コンポーネント**</span><span class="sxs-lookup"><span data-stu-id="98183-113">**Pipeline Component Used**</span></span> |                                                                                                                                                                                                                                                                                         <span data-ttu-id="98183-114">**BizTalk Server 管理コンソールで構成パラメーター**</span><span class="sxs-lookup"><span data-stu-id="98183-114">**Configuration Parameters in the BizTalk Server Administration Console**</span></span>                                                                                                                                                                                                                                                                                         |
|------------------------------------|-----------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|-----------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|        <span data-ttu-id="98183-115">暗号化 (送信)</span><span class="sxs-lookup"><span data-stu-id="98183-115">Encryption (Sending)</span></span>        |  <span data-ttu-id="98183-116">送信ハンドラーに関連付けられているホスト インスタンスが使用するアカウント</span><span class="sxs-lookup"><span data-stu-id="98183-116">Account used by the host instance associated with the send handler</span></span>   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              <span data-ttu-id="98183-117">実行している各コンピューターにログオン[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]が S/MIME エンコーダー パイプラインをホストし、暗号化証明書をインポートする、**ローカル コンピューター \ その他のユーザー**を格納します。</span><span class="sxs-lookup"><span data-stu-id="98183-117">Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that will host S/MIME encoder pipelines and import the encryption certificate into the **Local Computer \ Other People** store.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | <span data-ttu-id="98183-118">取引先のパブリック証明書</span><span class="sxs-lookup"><span data-stu-id="98183-118">Trading partner public certificate</span></span> |     <span data-ttu-id="98183-119">MIME/SMIME エンコーダー</span><span class="sxs-lookup"><span data-stu-id="98183-119">MIME/SMIME encoder</span></span>      |                                                                                                      <span data-ttu-id="98183-120">-暗号化証明書の値を指定する**共通名**と**拇印**上、**証明書**のページ、**送信ポートのプロパティ** ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="98183-120">-   Specify values for the encryption certificate **Common Name** and **Thumbprint** on the **Certificate** page of the **Send Port Properties** dialog box.</span></span><br /><span data-ttu-id="98183-121">パイプラインを指定して**エンコード**オプション、**パイプラインの構成** ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="98183-121">-   Specify pipeline **Encode** options in the **Configure Pipeline** dialog box.</span></span> <span data-ttu-id="98183-122">**パイプラインの構成**横に、ボタンをクリックしてダイアログ ボックスが表示されます、**送信パイプライン**ドロップダウン リストで、**全般**のページ、**送信[ポートのプロパティ**] ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="98183-122">The **Configure Pipeline** dialog box is displayed by clicking the button next to the **Send pipeline** drop-down list on the **General** page of the **Send Port Properties** dialog box.</span></span>                                                                                                       |
|       <span data-ttu-id="98183-123">解読 (受信)</span><span class="sxs-lookup"><span data-stu-id="98183-123">Decryption (Receiving)</span></span>       | <span data-ttu-id="98183-124">受信ハンドラーに関連付けられているホスト インスタンスが使用するアカウント</span><span class="sxs-lookup"><span data-stu-id="98183-124">Account used by the host instance associated with the receive handler</span></span> | <span data-ttu-id="98183-125">実行している各コンピューターにログオン[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]各ホスト インスタンス サービス アカウントとして S/MIME デコーダー パイプラインをホストし、復号化証明書をインポートするが、**現在のユーザー \ 個人**を格納します。</span><span class="sxs-lookup"><span data-stu-id="98183-125">Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that will host S/MIME decoder pipelines as each host instance service account, and import the decryption certificate to the **Current User \ Personal** store.</span></span> <span data-ttu-id="98183-126">**注:** IIS 7.0 コンピューターで成功するパイプラインの復号化は、IIS アプリケーション プール アカウントと受信ハンドラーに関連付けられているホスト インスタンスによって使用されるアカウントは、同じであると、このアカウントがのメンバーであることを確認、 \<machineName\>\IIS_WPG グループ。</span><span class="sxs-lookup"><span data-stu-id="98183-126">**Note:**  For pipeline decryption to succeed on an IIS 7.0 computer, ensure that the account for the IIS application pool and the account used by the host instance associated with the receive handler are the same and that this account is a member of the \<machineName\>\IIS_WPG group.</span></span> <span data-ttu-id="98183-127">IIS 7.0 の IIS プロセス id を設定する方法についての詳細については、次を参照してください。 [IIS アクセス許可の問題を解決するためのガイドライン](../core/guidelines-for-resolving-iis-permissions-problems.md)します。</span><span class="sxs-lookup"><span data-stu-id="98183-127">For more information about setting IIS process identity for IIS 7.0, see [Guidelines for Resolving IIS Permissions Problems](../core/guidelines-for-resolving-iis-permissions-problems.md).</span></span> <span data-ttu-id="98183-128">これらのプロセスは同じアカウントで実行する必要があります。これは、アカウント プロファイルが読み込まれ、それに続いてパイプラインで解読を実行するのに必要なレジストリ キーが読み込まれるようにするためです。</span><span class="sxs-lookup"><span data-stu-id="98183-128">These processes must run under the same account to ensure that the account profile is loaded which in turns loads the registry keys required to perform decryption in the pipeline.</span></span> <span data-ttu-id="98183-129">IIS 6.0 では、パフォーマンス上の理由のため、関連する w3wp.exe プロセスの開始時にアカウント プロファイルが読み込まれません。したがって、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] ホスト インスタンスを同じアカウントで構成し、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] がアカウント プロファイルとレジストリ キーを読み込むようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="98183-129">For performance reasons, IIS 6.0 does not load the account profile when starting the associated w3wp.exe process so the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] host instance must be configured with the same account so that [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will load the account profile and registry keys.</span></span> |      <span data-ttu-id="98183-130">独自のプライベート証明書</span><span class="sxs-lookup"><span data-stu-id="98183-130">Own private certificate</span></span>       |     <span data-ttu-id="98183-131">MIME/SMIME デコーダー</span><span class="sxs-lookup"><span data-stu-id="98183-131">MIME/SMIME decoder</span></span>      |                                                                                                   <span data-ttu-id="98183-132">-暗号化解除証明書の値を指定してください**共通名**と**拇印**上、**証明書**の各ページ**ホスト プロパティ** ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="98183-132">-   Specify values for the decryption certificate **Common Name** and **Thumbprint** on the **Certificates** page of each **Host Properties** dialog box.</span></span><br /><span data-ttu-id="98183-133">パイプラインを指定して**デコード**オプション、**パイプラインの構成** ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="98183-133">-   Specify pipeline **Decode** options in the **Configure Pipeline** dialog box.</span></span> <span data-ttu-id="98183-134">**パイプラインの構成**横に、ボタンをクリックしてダイアログ ボックスが表示されます、**受信パイプライン**ドロップダウン リストで、**全般**のページ、 **受信場所のプロパティ** ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="98183-134">The **Configure Pipeline** dialog box is displayed by clicking the button next to the **Receive pipeline** drop-down list on the **General** page of the **Receive Location Properties** dialog box.</span></span>                                                                                                   |
|        <span data-ttu-id="98183-135">署名 (送信)</span><span class="sxs-lookup"><span data-stu-id="98183-135">Signature (Sending)</span></span>         |  <span data-ttu-id="98183-136">送信ハンドラーに関連付けられているホスト インスタンスが使用するアカウント</span><span class="sxs-lookup"><span data-stu-id="98183-136">Account used by the host instance associated with the send handler</span></span>   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <span data-ttu-id="98183-137">実行している各コンピューターにログオン[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]各ホスト インスタンス サービス アカウントに S/MIME エンコーダー パイプラインをホストし、署名証明書をインポートするが、**現在のユーザー \ 個人**を格納します。</span><span class="sxs-lookup"><span data-stu-id="98183-137">Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that will host S/MIME encoder pipelines as each host instance service account, and import the signature certificate to the **Current User \ Personal** store.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |      <span data-ttu-id="98183-138">独自のプライベート証明書</span><span class="sxs-lookup"><span data-stu-id="98183-138">Own private certificate</span></span>       |     <span data-ttu-id="98183-139">MIME/SMIME エンコーダー</span><span class="sxs-lookup"><span data-stu-id="98183-139">MIME/SMIME encoder</span></span>      |                    <span data-ttu-id="98183-140">-署名証明書の値を指定します**共通名**と**拇印**で、**証明書**のページ、 **BizTalk グループのプロパティ**。 ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="98183-140">-   Specify values for the signature certificate **Common Name** and **Thumbprint** on the **Certificate** page of the **BizTalk Group Properties** dialog box.</span></span> <span data-ttu-id="98183-141">**注:**    ごとに 1 つだけの署名証明書を指定できます[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]グループ。</span><span class="sxs-lookup"><span data-stu-id="98183-141">**Note:**      Only one signature certificate can be specified per each [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] group.</span></span><br /><span data-ttu-id="98183-142">パイプラインを指定して**エンコード**オプション、**パイプラインの構成** ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="98183-142">-   Specify pipeline **Encode** options in the **Configure Pipeline** dialog box.</span></span> <span data-ttu-id="98183-143">**パイプラインの構成**横に、ボタンをクリックしてダイアログ ボックスが表示されます、**送信パイプライン**ドロップダウン リストで、**全般**のページ、**送信[ポートのプロパティ**] ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="98183-143">The **Configure Pipeline** dialog box is displayed by clicking the button next to the **Send pipeline** drop-down list on the **General** page of the **Send Port Properties** dialog box.</span></span>                    |
| <span data-ttu-id="98183-144">署名の検証 (受信)</span><span class="sxs-lookup"><span data-stu-id="98183-144">Signature Verification (Receiving)</span></span> | <span data-ttu-id="98183-145">受信ハンドラーに関連付けられているホスト インスタンスが使用するアカウント</span><span class="sxs-lookup"><span data-stu-id="98183-145">Account used by the host instance associated with the receive handler</span></span> |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <span data-ttu-id="98183-146">実行している各コンピューターにログオン[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]S/MIME デコーダー パイプラインをホストし、署名証明書をインポートするが、**ローカル コンピューター \ その他のユーザー**を格納します。</span><span class="sxs-lookup"><span data-stu-id="98183-146">Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that will host S/MIME decoder pipelines and import the signature certificate to the **Local Computer \ Other People** store.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | <span data-ttu-id="98183-147">取引先のパブリック証明書</span><span class="sxs-lookup"><span data-stu-id="98183-147">Trading partner public certificate</span></span> |     <span data-ttu-id="98183-148">MIME/SMIME デコーダー</span><span class="sxs-lookup"><span data-stu-id="98183-148">MIME/SMIME decoder</span></span>      |                                <span data-ttu-id="98183-149">-検証証明書の値を指定してください**共通名**と**拇印**上、**証明書**の各ページ**パーティ プロパティ** ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="98183-149">-   Specify values for the verification certificate **Common Name** and **Thumbprint** on the **Certificates** page of each **Party Properties** dialog box.</span></span><br /><span data-ttu-id="98183-150">パイプラインを指定して**デコード**オプション、**パイプラインの構成** ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="98183-150">-   Specify pipeline **Decode** options in the **Configure Pipeline** dialog box.</span></span> <span data-ttu-id="98183-151">**パイプラインの構成**横に、ボタンをクリックしてダイアログ ボックスが表示されます、**受信パイプライン**ドロップダウン リストで、**全般**のページ、 **受信場所のプロパティ** ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="98183-151">The **Configure Pipeline** dialog box is displayed by clicking the button next to the **Receive pipeline** drop-down list on the **General** page of the **Receive Location Properties** dialog box.</span></span> <span data-ttu-id="98183-152">**注:**    構成、**デコード**オプションは、MIME/SMIME デコーダー コンポーネントを使用するパイプラインがデプロイされている必要があります。</span><span class="sxs-lookup"><span data-stu-id="98183-152">**Note:**      Configuration of the **Decode** option requires that a pipeline with the MIME/SMIME decoder component is deployed.</span></span>                                 |
|    <span data-ttu-id="98183-153">パーティの解決 (受信)</span><span class="sxs-lookup"><span data-stu-id="98183-153">Party Resolution (Receiving)</span></span>    | <span data-ttu-id="98183-154">受信ハンドラーに関連付けられているホスト インスタンスが使用するアカウント</span><span class="sxs-lookup"><span data-stu-id="98183-154">Account used by the host instance associated with the receive handler</span></span> |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <span data-ttu-id="98183-155">ログオン、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]コンピューター パーティの解決が構成されているとに証明書をインポート、**ローカル コンピューター \ その他のユーザー**を格納します。</span><span class="sxs-lookup"><span data-stu-id="98183-155">Log on to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computer from which party resolution is being configured, and import the certificate into the **Local Computer \ Other People** store.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | <span data-ttu-id="98183-156">取引先のパブリック証明書</span><span class="sxs-lookup"><span data-stu-id="98183-156">Trading partner public certificate</span></span> |      <span data-ttu-id="98183-157">パーティの解決</span><span class="sxs-lookup"><span data-stu-id="98183-157">Party resolution</span></span>       |       <span data-ttu-id="98183-158">-証明書の値を指定する**共通名**と**拇印**上、**証明書**の各ページ**ホストのプロパティ** ダイアログ ボックス.</span><span class="sxs-lookup"><span data-stu-id="98183-158">-   Specify values for the certificate **Common Name** and **Thumbprint** on the **Certificates** page of each **Host Properties** dialog box.</span></span><br /><span data-ttu-id="98183-159">-指定**パーティの解決**オプション、**パイプラインの構成** ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="98183-159">-   Specify **ResolveParty** options in the **Configure Pipeline** dialog box.</span></span> <span data-ttu-id="98183-160">**パイプラインの構成**横に、ボタンをクリックしてダイアログ ボックスが表示されます、**受信パイプライン**ドロップダウン リストで、**全般**のページ、 **受信場所のプロパティ** ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="98183-160">The **Configure Pipeline** dialog box is displayed by clicking the button next to the **Receive pipeline** drop-down list on the **General** page of the **Receive Location Properties** dialog box.</span></span> <span data-ttu-id="98183-161">**注:**    このオプションの構成を含むパイプラインを使用する必要、**パーティの解決**コンポーネント。</span><span class="sxs-lookup"><span data-stu-id="98183-161">**Note:**      Configuration of this option requires the use of a pipeline that contains the **Party resolution** component.</span></span> <span data-ttu-id="98183-162">**XMLReceive**パイプラインに含まれる、**パーティの解決**コンポーネント。</span><span class="sxs-lookup"><span data-stu-id="98183-162">The **XMLReceive** pipeline contains the **Party resolution** component.</span></span>       |
|          <span data-ttu-id="98183-163">HTTPS (送信)</span><span class="sxs-lookup"><span data-stu-id="98183-163">HTTPS (Sending)</span></span>           |  <span data-ttu-id="98183-164">送信ハンドラーに関連付けられているホスト インスタンスが使用するアカウント</span><span class="sxs-lookup"><span data-stu-id="98183-164">Account used by the host instance associated with the send handler</span></span>   |                                                                                                                                                                                                                                                                     <span data-ttu-id="98183-165">SSL 通信では、クライアント証明書は必要ありません。</span><span class="sxs-lookup"><span data-stu-id="98183-165">SSL communication does not require a client certificate.</span></span> <span data-ttu-id="98183-166">クライアント証明書が必要かどうかは、送信先の Web サーバーの管理者が決定します。</span><span class="sxs-lookup"><span data-stu-id="98183-166">Whether a client certificate is required is at the discretion of the destination Web server administrator.</span></span> <span data-ttu-id="98183-167">送信先の Web サーバーがクライアント証明書を要求する場合は、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="98183-167">If the destination Web server requires a client certificate then follow these steps:</span></span><br /><br /> <span data-ttu-id="98183-168">-取引先からパブリック証明書を取得します。</span><span class="sxs-lookup"><span data-stu-id="98183-168">-   Obtain the public certificate from the trading partner.</span></span><br /><span data-ttu-id="98183-169">-実行する各コンピューター ログオン[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]送信ハンドラーに関連付けられているホスト インスタンスによって使用されるアカウント。</span><span class="sxs-lookup"><span data-stu-id="98183-169">-   Log on to each computer running [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] as the account used by the host instance associated with the send handler.</span></span><br /><span data-ttu-id="98183-170">-証明書のインポート、**現在のユーザー \ 個人**を格納します。</span><span class="sxs-lookup"><span data-stu-id="98183-170">-   Import the certificate into the **Current User \ Personal** store.</span></span><br /><br /> <span data-ttu-id="98183-171">Windows Server 2008 証明書サービス Web ページを使用して証明書を取得する方法については、次を参照してください。 [、Web 経由で証明書を要求](http://go.microsoft.com/fwlink/?LinkId=129628)します。</span><span class="sxs-lookup"><span data-stu-id="98183-171">For information about how to obtain a certificate using Windows Server 2008 Certificate Services Web pages, see [Request a Certificate Over the Web](http://go.microsoft.com/fwlink/?LinkId=129628).</span></span>                                                                                                                                                                                                                                                                      | <span data-ttu-id="98183-172">取引先のパブリック証明書</span><span class="sxs-lookup"><span data-stu-id="98183-172">Trading partner public certificate</span></span> |             <span data-ttu-id="98183-173">NA</span><span class="sxs-lookup"><span data-stu-id="98183-173">NA</span></span>              | <span data-ttu-id="98183-174">-   **HTTP トランスポート**- 設定、 **SSL クライアント証明書の拇印**オプション、**認証**のタブ、 **HTTP トランスポートのプロパティ** ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="98183-174">-   **HTTP Transport** - Set the **SSL client certificate thumbprint** option on the **Authentication** tab of the **HTTP Transport Properties** dialog box.</span></span> <span data-ttu-id="98183-175">**HTTP トランスポートのプロパティ**をクリックしてダイアログ ボックスが表示されます、**構成**のボタンでは、**全般**のページ、**送信ポートのプロパティ**  ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="98183-175">The **HTTP Transport Properties** dialog box is displayed by clicking the **Configure** button on the **General** page of the **Send Port Properties** dialog box.</span></span><br /><span data-ttu-id="98183-176">-   **SOAP トランスポート**- 設定、**クライアント証明書の拇印**オプション、**全般**のタブ、 **SOAP トランスポートのプロパティ** ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="98183-176">-   **SOAP Transport** - Set the **Client certificate thumbprint** option on the **General** tab of the **SOAP Transport Properties** dialog box.</span></span> <span data-ttu-id="98183-177">**SOAP トランスポートのプロパティ**をクリックしてダイアログ ボックスが表示されます、**構成**のボタンでは、**全般**のページ、**送信ポートのプロパティ**  ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="98183-177">The **SOAP Transport Properties** dialog box is displayed by clicking the **Configure** button on the **General** page of the **Send Port Properties** dialog box.</span></span> |

#### <a name="to-display-the-certificates-management-console-interface-for-local-computer-and-current-user"></a><span data-ttu-id="98183-178">[ローカル コンピューター] と [現在のユーザー] の [証明書] 管理コンソール インターフェイスを表示するには、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="98183-178">To display the Certificates Management Console interface for Local Computer and Current User</span></span>  

1.  <span data-ttu-id="98183-179">をクリックして**開始**、 をクリックして**実行**、型**MMC**、 をクリック**OK**を開く、 **Microsoft 管理コンソール**.</span><span class="sxs-lookup"><span data-stu-id="98183-179">Click **Start**, click **Run**, type **MMC**, and click **OK** to open the **Microsoft Management Console**.</span></span>  

2.  <span data-ttu-id="98183-180">をクリックして、**ファイル** メニューをクリック**スナップインの追加と削除**を表示する、**スナップインの追加と削除** ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="98183-180">Click the **File** menu, and then click **Add/Remove Snap-in** to display the **Add/Remove Snap-in** dialog box.</span></span>  

3.  <span data-ttu-id="98183-181">選択**証明書**利用できるスナップインの一覧から**追加**します。</span><span class="sxs-lookup"><span data-stu-id="98183-181">Select **Certificates** from the list of available snap-ins and click **Add**.</span></span>  

4.  <span data-ttu-id="98183-182">選択**コンピューター アカウント**、 をクリックして**次**、順にクリックします**完了**。</span><span class="sxs-lookup"><span data-stu-id="98183-182">Select **Computer account**, click **Next**, and then click **Finish**.</span></span> <span data-ttu-id="98183-183">これは追加、**証明書管理コンソール**のためのインターフェイス**ローカル コンピューター**します。</span><span class="sxs-lookup"><span data-stu-id="98183-183">This will add the **Certificates Management Console** interface for **Local Computer**.</span></span>  

5.  <span data-ttu-id="98183-184">いることを確認**証明書**クリックして、スナップインの一覧が選択されている**追加**もう一度です。</span><span class="sxs-lookup"><span data-stu-id="98183-184">Ensure that **Certificates** is still selected from the list of snap-ins, and then click **Add** again.</span></span>  

6.  <span data-ttu-id="98183-185">選択**ユーザー アカウント**順にクリックします**完了**します。</span><span class="sxs-lookup"><span data-stu-id="98183-185">Select **My user account** and then click **Finish**.</span></span> <span data-ttu-id="98183-186">これは追加、**証明書管理コンソール**のためのインターフェイス**現在のユーザー**します。</span><span class="sxs-lookup"><span data-stu-id="98183-186">This will add the **Certificates Management Console** interface for **Current User**.</span></span>  

    > [!NOTE]
    >  <span data-ttu-id="98183-187">これが表示されます、**証明書管理コンソール**現在ログオンに使用しているアカウント。</span><span class="sxs-lookup"><span data-stu-id="98183-187">This displays the **Certificates Management Console** for the account that you are currently logged on as.</span></span> <span data-ttu-id="98183-188">サービス アカウントの個人証明書ストアに証明書をインポートする必要がある場合は、最初にサービス アカウントの資格情報を使用してログオンしてください。</span><span class="sxs-lookup"><span data-stu-id="98183-188">If you need to import certificates into the Personal store for a service account then you should log on with the service account credentials first.</span></span>  

7.  <span data-ttu-id="98183-189">をクリックして、 **OK**ボタンを**スナップインの追加と削除** ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="98183-189">Click the **OK** button on the **Add/Remove Snap-in** dialog box.</span></span>  

## <a name="general-guidelines"></a><span data-ttu-id="98183-190">一般的なガイドライン</span><span class="sxs-lookup"><span data-stu-id="98183-190">General Guidelines</span></span>  

- <span data-ttu-id="98183-191">**インポートした証明書が本来の目的に使用されていることを確認**:これを行うで証明書をダブルクリックして、**証明書管理コンソール**インターフェイスを順にクリックして、**詳細**のタブ、**証明書** ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="98183-191">**Ensure that the imported certificate is being used for its intended purpose**: To do this, double-click the certificate in the **Certificates Management Console** interface and then click the **Details** tab of the **Certificate** dialog box.</span></span> <span data-ttu-id="98183-192">をクリックし、**すべて**オプション、**表示**ドロップダウン リストをクリックして、**キー使用法**や**拡張キー使用法**フィールド使用目的を確認します。</span><span class="sxs-lookup"><span data-stu-id="98183-192">Then click the **All** option for the **Show** drop-down list and then click to select the **Key Usage** and/or **Enhanced Key Usage** fields to verify the intended purpose.</span></span> <span data-ttu-id="98183-193">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] が本来の目的以外で証明書を使用しようとした場合、実行時エラーが発生します。</span><span class="sxs-lookup"><span data-stu-id="98183-193">If [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] attempts to use a certificate for other than its intended purpose a runtime error will occur.</span></span>  

- <span data-ttu-id="98183-194">**ターゲットの Web サイトへの接続をテスト**:SSL を使用している場合は、HTTP または SOAP トランスポートでターゲットの Web サイトに接続する前に、Internet Explorer でターゲットの Web サイトに接続できることを確認します。</span><span class="sxs-lookup"><span data-stu-id="98183-194">**Test your connection to the target Web site**: If you are using SSL, ensure that you can connect to the target Web site with Internet Explorer before attempting to connect to the target Web site with the HTTP or SOAP transports.</span></span> <span data-ttu-id="98183-195">ダイアログ ボックスが表示されないこと Internet Explorer で、ターゲット Web サイトに接続するときに確認します。</span><span class="sxs-lookup"><span data-stu-id="98183-195">Verify that no dialog boxes are displayed in Internet Explorer when you connect to the target Web site.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="98183-196">ターゲットの web サイトに接続するときに表示される可能性のあるダイアログ ボックスでやり取りするメカニズムはありません。</span><span class="sxs-lookup"><span data-stu-id="98183-196">has no mechanism for interfacing with any dialog boxes that might be displayed when connecting to the target web site.</span></span> <span data-ttu-id="98183-197">ターゲットの web サイト名が web サイトの SSL 証明書の指定した名前と一致しない場合、または適切な SSL 証明書のルート証明機関でない場合、Internet Explorer によってダイアログ ボックスを表示可能性があります**信頼されたルート証明機関**を格納します。</span><span class="sxs-lookup"><span data-stu-id="98183-197">A dialog box may be displayed by Internet Explorer if the target web site name does not match the name specified for the web site in the SSL certificate or if the Root Certificate Authority for the SSL certificate is not in the appropriate **Trusted Root Certification Authorities** store.</span></span>  

- <span data-ttu-id="98183-198">**SSL 接続の問題を分析するのにには、SSL 診断ツールを使用します。** SSL 診断ツールは、IIS 診断ツールキットのオプションのコンポーネントです。</span><span class="sxs-lookup"><span data-stu-id="98183-198">**Use the SSL Diagnostics tool to analyze SSL connection issues:** The SSL Diagnostics tool is an optional component of the IIS Diagnostics Toolkit.</span></span>  <span data-ttu-id="98183-199">IIS 診断ツールキットをダウンロード[インターネット インフォメーション サービスの診断ツール](http://go.microsoft.com/fwlink/?LinkId=64426)します。</span><span class="sxs-lookup"><span data-stu-id="98183-199">Download the IIS Diagnostics Toolkit from [Internet Information Services Diagnostic Tools](http://go.microsoft.com/fwlink/?LinkId=64426).</span></span>  

- <span data-ttu-id="98183-200">**証明書が有効であることを確認**します。</span><span class="sxs-lookup"><span data-stu-id="98183-200">**Ensure that the certificate is valid**.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="98183-201">プロンプトが表示されませんが、証明書の有効期限が切れている場合。</span><span class="sxs-lookup"><span data-stu-id="98183-201">does not prompt you if the certificate has expired.</span></span> <span data-ttu-id="98183-202">代わりに、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] のメッセージが中断されます。</span><span class="sxs-lookup"><span data-stu-id="98183-202">Instead, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will suspend the message.</span></span>  

## <a name="see-also"></a><span data-ttu-id="98183-203">参照</span><span class="sxs-lookup"><span data-stu-id="98183-203">See Also</span></span>  
 [<span data-ttu-id="98183-204">暗号化証明書および署名証明書</span><span class="sxs-lookup"><span data-stu-id="98183-204">Encryption and Signing Certificates</span></span>](../core/encryption-and-signing-certificates.md)