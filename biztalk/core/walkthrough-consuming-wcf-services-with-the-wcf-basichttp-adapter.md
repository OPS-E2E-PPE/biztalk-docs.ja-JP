---
title: 'チュートリアル: Wcf-basichttp アダプターを使用した WCF サービスの使用 |Microsoft Docs'
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 2d280198-ba55-4937-91c9-19d6d0ed3194
caps.latest.revision: 49
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 2d72ccdb39bec5e063f48206df0bfcc54364d11c
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/27/2018
ms.locfileid: "36981427"
---
# <a name="walkthrough-consuming-wcf-services-with-the-wcf-basichttp-adapter"></a><span data-ttu-id="6803e-102">チュートリアル: Wcf-basichttp アダプターを使用した WCF サービスの使用</span><span class="sxs-lookup"><span data-stu-id="6803e-102">Walkthrough: Consuming WCF Services with the WCF-BasicHttp Adapter</span></span>
  
> [!NOTE]
>  <span data-ttu-id="6803e-103">アダプターの詳細については、[BizTalk Server のアダプター](../core/adapters-in-biztalk-server.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6803e-103">For more information about adapters, see [Adapters in BizTalk Server](../core/adapters-in-biztalk-server.md).</span></span>  
  
## <a name="introduction"></a><span data-ttu-id="6803e-104">概要</span><span class="sxs-lookup"><span data-stu-id="6803e-104">Introduction</span></span>
  
 <span data-ttu-id="6803e-105">このチュートリアルでは、インターネット インフォメーション サービス (IIS) の内部でホストされている [!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)] サービスを、BizTalk メッセージングと WCF-BasicHttp 送信アダプターを使用して利用します。</span><span class="sxs-lookup"><span data-stu-id="6803e-105">In this walkthrough, you will consume a [!INCLUDE[firstref_btsWinCommFoundation](../includes/firstref-btswincommfoundation-md.md)] service hosted inside Internet Information Services (IIS) using BizTalk messaging and the WCF-BasicHttp send adapter.</span></span> <span data-ttu-id="6803e-106">このアダプターを使用して、 **BasicHttpBinding** Microsoft の間のブリッジとして機能する Web サービスの以前のバージョンと互換性のあるトランスポート/プロトコル スタックを実装するバインド[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]と[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]機能。</span><span class="sxs-lookup"><span data-stu-id="6803e-106">This adapter uses the **BasicHttpBinding** binding to provide a transport/protocol stack implementation compatible with earlier versions of Web services to serve as a bridge between Microsoft [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] and [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] functionality.</span></span> <span data-ttu-id="6803e-107">オーケストレーションは、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] アダプターを使用する送信ポートにバインドして、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスを呼び出し、論理ビジネス プロセス内でその機能を活用できます。</span><span class="sxs-lookup"><span data-stu-id="6803e-107">An orchestration can bind to a send port that uses a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] adapter to call a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service and leverage its functionality within its logical business processing.</span></span>  
  
 <span data-ttu-id="6803e-108">WCF-BasicHttp アダプターは、受信アダプターと送信アダプターの 2 つで構成されます。</span><span class="sxs-lookup"><span data-stu-id="6803e-108">The WCF-BasicHttp adapter consists of both a send adapter and a receive adapter.</span></span> <span data-ttu-id="6803e-109">このサンプルでは、このアダプターの送信側のみを使用し、HTTP プロトコルを使用して [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスへの WCF サービス要求を行います。</span><span class="sxs-lookup"><span data-stu-id="6803e-109">In this sample you will use only the send side of this adapter to make WCF service requests through the HTTP protocol to a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  <span data-ttu-id="6803e-110">送信請求 - 応答送信ポートの場合、送信アダプターは [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスに送信して、結果の応答を受信します。</span><span class="sxs-lookup"><span data-stu-id="6803e-110">For a Solicit-Response send port, the send adapter sends to a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service and receives back a result response.</span></span>  <span data-ttu-id="6803e-111">逆に、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] 受信アダプターを使用すると、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] オーケストレーションを公開し、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] クライアント アプリケーションによって外部的に呼び出すことができます。</span><span class="sxs-lookup"><span data-stu-id="6803e-111">Conversely, a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] receive adapter allows a [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] orchestration to be published and called externally by a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] client application.</span></span> <span data-ttu-id="6803e-112">参照してください、 [WCF サービスの公開](../core/publishing-wcf-services.md)の追加情報。</span><span class="sxs-lookup"><span data-stu-id="6803e-112">Refer to the [Publishing WCF Services](../core/publishing-wcf-services.md) for additional information.</span></span>  
  
 <span data-ttu-id="6803e-113">このチュートリアルを完了すると、次のタスクを実行できるようになります。</span><span class="sxs-lookup"><span data-stu-id="6803e-113">After completing this walkthrough, you will understand how to perform the following tasks:</span></span>  
  
- <span data-ttu-id="6803e-114">内から[!INCLUDE[btsCoName](../includes/btsconame-md.md)]Visual Studio を使用して、**デプロイ**を含むアセンブリを展開するコマンド、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ソリューションと[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービスのローカル インスタンスを[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]します。</span><span class="sxs-lookup"><span data-stu-id="6803e-114">From within [!INCLUDE[btsCoName](../includes/btsconame-md.md)]Visual Studio, use the **Deploy** command to deploy the assemblies containing the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] solution and the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service to a local instance of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span> <span data-ttu-id="6803e-115">これにより、アセンブリが含まれた BizTalk アプリケーションが作成されます。</span><span class="sxs-lookup"><span data-stu-id="6803e-115">This creates a BizTalk application that is populated with the assemblies.</span></span>  
  
- <span data-ttu-id="6803e-116">Visual Studio 内で使用して、 **BizTalk WCF サービス使用ウィザード**を生成する、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]スキーマと型を使用するために必要な[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービス。</span><span class="sxs-lookup"><span data-stu-id="6803e-116">From within Visual Studio, use the **BizTalk WCF Service Consuming Wizard** to generate the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] schemas and types necessary to consume the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="6803e-117">論理ポートへのバインドに使用できる空のオーケストレーションも生成されます。</span><span class="sxs-lookup"><span data-stu-id="6803e-117">An empty orchestration is generated as well that you can use and bind to a logical port.</span></span> <span data-ttu-id="6803e-118">このオーケストレーションは、スキーマおよび型と共にコンパイルおよび展開されます。</span><span class="sxs-lookup"><span data-stu-id="6803e-118">This orchestration is complied and deployed along with schemas and types.</span></span> <span data-ttu-id="6803e-119">ただし、これは単なる純粋な [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] メッセージング シナリオなので、オーケストレーション ワークフロー処理は空で、このサンプルでは使用されません。</span><span class="sxs-lookup"><span data-stu-id="6803e-119">But the orchestration workflow processing is empty here and not used in this sample as this is merely a pure [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] messaging scenario.</span></span>  
  
- <span data-ttu-id="6803e-120">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理コンソールから、WCF-BasicHttp 送信ポートを使用するコンテンツ ベースのルーティングを構成する。</span><span class="sxs-lookup"><span data-stu-id="6803e-120">From the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, configure content-based routing by using the WCF-BasicHttp send port.</span></span> <span data-ttu-id="6803e-121">構成、 **SOAPAction**ヘッダーをターゲット[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービスが受信します。</span><span class="sxs-lookup"><span data-stu-id="6803e-121">You will configure the **SOAPAction** header that the target [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service expects to receive.</span></span>  
  
- <span data-ttu-id="6803e-122">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理コンソールからフィルター式を構成し、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスが送信する可能性のある SOAP エラー メッセージが出力フォルダーにルーティングされるようにする。</span><span class="sxs-lookup"><span data-stu-id="6803e-122">From the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, configure the filter expression to route any SOAP fault messages that a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service can send to an output folder.</span></span>  
  
- <span data-ttu-id="6803e-123">インターネット インフォメーション サービス (IIS) マネージャーから、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスをホストする Web アプリケーションを構成し、そのメタデータを公開する。</span><span class="sxs-lookup"><span data-stu-id="6803e-123">From within Internet Information Services (IIS) Manager, configure the Web application hosting the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service to expose its metadata.</span></span> <span data-ttu-id="6803e-124">有効にした後、 **BizTalk WCF サービス使用ウィザード**にアクセスするには、型およびスキーマを生成するには、このメタデータを取得することができます、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービス。</span><span class="sxs-lookup"><span data-stu-id="6803e-124">After it is enabled, the **BizTalk WCF Service Consuming Wizard** can obtain this metadata to generate types and schemas to access the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="6803e-125">必須コンポーネント</span><span class="sxs-lookup"><span data-stu-id="6803e-125">Prerequisites</span></span>  
 <span data-ttu-id="6803e-126">このサンプルの手順を実行するには、使用する環境が次の前提条件を満たしている必要があります。</span><span class="sxs-lookup"><span data-stu-id="6803e-126">To perform the steps in this sample ensure that your environment installs the following prerequisites:</span></span>  
  
- <span data-ttu-id="6803e-127">アセンブリをビルドし、展開プロセスを実行するコンピューターと、サンプルを実行しているコンピューターの両方の必要な Microsoft [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)]、Microsoft [!INCLUDE[netfx40_short](../includes/netfx40-short-md.md)]、および Microsoft BizTalk Server です。</span><span class="sxs-lookup"><span data-stu-id="6803e-127">Both the computer that builds the assemblies and runs the deployment process, and the computer that runs the sample, require Microsoft [!INCLUDE[btsWinSvr2k8](../includes/btswinsvr2k8-md.md)], Microsoft [!INCLUDE[netfx40_short](../includes/netfx40-short-md.md)], and Microsoft BizTalk Server.</span></span>  
  
- <span data-ttu-id="6803e-128">アセンブリのビルドと展開プロセスの実行に使用するコンピューターには、Microsoft Visual Studio が必要です。</span><span class="sxs-lookup"><span data-stu-id="6803e-128">The computer used to build the assemblies and run the deployment process requires Microsoft Visual Studio.</span></span>  
  
- <span data-ttu-id="6803e-129">サンプルを実行するコンピューターには、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] アダプターと [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] 管理ツールが必要です。</span><span class="sxs-lookup"><span data-stu-id="6803e-129">The computer that runs the sample requires the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Adapters and the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Administration Tools.</span></span> <span data-ttu-id="6803e-130">これらは、Microsoft BizTalk Server のセットアップ時にインストールするオプションです。</span><span class="sxs-lookup"><span data-stu-id="6803e-130">These are options to install during setup of Microsoft BizTalk Server.</span></span>  
  
- <span data-ttu-id="6803e-131">管理タスクの実行に使用するコンピューターで、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理コンソール内の [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] アプリケーション設定を構成するには、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理者グループのメンバーであるユーザー アカウントとして実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6803e-131">On the computers that you use to perform administrative tasks, you must run as a user account that is a member of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administrators group to configure the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application settings within the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span> <span data-ttu-id="6803e-132">また、アプリケーションの展開、ホスト インスタンスの管理、およびその他の必要なタスクを実行するには、このユーザー アカウントはローカル管理者グループのメンバーである必要もあります。</span><span class="sxs-lookup"><span data-stu-id="6803e-132">This user account must also be a member of the local Administrators group for application deployment, managing host instances, and other tasks that may be required.</span></span>  
  
- <span data-ttu-id="6803e-133">必要とする任意のコンピューターで[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]機能により、1 回限りのセットアップの手順を完了、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サンプル[ http://go.microsoft.com/fwlink/?LinkId=135510](http://go.microsoft.com/fwlink/?LinkId=135510)します。</span><span class="sxs-lookup"><span data-stu-id="6803e-133">On any computer that requires [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] capability, complete the one-time setup procedure for the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] samples at [http://go.microsoft.com/fwlink/?LinkId=135510](http://go.microsoft.com/fwlink/?LinkId=135510).</span></span>  
  
- <span data-ttu-id="6803e-134">サンプルを実行してバインドまたは .msi ファイルを [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] にインポートするコンピューターで、ホストが信頼されているホストではないことを確認します。信頼されているホストの場合、インポートは失敗します。</span><span class="sxs-lookup"><span data-stu-id="6803e-134">On the computer that runs the sample and imports a binding or an .msi file into [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], ensure the host is not a trusted host or the import will fail.</span></span>  
  
- <span data-ttu-id="6803e-135">チュートリアルのコードをダウンロードし、コンピューターに展開する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6803e-135">You must download the walkthrough code and extract it to your computer.</span></span>  <span data-ttu-id="6803e-136">このチュートリアルでは全体の一部[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]アダプター チュートリアル パッケージ。</span><span class="sxs-lookup"><span data-stu-id="6803e-136">This walkthrough is a part of the entire [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] Adapter Walkthrough package.</span></span> <span data-ttu-id="6803e-137">ファイルをダウンロードする**WCFAdapterWalkthroughs.exe**から、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]デベロッパー センター[http://go.microsoft.com/fwlink/?LinkId=194140](http://go.microsoft.com/fwlink/?LinkId=194140)します。</span><span class="sxs-lookup"><span data-stu-id="6803e-137">You can download the file **WCFAdapterWalkthroughs.exe** from the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Developer Center at[http://go.microsoft.com/fwlink/?LinkId=194140](http://go.microsoft.com/fwlink/?LinkId=194140).</span></span>  
  
## <a name="deploy-the-sample-wcf-service"></a><span data-ttu-id="6803e-138">サンプル WCF サービスをデプロイします。</span><span class="sxs-lookup"><span data-stu-id="6803e-138">Deploy the sample WCF service</span></span>  
  
1. <span data-ttu-id="6803e-139">自己解凍形式実行**WCFBasicHttpSendAdapter.exe**ファイルを開き、ファイルを**C:\WCFBasicHttpSendAdapter**フォルダー。</span><span class="sxs-lookup"><span data-stu-id="6803e-139">Run the self-extracting **WCFBasicHttpSendAdapter.exe** file and extract the files into the **C:\WCFBasicHttpSendAdapter** folder.</span></span>  
  
2. <span data-ttu-id="6803e-140">開く、 **C:\WCFBasicHttpSendAdapter\WCFBasicHttpSendAdapter.sln** Visual Studio でします。</span><span class="sxs-lookup"><span data-stu-id="6803e-140">Open the **C:\WCFBasicHttpSendAdapter\WCFBasicHttpSendAdapter.sln** in Visual Studio.</span></span>  
  
3. <span data-ttu-id="6803e-141">ソリューション エクスプ ローラーで、 **BasicHttpWCFServiceConsuming**プロジェクト。</span><span class="sxs-lookup"><span data-stu-id="6803e-141">In Solution Explorer, expand the **BasicHttpWCFServiceConsuming** project.</span></span> <span data-ttu-id="6803e-142">このプロジェクトは、送信ポートにより呼び出される [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスです。</span><span class="sxs-lookup"><span data-stu-id="6803e-142">This project is the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service that will be called by the send port.</span></span> <span data-ttu-id="6803e-143">インターネット インフォメーション サービス (IIS) を使用してマネージド ホスト環境でホストされます。</span><span class="sxs-lookup"><span data-stu-id="6803e-143">It will be hosted in a managed host environment using Internet Information Services (IIS).</span></span> <span data-ttu-id="6803e-144">IIS のホスティングでは、メッセージベースのアクティブ化を使用して、サービスのアクティブ化と有効期間を管理します。</span><span class="sxs-lookup"><span data-stu-id="6803e-144">Hosting in IIS uses message-based activation to manage the activation and lifetime of the service.</span></span> <span data-ttu-id="6803e-145">展開**App_Code**を開き**OrderProcess.cs**を確認します。</span><span class="sxs-lookup"><span data-stu-id="6803e-145">Expand **App_Code**, and then open **OrderProcess.cs** to review.</span></span> <span data-ttu-id="6803e-146">これは、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービスを介して発注要求メッセージの受信、 **OrderRequest**メソッド。</span><span class="sxs-lookup"><span data-stu-id="6803e-146">This [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service receives order request messages through the **OrderRequest** method.</span></span> <span data-ttu-id="6803e-147">OrderProcess.cs ファイルには、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスのインターフェイスの定義と実装が含まれます。</span><span class="sxs-lookup"><span data-stu-id="6803e-147">The OrderProcess.cs file contains the interface defition and implementation of the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="6803e-148">これは、注文を返しますを通じて応答メッセージ、 **OrderResponse**メソッド。</span><span class="sxs-lookup"><span data-stu-id="6803e-148">It simply returns order response messages through the **OrderResponse** method.</span></span>  
  
4. <span data-ttu-id="6803e-149">OrderProcess.svc ファイルを確認します。</span><span class="sxs-lookup"><span data-stu-id="6803e-149">Review the OrderProcess.svc file.</span></span> <span data-ttu-id="6803e-150">このファイルは 1 行だけで、クライアント アプリケーション用のサービスをアクティブ化するように IIS に指示します。</span><span class="sxs-lookup"><span data-stu-id="6803e-150">It contains only one line which is used to tell IIS to activate the service for a client application.</span></span> <span data-ttu-id="6803e-151"><strong>@ServiceHost</strong>サービスをホストするために使用する属性が内の拡張ポイント、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]プログラミング モデル。</span><span class="sxs-lookup"><span data-stu-id="6803e-151">The <strong>@ServiceHost</strong> attribute used to host the service is a point of extensibility within the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] programming model.</span></span> <span data-ttu-id="6803e-152">ファクトリ パターンを使用して**ServiceHostFactory**のインスタンスを作成する**ServiceHost**のインスタンスと、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]受信要求を処理するサービス。</span><span class="sxs-lookup"><span data-stu-id="6803e-152">A factory pattern uses **ServiceHostFactory** to create an instance of **ServiceHost** with an instance of the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service to handle incoming requests.</span></span> <span data-ttu-id="6803e-153">このインスタンスのインスタンス化がに基づいて、 **ServiceBehaviorAttribute.ConcurrencyMode**プロパティで、サービスが 1 つのスレッドでは、複数のスレッド、または再入可能呼び出しをサポートするかどうかを決定します。</span><span class="sxs-lookup"><span data-stu-id="6803e-153">Instantiation of this instance is based upon the **ServiceBehaviorAttribute.ConcurrencyMode** property, which determines whether a service supports one thread, multiple threads, or reentrant calls.</span></span> <span data-ttu-id="6803e-154">インスタンス化がによっても決定されます、 **ServiceBehavior.InstanceMode**プロパティは、1 つのインスタンスを作成する場合の呼び出しごと (ステートレス)、1 つだけのインスタンスはすべての呼び出し元 (シングルトン) になる場合、または場合を決定する 1 つのインスタンスセッション (ステートフル) ごとに作成されます。</span><span class="sxs-lookup"><span data-stu-id="6803e-154">Instantiation is also determined by the **ServiceBehavior.InstanceMode** property, which determines if a only one instance will serve all callers (singleton), if one instance will be created per call (stateless), or if one instance will be created for each session (stateful).</span></span>  
  
   ```  
   <%@ServiceHost language=c# Debug="true" Service="Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWcfServiceConsuming.OrderProcessServiceType" %>  
   ```  
  
5. <span data-ttu-id="6803e-155">ソリューション エクスプ ローラーで、Visual Studio で開きます**Web.config**を確認します。</span><span class="sxs-lookup"><span data-stu-id="6803e-155">In Visual Studio, in Solution Explorer, open **Web.config** to review.</span></span> <span data-ttu-id="6803e-156">IIS でホストされるときは、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスは、コンソール アプリケーションでホストされるときの app.config ファイルではなく、Web.config ファイルを使用して構成されます。</span><span class="sxs-lookup"><span data-stu-id="6803e-156">When hosted in IIS, a [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service is configured using a Web.config file instead of an app.config file as when hosted in a console application.</span></span>  
  
   -   <span data-ttu-id="6803e-157">確認、 **httpGetEnabled**の属性、 \< **serviceMetaData** \>要素に設定されて`true`ように、 **BizTalk WCF サービス使用ウィザード**サービスのメタデータを使用することができます。</span><span class="sxs-lookup"><span data-stu-id="6803e-157">Make sure that the **httpGetEnabled** attribute of the \<**serviceMetaData**\> element is set to `true` so that the **BizTalk WCF Service Consuming Wizard** can consume the metadata for the service.</span></span>  
  
   -   <span data-ttu-id="6803e-158">確認、**モード**の属性、 \<**セキュリティ**\>要素に設定されて**None**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-158">Make sure that the **mode** attribute of the \<**security**\> element is set to **None**.</span></span> <span data-ttu-id="6803e-159">このチュートリアルを使用するため、 **None**セキュリティ モードでは、Web のこのサービスをホスト アプリケーションは、匿名アクセスを許可するように構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="6803e-159">Because this walkthrough uses the **None** security mode, the Web application hosting this service must be configured to allow anonymous access.</span></span>  
  
6. <span data-ttu-id="6803e-160">**Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWcfServiceConsuming**アセンブリを GAC にインストールする必要があります、展開プロセスを完了する厳密な名前キー ファイルは必要があります。</span><span class="sxs-lookup"><span data-stu-id="6803e-160">Because the **Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWcfServiceConsuming** assembly must be installed in the GAC, it will need a strong name key file to complete the deployment process.</span></span> <span data-ttu-id="6803e-161">右クリックし、 **BasicHttpWcfServiceConsuming**プロジェクトをクリックして**プロパティ**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-161">Right-click the **BasicHttpWcfServiceConsuming** project, and then click **Properties**.</span></span> <span data-ttu-id="6803e-162">**プロパティ**] ページで [**署名**を選択し、**アセンブリに署名**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-162">On the **Properties** page, click **Signing**, and select **Sign the assembly**.</span></span> <span data-ttu-id="6803e-163">下向きの矢印をクリックして、**厳密な名前キー ファイルを選択して**ドロップダウン リストでは、 をクリックして**\<新規\>**、入力と`keyfile.snk`で、**キー ファイル名**テキスト ボックス。</span><span class="sxs-lookup"><span data-stu-id="6803e-163">Click the down arrow in the **Choose a strong name key file** drop-down list, click **\<New\>**, and enter `keyfile.snk` in the **key file name** textbox.</span></span>  <span data-ttu-id="6803e-164">オフに**キーファイルをパスワードで保護する**、順にクリックします**OK**。</span><span class="sxs-lookup"><span data-stu-id="6803e-164">Uncheck **Protect my key file with a password**, and then click **OK**.</span></span>  
  
7. <span data-ttu-id="6803e-165">ソリューション エクスプ ローラーで右クリック**BasicHttpWcfServiceConsuming**、 をクリックし、**リビルド**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-165">In Solution Explorer, right-click **BasicHttpWcfServiceConsuming**, and then click **Rebuild**.</span></span>  
  
8. <span data-ttu-id="6803e-166">内容をコピーして Windows Explorer を使用して**C:\WCFBasicHttpSendAdapter\BasicHttpWCFServiceConsuming**を**C:\InetPub\wwwroot**フォルダー。</span><span class="sxs-lookup"><span data-stu-id="6803e-166">Using Windows Explorer, copy the contents of **C:\WCFBasicHttpSendAdapter\BasicHttpWCFServiceConsuming** to the **C:\InetPub\wwwroot** folder.</span></span>  
  
9. <span data-ttu-id="6803e-167">次の手順に従い、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスをホストする Web アプリケーションを構成します。</span><span class="sxs-lookup"><span data-stu-id="6803e-167">Configure the Web application to host the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service as follows:</span></span>  
  
   1. <span data-ttu-id="6803e-168">クリックして**開始**、 をポイント**管理者ツール**、順にクリックします**インターネット インフォメーション サービス (IIS) マネージャー**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-168">Click **Start**, point to **Administrator Tools**, and then click **Internet Information Services (IIS) Manager**.</span></span>  
  
   2. <span data-ttu-id="6803e-169">このサービスが実行されるアプリケーション プールを作成します。</span><span class="sxs-lookup"><span data-stu-id="6803e-169">Create an application pool within which this service will run.</span></span> <span data-ttu-id="6803e-170">右クリックして**アプリケーション プール**、 をクリックして**アプリケーション プールの追加.**、アプリケーション プールの名前を入力し、 **OK**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-170">Right-click **Application Pools**, click **Add Application Pool…**, enter a name for the application pool, and then click **OK**.</span></span>  
  
   3. <span data-ttu-id="6803e-171">展開**アプリケーション プール**作成したアプリケーション プールを右クリックし、**詳細設定**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-171">Expand **Application Pools**, right-click the application pool you just created, and then select **Advanced Settings**.</span></span> <span data-ttu-id="6803e-172">**プロセス モデル**セクションで、これにアクセスするアカウントを入力、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]データベースで、 **Identity**フィールド。</span><span class="sxs-lookup"><span data-stu-id="6803e-172">Under **Process Model** section, enter the account which has access to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases under the **Identity** field.</span></span>  
  
   4. <span data-ttu-id="6803e-173">展開**サイト**、展開**既定の Web サイト**を右クリックして**BasicHttpWCFServiceConsuming**、 をクリックし、 **アプリケーションへの変換**この Web アプリケーションを作成する[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービス。</span><span class="sxs-lookup"><span data-stu-id="6803e-173">Expand **Sites**, expand **Default Web Site**, right-click **BasicHttpWCFServiceConsuming**, and then click **Convert to Application** to create a Web application for this [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
   5. <span data-ttu-id="6803e-174">**アプリケーションへの変換**ダイアログ ボックスで、をクリックして**選択**を以前に作成したアプリケーション プールを選択し、をクリックし、 **[ok]**。</span><span class="sxs-lookup"><span data-stu-id="6803e-174">In the **Convert to Application** dialog box, click **Select** to select the application pool created earlier, and then click **OK**.</span></span>  
  
   6. <span data-ttu-id="6803e-175">機能ビューで、クリックして、**認証**アイコンいることを確認し、**匿名認証**オプションは**有効になっている**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-175">In Features View, click the **Authentication** icon and ensure that the **Anonymous Authentication** option is **enabled**.</span></span> <span data-ttu-id="6803e-176">これはサポート[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]を使用したサービス、 **None**セキュリティ モード。</span><span class="sxs-lookup"><span data-stu-id="6803e-176">This supports [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] services with the **None** security mode.</span></span>  
  
10. <span data-ttu-id="6803e-177">次の手順に従い、公開した [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスをテストします。</span><span class="sxs-lookup"><span data-stu-id="6803e-177">Test the published [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service as follows:</span></span>  
  
    1. <span data-ttu-id="6803e-178">IIS マネージャーで、展開**Websites**、順に展開**BasicHttpWCFServiceConsuming**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-178">In IIS Manager, expand **Web Sites**, and then expand **BasicHttpWCFServiceConsuming**.</span></span>  
  
    2. <span data-ttu-id="6803e-179">IIS マネージャーで、右側のウィンドウで右クリックして**OrderProcess.svc**、 をクリックし、**参照**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-179">In IIS Manager, in the right pane, right-click **OrderProcess.svc**, and then click **Browse**.</span></span> <span data-ttu-id="6803e-180">表示する Internet Explorer が開きます、 **OrderProcessServiceType Service** 、実行が正常に作成を示すページ[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービス。</span><span class="sxs-lookup"><span data-stu-id="6803e-180">This opens Internet Explorer to display the **OrderProcessServiceType Service** page that indicates you have successfully created a running [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="6803e-181">このページには、完全な WSDL アドレスも含まれます。サービス メタデータ ツール (svcutil.exe) で、このアドレスをコピーして使用することで、サービスのクライアント アプリケーションを開発するために使用できるプロキシ コードおよび構成ファイルを作成できます。</span><span class="sxs-lookup"><span data-stu-id="6803e-181">The page also includes a full WSDL address that you can copy and use with the Service Metadata Tool (svcutil.exe) to create proxy code and a configuration file that can be used to develop a client application for the service.</span></span>  
  
    3. <span data-ttu-id="6803e-182">完全な WSDL アドレスをシステム クリップボードにコピーします。</span><span class="sxs-lookup"><span data-stu-id="6803e-182">Copy the full WSDL address to the system Clipboard.</span></span> <span data-ttu-id="6803e-183">コピーしないでください、 **"svcutil.exe"** 一部。 **http://localhost/BasicHttpWcfServiceConsuming/OrderProcess.svc?wsdl**</span><span class="sxs-lookup"><span data-stu-id="6803e-183">Do not copy the **“svcutil.exe”** part: **http://localhost/BasicHttpWcfServiceConsuming/OrderProcess.svc?wsdl**</span></span>  
  
## <a name="add-the-schemas-and-types-for-the-wcf-basichttp-adapter-to-the-sample-biztalk-application"></a><span data-ttu-id="6803e-184">サンプル BizTalk アプリケーションに、スキーマと Wcf-basichttp アダプターの種類を追加します。</span><span class="sxs-lookup"><span data-stu-id="6803e-184">Add the schemas and types for the WCF-BasicHttp adapter to the sample BizTalk application</span></span>  
  
1. <span data-ttu-id="6803e-185">アダプターは [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスを呼び出すので、メタデータを使用してそのサービスに対してその呼び出しを実行する方法について、スキーマおよび型の情報を必要とします。</span><span class="sxs-lookup"><span data-stu-id="6803e-185">Since the adapter will call the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service it needs information from schemas and types about how to make that call to that service using the metadata.</span></span> <span data-ttu-id="6803e-186">**[Biztalkapp]** を使用するアイテムを提供します、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービス。</span><span class="sxs-lookup"><span data-stu-id="6803e-186">**BizTalkApp** provides the artifacts to consume the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="6803e-187">ソリューション エクスプ ローラーで、Visual Studio で右クリック**biztalkapp**、 をクリックして**追加**、 をクリックし、**生成した項目の追加**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-187">In Visual Studio, in Solution Explorer, right-click **BizTalkApp**, click **Add**, and then click **Add Generated Items**.</span></span>  
  
2. <span data-ttu-id="6803e-188">**生成した項目の追加** ダイアログ ボックスで、**テンプレート**セクションで、 **Consume WCF サービス**、 をクリックし、**追加**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-188">In the **Add Generated Items** dialog box, in the **Templates** section, select **Consume WCF Service**, and then click **Add**.</span></span>  
  
3. <span data-ttu-id="6803e-189">**BizTalk WCF サービス使用ウィザードへようこそ**] ページで [**次**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-189">On the **Welcome to the BizTalk WCF Service Consuming Wizard** page, click **Next**.</span></span> <span data-ttu-id="6803e-190">このウィザードは、メタデータを読み取り、スキーマと型を作成します。</span><span class="sxs-lookup"><span data-stu-id="6803e-190">This wizard will read the metadata and create schemas and types.</span></span>  
  
4. <span data-ttu-id="6803e-191">**メタデータ ソース**] ページで、[、 **Metadata Exchange (MEX) エンドポイント** 、前の手順でクリップボードにコピーしたURLからメタデータを使用するオプション**次**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-191">On the **Metadata source** page, select the **Metadata Exchange (MEX) endpoint** option to consume metadata from the URL that you copied to the Clipboard in the previous procedure, and then click **Next**.</span></span>  
  
5. <span data-ttu-id="6803e-192">**メタデータ エンドポイント** ページで、前の手順でコピーした完全な WSDL アドレスを貼り付けます、**メタデータ アドレス**ドロップダウン リスト、およびクリック**取得**を取得するにはサンプルのメタデータ ドキュメント[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービス。</span><span class="sxs-lookup"><span data-stu-id="6803e-192">On the **Metadata Endpoint** page, paste the full WSDL address that you copied in the previous procedure to the **Metadata Address** drop-down list, and then click **Get** to get the metadata document for the sample [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="6803e-193">により、メタデータの取得、**次**ボタンをクリックします。</span><span class="sxs-lookup"><span data-stu-id="6803e-193">Obtaining the metadata enables the **Next** button.</span></span> <span data-ttu-id="6803e-194">**[次へ]** をクリックして次に進みます。</span><span class="sxs-lookup"><span data-stu-id="6803e-194">Click **Next** to continue.</span></span>  
  
6. <span data-ttu-id="6803e-195">**WCF サービス メタデータの概要のインポート**ページで、設定を確認します。</span><span class="sxs-lookup"><span data-stu-id="6803e-195">On the **Import WCF Service Metadata Summary** page, review your settings.</span></span> <span data-ttu-id="6803e-196">このダイアログ ボックスには、インポート対象のメタデータの名前空間、XSD、および WSDL の概要が表示されます。</span><span class="sxs-lookup"><span data-stu-id="6803e-196">This dialog box shows the namespace, XSD, and WSDL summaries of the metadata to be imported.</span></span> <span data-ttu-id="6803e-197">また、インポート処理中にオーケストレーション (.odx)、バインド (.xml)、およびスキーマ (.xsd) ファイルが書き込まれる場所も表示されます。</span><span class="sxs-lookup"><span data-stu-id="6803e-197">It also shows where orchestration (.odx), bindings (.xml), and schema (.xsd) files will be written during the import process.</span></span> <span data-ttu-id="6803e-198">クリックして**インポート**BizTalk アイテムと、サンプルを使用するために使用される型を作成する[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービス。</span><span class="sxs-lookup"><span data-stu-id="6803e-198">Click **Import** to create the BizTalk artifacts and types to be used for consuming the sample [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
7. <span data-ttu-id="6803e-199">**BizTalk WCF サービス使用ウィザードの完了**] ページで [**完了**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-199">On the **Completing the BizTalk WCF Service Consuming Wizard** page, click **Finish**.</span></span>  
  
8. <span data-ttu-id="6803e-200">ソリューション エクスプ ローラーで、Visual Studio で、 **BizTalk WCF サービス使用ウィザード**次のファイルが生成されます。</span><span class="sxs-lookup"><span data-stu-id="6803e-200">In Visual Studio, in Solution Explorer, the **BizTalk WCF Service Consuming Wizard** generates the following files:</span></span>  
  
   - <span data-ttu-id="6803e-201">オーケストレーション ファイル**OrderProcessServiceType.odx**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-201">An orchestration file **OrderProcessServiceType.odx**.</span></span> <span data-ttu-id="6803e-202">このオーケストレーションにはワークフロー ステージはありません。</span><span class="sxs-lookup"><span data-stu-id="6803e-202">There are no workflow stages in this orchestration.</span></span> <span data-ttu-id="6803e-203">ただし、オーケストレーションに追加し、論理ポートにバインドして、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスを使用できます。</span><span class="sxs-lookup"><span data-stu-id="6803e-203">However, you could add to it and bind it to logical ports to consume the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="6803e-204">オーケストレーションには、このサンプルで使用されるポートの種類やマルチパート メッセージの種類などの BizTalk の重要な型が含まれます。</span><span class="sxs-lookup"><span data-stu-id="6803e-204">It does contain the important BizTalk types such as port types and multipart message types, which are used in this sample.</span></span> <span data-ttu-id="6803e-205">この情報を表示するには、ダブルクリック、 **OrderProcessServiceType.odx**オーケストレーションします。</span><span class="sxs-lookup"><span data-stu-id="6803e-205">To view this information, double-click the **OrderProcessServiceType.odx** orchestration.</span></span> <span data-ttu-id="6803e-206">をクリックして**ビュー**、 をクリックして**その他の Windows**、 をクリック**オーケストレーション**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-206">Click **View**, click **Other Windows**, and click **Orchestration View**.</span></span> <span data-ttu-id="6803e-207">展開**型**、展開**ポートの種類**、順に展開**IOrderProcess**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-207">Expand **Types**, expand **Port Types**, and then expand **IOrderProcess**.</span></span> <span data-ttu-id="6803e-208">表示されます、**送信**メソッド。</span><span class="sxs-lookup"><span data-stu-id="6803e-208">You will see the **Submit** method.</span></span> <span data-ttu-id="6803e-209">そのメソッドを展開して表示されます、 **OrderRequest**と**OrderResponse**ポートの種類。</span><span class="sxs-lookup"><span data-stu-id="6803e-209">Expand that method and you will see the **OrderRequest** and **OrderResponse** port types.</span></span> <span data-ttu-id="6803e-210">各ポートの種類およびビューをクリックします。 その**説明**フィールド入力と出力メッセージのプロパティ ブラウザーで、各種の WSDL を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6803e-210">Click each port type and view their **Description** fields in the property browser and see the different WSDL input and output messages.</span></span> <span data-ttu-id="6803e-211">クリックして**マルチパート メッセージの種類**を表示し、 **OrderRequest**と**OrderResponse**マルチパート メッセージの種類。</span><span class="sxs-lookup"><span data-stu-id="6803e-211">Click **Multi-Part Message Types** and view the **OrderRequest** and **OrderResponse** multi-part message types.</span></span> <span data-ttu-id="6803e-212">をクリックして、**説明**フィールドとビューの WDSL メッセージの各メッセージの種類名。</span><span class="sxs-lookup"><span data-stu-id="6803e-212">Click their **Description** fields and view the WDSL message names for each message type.</span></span>  
  
   - <span data-ttu-id="6803e-213">2 つのスキーマ ファイルが生成されます。</span><span class="sxs-lookup"><span data-stu-id="6803e-213">Two schema files are generated.</span></span> <span data-ttu-id="6803e-214">最初のスキーマ ファイル (**OrderProcessServiceType_biztalk_WCF_basichttpsendadapter_basichttpWCFserviceconsuming.xsd**) を定義するメッセージの種類、サンプル[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービスで使用します。</span><span class="sxs-lookup"><span data-stu-id="6803e-214">The first schema file (**OrderProcessServiceType_biztalk_WCF_basichttpsendadapter_basichttpWCFserviceconsuming.xsd**) defines the message types that the sample [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service uses.</span></span> <span data-ttu-id="6803e-215">使用して、 **OrderID**両方でフィールド**OrderRequest**と**OrderResponse**呼び出し。</span><span class="sxs-lookup"><span data-stu-id="6803e-215">It uses the **OrderID** field in both **OrderRequest** and **OrderResponse** calls.</span></span>  
  
   - <span data-ttu-id="6803e-216">2 番目のスキーマ ファイル (**OrderProcessServiceType_schemas_microsoft_com_2003_10_Serialization.xsd**) によってエクスポート[DataContractSerializer](http://go.microsoft.com/fwlink/?LinkId=81722)型、要素、および属性から、名前空間、 http://schemas.microsoft.com/2003/10/Serialization/ します。</span><span class="sxs-lookup"><span data-stu-id="6803e-216">The second schema file (**OrderProcessServiceType_schemas_microsoft_com_2003_10_Serialization.xsd**) is exported by [DataContractSerializer](http://go.microsoft.com/fwlink/?LinkId=81722) for the types, elements, and attributes from the namespace, http://schemas.microsoft.com/2003/10/Serialization/.</span></span>  
  
   - <span data-ttu-id="6803e-217">BizTalk アプリケーションの作成後で使用される、2 つのバインド ファイルが生成されます: **OrderProcessServiceType.BindingInfo.xml**と**OrderProcessServiceType_Custom.BindingInfo.xml**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-217">Two binding files are generated, which will be used later to create the BizTalk application: **OrderProcessServiceType.BindingInfo.xml** and **OrderProcessServiceType_Custom.BindingInfo.xml**.</span></span> <span data-ttu-id="6803e-218">通常は、非カスタム バインド ファイルを使用します。</span><span class="sxs-lookup"><span data-stu-id="6803e-218">In the general case you will typically use the non-custom binding file.</span></span> <span data-ttu-id="6803e-219">ただし、カスタム バインド要素を使用する一部の特別な状況では、カスタム バインド ファイルを使用します。</span><span class="sxs-lookup"><span data-stu-id="6803e-219">But in some rare situations where you have a custom binding element use the custom binding file.</span></span> <span data-ttu-id="6803e-220">カスタム バインド要素は、アプリケーション用の送信ポートを作成します。</span><span class="sxs-lookup"><span data-stu-id="6803e-220">The custom binding element creates send ports for the applications.</span></span> <span data-ttu-id="6803e-221">ダブルクリックして、 **OrderProcessServiceType.BindingInfo.xml**ファイルを検索、 **SendPort**定義線、およびレビューにこのバインドをインポートするときに作成される送信ポートのファイル[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="6803e-221">Double-click the **OrderProcessServiceType.BindingInfo.xml** file and search for the **SendPort** definition line, and review the send port that will be created when you import this binding file into [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]:</span></span>  
  
     ```  
     <SendPort Name="WCFSendPort_OrderProcessServiceType_ServiceEndpoint" …  >  
     ```  
  
   - <span data-ttu-id="6803e-222">[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] アダプターを使用する送信ポートは、メタデータで記述されているサンプルの [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスを使用するために、これらのファイルを使用します。</span><span class="sxs-lookup"><span data-stu-id="6803e-222">These files are used for the send port using the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] adapter to consume the sample [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service described in the metadata.</span></span>  
  
## <a name="deploy-the-sample-biztalk-solution-biztalkapp"></a><span data-ttu-id="6803e-223">サンプル BizTalk ソリューションの BizTalkApp を展開します。</span><span class="sxs-lookup"><span data-stu-id="6803e-223">Deploy the sample BizTalk solution, BizTalkApp</span></span>  
  
1. <span data-ttu-id="6803e-224">次の手順に従い、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] アプリケーションを展開します。</span><span class="sxs-lookup"><span data-stu-id="6803e-224">Deploy the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application as follows:</span></span>  
  
   1. <span data-ttu-id="6803e-225">ソリューション エクスプ ローラーで、Visual Studio で右クリック**BizTalkApp**、 をクリックし、**プロパティ**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-225">In Visual Studio, in Solution Explorer, right-click **BizTalkApp**, and then click **Properties** .</span></span>  
  
   2. <span data-ttu-id="6803e-226">**プロジェクト デザイナー**ウィンドウで、をクリックして**展開**タブをクリックし、変更、 **Server**プロパティの別のデータベース サーバーを使用する場合、 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理データベース。</span><span class="sxs-lookup"><span data-stu-id="6803e-226">In the **Project Designer** window, click **Deployment** tab, and then change the **Server** property if you use a different database server for the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Management database.</span></span> <span data-ttu-id="6803e-227">アプリケーション名を確認して**WCFBasicHttpSendAdapter**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-227">Ensure the application name is **WCFBasicHttpSendAdapter**.</span></span>  
  
   3. <span data-ttu-id="6803e-228">ソリューション エクスプ ローラーで、Visual Studio で右クリック**BizTalkApp**、順にクリックします**リビルド**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-228">In Visual Studio, in Solution Explorer, right-click **BizTalkApp**, and then click **Rebuild**.</span></span>  
  
   4. <span data-ttu-id="6803e-229">ソリューション エクスプ ローラーで、Visual Studio で右クリック**biztalkapp**、 をクリックし、**デプロイ**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-229">In Visual Studio, in Solution Explorer, right-click **BizTalkApp**, and then click **Deploy**.</span></span>  <span data-ttu-id="6803e-230">Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BizTalkApp アセンブリを GAC され、アイテムをこれにより、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]という名前のアプリケーション**WCFBasicHttpSendAdapter**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-230">This deploys the Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BizTalkApp assembly to the GAC, and the artifacts to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] application named **WCFBasicHttpSendAdapter**.</span></span>  
  
2. <span data-ttu-id="6803e-231">次の手順に従い、BizTalk アプリケーションの WCF-BasicHttp 送信ポートを構成します。</span><span class="sxs-lookup"><span data-stu-id="6803e-231">Configure a WCF-BasicHttp send port in the BizTalk application as follows:</span></span>  
  
   1. <span data-ttu-id="6803e-232">をクリックして**開始**、 をポイント**すべてのプログラム**、 をポイント[!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)]、順にクリックします**BizTalk Server 管理**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-232">Click **Start**, point to **All Programs**, point to [!INCLUDE[btsBizTalkServerStartMenuItemui](../includes/btsbiztalkserverstartmenuitemui-md.md)], and then click **BizTalk Server Administration**.</span></span>  
  
   2. <span data-ttu-id="6803e-233">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、[ **BizTalk グループ**、展開**アプリケーション**を右クリックして**WCFBasicHttpSendAdapter**を指す**インポート**、] をクリックし、**バインド**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-233">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **BizTalk Group**, expand **Applications**, right-click **WCFBasicHttpSendAdapter**, point to **Import**, and then click **Bindings**.</span></span>  
  
   3. <span data-ttu-id="6803e-234">**バインドのインポート** ダイアログ ボックスに移動して、 **C:\WCFBasicHttpSendAdapter\BizTalkApp**フォルダーで、 **OrderProcessServiceType.BindingInfo.xml**、順にクリックします**オープン**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-234">In the **Import Bindings** dialog box, go to the **C:\WCFBasicHttpSendAdapter\BizTalkApp** folder, select **OrderProcessServiceType.BindingInfo.xml**, and then click **Open**.</span></span> <span data-ttu-id="6803e-235">これはによって作成されたバインド ファイルの 1 つ、 **BizTalk WCF サービス使用ウィザード**以前。</span><span class="sxs-lookup"><span data-stu-id="6803e-235">This is one of the binding files created by the **BizTalk WCF Service Consuming Wizard** previously.</span></span> <span data-ttu-id="6803e-236">これを作成、 **WCFSendPort_OrderProcessServiceType_ServiceEndpoint**ポートを送信します。</span><span class="sxs-lookup"><span data-stu-id="6803e-236">This creates the **WCFSendPort_OrderProcessServiceType_ServiceEndpoint** send port.</span></span>  
  
   4. <span data-ttu-id="6803e-237">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、[ **WCFBasicHttpSendAdapter**、] をクリックし、**送信ポート**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-237">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WCFBasicHttpSendAdapter**, and then click **Send Ports**.</span></span>  
  
   5. <span data-ttu-id="6803e-238">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]右側のウィンドウで、管理コンソール をダブルクリックします**WCFSendPort_OrderProcessServiceType_ServiceEndpoint**、バインド ファイルをインポートすることによって作成されました。OrderProcessServiceType.BindingInfo.xml します。</span><span class="sxs-lookup"><span data-stu-id="6803e-238">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, in the right pane, double-click **WCFSendPort_OrderProcessServiceType_ServiceEndpoint**, which was created by importing the binding file OrderProcessServiceType.BindingInfo.xml.</span></span> <span data-ttu-id="6803e-239">すると、**送信ポートのプロパティ** ダイアログ ボックス。</span><span class="sxs-lookup"><span data-stu-id="6803e-239">This brings up the **Send Port Properties** dialog box.</span></span>  
  
   6. <span data-ttu-id="6803e-240">**送信ポートのプロパティ**ダイアログ ボックスで、をクリックして**構成**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-240">In the **Send Port Properties** dialog box, click **Configure**.</span></span>  
  
   7. <span data-ttu-id="6803e-241">**全般**レビューのタブ、**アドレス (uri)** フィールド **<http://localhost/BasicHttpWcfServiceConsuming/OrderProcess.svc>** します。</span><span class="sxs-lookup"><span data-stu-id="6803e-241">On the **General** tab review the **Address(URI)** field of **<http://localhost/BasicHttpWcfServiceConsuming/OrderProcess.svc>**.</span></span> <span data-ttu-id="6803e-242">これは、WCF-BasicHttp アダプターが呼び出す、IIS でホストされている [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスのアドレスです。</span><span class="sxs-lookup"><span data-stu-id="6803e-242">This is the address of the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service hosted in IIS that the WCF-BasicHttp adapter will call.</span></span>  
  
   8. <span data-ttu-id="6803e-243">内容を確認、 **SOAP アクション ヘッダー/アクション**テキスト ボックス。</span><span class="sxs-lookup"><span data-stu-id="6803e-243">Review the contents of the **SOAP Action header/Action** text box:</span></span>  
  
      ```  
      <BtsActionMapping xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">  
        <Operation Name="Submit" Action="http://Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWcfServiceConsuming/IOrderProcess/Submit" />  
      </BtsActionMapping>  
      ```  
  
       <span data-ttu-id="6803e-244">このフィールドは、送信 SOAP HTTP 要求メッセージの目的を示します。</span><span class="sxs-lookup"><span data-stu-id="6803e-244">This field indicates the intent of the outgoing SOAP HTTP request message.</span></span> <span data-ttu-id="6803e-245">ここでは、Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWcfServiceConsuming 名前空間の IOrderProcess インターフェイスで送信操作を呼び出します。</span><span class="sxs-lookup"><span data-stu-id="6803e-245">Here it is to call the Submit operation on the IOrderProcess interface from the Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWcfServiceConsuming namespace.</span></span>  
  
      > [!NOTE]
      >  <span data-ttu-id="6803e-246">バインド ファイルで、 **BizTalk WCF サービス使用ウィザード**アクション マッピング形式の使用を生成、 **StaticAction**プロパティ。</span><span class="sxs-lookup"><span data-stu-id="6803e-246">The binding file that the **BizTalk WCF Service Consuming Wizard** generates uses the action mapping format for the **StaticAction** property.</span></span> <span data-ttu-id="6803e-247">設定する必要があります、WCF 送信アダプターの WCF サービスにメッセージを送信するコンテンツ ベース ルーティングを使用する場合、 **BTS します。操作**コンテンツ ベースのルーティングに使用するフィールドとアクション マッピング形式のパイプライン コンポーネントのプロパティ。</span><span class="sxs-lookup"><span data-stu-id="6803e-247">When using content-based routing for the WCF send adapters to send messages to WCF services, you need to set the **BTS.Operation** property in pipeline components for the action mapping format as the field to be used for content-based routing.</span></span> <span data-ttu-id="6803e-248">または、コンテンツ ベースのルーティングに対しシングル アクション形式も使用できます。</span><span class="sxs-lookup"><span data-stu-id="6803e-248">Alternatively, you can use the single action format for content-based routing.</span></span> <span data-ttu-id="6803e-249">このチュートリアルでは、シングル アクション形式を使用します。</span><span class="sxs-lookup"><span data-stu-id="6803e-249">In this walkthrough, you use the single action format.</span></span> <span data-ttu-id="6803e-250">シングル アクション形式とアクション マッピング形式の詳細については、、 **Wcf-basichttp トランスポートのプロパティ ダイアログ ボックス、送信、一般的な**タブ[!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)]を参照してください。</span><span class="sxs-lookup"><span data-stu-id="6803e-250">For more information about the single action format and the action mapping format, see the **WCF-BasicHttp Transport Properties Dialog Box, Send, General** tab [!INCLUDE[ui-guidance-developers-reference](../includes/ui-guidance-developers-reference.md)].</span></span>  
  
   9. <span data-ttu-id="6803e-251">クリックして**OK**に戻るには 2 回、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソール。</span><span class="sxs-lookup"><span data-stu-id="6803e-251">Click **OK** twice to return to the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console.</span></span>  
  
3. <span data-ttu-id="6803e-252">一方向の静的受信ポートおよび FILE 受信場所を作成します。</span><span class="sxs-lookup"><span data-stu-id="6803e-252">Create a one-way static receive port and a FILE receive location.</span></span> <span data-ttu-id="6803e-253">受信ポートとは、1 つ以上の受信場所に対する論理的なコンテナーです。</span><span class="sxs-lookup"><span data-stu-id="6803e-253">A receive port is a logical container for one or more receive locations.</span></span> <span data-ttu-id="6803e-254">ファイル アダプターによって選択されたサンプル [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] メッセージをここにドロップしてから、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスに送信します。</span><span class="sxs-lookup"><span data-stu-id="6803e-254">This is where you will drop a sample [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] message that will be picked up by the File adapter, and then sent to the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
   1. <span data-ttu-id="6803e-255">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、[ **WCFBasicHttpSendAdapter**、右クリックして**受信ポート**、] をポイント**新規**、順にクリックします**一方向受信ポート**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-255">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WCFBasicHttpSendAdapter**, right-click **Receive Ports**, point to **New**, and then click **One-way Receive Port**.</span></span>  
  
   2. <span data-ttu-id="6803e-256">**受信ポートのプロパティ** ダイアログ ボックスで、**名前**テキスト ボックスに「 `WCFBasicSendAdapter.ReceivePurchaseOrder`、順にクリックします**OK**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-256">In the **Receive Port Properties** dialog box, in the **Name** text box, type `WCFBasicSendAdapter.ReceivePurchaseOrder`, and then click **OK**.</span></span>  
  
   3. <span data-ttu-id="6803e-257">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、右クリックして**WCFBasicHttpSendAdapter.ReceivePurchaseOrder**、 をポイント**新規**、順にクリックします**受信場所**.</span><span class="sxs-lookup"><span data-stu-id="6803e-257">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, right-click **WCFBasicHttpSendAdapter.ReceivePurchaseOrder**, point to **New**, and then click **Receive Location**.</span></span>  
  
   4. <span data-ttu-id="6803e-258">**受信場所のプロパティ** ダイアログ ボックスで、**名前**テキスト ボックスに「`WCFBasicSendAdapter.ReceivePurchaseOrder.FILE`します。</span><span class="sxs-lookup"><span data-stu-id="6803e-258">In the **Receive Location Properties** dialog box, in the **Name** text box, type `WCFBasicSendAdapter.ReceivePurchaseOrder.FILE`.</span></span>  
  
   5. <span data-ttu-id="6803e-259">**受信場所のプロパティ** ダイアログ ボックスで、**トランスポート**の横**型**を選択します**ファイル**ドロップダウン リストからクリックして**構成**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-259">In the **Receive Location Properties** dialog box, in the **Transport** section next to **Type**, select **FILE** from the drop-down list, and then click **Configure**.</span></span>  
  
   6. <span data-ttu-id="6803e-260">**FILE トランスポートのプロパティ** ダイアログ ボックスで、**全般** タブで、**受信フォルダー**テキスト ボックスに「 `C:\WCFBasicHttpSendAdapter\OrderRequestIn`、順にクリックします**ok**.</span><span class="sxs-lookup"><span data-stu-id="6803e-260">In the **FILE Transport Properties** dialog box, on the **General**  tab, in the **Receive folder** text box, type `C:\WCFBasicHttpSendAdapter\OrderRequestIn`, and then click **OK**.</span></span>  
  
   7. <span data-ttu-id="6803e-261">**受信場所のプロパティ**ダイアログ ボックスで、をクリックして**OK**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-261">In the **Receive Location Properties** dialog box, click **OK**.</span></span>  
  
4. <span data-ttu-id="6803e-262">前のステップで作成した FILE 受信場所から WCF-BasicHttp 送信ポートにメッセージをルーティングするフィルターを作成します。</span><span class="sxs-lookup"><span data-stu-id="6803e-262">Create a filter to route messages to the WCF-BasicHttp send port from the FILE receive location that you created in the previous step.</span></span> <span data-ttu-id="6803e-263">ポートに関連付けられたフィルターは SQL の "where" 句と同じように機能し、true と評価されるとメッセージがそのポートに送られます。</span><span class="sxs-lookup"><span data-stu-id="6803e-263">A filter associated with a port acts like a SQL “where” clause in that if it evaluates to true the message will be given to that port.</span></span>  
  
   1. <span data-ttu-id="6803e-264">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、[ **WCFBasicHttpSendAdapter**、] をクリックして**送信ポート**、し、ダブルクリック**WCFSendPort_OrderProcessServiceType_ServiceEndpoint**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-264">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WCFBasicHttpSendAdapter**, click **Send Ports**, and then double-click **WCFSendPort_OrderProcessServiceType_ServiceEndpoint**.</span></span>  
  
   2. <span data-ttu-id="6803e-265">**送信ポートのプロパティ** ダイアログ ボックスで、**フィルター**  タブで  **BTS します。ReceivePortName**で、**プロパティ**フィールドに「`WCFBasicSendAdapter.ReceivePurchaseOrder`で、**値**フィールドをクリックして**OK**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-265">In the **Send Port Properties** dialog box, on the **Filters** tab, select **BTS.ReceivePortName** in the **Property** field, type `WCFBasicSendAdapter.ReceivePurchaseOrder` in the **Value** field, and then click **OK**.</span></span> <span data-ttu-id="6803e-266">このフィルター式は、受信メッセージを WCFBasicSendAdapter.ReceivePurchaseOrder 受信ポートからこの WCF-BasicHttp 送信ポートにルーティングします。</span><span class="sxs-lookup"><span data-stu-id="6803e-266">This filter expression routes incoming messages from the WCFBasicSendAdapter.ReceivePurchaseOrder receive port to this WCF-BasicHttp send port.</span></span>  
  
5. <span data-ttu-id="6803e-267">サンプル アプリケーションの 2 つの FILE 送信ポートを作成します。</span><span class="sxs-lookup"><span data-stu-id="6803e-267">Create two FILE send ports for the sample application.</span></span> <span data-ttu-id="6803e-268">最初の送信ポートは、出力応答メッセージを [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスから FILE ポートに送信します。</span><span class="sxs-lookup"><span data-stu-id="6803e-268">The first send port sends output response messages to the FILE port from the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="6803e-269">2 番目の送信ポートは、クライアントに対して定義されている [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスから送信されるエラー メッセージを処理するために使用されます。</span><span class="sxs-lookup"><span data-stu-id="6803e-269">The second send port is used to handle fault messages sent from the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service destined for the client.</span></span>  
  
   1. <span data-ttu-id="6803e-270">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、[ **WCFBasicHttpSendAdapter**、右クリックして**送信ポート**、] をポイント**新規**、順にクリックします**静的な一方向送信ポート**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-270">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WCFBasicHttpSendAdapter**, right-click **Send Ports**, point to **New**, and then click **Static One-way Send Port**.</span></span>  
  
   2. <span data-ttu-id="6803e-271">**送信ポートのプロパティ** ダイアログ ボックスで、**名前**テキスト ボックスに「`WCFBasicSendAdapter.SendPurchaseOrder.FILE`します。</span><span class="sxs-lookup"><span data-stu-id="6803e-271">In the **Send Port Properties** dialog box, in the **Name** text box, type `WCFBasicSendAdapter.SendPurchaseOrder.FILE`.</span></span>  
  
   3. <span data-ttu-id="6803e-272">**送信ポートのプロパティ** ダイアログ ボックスで、**トランスポート**選択の種類の横にあるセクション**ファイル**クリックしてドロップダウン リストから**構成**.</span><span class="sxs-lookup"><span data-stu-id="6803e-272">In the **Send Port Properties** dialog box, in the **Transport** section next to Type, select **FILE** from the drop-down list, and then click **Configure**.</span></span>  
  
   4. <span data-ttu-id="6803e-273">**FILE トランスポートのプロパティ** ダイアログ ボックスの 、**全般** タブで、**先フォルダー**テキスト ボックスに「 `C:\WCFBasicHttpSendAdapter\OrderResponseOut`、順にクリックします**ok**.</span><span class="sxs-lookup"><span data-stu-id="6803e-273">In the **FILE Transport Properties** dialog box, on the **General** tab, in the **Destination folder** text box, type `C:\WCFBasicHttpSendAdapter\OrderResponseOut`, and then click **OK**.</span></span>  
  
   5. <span data-ttu-id="6803e-274">**送信ポートのプロパティ** ダイアログ ボックスで、**フィルター** ] タブで [ **BTS します。MessageType**で、**プロパティ**フィールドに「`http://Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWCFServiceConsuming#OrderResponse`で、**値**サンプルからの応答メッセージの種類を指定するフィールド[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービス、およびクリックして**OK**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-274">In the **Send Port Properties** dialog box, on the **Filters** tab, select **BTS.MessageType** in the **Property** field, type `http://Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWCFServiceConsuming#OrderResponse` in the **Value** field to specify the response message type from the sample [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service, and then click **OK**.</span></span> <span data-ttu-id="6803e-275">このフィルター式は、応答メッセージをサンプル [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスからこの FILE 送信ポートにルーティングします。</span><span class="sxs-lookup"><span data-stu-id="6803e-275">This filter expression routes response messages from the sample [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service to this FILE send port.</span></span> <span data-ttu-id="6803e-276">送信ポートは、フィルターのプロパティで種類を指定することにより、種類が OrderResponse のメッセージをサブスクライブします。</span><span class="sxs-lookup"><span data-stu-id="6803e-276">The send port subscribes to messages of the OrderResponse type by specifying that type in the filter property.</span></span> <span data-ttu-id="6803e-277">これは、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスからの応答メッセージのメッセージの種類です。</span><span class="sxs-lookup"><span data-stu-id="6803e-277">This is the message type of the response message from the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
   6. <span data-ttu-id="6803e-278">**送信ポートのプロパティ**ダイアログ ボックスで、をクリックして**OK**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-278">In the **Send Port Properties** dialog box, click **OK**.</span></span>  
  
   7. <span data-ttu-id="6803e-279">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、[ **WCFBasicHttpSendAdapter**、右クリックして**送信ポート**、] をポイント**新規**、順にクリックします**静的な一方向送信ポート**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-279">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WCFBasicHttpSendAdapter**, right-click **Send Ports**, point to **New**, and then click **Static One-way Send Port**.</span></span>  
  
   8. <span data-ttu-id="6803e-280">**送信ポートのプロパティ** ダイアログ ボックスで、**名前**テキスト ボックスに「`WCFAdapterErrorSend.FILE`します。</span><span class="sxs-lookup"><span data-stu-id="6803e-280">In the **Send Port Properties** dialog box, in the **Name** text box, type `WCFAdapterErrorSend.FILE`.</span></span>  
  
   9. <span data-ttu-id="6803e-281">**送信ポートのプロパティ** ダイアログ ボックスで、**トランスポート**の横**型**を選択します**ファイル**ドロップダウン リストからしクリックして**構成**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-281">In the **Send Port Properties** dialog box, in the **Transport** section next to **Type**, select **FILE** from the drop-down list, and then click **Configure**.</span></span>  
  
   10. <span data-ttu-id="6803e-282">**FILE トランスポートのプロパティ** ダイアログ ボックスの 、**全般** タブで、**先フォルダー**テキスト ボックスに「 `C:\WCFBasicHttpSendAdapter\WCFAdapterErrorOut\`、順にクリックします**ok**.</span><span class="sxs-lookup"><span data-stu-id="6803e-282">In the **FILE Transport Properties** dialog box, on the **General** tab, in the **Destination folder** text box, type `C:\WCFBasicHttpSendAdapter\WCFAdapterErrorOut\`, and then click **OK**.</span></span>  
  
   11. <span data-ttu-id="6803e-283">**送信ポートのプロパティ** ダイアログ ボックスで、**フィルター**  タブで  **WCF です。IsFault**で、**プロパティ**フィールドに「`True`で、**値**フィールドをクリックして**OK**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-283">In the **Send Port Properties** dialog box, on the **Filters** tab, select **WCF.IsFault** in the **Property** field, type `True` in the **Value** field, and then click **OK**.</span></span> <span data-ttu-id="6803e-284">アプリケーション内で、例外またはエラーをチェックで検出できる、 **WCF です。IsFault**呼び出し元に送信されるメッセージのプロパティ。</span><span class="sxs-lookup"><span data-stu-id="6803e-284">Within an application an exception or fault can be detected by checking the **WCF.IsFault** property of the message sent back to the caller.</span></span> <span data-ttu-id="6803e-285">このプロパティに設定する**True**送信されるメッセージが SOAP エラー メッセージの場合。</span><span class="sxs-lookup"><span data-stu-id="6803e-285">This property will be set to **True** if the message being sent is a SOAP fault message.</span></span> <span data-ttu-id="6803e-286">このフィルター式は、エラー メッセージをサンプル [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスからこの FILE 送信ポートにルーティングします。</span><span class="sxs-lookup"><span data-stu-id="6803e-286">This filter expression routes fault messages from the sample [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service to this FILE send port.</span></span>  
  
6. <span data-ttu-id="6803e-287">次の手順で、サンプル アプリケーションのホスト名とバインドを指定します。</span><span class="sxs-lookup"><span data-stu-id="6803e-287">Specify the host name and bindings for the sample application as follows:</span></span>  
  
    <span data-ttu-id="6803e-288">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、 **WCFBasicHttpSendAdapter**、展開**オーケストレーション**を右クリックし、 **Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BizTalkApp.OrderProcessServiceTypeClient**オーケストレーション、 をクリックして**プロパティ**、 をクリックして**バインド**設定**ホスト**に**BizTalkServerApplication**、順にクリックします**OK**構成を保存します。</span><span class="sxs-lookup"><span data-stu-id="6803e-288">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **WCFBasicHttpSendAdapter**, expand **Orchestrations**, right-click the **Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BizTalkApp.OrderProcessServiceTypeClient** orchestration, click **Properties**, click **Bindings**, set **Host** to **BizTalkServerApplication**, and then click **OK** to save the configuration.</span></span>  
  
## <a name="test-the-sample-solution-with-the-wcf-basichttp-send-adapter"></a><span data-ttu-id="6803e-289">テスト サンプル ソリューションで、Wcf-basichttp 送信アダプター</span><span class="sxs-lookup"><span data-stu-id="6803e-289">Test the sample solution with the WCF-BasicHttp send adapter</span></span>  
  
1. <span data-ttu-id="6803e-290">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、右クリック**WCFBasicHttpSendAdapter**、順にクリックします**開始**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-290">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, right-click **WCFBasicHttpSendAdapter**, and then click **Start**.</span></span>  
  
2. <span data-ttu-id="6803e-291">**開始**ダイアログ ボックスで、をクリックして**開始**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-291">In the **Start** dialog box, click **Start**.</span></span>  
  
3. <span data-ttu-id="6803e-292">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールで、**プラットフォームの設定**、展開**ホスト インスタンス**を右クリックして**BizTalkServerApplication**またはその他クリックして、ホスト インスタンスを適切な**再起動**します。</span><span class="sxs-lookup"><span data-stu-id="6803e-292">In the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration console, expand **Platform Settings**, expand **Host Instances**, right-click **BizTalkServerApplication** or another appropriate host instance, and then click **Restart**.</span></span>  
  
4. <span data-ttu-id="6803e-293">コマンド プロンプト ウィンドウで「を開く**iisreset**に IIS とその依存サービスをリサイクルし、ENTER キーを押します。</span><span class="sxs-lookup"><span data-stu-id="6803e-293">Open a command prompt, type **iisreset** to recycle IIS and its dependent services, and then press ENTER.</span></span>  
  
5. <span data-ttu-id="6803e-294">コマンド プロンプトで次のようにコピーします。 **C:\WCFBasicHttpSendAdapter\TestData\WCFBasicSendAdapter.OrderRequest.Sample.xml**を、 **C:\WCFBasicHttpSendAdapter\OrderRequestIn**フォルダー。</span><span class="sxs-lookup"><span data-stu-id="6803e-294">At the command prompt, copy **C:\WCFBasicHttpSendAdapter\TestData\WCFBasicSendAdapter.OrderRequest.Sample.xml** to the **C:\WCFBasicHttpSendAdapter\OrderRequestIn** folder.</span></span> <span data-ttu-id="6803e-295">このメッセージは、双方向にルーティング**WcfSendPort_OrderProcessServiceType_ServiceEndpoint**静的な送信請求-応答送信ポート。</span><span class="sxs-lookup"><span data-stu-id="6803e-295">This message is routed to the two-way **WcfSendPort_OrderProcessServiceType_ServiceEndpoint** static Solicit-Response send port.</span></span>  <span data-ttu-id="6803e-296">この双方向の送信側は送信ポート呼び出し**送信**メソッドを[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]IIS でホストされるサービスです。</span><span class="sxs-lookup"><span data-stu-id="6803e-296">The send side of this two-way send port calls **Submit** method on the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service hosted in IIS.</span></span> <span data-ttu-id="6803e-297">応答のポートに、結果が返されます、 **WcfSendPort_OrderProcessServiceType_ServiceEndpoint**ポートを送信します。</span><span class="sxs-lookup"><span data-stu-id="6803e-297">The result is returned to the response port of the **WcfSendPort_OrderProcessServiceType_ServiceEndpoint** send port.</span></span>  <span data-ttu-id="6803e-298">**WCFBasicSendAdapter.SendPurchaseOrder.FILE**送信ポートには、メッセージの種類がの場合にトリガーされるサブスクリプション **<http://Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWCFServiceConsuming#OrderResponse>** します。正常に処理されたメッセージを取得し、書き込むため、 **C:\WCFBasicHttpSendAdapter\OrderResponseOut**フォルダー。</span><span class="sxs-lookup"><span data-stu-id="6803e-298">The **WCFBasicSendAdapter.SendPurchaseOrder.FILE** send port has a subscription that will be triggered when the type of the message is **<http://Microsoft.Samples.BizTalk.WCF.BasicHttpSendAdapter.BasicHttpWCFServiceConsuming#OrderResponse>**.It will get the successfully processed message and write it out to the **C:\WCFBasicHttpSendAdapter\OrderResponseOut** folder.</span></span>  
  
6. <span data-ttu-id="6803e-299">チェック、 **C:\WCFBasicHttpSendAdapter\OrderResponseOut**フォルダーからの応答メッセージ、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービス。</span><span class="sxs-lookup"><span data-stu-id="6803e-299">Check the **C:\WCFBasicHttpSendAdapter\OrderResponseOut** folder for a response message from the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span>  
  
7. <span data-ttu-id="6803e-300">コマンド プロンプトで**C:\WCFBasicHttpSendAdapter\TestData\WCFBasicSendAdapter.OrderRequest.Invalid.xml**を**C:\WCFBasicHttpSendAdapter\OrderRequestIn**フォルダー。</span><span class="sxs-lookup"><span data-stu-id="6803e-300">At the command prompt, **C:\WCFBasicHttpSendAdapter\TestData\WCFBasicSendAdapter.OrderRequest.Invalid.xml** to the **C:\WCFBasicHttpSendAdapter\OrderRequestIn** folder.</span></span> <span data-ttu-id="6803e-301">このメッセージには無効な名前空間が含まれており、そのため [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] サービスはエラー メッセージを返します。</span><span class="sxs-lookup"><span data-stu-id="6803e-301">This message contains an invalid namespace so that the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service returns a fault message.</span></span>  
  
8. <span data-ttu-id="6803e-302">チェック、 **C:\WCFBasicHttpSendAdapter\WCFAdapterErrorOut**からのエラー メッセージを含む XML ファイルのフォルダー、[!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)]サービス。</span><span class="sxs-lookup"><span data-stu-id="6803e-302">Check the **C:\WCFBasicHttpSendAdapter\WCFAdapterErrorOut** folder for an XML file containing the fault message from the [!INCLUDE[nextref_btsWinCommFoundation](../includes/nextref-btswincommfoundation-md.md)] service.</span></span> <span data-ttu-id="6803e-303">見て、 \< **faultstring** \>フィールドに、無効なメッセージ本文のエラー メッセージの原因を表示します。</span><span class="sxs-lookup"><span data-stu-id="6803e-303">Look at the \<**faultstring**\> field showing the cause of the fault message to be an invalid message body.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6803e-304">参照</span><span class="sxs-lookup"><span data-stu-id="6803e-304">See Also</span></span>  
 <span data-ttu-id="6803e-305">[チュートリアル: Wcf-basichttp アダプターを使用した WCF サービスの発行](../core/walkthrough-publishing-wcf-services-with-the-wcf-basichttp-adapter.md) </span><span class="sxs-lookup"><span data-stu-id="6803e-305">[Walkthrough: Publishing WCF Services with the WCF-BasicHttp Adapter](../core/walkthrough-publishing-wcf-services-with-the-wcf-basichttp-adapter.md) </span></span>  
 <span data-ttu-id="6803e-306">[BizTalk WCF サービス使用ウィザードを使用して WCF サービスを使用する方法](../core/how-to-use-the-biztalk-wcf-service-consuming-wizard-to-consume-a-wcf-service.md) </span><span class="sxs-lookup"><span data-stu-id="6803e-306">[How to Use the BizTalk WCF Service Consuming Wizard to Consume a WCF Service](../core/how-to-use-the-biztalk-wcf-service-consuming-wizard-to-consume-a-wcf-service.md) </span></span>  
 [<span data-ttu-id="6803e-307">WCF アダプターのメッセージ本文の指定</span><span class="sxs-lookup"><span data-stu-id="6803e-307">Specifying the Message Body for the WCF Adapters</span></span>](../core/specifying-the-message-body-for-the-wcf-adapters.md)