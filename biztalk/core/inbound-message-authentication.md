---
title: 受信メッセージの認証 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- messages, authenticating
- processing, inbound messages
- messages, inbound
- processing, security
- security, messages
- inbound messages
ms.assetid: 34c06283-667d-4498-8544-dea6e87f276f
caps.latest.revision: 12
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: d3b9a7812b7466145a0861112948633dae8442a0
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65332099"
---
# <a name="inbound-message-authentication"></a><span data-ttu-id="cf4d2-102">受信メッセージの認証</span><span class="sxs-lookup"><span data-stu-id="cf4d2-102">Inbound Message Authentication</span></span>
<span data-ttu-id="cf4d2-103">BizTalk Server では、メッセージの送信者の id を検証するには、(を使用するか、証明書の情報または Windows 統合セキュリティ) メッセージの送信者を認証できます。</span><span class="sxs-lookup"><span data-stu-id="cf4d2-103">BizTalk Server can authenticate the sender of a message (either by using the certificate information or Windows integrated security) in order to validate the identity of the sender of the message.</span></span> <span data-ttu-id="cf4d2-104">セキュリティ機能を次に示します[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]ことは、受信メッセージの認証に使用することができます。</span><span class="sxs-lookup"><span data-stu-id="cf4d2-104">The following figure shows the security features in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] that you can use to authenticate inbound messages.</span></span>  
  
 <span data-ttu-id="cf4d2-105">![認証の受信メッセージのセキュリティ機能](../core/media/ebiz-plan-secoverview-auth-inbound.gif "ebiz_plan_secoverview_auth_inbound")</span><span class="sxs-lookup"><span data-stu-id="cf4d2-105">![Security features authenticating inbound messages](../core/media/ebiz-plan-secoverview-auth-inbound.gif "ebiz_plan_secoverview_auth_inbound")</span></span>  
<span data-ttu-id="cf4d2-106">BizTalk Server のセキュリティ機能は、受信メッセージの認証に使用します。</span><span class="sxs-lookup"><span data-stu-id="cf4d2-106">Security features BizTalk Server uses to authenticate inbound messages.</span></span>  
  
 <span data-ttu-id="cf4d2-107">BizTalk Server では、暗号化および署名されたメッセージを受信、送信元パーティが認識されていることを確認するには、次の手順がかかります。</span><span class="sxs-lookup"><span data-stu-id="cf4d2-107">When BizTalk Server receives an encrypted and signed message, it takes the following steps to ensure that the sending party is recognized.</span></span>  
  
1.  <span data-ttu-id="cf4d2-108">BizTalk Server の受信場所でメッセージが到着すると、受信ハンドラー、送信プロセスから送信者の Windows セキュリティ ID (SSID) を取得しようとします。</span><span class="sxs-lookup"><span data-stu-id="cf4d2-108">When a message arrives at a BizTalk Server receive location, the receive handler attempts to obtain the sender's Windows security ID (SSID) from the sending process.</span></span> <span data-ttu-id="cf4d2-109">受信場所は、リスナー、署名付きメッセージの認証が既に場合に対応する SSID をダウン ストリームを渡します。</span><span class="sxs-lookup"><span data-stu-id="cf4d2-109">The receive location passes the SSID downstream to support cases where the listener has already authenticated a signed message.</span></span> <span data-ttu-id="cf4d2-110">クライアント側の証明書の情報を取得できます (たとえば、BizTalk メッセージ キューまたは HTTP アダプター) によって、BizTalk Server の受信場所がその証明書情報を取得し、受信パイプラインで後でパーティ解決のため、一緒に渡す場合.</span><span class="sxs-lookup"><span data-stu-id="cf4d2-110">If client-side certificate information can be obtained (for example by the BizTalk Message Queuing or HTTP adapter), the BizTalk Server receive location can obtain that certificate information and pass it along for party resolution later on in the receive pipeline.</span></span> <span data-ttu-id="cf4d2-111">受信ハンドラーでは、SSID を取得できない場合は、このフィールドは空白になります。</span><span class="sxs-lookup"><span data-stu-id="cf4d2-111">If the receive handler cannot obtain the SSID, this field is left blank.</span></span>  
  
     <span data-ttu-id="cf4d2-112">受信ハンドラーは、受信パイプラインでメッセージが復号化された、デジタル署名を検証すると、およびパイプラインがパーティの解決コンポーネントを持つ場合に、パーティの解決が行わにメッセージを送信します。</span><span class="sxs-lookup"><span data-stu-id="cf4d2-112">The receive handler sends the message to the receive pipeline, where the message is decrypted, the digital signature is verified, and the party resolution takes place if the pipeline has a party resolution component.</span></span> <span data-ttu-id="cf4d2-113">送信側が受信メッセージの署名証明書を使用する場合、MIME/SMIME デコーダー コンポーネントは、アダプターから取得した証明書情報を上書きします。</span><span class="sxs-lookup"><span data-stu-id="cf4d2-113">If the sender used a signing certificate on the incoming message, then the MIME/SMIME decoder component overwrites any certificate information obtained from the adapter.</span></span>  
  
2.  <span data-ttu-id="cf4d2-114">送信者には、メッセージが暗号化されている場合、MIME/SMIME デコーダーは、ホスト インスタンス サービス アカウントの個人用証明書ストアから復号化証明書を取得し、プライベート キーを使用して、メッセージを復号化します。</span><span class="sxs-lookup"><span data-stu-id="cf4d2-114">If the sender encrypted the message, the MIME/SMIME decoder retrieves the decryption certificate from the personal certificate store for the host instance service account and uses the private key to decrypt the message.</span></span>  
  
     <span data-ttu-id="cf4d2-115">送信者には、メッセージが署名されている場合、MIME/SMIME デコーダーは、ペイロード ハッシュ署名を検証する改ざん、および証明書ストアから証明書を取得するを確認することにより、デジタル署名を認証します。</span><span class="sxs-lookup"><span data-stu-id="cf4d2-115">If the sender signed the message, the MIME/SMIME decoder authenticates the digital signature by verifying the payload hash for signs of tampering, and then retrieving the certificate from the certificate store to verify the signature.</span></span> <span data-ttu-id="cf4d2-116">署名者の公開キーがメッセージ自体にある場合、MIME/SMIME デコーダーは、証明書ストアから証明書を取得しませんが、メッセージに付属する公開キーを使用します。</span><span class="sxs-lookup"><span data-stu-id="cf4d2-116">If the public key of the signer is on the message itself, the MIME/SMIME decoder does not retrieve the certificate from the certificate store, but uses the public key that came with the message.</span></span>  
  
3.  <span data-ttu-id="cf4d2-117">通常、パイプラインの最終処理の手順では、パーティの解決です。</span><span class="sxs-lookup"><span data-stu-id="cf4d2-117">Usually, the final processing step in the pipeline is party resolution.</span></span> <span data-ttu-id="cf4d2-118">BizTalk エクスプ ローラーまたは BizTalk Server 管理コンソールを使用してパーティを作成することができます、パーティに署名証明書をマップ パーティ エイリアスを作成または。</span><span class="sxs-lookup"><span data-stu-id="cf4d2-118">Using BizTalk Explorer or BizTalk Server Administration console, you can create parties, map the party to a signing certificate, or create party aliases.</span></span> <span data-ttu-id="cf4d2-119">BizTalk エクスプ ローラーで定義するすべてのパーティでは、一意なパーティ id (PID) があります。</span><span class="sxs-lookup"><span data-stu-id="cf4d2-119">All parties you define in BizTalk Explorer have a unique party identifier (PID).</span></span> <span data-ttu-id="cf4d2-120">BizTalk Server では、PID を取得し、メッセージ コンテキストに配置します。</span><span class="sxs-lookup"><span data-stu-id="cf4d2-120">BizTalk Server obtains the PID and places it in the message context.</span></span> <span data-ttu-id="cf4d2-121">BizTalk は、次のメソッドのいずれかによって、PID を取得します。</span><span class="sxs-lookup"><span data-stu-id="cf4d2-121">BizTalk obtains the PID by one of the following methods:</span></span>  
  
    1.  <span data-ttu-id="cf4d2-122">送信者がメッセージに署名または受信ハンドラーは、クライアント側の証明書を取得することが証明書を使用してパーティを解決するオプションを選択した場合は、BizTalk は、対応する署名またはクライアント側の証明書を参照する場合、PID です。</span><span class="sxs-lookup"><span data-stu-id="cf4d2-122">If the sender signed the message or if the receive handler was able to obtain a client-side certificate, and you selected the option to resolve the party by using the certificate, then BizTalk uses the corresponding signature or client-side certificate to lookup the PID.</span></span> <span data-ttu-id="cf4d2-123">メッセージの受信を開始する前に、プロパティとして、証明書で、パーティを構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="cf4d2-123">You must configure the party with the certificate as a property before you start receiving its messages.</span></span> <span data-ttu-id="cf4d2-124">詳細については、パーティを構成するを参照してください方法[パーティの解決用の証明書を使用して](../core/using-certificates-for-party-resolution.md)。</span><span class="sxs-lookup"><span data-stu-id="cf4d2-124">For more information how to configure the party, see [Using Certificates for Party Resolution](../core/using-certificates-for-party-resolution.md).</span></span>  
  
    2.  <span data-ttu-id="cf4d2-125">送信者がメッセージで、署名証明書を使用しなかった、送信者のセキュリティ ID (SSID) を使用してパーティを解決するオプションを選択する場合は、パーティの解決コンポーネントは、PID を検索する SSID を使用します。</span><span class="sxs-lookup"><span data-stu-id="cf4d2-125">If the sender did not use a signing certificate on the message, and you have selected the option to resolve the party by using the Sender's Security ID (SSID), the party resolution component uses the SSID to look up the PID.</span></span> <span data-ttu-id="cf4d2-126">メッセージの受信を開始する前に、SSID をエイリアスとして使用するパーティを構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="cf4d2-126">You must configure the party to use the SSID as an alias before you start receiving its messages.</span></span> <span data-ttu-id="cf4d2-127">パーティの解決コンポーネントの詳細については、次を参照してください。[パーティの解決パイプライン コンポーネント](../core/party-resolution-pipeline-component.md)します。</span><span class="sxs-lookup"><span data-stu-id="cf4d2-127">For more information about the party resolution component, see [Party Resolution Pipeline Component](../core/party-resolution-pipeline-component.md).</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="cf4d2-128">BizTalk Server では、パーティのエイリアスを定義するときに実際の Windows SID ではなく、アカウント名を使用します。</span><span class="sxs-lookup"><span data-stu-id="cf4d2-128">BizTalk Server uses the account name rather than the actual Windows SID when defining aliases for parties.</span></span>  
  
    3.  <span data-ttu-id="cf4d2-129">パーティを解決できない場合、パイプラインは、PID をゲストに設定します。</span><span class="sxs-lookup"><span data-stu-id="cf4d2-129">If the party cannot be resolved, the pipeline sets the PID to Guest.</span></span>  
  
4.  <span data-ttu-id="cf4d2-130">受信ポートを認証必須であり、BizTalk Server で有効な PID を取得し、既知のパーティに解決されるようにマークした場合、メッセージはメッセージ ボックス データベースにキューに格納します。</span><span class="sxs-lookup"><span data-stu-id="cf4d2-130">If you marked the receive port as Authentication Required, and BizTalk Server obtained a valid PID and resolved it to a known party, the message is then queued to the MessageBox database.</span></span> <span data-ttu-id="cf4d2-131">SSID が空、または PID が guest ID、BizTalk Server は、メッセージを破棄するか、または (Authentication Required プロパティの構成) によっては保留キューに送信します。</span><span class="sxs-lookup"><span data-stu-id="cf4d2-131">If the SSID is blank or the PID is a guest ID, BizTalk Server either discards the message or sends it to the suspended queue (depending on your configuration of the Authentication Required property).</span></span> <span data-ttu-id="cf4d2-132">不明なパーティから大量のメッセージの受信の悪影響を最小限にとどめる方法として Authentication Required プロパティを使用できます。</span><span class="sxs-lookup"><span data-stu-id="cf4d2-132">You can use the Authentication Required property as a way of minimizing the negative effect of receiving a large quantity of messages from an unknown party.</span></span> <span data-ttu-id="cf4d2-133">受信ポートの認証オプションの詳細については、次を参照してください。[受信ポートの認証オプションを構成する方法](../core/how-to-configure-authentication-options-for-a-receive-port.md)します。</span><span class="sxs-lookup"><span data-stu-id="cf4d2-133">For more information about the authentication options for receive ports, see [How to Configure Authentication Options for a Receive Port](../core/how-to-configure-authentication-options-for-a-receive-port.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="cf4d2-134">参照</span><span class="sxs-lookup"><span data-stu-id="cf4d2-134">See Also</span></span>  
 <span data-ttu-id="cf4d2-135">[プロセス間のメッセージの認証](../core/authentication-of-messages-between-processes.md) </span><span class="sxs-lookup"><span data-stu-id="cf4d2-135">[Authentication of Messages Between Processes](../core/authentication-of-messages-between-processes.md) </span></span>  
 <span data-ttu-id="cf4d2-136">[送信メッセージの保護](../core/outbound-message-protection.md) </span><span class="sxs-lookup"><span data-stu-id="cf4d2-136">[Outbound Message Protection](../core/outbound-message-protection.md) </span></span>  
 <span data-ttu-id="cf4d2-137">[メッセージの送信者の認証](../core/authenticating-the-sender-of-a-message.md) </span><span class="sxs-lookup"><span data-stu-id="cf4d2-137">[Authenticating the Sender of a Message](../core/authenticating-the-sender-of-a-message.md) </span></span>  
 <span data-ttu-id="cf4d2-138">[メッセージの受信者の承認](../core/authorizing-the-receiver-of-a-message.md) </span><span class="sxs-lookup"><span data-stu-id="cf4d2-138">[Authorizing the Receiver of a Message](../core/authorizing-the-receiver-of-a-message.md) </span></span>  
 <span data-ttu-id="cf4d2-139">[署名付きメッセージを受信するための BizTalk Server を構成する方法](../core/how-to-configure-biztalk-server-for-receiving-signed-messages.md) </span><span class="sxs-lookup"><span data-stu-id="cf4d2-139">[How to Configure BizTalk Server for Receiving Signed Messages](../core/how-to-configure-biztalk-server-for-receiving-signed-messages.md) </span></span>  
 [<span data-ttu-id="cf4d2-140">BizTalk Server で署名付きメッセージに使用する証明書</span><span class="sxs-lookup"><span data-stu-id="cf4d2-140">Certificates that BizTalk Server Uses for Signed Messages</span></span>](../core/certificates-that-biztalk-server-uses-for-signed-messages.md)