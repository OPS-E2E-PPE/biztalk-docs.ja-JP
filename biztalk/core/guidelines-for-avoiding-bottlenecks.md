---
title: ボトルネックを回避するためのガイドライン |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 640ab399-b22d-4f71-b41d-ea8d778e064a
caps.latest.revision: 9
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: db480df2d47fdc03b1719ecfb17fdbb8f23eea41
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65387566"
---
# <a name="guidelines-for-avoiding-bottlenecks"></a><span data-ttu-id="fed94-102">ボトルネックを回避するためのガイドライン</span><span class="sxs-lookup"><span data-stu-id="fed94-102">Guidelines for Avoiding Bottlenecks</span></span>
<span data-ttu-id="fed94-103">既定の設定中に[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]最適なパフォーマンスを提供する多くのハードウェアおよびソフトウェア構成の一部のシナリオである可能性があります設定または展開の構成を変更すると役立ちます。</span><span class="sxs-lookup"><span data-stu-id="fed94-103">While the default settings in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] provide optimal performance for many hardware and software configurations, in some scenarios it may be beneficial to modify the settings or deployment configuration.</span></span> <span data-ttu-id="fed94-104">構成するときに[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]、次のパフォーマンス ガイドラインを検討してください。</span><span class="sxs-lookup"><span data-stu-id="fed94-104">When configuring [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], consider the following performance guidelines:</span></span>  

-   <span data-ttu-id="fed94-105">リソースの競合を防ぐためには、受信、オーケストレーション、および別のホストに送信を分離します。</span><span class="sxs-lookup"><span data-stu-id="fed94-105">To prevent resource contention, isolate receiving, orchestration, and sending onto separate hosts.</span></span> <span data-ttu-id="fed94-106">競合を最小限に抑えるさらに、他のホストから追跡サービスを分離します。</span><span class="sxs-lookup"><span data-stu-id="fed94-106">To further minimize contention, isolate the tracking service from other hosts.</span></span>  

-   <span data-ttu-id="fed94-107">BizTalk Server で CPU の処理がボトルネックになっている場合は、cpu を追加または高速の Cpu にアップグレードしてスケール アップは、BizTalk Server。</span><span class="sxs-lookup"><span data-stu-id="fed94-107">If CPU processing on the BizTalk Server is the bottleneck, scale up BizTalk Server by including additional CPUs or upgrading to faster CPUs.</span></span>  

## <a name="sql-server-guidelines"></a><span data-ttu-id="fed94-108">SQL Server のガイドライン</span><span class="sxs-lookup"><span data-stu-id="fed94-108">SQL Server Guidelines</span></span>  
 <span data-ttu-id="fed94-109">Microsoft SQL Server を構成するときに、次のパフォーマンス ガイドラインを検討してください[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="fed94-109">Consider the following performance guidelines when configuring Microsoft SQL Server with [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]:</span></span>  

- [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="fed94-110">データベースは、可能であれば、専用の SQL Server インスタンス上で実行するように構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="fed94-110">databases should be configured to run on a dedicated SQL Server instance whenever possible.</span></span> [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="fed94-111">データベース中心のアプリケーション、その分離、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]コンピューターおよび格納する SQL Server コンピューター、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]データベースのパフォーマンスが向上し、運用環境でのベスト プラクティスを考慮する[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]環境。</span><span class="sxs-lookup"><span data-stu-id="fed94-111">is a databases intensive application, so separation of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] computer(s) and the SQL Server computer(s) that house the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] databases will improve performance and should be considered a best practice in a production [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] environment.</span></span>  

- <span data-ttu-id="fed94-112">可能であれば、SQL Server で高速なディスク サブシステムを使用します。</span><span class="sxs-lookup"><span data-stu-id="fed94-112">Whenever possible, use a fast disk subsystem with SQL Server.</span></span> <span data-ttu-id="fed94-113">バックアップの電源装置と (raid 5/10) するときに、独立したディスクの種類 5 の冗長な配列または記憶域エリア ネットワーク (SAN) を使用します。</span><span class="sxs-lookup"><span data-stu-id="fed94-113">Use a redundant array of independent disks type 5 (RAID5/10) or a storage area network (SAN) with backup power supply.</span></span>  

- <span data-ttu-id="fed94-114">SQL Server のディザスター リカバリー プロセスを使用して、データベースを定期的にバックアップします。</span><span class="sxs-lookup"><span data-stu-id="fed94-114">Use the SQL Server disaster recovery process to back up your databases regularly.</span></span> <span data-ttu-id="fed94-115">BizTalk Server サービスは、SQL Server の接続障害から自動的に復旧します。</span><span class="sxs-lookup"><span data-stu-id="fed94-115">The BizTalk Server service automatically recovers from SQL Server connection malfunctions.</span></span>  

- <span data-ttu-id="fed94-116">BizTalk 追跡データベース (BizTalkDTADb) から別のサーバーには、各メッセージ ボックスを分離します。</span><span class="sxs-lookup"><span data-stu-id="fed94-116">Isolate each message box onto a separate server from the BizTalk Tracking database (BizTalkDTADb).</span></span> <span data-ttu-id="fed94-117">小規模な展開の CPU リソースが使用可能なメッセージ ボックスの上に、BizTalkDTADb データベースから別の物理ディスクを分離する可能性があります十分です。</span><span class="sxs-lookup"><span data-stu-id="fed94-117">For smaller deployments if CPU resources are available, isolating the message box onto a separate physical disk from the BizTalkDTADb database might be sufficient.</span></span>  

- <span data-ttu-id="fed94-118">プライマリ メッセージ ボックスには、CPU プロセッサの飽和やディスク操作 (ディスクの平均キュー長さ) からの待機時間が原因でボトルネック可能性があります。</span><span class="sxs-lookup"><span data-stu-id="fed94-118">The primary MessageBox could be the bottleneck due to CPU processor saturation or latency from disk operations (average disk queue length).</span></span> <span data-ttu-id="fed94-119">CPU の処理がボトルネックになっている場合は、プライマリ メッセージ ボックスに CPU プロセッサを追加します。</span><span class="sxs-lookup"><span data-stu-id="fed94-119">If CPU processing is the bottleneck, add CPU processors to the primary message box.</span></span> <span data-ttu-id="fed94-120">指定しない場合、この方法がマスター メッセージ ボックスが、他のメッセージ ボックス データベースにメッセージのルーティングを処理できるより効率的にマスター メッセージ ボックスでのパブリッシングを無効にしてください。</span><span class="sxs-lookup"><span data-stu-id="fed94-120">If not try disabling publishing on the Master MessageBox, this way the Master MessageBox can more efficiently handle routing of messages to the other MessageBox databases.</span></span>  

- <span data-ttu-id="fed94-121">ディスク操作がボトルネックとなっている場合は、BizTalkDTADb データベースを専用の SQL Server コンピューターまたは専用のディスクに移動します。</span><span class="sxs-lookup"><span data-stu-id="fed94-121">If disk operations are the bottleneck, move the BizTalkDTADb database to a dedicated SQL Server computer and/or dedicated disk.</span></span> <span data-ttu-id="fed94-122">プライマリ メッセージ ボックスで、CPU の処理もディスク操作がボトルネックでない場合は、既存のハードウェアを活用する同じ SQL Server コンピューターに新しいメッセージ ボックス データベースを作成できます。</span><span class="sxs-lookup"><span data-stu-id="fed94-122">If CPU processing and disk operations on the primary message box are not the bottleneck, you can create new MessageBox databases on the same SQL Server computer to leverage your existing hardware.</span></span>  

- <span data-ttu-id="fed94-123">別の物理ディスク上にメッセージ ボックス データベースと BizTalkDTADb データベースのトランザクションとデータのログ ファイルを分離する SQL Server のベスト プラクティスに従ってください。</span><span class="sxs-lookup"><span data-stu-id="fed94-123">Follow SQL Server best practices to isolate the transaction and data log files for the MessageBox and BizTalkDTADb databases onto separate physical disks.</span></span>  

- <span data-ttu-id="fed94-124">データとログ ファイルのための十分な記憶域スペースを割り当てるそれ以外の場合 SQL Server では、すべてのログ ファイルが保持されているディスクの空き領域の消費が自動的にします。</span><span class="sxs-lookup"><span data-stu-id="fed94-124">Allocate sufficient storage space for the data and log files; otherwise SQL Server will automatically consume all of the available space on the disks that the log files are kept.</span></span> <span data-ttu-id="fed94-125">ログ ファイルの初期サイズは、特定のシナリオでは、特定の要件によって異なります。</span><span class="sxs-lookup"><span data-stu-id="fed94-125">Initial size of the log files will depend on the specific requirements in your particular scenario.</span></span> <span data-ttu-id="fed94-126">テスト結果に基づいて展開の平均ファイル サイズを推定し、ソリューションを実装する前に、記憶域スペースを展開します。</span><span class="sxs-lookup"><span data-stu-id="fed94-126">Estimate the average file size in your deployment based on testing results, and expand the storage space before implementing your solution.</span></span>  

- <span data-ttu-id="fed94-127">メッセージ ボックス データベース、追跡、およびビジネス アクティビティ監視 (BAM) データベースなどの高いディスクの使用状況データベースには、十分な記憶域を割り当てます。</span><span class="sxs-lookup"><span data-stu-id="fed94-127">Allocate sufficient storage space for high-disk-usage databases, such as the MessageBox, Tracking, and Business Activity Monitoring (BAM) databases.</span></span> <span data-ttu-id="fed94-128">ソリューションは、BizTalk Framework メッセージング プロトコルを使用している場合は、BizTalk 構成データベース (BizTalkMgmtDb) のための十分な記憶域を割り当てます。</span><span class="sxs-lookup"><span data-stu-id="fed94-128">If your solution uses the BizTalk Framework messaging protocol, allocate sufficient storage space for the BizTalk Configuration database (BizTalkMgmtDb).</span></span>  

- <span data-ttu-id="fed94-129">ビジネス ニーズ [データの保有期間] を特定のシナリオで処理されたデータの量に応じて、BizTalkDTADb データベースが大きくなりすぎないように、追跡データベースの Archive/purge ジョブを構成します。</span><span class="sxs-lookup"><span data-stu-id="fed94-129">Depending on business needs [data retention periods] and the volume of data processed in your particular scenario, configure the Archive/Purge jobs on the Tracking database such that the BizTalkDTADb database does not grow too large.</span></span> <span data-ttu-id="fed94-130">このデータベースの拡大とパフォーマンスが低下 (特に 1 つの BizTalkDTADb データベースには、複数のメッセージ ボックスがサポートされている) 場合データ挿入率に制限していますが、データベースの完全な容量に達しているためです。</span><span class="sxs-lookup"><span data-stu-id="fed94-130">The growth of this database can degrade performance (especially when one BizTalkDTADb database supports multiple message boxes) because reaching the full capacity of the database imposes a limit on the rate of data insertion.</span></span>  

- <span data-ttu-id="fed94-131">スケール アップがボトルネックになっている場合は、messagebox データベースと BizTalkDTADb データベースをホストするサーバー。</span><span class="sxs-lookup"><span data-stu-id="fed94-131">Scale up the servers hosting the MessageBox and BizTalkDTADb databases if they are the bottleneck.</span></span> <span data-ttu-id="fed94-132">Cpu の追加、メモリを追加する、高速の Cpu にアップグレードする、高速の専用ディスクを使用して、ハードウェアをスケール アップすることができます。</span><span class="sxs-lookup"><span data-stu-id="fed94-132">You can scale up the hardware by adding CPUs, adding memory, upgrading to faster CPUs and using high-speed dedicated disks.</span></span>
