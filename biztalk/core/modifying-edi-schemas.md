---
title: EDI スキーマの変更 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 6fa33c5e-17ca-4aaf-a1ca-1972a9bb45ac
caps.latest.revision: 24
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 2ac79b7a8dc6b33c7841003936c0b961bec812f8
ms.sourcegitcommit: 266308ec5c6a9d8d80ff298ee6051b4843c5d626
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/27/2018
ms.locfileid: "37023200"
---
# <a name="modifying-edi-schemas"></a>EDI スキーマの変更
[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] に付属する既存の EDI スキーマに変更を加えることができます。 標準スキーマの変更について取引先と合意し、そしておそらく関連する Message Implementation Guideline (MIG) ファイルを変更した後で、[!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] の BizTalk エディターを使用してスキーマを変更することができます。  
  
> [!NOTE]
>  一部のスキーマ変更 (クロスフィールド検証と HIPAA サブドキュメントの分割) では、EDI スキーマの注釈が変更されます。 これらの変更は、BizTalk エディタで実行することはできませんが、メモ帳などのテキスト エディタを使用して実行できます。  
  
## <a name="prerequisites"></a>前提条件  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] 管理者グループのメンバーとしてログオンしている必要があります。  
  
## <a name="schema-naming-convention"></a>スキーマの名前付け規則  
 EDI スキーマはルート名と名前空間で識別されます。 同じルート名と名前空間を持つ同じ BizTalk グループ内に 2 つのスキーマを展開することはできません。 EDI スキーマのルート名を変更したり、ルート名に追加することはできません。これは、標準の名前付け規則に従って、ルート名にはバージョンとドキュメントの種類を含める必要があるためです。 したがって、同じルート名を持つ同じ BizTalk グループ内に 2 つのスキーマを展開するには、それぞれに別の名前空間を使用する必要があります。  
  
 同じ BizTalk グループ内で、2 つ以上の異なる取引先に対して同じスキーマの異なるバージョンを展開することは珍しくありません。 この場合、2 つのスキーマのバージョンとドキュメントの種類は同じになります。 これらの 2 つのスキーマを展開するには、スキーマごとに異なる名前空間を使用する必要があります。  
  
## <a name="edi-schema-changes"></a>EDI スキーマの変更  
 [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] では、EDI スキーマに次の変更を加えることができます。  
  
|目的|方法|  
|----------------|-------------|  
|列挙の変更<br /><br /> (コード リストの値の一覧など)|要素のプロパティを開き、**列挙エディター**値を追加すると、列挙型の一覧から値を削除します。|  
|データ要素の選択肢の変更|変更、 **Min Occurs**プロパティ。 フィールドを省略可能にする場合は 0、必須にする場合は 1 に変更します。|  
|データ要素をファイルに表示できる最大回数の変更|変更、 **Max Occurs**プロパティ。|  
|データ要素の文字数の変更|変更、**長さ**プロパティ。|  
|データ要素のデータ型の変更|変更、 **Base Data Type**または**日付型**プロパティ。|  
|カスタム フィールドの追加|子フィールド要素スキーマ ノードを挿入し、そのプロパティを設定します。 **注:** EDI スキーマ内のレコードに子フィールド属性を追加するため、使用できません、要素の順序は保証されません。 子フィールド属性を追加しようとすると、無効なスキーマが生成されます。 EDI スキーマ内のレコードに追加できるのは、子フィールド要素のみです。|  
|カスタム レコードの追加|子レコード スキーマ ノードを挿入し、そのプロパティを設定した後、子フィールド要素を追加します。|  
|カスタム フィールドまたはレコードの削除|カスタム フィールドまたはカスタム レコードを子フィールド要素と共に削除します。|  
|クロスフィールド検証の有効化|注釈でクロス フィールド検証フラグを設定するスキーマの appinfo セクション**はい**します。 このフラグは**X12ConditionDesignator_Check** (X12 または HIPAA スキーマ用) または**EdifactDependencyRule_Check** (EDIFACT スキーマ用)。<br /><br /> 関係条件 (X12 および HIPAA) または依存ルール (EDIFACT) を指定して、特定の要素のクロスフィールド検証を有効にします。 詳細については、[クロス フィールド検証の構成](../core/configuring-cross-field-validation.md)を参照してください。<br /><br /> 設定する必要があります、 **Edi 型の検証**プロパティを**はい**します。<br /><br /> クロスフィールド検証は、HIPAA スキーマに対しては既定で有効になっています。|  
|HIPAA サブドキュメントの分割の有効化|サブドキュメントの分割を設定する HIPAA スキーマの 1 つは、設定、 **subdocument_break**と**Split_Without_Sibling_Data**するスキーマのプロパティ**はい**および**subdocument_creation_break** 、スキーマで特定の要素のプロパティ**はい**します。<br /><br /> 設定する必要があります、**受信バッチ処理オプション**アグリーメント プロパティを**トランザクション セットとして分割されたインターチェンジ**します。<br /><br /> 詳細については、[HIPAA サブドキュメントの分割](../core/splitting-hipaa-subdocuments.md)を参照してください。|  
|トリガー フィールドを HIPAA ドキュメントに追加|"トリガー フィールド" と呼ばれる修飾子要素を基にして、HIPAA ドキュメントの 1 つのセグメントに対する一意の XML レコードを EDI 逆アセンブラーに作成することができます。 セグメントに対して一意の XML レコードが作成されるように、そのセグメントを表す属性とトリガー値を指定する必要があります。 詳細については、[HIPAA スキーマのトリガー フィールドの注釈](../core/hipaa-schema-trigger-field-annotations.md)を参照してください。|  
|セグメントを X12 トランザクション セットに追加|X12 トランザクション セットに新しいセグメントを追加すると、セグメント名の最初の 3 文字がセグメント識別子として使用されます。 そのため、セグメントの名前は最初の 3 文字が一意になるように付けることをお勧めします。|  
|ループを HIPAA トランザクション セットに追加|HIPAA トランザクション セットに新しいループを追加するときは、ループの名前の中に「Loop」を入れることをお勧めします。 たとえば、"TS837_2010AB_Loop" という形式でループ名を指定します。 **注:** ループの最初のセグメントは必須です (セグメントの minOccurs は 1 である必要があります) のあいまいさを回避するためにします。|  
|"順不同ループ" を HIPAA トランザクション セットに追加|1 つのトランザクション セットの中に、セマンティクスが異なる等価なセグメントが複数ある場合は、これらのセグメントを同じサブループの中で定義する必要があります。 XML コメントに、サブループ\<xs:all\>により、任意の順序で発生する同等のセグメント。<br /><br /> "順不同" ループの名前には "SubLoop" を入れることをお勧めします。 たとえば、形式は"ts837q1_2010"**注:** 順不同ループの要素がループ内で 1 回発生する必要がありますのみです。 あいまいさを避けるために、サブループの兄弟では maxOccurs が 1 に設定されている必要があります。|  
  
### <a name="to-modify-an-existing-edi-schema-in-biztalk-editor"></a>BizTalk エディタで既存の EDI スキーマを変更するには  
  
1. [!INCLUDE[btsVStudioNoVersion](../includes/btsvstudionoversion-md.md)] で、変更を加えるスキーマをプロジェクトに追加し、そのスキーマを BizTalk エディターで開きます。  
  
   > [!NOTE]
   >  クリックして、スキーマをグラフィカルな形式で表示できる、 **EDI**スキーマ エディタ 画面の下部にあるタブ。 この表形式を使用して、スキーマのノードを移動すると非常に簡単です。  
  
2. データ要素またはレコードのプロパティを変更するには、BizTalk エディタの左ペインで適切なノードをクリックし、[プロパティ] ウィンドウでプロパティを変更します。  
  
3. 列挙体の値を変更するで列挙を選択します。、**プロパティ**ウィンドウを開く省略記号をクリックして、**列挙エディター**します。 追加または内の行ごとに 1 つの値が存在する、必要に応じて、値の一覧から削除、**値**ウィンドウ。 **[OK]** をクリックします。  
  
4. スキーマには、カスタム フィールドを追加するには、BizTalk エディターのコンソール ツリーでレコード ノードを右クリックをポイントして**スキーマ ノードの挿入**、 をクリック**子フィールド要素**します。 データ要素に名前を付けた後、レコード内の適切な位置にドラッグします。 必要に応じて、カスタム フィールド プロパティのプロパティを設定します。  
  
   > [!NOTE]
   >  EDI スキーマ内のレコードに子フィールド属性を追加することはできません。これは、要素の順序が保証されないためです。 子フィールド属性を追加しようとすると、無効なスキーマが生成されます。  
  
5. スキーマには、カスタム レコードを追加するには、スキーマ エディターのコンソール ツリーでレコード ノードを右クリックをポイントして**スキーマ ノードの挿入**、 をクリックし、**子レコード**します。 レコードに名前を付けた後、スキーマ内の適切な位置にドラッグします。 レコードに少なくとも 1 つのデータ要素を追加します。 必要に応じて、カスタム レコードのプロパティを設定します。  
  
6. スキーマに必要な変更を行った後は、ルート ノードをクリックして、スキーマ プロパティに適用されるターゲットの名前空間を変更することができます (\<スキーマ\>) を変更して、 **Target Namespace**プロパティ。  
  
7. スキーマを保存します。  
  
8. ソリューション エクスプ ローラーでスキーマを右クリックし、スキーマの検証**スキーマの検証**です。  
  
   > [!NOTE]
   >  **スキーマの検証**ために、コマンドは、EDI スキーマを検証は、**スキーマ エディタ拡張機能**ルート ノードのプロパティ (\<スキーマ\>) に設定されている**EDIスキーマ エディター拡張機能**します。  
  
### <a name="to-modify-annotation-properties-in-an-existing-edi-schema"></a>既存の EDI スキーマで注釈のプロパティを変更するには  
  
1.  スキーマをメモ帳などのテキスト エディタで開きます。  
  
2.  クロスフィールド検証を有効にするには、次の手順を実行します。 詳細については、[クロス フィールド検証の構成](../core/configuring-cross-field-validation.md)を参照してください。  
  
    1.  スキーマの上部にある appinfo 注釈のクロス フィールド検証フラグを設定します (どちらか**X12ConditionDesignator_Check** X12 または HIPAA スキーマのまたは**EdifactDependencyRule_Check** EDIFACT の場合スキーマの場合) に**はい**します。  
  
        > [!NOTE]
        >  クロス フィールド検証フラグは**はい**BizTalk Server の HIPAA スキーマに対して既定でします。  
  
    2.  特定の要素の注釈で、要素の関係条件 (X12 または HIPAA) または依存ルール (EDIFACT) を指定します。 これらの設定の詳細については、[クロス フィールド/セグメント検証](../core/cross-field-segment-validation.md)を参照してください。  
  
        > [!NOTE]
        >  **検証**ページ (で、**トランザクション セットの設定**セクション) の一方向アグリーメント タブの**アグリーメントのプロパティ**関連するアグリーメントは、ダイアログ ボックス必ず、 **EDI の種類の検証**プロパティが選択されています。  
  
3.  HIPAA サブドキュメントの分割を有効にするには、次の手順を実行します。 詳細については、[HIPAA サブドキュメントの分割](../core/splitting-hipaa-subdocuments.md)を参照してください。  
  
    1.  スキーマの上部にある appinfo 注釈の設定、 **subdocument_break**と**Split_Without_Sibling_Data**フラグを**はい**します。  
  
    2.  特定の要素の appinfo 注釈で、、 **subdocument_creation_break**フラグを**はい**を参照してください。  
  
        > [!NOTE]
        >  **ローカル ホスト設定**ページ (下、**インターチェンジの設定**セクション) の一方向アグリーメント タブの**アグリーメントのプロパティ**関連するダイアログ ボックスアグリーメント、ことを確認、**受信バッチ処理オプション**プロパティに設定されて**トランザクション セットとして分割されたインターチェンジ**します。  
  
## <a name="see-also"></a>参照  
 [EDI スキーマの開発](../core/developing-edi-schemas.md)