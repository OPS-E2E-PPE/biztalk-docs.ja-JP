---
title: テスト アダプターをデバッグする方法 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: cf6563ea-b4ea-4617-b3da-d31250d002ab
caps.latest.revision: 8
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: c6d3806dc78fa09031339ab548d64149202d6dc3
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65383738"
---
# <a name="how-to-test-and-debug-an-adapter"></a>テスト アダプターをデバッグする方法
多くの場合、実行時の問題をデバッグすると、多角的なアプローチが必要です。 ソフトウェア トレース、パフォーマンス カウンター、イベント ログ エントリ、Windows Management Instrumentation (WMI) イベント、および問題やソフトウェアのバグの原因を特定するソース コードのデバッグなどの複数のソースからデータを収集する必要があります。  
  
 ため、受信し、送信アダプターは、デバッガーは、アダプターをデバッグする BtsNtSvc.exe プロセスに接続する必要がある、BizTalk サービスのアドレス空間で実行します。 ただし、分離受信アダプター、デバッガーは、アダプターをホストするプロセスにアタッチする必要があります。  
  
 アダプターの実行時のコードは、トラブルシューティングのためのランタイム診断をキャプチャするコードのトレースとインストルメント化する必要です。 Microsoft Enterprise Instrumentation Framework (EIF) を使用して、これを行うことができます。 通常は、重要度の異なるレベルのトレース ステートメントを追加すると便利などのトレース エラー状態のみのエラーと警告のトレース、および最後に、エラー、警告、および情報ステートメントのトレースします。 さらより複雑なアダプターには、互いから分離して追跡する必要がある個々 のサブシステムがあります。 ネットワーク サブシステムとコア サブシステム; アダプターが、があります。すべてのサブシステムのトレースを有効にすると一部のシナリオで過剰な「ノイズ」が生成される可能性があります。  
  
 アダプターの実行時の動作に関する詳細情報を提供する実行時に速度や値をキャプチャするパフォーマンス カウンターを追加する必要があります。 たとえば、アダプターでは、1 秒あたりに送信されたメッセージの料金と同様に、エンドポイントごとに送信されるメッセージの実際の数のパフォーマンス カウンターを発行できます。  
  
 WMI イベントは、重大なエラー シナリオによっては便利な場合もあります。  インスタンス、アダプター数、受信場所をシャット ダウンの原因となる重大なエラー WMI イベントを発生させる場合は、そのイベントをリッスンし、適切なアクションを実行する管理者を許可します。  
  
## <a name="adapter-testing"></a>アダプターのテスト  
 BizTalk Server のカスタム アダプターを開発する場合は、エンタープライズ ソフトウェアの品質を開発する必要がありますに注意してください。 これは、アダプターを出荷する前に徹底的にテストする必要があることを意味します。 完全に詳述されませんアダプターのテスト方法、中にこのセクションでは実行する必要があるものの概要を把握します。 一般に、3 つのカテゴリをカバー アダプターなどの実行時のコードをテストする必要があります。 機能テスト、ストレス テスト、およびパフォーマンスをテストします。  
  
### <a name="function-testing"></a>機能テスト  
 ポジティブ テストとネガティブ テストの両方を含む、その機能のすべての順列には、アダプターをテストする必要があります。 ポジティブ テストが含まれますが、次のシナリオに限定されません。  
  
- メッセージを受信します。  
  
- メッセージを送信します。  
  
- 動的ポートを使用してメッセージを送信します。  
  
- 受信場所を無効にします。  
  
- 更新の構成  
  
- 受信し、送信アダプタの両方について、windows サービスが作業していることを確認します。  
  
- トランザクション アダプターのトランザクションの整合性を確認します。  
  
  ネガティブ テストする必要がありますが含まれますに限定されません。  
  
- 問題のあるメッセージを受信します。  
  
- 混在するバッチのメッセージ、正常なメッセージと問題のある受信します。  
  
- エラーを送信します。  
  
- 再試行の成功  
  
- 再試行の失敗、成功した次のトランスポートへ移動  
  
- 次のトランスポートへの移行が失敗した場合、メッセージを中断  
  
- メッセージの混在バッチを送信します。  
  
- データベースのフェールオーバー  
  
### <a name="stress-testing"></a>ストレス テスト  
 アダプターは、実行時コンポーネントは、そのため、実行時ソフトウェアの厳しい要件を満たす必要があります。 通常、ストレス テストは実行時間が一定の負荷のシナリオを実行することによって。 さらに高負荷と低負荷の平均時間故障間隔テスト実行するか、アダプターが測定期間の負荷の下で実行するため。  
  
 大まかなガイドラインとしてこれらのテスト実行されている可能性、アダプターで約 72 時間の高い負荷で、アダプターを経由してメッセージの数によって、周囲に 80 ~ 90% の CPU 使用率。 低負荷、CPU 使用率が約 120 時間の約 30 ~ 40% になります。  
  
### <a name="performance-testing"></a>パフォーマンス テスト  
 パフォーマンスを考慮して、アダプターを開発する必要があります。 アダプターをリリースする前に、そのパフォーマンスを検証する必要があります。 そのパフォーマンスがスケール アップとスケール アウト; ことを確認することが重要個以上の Cpu を追加する潜在顧客パフォーマンスが向上するようコンピューターを追加します。 コードのプロファイリングは、パフォーマンス ボトルネックの解消に役立ちます。