---
title: EDI バッチ処理に関する既知の問題 |Microsoft Docs
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 510ac82b-8a02-4135-87b7-0a5f288f5317
caps.latest.revision: 38
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 9941e6f88bc7bd23a9825a1960a2dcf9f92466f9
ms.sourcegitcommit: 381e83d43796a345488d54b3f7413e11d56ad7be
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2019
ms.locfileid: "65330402"
---
# <a name="known-issues-with-edi-batching"></a><span data-ttu-id="18efe-102">EDI バッチ処理に関する既知の問題</span><span class="sxs-lookup"><span data-stu-id="18efe-102">Known Issues with EDI Batching</span></span>
<span data-ttu-id="18efe-103">このトピックでは、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] のバッチ処理に関する既知の問題について説明します。</span><span class="sxs-lookup"><span data-stu-id="18efe-103">This topic describes known issues with batching in [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)].</span></span>  
  
## <a name="subdocument-splitting-was-not-performed-even-though-the-subdocument-annotation-was-set-to-yes"></a><span data-ttu-id="18efe-104">サブドキュメントの注釈が [はい] に設定されていても、サブドキュメントの分割が実行されない</span><span class="sxs-lookup"><span data-stu-id="18efe-104">Subdocument Splitting Was Not Performed Even Though the Subdocument Annotation Was Set to Yes</span></span>  
 <span data-ttu-id="18efe-105">**現象**</span><span class="sxs-lookup"><span data-stu-id="18efe-105">**Symptom**</span></span>  
  
 <span data-ttu-id="18efe-106">HIPAA インターチェンジの HIPAA スキーマ内で、subdocument_creation_break 注釈が [はい] に設定されていても、HIPAA インターチェンジがサブドキュメントに分割されません。</span><span class="sxs-lookup"><span data-stu-id="18efe-106">A HIPAA interchange was not split into subdocuments even though the subdocument_creation_break annotation within the HIPAA schema for that interchange was set to "Yes."</span></span>  
  
 <span data-ttu-id="18efe-107">**考えられる原因**</span><span class="sxs-lookup"><span data-stu-id="18efe-107">**Possible Cause**</span></span>  
  
- <span data-ttu-id="18efe-108">受信バッチ処理、送信元パーティのオプションは、「インターチェンジの保存」に設定されました</span><span class="sxs-lookup"><span data-stu-id="18efe-108">The Inbound batch processing option for the sending party was set to "Preserve Interchange."</span></span> <span data-ttu-id="18efe-109">この場合、HIPAA スキーマ内の subdocument_creation_break 注釈が [はい] に設定されていても、HIPAA ドキュメントはサブドキュメントに分割されません。</span><span class="sxs-lookup"><span data-stu-id="18efe-109">A HIPAA document will not be split into subdocuments if this is the case, even though the subdocument_creation_break annotation within the HIPAA schema is set to "Yes."</span></span>  
  
- <span data-ttu-id="18efe-110">subdocument_break 注釈は [はい] に設定されていますが、subdocument_creation_break 注釈は [はい] に設定されていません。</span><span class="sxs-lookup"><span data-stu-id="18efe-110">The subdocument_break annotation was set to “Yes”, but the subdocument_creation_break annotation was not set to “Yes”.</span></span>  
  
  <span data-ttu-id="18efe-111">**解決方法**</span><span class="sxs-lookup"><span data-stu-id="18efe-111">**Resolution**</span></span>  
  
- <span data-ttu-id="18efe-112">**検証と確認の生成の設定**のページ、 **EDI のプロパティ** ダイアログ ボックス、送信元パーティの設定、**受信バッチ処理**プロパティをオプションいずれか**エラーのトランザクション セットを中断するトランザクション セットとして分割されたインターチェンジ**または**エラーでインターチェンジを中断するトランザクション セットとして分割されたインターチェンジ**します。</span><span class="sxs-lookup"><span data-stu-id="18efe-112">In the **Validation and ACK Generation Settings** page of the **EDI Properties** dialog box for the sending party, set the **Inbound batch processing** option property to either **Split Interchange as Transaction Sets – suspend Transaction Sets on Error** or **Split Interchange as Transaction Sets – suspend Interchange on Error**.</span></span>  
  
- <span data-ttu-id="18efe-113">subdocument_creation_break 注釈を [はい] に設定しない場合、HIPAA ドキュメントはサブドキュメントに分割されません。</span><span class="sxs-lookup"><span data-stu-id="18efe-113">A HIPAA document will not be split into subdocuments unless the subdocument_creation_break annotation is set to “Yes.”</span></span>  
  
## <a name="validation-of-a-batch-may-fail-if-batch-configuration-settings-are-changed-while-the-batch-orchestration-is-activated"></a><span data-ttu-id="18efe-114">バッチ オーケストレーションがアクティブになっているときに、バッチの構成設定を変更すると、バッチの検証に失敗する場合がある</span><span class="sxs-lookup"><span data-stu-id="18efe-114">Validation of a Batch May Fail if Batch Configuration Settings Are Changed While the Batch Orchestration Is Activated</span></span>  
 <span data-ttu-id="18efe-115">バッチ処理オーケストレーションがバッチを処理している間にバッチの構成設定を変更した場合、そのバッチに対して新しい構成設定は適用されません。</span><span class="sxs-lookup"><span data-stu-id="18efe-115">If you change batch configuration settings while the batching orchestration is processing a batch, the new configuration settings will not be picked up for that batch.</span></span> <span data-ttu-id="18efe-116">これにより、送信パイプラインで検証エラーが発生する場合があります。</span><span class="sxs-lookup"><span data-stu-id="18efe-116">This can result in validation errors in the send pipeline.</span></span>  
  
 <span data-ttu-id="18efe-117">これらの設定は、[EDI のプロパティ] ダイアログ ボックスの [バッチ] ページにあります。</span><span class="sxs-lookup"><span data-stu-id="18efe-117">These settings are in the Batches page of the EDI Properties dialog box.</span></span>  
  
 <span data-ttu-id="18efe-118">この問題を解決するには、バッチ処理オーケストレーションに関連付けられたホスト インスタンスを再起動します。</span><span class="sxs-lookup"><span data-stu-id="18efe-118">To resolve this issue, restart the host instance(s) associated with the batching orchestration(s).</span></span> <span data-ttu-id="18efe-119">これにより、バッチの構成設定の変更が直ちに適用されます。</span><span class="sxs-lookup"><span data-stu-id="18efe-119">This will cause the change to the batch configuration settings to take place immediately.</span></span>  
  
## <a name="the-batchcontrolmessagerecvloc-receive-location-can-only-run-on-a-32-bit-computer-or-in-wow-on-a-64-bit-computer"></a><span data-ttu-id="18efe-120">BatchControlMessageRecvLoc 受信場所を実行できるのが、32 ビット コンピューター、または 64 ビット コンピューターの WOW のみである</span><span class="sxs-lookup"><span data-stu-id="18efe-120">The BatchControlMessageRecvLoc Receive Location Can Only Run on a 32-Bit Computer or in WOW on a 64-Bit Computer</span></span>  
 <span data-ttu-id="18efe-121">SQL アダプターが機能するのは、32 ビット コンピューターで実行する場合、または 64 ビット コンピューター上の WOW64 エミュレーターで実行する場合のみです。</span><span class="sxs-lookup"><span data-stu-id="18efe-121">SQL adapters only work on 32-bit computers or when running under the WOW64 emulator on 64-bit computers.</span></span> <span data-ttu-id="18efe-122">そのため、セットアップ プログラムによってインストールされ、SQL アダプターを使用する BatchControlMessageRecvLoc 受信場所が機能するのは、32 ビット コンピューターで実行する場合、または 64 ビット コンピューター上の WOW で実行する場合のみです。</span><span class="sxs-lookup"><span data-stu-id="18efe-122">As a result, the BatchControlMessageRecvLoc receive location, which is installed by the setup program and uses the SQL adapter, will only work on a 32-bit computer or when running under WOW on a 64-bit computer.</span></span> <span data-ttu-id="18efe-123">この受信場所はバッチ処理に必要です。</span><span class="sxs-lookup"><span data-stu-id="18efe-123">This receive location is required for batch processing.</span></span>  
  
 <span data-ttu-id="18efe-124">64 ビット コンピューター上の WOW で BatchControlMessageRecvLoc 受信場所を実行する場合は、バッチ処理オーケストレーションを別のホストで実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="18efe-124">When running the BatchControlMessageRecvLoc receive location under WOW on a 64-bit computer, you should run the batching orchestrations in a different host.</span></span> <span data-ttu-id="18efe-125">受信場所と同じホストで実行すると、バッチ処理オーケストレーションが WOW でも実行されるため、64 ビット コンピューターで実行する利点がなくなります。</span><span class="sxs-lookup"><span data-stu-id="18efe-125">If they are run on the same host as the receive location, the batching orchestrations would also run under WOW, and you would lose the advantages of running on a 64-bit computer.</span></span>  
  
## <a name="a-batch-can-be-picked-up-by-an-unintended-send-port"></a><span data-ttu-id="18efe-126">予期しない送信ポートによってバッチが取得される</span><span class="sxs-lookup"><span data-stu-id="18efe-126">A Batch Can Be Picked Up By an Unintended Send Port</span></span>  
 <span data-ttu-id="18efe-127">バッチ処理オーケストレーションがインターチェンジを公開すると、2 つのプロパティを昇格します。ToBeBatched = False と DestinationPartyName = \< *PartyName*\>します。</span><span class="sxs-lookup"><span data-stu-id="18efe-127">When the batching orchestration publishes an interchange, it promotes two properties: ToBeBatched = False and DestinationPartyName = \<*PartyName*\>.</span></span> <span data-ttu-id="18efe-128">これらのプロパティの一方または両方をサブスクライブする送信ポートは、これらのバッチ インターチェンジを取得できます。</span><span class="sxs-lookup"><span data-stu-id="18efe-128">A send port subscribing to either or both of these properties can pick up these batched interchanges.</span></span> <span data-ttu-id="18efe-129">送信ポートがこれらの取得対象のバッチ インターチェンジを取得するよう、送信ポートのフィルターを必ず構成してください。</span><span class="sxs-lookup"><span data-stu-id="18efe-129">Make sure that a send port's filters are configured such that the send port picks up those batched interchanges that it is intended to pick up.</span></span>  
  
## <a name="a-batch-element-count-greater-than-the-required-number-of-transaction-sets-for-a-batch-may-not-prompt-batch-release"></a><span data-ttu-id="18efe-130">バッチ要素数がバッチに必要なトランザクション セット数より多い場合に、バッチがリリースされないことがある</span><span class="sxs-lookup"><span data-stu-id="18efe-130">A Batch Element Count Greater Than the Required Number of Transaction Sets for a Batch May Not Prompt Batch Release</span></span>  
 <span data-ttu-id="18efe-131">バッチのリリース条件が、グループまたはインターチェンジごとのトランザクション セット数に基づいている場合は、バッチ要素数が、リリースされるバッチに必要なトランザクション セット数より多くても、バッチがリリースされないことがあります。</span><span class="sxs-lookup"><span data-stu-id="18efe-131">If the batch release criteria is based upon the number of transaction sets per group or interchange, a batch may not be released even though the batch element count is greater than the number of transaction sets required for a batch to be released.</span></span> <span data-ttu-id="18efe-132">これは、受信確認を有効にしており、その受信確認をバッチに追加するようにバッチのフィルター条件を設定している場合に発生します。</span><span class="sxs-lookup"><span data-stu-id="18efe-132">This can happen if you enable acknowledgments, and set the batch filter criteria to add those acknowledgments to the batch.</span></span> <span data-ttu-id="18efe-133">この場合、グループ (またはインターチェンジ) 内のバッチ要素数は、グループ (またはインターチェンジ) ごとのトランザクション セット数より多くなります。</span><span class="sxs-lookup"><span data-stu-id="18efe-133">In this instance, the number of batch elements in the group (or interchange) will be greater than the number of transaction sets per group (or interchange).</span></span> <span data-ttu-id="18efe-134">その場合は、グループ (またはインターチェンジ) ごとのトランザクション セット数がバッチ リリースに必要な数より少なければ、バッチがリリースされませんが、同時に、バッチ要素数がバッチ リリースに必要なトランザクション セット数よりも多くなります。</span><span class="sxs-lookup"><span data-stu-id="18efe-134">In that instance, a batch will not be released if the number of transaction sets per group (or interchange) is smaller than the number required for batch release, but at the same time the number of batch elements could be greater than the number of transaction sets required for batch release.</span></span>  
  
## <a name="no-batch-elements-were-saved-when-start-was-clicked"></a><span data-ttu-id="18efe-135">[開始] をクリックしたときにバッチ要素が保存されない</span><span class="sxs-lookup"><span data-stu-id="18efe-135">No Batch Elements Were Saved When Start Was Clicked</span></span>  
 <span data-ttu-id="18efe-136">**現象**</span><span class="sxs-lookup"><span data-stu-id="18efe-136">**Symptom**</span></span>  
  
 <span data-ttu-id="18efe-137">ときに**開始**がクリックされたパーティのバッチ ページで、メッセージが収集されません、バッチ用。</span><span class="sxs-lookup"><span data-stu-id="18efe-137">When **Start** was clicked in the Batches page for a party, no messages were collected for the batch.</span></span>  
  
 <span data-ttu-id="18efe-138">**考えられる原因**</span><span class="sxs-lookup"><span data-stu-id="18efe-138">**Possible Cause**</span></span>  
  
 <span data-ttu-id="18efe-139">日時が**開始**がクリックされたで入力した日時より前のバージョンでした、**アクティベーション**セクション。</span><span class="sxs-lookup"><span data-stu-id="18efe-139">The datetime at which **Start** was clicked was earlier than the datetime entered in the **Activation** section.</span></span> <span data-ttu-id="18efe-140">その結果、オーケストレーション インスタンスがアクティブ化が、バッチのメッセージが収集されません。</span><span class="sxs-lookup"><span data-stu-id="18efe-140">As a result, the orchestration instance was activated, but no messages were collected for the batch.</span></span> <span data-ttu-id="18efe-141">詳細については、次を参照してください。[送信バッチの構成](../core/configuring-an-outgoing-batch.md)します。</span><span class="sxs-lookup"><span data-stu-id="18efe-141">For more information, see [Configuring an Outgoing Batch](../core/configuring-an-outgoing-batch.md).</span></span>  
  
 <span data-ttu-id="18efe-142">**解決方法**</span><span class="sxs-lookup"><span data-stu-id="18efe-142">**Resolution**</span></span>  
  
 <span data-ttu-id="18efe-143">クリックして**停止**この問題が発生しているバッチ構成のバッチ ページでします。</span><span class="sxs-lookup"><span data-stu-id="18efe-143">Click **Stop** in the Batches page for the batch configuration experiencing this problem.</span></span> <span data-ttu-id="18efe-144">設定、**アクティベーション**いずれかに**をすぐに開始**または現在の時刻より前の日時を入力し、クリックして**開始**します。</span><span class="sxs-lookup"><span data-stu-id="18efe-144">Set the **Activation** to either **Start immediately** or enter a datetime earlier than the current time, and then click **Start**.</span></span> <span data-ttu-id="18efe-145">リセットするメッセージが表示されたら、**開始**をクリックして現在の時刻を datetime **[ok]** します。</span><span class="sxs-lookup"><span data-stu-id="18efe-145">When you are prompted to reset the **Start** datetime to the current time, click **OK**.</span></span> <span data-ttu-id="18efe-146">BizTalk Server は、その時点でバッチ用のメッセージの収集を開始します。</span><span class="sxs-lookup"><span data-stu-id="18efe-146">BizTalk Server will start to collect messages for a batch at that point.</span></span>  
  
## <a name="the-number-of-bytes-in-an-edifact-batch-may-depend-upon-the-character-set-used"></a><span data-ttu-id="18efe-147">EDIFACT バッチのバイト数が、使用される文字セットによって異なる</span><span class="sxs-lookup"><span data-stu-id="18efe-147">The Number of Bytes in an EDIFACT Batch May Depend Upon the Character Set Used</span></span>  
 <span data-ttu-id="18efe-148">一部の EDIFACT 文字セットで 2 バイト文字である文字が、他の EDIFACT 文字セットでは 1 バイト文字である場合があります。</span><span class="sxs-lookup"><span data-stu-id="18efe-148">Characters in some EDIFACT character sets may be double-byte characters, whereas in other EDIFACT character sets they may be single-byte characters.</span></span> <span data-ttu-id="18efe-149">そのため、インターチェンジ内の文字数に基づいてバッチのリリース条件を設定するときは、使用する文字セットによってインターチェンジ内のバイト数が異なることがあります。</span><span class="sxs-lookup"><span data-stu-id="18efe-149">Because of this, when you set the release criteria for batches based upon the number of characters in the interchange, the number of bytes in the interchange may differ depending on the character set used.</span></span>  
  
## <a name="the-characters--and--must-be-represented-in-their-encoded-form-in-the-envelope-of-a-batch"></a><span data-ttu-id="18efe-150">バッチのエンベロープで、文字 "<" と "&" をエンコード形式で表す必要がある</span><span class="sxs-lookup"><span data-stu-id="18efe-150">The Characters "<" and "&" Must be Represented in Their Encoded Form in the Envelope of a Batch</span></span>  
 [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] <span data-ttu-id="18efe-151">は、バッチ EDI インターチェンジのエンベロープ フィールドを作成する場合に、リテラル形式の "<" と "&" をサポートしません。</span><span class="sxs-lookup"><span data-stu-id="18efe-151">does not support the following characters in their literal form when creating the envelope fields of a batched EDI interchange: "<" and "&".</span></span>  
  
 <span data-ttu-id="18efe-152">送信バッチ インターチェンジのエンベロープ フィールドで、これらの文字のいずれかをそのまま使用すると、インターチェンジのシリアル化に EdiSend パイプラインが使用されている場合にメッセージが中断されます。</span><span class="sxs-lookup"><span data-stu-id="18efe-152">Using either of these characters literally in the envelope fields of an outgoing batched interchange will result in a suspended message if the EdiSend pipeline is used to serialize the interchange.</span></span>  
  
 <span data-ttu-id="18efe-153">バッチのエンベロープ フィールドでこれらの文字の 1 つを使用する必要がある場合は、BizTalk 管理でエンベロープ フィールドを構成するときに、次の表の適切なエンコード値を使用できます。</span><span class="sxs-lookup"><span data-stu-id="18efe-153">If you need to use one of these characters in an envelope field of a batch, you can use the appropriate encoded value in the following table when you configure the envelope field in the BizTalk Administrator:</span></span>  
  
|<span data-ttu-id="18efe-154">文字</span><span class="sxs-lookup"><span data-stu-id="18efe-154">Character</span></span>|<span data-ttu-id="18efe-155">[エンコード]</span><span class="sxs-lookup"><span data-stu-id="18efe-155">Encoding</span></span>|  
|---------------|--------------|  
|<|&lt;|  
|&|&amp;|  
  
 <span data-ttu-id="18efe-156">これらのエンコード形式の 1 つを使用すると、BizTalk Server 管理コンソールのパートナー アグリーメント マネージャー (PAM) 画面で、BizTalk Server が長さの制限についてフィールドを検証する場合に、エンコード形式の各文字が個別の文字と見なされます。</span><span class="sxs-lookup"><span data-stu-id="18efe-156">When you use one of these encoded forms, each character in the encoded form will be counted as an individual character when BizTalk Server validates the field for its length restriction in the Partner Agreement Manager (PAM) screens in the BizTalk Server Administration console.</span></span> <span data-ttu-id="18efe-157">たとえば、場合でも、エンコード"&lt;「1 つの文字を表現は」\<"、バッチ EDI インターチェンジで BizTalk Server としてカウントされますこの 4 つの文字の特定のフィールドの長さの制限を検証するとき.</span><span class="sxs-lookup"><span data-stu-id="18efe-157">For example, even though the encoding "&lt;" would represent a single character "\<" in the batched EDI interchange, BizTalk Server would count this as four characters when validating against the length restriction of the particular field.</span></span> <span data-ttu-id="18efe-158">これは PAM のみの問題であり、EDI アセンブラーには該当しません。</span><span class="sxs-lookup"><span data-stu-id="18efe-158">This is an issue for PAM only, not for the EDI Assembler.</span></span>  
  
## <a name="an-exeption-occurs-during-the-execution-of-the-upgrade-batch-orchestration"></a><span data-ttu-id="18efe-159">アップグレード バッチ オーケストレーションの実行中に例外が発生する</span><span class="sxs-lookup"><span data-stu-id="18efe-159">An Exeption Occurs During the Execution of the Upgrade Batch Orchestration</span></span>  
 <span data-ttu-id="18efe-160">**現象**</span><span class="sxs-lookup"><span data-stu-id="18efe-160">**Symptom**</span></span>  
  
 <span data-ttu-id="18efe-161">受信ドキュメントで EDI.DestinationPartyId プロパティを設定するカスタム パイプライン コンポーネントを使用する場合、アプリケーション イベント ログで、アップグレード バッチ オーケストレーションの実行中に例外が発生したことを示すエラーが受信されることがあります。</span><span class="sxs-lookup"><span data-stu-id="18efe-161">When using a custom pipeline component that sets the EDI.DestinationPartyId property on incoming documents, you may receive an error in the Application event log stating that an exception has occurred during the execution of the upgrade batch orchestration.</span></span>  
  
 <span data-ttu-id="18efe-162">**考えられる原因**</span><span class="sxs-lookup"><span data-stu-id="18efe-162">**Possible Cause**</span></span>  
  
 <span data-ttu-id="18efe-163">ErrorMessage が "バッチが見つかりませんでした" である場合、このエラーは、アップグレード バッチ オーケストレーションで受信ドキュメント用のバッチを適切に識別できなかったことを示します。</span><span class="sxs-lookup"><span data-stu-id="18efe-163">If ErrorMessage = “The batch was not found”, this error indicates that the upgrade batch orchestration was not able to successfully identify a batch for the incoming document.</span></span>  
  
 <span data-ttu-id="18efe-164">**解決方法**</span><span class="sxs-lookup"><span data-stu-id="18efe-164">**Resolution**</span></span>  
  
 <span data-ttu-id="18efe-165">アップグレード バッチ オーケストレーションでは、EDI.DestinationPartyId を使用してパーティ名を参照します。</span><span class="sxs-lookup"><span data-stu-id="18efe-165">The upgrade batch orchestration uses the EDI.DestinationPartyId to look up the party name.</span></span> <span data-ttu-id="18efe-166">その後、パーティ名、EDI.EncodingType、および文字列 “Default” を使用して文字列を構築し、一致するバッチ名のバッチ構成を検索します。</span><span class="sxs-lookup"><span data-stu-id="18efe-166">The orchestration then constructs a string using the party name, EDI.EncodingType and the string “Default”, and then looks for a batch configuration with a matching batch name.</span></span> <span data-ttu-id="18efe-167">この名前のバッチ構成が存在しない場合、このエラーがアプリケーション イベント ログに記録され、オーケストレーション インスタンスが中断されます。</span><span class="sxs-lookup"><span data-stu-id="18efe-167">If no batch configuration exists with this name, this error is logged to the Application event log and the orchestration instance is suspended.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="18efe-168">たとえば、パーティ名が Contoso で、EDI.EncodingType が X12 である場合、オーケストレーションでは "ContosoX12Default" という名前のバッチを検索します。</span><span class="sxs-lookup"><span data-stu-id="18efe-168">For example, if the party name is Contoso and the EDI.EncodingType is X12, the orchestration will look for a batch named ‘ContosoX12Default’.</span></span>  
  
 <span data-ttu-id="18efe-169">この問題を解決するには、アップグレード バッチ オーケストレーションによって構築された文字列に一致する名前のバッチが存在することを確認します。</span><span class="sxs-lookup"><span data-stu-id="18efe-169">To resolve this problem, ensure that a batch exists with a name that will match the string constructed by the upgrade batch orchestration.</span></span>  
  
## <a name="messages-marked-with-editobebatched--true-and-edidestinationparties-are-suspended"></a><span data-ttu-id="18efe-170">EDI.ToBeBatched = True および EDI.DestinationParties でマークされたメッセージが中断される</span><span class="sxs-lookup"><span data-stu-id="18efe-170">Messages Marked with EDI.ToBeBatched = True and EDI.DestinationParties are Suspended</span></span>  
 <span data-ttu-id="18efe-171">**現象**</span><span class="sxs-lookup"><span data-stu-id="18efe-171">**Symptoms**</span></span>  
  
 <span data-ttu-id="18efe-172">カスタム パイプライン コンポーネントを使用して、EDI.ToBeBatched に True を設定し、EDI.DestinationParties にパーティ ID のリストを設定することによりメッセージにバッチ用のマーキングを行う場合、メッセージはサブスクライバーが存在しないことを示すルーティング エラーにより中断されます。</span><span class="sxs-lookup"><span data-stu-id="18efe-172">When using a custom pipeline component to mark messages for batching by setting EDI.ToBeBatched = True and EDI.DestinationParties to a list of party IDs, the message will be suspended with a routing failure stating that there are no subscribers.</span></span>  
  
 <span data-ttu-id="18efe-173">**考えられる原因**</span><span class="sxs-lookup"><span data-stu-id="18efe-173">**Possible Cause**</span></span>  
  
 <span data-ttu-id="18efe-174">以前のバージョンの [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] では、メッセージを複数のバッチ構成で処理する必要がある場合、パーティ ID のスペース区切りリストを EDI.DestinationParties プロパティに設定していました。</span><span class="sxs-lookup"><span data-stu-id="18efe-174">In previous versions of [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)], when a message should be processed by multiple batch configurations you would set the EDI.DestinationParties property to a space delimited list of party IDs.</span></span> <span data-ttu-id="18efe-175">ルーティング オーケストレーションは、EDI.ToBeBatched が True に設定され、EDI.DestinationParties プロパティを持つメッセージをサブスクライブし、EDI.DestinationParties プロパティに含まれるパーティ ID のリストを使用して各 ID 用のメッセージを作成し、メッセージをバッチ オーケストレーションに渡していました。</span><span class="sxs-lookup"><span data-stu-id="18efe-175">The routing orchestration is subscribed to messages with the EDI.ToBeBatched = True and EDI.DestinationParties properties, and would use the list of party IDs contained in the EDI.DestinationParties property to create a message for each ID, and pass the messages to the batching orchestration.</span></span>  <span data-ttu-id="18efe-176">パーティ ID を使用してバッチを判断していたのは、各パーティ構成が保持できるバッチ構成が 1 つだけだったからです。</span><span class="sxs-lookup"><span data-stu-id="18efe-176">Determining the batch by using the party ID was used because each party configuration could have only one batch configuration.</span></span>  
  
 <span data-ttu-id="18efe-177">BizTalk Server で、各パーティはパーティ ID のみを使用して、使用するバッチ構成を決定するための十分なができなくなったために複数のバッチ構成を持つことができます。</span><span class="sxs-lookup"><span data-stu-id="18efe-177">In BizTalk Server, each party can have multiple batch configurations, so it is no longer sufficient to use only the pary ID to determine the batch configuration to use.</span></span>  <span data-ttu-id="18efe-178">メッセージを複数のバッチ構成で処理する必要があることを示すには、メッセージの EDI.BatchIDs プロパティに、メッセージの送信先であるバッチ ID のスペース区切りリストを設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="18efe-178">To indicate that a message must be processed by multiple batch configurations, the message must have the EDI.BatchIDs property set to a space delimited list of batch IDs that the message should be sent to.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="18efe-179">EDI.DestinationPartyId プロパティを使用して単一のパーティ ID のみによりマークされたメッセージを処理すると、メッセージはアップグレード バッチ オーケストレーションによって処理されます。</span><span class="sxs-lookup"><span data-stu-id="18efe-179">When processing messages marked with only a single party ID using the EDI.DestinationPartyId property, the message will be processed by the upgrade batching orchestration.</span></span> <span data-ttu-id="18efe-180">詳細については、次を参照してください。[バッチ EDI インターチェンジをアセンブル](../core/assembling-a-batched-edi-interchange.md)します。</span><span class="sxs-lookup"><span data-stu-id="18efe-180">For more information, see [Assembling a Batched EDI Interchange](../core/assembling-a-batched-edi-interchange.md).</span></span>  
  
 <span data-ttu-id="18efe-181">**解決方法**</span><span class="sxs-lookup"><span data-stu-id="18efe-181">**Resolution**</span></span>  
  
 <span data-ttu-id="18efe-182">EDI.DestinationParties プロパティではなく EDI.BatchIDs プロパティを設定するようにカスタム パイプライン コンポーネントをアップグレードします。</span><span class="sxs-lookup"><span data-stu-id="18efe-182">Upgrade the custom pipeline component so that it sets the EDI.BatchIDs property instead of EDI.DestinationParties.</span></span>  <span data-ttu-id="18efe-183">特定のバッチのバッチ ID は、各パーティの EDI プロパティの [バッチ] 設定ページで確認できます。</span><span class="sxs-lookup"><span data-stu-id="18efe-183">The batch ID for a specific batch can be found on the Batches settings page of EDI properties for each party.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="18efe-184">この問題は、BatchMarker パイプライン コンポーネントを使用してメッセージにバッチ用のマーキングを行う場合は発生しません。</span><span class="sxs-lookup"><span data-stu-id="18efe-184">This problem does not occur if the BatchMarker pipeline component is used to mark the message for batching.</span></span>  
  
## <a name="batch-filter-refresh-timeout-is-hardcoded-to-fifteen-minutes"></a><span data-ttu-id="18efe-185">バッチ フィルター更新タイムアウトが 15 分にハードコーディングされている</span><span class="sxs-lookup"><span data-stu-id="18efe-185">Batch Filter Refresh Timeout is Hardcoded to Fifteen Minutes</span></span>  
 <span data-ttu-id="18efe-186">バッチ フィルター条件を変更した場合、変更が有効になるまで 15 分かかります。</span><span class="sxs-lookup"><span data-stu-id="18efe-186">When modifying the batch filter criteria, it will take 15 minutes before the changes take effect.</span></span> <span data-ttu-id="18efe-187">この更新間隔は変更できません。</span><span class="sxs-lookup"><span data-stu-id="18efe-187">This refresh interval cannot be modified.</span></span> <span data-ttu-id="18efe-188">フィルターをすぐに有効にするには、BizTalk Server ホスト プロセスを再起動します。</span><span class="sxs-lookup"><span data-stu-id="18efe-188">To have the filter take effect immediately, restart the BizTalk Server host process.</span></span>  
  
## <a name="the-routingorchestration-suspends-after-reporting-an-uncaught-exception"></a><span data-ttu-id="18efe-189">不明な例外を報告した後に RoutingOrchestration が中断される</span><span class="sxs-lookup"><span data-stu-id="18efe-189">The RoutingOrchestration Suspends After Reporting an Uncaught Exception</span></span>  
 <span data-ttu-id="18efe-190">**現象**</span><span class="sxs-lookup"><span data-stu-id="18efe-190">**Symptoms**</span></span>  
  
 <span data-ttu-id="18efe-191">複数のバッチ構成に送信されるドキュメントを処理する場合、XLANG/s からアプリケーション イベント ログに、不明な例外により Microsoft.BizTalk.Edi.RoutingOrchestration.BatchRoutingService で障害が発生したというエラーが送信されることがあります。</span><span class="sxs-lookup"><span data-stu-id="18efe-191">When processing documents that are destined for multiple batch configurations, you may receive an error in the Application Event Log from XLANG/s starting that the Microsoft.BizTalk.Edi.RoutingOrchestration.BatchRoutingService failed due to an uncaught exception.</span></span>  
  
 <span data-ttu-id="18efe-192">**考えられる原因**</span><span class="sxs-lookup"><span data-stu-id="18efe-192">**Possible Cause**</span></span>  
  
 <span data-ttu-id="18efe-193">このエラーは、RoutingOrchestration が BatchingOrchestration にメッセージを送信したときに、BatchingOrchestration インスタンスが起動していなかった場合に発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="18efe-193">This error can occur when the RoutingOrchestration attempts to send a message to the BatchingOrchestration and the BatchingOrchestration instance is not started.</span></span>  
  
 <span data-ttu-id="18efe-194">**解決方法**</span><span class="sxs-lookup"><span data-stu-id="18efe-194">**Resolution**</span></span>  
  
 <span data-ttu-id="18efe-195">バッチ処理するドキュメントを送信する前に、BatchingOrchestration インスタンスが実行されていることを確認します。</span><span class="sxs-lookup"><span data-stu-id="18efe-195">Ensure that the BatchingOrchestration instances are running before submitting documents to be batched.</span></span>  
  
## <a name="many-active-batches-may-cause-the-biztalkmsgboxdb-logfile-to-grow-large"></a><span data-ttu-id="18efe-196">多数のアクティブ バッチにより、BizTalkMsgBoxDb ログファイルが大きくなることがある</span><span class="sxs-lookup"><span data-stu-id="18efe-196">Many Active Batches May Cause the BizTalkMsgBoxDb Logfile to Grow Large</span></span>  
 <span data-ttu-id="18efe-197">**現象**</span><span class="sxs-lookup"><span data-stu-id="18efe-197">**Symptoms**</span></span>  
  
 <span data-ttu-id="18efe-198">複数のバッチを開始した後で、BizTalk メッセージ ボックス データベース (BizTalkMsgBoxDb) のトランザクション ログのサイズが大きくなることがあります。</span><span class="sxs-lookup"><span data-stu-id="18efe-198">After starting several batches, you may notice that the transaction log for the BizTalk message box database (BizTalkMsgBoxDb) has grown to a large size.</span></span>  
  
 <span data-ttu-id="18efe-199">**考えられる原因**</span><span class="sxs-lookup"><span data-stu-id="18efe-199">**Possible Cause**</span></span>  
  
 <span data-ttu-id="18efe-200">この問題は、バッチ リリースの間隔を短くするリリース条件 (たとえば、バッチを 1 分ごとにリリースする) で大量のバッチを開始した場合に発生する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="18efe-200">This problem can occur if you have a large number of batches started with release criteria that causes a short interval between batch releases (for example, a batch that is scheduled to release every minute).</span></span>  
  
 <span data-ttu-id="18efe-201">バッチを開始したときに作成されるバッチ オーケストレーション インスタンスは、実行時間の長いプロセスであり、バッチのリリース後にデータベースに保持されます。</span><span class="sxs-lookup"><span data-stu-id="18efe-201">The batching orchestration instance that is created when you start a batch is a long running process that persists to the database after releasing a batch.</span></span> <span data-ttu-id="18efe-202">オーケストレーションが保持されるたびに、保持に含まれるトランザクションにより、トランザクション ログのサイズが大きくなります。</span><span class="sxs-lookup"><span data-stu-id="18efe-202">Each time the orchestration persists, the transaction log will grow due to the transactions involved in persistence.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="18efe-203">バッチ オーケストレーションが保持されている間に、トランザクション ログは約 30 KB 大きくなります。</span><span class="sxs-lookup"><span data-stu-id="18efe-203">The batching orchestration will grow the transaction log by approximately 30kb during persistence.</span></span>  
  
 <span data-ttu-id="18efe-204">**解決方法**</span><span class="sxs-lookup"><span data-stu-id="18efe-204">**Resolution**</span></span>  
  
 <span data-ttu-id="18efe-205">この問題を解決するには、バッチ リリースの間隔が長くなるようにリリース条件を変更します。</span><span class="sxs-lookup"><span data-stu-id="18efe-205">To resolve this problem, modify the release criteria to increase the time between batch releases.</span></span> <span data-ttu-id="18efe-206">詳細については、次を参照してください。 [(X12) をバッチ処理構成](../core/configuring-batching-x12.md)します。</span><span class="sxs-lookup"><span data-stu-id="18efe-206">For more information, see [Configuring Batching (X12)](../core/configuring-batching-x12.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="18efe-207">参照</span><span class="sxs-lookup"><span data-stu-id="18efe-207">See Also</span></span>  
 <span data-ttu-id="18efe-208">[EDI 受信確認の構成](../core/configuring-edi-acknowledgments.md) </span><span class="sxs-lookup"><span data-stu-id="18efe-208">[Configuring EDI Acknowledgments](../core/configuring-edi-acknowledgments.md) </span></span>  
 <span data-ttu-id="18efe-209">[受信バッチの処理](../core/processing-incoming-batches.md) </span><span class="sxs-lookup"><span data-stu-id="18efe-209">[Processing Incoming Batches](../core/processing-incoming-batches.md) </span></span>  
 <span data-ttu-id="18efe-210">[送信 EDI メッセージをバッチ処理](../core/batching-outgoing-edi-messages.md) </span><span class="sxs-lookup"><span data-stu-id="18efe-210">[Batching Outgoing EDI Messages](../core/batching-outgoing-edi-messages.md) </span></span>  
 [<span data-ttu-id="18efe-211">EDI バッチの構成</span><span class="sxs-lookup"><span data-stu-id="18efe-211">Configuring EDI Batches</span></span>](../core/configuring-edi-batches.md)