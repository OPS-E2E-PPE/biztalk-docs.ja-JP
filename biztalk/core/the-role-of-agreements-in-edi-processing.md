---
title: "EDI 処理におけるアグリーメントのロール |Microsoft ドキュメント"
ms.custom: 
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: d81b0449-6656-49f7-a781-5fd60031b3d5
caps.latest.revision: "25"
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 9986f22108382f1b1128079b8ff8c31902ca2979
ms.sourcegitcommit: cb908c540d8f1a692d01dc8f313e16cb4b4e696d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/20/2017
---
# <a name="the-role-of-agreements-in-edi-processing"></a><span data-ttu-id="8c6ca-102">EDI 処理におけるアグリーメントのロール</span><span class="sxs-lookup"><span data-stu-id="8c6ca-102">The Role of Agreements in EDI Processing</span></span>
<span data-ttu-id="8c6ca-103">組織は [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] を使用して、1 つ以上の取引先との間で EDI メッセージを送受信します。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-103">An organization uses [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] to receive EDI messages from, and send EDI messages to, one or more trading partners.</span></span> <span data-ttu-id="8c6ca-104">取引先は、組織内の Business Entities であるビジネス プロファイルを順番に定義します。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-104">The trading partners, in turn define business profiles that are business entities within an organization.</span></span> <span data-ttu-id="8c6ca-105">ビジネス プロファイルがメッセージを交換する方法は、2 つのビジネス プロファイル間の取引先アグリーメントとして定義されます。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-105">How business profiles exchange messages is defined as part of trading partner agreements between two business profiles.</span></span> <span data-ttu-id="8c6ca-106">詳細については、次を参照してください。[取引先管理ソリューションのビルド ブロック](../core/building-blocks-of-a-trading-partner-management-solution.md)です。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-106">For more information, see [Building Blocks of a Trading Partner Management Solution](../core/building-blocks-of-a-trading-partner-management-solution.md).</span></span>  
  
 <span data-ttu-id="8c6ca-107">取引先アグリーメントは、取引先管理 (TPM) ユーザー インターフェイスで作成します。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-107">You create a trading partner agreement in the Trading Partner Management (TPM) user interface.</span></span> <span data-ttu-id="8c6ca-108">TPM の画面は、**パーティ**のノード、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールです。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-108">The TPM screens are in the **Parties** node of the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration Console.</span></span>  
  
## <a name="configuring-an-agreement-for-edi-processing"></a><span data-ttu-id="8c6ca-109">EDI 処理のためのアグリーメントの構成</span><span class="sxs-lookup"><span data-stu-id="8c6ca-109">Configuring an Agreement for EDI Processing</span></span>  
 <span data-ttu-id="8c6ca-110">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] を使用して EDI メッセージを交換するすべての取引先は、通信パラメーターについて合意する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-110">All trading partners that will be exchanging EDI messages using [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] must agree upon communication parameters.</span></span> <span data-ttu-id="8c6ca-111">その後、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] をホストする組織は TPM で取引先を作成し (自身の取引先を含む)、ビジネス プロファイルおよびビジネス プロファイル間の取引先アグリーメントを作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-111">After they have done this, the organization hosting [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] must create the trading partners in TPM (including a trading partner for itself), create the business profiles, and the trading partner agreement between the business profiles.</span></span> <span data-ttu-id="8c6ca-112">取引先アグリーメントの一部として、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] が取引先のビジネス プロファイルと EDI メッセージを送受信する方法のプロパティを設定します。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-112">As part of the trading partner agreement, you set the properties for how [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] receives an EDI message from, and send an EDI message to, the trading partner’s business profile.</span></span> <span data-ttu-id="8c6ca-113">その後、他の取引先でも同じことを行います。メッセージを交換するためには、構成が互換である必要があります。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-113">On their end, the other trading partners must do the same, and to exchange messages, the configurations must be compatible.</span></span>  
  
 <span data-ttu-id="8c6ca-114">EDI 通信用に以下のプロパティを定義する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-114">You must define the following sets of properties for EDI communications.</span></span>  
  
-   <span data-ttu-id="8c6ca-115">名前、送信ポート、署名証明書など、取引先の全般的な性質を定義する取引先プロパティ。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-115">Trading partner properties that define general aspects of the trading partner, such as name, send ports, and the signing certificate.</span></span>  
  
-   <span data-ttu-id="8c6ca-116">ビジネス ID を定義する、ビジネス プロファイル プロパティ。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-116">Business profile properties that define the business identities.</span></span>  
  
-   <span data-ttu-id="8c6ca-117">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] が取引先からの受信メッセージを処理する方法と、その取引先宛ての送信メッセージを生成する方法を定義する、取引先アグリーメントの一部としての EDI プロパティ。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-117">EDI properties, as part of the trading partner agreement, that defines how [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will process an incoming message from a trading partner and how it will generate an outgoing message bound to the trading partner.</span></span>  
  
-   <span data-ttu-id="8c6ca-118">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] での受信と送信の両方の AS2 通信の実行方法を定義する、取引先アグリーメントの一部としての AS2 プロパティ。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-118">AS2 properties, as part of the trading partner agreement, that defines how [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will perform AS2 communications, both incoming and outgoing.</span></span> <span data-ttu-id="8c6ca-119">これらのプロパティは、EDI メッセージが AS2 上で通信されるときにのみ EDI 通信に影響を与えます。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-119">These properties affect EDI communications only when an EDI message is sent over AS2.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="8c6ca-120">同一のビジネス プロファイル間の AS2 アグリーメントおよび EDI メッセージング アグリーメントは、個別に指定されます。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-120">The AS2 agreement and the EDI messaging agreement between the same business profiles are specified separately.</span></span> <span data-ttu-id="8c6ca-121">この 2 つのアグリーメントが組み合わさり、パートナーシップを形成します。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-121">The two agreements together form a partnership.</span></span>  
  
 <span data-ttu-id="8c6ca-122">取引先アグリーメントのプロパティは、以下の処理を決定します。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-122">Trading partner agreement properties determine the following specific processing:</span></span>  
  
-   <span data-ttu-id="8c6ca-123">EDI エンベロープの処理と生成</span><span class="sxs-lookup"><span data-stu-id="8c6ca-123">EDI envelope processing and generation</span></span>  
  
-   <span data-ttu-id="8c6ca-124">受信確認の処理と生成</span><span class="sxs-lookup"><span data-stu-id="8c6ca-124">ACK processing and generation</span></span>  
  
-   <span data-ttu-id="8c6ca-125">受信と送信の EDI メッセージの検証</span><span class="sxs-lookup"><span data-stu-id="8c6ca-125">Validation of incoming and outgoing EDI messages</span></span>  
  
-   <span data-ttu-id="8c6ca-126">バッチ作成</span><span class="sxs-lookup"><span data-stu-id="8c6ca-126">Batch creation</span></span>  
  
-   <span data-ttu-id="8c6ca-127">状態レポート</span><span class="sxs-lookup"><span data-stu-id="8c6ca-127">Status reporting</span></span>  
  
 <span data-ttu-id="8c6ca-128">ビジネス id があります、特定の値など**D-U-N、S (Dun & Bradstreet)**です。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-128">For business identities, there can be specific values, such as **D-U-N-S (Dun & Bradstreet)**.</span></span> <span data-ttu-id="8c6ca-129">固有の名前は、Duns に対して "01" というように、固有の修飾子を持ちます。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-129">Specific names have specific qualifiers, such as "01" for Duns.</span></span> <span data-ttu-id="8c6ca-130">ビジネス ID 名が固有でない場合、X12 でエンコードされたメッセージでは "ZZ" を使用し、EDIFACT でエンコードされたメッセージでは "ZZZ" を使用します。これにより、互いに個別のエンティティによって定義されていることを示します。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-130">When a business identity name is not specific, "ZZ" is used for X12-encoded messages and "ZZZ" is used for EDIFACT-encoded messages, indicating a name mutually defined by separate entities.</span></span> <span data-ttu-id="8c6ca-131">この値と修飾子により、ビジネス プロファイルが識別されます。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-131">The value and qualifier then identifies the business profile.</span></span> <span data-ttu-id="8c6ca-132">ビジネス ID 名は情報提供のみを目的とし、BizTalk ランタイムでの処理に使用されることはありません。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-132">The name of the business identity is for informational purposes only; it is not used by the BizTalk runtime for processing.</span></span>  
  
## <a name="determining-an-agreement-for-edi-processing"></a><span data-ttu-id="8c6ca-133">EDI 処理のためのアグリーメントの決定</span><span class="sxs-lookup"><span data-stu-id="8c6ca-133">Determining an Agreement for EDI Processing</span></span>  
 <span data-ttu-id="8c6ca-134">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] は、EDI メッセージを受信するたびに、メッセージの解決先となる取引先アグリーメントを特定しようと試みます。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-134">Any time [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] receives an EDI message, it attempts to determine the trading partner agreement that the message resolves to.</span></span> <span data-ttu-id="8c6ca-135">アグリーメントの一部として定義されている送信者の修飾子、送信者の ID、受信者の修飾子、受信者の ID をメッセージと照合することで、取引先アグリーメントを解決しようとします。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-135">It attempts to resolve the trading partner agreement by making a match between the message and the sender qualifier, sender identifier, receiver qualifier, and receiver identifier defined as part of the agreement.</span></span> <span data-ttu-id="8c6ca-136">このプロセスの詳細については、次を参照してください。[アグリーメントの解決、スキーマ探索、および受信した EDI メッセージの承認](../core/agreement-resolution-schema-discovery-and-authorization-for-received-edi.md)です。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-136">For more details on this process, see [Agreement Resolution, Schema Discovery, and Authorization for Received EDI Messages](../core/agreement-resolution-schema-discovery-and-authorization-for-received-edi.md).</span></span>  
  
 <span data-ttu-id="8c6ca-137">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] は、送信する EDI メッセージを生成するたびに、メッセージの送信先のビジネス プロファイルと関連付けられたアグリーメントを特定しようと試みます。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-137">Any time [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] generates an EDI message to send, it attempts to determine the agreement that associates with the business profile to which the message will be sent.</span></span> <span data-ttu-id="8c6ca-138">以下のいずれかを使用して、メッセージとアグリーメントを照合することで、アグリーメントを解決しようとします。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-138">It attempts to resolve the agreement by making a match between the message and the agreement using any of the following:</span></span>  
  
-   <span data-ttu-id="8c6ca-139">コンテキスト プロパティ AgreementPartIdForSend</span><span class="sxs-lookup"><span data-stu-id="8c6ca-139">Context property AgreementPartIdForSend</span></span>  
  
-   <span data-ttu-id="8c6ca-140">コンテキスト プロパティ AgreementNameForSend、SenderPartyNameForSend、および ReceiverPartyNameForSend</span><span class="sxs-lookup"><span data-stu-id="8c6ca-140">Context properties AgreementNameForSend, SenderPartyNameForSend, and ReceiverPartyNameForSend</span></span>  
  
-   <span data-ttu-id="8c6ca-141">送信者の修飾子と ID、および受信者の修飾子と ID</span><span class="sxs-lookup"><span data-stu-id="8c6ca-141">Sender qualifiers and identifiers, and receiver qualifiers and identifiers</span></span>  
  
-   <span data-ttu-id="8c6ca-142">送信ポート名</span><span class="sxs-lookup"><span data-stu-id="8c6ca-142">Send port name</span></span>  
  
 <span data-ttu-id="8c6ca-143">このプロセスの詳細については、次を参照してください。[アグリーメントの解決と送信 EDI メッセージのスキーマの決定](../core/agreement-resolution-and-schema-determination-for-outgoing-edi-messages.md)です。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-143">For more details on this process, see [Agreement Resolution and Schema Determination for Outgoing EDI Messages](../core/agreement-resolution-and-schema-determination-for-outgoing-edi-messages.md).</span></span>  
  
## <a name="using-edi-global-properties"></a><span data-ttu-id="8c6ca-144">EDI グローバル プロパティの使用</span><span class="sxs-lookup"><span data-stu-id="8c6ca-144">Using EDI Global Properties</span></span>  
 <span data-ttu-id="8c6ca-145">[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] が受信メッセージまたは送信メッセージのアグリーメントを特定できない場合は、フォールバック アグリーメントを使用して、受信インターチェンジの処理や送信インターチェンジの生成を行います。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-145">If [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] cannot determine the agreement for either an incoming or outgoing message, it will use the fallback agreement to process the incoming interchange or generate the outgoing interchange.</span></span> <span data-ttu-id="8c6ca-146">フォールバック アグリーメントの設定を右クリックして、**パーティ**内のノード、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]管理コンソールとクリックして**X12 フォールバック設定**(X12 でエンコードされたメッセージはまたは**EDIFACT フォールバックの設定**(EDIFACT でエンコードされたメッセージ)。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-146">The fallback agreements are set by right-clicking the **Parties** node in the [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] Administration Console and clicking **X12 Fallback Settings** (for X12-encoded messages) or **EDIFACT Fallback Settings** (EDIFACT-encoded messages).</span></span> <span data-ttu-id="8c6ca-147">グローバル プロパティの詳細については、次を参照してください。[構成のグローバルまたはフォールバック アグリーメントのプロパティ](../core/configuring-global-or-fallback-agreement-properties.md)です。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-147">For more information on global properties, see [Configuring Global or Fallback Agreement Properties](../core/configuring-global-or-fallback-agreement-properties.md).</span></span>  
  
> [!NOTE]
>  [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)]<span data-ttu-id="8c6ca-148"> は、インターチェンジのアグリーメントが特定できない場合のみ、フォールバック アグリーメントを使用します。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-148"> will use fallback agreement only if it cannot determine the agreement for an interchange.</span></span> <span data-ttu-id="8c6ca-149">アグリーメントが特定された場合、[!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] は、2 つの取引先間のアグリーメントに定義されていないプロパティのフォールバック アグリーメントからのプロパティ値は使用しません。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-149">If an agreement has been determined, [!INCLUDE[btsBizTalkServerNoVersion](../includes/btsbiztalkservernoversion-md.md)] will not use a property value from the fallback agreement for a property that has not been defined for the agreement between two trading partners.</span></span>  
  
 <span data-ttu-id="8c6ca-150">フォールバック プロパティは、ポート設定で認証が必要な場合は使用されません。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-150">Fallback agreements will not be used if port settings require authentication.</span></span> <span data-ttu-id="8c6ca-151">受信ポートのポートの設定に認証が必要なかどうか (いずれか**認証が失敗した場合は、メッセージをドロップ**または**認証が失敗した場合は、メッセージを保持する**で選択した、**全般**のページ、**受信ポートのプロパティ** ダイアログ ボックス)、アグリーメントは、受信ポートで受信したインターチェンジに必要です。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-151">If the port settings for a receive port require authentication (if either **Drop messages if authentication fails** or **Keep messages if authentication fails** is selected on the **General** page of the **Receive Port Properties** dialog box), an agreement is required for any interchange received by the receive port.</span></span> <span data-ttu-id="8c6ca-152">この場合、フォールバック アグリーメントは使用されません。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-152">In this case, fallback agreements are not used.</span></span> <span data-ttu-id="8c6ca-153">インターチェンジのアグリーメントが特定できない場合、インターチェンジは認証が失敗したように扱われ、保留にされます。</span><span class="sxs-lookup"><span data-stu-id="8c6ca-153">If no agreement is determined for an interchange, the interchange will be treated as though authentication had failed, and will be suspended.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8c6ca-154">参照</span><span class="sxs-lookup"><span data-stu-id="8c6ca-154">See Also</span></span>  
 <span data-ttu-id="8c6ca-155">[アグリーメントの解決、スキーマ探索、および受信した EDI メッセージの承認](../core/agreement-resolution-schema-discovery-and-authorization-for-received-edi.md) </span><span class="sxs-lookup"><span data-stu-id="8c6ca-155">[Agreement Resolution, Schema Discovery, and Authorization for Received EDI Messages](../core/agreement-resolution-schema-discovery-and-authorization-for-received-edi.md) </span></span>  
 <span data-ttu-id="8c6ca-156">[アグリーメントの解決と送信 EDI メッセージのスキーマの決定](../core/agreement-resolution-and-schema-determination-for-outgoing-edi-messages.md) </span><span class="sxs-lookup"><span data-stu-id="8c6ca-156">[Agreement Resolution and Schema Determination for Outgoing EDI Messages](../core/agreement-resolution-and-schema-determination-for-outgoing-edi-messages.md) </span></span>  
 <span data-ttu-id="8c6ca-157">[EDI のプロパティを構成します。](../core/configuring-edi-properties.md) </span><span class="sxs-lookup"><span data-stu-id="8c6ca-157">[Configuring EDI Properties](../core/configuring-edi-properties.md) </span></span>  
 <span data-ttu-id="8c6ca-158">[グローバルまたはフォールバック アグリーメント プロパティの構成](../core/configuring-global-or-fallback-agreement-properties.md) </span><span class="sxs-lookup"><span data-stu-id="8c6ca-158">[Configuring Global or Fallback Agreement Properties](../core/configuring-global-or-fallback-agreement-properties.md) </span></span>  
 [<span data-ttu-id="8c6ca-159">EDI パーティに関する既知の問題</span><span class="sxs-lookup"><span data-stu-id="8c6ca-159">Known Issues with EDI Parties</span></span>](../core/known-issues-with-edi-parties.md)