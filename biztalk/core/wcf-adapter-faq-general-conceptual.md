---
title: 'WCF アダプター FAQ: 一般的概念 |Microsoft ドキュメント'
ms.custom: ''
ms.date: 06/08/2017
ms.prod: biztalk-server
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: bbeac135-3ba8-4b0b-a8ca-4eb5eb3d3ca3
caps.latest.revision: 8
author: MandiOhlinger
ms.author: mandia
manager: anneta
ms.openlocfilehash: 6a33e6ba26f0ba97cb10aa2f9ee728683719dd66
ms.sourcegitcommit: 3fc338e52d5dbca2c3ea1685a2faafc7582fe23a
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/01/2017
ms.locfileid: "26009251"
---
# <a name="wcf-adapter-faq-general-conceptual"></a><span data-ttu-id="20496-102">WCF アダプターに関するよく寄せられる質問: 一般的概念</span><span class="sxs-lookup"><span data-stu-id="20496-102">WCF Adapter FAQ: General Conceptual</span></span>
<span data-ttu-id="20496-103">ここでは、Windows(R) Communication Foundation (WCF) アダプターに関してよく寄せられる一般的な質問および概念的な質問の一部に回答します。</span><span class="sxs-lookup"><span data-stu-id="20496-103">Below are some frequently asked general and conceptual questions about Windows® Communication Foundation (WCF) adapters.</span></span>  
  
## <a name="what-is-a-wcf-adapter"></a><span data-ttu-id="20496-104">WCF アダプターとは何ですか。</span><span class="sxs-lookup"><span data-stu-id="20496-104">What is a WCF adapter?</span></span>  
 <span data-ttu-id="20496-105">BizTalk アダプターは、Microsoft(R) BizTalk(R) Server が外部と通信するときに中心的な役割を果たします。</span><span class="sxs-lookup"><span data-stu-id="20496-105">A BizTalk adapter is a key part of the way Microsoft® BizTalk® Server communicates with the outside world.</span></span> <span data-ttu-id="20496-106">WCF アダプターは、BizTalk アプリケーションで WCF エンドポイントとメッセージをやり取りする必要が生じた場合に、両者間の通信プロセスを管理するコンポーネントです。</span><span class="sxs-lookup"><span data-stu-id="20496-106">A WCF adapter is a component that manages the communication process between a BizTalk application and its need to send messages to, and receive messages from, a WCF endpoint.</span></span> <span data-ttu-id="20496-107">BizTalk Server では、WCF アダプターは WCF バインドとして公開されます。</span><span class="sxs-lookup"><span data-stu-id="20496-107">With the BizTalk Server, WCF adapters are exposed as WCF bindings.</span></span> <span data-ttu-id="20496-108">このため、WCF バインドを使用できるすべての WCF アプリケーションは、BizTalk Server を介さずに直接 WCF アダプターと通信できます。</span><span class="sxs-lookup"><span data-stu-id="20496-108">This means that any WCF application that can use a WCF binding can communicate with the WCF adapters directly, without needing BizTalk Server to intervene.</span></span> <span data-ttu-id="20496-109">しかし、BizTalk Server を介して WCF アダプターを使用することで、BizTalk Server によるアプリケーション インフラストラクチャ上のメリットを数多く享受できます。</span><span class="sxs-lookup"><span data-stu-id="20496-109">However, using the WCF adapters through BizTalk Server gives you many of the application infrastructure benefits that BizTalk Server provides.</span></span> <span data-ttu-id="20496-110">ここでは、主に BizTalk Server 環境から WCF アダプターを使用する方法についてよく寄せられる質問にお答えします。</span><span class="sxs-lookup"><span data-stu-id="20496-110">The focus of these FAQs is primarily using the WCF adapters from within the BizTalk Server environment.</span></span>  
  
 <span data-ttu-id="20496-111">WCF アダプターを使用すると、BizTalk Server で WCF バインドを使用して WCF メッセージを送受信できます。</span><span class="sxs-lookup"><span data-stu-id="20496-111">A WCF adapter allows BizTalk Server to use the WCF bindings to send and receive WCF messages.</span></span> <span data-ttu-id="20496-112">WCF クライアント アプリケーションは、WCF メッセージを BizTalk の受信場所に送信できます。ここでは、WCF 受信アダプターがメッセージを受信します。</span><span class="sxs-lookup"><span data-stu-id="20496-112">A WCF client application can send a WCF message to a BizTalk receive location, where the message is received by a WCF receive adapter.</span></span> <span data-ttu-id="20496-113">WCF 受信アダプターは、受信した WCF メッセージを BizTalk メッセージに変換します。</span><span class="sxs-lookup"><span data-stu-id="20496-113">The adapter takes the WCF message and converts it to a BizTalk message.</span></span> <span data-ttu-id="20496-114">変換のしくみは、BizTalk Server 管理コンソールを使用して構成される、アダプター構成の実際の設定によって異なります。</span><span class="sxs-lookup"><span data-stu-id="20496-114">How the conversion takes place depends upon certain adapter configuration settings which are configured using the BizTalk Server Administration console.</span></span> <span data-ttu-id="20496-115">受信アダプターは、BizTalk メッセージを内部の BizTalk MessageBox データベースに送信します。</span><span class="sxs-lookup"><span data-stu-id="20496-115">The adapter submits the BizTalk message to the internal BizTalk MessageBox database.</span></span> <span data-ttu-id="20496-116">これに対応して、WCF アダプターを使用する BizTalk 送信ポートは、このメッセージの種類をサブスクライブして BizTalk メッセージを受信し、WCF メッセージに変換して、サポートされている WCF プロトコルのいずれかを使用して WCF サービス エンドポイントに送信します。</span><span class="sxs-lookup"><span data-stu-id="20496-116">Correspondingly, a BizTalk send port using a WCF adapter can subscribe to this message type, obtain the BizTalk message, convert it to a WCF message, and transmit the WCF message to a WCF service endpoint using one of the supported WCF protocols.</span></span>  
  
 <span data-ttu-id="20496-117">BizTalk Server から WCF アダプターを使用することで、BizTalk-WCF 併用のアプリケーション ソリューションに伴う煩雑な作業 (通信プロトコルの選択と実装、セキュリティ問題への対応、トランザクションの処理など) は不要になります。</span><span class="sxs-lookup"><span data-stu-id="20496-117">Using the WCF adapters from within BizTalk Server abstracts the hidden complexities of a BizTalk-WCF application solution, such as the choice and implementation of communication protocols, security issues, and transactional operations.</span></span>  
  
## <a name="what-are-the-wcf-adapter-bindings"></a><span data-ttu-id="20496-118">WCF アダプター バインドとは何ですか。</span><span class="sxs-lookup"><span data-stu-id="20496-118">What are the WCF adapter bindings?</span></span>  
 <span data-ttu-id="20496-119">WCF バインドは、次の 2 つのカテゴリのいずれかに分類されます。</span><span class="sxs-lookup"><span data-stu-id="20496-119">WCF bindings fall into one of two categories:</span></span>  
  
-   <span data-ttu-id="20496-120">**カスタム バインド:** 特別なカスタム バインドが存在するバインドの柔軟性を向上させます。</span><span class="sxs-lookup"><span data-stu-id="20496-120">**Custom Bindings:** For increased binding flexibility, the special custom binding exists.</span></span> <span data-ttu-id="20496-121">カスタム バインドを使用することで、標準バインドでは対応できない通信状況に対応できます。</span><span class="sxs-lookup"><span data-stu-id="20496-121">This covers communication situations that require deviations from the standard bindings.</span></span> <span data-ttu-id="20496-122">WCF-Custom アダプターおよび WCF-CustomIsolated アダプターを使用すると、バインドを広範囲にわたってカスタマイズできます。</span><span class="sxs-lookup"><span data-stu-id="20496-122">The WCF-Custom and WCF-CustomIsolated adapters allow development of extensive binding customizations.</span></span> <span data-ttu-id="20496-123">これは、既存のバインド要素 (BindingElement クラス) を組み合わせて動作 (Behavior クラス) を適用できるようにすることで実現します。</span><span class="sxs-lookup"><span data-stu-id="20496-123">This is done by allowing the composition of existing binding elements (the BindingElement class) and the application of behaviors (the Behavior class).</span></span>  
  
-   <span data-ttu-id="20496-124">**標準バインド:** マイクロソフトの目標は、最も一般的な通信シナリオに焦点を当てたアダプターを開発することです。</span><span class="sxs-lookup"><span data-stu-id="20496-124">**Standard bindings:** Microsoft’s goal is to develop adapters focused on the most common communication scenarios.</span></span> <span data-ttu-id="20496-125">標準バインドを使用することで、通信プロトコルに関する詳細な設定の多くが不要になるため、開発に必要な作業を簡略化できます。</span><span class="sxs-lookup"><span data-stu-id="20496-125">Using standard bindings simplifies the developer’s experience by hiding many details of the communication protocols.</span></span> <span data-ttu-id="20496-126">BizTalk Server での WCF アダプターのセットでは、.NET Framework 4.0 WCF ライブラリで使用可能なバインドのセットが反映されます。</span><span class="sxs-lookup"><span data-stu-id="20496-126">The set of WCF adapters in BizTalk Server reflects the set of bindings available in the .NET Framework 4.0 WCF libraries.</span></span> <span data-ttu-id="20496-127">標準バインドは、一般的なバインドのパターンを簡単に使用できるようにするために、.NET WCF ライブラリに導入されました。</span><span class="sxs-lookup"><span data-stu-id="20496-127">Standard bindings were introduced to the .NET WCF libraries to make typical binding patterns easier to use.</span></span> <span data-ttu-id="20496-128">これらのバインドは、最も一般的に使用される通信シナリオに対応しており、次の種類に分類されます。</span><span class="sxs-lookup"><span data-stu-id="20496-128">They cover the most commonly used communication scenarios and include:</span></span>  
  
    -   <span data-ttu-id="20496-129">WCF-WsHttp</span><span class="sxs-lookup"><span data-stu-id="20496-129">WCF-WsHttp</span></span>  
  
    -   <span data-ttu-id="20496-130">WCF-BasicHttp</span><span class="sxs-lookup"><span data-stu-id="20496-130">WCF-BasicHttp</span></span>  
  
    -   <span data-ttu-id="20496-131">WCF-NetTcp</span><span class="sxs-lookup"><span data-stu-id="20496-131">WCF-NetTcp</span></span>  
  
    -   <span data-ttu-id="20496-132">WCF-NetMsmg</span><span class="sxs-lookup"><span data-stu-id="20496-132">WCF-NetMsmg</span></span>  
  
    -   <span data-ttu-id="20496-133">WCF-NetNamedPipe</span><span class="sxs-lookup"><span data-stu-id="20496-133">WCF-NetNamedPipe</span></span>  
  
 <span data-ttu-id="20496-134">BizTalk Server R2 には、次の WCF アダプターが用意されています。</span><span class="sxs-lookup"><span data-stu-id="20496-134">BizTalk Server R2 ships with the following WCF adapters:</span></span>  
  
1.  <span data-ttu-id="20496-135">**Wcf-wshttp アダプター:** Ws-\* 標準の HTTP トランスポート経由でサポートされます。</span><span class="sxs-lookup"><span data-stu-id="20496-135">**WCF-WSHttp adapter:**  Provides the WS-\* standards support over the HTTP transport.</span></span> <span data-ttu-id="20496-136">WCF-WSHttp アダプターは、外部アプリケーションと MessageBox データベース間のトランザクション上の対話に WS-Transaction、メッセージ セキュリティと認証に WS-Security という仕様を実装します。</span><span class="sxs-lookup"><span data-stu-id="20496-136">The WCF-WSHttp adapter implements the following specifications: WS-Transaction for the transactional interactions between external applications and the MessageBox database, and WS-Security for message security and authentication.</span></span> <span data-ttu-id="20496-137">トランスポートは HTTP または HTTPS、およびメッセージのエンコードは、テキストまたはメッセージ Transmission Optimization Mechanism (MTOM) エンコードです。</span><span class="sxs-lookup"><span data-stu-id="20496-137">The transport is HTTP or HTTPS, and message encoding is a text or Message Transmission Optimization Mechanism (MTOM) encoding.</span></span>  
  
2.  <span data-ttu-id="20496-138">**Wcf-basichttp アダプター:** ASMX ベースの Web サービスとクライアント、および、WS に準拠するその他のサービスとの通信の Basic Profile 1.1 です。</span><span class="sxs-lookup"><span data-stu-id="20496-138">**WCF-BasicHttp adapter:** Communicates with ASMX-based Web services and clients and other services that conform to the WS-I Basic Profile 1.1.</span></span> <span data-ttu-id="20496-139">トランスポートは HTTP または HTTPS で、メッセージ エンコードは Text エンコードです。</span><span class="sxs-lookup"><span data-stu-id="20496-139">The transport is HTTP or HTTPS, and message encoding is a text encoding.</span></span>  
  
3.  <span data-ttu-id="20496-140">**Wcf-nettcp アダプター:** Ws-\* 標準を TCP トランスポート経由でサポートされます。</span><span class="sxs-lookup"><span data-stu-id="20496-140">**WCF-NetTcp adapter:** Provides the WS-\* standards support over the TCP transport.</span></span> <span data-ttu-id="20496-141">WCF-NetTcp アダプターは、通信の効率を向上させると共に、外部アプリケーションと MessageBox データベース間のトランザクション上の対話に WS-Transaction、メッセージ セキュリティと認証に WS-Security という仕様を実装します。</span><span class="sxs-lookup"><span data-stu-id="20496-141">The WCF-NetTcp adapter provides efficient communication and implements the following specifications: WS-Transaction for the transactional interactions between external applications and the MessageBox database, and WS-Security for message security and authentication.</span></span> <span data-ttu-id="20496-142">トランスポートは TCP で、メッセージのエンコードはバイナリ エンコードです。</span><span class="sxs-lookup"><span data-stu-id="20496-142">The transport is TCP, and message encoding is binary encoding.</span></span>  
  
4.  <span data-ttu-id="20496-143">**Wcf-netmsmq アダプター:** アプリケーション、失敗の切り分け、負荷平準化を組み合わせるし、操作の切断を活用してメッセージ キュー (MSMQ とも呼ばれます) のサポートをトランスポートとして疎キューのサポートを提供します。</span><span class="sxs-lookup"><span data-stu-id="20496-143">**WCF-NetMsmq adapter:** Provides support for queuing by leveraging Message Queuing (also known as MSMQ) as a transport and enables support for loosely coupled applications, failure isolation, load-leveling, and disconnected operations.</span></span>  
  
5.  <span data-ttu-id="20496-144">**Wcf-netnamedpipe アダプター:** コンピューター上のプロセス間通信をセキュリティで保護の最適化を提供します。</span><span class="sxs-lookup"><span data-stu-id="20496-144">**WCF-NetNamedPipe adapter:** Provides secure optimization for on-machine cross-process communication.</span></span> <span data-ttu-id="20496-145">WCF-NetNamedPipe アダプターはトランスポート セキュリティを使用して、転送時のセキュリティ、メッセージ配信の名前付きパイプ、メッセージのバイナリ エンコードを実現します。</span><span class="sxs-lookup"><span data-stu-id="20496-145">The WCF-NetNamedPipe adapter uses transport security for transfer security, named pipes for message delivery, and binary message encoding.</span></span>  
  
     <span data-ttu-id="20496-146">これまでに説明した 5 つのアダプターは、WCF バインドに 1:1 で対応しています。</span><span class="sxs-lookup"><span data-stu-id="20496-146">Each of the five adapters just mentioned correspond to one WCF binding in a 1:1 relationship.</span></span> <span data-ttu-id="20496-147">次に述べる 2 つのカスタム アダプターの構造は、1 つの WCF CustomBinding に 2 つのカスタム アダプターが対応しているという点で、WCF モデルからは少し外れます。</span><span class="sxs-lookup"><span data-stu-id="20496-147">The structure of the two custom adapters we are about to discuss slightly breaks with the WCF model in that there are actually two distinct custom adapters that correspond to the single WCF CustomBinding.</span></span>  
  
6.  <span data-ttu-id="20496-148">**Wcf-custom アダプター:** WCF 拡張機能の使用を有効にします。</span><span class="sxs-lookup"><span data-stu-id="20496-148">**WCF-Custom adapter:** Enables the use of WCF extensibility features.</span></span> <span data-ttu-id="20496-149">このアダプターでは、受信場所、または BizTalk Server プロセスでホストされている送信ポートに対して、WCF バインドと動作情報を選択し、構成できます。</span><span class="sxs-lookup"><span data-stu-id="20496-149">The adapter allows you to select and configure a WCF binding and the behavior information for a receive location or a send port hosted in the BizTalk Server process.</span></span>  
  
7.  <span data-ttu-id="20496-150">**Wcf-customisolated アダプター:** HTTP トランスポート経由で WCF 拡張機能の使用を有効にします。</span><span class="sxs-lookup"><span data-stu-id="20496-150">**WCF-CustomIsolated adapter:** Enables the use of WCF extensibility features over the HTTP transport.</span></span> <span data-ttu-id="20496-151">このアダプターでは、インターネット インフォメーション サービス (IIS) の分離ホストで実行している受信場所に対して、WCF バインドと WCF 動作情報を選択し、構成できます。</span><span class="sxs-lookup"><span data-stu-id="20496-151">The adapter allows you to select and configure a WCF binding and the behavior information for a receive location running in the isolated host of Internet Information Services (IIS).</span></span>  
  
## <a name="what-is-the-difference-between-the-wcf-xxx-adapter-and-the-wcf-xxx-binding"></a><span data-ttu-id="20496-152">WCF-xxx アダプターと WCF-xxx バインドの違いは何ですか。</span><span class="sxs-lookup"><span data-stu-id="20496-152">What is the difference between the WCF-xxx adapter and the WCF-xxx binding?</span></span>  
 <span data-ttu-id="20496-153">各 WCF アダプターは、組み込みの WCF バインドのいずれかに対応しています。</span><span class="sxs-lookup"><span data-stu-id="20496-153">Each of the WCF adapters corresponds to one of the built-in WCF bindings.</span></span> <span data-ttu-id="20496-154">より高いレベルでは、"WCF-xxx アダプターは WCF-xxx バインドを使用しています" という表現で、これらの用語がほぼ同じ形で使用されています。</span><span class="sxs-lookup"><span data-stu-id="20496-154">At a higher level, these terms are used almost interchangeably when saying that the WCF-xxx adapter uses the WCF-xxx binding.</span></span> <span data-ttu-id="20496-155">たとえば、WCF-BasicHttp アダプターは WCF BasicHttpBinding クラスを使用します。</span><span class="sxs-lookup"><span data-stu-id="20496-155">For example, the WCF-BasicHttp adapter uses the WCF BasicHttpBinding class.</span></span> <span data-ttu-id="20496-156">WCF バインドは、WCF エンドポイントの定義の一部です。</span><span class="sxs-lookup"><span data-stu-id="20496-156">A WCF binding is part of the definition of a WCF Endpoint.</span></span> <span data-ttu-id="20496-157">WCF バインドは、WCF エンドポイントの "ABC" (アドレス、バインド、およびコントラクト) で定義されています。</span><span class="sxs-lookup"><span data-stu-id="20496-157">This is referred to in the “ABC” of a WCF endpoint, where these letters stand for Address, Binding and Contract.</span></span>  
  
 <span data-ttu-id="20496-158">バインドは、バインド要素の集まりで構成されています。</span><span class="sxs-lookup"><span data-stu-id="20496-158">A binding is made up of a collection of binding elements.</span></span> <span data-ttu-id="20496-159">各要素は、エンドポイントがクライアントと通信する方法の特定の局面を表しています。</span><span class="sxs-lookup"><span data-stu-id="20496-159">Each element describes some aspect of how the endpoint communicates with clients.</span></span> <span data-ttu-id="20496-160">バインドに必要な要素は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="20496-160">A binding must include:</span></span>  
  
-   <span data-ttu-id="20496-161">1 つ以上のトランスポート バインド要素。</span><span class="sxs-lookup"><span data-stu-id="20496-161">At least one transport binding element.</span></span>  
  
-   <span data-ttu-id="20496-162">1 つ以上のメッセージ エンコード バインド要素 (トランスポート バインド要素が既定で備えている場合もあります)。</span><span class="sxs-lookup"><span data-stu-id="20496-162">At least one message-encoding binding element (which the transport binding element can provide by default).</span></span>  
  
-   <span data-ttu-id="20496-163">任意の数の他のプロトコル バインド要素。</span><span class="sxs-lookup"><span data-stu-id="20496-163">Any number of other protocol binding elements.</span></span>  
  
 <span data-ttu-id="20496-164">この記述からランタイム環境を作成するプロセスによって、各バインド要素に基づくコードをその環境に追加できます。</span><span class="sxs-lookup"><span data-stu-id="20496-164">The process that builds a runtime environment out of this description allows each binding element to contribute code to that environment.</span></span> <span data-ttu-id="20496-165">クライアントは、多くの場合、呼び出し先の WCF サービスがサポートしているものと同じバインドの種類とアダプターを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="20496-165">It is generally required for a client to match the same binding types and adapter that the called WCF Service supports.</span></span> <span data-ttu-id="20496-166">WCF レベルでは、バインドは構成ファイルで宣言するか、コードで明示的に記述することによって定義します。</span><span class="sxs-lookup"><span data-stu-id="20496-166">At the WCF level, a binding can be defined declaratively in a configuration file or explicitly through code.</span></span> <span data-ttu-id="20496-167">WCF アダプターは、特定の WCF バインドを使用することによって通信を円滑化するため、"アダプター" と "バインド" という 2 つの用語は、ほぼ同じ意味で使用される傾向があります。</span><span class="sxs-lookup"><span data-stu-id="20496-167">A WCF adapter facilitates communication using a specific WCF binding, and thus the terms “adapter” and “binding” tend to become almost identical in their usage.</span></span>  
  
## <a name="when-using-the-wcf-adapters-how-do-you-decide-which-wcf-binding-to-use"></a><span data-ttu-id="20496-168">WCF アダプターを使用する場合、どのようにして WCF バインドを選択すればよいですか。</span><span class="sxs-lookup"><span data-stu-id="20496-168">When using the WCF adapters, how do you decide which WCF binding to use?</span></span>  
 <span data-ttu-id="20496-169">使用する WCF バインドを決定するときは、まずメッセージングのパターン、次に外部的な制約、3 番目にパフォーマンスという優先順位で考慮します。</span><span class="sxs-lookup"><span data-stu-id="20496-169">You can make this decision based upon the messaging pattern, external constraints, and performance, in that order.</span></span>  
  
1.  <span data-ttu-id="20496-170">**メッセージング パターン:** 通信のパターンがどのように通信が発生したメッセージの流れを基準。</span><span class="sxs-lookup"><span data-stu-id="20496-170">**Messaging pattern:** The pattern of communication is how the communication occurs based on the flow of the message.</span></span> <span data-ttu-id="20496-171">たとえば、メッセージが一方的 (要求) であるか双方向 (要求 - 応答) であるか、トランザクションやキューの対象となるのかどうか、などについて考慮します。</span><span class="sxs-lookup"><span data-stu-id="20496-171">For example, the message may be one-way (request) or two-way (request-response), it may be transacted, it may be queued, and so on.</span></span>  
  
    -   <span data-ttu-id="20496-172">メッセージがキューの対象になる場合、キューおよびトランザクションの対象となる一方向の通信をサポートする WCF-NetMsmq アダプターを使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="20496-172">If it is queued, you need to use the WCF-NetMsmq adapter, which supports one-way queued transacted communication.</span></span>  
  
    -   <span data-ttu-id="20496-173">2 つのコンピューター間を移動する双方向の要求 - 応答パターンの場合、HTTP (できる限り柔軟性を維持することを重視する場合) または WCF-NetTcp (パフォーマンスを重視する場合) を使用します。</span><span class="sxs-lookup"><span data-stu-id="20496-173">If the pattern is a two-way request-response and flows between two computers, you would use HTTP (if you are concerned about being as flexible as possible), or WCF-NetTcp (if you are concerned about performance).</span></span>  
  
    -   <span data-ttu-id="20496-174">メッセージが 1 台のコンピューター内でやり取りされ、複数のプロセス間を移動するだけの場合は、WCF-NetNamedPipe バインドを使用できます。</span><span class="sxs-lookup"><span data-stu-id="20496-174">If the message remains on a single computer and flows simply between processes, you can use the WCF-NetNamedPipe binding.</span></span>  
  
2.  <span data-ttu-id="20496-175">**外部的な制約:** 特定のバインディングを使用するよう指示がある可能性があります。</span><span class="sxs-lookup"><span data-stu-id="20496-175">**External constraints:** There may be issues that dictate you use a specific binding.</span></span> <span data-ttu-id="20496-176">たとえば、外部システムで SOAP Web サービス バージョン 1.2 とアドレス指定 1.0 が必須になっている場合があるとします。</span><span class="sxs-lookup"><span data-stu-id="20496-176">For instance, suppose the external system requires SOAP Web Services version 1.2 and Addressing 1.0.</span></span> <span data-ttu-id="20496-177">ここでは、Wcf-wshttp アダプターを使用する WSHttpBinding がバインディング最適です。</span><span class="sxs-lookup"><span data-stu-id="20496-177">In this case, the best binding choice is WSHttpBinding using the WCF-WsHttp adapter.</span></span> <span data-ttu-id="20496-178">また、外部システムでは、多くの場合、特定のセキュリティ モードの構成が必須になっています。</span><span class="sxs-lookup"><span data-stu-id="20496-178">In all likelihood, the external system would also have requirements around the particular security mode to configure.</span></span> <span data-ttu-id="20496-179">外部システムで Soap Web サービス 1.1 が必須になっている場合は、WCF-BasicHttp アダプター (HTTP バインド) を使用します。</span><span class="sxs-lookup"><span data-stu-id="20496-179">If the external system required Soap Web Services 1.1 you would use the WCF-BasicHttp adapter for the HTTP binding.</span></span>  
  
3.  <span data-ttu-id="20496-180">**パフォーマンス:** でバインディングを選択を使用するアプリケーションで決定要因があります、呼び出しが行われた速度。</span><span class="sxs-lookup"><span data-stu-id="20496-180">**Performance:** How fast the call is made may be a deciding factor in which binding you choose to use in your application:</span></span>  
  
    -   <span data-ttu-id="20496-181">WCF サービスが BizTalk Server と同じコンピューター上にある場合は、WCF-NetNamedPipe のパフォーマンスが最も優れています。</span><span class="sxs-lookup"><span data-stu-id="20496-181">If the WCF service is on the same computer as BizTalk Server, using the WCF-NetNamedPipe adapter is the best performance choice.</span></span>  
  
    -   <span data-ttu-id="20496-182">WCF サービスがローカル ネットワーク上にある場合は、WCF-NetTcp のパフォーマンスが最も優れています。</span><span class="sxs-lookup"><span data-stu-id="20496-182">If the WCF service is on your local network, WCF-NetTcp yields the best performance.</span></span>  
  
    -   <span data-ttu-id="20496-183">パフォーマンスがそれほど重要な問題ではなく、呼び出しがインターネットを介して行われる場合は、HTTP ベースのアダプター (WCF-WsHttp または WCF-BasicHttp) のいずれかを使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="20496-183">If performance is not a major concern and the call is going across the Internet, either of the HTTP-based adapters (WCF-WsHttp or WCF-BasicHttp) is the right adapter.</span></span>  
  
         <span data-ttu-id="20496-184">どちらのアダプターを使用するかは、HTTP の高度な機能を使用するか (WCF-WsHttp)、基本的な機能だけを使用するか (WCF-BasicHttp) に応じて決定します。</span><span class="sxs-lookup"><span data-stu-id="20496-184">Whether you are using any advanced HTTP functionality (WCF-WsHttp) or just basic functionality (WCF-BasicHttp) will dictate which HTTP-based adapter is the best choice to use.</span></span>  
  
## <a name="when-do-you-use-one-of-the-two-custom-wcf-adapters"></a><span data-ttu-id="20496-185">2 つのカスタム WCF アダプターを使用するのはどのような場合ですか。</span><span class="sxs-lookup"><span data-stu-id="20496-185">When do you use one of the two custom WCF adapters?</span></span>  
 <span data-ttu-id="20496-186">BizTalk Server に付属する 2 つのカスタム WCF アダプターがあります。</span><span class="sxs-lookup"><span data-stu-id="20496-186">There are two custom WCF adapters that ship with BizTalk Server.</span></span> <span data-ttu-id="20496-187">カスタム アダプターが 2 つある理由は、BizTalk Server では、特定の種類のアダプターのホスティング状況をシステムに登録する必要があるためです。</span><span class="sxs-lookup"><span data-stu-id="20496-187">The reason there are two custom adapters is because BizTalk Server requires that the hosting of a particular adapter type needs to be part of its registration with the system.</span></span> <span data-ttu-id="20496-188">WCF フレームワークには、カスタム バインドの種類が 1 つしかありませんが、BizTalk Server では、既存の BizTalk アダプター モデルによるこの制限に対応するため、2 つのカスタム アダプターが用意されています。</span><span class="sxs-lookup"><span data-stu-id="20496-188">Although there is only one CustomBinding type in the WCF  Framework, there are two custom adapters in BizTalk Server to accommodate this limitation in the pre-existing BizTalk adapter model.</span></span> <span data-ttu-id="20496-189">これらのカスタム アダプターでは、WCF チャネル スタックの構成を全面的に制御できるため、実際に必要になるのはこれらのアダプターだけです。</span><span class="sxs-lookup"><span data-stu-id="20496-189">In reality, these adapters are really the only adapters you ever need because they allow complete control over the WCF channel stack configuration.</span></span>  
  
 <span data-ttu-id="20496-190">カスタム アダプターを使用する場合の唯一のデメリットは、WCF の構成やさまざまな機能拡張技法に関する詳しい知識がユーザーに必要とされることです。</span><span class="sxs-lookup"><span data-stu-id="20496-190">The only drawback to custom adapters is that they also require you to be very knowledgeable about WCF configuration and the various extensibility techniques.</span></span>  <span data-ttu-id="20496-191">標準 WCF バインドのアダプターが用意されているのは、構成を簡素化するためです。</span><span class="sxs-lookup"><span data-stu-id="20496-191">Simplifying configuration is why Microsoft provides adapters for standard WCF bindings.</span></span> <span data-ttu-id="20496-192">標準バインドは、一般的な使用方法の大部分に対応すると共に、BizTalk Server を通じたメッセージの送受信をできるだけ簡単にするために、あらかじめ定義されています。</span><span class="sxs-lookup"><span data-stu-id="20496-192">The standard bindings are predefined to cover most of the common use cases and to make sending and receiving messages through BizTalk Server as simple as possible.</span></span> <span data-ttu-id="20496-193">通常、カスタム アダプターのいずれかを使用する必要があるのは、実際の送信ポートまたは受信場所の要件に、標準バインドでは対応できない部分がある場合だけです。</span><span class="sxs-lookup"><span data-stu-id="20496-193">The need to use one of these custom adapters typically occurs only when the standard bindings fail to completely or precisely meet the requirements for your send port or receive location.</span></span> <span data-ttu-id="20496-194">たとえば、メッセージに独自の圧縮体系を使用するアプリケーションがあるとします。</span><span class="sxs-lookup"><span data-stu-id="20496-194">For example, there may be an application using a proprietary compression scheme for its messages.</span></span> <span data-ttu-id="20496-195">これに対応するには、カスタムのバインド要素を作成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="20496-195">To support this, a custom binding element will have to be written.</span></span> <span data-ttu-id="20496-196">2 つの標準カスタム アダプターのいずれかを使用すると、そのような送信要件を処理するようにカスタム バインドを構成できます。</span><span class="sxs-lookup"><span data-stu-id="20496-196">Using one of the two standard custom adapters allows configuration of this custom binding to handle the transmission requirement.</span></span> <span data-ttu-id="20496-197">このように、カスタム アダプターを使用すると、チャネル スタック内のその通信プロセスのバインドの構成を、より詳細に制御できるようになります。</span><span class="sxs-lookup"><span data-stu-id="20496-197">Thus, a custom adapter allows a higher level of control over the configuration of the bindings for that communication process through the channel stack.</span></span>  
  
 <span data-ttu-id="20496-198">カスタム アダプターとカスタム分離アダプターの主な違いは、ホスティング方法にありますが、ホスティング方法が影響するのは、BizTalk Server の受信側だけです。</span><span class="sxs-lookup"><span data-stu-id="20496-198">The primary difference between the Custom and Custom Isolated adapters is one of hosting, and hosting only impacts the receive side of BizTalk Server.</span></span> <span data-ttu-id="20496-199">WCF-CustomIsolated アダプターは、受信場所でのみ使用され、送信ポートでは使用されません。</span><span class="sxs-lookup"><span data-stu-id="20496-199">The WCF-CustomIsolated adapter is used with a receive location only and not with a send port.</span></span> <span data-ttu-id="20496-200">"Isolated (分離)" とは、BizTalk Server の BtsNtSvc.exe プロセス以外の場所でホストされていることを表す BizTalk の用語です。</span><span class="sxs-lookup"><span data-stu-id="20496-200">The term “Isolated” is a BizTalk phrase that refers to being hosted outside of the BizTalk Server BtsNtSvc.exe process.</span></span> <span data-ttu-id="20496-201">このため、WCF-CustomIsolated アダプターは、インターネット インフォメーション サービス (IIS) 内で HTTP トランスポートを使用するトランスポートが、標準の BtsNtSvc.exe プロセス以外の場所でホストされている場合に使用します。</span><span class="sxs-lookup"><span data-stu-id="20496-201">Therefore, the WCF-CustomIsolated adapter is used when the transport is hosted outside the standard BtsNtSvc.exe process within Internet Information Services (IIS) using the HTTP transport.</span></span> <span data-ttu-id="20496-202">WCF-Custom アダプターは、受信場所と送信ポートのどちらでも使用できます。</span><span class="sxs-lookup"><span data-stu-id="20496-202">The WCF-Custom adapter can be used with either a receive location or a send port.</span></span> <span data-ttu-id="20496-203">このアダプターは、トランスポートが標準の BtsNtSvc.exe プロセス内でホストされている場合に使用します。</span><span class="sxs-lookup"><span data-stu-id="20496-203">It is used when the transport is hosted inside the standard BtsNtSvc.exe process.</span></span>  
  
## <a name="how-does-a-wcf-endpoint-relate-to-biztalk-server"></a><span data-ttu-id="20496-204">WCF エンドポイントは BizTalk Server とどのように関連していますか。</span><span class="sxs-lookup"><span data-stu-id="20496-204">How does a WCF endpoint relate to BizTalk Server?</span></span>  
 <span data-ttu-id="20496-205">WCF エンドポイントは、アドレス、バインド、およびコントラクト (ABC) で構成されます。</span><span class="sxs-lookup"><span data-stu-id="20496-205">A WCF endpoint is composed of an address, a binding, and a contract (ABC).</span></span> <span data-ttu-id="20496-206">BizTalk Server 内では、ユーザーが受信場所または送信ポートでアドレスを指定します。</span><span class="sxs-lookup"><span data-stu-id="20496-206">Within BizTalk Server, the user specifies the address in the receive location or send port.</span></span> <span data-ttu-id="20496-207">バインドは、ユーザーが選択した WCF アダプターによって指定されます。</span><span class="sxs-lookup"><span data-stu-id="20496-207">The binding is dictated by the WCF adapter the user has chosen.</span></span> <span data-ttu-id="20496-208">コントラクトは、エンドポイントによって公開されるインターフェイスを指定するもので、プログラマーが決定します。</span><span class="sxs-lookup"><span data-stu-id="20496-208">The contract is programmer-driven in that it specifies the interface exposed by the endpoint.</span></span>  
  
 <span data-ttu-id="20496-209">実際のエンドポイントは、WCF メッセージの送信先となる受信場所として表されます。</span><span class="sxs-lookup"><span data-stu-id="20496-209">The actual endpoint exists as a receive location to which WCF messages are sent.</span></span>  <span data-ttu-id="20496-210">BizTalk Server アプリケーションで WCF エンドポイントを公開するには、次のようなさまざまな方法があります。</span><span class="sxs-lookup"><span data-stu-id="20496-210">There are multiple ways to expose a WCF endpoint in a BizTalk Server application:</span></span>  
  
-   <span data-ttu-id="20496-211">BizTalk WCF サービス公開ウィザードを使用して、BizTalk オーケストレーションを WCF エンドポイントとして公開します。</span><span class="sxs-lookup"><span data-stu-id="20496-211">You can use the BizTalk WCF Service Publishing Wizard to publish a BizTalk orchestration as a WCF endpoint.</span></span>  
  
-   <span data-ttu-id="20496-212">BizTalk WCF サービス公開ウィザードを使用して、既存の BizTalk アプリケーション内に受信場所を作成します。</span><span class="sxs-lookup"><span data-stu-id="20496-212">You can use the BizTalk WCF Service Publishing Wizard to create a receive location in an existing BizTalk application.</span></span>  
  
-   <span data-ttu-id="20496-213">コードで受信場所のバインドとアドレスを構成して、WCF エンドポイントを手動で作成します。</span><span class="sxs-lookup"><span data-stu-id="20496-213">You can manually create a WCF endpoint by configuring a receive location’s binding and address in code.</span></span>  <span data-ttu-id="20496-214">この場合、受信場所は実際には型指定されません。</span><span class="sxs-lookup"><span data-stu-id="20496-214">In this case the receive location is actually un-typed.</span></span>  <span data-ttu-id="20496-215">コントラクトは、単純に WCF メッセージ クラスに基づいて指定されるため、任意の形式のメッセージを MessageBox データベースに受信できます。</span><span class="sxs-lookup"><span data-stu-id="20496-215">It has a contract that is specified purely in terms of the WCF Message class, allowing it to receive any message format into the MessageBox database.</span></span>  
  
 <span data-ttu-id="20496-216">WCF アダプターを使用する各 BizTalk 受信場所は、WCF クライアントの呼び出し先となる WCF エンドポイントとして公開されます。</span><span class="sxs-lookup"><span data-stu-id="20496-216">Each BizTalk receive location that uses a WCF adapter is exposed as a WCF endpoint into which a WCF client can make a call.</span></span>  <span data-ttu-id="20496-217">受信場所は、独自の WCF ServiceHost を内部的に使用するため、さまざまな受信場所を互いに影響することなく有効化または無効化できます。</span><span class="sxs-lookup"><span data-stu-id="20496-217">A receive location internally uses its own WCF ServiceHost to allow the different receive locations to be enabled or disabled independently of each other.</span></span> <span data-ttu-id="20496-218">サービス エンドポイントの有効期限は、その受信場所が有効化されている間、継続します。</span><span class="sxs-lookup"><span data-stu-id="20496-218">The lifetime of the service endpoint exists as long as that receive location is enabled.</span></span> <span data-ttu-id="20496-219">WCF ServiceHosts が、受信ポートではなく受信場所に対応しているのは、この有効期限があるためです。</span><span class="sxs-lookup"><span data-stu-id="20496-219">It is because of this lifetime issue that WCF ServiceHosts correspond to receive locations rather than to receive ports.</span></span> <span data-ttu-id="20496-220">WCF の設計により、個別の ServiceHost の実行時リソースとしてのコストを抑えることができるため、多くの ServiceHost を同じ実行可能ファイル内で問題なく実行できます。</span><span class="sxs-lookup"><span data-stu-id="20496-220">The design of WCF ensures that individual ServiceHosts are not expensive in terms of runtime resources and many can be run within the same executable without any trouble.</span></span>  
  
 <span data-ttu-id="20496-221">WCF アダプターを使用する各 BizTalk 送信ポートは、WCF サービスに対する呼び出しに対応しています。</span><span class="sxs-lookup"><span data-stu-id="20496-221">Each BizTalk send port that uses a WCF adapter corresponds to a call made to a WCF service.</span></span> <span data-ttu-id="20496-222">送信するメッセージがある場合、BizTalk Server は、これらのメッセージをアダプターに渡し、これに対応して BizTalk WCF アダプター内で WCF クライアント プロキシが作成されます。</span><span class="sxs-lookup"><span data-stu-id="20496-222">When there are messages to be sent, BizTalk Server gives the adapter those messages that correspond to the creation of the WCF client proxy within the BizTalk WCF adapter.</span></span> <span data-ttu-id="20496-223">メッセージの送信後、WCF クライアント プロキシは解放されます。</span><span class="sxs-lookup"><span data-stu-id="20496-223">After the messages are sent the WCF client proxy is released.</span></span> <span data-ttu-id="20496-224">送信ポートにおける WCF の有効期限は、プロキシの作成、使用、および破棄に基づいて決定されます。</span><span class="sxs-lookup"><span data-stu-id="20496-224">The WCF lifetime on a send port constantly comes and goes as a proxy is created, used, and torn down.</span></span>